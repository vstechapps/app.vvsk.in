var _se=Object.defineProperty,yse=Object.defineProperties;var vse=Object.getOwnPropertyDescriptors;var Jx=Object.getOwnPropertySymbols;var mH=Object.prototype.hasOwnProperty,gH=Object.prototype.propertyIsEnumerable;var pH=(n,e,t)=>e in n?_se(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,re=(n,e)=>{for(var t in e||={})mH.call(e,t)&&pH(n,t,e[t]);if(Jx)for(var t of Jx(e))gH.call(e,t)&&pH(n,t,e[t]);return n},ct=(n,e)=>yse(n,vse(e));var bp=(n,e)=>{var t={};for(var i in n)mH.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Jx)for(var i of Jx(n))e.indexOf(i)<0&&gH.call(n,i)&&(t[i]=n[i]);return t};var Wr=null,Zx=!1,GR=1,bse=null,as=Symbol("SIGNAL");function jt(n){let e=Wr;return Wr=n,e}function tw(){return Wr}var xp={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function iy(n){if(Zx)throw new Error("");if(Wr===null)return;Wr.consumerOnSignalRead(n);let e=Wr.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Wr.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Wr.producers,t!==void 0&&t.producer===n)){Wr.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Wr&&(!i||wse(r,Wr)))return;let s=Ep(Wr),o={producer:n,consumer:Wr,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Wr.producersTail=o,e!==void 0?e.nextProducer=o:Wr.producers=o,s&&bH(n,o)}function _H(){GR++}function WR(n){if(!(Ep(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===GR)){if(!n.producerMustRecompute(n)&&!sy(n)){jR(n);return}n.producerRecomputeValue(n),jR(n)}}function $R(n){if(n.consumers===void 0)return;let e=Zx;Zx=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||xse(i)}}finally{Zx=e}}function qR(){return Wr?.consumerAllowSignalWrites!==!1}function xse(n){n.dirty=!0,$R(n),n.consumerMarkedDirty?.(n)}function jR(n){n.dirty=!1,n.lastCleanEpoch=GR}function wp(n){return n&&yH(n),jt(n)}function yH(n){n.producersTail=void 0,n.recomputing=!0}function ry(n,e){jt(e),n&&vH(n)}function vH(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ep(n))do t=KR(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function sy(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(WR(t),i!==t.version))return!0}return!1}function ih(n){if(Ep(n)){let e=n.producers;for(;e!==void 0;)e=KR(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function bH(n,e){let t=n.consumersTail,i=Ep(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)bH(r.producer,r)}function KR(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!Ep(e)){let s=e.producers;for(;s!==void 0;)s=KR(s)}return t}function Ep(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function XR(n){bse?.(n)}function wse(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function YR(n,e){return Object.is(n,e)}function nw(n,e){let t=Object.create(Ese);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(WR(t),iy(t),t.value===ew)throw t.error;return t.value};return i[as]=t,XR(t),i}var zR=Symbol("UNSET"),HR=Symbol("COMPUTING"),ew=Symbol("ERRORED"),Ese=ct(re({},xp),{value:zR,dirty:!0,error:null,equal:YR,kind:"computed",producerMustRecompute(n){return n.value===zR||n.value===HR},producerRecomputeValue(n){if(n.value===HR)throw new Error("");let e=n.value;n.value=HR;let t=wp(n),i,r=!1;try{i=n.computation(),jt(null),r=e!==zR&&e!==ew&&i!==ew&&n.equal(e,i)}catch(s){i=ew,n.error=s}finally{ry(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function Sse(){throw new Error}var xH=Sse;function wH(n){xH(n)}function QR(n){xH=n}var Tse=null;function JR(n,e){let t=Object.create(iw);t.value=n,e!==void 0&&(t.equal=e);let i=()=>EH(t);return i[as]=t,XR(t),[i,o=>oy(t,o),o=>SH(t,o)]}function EH(n){return iy(n),n.value}function oy(n,e){qR()||wH(n),n.equal(n.value,e)||(n.value=e,Ise(n))}function SH(n,e){qR()||wH(n),oy(n,e(n.value))}var iw=ct(re({},xp),{equal:YR,value:void 0,kind:"signal"});function Ise(n){n.version++,_H(),$R(n),Tse?.(n)}function ZR(n){let e=jt(null);try{return n()}finally{jt(e)}}var e1=ct(re({},xp),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function t1(n){if(n.dirty=!1,n.version>0&&!sy(n))return;n.version++;let e=wp(n);try{n.cleanup(),n.fn()}finally{ry(n,e)}}function Xt(n){return typeof n=="function"}function Sp(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rw=Sp(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function rh(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Nn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Xt(i))try{i()}catch(s){e=s instanceof rw?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{TH(s)}catch(o){e=e??[],o instanceof rw?e=[...e,...o.errors]:e.push(o)}}if(e)throw new rw(e)}}add(e){var t;if(e&&e!==this)if(this.closed)TH(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&rh(t,e)}remove(e){let{_finalizers:t}=this;t&&rh(t,e),e instanceof n&&e._removeParent(this)}};Nn.EMPTY=(()=>{let n=new Nn;return n.closed=!0,n})();var n1=Nn.EMPTY;function sw(n){return n instanceof Nn||n&&"closed"in n&&Xt(n.remove)&&Xt(n.add)&&Xt(n.unsubscribe)}function TH(n){Xt(n)?n():n.unsubscribe()}var Xo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Tp={setTimeout(n,e,...t){let{delegate:i}=Tp;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Tp;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ow(n){Tp.setTimeout(()=>{let{onUnhandledError:e}=Xo;if(e)e(n);else throw n})}function sh(){}var IH=i1("C",void 0,void 0);function CH(n){return i1("E",void 0,n)}function AH(n){return i1("N",n,void 0)}function i1(n,e,t){return{kind:n,value:e,error:t}}var oh=null;function Ip(n){if(Xo.useDeprecatedSynchronousErrorHandling){let e=!oh;if(e&&(oh={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=oh;if(oh=null,t)throw i}}else n()}function MH(n){Xo.useDeprecatedSynchronousErrorHandling&&oh&&(oh.errorThrown=!0,oh.error=n)}var ah=class extends Nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sw(e)&&e.add(this)):this.destination=Mse}static create(e,t,i){return new Lc(e,t,i)}next(e){this.isStopped?s1(AH(e),this):this._next(e)}error(e){this.isStopped?s1(CH(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?s1(IH,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Cse=Function.prototype.bind;function r1(n,e){return Cse.call(n,e)}var o1=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){aw(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){aw(i)}else aw(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){aw(t)}}},Lc=class extends ah{constructor(e,t,i){super();let r;if(Xt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Xo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&r1(e.next,s),error:e.error&&r1(e.error,s),complete:e.complete&&r1(e.complete,s)}):r=e}this.destination=new o1(r)}};function aw(n){Xo.useDeprecatedSynchronousErrorHandling?MH(n):ow(n)}function Ase(n){throw n}function s1(n,e){let{onStoppedNotification:t}=Xo;t&&Tp.setTimeout(()=>t(n,e))}var Mse={closed:!0,next:sh,error:Ase,complete:sh};var Cp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ys(n){return n}function ch(...n){return a1(n)}function a1(n){return n.length===0?Ys:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var gt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=Rse(t)?t:new Lc(t,i,r);return Ip(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=DH(i),new i((r,s)=>{let o=new Lc({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Cp](){return this}pipe(...t){return a1(t)(this)}toPromise(t){return t=DH(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function DH(n){var e;return(e=n??Xo.Promise)!==null&&e!==void 0?e:Promise}function Dse(n){return n&&Xt(n.next)&&Xt(n.error)&&Xt(n.complete)}function Rse(n){return n&&n instanceof ah||Dse(n)&&sw(n)}function Pse(n){return Xt(n?.lift)}function ln(n){return e=>{if(Pse(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function hn(n,e,t,i,r){return new c1(n,e,t,i,r)}var c1=class extends ah{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var RH=Sp(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class n extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new cw(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new RH}next(t){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ip(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?n1:(this.currentObservers=null,s.push(t),new Nn(()=>{this.currentObservers=null,rh(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new gt;return t.source=this,t}}return n.create=(e,t)=>new cw(e,t),n})(),cw=class extends At{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:n1}};var Bi=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var l1={now(){return(l1.delegate||Date).now()},delegate:void 0};var lw=class extends Nn{constructor(e,t){super()}schedule(e,t=0){return this}};var ay={setInterval(n,e,...t){let{delegate:i}=ay;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ay;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ap=class extends lw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return ay.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&ay.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rh(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Mp=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Mp.now=l1.now;var Dp=class extends Mp{constructor(e,t=Mp.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var xu=new Dp(Ap),u1=xu;var uw=class extends Ap{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var dw=class extends Dp{};var d1=new dw(uw);var $r=new gt(n=>n.complete());function hw(n){return n&&Xt(n.schedule)}function h1(n){return n[n.length-1]}function fw(n){return Xt(h1(n))?n.pop():void 0}function Ua(n){return hw(h1(n))?n.pop():void 0}function PH(n,e){return typeof h1(n)=="number"?n.pop():e}function pw(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function kH(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function NH(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lh(n){return this instanceof lh?(this.v=n,this):new lh(n)}function OH(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){i[f]&&(r[f]=function(v){return new Promise(function(_,b){s.push([f,v,_,b])>1||c(f,v)})},g&&(r[f]=g(r[f])))}function c(f,g){try{l(i[f](g))}catch(v){h(s[0][3],v)}}function l(f){f.value instanceof lh?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function LH(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof NH=="function"?NH(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var mw=n=>n&&typeof n.length=="number"&&typeof n!="function";function gw(n){return Xt(n?.then)}function _w(n){return Xt(n[Cp])}function yw(n){return Symbol.asyncIterator&&Xt(n?.[Symbol.asyncIterator])}function vw(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Nse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bw=Nse();function xw(n){return Xt(n?.[bw])}function ww(n){return OH(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield lh(t.read());if(r)return yield lh(void 0);yield yield lh(i)}}finally{t.releaseLock()}})}function Ew(n){return Xt(n?.getReader)}function ri(n){if(n instanceof gt)return n;if(n!=null){if(_w(n))return kse(n);if(mw(n))return Ose(n);if(gw(n))return Lse(n);if(yw(n))return FH(n);if(xw(n))return Fse(n);if(Ew(n))return Vse(n)}throw vw(n)}function kse(n){return new gt(e=>{let t=n[Cp]();if(Xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ose(n){return new gt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Lse(n){return new gt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ow)})}function Fse(n){return new gt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function FH(n){return new gt(e=>{Use(n,e).catch(t=>e.error(t))})}function Vse(n){return FH(ww(n))}function Use(n,e){var t,i,r,s;return kH(this,void 0,void 0,function*(){try{for(t=LH(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function xs(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function wu(n,e=0){return ln((t,i)=>{t.subscribe(hn(i,r=>xs(i,n,()=>i.next(r),e),()=>xs(i,n,()=>i.complete(),e),r=>xs(i,n,()=>i.error(r),e)))})}function Eu(n,e=0){return ln((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function VH(n,e){return ri(n).pipe(Eu(e),wu(e))}function UH(n,e){return ri(n).pipe(Eu(e),wu(e))}function BH(n,e){return new gt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function zH(n,e){return new gt(t=>{let i;return xs(t,e,()=>{i=n[bw](),xs(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>Xt(i?.return)&&i.return()})}function Sw(n,e){if(!n)throw new Error("Iterable cannot be null");return new gt(t=>{xs(t,e,()=>{let i=n[Symbol.asyncIterator]();xs(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function HH(n,e){return Sw(ww(n),e)}function jH(n,e){if(n!=null){if(_w(n))return VH(n,e);if(mw(n))return BH(n,e);if(gw(n))return UH(n,e);if(yw(n))return Sw(n,e);if(xw(n))return zH(n,e);if(Ew(n))return HH(n,e)}throw vw(n)}function _i(n,e){return e?jH(n,e):ri(n)}function bt(...n){let e=Ua(n);return _i(n,e)}function cy(n,e){let t=Xt(n)?n:()=>n,i=r=>r.error(t());return new gt(e?r=>e.schedule(i,0,r):i)}function ly(n){return!!n&&(n instanceof gt||Xt(n.lift)&&Xt(n.subscribe))}var uh=Sp(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function GH(n){return n instanceof Date&&!isNaN(n)}function pt(n,e){return ln((t,i)=>{let r=0;t.subscribe(hn(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:Bse}=Array;function zse(n,e){return Bse(e)?n(...e):n(e)}function Tw(n){return pt(e=>zse(n,e))}var{isArray:Hse}=Array,{getPrototypeOf:jse,prototype:Gse,keys:Wse}=Object;function Iw(n){if(n.length===1){let e=n[0];if(Hse(e))return{args:e,keys:null};if($se(e)){let t=Wse(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function $se(n){return n&&typeof n=="object"&&jse(n)===Gse}function Cw(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function f1(...n){let e=Ua(n),t=fw(n),{args:i,keys:r}=Iw(n);if(i.length===0)return _i([],e);let s=new gt(qse(i,e,r?o=>Cw(r,o):Ys));return t?s.pipe(Tw(t)):s}function qse(n,e,t=Ys){return i=>{WH(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)WH(e,()=>{let l=_i(n[c],e),u=!1;l.subscribe(hn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function WH(n,e,t){n?xs(t,n,e):e()}function $H(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<i?g(v):c.push(v),g=v=>{s&&e.next(v),l++;let _=!1;ri(t(v,u++)).subscribe(hn(e,b=>{r?.(b),s?f(b):e.next(b)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<i;){let b=c.shift();o?xs(e,o,()=>g(b)):g(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(hn(e,f,()=>{d=!0,h()})),()=>{a?.()}}function cs(n,e,t=1/0){return Xt(e)?cs((i,r)=>pt((s,o)=>e(i,s,r,o))(ri(n(i,r))),t):(typeof e=="number"&&(t=e),ln((i,r)=>$H(i,r,n,t)))}function Aw(n=1/0){return cs(Ys,n)}function qH(){return Aw(1)}function Rp(...n){return qH()(_i(n,Ua(n)))}function uy(n){return new gt(e=>{ri(n()).subscribe(e)})}function dy(...n){let e=fw(n),{args:t,keys:i}=Iw(n),r=new gt(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;ri(t[u]).subscribe(hn(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?Cw(i,a):a),s.complete())}))}});return e?r.pipe(Tw(e)):r}function KH(n=0,e,t=u1){let i=-1;return e!=null&&(hw(e)?t=e:i=e),new gt(r=>{let s=GH(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function dh(...n){let e=Ua(n),t=PH(n,1/0),i=n;return i.length?i.length===1?ri(i[0]):Aw(t)(_i(i,e)):$r}var Fc=new gt(sh);function ei(n,e){return ln((t,i)=>{let r=0;t.subscribe(hn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function XH(n){return ln((e,t)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(hn(t,l=>{i=!0,r=l,s||ri(n(l)).subscribe(s=hn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}function Mw(n,e=xu){return XH(()=>KH(n,e))}function hh(n){return ln((e,t)=>{let i=null,r=!1,s;i=e.subscribe(hn(t,void 0,void 0,o=>{s=ri(n(o,hh(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Pp(n,e){return Xt(e)?cs(n,e,1):cs(n,1)}function hy(n,e=xu){return ln((t,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}t.subscribe(hn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function p1(n){return ln((e,t)=>{let i=!1;e.subscribe(hn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function zi(n){return n<=0?()=>$r:ln((e,t)=>{let i=0;e.subscribe(hn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function fh(n,e=Ys){return n=n??Kse,ln((t,i)=>{let r,s=!0;t.subscribe(hn(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Kse(n,e){return n===e}function YH(n=Xse){return ln((e,t)=>{let i=!1;e.subscribe(hn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Xse(){return new uh}function ph(n){return ln((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vc(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ei((r,s)=>n(r,s,i)):Ys,zi(1),t?p1(e):YH(()=>new uh))}function Dw(n){return n<=0?()=>$r:ln((e,t)=>{let i=[];e.subscribe(hn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function g1(n={}){let{connector:e=()=>new At,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},g=()=>{let v=o;f(),v?.unsubscribe()};return ln((v,_)=>{l++,!d&&!u&&h();let b=c=c??e();_.add(()=>{l--,l===0&&!d&&!u&&(a=m1(g,r))}),b.subscribe(_),!o&&l>0&&(o=new Lc({next:R=>b.next(R),error:R=>{d=!0,h(),a=m1(f,t,R),b.error(R)},complete:()=>{u=!0,h(),a=m1(f,i),b.complete()}}),ri(v).subscribe(o))})(s)}}function m1(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Lc({next:()=>{i.unsubscribe(),n()}});return ri(e(...t)).subscribe(i)}function _1(n){return ei((e,t)=>n<=t)}function Uc(...n){let e=Ua(n);return ln((t,i)=>{(e?Rp(n,t,e):Rp(n,t)).subscribe(i)})}function yi(n,e){return ln((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(hn(i,c=>{r?.unsubscribe();let l=0,u=s++;ri(n(c,u)).subscribe(r=hn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Ba(n){return ln((e,t)=>{ri(n).subscribe(hn(t,()=>t.complete(),sh)),!t.closed&&e.subscribe(t)})}function Hi(n,e,t){let i=Xt(n)||e||t?{next:n,error:e,complete:t}:n;return i?ln((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(hn(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Ys}var y1;function Rw(){return y1}function za(n){let e=y1;return y1=n,e}var QH=Symbol("NotFound");function Np(n){return n===QH||n?.name==="\u0275NotFound"}var Su=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},P1=new Su("21.0.1");var Vw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",me=class extends Error{code;constructor(e,t){super(Ha(e,t)),this.code=e}};function Yse(n){return`NG0${Math.abs(n)}`}function Ha(n,e){return`${Yse(n)}${e?": "+e:""}`}var xo=globalThis;function Gn(n){for(let e in n)if(n[e]===Gn)return e;throw Error("")}function nj(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(zc).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Uw(n,e){return n?e?`${n} ${e}`:n:e||""}var Qse=Gn({__forward_ref__:Gn});function Qs(n){return n.__forward_ref__=Qs,n.toString=function(){return zc(this())},n}function Rr(n){return N1(n)?n():n}function N1(n){return typeof n=="function"&&n.hasOwnProperty(Qse)&&n.__forward_ref__===Qs}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gt(n){return{providers:n.providers||[],imports:n.imports||[]}}function vy(n){return Jse(n,Bw)}function k1(n){return vy(n)!==null}function Jse(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Zse(n){let e=n?.[Bw]??null;return e||null}function b1(n){return n&&n.hasOwnProperty(Nw)?n[Nw]:null}var Bw=Gn({\u0275prov:Gn}),Nw=Gn({\u0275inj:Gn}),Te=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function O1(n){return n&&!!n.\u0275providers}var L1=Gn({\u0275cmp:Gn}),F1=Gn({\u0275dir:Gn}),V1=Gn({\u0275pipe:Gn}),U1=Gn({\u0275mod:Gn}),py=Gn({\u0275fac:Gn}),vh=Gn({__NG_ELEMENT_ID__:Gn}),JH=Gn({__NG_ENV_ID__:Gn});function bh(n){return typeof n=="string"?n:n==null?"":String(n)}function ij(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bh(n)}var rj=Gn({ngErrorCode:Gn}),eoe=Gn({ngErrorMessage:Gn}),toe=Gn({ngTokenPath:Gn});function B1(n,e){return sj("",-200,e)}function zw(n,e){throw new me(-201,!1)}function sj(n,e,t){let i=new me(e,n);return i[rj]=e,i[eoe]=n,t&&(i[toe]=t),i}function noe(n){return n[rj]}var x1;function oj(){return x1}function ls(n){let e=x1;return x1=n,e}function z1(n,e,t){let i=vy(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;zw(n,"Injector")}var ioe={},mh=ioe,w1="__NG_DI_FLAG__",E1=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=gh(t)||0;try{return this.injector.get(e,i&8?null:mh,i)}catch(r){if(Np(r))return r;throw r}}};function roe(n,e=0){let t=Rw();if(t===void 0)throw new me(-203,!1);if(t===null)return z1(n,void 0,e);{let i=soe(e),r=t.retrieve(n,i);if(Np(r)){if(i.optional)return null;throw r}return r}}function st(n,e=0){return(oj()||roe)(Rr(n),e)}function H(n,e){return st(n,gh(e))}function gh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function soe(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function S1(n){let e=[];for(let t=0;t<n.length;t++){let i=Rr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new me(900,!1);let r,s=0;for(let o=0;o<i.length;o++){let a=i[o],c=ooe(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(st(r,s))}else e.push(st(i))}return e}function aj(n,e){return n[w1]=e,n.prototype[w1]=e,n}function ooe(n){return n[w1]}function Tu(n,e){let t=n.hasOwnProperty(py);return t?n[py]:null}function cj(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function lj(n){return n.flat(Number.POSITIVE_INFINITY)}function Hw(n,e){n.forEach(t=>Array.isArray(t)?Hw(t,e):e(t))}function H1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function by(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uj(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function dj(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function jw(n,e,t){let i=Op(n,e);return i>=0?n[i|1]=t:(i=~i,dj(n,i,e,t)),i}function Gw(n,e){let t=Op(n,e);if(t>=0)return n[t|1]}function Op(n,e){return aoe(n,e,1)}function aoe(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Au={},us=[],Mu=new Te(""),j1=new Te("",-1),G1=new Te(""),my=class{get(e,t=mh){if(t===mh){let r=sj("",-201);throw r.name="\u0275NotFound",r}return t}};function W1(n){return n[U1]||null}function jc(n){return n[L1]||null}function $1(n){return n[F1]||null}function hj(n){return n[V1]||null}function vr(n){return{\u0275providers:n}}function fj(n){return vr([{provide:Mu,multi:!0,useValue:n}])}function pj(...n){return{\u0275providers:q1(!0,n),\u0275fromNgModule:!0}}function q1(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return Hw(e,o=>{let a=o;kw(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&mj(r,s),t}function mj(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];K1(r,s=>{e(s,i)})}}function kw(n,e,t,i){if(n=Rr(n),!n)return!1;let r=null,s=b1(n),o=!s&&jc(n);if(!s&&!o){let c=n.ngModule;if(s=b1(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)kw(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{Hw(s.imports,u=>{kw(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&mj(l,e)}if(!a){let l=Tu(r)||(()=>new r);e({provide:r,useFactory:l,deps:us},r),e({provide:G1,useValue:r,multi:!0},r),e({provide:Mu,useValue:()=>st(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;K1(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function K1(n,e){for(let t of n)O1(t)&&(t=t.\u0275providers),Array.isArray(t)?K1(t,e):e(t)}var coe=Gn({provide:String,useValue:Gn});function gj(n){return n!==null&&typeof n=="object"&&coe in n}function loe(n){return!!(n&&n.useExisting)}function uoe(n){return!!(n&&n.useFactory)}function _h(n){return typeof n=="function"}function _j(n){return!!n.useClass}var xy=new Te(""),Pw={},ZH={},v1;function Lp(){return v1===void 0&&(v1=new my),v1}var ti=class{},yh=class extends ti{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,I1(e,o=>this.processProvider(o)),this.records.set(j1,kp(void 0,this)),r.has("environment")&&this.records.set(ti,kp(void 0,this));let s=this.records.get(xy);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(G1,us,{self:!0}))}retrieve(e,t){let i=gh(t)||0;try{return this.get(e,mh,i)}catch(r){if(Np(r))return r;throw r}}destroy(){fy(this),this._destroyed=!0;let e=jt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),jt(e)}}onDestroy(e){return fy(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fy(this);let t=za(this),i=ls(void 0),r;try{return e()}finally{za(t),ls(i)}}get(e,t=mh,i){if(fy(this),e.hasOwnProperty(JH))return e[JH](this);let r=gh(i),s,o=za(this),a=ls(void 0);try{if(!(r&4)){let l=this.records.get(e);if(l===void 0){let u=moe(e)&&vy(e);u&&this.injectableDefInScope(u)?l=kp(T1(e),Pw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&2?Lp():this.parent;return t=r&8&&t===mh?null:t,c.get(e,t)}catch(c){let l=noe(c);throw l===-200||l===-201?new me(l,null):c}finally{ls(a),za(o)}}resolveInjectorInitializers(){let e=jt(null),t=za(this),i=ls(void 0),r;try{let s=this.get(Mu,us,{self:!0});for(let o of s)o()}finally{za(t),ls(i),jt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(zc(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Rr(e);let t=_h(e)?e:Rr(e&&e.provide),i=hoe(e);if(!_h(e)&&e.multi===!0){let r=this.records.get(t);r||(r=kp(void 0,Pw,!0),r.factory=()=>S1(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=jt(null);try{if(t.value===ZH)throw B1(zc(e));return t.value===Pw&&(t.value=ZH,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&poe(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{jt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Rr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function T1(n){let e=vy(n),t=e!==null?e.factory:Tu(n);if(t!==null)return t;if(n instanceof Te)throw new me(204,!1);if(n instanceof Function)return doe(n);throw new me(204,!1)}function doe(n){if(n.length>0)throw new me(204,!1);let t=Zse(n);return t!==null?()=>t.factory(n):()=>new n}function hoe(n){if(gj(n))return kp(void 0,n.useValue);{let e=X1(n);return kp(e,Pw)}}function X1(n,e,t){let i;if(_h(n)){let r=Rr(n);return Tu(r)||T1(r)}else if(gj(n))i=()=>Rr(n.useValue);else if(uoe(n))i=()=>n.useFactory(...S1(n.deps||[]));else if(loe(n))i=(r,s)=>st(Rr(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=Rr(n&&(n.useClass||n.provide));if(foe(n))i=()=>new r(...S1(n.deps));else return Tu(r)||T1(r)}return i}function fy(n){if(n.destroyed)throw new me(205,!1)}function kp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function foe(n){return!!n.deps}function poe(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function moe(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function I1(n,e){for(let t of n)Array.isArray(t)?I1(t,e):t&&O1(t)?I1(t.\u0275providers,e):e(t)}function ji(n,e){let t;n instanceof yh?(fy(n),t=n):t=new E1(n);let i,r=za(t),s=ls(void 0);try{return e()}finally{za(r),ls(s)}}function yj(){return oj()!==void 0||Rw()!=null}var Yo=0,Dt=1,Ut=2,yr=3,wo=4,ds=5,Fp=6,Vp=7,Pr=8,Du=9,ja=10,si=11,Up=12,Y1=13,xh=14,Es=15,Ru=16,wh=17,Ga=18,wy=19,Q1=20,Bc=21,Ww=22,Iu=23,Js=24,Eh=25,Ey=26,vi=27,vj=1;var Pu=7,Sy=8,Sh=9,qr=10;function Wa(n){return Array.isArray(n)&&typeof n[vj]=="object"}function Qo(n){return Array.isArray(n)&&n[vj]===!0}function J1(n){return(n.flags&4)!==0}function Nu(n){return n.componentOffset>-1}function Bp(n){return(n.flags&1)===1}function $a(n){return!!n.template}function zp(n){return(n[Ut]&512)!==0}function Th(n){return(n[Ut]&256)===256}var Z1="svg",bj="math";function Eo(n){for(;Array.isArray(n);)n=n[Yo];return n}function eP(n,e){return Eo(e[n])}function Jo(n,e){return Eo(e[n.index])}function Ty(n,e){return n.data[e]}function $w(n,e){return n[e]}function tP(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function So(n,e){let t=e[n];return Wa(t)?t:t[Yo]}function xj(n){return(n[Ut]&4)===4}function qw(n){return(n[Ut]&128)===128}function wj(n){return Qo(n[yr])}function Zo(n,e){return e==null?null:n[e]}function nP(n){n[wh]=0}function iP(n){n[Ut]&1024||(n[Ut]|=1024,qw(n)&&Ih(n))}function Ej(n,e){for(;n>0;)e=e[xh],n--;return e}function Iy(n){return!!(n[Ut]&9216||n[Js]?.dirty)}function Kw(n){n[ja].changeDetectionScheduler?.notify(8),n[Ut]&64&&(n[Ut]|=1024),Iy(n)&&Ih(n)}function Ih(n){n[ja].changeDetectionScheduler?.notify(0);let e=Cu(n);for(;e!==null&&!(e[Ut]&8192||(e[Ut]|=8192,!qw(e)));)e=Cu(e)}function rP(n,e){if(Th(n))throw new me(911,!1);n[Bc]===null&&(n[Bc]=[]),n[Bc].push(e)}function Sj(n,e){if(n[Bc]===null)return;let t=n[Bc].indexOf(e);t!==-1&&n[Bc].splice(t,1)}function Cu(n){let e=n[yr];return Qo(e)?e[yr]:e}function sP(n){return n[Vp]??=[]}function oP(n){return n.cleanup??=[]}function Tj(n,e,t,i){let r=sP(e);r.push(t),n.firstCreatePass&&oP(n).push(i,r.length-1)}var en={lFrame:Fj(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var C1=!1;function Ij(){return en.lFrame.elementDepthCount}function Cj(){en.lFrame.elementDepthCount++}function aP(){en.lFrame.elementDepthCount--}function Xw(){return en.bindingsEnabled}function cP(){return en.skipHydrationRootTNode!==null}function lP(n){return en.skipHydrationRootTNode===n}function uP(){en.skipHydrationRootTNode=null}function Bt(){return en.lFrame.lView}function fi(){return en.lFrame.tView}function ci(n){return en.lFrame.contextLView=n,n[Pr]}function li(n){return en.lFrame.contextLView=null,n}function hr(){let n=dP();for(;n!==null&&n.type===64;)n=n.parent;return n}function dP(){return en.lFrame.currentTNode}function Aj(){let n=en.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Hp(n,e){let t=en.lFrame;t.currentTNode=n,t.isParent=e}function hP(){return en.lFrame.isParent}function fP(){en.lFrame.isParent=!1}function Mj(){return en.lFrame.contextLView}function pP(){return C1}function gy(n){let e=C1;return C1=n,e}function mP(){let n=en.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Dj(){return en.lFrame.bindingIndex}function Rj(n){return en.lFrame.bindingIndex=n}function Ch(){return en.lFrame.bindingIndex++}function Yw(n){let e=en.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Pj(){return en.lFrame.inI18n}function Nj(n,e){let t=en.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qw(e)}function kj(){return en.lFrame.currentDirectiveIndex}function Qw(n){en.lFrame.currentDirectiveIndex=n}function Oj(n){let e=en.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gP(){return en.lFrame.currentQueryIndex}function Jw(n){en.lFrame.currentQueryIndex=n}function goe(n){let e=n[Dt];return e.type===2?e.declTNode:e.type===1?n[ds]:null}function _P(n,e,t){if(t&4){let r=e,s=n;for(;r=r.parent,r===null&&!(t&1);)if(r=goe(s),r===null||(s=s[xh],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=en.lFrame=Lj();return i.currentTNode=e,i.lView=n,!0}function Zw(n){let e=Lj(),t=n[Dt];en.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Lj(){let n=en.lFrame,e=n===null?null:n.child;return e===null?Fj(n):e}function Fj(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Vj(){let n=en.lFrame;return en.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var yP=Vj;function eE(){let n=Vj();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Uj(n){return(en.lFrame.contextLView=Ej(n,en.lFrame.contextLView))[Pr]}function Gc(){return en.lFrame.selectedIndex}function ku(n){en.lFrame.selectedIndex=n}function Cy(){let n=en.lFrame;return Ty(n.tView,n.selectedIndex)}function Wc(){en.lFrame.currentNamespace=Z1}function Ah(){_oe()}function _oe(){en.lFrame.currentNamespace=null}function Bj(){return en.lFrame.currentNamespace}var zj=!0;function tE(){return zj}function Ay(n){zj=n}function A1(n,e=null,t=null,i){let r=vP(n,e,t,i);return r.resolveInjectorInitializers(),r}function vP(n,e=null,t=null,i,r=new Set){let s=[t||us,pj(n)];return i=i||(typeof n=="object"?void 0:zc(n)),new yh(s,e||Lp(),i||null,r)}var Yt=class n{static THROW_IF_NOT_FOUND=mh;static NULL=new my;static create(e,t){if(Array.isArray(e))return A1({name:""},t,e,"");{let i=e.name??"";return A1({name:i},e.parent,e.providers,i)}}static \u0275prov=xe({token:n,providedIn:"any",factory:()=>st(j1)});static __NG_ELEMENT_ID__=-1},zt=new Te(""),Ss=(()=>{class n{static __NG_ELEMENT_ID__=yoe;static __NG_ENV_ID__=t=>t}return n})(),Ow=class extends Ss{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Th(this._lView)}onDestroy(e){let t=this._lView;return rP(t,e),()=>Sj(t,e)}};function yoe(){return new Ow(Bt())}var Hj=!1,$c=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Bi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new gt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),M1=class extends At{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yj()&&(this.destroyRef=H(Ss,{optional:!0})??void 0,this.pendingTasks=H($c,{optional:!0})??void 0)}emit(e){let t=jt(null);try{super.next(e)}finally{jt(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Nn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},yn=M1;function Lw(...n){}function bP(n){let e,t;function i(){n=Lw;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function xP(n){return queueMicrotask(()=>n()),()=>{n=Lw}}var wP="isAngularZone",_y=wP+"_ID",voe=0,_t=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new yn(!1);onMicrotaskEmpty=new yn(!1);onStable=new yn(!1);onError=new yn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Hj}=e;if(typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,woe(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wP)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new me(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,boe,Lw,Lw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},boe={};function EP(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xoe(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){bP(()=>{n.callbackScheduled=!1,D1(n),n.isCheckStableRunning=!0,EP(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),D1(n)}function woe(n){let e=()=>{xoe(n)},t=voe++;n._inner=n._inner.fork({name:"angular",properties:{[wP]:!0,[_y]:t,[_y+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(Eoe(c))return i.invokeTask(s,o,a,c);try{return ej(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),tj(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return ej(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Soe(c)&&e(),tj(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,D1(n),EP(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function D1(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ej(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tj(n){n._nesting--,EP(n)}var yy=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new yn;onMicrotaskEmpty=new yn;onStable=new yn;onError=new yn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Eoe(n){return jj(n,"__ignore_ng_zone__")}function Soe(n){return jj(n,"__scheduler_tick__")}function jj(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ws=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ts=new Te("",{factory:()=>{let n=H(_t),e=H(ti),t;return i=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw i}):(t??=e.get(ws),t.handleError(i))})}}}),Gj={provide:Mu,useValue:()=>{let n=H(ws,{optional:!0})},multi:!0},Toe=new Te("",{factory:()=>{let n=H(zt).defaultView;if(!n)return;let e=H(Ts),t=s=>{e(s.reason),s.preventDefault()},i=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),H(Ss).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function SP(){return vr([fj(()=>void H(Toe))])}function bi(n,e){let[t,i,r]=JR(n,e?.equal),s=t,o=s[as];return s.set=i,s.update=r,s.asReadonly=Wj.bind(s),s}function Wj(){let n=this[as];if(n.readonlyFn===void 0){let e=()=>this();e[as]=n,n.readonlyFn=e}return n.readonlyFn}var My=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=Ioe}return n})();function Ioe(){return new My(Bt(),hr())}var Hc=class{},Dy=new Te("",{factory:()=>!0});var TP=new Te(""),Ou=(()=>{class n{internalPendingTasks=H($c);scheduler=H(Hc);errorHandler=H(Ts);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),nE=(()=>{class n{static \u0275prov=xe({token:n,providedIn:"root",factory:()=>new R1})}return n})(),R1=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}},Fw=class{[as];constructor(e){this[as]=e}destroy(){this[as].destroy()}};function Ry(n,e){let t=e?.injector??H(Yt),i=e?.manualCleanup!==!0?t.get(Ss):null,r,s=t.get(My,null,{optional:!0}),o=t.get(Hc);return s!==null?(r=Moe(s.view,o,n),i instanceof Ow&&i._lView===s.view&&(i=null)):r=Doe(n,t.get(nE),o),r.injector=t,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new Fw(r)}var $j=ct(re({},e1),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=gy(!1);try{t1(this)}finally{gy(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=jt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],jt(n)}}}),Coe=ct(re({},$j),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ih(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),Aoe=ct(re({},$j),{consumerMarkedDirty(){this.view[Ut]|=8192,Ih(this.view),this.notifier.notify(13)},destroy(){if(ih(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Iu]?.delete(this)}});function Moe(n,e,t){let i=Object.create(Aoe);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=qj(i,t),n[Iu]??=new Set,n[Iu].add(i),i.consumerMarkedDirty(i),i}function Doe(n,e,t){let i=Object.create(Coe);return i.fn=qj(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function qj(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ii(n){return ZR(n)}function Xp(n){return{toString:n}.toString()}var iE="__parameters__";function Loe(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function Foe(n,e,t){return Xp(()=>{let i=Loe(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(iE)?c[iE]:Object.defineProperty(c,iE,{value:[]})[iE];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Is=aj(Foe("Optional"),8);function Voe(n){return typeof n=="function"}function S5(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var fE=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}},hs=(()=>{let n=()=>T5;return n.ngInherit=!0,n})();function T5(n){return n.type.prototype.ngOnChanges&&(n.setInput=Boe),Uoe}function Uoe(){let n=C5(this),e=n?.current;if(e){let t=n.previous;if(t===Au)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Boe(n,e,t,i,r){let s=this.declaredInputs[i],o=C5(n)||zoe(n,{previous:Au,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new fE(l&&l.currentValue,t,c===Au),S5(n,e,r,t)}var I5="__ngSimpleChanges__";function C5(n){return n[I5]||null}function zoe(n,e){return n[I5]=e}var Kj=[];var Wn=function(n,e=null,t){for(let i=0;i<Kj.length;i++){let r=Kj[i];r(n,e,t)}},kn=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(kn||{});function Hoe(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=T5(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function A5(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function cE(n,e,t){M5(n,e,3,t)}function lE(n,e,t,i){(n[Ut]&3)===t&&M5(n,e,t,i)}function IP(n,e){let t=n[Ut];(t&3)===e&&(t&=16383,t+=1,n[Ut]=t)}function M5(n,e,t,i){let r=i!==void 0?n[wh]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[wh]+=65536),(a<s||s==-1)&&(joe(n,t,e,c),n[wh]=(n[wh]&4294901760)+c+2),c++}function Xj(n,e){Wn(kn.LifecycleHookStart,n,e);let t=jt(null);try{e.call(n)}finally{jt(t),Wn(kn.LifecycleHookEnd,n,e)}}function joe(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Ut]>>14<n[wh]>>16&&(n[Ut]&3)===e&&(n[Ut]+=16384,Xj(a,s)):Xj(a,s)}var Gp=-1,Dh=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function Goe(n){return(n.flags&8)!==0}function Woe(n){return(n.flags&16)!==0}function $oe(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];qoe(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function D5(n){return n===3||n===4||n===6}function qoe(n){return n.charCodeAt(0)===64}function Wp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Yj(n,t,r,null,e[++i]):Yj(n,t,r,null,null))}}return n}function Yj(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}function R5(n){return n!==Gp}function pE(n){return n&32767}function Koe(n){return n>>16}function mE(n,e){let t=Koe(n),i=e;for(;t>0;)i=i[xh],t--;return i}var LP=!0;function gE(n){let e=LP;return LP=n,e}var Xoe=256,P5=Xoe-1,N5=5,Yoe=0,qa={};function Qoe(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(vh)&&(i=t[vh]),i==null&&(i=t[vh]=Yoe++);let r=i&P5,s=1<<r;e.data[n+(r>>N5)]|=s}function _E(n,e){let t=k5(n,e);if(t!==-1)return t;let i=e[Dt];i.firstCreatePass&&(n.injectorIndex=e.length,CP(i.data,n),CP(e,null),CP(i.blueprint,null));let r=hN(n,e),s=n.injectorIndex;if(R5(r)){let o=pE(r),a=mE(r,e),c=a[Dt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function CP(n,e){n.push(0,0,0,0,0,0,0,0,e)}function k5(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function hN(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=U5(r),i===null)return Gp;if(t++,r=r[xh],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Gp}function FP(n,e,t){Qoe(n,e,t)}function Joe(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(D5(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function O5(n,e,t){if(t&8||n!==void 0)return n;zw(e,"NodeInjector")}function L5(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[Du],s=ls(void 0);try{return r?r.get(e,i,t&8):z1(e,i,t&8)}finally{ls(s)}}return O5(i,e,t)}function F5(n,e,t,i=0,r){if(n!==null){if(e[Ut]&2048&&!(i&2)){let o=nae(n,e,t,i,qa);if(o!==qa)return o}let s=V5(n,e,t,i,qa);if(s!==qa)return s}return L5(e,t,i,r)}function V5(n,e,t,i,r){let s=eae(t);if(typeof s=="function"){if(!_P(e,n,i))return i&1?O5(r,t,i):L5(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&8))zw(t);else return o}finally{yP()}}else if(typeof s=="number"){let o=null,a=k5(n,e),c=Gp,l=i&1?e[Es][ds]:null;for((a===-1||i&4)&&(c=a===-1?hN(n,e):e[a+8],c===Gp||!Jj(i,!1)?a=-1:(o=e[Dt],a=pE(c),e=mE(c,e)));a!==-1;){let u=e[Dt];if(Qj(s,a,u.data)){let d=Zoe(a,e,t,o,i,l);if(d!==qa)return d}c=e[a+8],c!==Gp&&Jj(i,e[Dt].data[a+8]===l)&&Qj(s,a,e)?(o=u,a=pE(c),e=mE(c,e)):a=-1}}return r}function Zoe(n,e,t,i,r,s){let o=e[Dt],a=o.data[n+8],c=i==null?Nu(a)&&LP:i!=o&&(a.type&3)!==0,l=r&1&&s===a,u=uE(a,o,t,c,l);return u!==null?Oy(e,o,u,a,r):qa}function uE(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let g=o[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(r){let f=o[c];if(f&&$a(f)&&f.type===t)return c}return null}function Oy(n,e,t,i,r){let s=n[t],o=e.data;if(s instanceof Dh){let a=s;if(a.resolving){let f=ij(o[t]);throw B1(f)}let c=gE(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],u,d=a.injectImpl?ls(a.injectImpl):null,h=_P(n,i,0);try{s=n[t]=a.factory(void 0,r,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Hoe(t,o[t],e)}finally{d!==null&&ls(d),gE(c),a.resolving=!1,yP()}}return s}function eae(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(vh)?n[vh]:void 0;return typeof e=="number"?e>=0?e&P5:tae:e}function Qj(n,e,t){let i=1<<n;return!!(t[e+(n>>N5)]&i)}function Jj(n,e){return!(n&2)&&!(n&1&&e)}var Mh=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return F5(this._tNode,this._lView,e,gh(i),t)}};function tae(){return new Mh(hr(),Bt())}function br(n){return Xp(()=>{let e=n.prototype.constructor,t=e[py]||VP(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[py]||VP(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function VP(n){return N1(n)?()=>{let e=VP(Rr(n));return e&&e()}:Tu(n)}function nae(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Ut]&2048&&!zp(o);){let a=V5(s,o,t,i|2,qa);if(a!==qa)return a;let c=s.parent;if(!c){let l=o[Q1];if(l){let u=l.get(t,qa,i);if(u!==qa)return u}c=U5(o),o=o[xh]}s=c}return r}function U5(n){let e=n[Dt],t=e.type;return t===2?e.declTNode:t===1?n[ds]:null}function Uy(n){return Joe(hr(),n)}function iae(){return Yp(hr(),Bt())}function Yp(n,e){return new tn(Jo(n,e))}var tn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=iae}return n})();function rae(n){return n instanceof tn?n.nativeElement:n}function sae(){return this._results[Symbol.iterator]()}var qc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new At}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=lj(e);(this._changesDetected=!cj(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=sae};function B5(n){return(n.flags&128)===128}var fN=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(fN||{}),z5=new Map,oae=0;function aae(){return oae++}function cae(n){z5.set(n[wy],n)}function UP(n){z5.delete(n[wy])}var Zj="__ngContext__";function $p(n,e){Wa(e)?(n[Zj]=e[wy],cae(e)):n[Zj]=e}function H5(n){return G5(n[Up])}function j5(n){return G5(n[wo])}function G5(n){for(;n!==null&&!Qo(n);)n=n[wo];return n}var lae;function pN(n){lae=n}var Qp=new Te("",{factory:()=>uae}),uae="ng";var DE=new Te(""),Yc=new Te("",{providedIn:"platform",factory:()=>"unknown"}),Fu=new Te(""),Jp=new Te("",{factory:()=>H(zt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var W5=!1,$5=new Te("",{factory:()=>W5});var dae=(n,e,t,i)=>{};function hae(n,e,t,i){dae(n,e,t,i)}function RE(n){return(n.flags&32)===32}var fae=()=>null;function q5(n,e,t=!1){return fae(n,e,t)}function K5(n,e){let t=n.contentQueries;if(t!==null){let i=jt(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];Jw(s),a.contentQueries(2,e[o],o)}}}finally{jt(i)}}}function BP(n,e,t){Jw(0);let i=jt(null);try{e(n,t)}finally{jt(i)}}function mN(n,e,t){if(J1(e)){let i=jt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{jt(i)}}}var na=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(na||{}),rE;function pae(){if(rE===void 0&&(rE=null,xo.trustedTypes))try{rE=xo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rE}function PE(n){return pae()?.createHTML(n)||n}var sE;function mae(){if(sE===void 0&&(sE=null,xo.trustedTypes))try{sE=xo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sE}function e5(n){return mae()?.createScriptURL(n)||n}var Kc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vw})`}},zP=class extends Kc{getTypeName(){return"HTML"}},HP=class extends Kc{getTypeName(){return"Style"}},jP=class extends Kc{getTypeName(){return"Script"}},GP=class extends Kc{getTypeName(){return"URL"}},WP=class extends Kc{getTypeName(){return"ResourceURL"}};function ra(n){return n instanceof Kc?n.changingThisBreaksApplicationSecurity:n}function Qc(n,e){let t=X5(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Vw})`)}return t===e}function X5(n){return n instanceof Kc&&n.getTypeName()||null}function gN(n){return new zP(n)}function _N(n){return new HP(n)}function yN(n){return new jP(n)}function vN(n){return new GP(n)}function bN(n){return new WP(n)}function gae(n){let e=new qP(n);return _ae()?new $P(e):e}var $P=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(PE(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},qP=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=PE(e),t}};function _ae(){try{return!!new window.DOMParser().parseFromString(PE(""),"text/html")}catch{return!1}}var yae=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function By(n){return n=String(n),n.match(yae)?n:"unsafe:"+n}function Jc(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function zy(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var Y5=Jc("area,br,col,hr,img,wbr"),Q5=Jc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J5=Jc("rp,rt"),vae=zy(J5,Q5),bae=zy(Q5,Jc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xae=zy(J5,Jc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),t5=zy(Y5,bae,xae,vae),Z5=Jc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wae=Jc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Eae=Jc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Sae=zy(Z5,wae,Eae),Tae=Jc("script,style,template"),KP=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=Aae(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Cae(t);if(s){t=s;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=n5(e).toLowerCase();if(!t5.hasOwnProperty(t))return this.sanitizedSomething=!0,!Tae.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!Sae.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Z5[a]&&(c=By(c)),this.buf.push(" ",o,'="',i5(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=n5(e).toLowerCase();t5.hasOwnProperty(t)&&!Y5.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(i5(e))}};function Iae(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Cae(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw e6(e);return e}function Aae(n){let e=n.firstChild;if(e&&Iae(n,e))throw e6(e);return e}function n5(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function e6(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Mae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dae=/([^\#-~ |!])/g;function i5(n){return n.replace(/&/g,"&amp;").replace(Mae,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(Dae,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var oE;function xN(n,e){let t=null;try{oE=oE||gae(n);let i=e?String(e):"";t=oE.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=oE.getInertBodyElement(i)}while(i!==s);let a=new KP().sanitizeChildren(r5(t)||t);return PE(a)}finally{if(t){let i=r5(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function r5(n){return"content"in n&&Rae(n)?n.content:null}function Rae(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Nr=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Nr||{});function t6(n){let e=i6();return e?e.sanitize(Nr.URL,n)||"":Qc(n,"URL")?ra(n):By(bh(n))}function n6(n){let e=i6();if(e)return e5(e.sanitize(Nr.RESOURCE_URL,n)||"");if(Qc(n,"ResourceURL"))return e5(ra(n));throw new me(904,!1)}function Pae(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?n6:t6}function wN(n,e,t){return Pae(e,t)(n)}function i6(){let n=Bt();return n&&n[ja].sanitizer}var Nae=/^>|^->|<!--|-->|--!>|<!-$/g,kae=/(<|>)/g,Oae="\u200B$1\u200B";function Lae(n){return n.replace(Nae,e=>e.replace(kae,Oae))}function EN(n){return n.ownerDocument.defaultView}function r6(n){return n instanceof Function?n():n}function Fae(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var s6="ng-template";function Vae(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&Fae(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(SN(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function SN(n){return n.type===4&&n.value!==s6}function Uae(n,e,t){let i=n.type===4&&!t?s6:n.value;return e===i}function Bae(n,e,t){let i=4,r=n.attrs,s=r!==null?jae(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!ea(i)&&!ea(c))return!1;if(o&&ea(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!Uae(n,c,t)||c===""&&e.length===1){if(ea(i))return!1;o=!0}}else if(i&8){if(r===null||!Vae(n,r,c,t)){if(ea(i))return!1;o=!0}}else{let l=e[++a],u=zae(c,r,SN(n),t);if(u===-1){if(ea(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(ea(i))return!1;o=!0}}}}return ea(i)||o}function ea(n){return(n&1)===0}function zae(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return Gae(e,n)}function o6(n,e,t=!1){for(let i=0;i<e.length;i++)if(Bae(n,e[i],t))return!0;return!1}function Hae(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function jae(n){for(let e=0;e<n.length;e++){let t=n[e];if(D5(t))return e}return n.length}function Gae(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Wae(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function s5(n,e){return n?":not("+e.trim()+")":e}function $ae(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!ea(o)&&(e+=s5(s,r),r=""),i=o,s=s||!ea(i);t++}return r!==""&&(e+=s5(s,r)),e}function qae(n){return n.map($ae).join(",")}function Kae(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!ea(r))break;r=s}i++}return t.length&&e.push(1,...t),e}var Cs={};function Xae(n,e){return n.createText(e)}function Yae(n,e,t){n.setValue(e,t)}function Qae(n,e){return n.createComment(Lae(e))}function a6(n,e,t){return n.createElement(e,t)}function yE(n,e,t,i,r){n.insertBefore(e,t,i,r)}function c6(n,e,t){n.appendChild(e,t)}function o5(n,e,t,i,r){i!==null?yE(n,e,t,i,r):c6(n,e,t)}function Jae(n,e,t,i){n.removeChild(null,e,t,i)}function Zae(n,e,t){n.setAttribute(e,"style",t)}function ece(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function l6(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&$oe(n,e,i),r!==null&&ece(n,e,r),s!==null&&Zae(n,e,s)}function TN(n,e,t,i,r,s,o,a,c,l,u){let d=vi+i,h=d+r,f=tce(d,h),g=typeof l=="function"?l():l;return f[Dt]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function tce(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Cs);return t}function nce(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=TN(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function IN(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Yo]=r,d[Ut]=i|4|128|8|64|1024,(l!==null||n&&n[Ut]&2048)&&(d[Ut]|=2048),nP(d),d[yr]=d[xh]=n,d[Pr]=t,d[ja]=o||n&&n[ja],d[si]=a||n&&n[si],d[Du]=c||n&&n[Du]||null,d[ds]=s,d[wy]=aae(),d[Fp]=u,d[Q1]=l,d[Es]=e.type==2?n[Es]:d,d}function ice(n,e,t){let i=Jo(e,n),r=nce(t),s=n[ja].rendererFactory,o=CN(n,IN(n,r,null,u6(t),i,e,null,s.createRenderer(i,t),null,null,null));return n[e.index]=o}function u6(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function d6(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function CN(n,e){return n[Up]?n[Y1][wo]=e:n[Up]=e,n[Y1]=e,e}function Lt(n=1){h6(fi(),Bt(),Gc()+n,!1)}function h6(n,e,t,i){if(!i)if((e[Ut]&3)===3){let s=n.preOrderCheckHooks;s!==null&&cE(e,s,t)}else{let s=n.preOrderHooks;s!==null&&lE(e,s,0,t)}ku(t)}var NE=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(NE||{});function XP(n,e,t,i){let r=jt(null);try{let[s,o,a]=n.inputs[t],c=null;(o&NE.SignalBased)!==0&&(c=e[s][as]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,s):S5(e,c,s,i)}finally{jt(r)}}var Ka=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ka||{}),rce;function AN(n,e){return rce(n,e)}var qp=new Set,kE=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(kE||{}),Zc=new Te(""),a5=new Set;function el(n){a5.has(n)||(a5.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var MN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),f6=[0,1,2,3],p6=(()=>{class n{ngZone=H(_t);scheduler=H(Hc);errorHandler=H(ws,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H(Zc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Wn(kn.AfterRenderHooksStart),this.executing=!0;for(let i of f6)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Wn(kn.AfterRenderHooksEnd)}register(t){let{view:i}=t;i!==void 0?((i[Eh]??=[]).push(t),Ih(i),i[Ut]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(kE.AFTER_NEXT_RENDER,t):t()}static \u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),vE=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,s,o=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Eh];e&&(this.view[Eh]=e.filter(t=>t!==this))}};function Xa(n,e){let t=e?.injector??H(Yt);return el("NgAfterNextRender"),oce(n,t,e,!0)}function sce(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oce(n,e,t,i){let r=e.get(MN);r.impl??=e.get(p6);let s=e.get(Zc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Ss):null,a=e.get(My,null,{optional:!0}),c=new vE(r.impl,sce(n),a?.view,i,o,s?.snapshot(null));return r.impl.register(c),c}var ace=new Te("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function m6(n,e,t){let i=n.get(ace);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function cce(n,e){for(let[t,i]of e)m6(n,i.animateFns)}function c5(n,e,t,i){let r=n?.[Ey]?.enter;e!==null&&r&&r.has(t.index)&&cce(i,r)}function jp(n,e,t,i,r,s,o,a){if(r!=null){let c,l=!1;Qo(r)?c=r:Wa(r)&&(l=!0,r=r[Yo]);let u=Eo(r);n===0&&i!==null?(c5(a,i,s,t),o==null?c6(e,i,u):yE(e,i,u,o||null,!0)):n===1&&i!==null?(c5(a,i,s,t),yE(e,i,u,o||null,!0)):n===2?l5(a,s,t,d=>{Jae(e,u,l,d)}):n===3&&l5(a,s,t,()=>{e.destroyNode(u)}),c!=null&&vce(e,n,t,c,s,i,o)}}function lce(n,e){g6(n,e),e[Yo]=null,e[ds]=null}function uce(n,e,t,i,r,s){i[Yo]=r,i[ds]=e,OE(n,i,t,1,r,s)}function g6(n,e){e[ja].changeDetectionScheduler?.notify(9),OE(n,e,e[si],2,null,null)}function dce(n){let e=n[Up];if(!e)return AP(n[Dt],n);for(;e;){let t=null;if(Wa(e))t=e[Up];else{let i=e[qr];i&&(t=i)}if(!t){for(;e&&!e[wo]&&e!==n;)Wa(e)&&AP(e[Dt],e),e=e[yr];e===null&&(e=n),Wa(e)&&AP(e[Dt],e),t=e&&e[wo]}e=t}}function DN(n,e){let t=n[Sh],i=t.indexOf(e);t.splice(i,1)}function RN(n,e){if(Th(e))return;let t=e[si];t.destroyNode&&OE(n,e,t,3,null,null),dce(e)}function AP(n,e){if(Th(e))return;let t=jt(null);try{e[Ut]&=-129,e[Ut]|=256,e[Js]&&ih(e[Js]),pce(n,e),fce(n,e),e[Dt].type===1&&e[si].destroy();let i=e[Ru];if(i!==null&&Qo(e[yr])){i!==e[yr]&&DN(i,e);let r=e[Ga];r!==null&&r.detachView(n)}UP(e)}finally{jt(t)}}function l5(n,e,t,i){let r=n?.[Ey];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&qp.add(n),m6(t,()=>{if(r.leave&&r.leave.has(e.index)){let o=r.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:u}=l();a.push(u)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),hce(n,i)}else n&&qp.delete(n),i(!1)},r)}function hce(n,e){let t=n[Ey]?.running;if(t){t.then(()=>{n[Ey].running=void 0,qp.delete(n),e(!0)});return}e(!1)}function fce(n,e){let t=n.cleanup,i=e[Vp];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Vp]=null);let r=e[Bc];if(r!==null){e[Bc]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[Iu];if(s!==null){e[Iu]=null;for(let o of s)o.destroy()}}function pce(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Dh)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Wn(kn.LifecycleHookStart,a,c);try{c.call(a)}finally{Wn(kn.LifecycleHookEnd,a,c)}}else{Wn(kn.LifecycleHookStart,r,s);try{s.call(r)}finally{Wn(kn.LifecycleHookEnd,r,s)}}}}}function _6(n,e,t){return mce(n,e.parent,t)}function mce(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Yo];if(Nu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===na.None||r===na.Emulated)return null}return Jo(i,t)}function y6(n,e,t){return _ce(n,e,t)}function gce(n,e,t){return n.type&40?Jo(n,t):null}var _ce=gce,u5;function PN(n,e,t,i){let r=_6(n,i,e),s=e[si],o=i.parent||e[ds],a=y6(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)o5(s,r,t[c],a,!1);else o5(s,r,t,a,!1);u5!==void 0&&u5(s,i,e,t,r)}function Ny(n,e){if(e!==null){let t=e.type;if(t&3)return Jo(e,n);if(t&4)return YP(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Ny(n,i);{let r=n[e.index];return Qo(r)?YP(-1,r):Eo(r)}}else{if(t&128)return Ny(n,e.next);if(t&32)return AN(e,n)()||Eo(n[e.index]);{let i=v6(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Cu(n[Es]);return Ny(r,i)}else return Ny(n,e.next)}}}return null}function v6(n,e){if(e!==null){let i=n[Es][ds],r=e.projection;return i.projection[r]}return null}function YP(n,e){let t=qr+n+1;if(t<e.length){let i=e[t],r=i[Dt].firstChild;if(r!==null)return Ny(i,r)}return e[Pu]}function NN(n,e,t,i,r,s,o){for(;t!=null;){let a=i[Du];if(t.type===128){t=t.next;continue}let c=i[t.index],l=t.type;if(o&&e===0&&(c&&$p(Eo(c),i),t.flags|=2),!RE(t))if(l&8)NN(n,e,t.child,i,r,s,!1),jp(e,n,a,r,c,t,s,i);else if(l&32){let u=AN(t,i),d;for(;d=u();)jp(e,n,a,r,d,t,s,i);jp(e,n,a,r,c,t,s,i)}else l&16?b6(n,e,i,t,r,s):jp(e,n,a,r,c,t,s,i);t=o?t.projectionNext:t.next}}function OE(n,e,t,i,r,s){NN(t,i,n.firstChild,e,r,s,!1)}function yce(n,e,t){let i=e[si],r=_6(n,t,e),s=t.parent||e[ds],o=y6(s,t,e);b6(i,0,e,t,r,o)}function b6(n,e,t,i,r,s){let o=t[Es],c=o[ds].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];jp(e,n,t[Du],r,u,i,s,t)}else{let l=c,u=o[yr];B5(i)&&(l.flags|=128),NN(n,e,l,u,r,s,!0)}}function vce(n,e,t,i,r,s,o){let a=i[Pu],c=Eo(i);a!==c&&jp(e,n,t,s,a,r,o);for(let l=qr;l<i.length;l++){let u=i[l];OE(u[Dt],u,n,e,s,a)}}function bce(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Ka.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ka.Important),n.setStyle(t,i,r,s))}}function x6(n,e,t,i,r){let s=Gc(),o=i&2;try{ku(-1),o&&e.length>vi&&h6(n,e,vi,!1);let a=o?kn.TemplateUpdateStart:kn.TemplateCreateStart;Wn(a,r,t),t(i,r)}finally{ku(s);let a=o?kn.TemplateUpdateEnd:kn.TemplateCreateEnd;Wn(a,r,t)}}function LE(n,e,t){Ice(n,e,t),(t.flags&64)===64&&Cce(n,e,t)}function Hy(n,e,t=Jo){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function xce(n,e,t,i){let s=i.get($5,W5)||t===na.ShadowDom||t===na.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return wce(o),o}function wce(n){Ece(n)}var Ece=()=>null;function Sce(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function w6(n,e,t,i,r,s){let o=e[Dt];if(FN(n,o,e,t,i)){Nu(n)&&Tce(e,n.index);return}n.type&3&&(t=Sce(t)),E6(n,e,t,i,r,s)}function E6(n,e,t,i,r,s){if(n.type&3){let o=Jo(n,e);i=s!=null?s(i,n.value||"",t):i,r.setProperty(o,t,i)}else n.type&12}function Tce(n,e){let t=So(e,n);t[Ut]&16||(t[Ut]|=64)}function Ice(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Nu(t)&&ice(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_E(t,e);let s=t.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],c=Oy(e,n,o,t);if($p(c,e),s!==null&&Rce(e,o-i,c,a,t,s),$a(a)){let l=So(t.index,e);l[Pr]=Oy(e,n,o,t)}}}function Cce(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=kj();try{ku(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];Qw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ace(c,l)}}finally{ku(-1),Qw(o)}}function Ace(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kN(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];o6(e,s.selectors,!1)&&(i??=[],$a(s)?i.unshift(s):i.push(s))}return i}function Mce(n,e,t,i,r,s){let o=Jo(n,e);Dce(e[si],o,s,n.value,t,i,r)}function Dce(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?bh(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function Rce(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];XP(i,t,c,l)}}function ON(n,e,t,i,r){let s=vi+t,o=e[Dt],a=r(o,e,n,i,t);e[s]=a,Hp(n,!0);let c=n.type===2;return c?(l6(e[si],a,n),(Ij()===0||Bp(n))&&$p(a,e),Cj()):$p(a,e),tE()&&(!c||!RE(n))&&PN(o,e,a,n),n}function LN(n){let e=n;return hP()?fP():(e=e.parent,Hp(e,!1)),e}function Pce(n,e){let t=n[Du];if(!t)return;let i;try{i=t.get(Ts,null)}catch{i=null}i?.(e)}function FN(n,e,t,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],d=e.data[l];XP(d,t[l],u,r),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];XP(u,l,i,r),a=!0}return a}function Nce(n,e){let t=So(e,n),i=t[Dt];kce(i,t);let r=t[Yo];r!==null&&t[Fp]===null&&(t[Fp]=q5(r,t[Du])),Wn(kn.ComponentStart);try{VN(i,t,t[Pr])}finally{Wn(kn.ComponentEnd,t[Pr])}}function kce(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function VN(n,e,t){Zw(e);try{let i=n.viewQuery;i!==null&&BP(1,i,t);let r=n.template;r!==null&&x6(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ga]?.finishViewCreation(n),n.staticContentQueries&&K5(n,e),n.staticViewQueries&&BP(2,n.viewQuery,t);let s=n.components;s!==null&&Oce(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ut]&=-5,eE()}}function Oce(n,e){for(let t=0;t<e.length;t++)Nce(n,e[t])}function UN(n,e,t,i){let r=jt(null);try{let s=e.tView,a=n[Ut]&4096?4096:16,c=IN(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Ru]=l;let u=n[Ga];return u!==null&&(c[Ga]=u.createEmbeddedView(s)),VN(s,c,t),c}finally{jt(r)}}function bE(n,e){return!e||e.firstChild===null||B5(n)}function Ly(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(Eo(s)),Qo(s)&&S6(s,i);let o=t.type;if(o&8)Ly(n,e,t.child,i);else if(o&32){let a=AN(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=v6(e,t);if(Array.isArray(a))i.push(...a);else{let c=Cu(e[Es]);Ly(c[Dt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function S6(n,e){for(let t=qr;t<n.length;t++){let i=n[t],r=i[Dt].firstChild;r!==null&&Ly(i[Dt],i,r,e)}n[Pu]!==n[Yo]&&e.push(n[Pu])}function T6(n){if(n[Eh]!==null){for(let e of n[Eh])e.impl.addSequence(e);n[Eh].length=0}}var I6=[];function Lce(n){return n[Js]??Fce(n)}function Fce(n){let e=I6.pop()??Object.create(Uce);return e.lView=n,e}function Vce(n){n.lView[Js]!==n&&(n.lView=null,I6.push(n))}var Uce=ct(re({},xp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ih(n.lView)},consumerOnSignalRead(){this.lView[Js]=this}});function Bce(n){let e=n[Js]??Object.create(zce);return e.lView=n,e}var zce=ct(re({},xp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Cu(n.lView);for(;e&&!C6(e[Dt]);)e=Cu(e);e&&iP(e)},consumerOnSignalRead(){this.lView[Js]=this}});function C6(n){return n.type!==2}function A6(n){if(n[Iu]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Iu])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Ut]&8192)}}var Hce=100;function M6(n,e=0){let i=n[ja].rendererFactory,r=!1;r||i.begin?.();try{jce(n,e)}finally{r||i.end?.()}}function jce(n,e){let t=pP();try{gy(!0),QP(n,e);let i=0;for(;Iy(n);){if(i===Hce)throw new me(103,!1);i++,QP(n,1)}}finally{gy(t)}}function Gce(n,e,t,i){if(Th(e))return;let r=e[Ut],s=!1,o=!1;Zw(e);let a=!0,c=null,l=null;s||(C6(n)?(l=Lce(e),c=wp(l)):tw()===null?(a=!1,l=Bce(e),c=wp(l)):e[Js]&&(ih(e[Js]),e[Js]=null));try{nP(e),Rj(n.bindingStartIndex),t!==null&&x6(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&cE(e,f,null)}else{let f=n.preOrderHooks;f!==null&&lE(e,f,0,null),IP(e,0)}if(o||Wce(e),A6(e),D6(e,0),n.contentQueries!==null&&K5(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&cE(e,f)}else{let f=n.contentHooks;f!==null&&lE(e,f,1),IP(e,1)}qce(n,e);let d=n.components;d!==null&&P6(e,d,0);let h=n.viewQuery;if(h!==null&&BP(2,h,i),!s)if(u){let f=n.viewCheckHooks;f!==null&&cE(e,f)}else{let f=n.viewHooks;f!==null&&lE(e,f,2),IP(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ww]){for(let f of e[Ww])f();e[Ww]=null}s||(T6(e),e[Ut]&=-73)}catch(u){throw s||Ih(e),u}finally{l!==null&&(ry(l,c),a&&Vce(l)),eE()}}function D6(n,e){for(let t=H5(n);t!==null;t=j5(t))for(let i=qr;i<t.length;i++){let r=t[i];R6(r,e)}}function Wce(n){for(let e=H5(n);e!==null;e=j5(e)){if(!(e[Ut]&2))continue;let t=e[Sh];for(let i=0;i<t.length;i++){let r=t[i];iP(r)}}}function $ce(n,e,t){Wn(kn.ComponentStart);let i=So(e,n);try{R6(i,t)}finally{Wn(kn.ComponentEnd,i[Pr])}}function R6(n,e){qw(n)&&QP(n,e)}function QP(n,e){let i=n[Dt],r=n[Ut],s=n[Js],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&sy(s)),o||=!1,s&&(s.dirty=!1),n[Ut]&=-9217,o)Gce(i,n,i.template,n[Pr]);else if(r&8192){let a=jt(null);try{A6(n),D6(n,1);let c=i.components;c!==null&&P6(n,c,1),T6(n)}finally{jt(a)}}}function P6(n,e,t){for(let i=0;i<e.length;i++)$ce(n,e[i],t)}function qce(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)ku(~r);else{let s=r,o=t[++i],a=t[++i];Nj(o,s);let c=e[s];Wn(kn.HostBindingsUpdateStart,c);try{a(2,c)}finally{Wn(kn.HostBindingsUpdateEnd,c)}}}}finally{ku(-1)}}function BN(n,e){let t=pP()?64:1088;for(n[ja].changeDetectionScheduler?.notify(e);n;){n[Ut]|=t;let i=Cu(n);if(zp(n)&&!i)return n;n=i}return null}function N6(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Kce(n,e){let t=qr+e;if(t<n.length)return n[t]}function zN(n,e,t,i=!0){let r=e[Dt];if(Yce(r,e,n,t),i){let o=YP(t,n),a=e[si],c=a.parentNode(n[Pu]);c!==null&&uce(r,n[ds],a,e,c,o)}let s=e[Fp];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Xce(n,e){let t=xE(n,e);return t!==void 0&&RN(t[Dt],t),t}function xE(n,e){if(n.length<=qr)return;let t=qr+e,i=n[t];if(i){let r=i[Ru];r!==null&&r!==n&&DN(r,i),e>0&&(n[t-1][wo]=i[wo]);let s=by(n,qr+e);lce(i[Dt],i);let o=s[Ga];o!==null&&o.detachView(s[Dt]),i[yr]=null,i[wo]=null,i[Ut]&=-129}return i}function Yce(n,e,t,i){let r=qr+i,s=t.length;i>0&&(t[r-1][wo]=e),i<s-qr?(e[wo]=t[r],H1(t,qr+i,e)):(t.push(e),e[wo]=null),e[yr]=t;let o=e[Ru];o!==null&&t!==o&&k6(o,e);let a=e[Ga];a!==null&&a.insertView(n),Kw(e),e[Ut]|=128}function k6(n,e){let t=n[Sh],i=e[yr];if(Wa(i))n[Ut]|=2;else{let r=i[yr][Es];e[Es]!==r&&(n[Ut]|=2)}t===null?n[Sh]=[e]:t.push(e)}var Lu=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Dt];return Ly(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pr]}set context(e){this._lView[Pr]=e}get destroyed(){return Th(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yr];if(Qo(e)){let t=e[Sy],i=t?t.indexOf(this):-1;i>-1&&(xE(e,i),by(t,i))}this._attachedToViewContainer=!1}RN(this._lView[Dt],this._lView)}onDestroy(e){rP(this._lView,e)}markForCheck(){BN(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ut]&=-129}reattach(){Kw(this._lView),this._lView[Ut]|=128}detectChanges(){this._lView[Ut]|=1024,M6(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zp(this._lView),t=this._lView[Ru];t!==null&&!e&&DN(t,this._lView),g6(this._lView[Dt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=e;let t=zp(this._lView),i=this._lView[Ru];i!==null&&!t&&k6(i,this._lView),Kw(this._lView)}};var Zs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Qce;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let s=UN(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Lu(s)}}return n})();function Qce(){return HN(hr(),Bt())}function HN(n,e){return n.type&4?new Zs(e,n,Yp(n,e)):null}function Zp(n,e,t,i,r){let s=n.data[e];if(s===null)s=Jce(n,e,t,i,r),Pj()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=Aj();s.injectorIndex=o===null?-1:o.injectorIndex}return Hp(s,!0),s}function Jce(n,e,t,i,r){let s=dP(),o=hP(),a=o?s:s&&s.parent,c=n.data[e]=ele(n,a,t,e,i,r);return Zce(n,c,s,o),c}function Zce(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function ele(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return cP()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var tle=()=>null,nle=()=>null;function JP(n,e){return tle(n,e)}function ile(n,e,t){return nle(n,e,t)}var O6=class{},FE=class{},ZP=class{resolveComponentFactory(e){throw new me(917,!1)}},jy=class{static NULL=new ZP},Yi=class{},kr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>rle()}return n})();function rle(){let n=Bt(),e=hr(),t=So(e.index,n);return(Wa(t)?t:n)[si]}var L6=(()=>{class n{static \u0275prov=xe({token:n,providedIn:"root",factory:()=>null})}return n})();var dE={},eN=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,dE,i);return r!==dE||t===dE?r:this.parentInjector.get(e,t,i)}};function wE(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Uw(r,a);else if(s==2){let c=a,l=e[++o];i=Uw(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function mt(n,e=0){let t=Bt();if(t===null)return st(n,e);let i=hr();return F5(i,t,Rr(n),e)}function VE(){let n="invalid";throw new Error(n)}function F6(n,e,t,i,r){let s=i===null?null:{"":-1},o=r(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}ale(n,e,t,a,s,c,l)}s!==null&&i!==null&&sle(t,i,s)}function sle(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new me(-301,!1);i.push(e[r],s)}}function ole(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ale(n,e,t,i,r,s,o){let a=i.length,c=!1;for(let h=0;h<a;h++){let f=i[h];!c&&$a(f)&&(c=!0,ole(n,t,h)),FP(_E(t,e),n,f.type)}fle(t,n.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=d6(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(t.mergedAttrs=Wp(t.mergedAttrs,f.hostAttrs),lle(n,t,e,d,f),hle(d,f,r),o!==null&&o.has(f)){let[v,_]=o.get(f);t.directiveToIndex.set(f.type,[d,v+t.directiveStart,_+t.directiveStart])}else(s===null||!s.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let g=f.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}cle(n,t,s)}function cle(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))d5(0,e,r,i),d5(1,e,r,i),f5(e,i,!1);else{let s=t.get(r);h5(0,e,s,i),h5(1,e,s,i),f5(e,i,!0)}}}function d5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(i),V6(e,s)}}function h5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),V6(e,o)}}function V6(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function f5(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!t&&r===null||t&&s===null||SN(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===e){o??=[],o.push(c,i[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function lle(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=Tu(r.type,!0)),o=new Dh(s,$a(r),mt,null);n.blueprint[i]=o,t[i]=o,ule(n,e,i,d6(n,t,r.hostVars,Cs),r)}function ule(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;dle(o)!=a&&o.push(a),o.push(t,i,s)}}function dle(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function hle(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;$a(e)&&(t[""]=n)}}function fle(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function jN(n,e,t,i,r,s,o,a){let c=e[Dt],l=c.consts,u=Zo(l,o),d=Zp(c,n,t,i,u);return s&&F6(c,e,d,Zo(l,a),r),d.mergedAttrs=Wp(d.mergedAttrs,d.attrs),d.attrs!==null&&wE(d,d.attrs,!1),d.mergedAttrs!==null&&wE(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function GN(n,e){A5(n,e),J1(e)&&n.queries.elementEnd(e)}function ple(n,e,t,i,r,s){let o=e.consts,a=Zo(o,r),c=Zp(e,n,t,i,a);if(c.mergedAttrs=Wp(c.mergedAttrs,c.attrs),s!=null){let l=Zo(o,s);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&wE(c,c.attrs,!1),c.mergedAttrs!==null&&wE(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function WN(n){return B6(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function U6(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function B6(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function z6(n,e,t){return n[e]=t}function ia(n,e,t){if(t===Cs)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function H6(n,e,t,i){let r=ia(n,e,t);return ia(n,e+1,i)||r}function hE(n,e,t){return function i(r){let s=Nu(n)?So(n.index,e):e;BN(s,5);let o=e[Pr],a=p5(e,o,t,r),c=i.__ngNextListenerFn__;for(;c;)a=p5(e,o,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function p5(n,e,t,i){let r=jt(null);try{return Wn(kn.OutputStart,e,t),t(i)!==!1}catch(s){return Pce(n,s),!1}finally{Wn(kn.OutputEnd,e,t),jt(r)}}function j6(n,e,t,i,r,s,o,a){let c=Bp(n),l=!1,u=null;if(!i&&c&&(u=gle(e,t,s,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let d=Jo(n,t),h=i?i(d):d;hae(t,h,s,a);let f=r.listen(h,s,a);if(!mle(s)){let g=i?v=>i(Eo(v[n.index])):n.index;G6(g,e,t,s,a,f,!1)}}return l}function mle(n){return n.startsWith("animation")||n.startsWith("transition")}function gle(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Vp],c=r[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function G6(n,e,t,i,r,s,o){let a=e.firstCreatePass?oP(e):null,c=sP(t),l=c.length;c.push(r,s),a&&a.push(i,n,l,(l+1)*(o?-1:1))}function m5(n,e,t,i,r,s){let o=e[t],a=e[Dt],l=a.data[t].outputs[i],d=o[l].subscribe(s);G6(n.index,a,e,r,s,d,!0)}var tN=Symbol("BINDING");var EE=class extends jy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=jc(e);return new Rh(t,this.ngModule)}};function _le(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:(i&NE.SignalBased)!==0};return r&&(s.transform=r),s})}function yle(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function vle(n,e,t){let i=e instanceof ti?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new eN(t,i):t}function ble(n){let e=n.get(Yi,null);if(e===null)throw new me(407,!1);let t=n.get(L6,null),i=n.get(Hc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function xle(n,e){let t=W6(n);return a6(e,t,t==="svg"?Z1:t==="math"?bj:null)}function W6(n){return(n.selectors[0][0]||"div").toLowerCase()}var Rh=class extends FE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=_le(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yle(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=qae(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,s,o){Wn(kn.DynamicComponentStart);let a=jt(null);try{let c=this.componentDef,l=wle(i,c,o,s),u=vle(c,r||this.ngModule,e),d=ble(u),h=d.rendererFactory.createRenderer(null,c),f=i?xce(h,i,c.encapsulation,u):xle(c,h),g=o?.some(g5)||s?.some(b=>typeof b!="function"&&b.bindings.some(g5)),v=IN(null,l,null,512|u6(c),null,null,d,h,u,null,q5(f,u,!0));v[vi]=f,Zw(v);let _=null;try{let b=jN(vi,v,2,"#host",()=>l.directiveRegistry,!0,0);l6(h,f,b),$p(f,v),LE(l,v,b),mN(l,b,v),GN(l,b),t!==void 0&&Sle(b,this.ngContentSelectors,t),_=So(b.index,v),v[Pr]=_[Pr],VN(l,v,null)}catch(b){throw _!==null&&UP(_),UP(v),b}finally{Wn(kn.DynamicComponentEnd),eE()}return new SE(this.componentType,v,!!g)}finally{jt(a)}}};function wle(n,e,t,i){let r=n?["ng-version","21.0.1"]:Kae(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[tN].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){a+=h[tN].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(s??=[]).push(h)),h.update&&(h.targetIdx=f,(o??=[]).push(h))}}let c=[e];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=$1(d);c.push(h)}return TN(0,null,Ele(s,o),1,a,c,null,null,null,[r],null)}function Ele(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function g5(n){let e=n[tN].kind;return e==="input"||e==="twoWay"}var SE=class extends O6{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Ty(t[Dt],vi),this.location=Yp(this._tNode,t),this.instance=So(this._tNode.index,t)[Pr],this.hostView=this.changeDetectorRef=new Lu(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,s=FN(i,r[Dt],r,e,t);this.previousInputValues.set(e,t);let o=So(i.index,r);BN(o,1)}get injector(){return new Mh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Sle(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}var As=(()=>{class n{static __NG_ELEMENT_ID__=Tle}return n})();function Tle(){let n=hr();return q6(n,Bt())}var Ile=As,$6=class extends Ile{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Yp(this._hostTNode,this._hostLView)}get injector(){return new Mh(this._hostTNode,this._hostLView)}get parentInjector(){let e=hN(this._hostTNode,this._hostLView);if(R5(e)){let t=mE(e,this._hostLView),i=pE(e),r=t[Dt].data[i+8];return new Mh(r,t)}else return new Mh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=_5(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qr}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=JP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,bE(this._hostTNode,o)),a}createComponent(e,t,i,r,s,o,a){let c=e&&!Voe(e),l;if(c)l=t;else{let _=t||{};l=_.index,i=_.injector,r=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef,o=_.directives,a=_.bindings}let u=c?e:new Rh(jc(e)),d=i||this.parentInjector;if(!s&&u.ngModule==null){let b=(c?d:this.parentInjector).get(ti,null);b&&(s=b)}let h=jc(u.componentType??{}),f=JP(this._lContainer,h?.id??null),g=f?.firstChild??null,v=u.create(d,r,g,s,o,a);return this.insertImpl(v.hostView,l,bE(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(wj(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[yr],l=new $6(c,c[ds],c[yr]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return zN(o,r,s,i),e.attachToViewContainerRef(),H1(MP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=_5(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=xE(this._lContainer,t);i&&(by(MP(this._lContainer),t),RN(i[Dt],i))}detach(e){let t=this._adjustIndex(e,-1),i=xE(this._lContainer,t);return i&&by(MP(this._lContainer),t)!=null?new Lu(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function _5(n){return n[Sy]}function MP(n){return n[Sy]||(n[Sy]=[])}function q6(n,e){let t,i=e[n.index];return Qo(i)?t=i:(t=N6(i,e,null,n),e[n.index]=t,CN(e,t)),Ale(t,e,n,i),new $6(t,n,e)}function Cle(n,e){let t=n[si],i=t.createComment(""),r=Jo(e,n),s=t.parentNode(r);return yE(t,s,i,t.nextSibling(r),!1),i}var Ale=Rle,Mle=()=>!1;function Dle(n,e,t){return Mle(n,e,t)}function Rle(n,e,t,i){if(n[Pu])return;let r;t.type&8?r=Eo(i):r=Cle(e,t),n[Pu]=r}var nN=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},iN=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)$N(e,t).matches!==null&&this.queries[t].setDirty()}},TE=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Ule(e):this.predicate=e}},rN=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},sN=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,Ple(t,s)),this.matchTNodeWithReadOption(e,t,uE(t,e,s,!1,!1))}else i===Zs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,uE(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===tn||r===As||r===Zs&&t.type&4)this.addMatch(t.index,-2);else{let s=uE(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Ple(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function Nle(n,e){return n.type&11?Yp(n,e):n.type&4?HN(n,e):null}function kle(n,e,t,i){return t===-1?Nle(e,n):t===-2?Ole(n,e,i):Oy(n,n[Dt],t,e)}function Ole(n,e,t){if(t===tn)return Yp(e,n);if(t===Zs)return HN(e,n);if(t===As)return q6(e,n)}function K6(n,e,t,i){let r=e[Ga].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(kle(e,u,o[c+1],t.metadata.read))}}r.matches=a}return r.matches}function oN(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=K6(n,e,r,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=qr;d<u.length;d++){let h=u[d];h[Ru]===h[yr]&&oN(h[Dt],h,l,i)}if(u[Sh]!==null){let d=u[Sh];for(let h=0;h<d.length;h++){let f=d[h];oN(f[Dt],f,l,i)}}}}}return i}function Lle(n,e){return n[Ga].queries[e].queryList}function X6(n,e,t){let i=new qc((t&4)===4);return Tj(n,e,i,i.destroy),(e[Ga]??=new iN).queries.push(new nN(i))-1}function Fle(n,e,t){let i=fi();return i.firstCreatePass&&(Y6(i,new TE(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),X6(i,Bt(),e)}function Vle(n,e,t,i){let r=fi();if(r.firstCreatePass){let s=hr();Y6(r,new TE(e,t,i),s.index),Ble(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return X6(r,Bt(),t)}function Ule(n){return n.split(",").map(e=>e.trim())}function Y6(n,e,t){n.queries===null&&(n.queries=new rN),n.queries.track(new sN(e,t))}function Ble(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function $N(n,e){return n.queries.getByIndex(e)}function zle(n,e){let t=n[Dt],i=$N(t,e);return i.crossesNgTemplate?oN(t,n,e,[]):K6(t,n,i,e)}var Xc=class{},UE=class{};var IE=class extends Xc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new EE(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let s=W1(e);this._bootstrapComponents=r6(s.bootstrap),this._r3Injector=vP(e,t,[{provide:Xc,useValue:this},{provide:jy,useValue:this.componentFactoryResolver},...i],zc(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},CE=class extends UE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new IE(this.moduleType,e,[])}};var Fy=class extends Xc{injector;componentFactoryResolver=new EE(this);instance=null;constructor(e){super();let t=new yh([...e.providers,{provide:Xc,useValue:this},{provide:jy,useValue:this.componentFactoryResolver}],e.parent||Lp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gy(n,e,t=null){return new Fy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Hle=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=q1(!1,t.type),r=i.length>0?Gy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(st(ti))})}return n})();function Rt(n){return Xp(()=>{let e=Q6(n),t=ct(re({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fN.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Hle).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||na.Emulated,styles:n.styles||us,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&el("NgStandalone"),J6(t);let i=n.dependencies;return t.directiveDefs=y5(i,jle),t.pipeDefs=y5(i,hj),t.id=$le(t),t})}function jle(n){return jc(n)||$1(n)}function Qt(n){return Xp(()=>({type:n.type,bootstrap:n.bootstrap||us,declarations:n.declarations||us,imports:n.imports||us,exports:n.exports||us,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gle(n,e){if(n==null)return Au;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,c;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,c=r[3]||null):(s=r,o=r,a=NE.None,c=null),t[s]=[i,a,c],e[s]=o}return t}function Wle(n){if(n==null)return Au;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xt(n){return Xp(()=>{let e=Q6(n);return J6(e),e})}function BE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Q6(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Au,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||us,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Gle(n.inputs,e),outputs:Wle(n.outputs),debugInfo:null}}function J6(n){n.features?.forEach(e=>e(n))}function y5(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let s=e(r);s!==null&&i.push(s)}return i}:null}function $le(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qle(n){return Object.getPrototypeOf(n.prototype).constructor}function ui(n){let e=qle(n.type),t=!0,i=[n];for(;e;){let r;if($a(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new me(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=DP(n.inputs),o.declaredInputs=DP(n.declaredInputs),o.outputs=DP(n.outputs);let a=r.hostBindings;a&&Jle(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&Yle(n,c),l&&Qle(n,l),Kle(n,r),nj(n.outputs,r.outputs),$a(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ui&&(t=!1)}}e=Object.getPrototypeOf(e)}Xle(i)}function Kle(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function Xle(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Wp(r.hostAttrs,t=Wp(t,r.hostAttrs))}}function DP(n){return n===Au?{}:n===us?[]:n}function Yle(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function Qle(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function Jle(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Z6(n,e,t,i,r,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Wp(n.mergedAttrs,n.attrs);let u=n.tView=TN(2,n,r,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Hp(n,!1);let c=eue(t,e,n,i);tE()&&PN(t,e,c,n),$p(c,e);let l=N6(c,e,c,n);e[i+vi]=l,CN(e,l),Dle(l,n,e)}function Zle(n,e,t,i,r,s,o,a,c,l,u){let d=t+vi,h;return e.firstCreatePass?(h=Zp(e,d,4,o||null,a||null),Xw()&&F6(e,n,h,Zo(e.consts,l),kN),A5(e,h)):h=e.data[d],Z6(h,n,e,t,i,r,s,c),Bp(h)&&LE(e,n,h),l!=null&&Hy(n,h,u),h}function zE(n,e,t,i,r,s,o,a,c,l,u){let d=t+vi,h;if(e.firstCreatePass){if(h=Zp(e,d,4,o||null,a||null),l!=null){let f=Zo(e.consts,l);h.localNames=[];for(let g=0;g<f.length;g+=2)h.localNames.push(f[g],-1)}}else h=e.data[d];return Z6(h,n,e,t,i,r,s,c),l!=null&&Hy(n,h,u),h}function Or(n,e,t,i,r,s,o,a){let c=Bt(),l=fi(),u=Zo(l.consts,s);return Zle(c,l,n,e,t,i,r,u,void 0,o,a),Or}function HE(n,e,t,i,r,s,o,a){let c=Bt(),l=fi(),u=Zo(l.consts,s);return zE(c,l,n,e,t,i,r,u,void 0,o,a),HE}var eue=tue;function tue(n,e,t,i){return Ay(!0),e[si].createComment("")}var jE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Wy(n){return typeof n=="function"&&n[as]!==void 0}function qN(n){return Wy(n)&&typeof n.set=="function"}var KN=new Te("");function tl(n){return!!n&&typeof n.then=="function"}function GE(n){return!!n&&typeof n.subscribe=="function"}var XN=new Te("");function WE(n){return vr([{provide:XN,multi:!0,useValue:n}])}var YN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=H(XN,{optional:!0})??[];injector=H(Yt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=ji(this.injector,r);if(tl(s))t.push(s);else if(GE(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$E=new Te("");function e8(){QR(()=>{let n="";throw new me(600,n)})}function t8(n){return n.isBoundToModule}var nue=10;var xr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(Ts);afterRenderManager=H(MN);zonelessEnabled=H(Dy);rootEffectScheduler=H(nE);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new At;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H($c);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pt(t=>!t))}constructor(){H(Zc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=H(ti);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Yt.NULL){return this._injector.get(_t).run(()=>{Wn(kn.BootstrapComponentStart);let o=t instanceof FE;if(!this._injector.get(YN).done){let g="";throw new me(405,g)}let c;o?c=t:c=this._injector.get(jy).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=t8(c)?void 0:this._injector.get(Xc),u=i||c.selector,d=c.create(r,[],u,l),h=d.location.nativeElement,f=d.injector.get(KN,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),ky(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),Wn(kn.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Wn(kn.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(kE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Wn(kn.ChangeDetectionEnd),new me(101,!1);let t=jt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,jt(t),this.afterTick.next(),Wn(kn.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Yi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<nue;){Wn(kn.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Wn(kn.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Iy(r))continue;let s=i&&!this.zonelessEnabled?0:1;M6(r,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Iy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;ky(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get($E,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ky(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new me(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ky(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Gi(n,e,t,i){let r=Bt(),s=Ch();if(ia(r,s,e)){let o=fi(),a=Cy();Mce(a,r,n,e,t,i)}return Gi}var zje=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function qE(n,e,t,i,r,s,o,a){el("NgControlFlow");let c=Bt(),l=fi(),u=Zo(l.consts,s);return zE(c,l,n,e,t,i,r,u,256,o,a),QN}function QN(n,e,t,i,r,s,o,a){el("NgControlFlow");let c=Bt(),l=fi(),u=Zo(l.consts,s);return zE(c,l,n,e,t,i,r,u,512,o,a),QN}function KE(n,e){el("NgControlFlow");let t=Bt(),i=Ch(),r=t[i]!==Cs?t[i]:-1,s=r!==-1?v5(t,vi+r):void 0,o=0;if(ia(t,i,n)){let a=jt(null);try{if(s!==void 0&&Xce(s,o),n!==-1){let c=vi+n,l=v5(t,c),u=iue(t[Dt],c),d=ile(l,u,t),h=UN(t,u,e,{dehydratedView:d});zN(l,h,o,bE(u,d))}}finally{jt(a)}}else if(s!==void 0){let a=Kce(s,o);a!==void 0&&(a[Pr]=e)}}function v5(n,e){return n[e]}function iue(n,e){return Ty(n,e)}function In(n,e,t){let i=Bt(),r=Ch();if(ia(i,r,e)){let s=fi(),o=Cy();w6(o,i,n,e,i[si],t)}return In}function aN(n,e,t,i,r){FN(e,n,t,r?"class":"style",i)}function ce(n,e,t,i){let r=Bt(),s=r[Dt],o=n+vi,a=s.firstCreatePass?jN(o,r,2,e,kN,Xw(),t,i):s.data[o];if(ON(a,r,n,e,n8),Bp(a)){let c=r[Dt];LE(c,r,a),mN(c,a,r)}return i!=null&&Hy(r,a),ce}function le(){let n=fi(),e=hr(),t=LN(e);return n.firstCreatePass&&GN(n,t),lP(t)&&uP(),aP(),t.classesWithoutHost!=null&&Goe(t)&&aN(n,t,Bt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Woe(t)&&aN(n,t,Bt(),t.stylesWithoutHost,!1),le}function Cn(n,e,t,i){return ce(n,e,t,i),le(),Cn}function Lr(n,e,t,i){let r=Bt(),s=r[Dt],o=n+vi,a=s.firstCreatePass?ple(o,s,2,e,t,i):s.data[o];return ON(a,r,n,e,n8),i!=null&&Hy(r,a),Lr}function Kr(){let n=hr(),e=LN(n);return lP(e)&&uP(),aP(),Kr}function sa(n,e,t,i){return Lr(n,e,t,i),Kr(),sa}var n8=(n,e,t,i,r)=>(Ay(!0),a6(e[si],i,Bj()));function Nh(n,e,t){let i=Bt(),r=i[Dt],s=n+vi,o=r.firstCreatePass?jN(s,i,8,"ng-container",kN,Xw(),e,t):r.data[s];if(ON(o,i,n,"ng-container",rue),Bp(o)){let a=i[Dt];LE(a,i,o),mN(a,o,i)}return t!=null&&Hy(i,o),Nh}function kh(){let n=fi(),e=hr(),t=LN(e);return n.firstCreatePass&&GN(n,t),kh}var rue=(n,e,t,i,r)=>(Ay(!0),Qae(e[si],""));function Xr(){return Bt()}function XE(n,e,t){let i=Bt(),r=Ch();if(ia(i,r,e)){let s=fi(),o=Cy();E6(o,i,n,e,i[si],t)}return XE}var Py=void 0;function sue(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var oue=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Py,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Py,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Py,Py,Py],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",sue],RP={};function eo(n){let e=aue(n),t=b5(e);if(t)return t;let i=e.split("-")[0];if(t=b5(i),t)return t;if(i==="en")return oue;throw new me(701,!1)}function b5(n){return n in RP||(RP[n]=xo.ng&&xo.ng.common&&xo.ng.common.locales&&xo.ng.common.locales[n]),RP[n]}var Wi=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Wi||{});function aue(n){return n.toLowerCase().replace(/_/g,"-")}var $y="en-US";var cue=$y;function i8(n){typeof n=="string"&&(cue=n.toLowerCase().replace(/_/g,"-"))}function wn(n,e,t){let i=Bt(),r=fi(),s=hr();return r8(r,i,i[si],s,n,e,t),wn}function YE(n,e,t){let i=Bt(),r=fi(),s=hr();return(s.type&3||t)&&j6(s,r,i,t,i[si],n,e,hE(s,i,e)),YE}function r8(n,e,t,i,r,s,o){let a=!0,c=null;if((i.type&3||o)&&(c??=hE(i,e,s),j6(i,n,e,o,t,r,s,c)&&(a=!1)),a){let l=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=hE(i,e,s),m5(i,e,h,f,r,c)}if(l&&l.length)for(let d of l)c??=hE(i,e,s),m5(i,e,d,r,r,c)}}function Yn(n=1){return Uj(n)}function lue(n,e){let t=null,i=Hae(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?o6(n,s,!0):Wae(i,s))return r}return t}function fr(n){let e=Bt()[Es][ds];if(!e.projection){let t=n?n.length:1,i=e.projection=uj(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?lue(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function $n(n,e=0,t,i,r,s){let o=Bt(),a=fi(),c=i?n+1:null;c!==null&&zE(o,a,c,i,r,s,null,t);let l=Zp(a,vi+n,16,null,t||null);l.projection===null&&(l.projection=e),fP();let d=!o[Fp]||cP();o[Es][ds].projection[l.projection]===null&&c!==null?uue(o,a,c):d&&!RE(l)&&yce(a,o,l)}function uue(n,e,t){let i=vi+t,r=e.data[i],s=n[i],o=JP(s,r.tView.ssrId),a=UN(n,r,void 0,{dehydratedView:o});zN(s,a,0,bE(r,o))}function Ms(n,e,t,i){Vle(n,e,t,i)}function nl(n,e,t){Fle(n,e,t)}function Qi(n){let e=Bt(),t=fi(),i=gP();Jw(i+1);let r=$N(t,i);if(n.dirty&&xj(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=zle(e,i);n.reset(s,rae),n.notifyOnChanges()}return!0}return!1}function Ji(){return Lle(Bt(),gP())}function QE(n){let e=Mj();return $w(e,vi+n)}function aE(n,e){return n<<17|e<<2}function Ph(n){return n>>17&32767}function due(n){return(n&2)==2}function hue(n,e){return n&131071|e<<17}function cN(n){return n|2}function Kp(n){return(n&131068)>>2}function PP(n,e){return n&-131069|e<<2}function fue(n){return(n&1)===1}function lN(n){return n|1}function pue(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ph(o),c=Kp(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Op(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=Ph(n[a+1]);n[i+1]=aE(h,a),h!==0&&(n[h+1]=PP(n[h+1],i)),n[a+1]=hue(n[a+1],i)}else n[i+1]=aE(a,0),a!==0&&(n[a+1]=PP(n[a+1],i)),a=i;else n[i+1]=aE(c,0),a===0?a=i:n[c+1]=PP(n[c+1],i),c=i;l&&(n[i+1]=cN(n[i+1])),x5(n,u,i,!0),x5(n,u,i,!1),mue(e,u,n,i,s),o=aE(a,c),s?e.classBindings=o:e.styleBindings=o}function mue(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Op(s,e)>=0&&(t[i+1]=lN(t[i+1]))}function x5(n,e,t,i){let r=n[t+1],s=e===null,o=i?Ph(r):Kp(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];gue(c,e)&&(a=!0,n[o+1]=i?lN(l):cN(l)),o=i?Ph(l):Kp(l)}a&&(n[t+1]=i?cN(r):lN(r))}function gue(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Op(n,e)>=0:!1}var ta={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _ue(n){return n.substring(ta.key,ta.keyEnd)}function yue(n){return vue(n),s8(n,o8(n,0,ta.textEnd))}function s8(n,e){let t=ta.textEnd;return t===e?-1:(e=ta.keyEnd=bue(n,ta.key=e,t),o8(n,e,t))}function vue(n){ta.key=0,ta.keyEnd=0,ta.value=0,ta.valueEnd=0,ta.textEnd=n.length}function o8(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bue(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function qy(n,e,t){return a8(n,e,t,!1),qy}function oi(n,e){return a8(n,e,null,!0),oi}function il(n){wue(Aue,xue,n,!0)}function xue(n,e){for(let t=yue(e);t>=0;t=s8(e,t))jw(n,_ue(e),!0)}function a8(n,e,t,i){let r=Bt(),s=fi(),o=Yw(2);if(s.firstUpdatePass&&l8(s,n,o,i),e!==Cs&&ia(r,o,e)){let a=s.data[Gc()];u8(s,a,r,r[si],n,r[o+1]=Due(e,t),i,o)}}function wue(n,e,t,i){let r=fi(),s=Yw(2);r.firstUpdatePass&&l8(r,null,s,i);let o=Bt();if(t!==Cs&&ia(o,s,t)){let a=r.data[Gc()];if(d8(a,i)&&!c8(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Uw(c,t||"")),aN(r,a,o,t,i)}else Mue(r,a,o,o[si],o[s+1],o[s+1]=Cue(n,e,t),i,s)}}function c8(n,e){return e>=n.expandoStartIndex}function l8(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Gc()],o=c8(n,t);d8(s,i)&&e===null&&!o&&(e=!1),e=Eue(r,s,e,i),pue(r,s,e,t,o,i)}}function Eue(n,e,t,i){let r=Oj(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=NP(null,n,e,t,i),t=Vy(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=NP(r,n,e,t,i),s===null){let c=Sue(n,e,i);c!==void 0&&Array.isArray(c)&&(c=NP(null,n,e,c[1],i),c=Vy(c,e.attrs,i),Tue(n,e,i,c))}else s=Iue(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function Sue(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Kp(i)!==0)return n[Ph(i)]}function Tue(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ph(r)]=i}function Iue(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Vy(i,o,t)}return Vy(i,e.attrs,t)}function NP(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Vy(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Vy(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),jw(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Cue(n,e,t){if(t==null||t==="")return us;let i=[],r=ra(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function Aue(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&jw(n,i,t)}function Mue(n,e,t,i,r,s,o,a){r===Cs&&(r=us);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0,g=null,v;u===d?(c+=2,l+=2,h!==f&&(g=d,v=f)):d===null||u!==null&&u<d?(c+=2,g=u):(l+=2,g=d,v=f),g!==null&&u8(n,e,t,i,g,v,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function u8(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=fue(l)?w5(c,e,t,r,Kp(l),o):void 0;if(!AE(u)){AE(s)||due(l)&&(s=w5(c,null,t,r,a,o));let d=eP(Gc(),t);bce(i,o,d,r,s)}}function w5(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===Cs&&(h=d?us:void 0);let f=d?Gw(h,i):u===i?h:void 0;if(l&&!AE(f)&&(f=Gw(c,i)),AE(f)&&(a=f,o))return a;let g=n[r+1];r=o?Ph(g):Kp(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Gw(c,i))}return a}function AE(n){return n!==void 0}function Due(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=zc(ra(n)))),n}function d8(n,e){return(n.flags&(e?8:16))!==0}function ge(n,e=""){let t=Bt(),i=fi(),r=n+vi,s=i.firstCreatePass?Zp(i,r,1,e,null):i.data[r],o=Rue(i,t,s,e,n);t[r]=o,tE()&&PN(i,t,o,s),Hp(s,!1)}var Rue=(n,e,t,i,r)=>(Ay(!0),Xae(e[si],i));function Pue(n,e,t,i=""){return ia(n,Ch(),t)?e+bh(t)+i:Cs}function Nue(n,e,t,i,r,s=""){let o=Dj(),a=H6(n,o,t,r);return Yw(2),a?e+bh(t)+i+bh(r)+s:Cs}function fs(n){return Ky("",n),fs}function Ky(n,e,t){let i=Bt(),r=Pue(i,n,e,t);return r!==Cs&&h8(i,Gc(),r),Ky}function JE(n,e,t,i,r){let s=Bt(),o=Nue(s,n,e,t,i,r);return o!==Cs&&h8(s,Gc(),o),JE}function h8(n,e,t){let i=eP(e,n);Yae(n[si],i,t)}function ZE(n,e,t){qN(e)&&(e=e());let i=Bt(),r=Ch();if(ia(i,r,e)){let s=fi(),o=Cy();w6(o,i,n,e,i[si],t)}return ZE}function JN(n,e){let t=qN(n);return t&&n.set(e),t}function eS(n,e){let t=Bt(),i=fi(),r=hr();return r8(i,t,t[si],r,n,e),eS}function kue(n,e,t){let i=fi();if(i.firstCreatePass){let r=$a(n);uN(t,i.data,i.blueprint,r,!0),uN(e,i.data,i.blueprint,r,!1)}}function uN(n,e,t,i,r){if(n=Rr(n),Array.isArray(n))for(let s=0;s<n.length;s++)uN(n[s],e,t,i,r);else{let s=fi(),o=Bt(),a=hr(),c=_h(n)?n:Rr(n.provide),l=X1(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(_h(n)||!n.multi){let f=new Dh(l,r,mt,null),g=OP(c,e,r?u:u+h,d);g===-1?(FP(_E(a,o),s,c),kP(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[g]=f,o[g]=f)}else{let f=OP(c,e,u+h,d),g=OP(c,e,u,u+h),v=f>=0&&t[f],_=g>=0&&t[g];if(r&&!_||!r&&!v){FP(_E(a,o),s,c);let b=Fue(r?Lue:Oue,t.length,r,i,l,n);!r&&_&&(t[g].providerFactory=b),kP(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(b),o.push(b)}else{let b=f8(t[r?g:f],l,!r&&i);kP(s,n,f>-1?f:g,b)}!r&&i&&_&&t[g].componentProviders++}}}function kP(n,e,t,i){let r=_h(e),s=_j(e);if(r||s){let c=(s?Rr(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function f8(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function OP(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Oue(n,e,t,i,r){return dN(this.multi,[])}function Lue(n,e,t,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Oy(i,i[Dt],this.providerFactory.index,r);o=c.slice(0,a),dN(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],dN(s,o);return o}function dN(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Fue(n,e,t,i,r,s){let o=new Dh(n,t,mt,null);return o.multi=[],o.index=e,o.componentProviders=0,f8(o,r,i&&!t),o}function Ds(n,e=[]){return t=>{t.providersResolver=(i,r)=>kue(i,r?r(n):n,e)}}function p8(n,e){let t=n[e];return t===Cs?void 0:t}function Vue(n,e,t,i,r,s){let o=e+t;return ia(n,o,r)?z6(n,o+1,s?i.call(s,r):i(r)):p8(n,o+1)}function Uue(n,e,t,i,r,s,o){let a=e+t;return H6(n,a,r,s)?z6(n,a+2,o?i.call(o,r,s):i(r,s)):p8(n,a+2)}function rl(n,e){let t=fi(),i,r=n+vi;t.firstCreatePass?(i=Bue(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=Tu(i.type,!0)),o,a=ls(mt);try{let c=gE(!1),l=s();return gE(c),tP(t,Bt(),r,l),l}finally{ls(a)}}function Bue(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Vu(n,e,t){let i=n+vi,r=Bt(),s=$w(r,i);return m8(r,i)?Vue(r,mP(),e,s.transform,t,s):s.transform(t)}function ZN(n,e,t,i){let r=n+vi,s=Bt(),o=$w(s,r);return m8(s,r)?Uue(s,mP(),e,o.transform,t,i,o):o.transform(t,i)}function m8(n,e){return n[Dt].data[e].pure}var ME=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ek=(()=>{class n{compileModuleSync(t){return new CE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=W1(t),s=r6(r.declarations).reduce((o,a)=>{let c=jc(a);return c&&o.push(new Rh(c)),o},[]);return new ME(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g8=(()=>{class n{applicationErrorHandler=H(Ts);appRef=H(xr);taskService=H($c);ngZone=H(_t);zonelessEnabled=H(Dy);tracing=H(Zc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Nn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_y):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(TP,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?xP:bP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_y+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _8(){return[{provide:Hc,useExisting:g8},{provide:_t,useClass:yy},{provide:Dy,useValue:!0}]}function zue(){return typeof $localize<"u"&&$localize.locale||$y}var Xy=new Te("",{factory:()=>H(Xy,{optional:!0,skipSelf:!0})||zue()});function em(n,e){return nw(n,e?.equal)}var w8=Symbol("InputSignalNode#UNSET"),Jue=ct(re({},iw),{transformFn:void 0,applyValueToInputSignal(n,e){oy(n,e)}});function E8(n,e){let t=Object.create(Jue);t.value=n,t.transformFn=e?.transform;function i(){if(iy(t),t.value===w8){let r=null;throw new me(-950,r)}return t.value}return i[as]=t,i}var tm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Uy(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function y8(n,e){return E8(n,e)}function Zue(n){return E8(w8,n)}var S8=(y8.required=Zue,y8);var tk=new Te(""),ede=new Te("");function Yy(n){return!n.moduleRef}function tde(n){let e=Yy(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{Yy(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ts),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Yy(n)){let s=()=>e.destroy(),o=n.platformInjector.get(tk);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(tk);o.add(s),n.moduleRef.onDestroy(()=>{ky(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return ide(i,t,()=>{let s=e.get($c),o=s.add(),a=e.get(YN);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Xy,$y);if(i8(c||$y),!e.get(ede,!0))return Yy(n)?e.get(xr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Yy(n)){let u=e.get(xr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return nde?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var nde;function ide(n,e,t){try{let i=t();return tl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var tS=null;function rde(n=[],e){return Yt.create({name:e,providers:[{provide:xy,useValue:"platform"},{provide:tk,useValue:new Set([()=>tS=null])},...n]})}function sde(n=[]){if(tS)return tS;let e=rde(n);return tS=e,e8(),ode(e),e}function ode(n){let e=n.get(DE,null);ji(n,()=>{e?.forEach(t=>t())})}function Qy(){return!1}var Rs=(()=>{class n{static __NG_ELEMENT_ID__=ade}return n})();function ade(n){return cde(hr(),Bt(),(n&16)===16)}function cde(n,e,t){if(Nu(n)&&!t){let i=So(n.index,e);return new Lu(i,i)}else if(n.type&175){let i=e[Es];return new Lu(i,e)}return null}var nk=class{constructor(){}supports(e){return WN(e)}create(e){return new ik(e)}},lde=(n,e)=>e,ik=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||lde}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<v8(i,r,s)?t:i,a=v8(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;u<=g&&g<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!WN(e))throw new me(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,U6(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new rk(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new nS),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rk=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sk=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},nS=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new sk,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function v8(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function b8(){return new iS([new nk])}var iS=(()=>{class n{factories;static \u0275prov=xe({token:n,providedIn:"root",factory:b8});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=H(n,{optional:!0,skipSelf:!0});return n.create(t,i||b8())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new me(901,!1)}}return n})();function T8(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Wn(kn.BootstrapApplicationStart);try{let s=r?.injector??sde(i),o=[_8(),Gj,...t||[]],a=new Fy({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return tde({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Wn(kn.BootstrapApplicationEnd)}}function Pi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function I8(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function rS(n,e){let t=jc(n),i=e.elementInjector||Lp();return new Rh(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var M8=null;function To(){return M8}function ok(n){M8??=n}var Jy=class{},ak=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(D8),providedIn:"platform"})}return n})();var D8=(()=>{class n extends ak{_location;_history;_doc=H(zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return To().getBaseHref(this._doc)}onPopState(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function R8(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function C8(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Uu(n){return n&&n[0]!=="?"?`?${n}`:n}var nm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(N8),providedIn:"root"})}return n})(),P8=new Te(""),N8=(()=>{class n extends nm{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return R8(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Uu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Uu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Uu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(st(ak),st(P8,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bu=(()=>{class n{_subject=new At;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=hde(C8(A8(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Uu(i))}normalize(t){return n.stripTrailingSlash(dde(this._basePath,A8(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uu(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Uu;static joinWithSlash=R8;static stripTrailingSlash=C8;static \u0275fac=function(i){return new(i||n)(st(nm))};static \u0275prov=xe({token:n,factory:()=>ude(),providedIn:"root"})}return n})();function ude(){return new Bu(st(nm))}function dde(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function A8(n){return n.replace(/\/index.html$/,"")}function hde(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Yr=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Yr||{}),ni=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ni||{}),Ps=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Ps||{}),ol={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function F8(n){return eo(n)[Wi.LocaleId]}function V8(n,e,t){let i=eo(n),r=[i[Wi.DayPeriodsFormat],i[Wi.DayPeriodsStandalone]],s=Io(r,e);return Io(s,t)}function U8(n,e,t){let i=eo(n),r=[i[Wi.DaysFormat],i[Wi.DaysStandalone]],s=Io(r,e);return Io(s,t)}function B8(n,e,t){let i=eo(n),r=[i[Wi.MonthsFormat],i[Wi.MonthsStandalone]],s=Io(r,e);return Io(s,t)}function z8(n,e){let i=eo(n)[Wi.Eras];return Io(i,e)}function Zy(n,e){let t=eo(n);return Io(t[Wi.DateFormat],e)}function ev(n,e){let t=eo(n);return Io(t[Wi.TimeFormat],e)}function tv(n,e){let i=eo(n)[Wi.DateTimeFormat];return Io(i,e)}function nv(n,e){let t=eo(n),i=t[Wi.NumberSymbols][e];if(typeof i>"u"){if(e===ol.CurrencyDecimal)return t[Wi.NumberSymbols][ol.Decimal];if(e===ol.CurrencyGroup)return t[Wi.NumberSymbols][ol.Group]}return i}function H8(n){if(!n[Wi.ExtraData])throw new me(2303,!1)}function j8(n){let e=eo(n);return H8(e),(e[Wi.ExtraData][2]||[]).map(i=>typeof i=="string"?ck(i):[ck(i[0]),ck(i[1])])}function G8(n,e,t){let i=eo(n);H8(i);let r=[i[Wi.ExtraData][0],i[Wi.ExtraData][1]],s=Io(r,e)||[];return Io(s,t)||[]}function Io(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new me(2304,!1)}function ck(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var fde=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sS={},pde=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function W8(n,e,t,i){let r=Ede(n);e=sl(t,e)||e;let o=[],a;for(;e;)if(a=pde.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=r.getTimezoneOffset();i&&(c=q8(i,c),r=wde(r,i));let l="";return o.forEach(u=>{let d=bde(u);l+=d?d(r,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function uS(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function sl(n,e){let t=F8(n);if(sS[t]??={},sS[t][e])return sS[t][e];let i="";switch(e){case"shortDate":i=Zy(n,Ps.Short);break;case"mediumDate":i=Zy(n,Ps.Medium);break;case"longDate":i=Zy(n,Ps.Long);break;case"fullDate":i=Zy(n,Ps.Full);break;case"shortTime":i=ev(n,Ps.Short);break;case"mediumTime":i=ev(n,Ps.Medium);break;case"longTime":i=ev(n,Ps.Long);break;case"fullTime":i=ev(n,Ps.Full);break;case"short":let r=sl(n,"shortTime"),s=sl(n,"shortDate");i=oS(tv(n,Ps.Short),[r,s]);break;case"medium":let o=sl(n,"mediumTime"),a=sl(n,"mediumDate");i=oS(tv(n,Ps.Medium),[o,a]);break;case"long":let c=sl(n,"longTime"),l=sl(n,"longDate");i=oS(tv(n,Ps.Long),[c,l]);break;case"full":let u=sl(n,"fullTime"),d=sl(n,"fullDate");i=oS(tv(n,Ps.Full),[u,d]);break}return i&&(sS[t][e]=i),i}function oS(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function aa(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function mde(n,e){return aa(n,3).substring(0,e)}function Zi(n,e,t=0,i=!1,r=!1){return function(s,o){let a=gde(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return mde(a,e);let c=nv(o,ol.MinusSign);return aa(a,e,c,i,r)}}function gde(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new me(2301,!1)}}function di(n,e,t=Yr.Format,i=!1){return function(r,s){return _de(r,s,n,e,t,i)}}function _de(n,e,t,i,r,s){switch(t){case 2:return B8(e,r,i)[n.getMonth()];case 1:return U8(e,r,i)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=j8(e),u=G8(e,r,i),d=l.findIndex(h=>{if(Array.isArray(h)){let[f,g]=h,v=o>=f.hours&&a>=f.minutes,_=o<g.hours||o===g.hours&&a<g.minutes;if(f.hours<g.hours){if(v&&_)return!0}else if(v||_)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return V8(e,r,i)[o<12?0:1];case 3:return z8(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new me(2302,!1)}}function aS(n){return function(e,t,i){let r=-1*i,s=nv(t,ol.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+aa(o,2,s)+aa(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+aa(o,1,s);case 2:return"GMT"+(r>=0?"+":"")+aa(o,2,s)+":"+aa(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+aa(o,2,s)+":"+aa(Math.abs(r%60),2,s);default:throw new me(2310,!1)}}}var yde=0,lS=4;function vde(n){let e=uS(n,yde,1).getDay();return uS(n,0,1+(e<=lS?lS:lS+7)-e)}function $8(n){let e=n.getDay(),t=e===0?-3:lS-e;return uS(n.getFullYear(),n.getMonth(),n.getDate()+t)}function lk(n,e=!1){return function(t,i){let r;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{let s=$8(t),o=vde(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return aa(r,n,nv(i,ol.MinusSign))}}function cS(n,e=!1){return function(t,i){let s=$8(t).getFullYear();return aa(s,n,nv(i,ol.MinusSign),e)}}var uk={};function bde(n){if(uk[n])return uk[n];let e;switch(n){case"G":case"GG":case"GGG":e=di(3,ni.Abbreviated);break;case"GGGG":e=di(3,ni.Wide);break;case"GGGGG":e=di(3,ni.Narrow);break;case"y":e=Zi(0,1,0,!1,!0);break;case"yy":e=Zi(0,2,0,!0,!0);break;case"yyy":e=Zi(0,3,0,!1,!0);break;case"yyyy":e=Zi(0,4,0,!1,!0);break;case"Y":e=cS(1);break;case"YY":e=cS(2,!0);break;case"YYY":e=cS(3);break;case"YYYY":e=cS(4);break;case"M":case"L":e=Zi(1,1,1);break;case"MM":case"LL":e=Zi(1,2,1);break;case"MMM":e=di(2,ni.Abbreviated);break;case"MMMM":e=di(2,ni.Wide);break;case"MMMMM":e=di(2,ni.Narrow);break;case"LLL":e=di(2,ni.Abbreviated,Yr.Standalone);break;case"LLLL":e=di(2,ni.Wide,Yr.Standalone);break;case"LLLLL":e=di(2,ni.Narrow,Yr.Standalone);break;case"w":e=lk(1);break;case"ww":e=lk(2);break;case"W":e=lk(1,!0);break;case"d":e=Zi(2,1);break;case"dd":e=Zi(2,2);break;case"c":case"cc":e=Zi(7,1);break;case"ccc":e=di(1,ni.Abbreviated,Yr.Standalone);break;case"cccc":e=di(1,ni.Wide,Yr.Standalone);break;case"ccccc":e=di(1,ni.Narrow,Yr.Standalone);break;case"cccccc":e=di(1,ni.Short,Yr.Standalone);break;case"E":case"EE":case"EEE":e=di(1,ni.Abbreviated);break;case"EEEE":e=di(1,ni.Wide);break;case"EEEEE":e=di(1,ni.Narrow);break;case"EEEEEE":e=di(1,ni.Short);break;case"a":case"aa":case"aaa":e=di(0,ni.Abbreviated);break;case"aaaa":e=di(0,ni.Wide);break;case"aaaaa":e=di(0,ni.Narrow);break;case"b":case"bb":case"bbb":e=di(0,ni.Abbreviated,Yr.Standalone,!0);break;case"bbbb":e=di(0,ni.Wide,Yr.Standalone,!0);break;case"bbbbb":e=di(0,ni.Narrow,Yr.Standalone,!0);break;case"B":case"BB":case"BBB":e=di(0,ni.Abbreviated,Yr.Format,!0);break;case"BBBB":e=di(0,ni.Wide,Yr.Format,!0);break;case"BBBBB":e=di(0,ni.Narrow,Yr.Format,!0);break;case"h":e=Zi(3,1,-12);break;case"hh":e=Zi(3,2,-12);break;case"H":e=Zi(3,1);break;case"HH":e=Zi(3,2);break;case"m":e=Zi(4,1);break;case"mm":e=Zi(4,2);break;case"s":e=Zi(5,1);break;case"ss":e=Zi(5,2);break;case"S":e=Zi(6,1);break;case"SS":e=Zi(6,2);break;case"SSS":e=Zi(6,3);break;case"Z":case"ZZ":case"ZZZ":e=aS(0);break;case"ZZZZZ":e=aS(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=aS(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=aS(2);break;default:return null}return uk[n]=e,e}function q8(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function xde(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function wde(n,e,t){let r=n.getTimezoneOffset(),s=q8(e,r);return xde(n,-1*(s-r))}function Ede(n){if(k8(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return uS(r,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(fde))return Sde(i)}let e=new Date(n);if(!k8(e))throw new me(2311,!1);return e}function Sde(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function k8(n){return n instanceof Date&&!isNaN(n.valueOf())}var dS=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fS=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new dS(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),O8(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);O8(s,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(mt(As),mt(Zs),mt(iS))};static \u0275dir=xt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function O8(n,e){n.context.$implicit=e.item}var ca=(()=>{class n{_viewContainer;_context=new hS;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L8(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L8(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(mt(As),mt(Zs))};static \u0275dir=xt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hS=class{$implicit=null;ngIf=null};function L8(n,e){if(n&&!n.createEmbeddedView)throw new me(2020,!1)}function K8(n,e){return new me(2100,!1)}var dk=class{createSubscription(e,t,i){return Ii(()=>e.subscribe({next:t,error:i}))}dispose(e){Ii(()=>e.unsubscribe())}},hk=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},Tde=new hk,Ide=new dk,Oh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=H(Ts);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(tl(t))return Tde;if(GE(t))return Ide;throw K8(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(mt(Rs,16))};static \u0275pipe=BE({name:"async",type:n,pure:!1})}return n})();var Cde="mediumDate",X8=new Te(""),Y8=new Te(""),fk=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(t==null||t===""||t!==t)return null;try{let o=i??this.defaultOptions?.dateFormat??Cde,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return W8(t,o,s||this.locale,a)}catch(o){throw K8(n,o.message)}}static \u0275fac=function(i){return new(i||n)(mt(Xy,16),mt(X8,24),mt(Y8,24))};static \u0275pipe=BE({name:"date",type:n,pure:!0})}return n})();var Ns=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({})}return n})();function pS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Lh=class{};var pk="browser";function Q8(n){return n===pk}var iv=class{_doc;constructor(e){this._doc=e}manager},mS=(()=>{class n extends iv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(st(zt))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),yS=new Te(""),yk=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(o=>{o.manager=this});let r=t.filter(o=>!(o instanceof mS));this._plugins=r.slice().reverse();let s=t.find(o=>o instanceof mS);s&&this._plugins.push(s)}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new me(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(st(yS),st(_t))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),mk="ng-app-id";function J8(n){for(let e of n)e.remove()}function Z8(n,e){let t=e.createElement("style");return t.textContent=n,t}function Ade(n,e,t,i){let r=n.head?.querySelectorAll(`style[${mk}="${e}"],link[${mk}="${e}"]`);if(r)for(let s of r)s.removeAttribute(mk),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function _k(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var vk=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,Ade(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,Z8);i?.forEach(r=>this.addUsage(r,this.external,_k))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(J8(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])J8(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,Z8(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,_k(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(st(zt),st(Qp),st(Jp,8),st(Yc))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),gk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bk=/%COMP%/g;var tG="%COMP%",Mde=`_nghost-${tG}`,Dde=`_ngcontent-${tG}`,Rde=!0,Pde=new Te("",{factory:()=>Rde});function Nde(n){return Dde.replace(bk,n)}function kde(n){return Mde.replace(bk,n)}function nG(n,e){return e.map(t=>t.replace(bk,n))}var ov=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new rv(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof _S?r.applyToHost(t):r instanceof sv&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case na.Emulated:s=new _S(c,l,i,this.appId,u,o,a,d,h);break;case na.ShadowDom:return new gS(c,t,i,o,a,this.nonce,d,h,l);case na.ExperimentalIsolatedShadowDom:return new gS(c,t,i,o,a,this.nonce,d,h);default:s=new sv(c,l,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(st(yk),st(vk),st(Qp),st(Pde),st(zt),st(_t),st(Jp),st(Zc,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),rv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(gk[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eG(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(eG(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new me(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=gk[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=gk[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ka.DashCase|Ka.Important)?e.style.setProperty(t,i,r&Ka.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ka.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=To().getGlobalEventTarget(this.doc,e),!e))throw new me(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function eG(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gS=class extends rv{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,i,r,s,o,a,c,l){super(e,r,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=nG(i.id,u);for(let h of u){let f=document.createElement("style");o&&f.setAttribute("nonce",o),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=_k(h,r);o&&f.setAttribute("nonce",o),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},sv=class extends rv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?nG(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&qp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},_S=class extends sv{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,c,l){let u=r+"-"+i.id;super(e,t,i,s,o,a,c,l,u),this.contentAttr=Nde(u),this.hostAttr=kde(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var vS=class n extends Jy{supportsDOMEvents=!0;static makeCurrent(){ok(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ode();return t==null?null:Lde(t)}resetBaseElement(){av=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pS(document.cookie,e)}},av=null;function Ode(){return av=av||document.head.querySelector("base"),av?av.getAttribute("href"):null}function Lde(n){return new URL(n,document.baseURI).pathname}var Fde=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),iG=["alt","control","meta","shift"],Vde={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ude={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rG=(()=>{class n extends iv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),iG.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=Vde[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),iG.forEach(o=>{if(o!==r){let a=Ude[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(st(zt))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function xk(n,e,t){let i=re({rootComponent:n,platformRef:t?.platformRef},Bde(e));return T8(i)}function Bde(n){return{appProviders:[...Wde,...n?.providers??[]],platformProviders:Gde}}function zde(){vS.makeCurrent()}function Hde(){return new ws}function jde(){return pN(document),document}var Gde=[{provide:Yc,useValue:pk},{provide:DE,useValue:zde,multi:!0},{provide:zt,useFactory:jde}];var Wde=[{provide:xy,useValue:"root"},{provide:ws,useFactory:Hde},{provide:yS,useClass:mS,multi:!0},{provide:yS,useClass:rG,multi:!0},ov,vk,yk,{provide:Yi,useExisting:ov},{provide:Lh,useClass:Fde},[]];var zu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ek=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Sk=class{encodeKey(e){return sG(e)}encodeValue(e){return sG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $de(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var qde=/%(\d[a-f0-9])/gi,Kde={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sG(n){return encodeURIComponent(n).replace(qde,(e,t)=>Kde[t]??e)}function bS(n){return`${n}`}var al=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Sk,e.fromString){if(e.fromObject)throw new me(2805,!1);this.map=$de(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(bS):[bS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(bS(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(bS(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function Xde(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function oG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function aG(n){return typeof Blob<"u"&&n instanceof Blob}function cG(n){return typeof FormData<"u"&&n instanceof FormData}function Yde(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var lG="Content-Type",uG="Accept",dG="text/plain",hG="application/json",Qde=`${hG}, ${dG}, */*`,rm=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let s;if(Xde(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new me(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new zu,this.context??=new Ek,!this.params)this.params=new al,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||oG(this.body)||aG(this.body)||cG(this.body)||Yde(this.body)?this.body:this.body instanceof al?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cG(this.body)?null:aG(this.body)?this.body.type||null:oG(this.body)?null:typeof this.body=="string"?dG:this.body instanceof al?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?hG:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,h=e.integrity||this.integrity,f=e.referrerPolicy||this.referrerPolicy,g=e.transferCache??this.transferCache,v=e.timeout??this.timeout,_=e.body!==void 0?e.body:this.body,b=e.withCredentials??this.withCredentials,R=e.reportProgress??this.reportProgress,P=e.headers||this.headers,N=e.params||this.params,U=e.context??this.context;return e.setHeaders!==void 0&&(P=Object.keys(e.setHeaders).reduce((O,S)=>O.set(S,e.setHeaders[S]),P)),e.setParams&&(N=Object.keys(e.setParams).reduce((O,S)=>O.set(S,e.setParams[S]),N)),new n(t,i,_,{params:N,headers:P,context:U,reportProgress:R,responseType:r,withCredentials:b,transferCache:g,keepalive:s,cache:a,priority:o,timeout:v,mode:c,redirect:l,credentials:u,referrer:d,integrity:h,referrerPolicy:f})}},Fh=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Fh||{}),cv=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,i="OK"){this.headers=e.headers||new zu,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},Tk=class n extends cv{constructor(e={}){super(e)}type=Fh.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lv=class n extends cv{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Fh.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},sm=class extends cv{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Jde=200,Zde=204;var ehe=/^\)\]\}',?\n/;var the=(()=>{class n{xhrFactory;tracingService=H(Zc,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new me(-2800,!1);let i=this.xhrFactory;return bt(null).pipe(yi(()=>new gt(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((_,b)=>o.setRequestHeader(_,b.join(","))),t.headers.has(uG)||o.setRequestHeader(uG,Qde),!t.headers.has(lG)){let _=t.detectContentTypeHeader();_!==null&&o.setRequestHeader(lG,_)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let _=t.responseType.toLowerCase();o.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=o.statusText||"OK",b=new zu(o.getAllResponseHeaders()),R=o.responseURL||t.url;return c=new Tk({headers:b,status:o.status,statusText:_,url:R}),c},u=this.maybePropagateTrace(()=>{let{headers:_,status:b,statusText:R,url:P}=l(),N=null;b!==Zde&&(N=typeof o.response>"u"?o.responseText:o.response),b===0&&(b=N?Jde:0);let U=b>=200&&b<300;if(t.responseType==="json"&&typeof N=="string"){let O=N;N=N.replace(ehe,"");try{N=N!==""?JSON.parse(N):null}catch(S){N=O,U&&(U=!1,N={error:S,text:N})}}U?(s.next(new lv({body:N,headers:_,status:b,statusText:R,url:P||void 0})),s.complete()):s.error(new sm({error:N,headers:_,status:b,statusText:R,url:P||void 0}))}),d=this.maybePropagateTrace(_=>{let{url:b}=l(),R=new sm({error:_,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(R)}),h=d;t.timeout&&(h=this.maybePropagateTrace(_=>{let{url:b}=l(),R=new sm({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:b||void 0});s.error(R)}));let f=!1,g=this.maybePropagateTrace(_=>{f||(s.next(l()),f=!0);let b={type:Fh.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),t.responseType==="text"&&o.responseText&&(b.partialText=o.responseText),s.next(b)}),v=this.maybePropagateTrace(_=>{let b={type:Fh.UploadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),s.next(b)});return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",h),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",g),a!==null&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:Fh.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",g),a!==null&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(st(Lh))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nhe(n,e){return e(n)}function ihe(n,e,t){return(i,r)=>ji(t,()=>e(i,s=>n(s,r)))}var rhe=new Te("",{factory:()=>[]}),fG=new Te(""),she=new Te("",{providedIn:"root",factory:()=>!0});var ohe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(the),r},providedIn:"root"})}return n})();var ahe=(()=>{class n{backend;injector;chain=null;pendingTasks=H(Ou);contributeToStability=H(she);constructor(t,i){this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(rhe),...this.injector.get(fG,[])]));this.chain=i.reduceRight((r,s)=>ihe(r,s,this.injector),nhe)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ph(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(st(ohe),st(ti))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),che=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(ahe),r},providedIn:"root"})}return n})();function wk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Ik=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof rm)s=t;else{let c;r.headers instanceof zu?c=r.headers:c=new zu(r.headers);let l;r.params&&(r.params instanceof al?l=r.params:l=new al({fromObject:r.params})),s=new rm(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let o=bt(s).pipe(Pp(c=>this.handler.handle(c)));if(t instanceof rm||r.observe==="events")return o;let a=o.pipe(ei(c=>c instanceof lv));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new me(2806,!1);return c.body}));case"blob":return a.pipe(pt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new me(2807,!1);return c.body}));case"text":return a.pipe(pt(c=>{if(c.body!==null&&typeof c.body!="string")throw new me(2808,!1);return c.body}));case"json":default:return a.pipe(pt(c=>c.body))}case"response":return a;default:throw new me(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new al().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,wk(r,i))}post(t,i,r={}){return this.request("POST",t,wk(r,i))}put(t,i,r={}){return this.request("PUT",t,wk(r,i))}static \u0275fac=function(i){return new(i||n)(st(che))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pG=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(st(zt))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ck=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(uhe),r},providedIn:"root"})}return n})(),uhe=(()=>{class n extends Ck{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Nr.NONE:return i;case Nr.HTML:return Qc(i,"HTML")?ra(i):xN(this._doc,String(i)).toString();case Nr.STYLE:return Qc(i,"Style")?ra(i):i;case Nr.SCRIPT:if(Qc(i,"Script"))return ra(i);throw new me(5200,!1);case Nr.URL:return Qc(i,"URL")?ra(i):By(String(i));case Nr.RESOURCE_URL:if(Qc(i,"ResourceURL"))return ra(i);throw new me(5201,!1);default:throw new me(5202,!1)}}bypassSecurityTrustHtml(t){return gN(t)}bypassSecurityTrustStyle(t){return _N(t)}bypassSecurityTrustScript(t){return yN(t)}bypassSecurityTrustUrl(t){return vN(t)}bypassSecurityTrustResourceUrl(t){return bN(t)}static \u0275fac=function(i){return new(i||n)(st(zt))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wt="primary",wv=Symbol("RouteTitle"),Pk=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zh(n){return new Pk(n)}function SG(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function IS(n){return new Promise((e,t)=>{n.pipe(Vc()).subscribe({next:i=>e(i),error:i=>t(i)})})}function hhe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ya(n[t],e[t]))return!1;return!0}function Ya(n,e){let t=n?Nk(n):void 0,i=e?Nk(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!TG(n[r],e[r]))return!1;return!0}function Nk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TG(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function IG(n){return n.length>0?n[n.length-1]:null}function jh(n){return ly(n)?n:tl(n)?_i(Promise.resolve(n)):bt(n)}function CG(n){return ly(n)?IS(n):Promise.resolve(n)}var fhe={exact:MG,subset:DG},AG={exact:phe,subset:mhe,ignored:()=>!0};function gG(n,e,t){return fhe[t.paths](n.root,e.root,t.matrixParams)&&AG[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function phe(n,e){return Ya(n,e)}function MG(n,e,t){if(!Uh(n.segments,e.segments)||!ES(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!MG(n.children[i],e.children[i],t))return!1;return!0}function mhe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TG(n[t],e[t]))}function DG(n,e,t){return RG(n,e,e.segments,t)}function RG(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Uh(r,t)||e.hasChildren()||!ES(r,t,i))}else if(n.segments.length===t.length){if(!Uh(n.segments,t)||!ES(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!DG(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Uh(n.segments,r)||!ES(n.segments,r,i)||!n.children[Wt]?!1:RG(n.children[Wt],e,s,i)}}function ES(n,e,t){return e.every((i,r)=>AG[t](n[r].parameters,i.parameters))}var ua=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Hn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=zh(this.queryParams),this._queryParamMap}toString(){return yhe.serialize(this)}},Hn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return SS(this)}},Hu=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zh(this.parameters),this._parameterMap}toString(){return NG(this)}};function ghe(n,e){return Uh(n,e)&&n.every((t,i)=>Ya(t.parameters,e[i].parameters))}function Uh(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function _he(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Wt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}var Ev=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>new ju,providedIn:"root"})}return n})(),ju=class{parse(e){let t=new Ok(e);return new ua(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${uv(e.root,!0)}`,i=xhe(e.queryParams),r=typeof e.fragment=="string"?`#${vhe(e.fragment)}`:"";return`${t}${i}${r}`}},yhe=new ju;function SS(n){return n.segments.map(e=>NG(e)).join("/")}function uv(n,e){if(!n.hasChildren())return SS(n);if(e){let t=n.children[Wt]?uv(n.children[Wt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Wt&&i.push(`${r}:${uv(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=_he(n,(i,r)=>r===Wt?[uv(n.children[Wt],!1)]:[`${r}:${uv(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Wt]!=null?`${SS(n)}/${t[0]}`:`${SS(n)}/(${t.join("//")})`}}function PG(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xS(n){return PG(n).replace(/%3B/gi,";")}function vhe(n){return encodeURI(n)}function kk(n){return PG(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function TS(n){return decodeURIComponent(n)}function _G(n){return TS(n.replace(/\+/g,"%20"))}function NG(n){return`${kk(n.path)}${bhe(n.parameters)}`}function bhe(n){return Object.entries(n).map(([e,t])=>`;${kk(e)}=${kk(t)}`).join("")}function xhe(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${xS(t)}=${xS(r)}`).join("&"):`${xS(t)}=${xS(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var whe=/^[^\/()?;#]+/;function Ak(n){let e=n.match(whe);return e?e[0]:""}var Ehe=/^[^\/()?;=#]+/;function She(n){let e=n.match(Ehe);return e?e[0]:""}var The=/^[^=?&#]+/;function Ihe(n){let e=n.match(The);return e?e[0]:""}var Che=/^[^&#]+/;function Ahe(n){let e=n.match(Che);return e?e[0]:""}var Ok=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hn([],{}):new Hn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Wt]=new Hn(e,t)),i}parseSegment(){let e=Ak(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new me(4009,!1);return this.capture(e),new Hu(TS(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=She(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Ak(this.remaining);r&&(i=r,this.capture(i))}e[TS(t)]=TS(i)}parseQueryParam(e){let t=Ihe(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=Ahe(this.remaining);o&&(i=o,this.capture(i))}let r=_G(t),s=_G(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Ak(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new me(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Wt);let o=this.parseChildren();t[s??Wt]=Object.keys(o).length===1&&o[Wt]?o[Wt]:new Hn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new me(4011,!1)}};function kG(n){return n.segments.length>0?new Hn([],{[Wt]:n}):n}function OG(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=OG(r);if(i===Wt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Hn(n.segments,e);return Mhe(t)}function Mhe(n){if(n.numberOfChildren===1&&n.children[Wt]){let e=n.children[Wt];return new Hn(n.segments.concat(e.segments),e.children)}return n}function Gu(n){return n instanceof ua}function LG(n,e,t=null,i=null,r=new ju){let s=FG(n);return VG(s,e,t,i,r)}function FG(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Hn(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=kG(i);return e??r}function VG(n,e,t,i,r){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Mk(s,s,s,t,i,r);let o=Dhe(e);if(o.toRoot())return Mk(s,s,new Hn([],{}),t,i,r);let a=Rhe(o,s,n),c=a.processChildren?hv(a.segmentGroup,a.index,o.commands):BG(a.segmentGroup,a.index,o.commands);return Mk(s,a.segmentGroup,c,t,i,r)}function CS(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function mv(n){return typeof n=="object"&&n!=null&&n.outlets}function yG(n,e,t){n||="\u0275";let i=new ua;return i.queryParams={[n]:e},t.parse(t.serialize(i)).queryParams[n]}function Mk(n,e,t,i,r,s){let o={};for(let[l,u]of Object.entries(i??{}))o[l]=Array.isArray(u)?u.map(d=>yG(l,d,s)):yG(l,u,s);let a;n===e?a=t:a=UG(n,e,t);let c=kG(OG(a));return new ua(c,o,r)}function UG(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=UG(s,e,t)}),new Hn(n.segments,i)}var AS=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&CS(i[0]))throw new me(4003,!1);let r=i.find(mv);if(r&&r!==IG(i))throw new me(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dhe(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new AS(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new AS(t,e,i)}var am=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Rhe(n,e,t){if(n.isAbsolute)return new am(e,!0,0);if(!t)return new am(e,!1,NaN);if(t.parent===null)return new am(t,!0,0);let i=CS(n.commands[0])?0:1,r=t.segments.length-1+i;return Phe(t,r,n.numberOfDoubleDots)}function Phe(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new me(4005,!1);r=i.segments.length}return new am(i,!1,r-s)}function Nhe(n){return mv(n[0])?n[0].outlets:{[Wt]:n}}function BG(n,e,t){if(n??=new Hn([],{}),n.segments.length===0&&n.hasChildren())return hv(n,e,t);let i=khe(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Hn(n.segments.slice(0,i.pathIndex),{});return s.children[Wt]=new Hn(n.segments.slice(i.pathIndex),n.children),hv(s,0,r)}else return i.match&&r.length===0?new Hn(n.segments,{}):i.match&&!n.hasChildren()?Lk(n,e,t):i.match?hv(n,0,r):Lk(n,e,t)}function hv(n,e,t){if(t.length===0)return new Hn(n.segments,{});{let i=Nhe(t),r={};if(Object.keys(i).some(s=>s!==Wt)&&n.children[Wt]&&n.numberOfChildren===1&&n.children[Wt].segments.length===0){let s=hv(n.children[Wt],e,t);return new Hn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=BG(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Hn(n.segments,r)}}function khe(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(mv(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!bG(c,l,o))return s;i+=2}else{if(!bG(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Lk(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(mv(s)){let c=Ohe(s.outlets);return new Hn(i,c)}if(r===0&&CS(t[0])){let c=n.segments[e];i.push(new Hu(c.path,vG(t[0]))),r++;continue}let o=mv(s)?s.outlets[Wt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&CS(a)?(i.push(new Hu(o,vG(a))),r+=2):(i.push(new Hu(o,{})),r++)}return new Hn(i,{})}function Ohe(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Lk(new Hn([],{}),0,i))}),e}function vG(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function bG(n,e,t){return n==t.path&&Ya(e,t.parameters)}var fv="imperative",wr=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(wr||{}),no=class{id;url;constructor(e,t){this.id=e,this.url=t}},Hh=class extends no{type=wr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ja=class extends no{urlAfterRedirects;type=wr.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ps=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ps||{}),gv=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(gv||{}),Qa=class extends no{reason;code;type=wr.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},cl=class extends no{reason;code;type=wr.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},lm=class extends no{error;target;type=wr.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_v=class extends no{urlAfterRedirects;state;type=wr.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},MS=class extends no{urlAfterRedirects;state;type=wr.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},DS=class extends no{urlAfterRedirects;state;shouldActivate;type=wr.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},RS=class extends no{urlAfterRedirects;state;type=wr.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},PS=class extends no{urlAfterRedirects;state;type=wr.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NS=class{route;type=wr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},kS=class{route;type=wr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},OS=class{snapshot;type=wr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LS=class{snapshot;type=wr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},FS=class{snapshot;type=wr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},VS=class{snapshot;type=wr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var yv=class{},um=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Lhe(n){return!(n instanceof yv)&&!(n instanceof um)}function Fhe(n,e){return n.providers&&!n._injector&&(n._injector=Gy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function la(n){return n.outlet||Wt}function Vhe(n,e){let t=n.filter(i=>la(i)===e);return t.push(...n.filter(i=>la(i)!==e)),t}function fm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var US=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fm(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new pm(this.rootInjector)}},pm=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new US(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(st(ti))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BS=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Fk(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Fk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Vk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Vk(e,this._root).map(t=>t.value)}};function Fk(n,e){if(n===e.value)return e;for(let t of e.children){let i=Fk(n,t);if(i)return i}return null}function Vk(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Vk(n,t);if(i.length)return i.unshift(e),i}return[]}var to=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function om(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vv=class extends BS{snapshot;constructor(e,t){super(e),this.snapshot=t,Gk(this,e)}toString(){return this.snapshot.toString()}};function zG(n){let e=Uhe(n),t=new Bi([new Hu("",{})]),i=new Bi({}),r=new Bi({}),s=new Bi({}),o=new Bi(""),a=new ll(t,i,s,o,r,Wt,n,e.root);return a.snapshot=e.root,new vv(new to(a,[]),e)}function Uhe(n){let e={},t={},i={},s=new Bh([],e,i,"",t,Wt,n,null,{});return new bv("",new to(s,[]))}var ll=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(pt(l=>l[wv]))??bt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pt(e=>zh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pt(e=>zh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zS(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:re(re({},e.params),n.params),data:re(re({},e.data),n.data),resolve:re(re(re(re({},n.data),e.data),r?.data),n._resolvedData)}:i={params:re({},n.params),data:re({},n.data),resolve:re(re({},n.data),n._resolvedData??{})},r&&jG(r)&&(i.resolve[wv]=r.title),i}var Bh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wv]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bv=class extends BS{url;constructor(e,t){super(t),this.url=e,Gk(this,t)}toString(){return HG(this._root)}};function Gk(n,e){e.value._routerState=n,e.children.forEach(t=>Gk(n,t))}function HG(n){let e=n.children.length>0?` { ${n.children.map(HG).join(", ")} } `:"";return`${n.value}${e}`}function Dk(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ya(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ya(e.params,t.params)||n.paramsSubject.next(t.params),hhe(e.url,t.url)||n.urlSubject.next(t.url),Ya(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Uk(n,e){let t=Ya(n.params,e.params)&&ghe(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Uk(n.parent,e.parent))}function jG(n){return typeof n.title=="string"||n.title===null}var GG=new Te(""),Sv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Wt;activateEvents=new yn;deactivateEvents=new yn;attachEvents=new yn;detachEvents=new yn;routerOutletData=S8(void 0,{});parentContexts=H(pm);location=H(As);changeDetector=H(Rs);inputBinder=H(WS,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new me(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new me(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Bk(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hs]})}return n})(),Bk=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===ll?this.route:e===pm?this.childContexts:e===GG?this.outletData:this.parent.get(e,t)}},WS=new Te("");var Wk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Cn(0,"router-outlet")},dependencies:[Sv],encapsulation:2})}return n})();function $k(n){let e=n.children&&n.children.map($k),t=e?ct(re({},n),{children:e}):re({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=Wk),t}function Bhe(n,e,t){let i=xv(n,e._root,t?t._root:void 0);return new vv(i,e)}function xv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=zhe(n,e,t);return new to(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xv(n,a)),o}}let i=Hhe(e.value),r=e.children.map(s=>xv(n,s));return new to(i,r)}}function zhe(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return xv(n,i,r);return xv(n,i)})}function Hhe(n){return new ll(new Bi(n.url),new Bi(n.params),new Bi(n.queryParams),new Bi(n.fragment),new Bi(n.data),n.outlet,n.component,n)}var dm=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},WG="ngNavigationCancelingError";function HS(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=$G(!1,ps.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function $G(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[WG]=!0,t.cancellationCode=e,t}function jhe(n){return qG(n)&&Gu(n.url)}function qG(n){return!!n&&n[WG]}var Ghe=(n,e,t,i)=>pt(r=>(new zk(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),zk=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Dk(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=om(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=om(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=om(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=om(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new VS(s.value.snapshot))}),e.children.length&&this.forwardEvent(new LS(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Dk(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Dk(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},jS=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},cm=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Whe(n,e,t){let i=n._root,r=e?e._root:null;return dv(i,r,t,[i.value])}function $he(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function mm(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!k1(n)?n:e.get(n):i}function dv(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=om(e);return n.children.forEach(o=>{qhe(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>pv(a,t.getContext(o),r)),r}function qhe(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Khe(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new jS(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?dv(n,e,a?a.children:null,i,r):dv(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new cm(a.outlet.component,o))}else o&&pv(e,a,r),r.canActivateChecks.push(new jS(i)),s.component?dv(n,null,a?a.children:null,i,r):dv(n,null,t,i,r);return r}function Khe(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Uh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uh(n.url,e.url)||!Ya(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uk(n,e)||!Ya(n.queryParams,e.queryParams);case"paramsChange":default:return!Uk(n,e)}}function pv(n,e,t){let i=om(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?pv(o,e.children.getContext(s),t):pv(o,null,t):pv(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new cm(e.outlet.component,r)):t.canDeactivateChecks.push(new cm(null,r)):t.canDeactivateChecks.push(new cm(null,r))}function Tv(n){return typeof n=="function"}function Xhe(n){return typeof n=="boolean"}function Yhe(n){return n&&Tv(n.canLoad)}function Qhe(n){return n&&Tv(n.canActivate)}function Jhe(n){return n&&Tv(n.canActivateChild)}function Zhe(n){return n&&Tv(n.canDeactivate)}function efe(n){return n&&Tv(n.canMatch)}function KG(n){return n instanceof uh||n?.name==="EmptyError"}var wS=Symbol("INITIAL_VALUE");function hm(){return yi(n=>f1(n.map(e=>e.pipe(zi(1),Uc(wS)))).pipe(pt(e=>{for(let t of e)if(t!==!0){if(t===wS)return wS;if(t===!1||tfe(t))return t}return!0}),ei(e=>e!==wS),zi(1)))}function tfe(n){return Gu(n)||n instanceof dm}function XG(n){return n.aborted?bt(void 0).pipe(zi(1)):new gt(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function YG(n){return Ba(XG(n))}function nfe(n,e){return cs(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?bt(ct(re({},t),{guardsResult:!0})):ife(o,i,r,n).pipe(cs(a=>a&&Xhe(a)?rfe(i,s,n,e):bt(a)),pt(a=>ct(re({},t),{guardsResult:a})))})}function ife(n,e,t,i){return _i(n).pipe(cs(r=>lfe(r.component,r.route,t,e,i)),Vc(r=>r!==!0,!0))}function rfe(n,e,t,i){return _i(e).pipe(Pp(r=>Rp(ofe(r.route.parent,i),sfe(r.route,i),cfe(n,r.path,t),afe(n,r.route,t))),Vc(r=>r!==!0,!0))}function sfe(n,e){return n!==null&&e&&e(new FS(n)),bt(!0)}function ofe(n,e){return n!==null&&e&&e(new OS(n)),bt(!0)}function afe(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return bt(!0);let r=i.map(s=>uy(()=>{let o=fm(e)??t,a=mm(s,o),c=Qhe(a)?a.canActivate(e,n):ji(o,()=>a(e,n));return jh(c).pipe(Vc())}));return bt(r).pipe(hm())}function cfe(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>$he(o)).filter(o=>o!==null).map(o=>uy(()=>{let a=o.guards.map(c=>{let l=fm(o.node)??t,u=mm(c,l),d=Jhe(u)?u.canActivateChild(i,n):ji(l,()=>u(i,n));return jh(d).pipe(Vc())});return bt(a).pipe(hm())}));return bt(s).pipe(hm())}function lfe(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return bt(!0);let o=s.map(a=>{let c=fm(e)??r,l=mm(a,c),u=Zhe(l)?l.canDeactivate(n,e,t,i):ji(c,()=>l(n,e,t,i));return jh(u).pipe(Vc())});return bt(o).pipe(hm())}function ufe(n,e,t,i,r){let s=e.canLoad;if(s===void 0||s.length===0)return bt(!0);let o=s.map(a=>{let c=mm(a,n),l=Yhe(c)?c.canLoad(e,t):ji(n,()=>c(e,t)),u=jh(l);return r?u.pipe(YG(r)):u});return bt(o).pipe(hm(),QG(i))}function QG(n){return ch(Hi(e=>{if(typeof e!="boolean")throw HS(n,e)}),pt(e=>e===!0))}function dfe(n,e,t,i,r){let s=e.canMatch;if(!s||s.length===0)return bt(!0);let o=s.map(a=>{let c=mm(a,n),l=efe(c)?c.canMatch(e,t):ji(n,()=>c(e,t)),u=jh(l);return r?u.pipe(YG(r)):u});return bt(o).pipe(hm(),QG(i))}var Vh=class JG extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,JG.prototype)}},Hk=class ZG extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,ZG.prototype)}};function hfe(n){throw new me(4e3,!1)}function ffe(n){throw $G(!1,ps.GuardRejected)}var pfe=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[Wt])throw hfe(`${e.redirectTo}`);r=r.children[Wt]}}async applyRedirectCommands(e,t,i,r,s){let o=await mfe(t,r,s);if(o instanceof ua)throw new Hk(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,i);if(o[0]==="/")throw new Hk(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new ua(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new Hn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new me(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function mfe(n,e,t){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:d}=e;return IS(jh(ji(t,()=>i({params:l,data:u,queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,title:d}))))}var jk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gfe(n,e,t,i,r,s){let o=e9(n,e,t);return o.matched?(i=Fhe(e,i),dfe(i,e,t,r,s).pipe(pt(a=>a===!0?o:re({},jk)))):bt(o)}function e9(n,e,t){if(e.path==="**")return _fe(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?re({},jk):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||SG)(t,n,e);if(!r)return re({},jk);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?re(re({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function _fe(n){return{matched:!0,parameters:n.length>0?IG(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function xG(n,e,t,i){return t.length>0&&bfe(n,t,i)?{segmentGroup:new Hn(e,vfe(i,new Hn(t,n.children))),slicedSegments:[]}:t.length===0&&xfe(n,t,i)?{segmentGroup:new Hn(n.segments,yfe(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Hn(n.segments,n.children),slicedSegments:t}}function yfe(n,e,t,i){let r={};for(let s of t)if($S(n,e,s)&&!i[la(s)]){let o=new Hn([],{});r[la(s)]=o}return re(re({},i),r)}function vfe(n,e){let t={};t[Wt]=e;for(let i of n)if(i.path===""&&la(i)!==Wt){let r=new Hn([],{});t[la(i)]=r}return t}function bfe(n,e,t){return t.some(i=>$S(n,e,i)&&la(i)!==Wt)}function xfe(n,e,t){return t.some(i=>$S(n,e,i))}function $S(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function wfe(n,e,t){return e.length===0&&!n.children[t]}var Efe=class{};async function Sfe(n,e,t,i,r,s,o="emptyOnly",a){return new Ife(n,e,t,i,r,o,s,a).recognize()}var Tfe=31,Ife=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new pfe(this.urlSerializer,this.urlTree)}noMatchError(e){return new me(4002,`'${e.segmentGroup}'`)}async recognize(){let e=xG(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:i}=await this.match(e),r=new to(i,t),s=new bv("",r),o=LG(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Bh([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Wt,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Wt,t),rootSnapshot:t}}catch(i){if(i instanceof Hk)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Vh?this.noMatchError(i):i}}async processSegmentGroup(e,t,i,r,s){if(i.segments.length===0&&i.hasChildren())return this.processChildren(e,t,i,s);let o=await this.processSegment(e,t,i,i.segments,r,!0,s);return o instanceof to?[o]:[]}async processChildren(e,t,i,r){let s=[];for(let c of Object.keys(i.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=i.children[c],u=Vhe(t,c),d=await this.processSegmentGroup(e,u,l,c,r);o.push(...d)}let a=t9(o);return Cfe(a),a}async processSegment(e,t,i,r,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a)}catch(l){if(l instanceof Vh||KG(l))continue;throw l}if(wfe(i,r,s))return new Efe;throw new Vh(i)}async processSegmentAgainstRoute(e,t,i,r,s,o,a,c){if(la(i)!==o&&(o===Wt||!$S(r,s,i)))throw new Vh(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,r,i,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c);throw new Vh(r)}async expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=e9(t,r,s);if(!c)throw new Vh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tfe&&(this.allowRedirects=!1));let f=new Bh(s,l,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,wG(r),la(r),r.component??r._loadedComponent??null,r,EG(r)),g=zS(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(g.params),f.data=Object.freeze(g.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let v=await this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e),_=await this.applyRedirects.lineralizeSegments(r,v);return this.processSegment(e,i,t,_.concat(h),o,!1,a)}async matchSegmentAgainstRoute(e,t,i,r,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await IS(gfe(t,i,r,e,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(t.children={}),!a?.matched)throw new Vh(t);e=i._injector??e;let{routes:c}=await this.getChildConfig(e,i,r),l=i._loadedInjector??e,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Bh(d,u,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,wG(i),la(i),i.component??i._loadedComponent??null,i,EG(i)),g=zS(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let{segmentGroup:v,slicedSegments:_}=xG(t,d,h,c);if(_.length===0&&v.hasChildren()){let P=await this.processChildren(l,c,v,f);return new to(f,P)}if(c.length===0&&_.length===0)return new to(f,[]);let b=la(i)===s,R=await this.processSegment(l,c,v,_,b?Wt:s,!0,f);return new to(f,R instanceof to?[R]:[])}async getChildConfig(e,t,i){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await IS(ufe(e,t,i,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw ffe(t)}return{routes:[],injector:e}}};function Cfe(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}function Afe(n){let e=n.value.routeConfig;return e&&e.path===""}function t9(n){let e=[],t=new Set;for(let i of n){if(!Afe(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=t9(i.children);e.push(new to(i.value,r))}return e.filter(i=>!t.has(i))}function wG(n){return n.data||{}}function EG(n){return n.resolve||{}}var Mfe=new Te("",{factory:()=>Sfe});function Dfe(n,e,t,i,r,s,o){let a=n.get(Mfe);return cs(c=>bt(c).pipe(yi(l=>a(n,e,t,i,l.extractedUrl,r,s,o)),pt(({state:l,tree:u})=>ct(re({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function Rfe(n,e){return cs(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return bt(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of n9(c))o.add(l);let a=0;return _i(o).pipe(Pp(c=>s.has(c)?Pfe(c,i,n,e):(c.data=zS(c,c.parent,n).resolve,bt(void 0))),Hi(()=>a++),Dw(1),cs(c=>a===o.size?bt(t):$r))})}function n9(n){let e=n.children.map(t=>n9(t)).flat();return[n,...e]}function Pfe(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!jG(r)&&(s[wv]=r.title),uy(()=>(n.data=zS(n,n.parent,t).resolve,Nfe(s,n,e,i).pipe(pt(o=>(n._resolvedData=o,n.data=re(re({},n.data),o),null)))))}function Nfe(n,e,t,i){let r=Nk(n);if(r.length===0)return bt({});let s={};return _i(r).pipe(cs(o=>kfe(n[o],e,t,i).pipe(Vc(),Hi(a=>{if(a instanceof dm)throw HS(new ju,a);s[o]=a}))),Dw(1),pt(()=>s),hh(o=>KG(o)?$r:cy(o)))}function kfe(n,e,t,i){let r=fm(e)??i,s=mm(n,r),o=s.resolve?s.resolve(e,t):ji(r,()=>s(e,t));return jh(o)}function Rk(n){return yi(e=>{let t=n(e);return t?_i(t).pipe(pt(()=>e)):bt(e)})}var qk=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Wt);return i}getResolvedTitleForRoute(t){return t.data[wv]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(i9),providedIn:"root"})}return n})(),i9=(()=>{class n extends qk{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(st(pG))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gm=new Te("",{factory:()=>({})}),Iv=new Te(""),r9=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(ek);async loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await CG(ji(t,()=>i.loadComponent())),o=await a9(o9(s));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o,o}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await s9(i,this.compiler,t,this.onLoadEndListener);return i._loadedRoutes=s.routes,i._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function s9(n,e,t,i){let r=await CG(ji(t,()=>n.loadChildren())),s=await a9(o9(r)),o;s instanceof UE||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),i&&i(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(Iv,[],{optional:!0,self:!0}).flat()),{routes:c.map($k),injector:a}}function Ofe(n){return n&&typeof n=="object"&&"default"in n}function o9(n){return Ofe(n)?n.default:n}async function a9(n){return n}var qS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(Lfe),providedIn:"root"})}return n})(),Lfe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),c9=new Te("");var Ffe=()=>{},l9=new Te(""),u9=(()=>{class n{currentNavigation=bi(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=bi(null,{});events=new At;transitionAbortWithErrorSubject=new At;configLoader=H(r9);environmentInjector=H(ti);destroyRef=H(Ss);urlSerializer=H(Ev);rootContexts=H(pm);location=H(Bu);inputBindingEnabled=H(WS,{optional:!0})!==null;titleStrategy=H(qk);options=H(gm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(qS);createViewTransition=H(c9,{optional:!0});navigationErrorHandler=H(l9,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>bt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new NS(r)),i=r=>this.events.next(new kS(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;Ii(()=>{this.transitions?.next(ct(re({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(t){return this.transitions=new Bi(null),this.transitions.pipe(ei(i=>i!==null),yi(i=>{let r=!1,s=new AbortController;return bt(i).pipe(yi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ps.SupersededByNewNavigation),$r;this.currentTransition=i;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ct(re({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new cl(o.id,this.urlSerializer.serialize(o.rawUrl),"",gv.IgnoredSameUrlNavigation)),o.resolve(!1),$r;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return bt(o).pipe(yi(u=>(this.events.next(new Hh(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?$r:Promise.resolve(u))),Dfe(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Hi(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new _v(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:f,extras:g}=o,v=new Hh(u,this.urlSerializer.serialize(d),h,f);this.events.next(v);let _=zG(this.rootComponentType).snapshot;return this.currentTransition=i=ct(re({},o),{targetSnapshot:_,urlAfterRedirects:d,extras:ct(re({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(b=>(b.finalUrl=d,b)),bt(i)}else return this.events.next(new cl(o.id,this.urlSerializer.serialize(o.extractedUrl),"",gv.IgnoredByUrlHandlingStrategy)),o.resolve(!1),$r}),Hi(o=>{let a=new MS(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),pt(o=>(this.currentTransition=i=ct(re({},o),{guards:Whe(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),nfe(this.environmentInjector,o=>this.events.next(o)),Hi(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw HS(this.urlSerializer,o.guardsResult);let a=new DS(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ei(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ps.GuardRejected),!1)),Rk(o=>{if(o.guards.canActivateChecks.length!==0)return bt(o).pipe(Hi(a=>{let c=new RS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),yi(a=>{let c=!1;return bt(a).pipe(Rfe(this.paramsInheritanceStrategy,this.environmentInjector),Hi({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ps.NoDataFromResolver)}}))}),Hi(a=>{let c=new PS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Rk(o=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=fm(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(o.targetSnapshot.root);return c.length===0?bt(o):_i(Promise.all(c).then(()=>o))}),Rk(()=>this.afterPreactivation()),yi(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?_i(c).pipe(pt(()=>i)):bt(i)}),pt(o=>{let a=Bhe(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ct(re({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),i}),Hi(()=>{this.events.next(new yv)}),Ghe(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),zi(1),Ba(XG(s.signal).pipe(ei(()=>!r&&!i.targetRouterState),Hi(()=>{this.cancelNavigationTransition(i,s.signal.reason+"",ps.Aborted)}))),Hi({next:o=>{r=!0,this.currentNavigation.update(a=>(a.abort=Ffe,a)),this.lastSuccessfulNavigation.set(Ii(this.currentNavigation)),this.events.next(new Ja(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Ba(this.transitionAbortWithErrorSubject.pipe(Hi(o=>{throw o}))),ph(()=>{s.abort(),r||this.cancelNavigationTransition(i,"",ps.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),hh(o=>{if(this.destroyed)return i.resolve(!1),$r;if(r=!0,qG(o))this.events.next(new Qa(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),jhe(o)?this.events.next(new um(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new lm(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let c=ji(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof dm){let{message:l,cancellationCode:u}=HS(this.urlSerializer,c);this.events.next(new Qa(i.id,this.urlSerializer.serialize(i.extractedUrl),l,u)),this.events.next(new um(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return $r}))}))}cancelNavigationTransition(t,i,r){let s=new Qa(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ii(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vfe(n){return n!==fv}var d9=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(Ufe),providedIn:"root"})}return n})(),GS=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Ufe=(()=>{class n extends GS{static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kk=(()=>{class n{urlSerializer=H(Ev);options=H(gm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(Bu);urlHandlingStrategy=H(qS);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ua;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof ua?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=zG(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:()=>H(h9),providedIn:"root"})}return n})(),h9=(()=>{class n extends Kk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Hh?this.updateStateMemento():t instanceof cl?this.commitTransition(i):t instanceof _v?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof yv?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Qa&&t.code!==ps.SupersededByNewNavigation&&t.code!==ps.Redirect?this.restoreHistory(i):t instanceof lm?this.restoreHistory(i,!0):t instanceof Ja&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=re(re({},o),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=re(re({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xk(n,e){n.events.pipe(ei(t=>t instanceof Ja||t instanceof Qa||t instanceof lm||t instanceof cl),pt(t=>t instanceof Ja||t instanceof cl?0:(t instanceof Qa?t.code===ps.Redirect||t.code===ps.SupersededByNewNavigation:!1)?2:1),ei(t=>t!==2),zi(1)).subscribe(()=>{e()})}var Bfe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zfe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},io=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(jE);stateManager=H(Kk);options=H(gm,{optional:!0})||{};pendingTasks=H($c);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(u9);urlSerializer=H(Ev);location=H(Bu);urlHandlingStrategy=H(qS);injector=H(ti);_events=new At;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(d9);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(Iv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(WS,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Nn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=Ii(this.navigationTransitions.currentNavigation);if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Qa&&i.code!==ps.Redirect&&i.code!==ps.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ja)this.navigated=!0;else if(i instanceof um){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=re({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Vfe(r.source)},o);this.scheduleNavigation(a,fv,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Lhe(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=re({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s).catch(c=>{this.disposed||this.injector.get(Ts)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ii(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($k),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=re(re({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=FG(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return VG(d,t,u,l??null,this.urlSerializer)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Gu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,fv,null,i)}navigate(t,i={skipLocationChange:!1}){return Hfe(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ha(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=re({},Bfe):i===!1?r=re({},zfe):r=i,Gu(t))return gG(this.currentUrlTree,t,r);let s=this.parseUrl(t);return gG(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Xk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hfe(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new me(4008,!1)}var KS=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bi(null,{});get href(){return Ii(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new At;applicationErrorHandler=H(Ts);options=H(gm,{optional:!0});constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(H(new tm("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Ja&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Gu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(mt(io),mt(ll),Uy("tabindex"),mt(kr),mt(tn),mt(nm))};static \u0275dir=xt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&wn("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Gi("href",r.reactiveHref(),wN)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Pi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Pi],replaceUrl:[2,"replaceUrl","replaceUrl",Pi],routerLink:"routerLink"},features:[hs]})}return n})();var Gfe=new Te("");function Yk(n,...e){return vr([{provide:Iv,multi:!0,useValue:n},[],{provide:ll,useFactory:Wfe},{provide:$E,multi:!0,useFactory:$fe},e.map(t=>t.\u0275providers)])}function Wfe(){return H(io).routerState.root}function $fe(){let n=H(Yt);return e=>{let t=n.get(xr);if(e!==t.components[0])return;let i=n.get(io),r=n.get(qfe);n.get(Kfe)===1&&i.initialNavigation(),n.get(Xfe,null,{optional:!0})?.setUpPreloading(),n.get(Gfe,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var qfe=new Te("",{factory:()=>new At}),Kfe=new Te("",{factory:()=>1});var Xfe=new Te("");var an=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(an||{}),da="*";function f9(n,e=null){return{type:an.Sequence,steps:n,options:e}}function Qk(n){return{type:an.Style,styles:n,offset:null}}var ul=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},_m=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Cv="!";function p9(n){return new me(3e3,!1)}function Qfe(){return new me(3100,!1)}function Jfe(){return new me(3101,!1)}function Zfe(n){return new me(3001,!1)}function epe(n){return new me(3003,!1)}function tpe(n){return new me(3004,!1)}function g9(n,e){return new me(3005,!1)}function _9(){return new me(3006,!1)}function y9(){return new me(3007,!1)}function v9(n,e){return new me(3008,!1)}function b9(n){return new me(3002,!1)}function x9(n,e,t,i,r){return new me(3010,!1)}function w9(){return new me(3011,!1)}function E9(){return new me(3012,!1)}function S9(){return new me(3200,!1)}function T9(){return new me(3202,!1)}function I9(){return new me(3013,!1)}function C9(n){return new me(3014,!1)}function A9(n){return new me(3015,!1)}function M9(n){return new me(3016,!1)}function D9(n,e){return new me(3404,!1)}function npe(n){return new me(3502,!1)}function R9(n){return new me(3503,!1)}function P9(){return new me(3300,!1)}function N9(n){return new me(3504,!1)}function k9(n){return new me(3301,!1)}function O9(n,e){return new me(3302,!1)}function L9(n){return new me(3303,!1)}function F9(n,e){return new me(3400,!1)}function V9(n){return new me(3401,!1)}function U9(n){return new me(3402,!1)}function B9(n,e){return new me(3505,!1)}function dl(n){switch(n.length){case 0:return new ul;case 1:return n[0];default:return new _m(n)}}function tO(n,e,t=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let g=f,v=h;if(f!=="offset")switch(g=n.normalizePropertyName(g,r),v){case Cv:v=t.get(f);break;case da:v=i.get(f);break;default:v=n.normalizeStyleValue(f,g,v,r);break}d.set(g,v)}),u||s.push(d),a=d,o=l}),r.length)throw npe(r);return s}function XS(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Jk(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Jk(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Jk(t,"destroy",n)));break}}function Jk(n,e,t){let i=t.totalTime,r=!!t.disabled,s=YS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function YS(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ks(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function nO(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var ipe=typeof document>"u"?null:document.documentElement;function QS(n){let e=n.parentNode||n.host||null;return e===ipe?null:e}function rpe(n){return n.substring(1,6)=="ebkit"}var Gh=null,m9=!1;function z9(n){Gh||(Gh=spe()||{},m9=Gh.style?"WebkitAppearance"in Gh.style:!1);let e=!0;return Gh.style&&!rpe(n)&&(e=n in Gh.style,!e&&m9&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Gh.style)),e}function spe(){return typeof document<"u"?document.body:null}function iO(n,e){for(;e;){if(e===n)return!0;e=QS(e)}return!1}function rO(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var ope=1e3,sO="{{",ape="}}",oO="ng-enter",JS="ng-leave",Av="ng-trigger",Mv=".ng-trigger",aO="ng-animating",ZS=".ng-animating";function Za(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zk(parseFloat(e[1]),e[2])}function Zk(n,e){switch(e){case"s":return n*ope;default:return n}}function Dv(n,e,t){return n.hasOwnProperty("duration")?n:lpe(n,e,t)}var cpe=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function lpe(n,e,t){let i,r=0,s="";if(typeof n=="string"){let o=n.match(cpe);if(o===null)return e.push(p9(n)),{duration:0,delay:0,easing:""};i=Zk(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(r=Zk(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else i=n;if(!t){let o=!1,a=e.length;i<0&&(e.push(Qfe()),o=!0),r<0&&(e.push(Jfe()),o=!0),o&&e.splice(a,0,p9(n))}return{duration:i,delay:r,easing:s}}function H9(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function ha(n,e,t){e.forEach((i,r)=>{let s=eT(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function Wu(n,e){e.forEach((t,i)=>{let r=eT(i);n.style[r]=""})}function ym(n){return Array.isArray(n)?n.length==1?n[0]:f9(n):n}function j9(n,e,t){let i=e.params||{},r=cO(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(Zfe(s))})}var eO=new RegExp(`${sO}\\s*(.+?)\\s*${ape}`,"g");function cO(n){let e=[];if(typeof n=="string"){let t;for(;t=eO.exec(n);)e.push(t[1]);eO.lastIndex=0}return e}function vm(n,e,t){let i=`${n}`,r=i.replace(eO,(s,o)=>{let a=e[o];return a==null&&(t.push(epe(o)),a=""),a.toString()});return r==i?n:r}var upe=/-+([a-z0-9])/g;function eT(n){return n.replace(upe,(...e)=>e[1].toUpperCase())}function G9(n,e){return n===0||e===0}function W9(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,tT(n,a)))}}return e}function Os(n,e,t){switch(e.type){case an.Trigger:return n.visitTrigger(e,t);case an.State:return n.visitState(e,t);case an.Transition:return n.visitTransition(e,t);case an.Sequence:return n.visitSequence(e,t);case an.Group:return n.visitGroup(e,t);case an.Animate:return n.visitAnimate(e,t);case an.Keyframes:return n.visitKeyframes(e,t);case an.Style:return n.visitStyle(e,t);case an.Reference:return n.visitReference(e,t);case an.AnimateChild:return n.visitAnimateChild(e,t);case an.AnimateRef:return n.visitAnimateRef(e,t);case an.Query:return n.visitQuery(e,t);case an.Stagger:return n.visitStagger(e,t);default:throw tpe(e.type)}}function tT(n,e){return window.getComputedStyle(n)[e]}var TO=(()=>{class n{validateStyleProperty(t){return z9(t)}containsElement(t,i){return iO(t,i)}getParentElement(t){return QS(t)}query(t,i,r){return rO(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new ul(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),$h=class{static NOOP=new TO},qh=class{};var dpe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),oT=class extends qh{normalizePropertyName(e,t){return eT(e)}normalizeStyleValue(e,t,i,r){let s="",o=i.toString().trim();if(dpe.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(g9(e,i))}return o+s}};var aT="*";function hpe(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>fpe(i,t,e)):t.push(n),t}function fpe(n,e,t){if(n[0]==":"){let c=ppe(n,t);if(typeof c=="function"){e.push(c);return}n=c}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(A9(n)),e;let r=i[1],s=i[2],o=i[3];e.push($9(r,o));let a=r==aT&&o==aT;s[0]=="<"&&!a&&e.push($9(o,r))}function ppe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(M9(n)),"* => *"}}var nT=new Set(["true","1"]),iT=new Set(["false","0"]);function $9(n,e){let t=nT.has(n)||iT.has(n),i=nT.has(e)||iT.has(e);return(r,s)=>{let o=n==aT||n==r,a=e==aT||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?nT.has(n):iT.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?nT.has(e):iT.has(e)),o&&a}}var nW=":self",mpe=new RegExp(`s*${nW}s*,?`,"g");function iW(n,e,t,i){return new pO(n).build(e,t,i)}var q9="",pO=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new mO(t);return this._resetContextStyleTimingState(r),Os(this,ym(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=q9,e.collectedStyles=new Map,e.collectedStyles.set(q9,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(_9()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==an.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==an.Transition){let c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(y9())}),{type:an.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{cO(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(v9(e.name,[...s.values()]))}return{type:an.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Os(this,ym(e.animation),t),r=hpe(e.expr,t.errors);return{type:an.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Wh(e.options)}}visitSequence(e,t){return{type:an.Sequence,steps:e.steps.map(i=>Os(this,i,t)),options:Wh(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=i;let a=Os(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:an.Group,steps:s,options:Wh(e.options)}}visitAnimate(e,t){let i=vpe(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Qk({});if(s.type==an.Keyframes)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=Qk(l)}t.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:an.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===da?i.push(a):t.errors.push(b9(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(sO)>=0){s=!0;break}}}),{type:an.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(x9(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),t.options&&j9(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:an.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(w9()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(b=>{let R=this._makeStyleAst(b,t),P=R.offset!=null?R.offset:ype(R.styles),N=0;return P!=null&&(s++,N=R.offset=P),c=c||N<0||N>1,a=a||N<l,l=N,o.push(N),R});c&&t.errors.push(E9()),a&&t.errors.push(S9());let d=e.steps.length,h=0;s>0&&s<d?t.errors.push(T9()):s==0&&(h=r/(d-1));let f=d-1,g=t.currentTime,v=t.currentAnimateTimings,_=v.duration;return u.forEach((b,R)=>{let P=h>0?R==f?1:h*R:o[R],N=P*_;t.currentTime=g+v.delay+N,v.duration=N,this._validateStyleAst(b,t),b.offset=P,i.styles.push(b)}),i}visitReference(e,t){return{type:an.Reference,animation:Os(this,ym(e.animation),t),options:Wh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:an.AnimateChild,options:Wh(e.options)}}visitAnimateRef(e,t){return{type:an.AnimateRef,animation:this.visitReference(e.animation,t),options:Wh(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=gpe(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ks(t.collectedStyles,t.currentQuerySelector,new Map);let a=Os(this,ym(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:an.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Wh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(I9());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Dv(e.timings,t.errors,!0);return{type:an.Stagger,animation:Os(this,ym(e.animation),t),timings:i,options:null}}};function gpe(n){let e=!!n.split(/\s*,\s*/).find(t=>t==nW);return e&&(n=n.replace(mpe,"")),n=n.replace(/@\*/g,Mv).replace(/@\w+/g,t=>Mv+"-"+t.slice(1)).replace(/:animating/g,ZS),[n,e]}function _pe(n){return n?re({},n):null}var mO=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function ype(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function vpe(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Dv(n,e).duration;return lO(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=lO(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=Dv(t,e);return lO(r.duration,r.delay,r.easing)}function Wh(n){return n?(n=re({},n),n.params&&(n.params=_pe(n.params))):n={},n}function lO(n,e,t){return{duration:n,delay:e,easing:t}}function IO(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var Pv=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},bpe=1,xpe=":enter",wpe=new RegExp(xpe,"g"),Epe=":leave",Spe=new RegExp(Epe,"g");function rW(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return new gO().buildKeyframes(n,e,t,i,r,s,o,a,c,l)}var gO=class{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new Pv;let d=new _O(e,t,l,r,s,u,[]);d.options=c;let h=c.delay?Za(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),Os(this,i,d);let f=d.timelines.filter(g=>g.containsAnimation());if(f.length&&a.size){let g;for(let v=f.length-1;v>=0;v--){let _=f[v];if(_.element===t){g=_;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,d.errors,c)}return f.length?f.map(g=>g.buildKeyframes()):[IO(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:Za(vm(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,o=i.duration!=null?Za(i.duration):null,a=i.delay!=null?Za(i.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Os(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==an.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=cT);let o=Za(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Os(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Za(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Os(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?vm(i,t.params,t.errors):i;return Dv(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==an.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Za(r.delay):0;s&&(t.previousNode.type===an.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cT);let o=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),Os(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;Os(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},cT={},_O=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=cT;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new lT(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Za(i.duration)),i.delay!=null&&(r.delay=Za(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=vm(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=cT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new yO(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(wpe,"."+this._enterClassName),e=e.replace(Spe,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(C9(t)),a}},lT=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=bpe,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||da),this._currentKeyframe.set(t,da);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=Tpe(e,this._globalTimelineStyles);for(let[a,c]of o){let l=vm(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??da),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Cv?e.add(d):u===da&&t.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=[...e.values()],o=[...t.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return IO(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},yO=class extends lT{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=i+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",K9(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),g=t+f*i;h.set("offset",K9(g/o)),s.push(h)}i=o,t=0,r="",e=s}return IO(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function K9(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Tpe(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)t.set(s,da)}else for(let[s,o]of r)t.set(s,o)}),t}function X9(n,e,t,i,r,s,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var uO={},uT=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Ipe(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||uO,f=a&&a.params||uO,g=this.buildStyles(i,f,d),v=c&&c.params||uO,_=this.buildStyles(r,v,d),b=new Set,R=new Map,P=new Map,N=r==="void",U={params:sW(v,h),delay:this.ast.options?.delay},O=u?[]:rW(e,t,this.ast.animation,s,o,g,_,U,l,d),S=0;return O.forEach(w=>{S=Math.max(w.duration+w.delay,S)}),d.length?X9(t,this._triggerName,i,r,N,g,_,[],[],R,P,S,d):(O.forEach(w=>{let y=w.element,x=ks(R,y,new Set);w.preStyleProps.forEach(M=>x.add(M));let T=ks(P,y,new Set);w.postStyleProps.forEach(M=>T.add(M)),y!==t&&b.add(y)}),X9(t,this._triggerName,i,r,N,g,_,O,[...b.values()],R,P,S))}};function Ipe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}function sW(n,e){let t=re({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var vO=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=sW(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=vm(o,r,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(a,o)})}),i}};function Cpe(n,e,t){return new bO(n,e,t)}var bO=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new vO(r.style,s,i))}),Y9(this.states,"true","1"),Y9(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new uT(e,r,this.states))}),this.fallbackTransition=Ape(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Ape(n,e,t){let i=[(o,a)=>!0],r={type:an.Sequence,steps:[],options:null},s={type:an.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new uT(n,s,e)}function Y9(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Mpe=new Pv,xO=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],s=iW(this._driver,t,i,r);if(i.length)throw R9(i);this._animations.set(e,s)}_buildPlayer(e,t,i){let r=e.element,s=tO(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=rW(this._driver,t,s,oO,JS,new Map,new Map,i,Mpe,r),o.forEach(u=>{let d=ks(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(P9()),o=[]),r.length)throw N9(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,da))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=dl(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw k9(e);return t}listen(e,t,i,r){let s=YS(t,"","","");return XS(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Q9="ng-animate-queued",Dpe=".ng-animate-queued",dO="ng-animate-disabled",Rpe=".ng-animate-disabled",Ppe="ng-star-inserted",Npe=".ng-star-inserted",kpe=[],oW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ope={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fa="__ng_removed",Nv=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Fpe(r),i){let s=e,{value:o}=s,a=bp(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Rv="void",hO=new Nv(Rv),wO=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Co(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw O9(i,t);if(i==null||i.length==0)throw L9(t);if(!Vpe(i))throw F9(i,t);let s=ks(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);let a=ks(this._engine.statesByElement,e,new Map);return a.has(t)||(Co(e,Av),Co(e,Av+"-"+t),a.set(t,hO)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw V9(e);return t}trigger(e,t,i,r=!0){let s=this._getTrigger(t),o=new kv(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Co(e,Av),Co(e,Av+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Nv(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=hO),!(l.value===Rv)&&c.value===l.value){if(!zpe(c.params,l.params)){let v=[],_=s.matchStyles(c.value,c.params,v),b=s.matchStyles(l.value,l.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Wu(e,_),ha(e,b)})}return}let h=ks(this._engine.playersByElement,e,[]);h.forEach(v=>{v.namespaceId==this.id&&v.triggerName==t&&v.queued&&v.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),g=!1;if(!f){if(!r)return;f=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:g}),g||(Co(e,Q9),o.onStart(()=>{bm(e,Q9)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);let _=this._engine.playersByElement.get(e);if(_){let b=_.indexOf(o);b>=0&&_.splice(b,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Mv,!0);i.forEach(r=>{if(r[fa])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,Rv,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&dl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||hO,u=new Nv(Rv),d=new kv(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[fa];(!s||s===oW)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Co(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=YS(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,XS(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},EO=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new wO(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,r){if(rT(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!rT(t))return;let s=t[fa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Co(e,dO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),bm(e,dO))}removeNode(e,t,i){if(rT(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[fa]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return rT(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Mv,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,ZS,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return dl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[fa];if(t&&t.setForRemoval){if(e[fa]=oW,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Rpe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Co(r,Ppe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?dl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw U9(e)}_flushAnimations(e,t){let i=new Pv,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(G=>{u.add(G);let K=this.driver.query(G,Dpe,!0);for(let W=0;W<K.length;W++)u.add(K[W])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=eW(h,this.collectedEnterElements),g=new Map,v=0;f.forEach((G,K)=>{let W=oO+v++;g.set(K,W),G.forEach(ue=>Co(ue,W))});let _=[],b=new Set,R=new Set;for(let G=0;G<this.collectedLeaveElements.length;G++){let K=this.collectedLeaveElements[G],W=K[fa];W&&W.setForRemoval&&(_.push(K),b.add(K),W.hasAnimation?this.driver.query(K,Npe,!0).forEach(ue=>b.add(ue)):R.add(K))}let P=new Map,N=eW(h,Array.from(b));N.forEach((G,K)=>{let W=JS+v++;P.set(K,W),G.forEach(ue=>Co(ue,W))}),e.push(()=>{f.forEach((G,K)=>{let W=g.get(K);G.forEach(ue=>bm(ue,W))}),N.forEach((G,K)=>{let W=P.get(K);G.forEach(ue=>bm(ue,W))}),_.forEach(G=>{this.processLeaveNode(G)})});let U=[],O=[];for(let G=this._namespaceList.length-1;G>=0;G--)this._namespaceList[G].drainQueuedTransitions(t).forEach(W=>{let ue=W.player,ye=W.element;if(U.push(ue),this.collectedEnterElements.length){let he=ye[fa];if(he&&he.setForMove){if(he.previousTriggersValues&&he.previousTriggersValues.has(W.triggerName)){let ze=he.previousTriggersValues.get(W.triggerName),nt=this.statesByElement.get(W.element);if(nt&&nt.has(W.triggerName)){let et=nt.get(W.triggerName);et.value=ze,nt.set(W.triggerName,et)}}ue.destroy();return}}let Ue=!d||!this.driver.containsElement(d,ye),Qe=P.get(ye),Ze=g.get(ye),tt=this._buildInstruction(W,i,Ze,Qe,Ue);if(tt.errors&&tt.errors.length){O.push(tt);return}if(Ue){ue.onStart(()=>Wu(ye,tt.fromStyles)),ue.onDestroy(()=>ha(ye,tt.toStyles)),r.push(ue);return}if(W.isFallbackTransition){ue.onStart(()=>Wu(ye,tt.fromStyles)),ue.onDestroy(()=>ha(ye,tt.toStyles)),r.push(ue);return}let kt=[];tt.timelines.forEach(he=>{he.stretchStartingKeyframe=!0,this.disabledNodes.has(he.element)||kt.push(he)}),tt.timelines=kt,i.append(ye,tt.timelines);let de={instruction:tt,player:ue,element:ye};o.push(de),tt.queriedElements.forEach(he=>ks(a,he,[]).push(ue)),tt.preStyleProps.forEach((he,ze)=>{if(he.size){let nt=c.get(ze);nt||c.set(ze,nt=new Set),he.forEach((et,Nt)=>nt.add(Nt))}}),tt.postStyleProps.forEach((he,ze)=>{let nt=l.get(ze);nt||l.set(ze,nt=new Set),he.forEach((et,Nt)=>nt.add(Nt))})});if(O.length){let G=[];O.forEach(K=>{G.push(B9(K.triggerName,K.errors))}),U.forEach(K=>K.destroy()),this.reportError(G)}let S=new Map,w=new Map;o.forEach(G=>{let K=G.element;i.has(K)&&(w.set(K,K),this._beforeAnimationBuild(G.player.namespaceId,G.instruction,S))}),r.forEach(G=>{let K=G.element;this._getPreviousPlayers(K,!1,G.namespaceId,G.triggerName,null).forEach(ue=>{ks(S,K,[]).push(ue),ue.destroy()})});let y=_.filter(G=>tW(G,c,l)),x=new Map;Z9(x,this.driver,R,l,da).forEach(G=>{tW(G,c,l)&&y.push(G)});let M=new Map;f.forEach((G,K)=>{Z9(M,this.driver,new Set(G),c,Cv)}),y.forEach(G=>{let K=x.get(G),W=M.get(G);x.set(G,new Map([...K?.entries()??[],...W?.entries()??[]]))});let C=[],oe=[],Z={};o.forEach(G=>{let{element:K,player:W,instruction:ue}=G;if(i.has(K)){if(u.has(K)){W.onDestroy(()=>ha(K,ue.toStyles)),W.disabled=!0,W.overrideTotalTime(ue.totalTime),r.push(W);return}let ye=Z;if(w.size>1){let Qe=K,Ze=[];for(;Qe=Qe.parentNode;){let tt=w.get(Qe);if(tt){ye=tt;break}Ze.push(Qe)}Ze.forEach(tt=>w.set(tt,ye))}let Ue=this._buildAnimation(W.namespaceId,ue,S,s,M,x);if(W.setRealPlayer(Ue),ye===Z)C.push(W);else{let Qe=this.playersByElement.get(ye);Qe&&Qe.length&&(W.parentPlayer=dl(Qe)),r.push(W)}}else Wu(K,ue.fromStyles),W.onDestroy(()=>ha(K,ue.toStyles)),oe.push(W),u.has(K)&&r.push(W)}),oe.forEach(G=>{let K=s.get(G.element);if(K&&K.length){let W=dl(K);G.setRealPlayer(W)}}),r.forEach(G=>{G.parentPlayer?G.syncPlayerEvents(G.parentPlayer):G.destroy()});for(let G=0;G<_.length;G++){let K=_[G],W=K[fa];if(bm(K,JS),W&&W.hasAnimation)continue;let ue=[];if(a.size){let Ue=a.get(K);Ue&&Ue.length&&ue.push(...Ue);let Qe=this.driver.query(K,ZS,!0);for(let Ze=0;Ze<Qe.length;Ze++){let tt=a.get(Qe[Ze]);tt&&tt.length&&ue.push(...tt)}}let ye=ue.filter(Ue=>!Ue.destroyed);ye.length?Upe(this,K,ye):this.processLeaveNode(K)}return _.length=0,C.forEach(G=>{this.players.push(G),G.onDone(()=>{G.destroy();let K=this.players.indexOf(G);this.players.splice(K,1)}),G.play()}),C}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Rv;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let c of t.timelines){let l=c.element,u=l!==s,d=ks(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{let g=f.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),f.destroy(),d.push(f)})}Wu(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(g=>{let v=g.element;u.add(v);let _=v[fa];if(_&&_.removedBeforeQueried)return new ul(g.duration,g.delay);let b=v!==c,R=Bpe((i.get(v)||kpe).map(S=>S.getRealPlayer())).filter(S=>{let w=S;return w.element?w.element===v:!1}),P=s.get(v),N=o.get(v),U=tO(this._normalizer,g.keyframes,P,N),O=this._buildPlayer(g,U,R);if(g.subTimeline&&r&&d.add(v),b){let S=new kv(e,a,v);S.setRealPlayer(O),l.push(S)}return O});l.forEach(g=>{ks(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>Lpe(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>Co(g,aO));let f=dl(h);return f.onDestroy(()=>{u.forEach(g=>bm(g,aO)),ha(c,t.toStyles)}),d.forEach(g=>{ks(r,g,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ul(e.duration,e.delay)}},kv=class{namespaceId;triggerName;element;_player=new ul;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>XS(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ks(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Lpe(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Fpe(n){return n??null}function rT(n){return n&&n.nodeType===1}function Vpe(n){return n=="start"||n=="done"}function J9(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Z9(n,e,t,i,r){let s=[];t.forEach(c=>s.push(J9(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[fa]=Ope,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>J9(c,s[a++])),o}function eW(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&t.get(c).push(a)}),t}function Co(n,e){n.classList?.add(e)}function bm(n,e){n.classList?.remove(e)}function Upe(n,e,t){dl(t).onDone(()=>n.processLeaveNode(e))}function Bpe(n){let e=[];return aW(n,e),e}function aW(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof _m?aW(i.players,e):e.push(i)}}function zpe(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function tW(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}var xm=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new EO(e.body,t,i),this._timelineEngine=new xO(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=iW(this._driver,s,c,l);if(c.length)throw D9(r,c);a=Cpe(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[s,o]=nO(i),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if(i.charAt(0)=="@"){let[o,a]=nO(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Hpe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=fO(e[0]),e.length>1&&(i=fO(e[e.length-1]))):e instanceof Map&&(t=fO(e)),t||i?new jpe(n,t,i):null}var jpe=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ha(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ha(this._element,this._initialStyles),this._endStyles&&(ha(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wu(this._element,this._endStyles),this._endStyles=null),ha(this._element,this._initialStyles),this._state=3)}}return n})();function fO(n){let e=null;return n.forEach((t,i)=>{Gpe(i)&&(e=e||new Map,e.set(i,t))}),e}function Gpe(n){return n==="display"||n==="position"}var dT=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let i=()=>this._onFinish();return t.addEventListener("finish",i),this.onDestroy(()=>{t.removeEventListener("finish",i)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){let r=this._convertKeyframesToObject(t);try{return e.animate(r,i)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:tT(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},hT=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return iO(e,t)}getParentElement(e){return QS(e)}query(e,t,i){return rO(e,t,i)}computeStyle(e,t,i){return tT(e,t)}animate(e,t,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof dT);G9(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((g,v)=>l.set(v,g))});let d=H9(t).map(f=>new Map(f));d=W9(e,d,l);let h=Hpe(e,d);return new dT(e,d,c,h)}};var sT="@",cW="@.disabled",fT=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i,r){if(r){this.delegate.removeChild(e,t,i,r);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==sT&&t==cW?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},SO=class extends fT{factory;constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==sT?t.charAt(1)=="."&&t==cW?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==sT){let s=Wpe(e),o=t.slice(1),a="";return o.charAt(0)!=sT&&([o,a]=$pe(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,i,c)})}return this.delegate.listen(e,t,i,r)}};function Wpe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function $pe(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var pT=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,t){let r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new fT("",r,this.engine,d),l.set(r,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new SO(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Kpe=(()=>{class n extends xm{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(st(zt),st($h),st(qh))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function Xpe(){return new oT}function Ype(){return new pT(H(ov),H(xm),H(_t))}var lW=[{provide:qh,useFactory:Xpe},{provide:xm,useClass:Kpe},{provide:Yi,useFactory:Ype}],pKe=[{provide:$h,useClass:TO},{provide:Fu,useValue:"NoopAnimations"},...lW],Qpe=[{provide:$h,useFactory:()=>new hT},{provide:Fu,useFactory:()=>"BrowserAnimations"},...lW];function uW(){return el("NgEagerAnimations"),[...Qpe]}var dW=()=>{};var pW=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Jpe=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pW(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jpe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new AO;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let g=l<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},AO=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Zpe=function(n){let e=pW(n);return mT.encodeByteArray(e,!0)},Lv=function(n){return Zpe(n).replace(/\./g,"")},gT=function(n){try{return mT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eme=()=>DO().__FIREBASE_DEFAULTS__,tme=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nme=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&gT(n[1]);return e&&JSON.parse(e)},_T=()=>{try{return dW()||eme()||tme()||nme()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RO=n=>{var e,t;return(t=(e=_T())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mW=n=>{let e=RO(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},PO=()=>{var n;return(n=_T())===null||n===void 0?void 0:n.config},NO=n=>{var e;return(e=_T())===null||e===void 0?void 0:e[`_${n}`]};var Kh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function $u(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yT(n){return(await fetch(n,{credentials:"include"})).ok}function gW(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lv(JSON.stringify(t)),Lv(JSON.stringify(o)),""].join(".")}var Ov={};function ime(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ov))Ov[e]?n.emulator.push(e):n.prod.push(e);return n}function rme(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var hW=!1;function vT(n,e){if(typeof window>"u"||typeof document>"u"||!$u(window.location.host)||Ov[n]===e||Ov[n]||hW)return;Ov[n]=e;function t(h){return`__firebase__banner__${h}`}let i="__firebase__banner",s=ime().prod.length>0;function o(){let h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{hW=!0,o()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=rme(i),f=t("text"),g=document.getElementById(f)||document.createElement("span"),v=t("learnmore"),_=document.getElementById(v)||document.createElement("a"),b=t("preprendIcon"),R=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let P=h.element;a(P),u(_,v);let N=l();c(R,b),P.append(R,g,_,N),document.body.appendChild(P)}s?(g.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _W(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function sme(){var n;let e=(n=_T())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yW(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vW(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bW(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xW(){let n=Er();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function wW(){return!sme()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fv(){try{return typeof indexedDB=="object"}catch{return!1}}function EW(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ome="FirebaseError",ro=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ome,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pa.prototype.create)}},pa=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?ame(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ro(r,a,i)}};function ame(n,e){return n.replace(cme,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var cme=/\{\$([^}]+)}/g;function SW(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ec(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(fW(s)&&fW(o)){if(!ec(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function fW(n){return n!==null&&typeof n=="object"}function wm(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function TW(n,e){let t=new MO(n,e);return t.subscribe.bind(t)}var MO=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lme(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=CO),r.error===void 0&&(r.error=CO),r.complete===void 0&&(r.complete=CO);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lme(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function CO(){}var yKe=14400*1e3;function er(n){return n&&n._delegate?n._delegate:n}var ms=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xh="[DEFAULT]";var kO=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Kh;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dme(e))try{this.getOrInitializeService({instanceIdentifier:Xh})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Xh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xh){return this.instances.has(e)}getOptions(e=Xh){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ume(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xh){return this.component?this.component.multipleInstances?e:Xh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ume(n){return n===Xh?void 0:n}function dme(n){return n.instantiationMode==="EAGER"}var bT=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new kO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var hme=[],fn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(fn||{}),fme={debug:fn.DEBUG,verbose:fn.VERBOSE,info:fn.INFO,warn:fn.WARN,error:fn.ERROR,silent:fn.SILENT},pme=fn.INFO,mme={[fn.DEBUG]:"log",[fn.VERBOSE]:"log",[fn.INFO]:"info",[fn.WARN]:"warn",[fn.ERROR]:"error"},gme=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=mme[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},tc=class{constructor(e){this.name=e,this._logLevel=pme,this._logHandler=gme,this._userLogHandler=null,hme.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fme[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fn.DEBUG,...e),this._logHandler(this,fn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fn.VERBOSE,...e),this._logHandler(this,fn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fn.INFO,...e),this._logHandler(this,fn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fn.WARN,...e),this._logHandler(this,fn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fn.ERROR,...e),this._logHandler(this,fn.ERROR,...e)}};var _me=(n,e)=>e.some(t=>n instanceof t),IW,CW;function yme(){return IW||(IW=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vme(){return CW||(CW=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var AW=new WeakMap,LO=new WeakMap,MW=new WeakMap,OO=new WeakMap,VO=new WeakMap;function bme(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(nc(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&AW.set(t,n)}).catch(()=>{}),VO.set(e,n),e}function xme(n){if(LO.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});LO.set(n,e)}var FO={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return LO.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MW.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DW(n){FO=n(FO)}function wme(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(xT(this),e,...t);return MW.set(i,e.sort?e.sort():[e]),nc(i)}:vme().includes(n)?function(...e){return n.apply(xT(this),e),nc(AW.get(this))}:function(...e){return nc(n.apply(xT(this),e))}}function Eme(n){return typeof n=="function"?wme(n):(n instanceof IDBTransaction&&xme(n),_me(n,yme())?new Proxy(n,FO):n)}function nc(n){if(n instanceof IDBRequest)return bme(n);if(OO.has(n))return OO.get(n);let e=Eme(n);return e!==n&&(OO.set(n,e),VO.set(e,n)),e}var xT=n=>VO.get(n);function wT(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=nc(o);return i&&o.addEventListener("upgradeneeded",c=>{i(nc(o.result),c.oldVersion,c.newVersion,nc(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Sme=["get","getKey","getAll","getAllKeys","count"],Tme=["put","add","delete","clear"],UO=new Map;function RW(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(UO.get(e))return UO.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Tme.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Sme.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),r&&c.done]))[0]};return UO.set(e,s),s}DW(n=>ct(re({},n),{get:(e,t,i)=>RW(e,t)||n.get(e,t,i),has:(e,t)=>!!RW(e,t)||n.has(e,t)}));var zO=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ime(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Ime(n){let e=n.getComponent();return e?.type==="VERSION"}var HO="@firebase/app",PW="0.13.2";var hl=new tc("@firebase/app"),Cme="@firebase/app-compat",Ame="@firebase/analytics-compat",Mme="@firebase/analytics",Dme="@firebase/app-check-compat",Rme="@firebase/app-check",Pme="@firebase/auth",Nme="@firebase/auth-compat",kme="@firebase/database",Ome="@firebase/data-connect",Lme="@firebase/database-compat",Fme="@firebase/functions",Vme="@firebase/functions-compat",Ume="@firebase/installations",Bme="@firebase/installations-compat",zme="@firebase/messaging",Hme="@firebase/messaging-compat",jme="@firebase/performance",Gme="@firebase/performance-compat",Wme="@firebase/remote-config",$me="@firebase/remote-config-compat",qme="@firebase/storage",Kme="@firebase/storage-compat",Xme="@firebase/firestore",Yme="@firebase/ai",Qme="@firebase/firestore-compat",Jme="firebase",Zme="11.10.0";var jO="[DEFAULT]",ege={[HO]:"fire-core",[Cme]:"fire-core-compat",[Mme]:"fire-analytics",[Ame]:"fire-analytics-compat",[Rme]:"fire-app-check",[Dme]:"fire-app-check-compat",[Pme]:"fire-auth",[Nme]:"fire-auth-compat",[kme]:"fire-rtdb",[Ome]:"fire-data-connect",[Lme]:"fire-rtdb-compat",[Fme]:"fire-fn",[Vme]:"fire-fn-compat",[Ume]:"fire-iid",[Bme]:"fire-iid-compat",[zme]:"fire-fcm",[Hme]:"fire-fcm-compat",[jme]:"fire-perf",[Gme]:"fire-perf-compat",[Wme]:"fire-rc",[$me]:"fire-rc-compat",[qme]:"fire-gcs",[Kme]:"fire-gcs-compat",[Xme]:"fire-fst",[Qme]:"fire-fst-compat",[Yme]:"fire-vertex","fire-js":"fire-js",[Jme]:"fire-js-all"};var Vv=new Map,tge=new Map,GO=new Map;function NW(n,e){try{n.container.addComponent(e)}catch(t){hl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){let e=n.name;if(GO.has(e))return hl.debug(`There were multiple attempts to register component ${e}.`),!1;GO.set(e,n);for(let t of Vv.values())NW(t,n);for(let t of tge.values())NW(t,n);return!0}function Em(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function so(n){return n==null?!1:n.settings!==void 0}var nge={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qu=new pa("app","Firebase",nge);var WO=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qu.create("app-deleted",{appName:this._name})}};var Ku=Zme;function KO(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:jO,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw qu.create("bad-app-name",{appName:String(r)});if(t||(t=PO()),!t)throw qu.create("no-options");let s=Vv.get(r);if(s){if(ec(t,s.options)&&ec(i,s.config))return s;throw qu.create("duplicate-app",{appName:r})}let o=new bT(r);for(let c of GO.values())o.addComponent(c);let a=new WO(t,i,o);return Vv.set(r,a),a}function Yh(n=jO){let e=Vv.get(n);if(!e&&n===jO&&PO())return KO();if(!e)throw qu.create("no-app",{appName:n});return e}function ET(){return Array.from(Vv.values())}function Ci(n,e,t){var i;let r=(i=ege[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hl.warn(a.join(" "));return}ma(new ms(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var ige="firebase-heartbeat-database",rge=1,Uv="firebase-heartbeat-store",BO=null;function FW(){return BO||(BO=wT(ige,rge,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uv)}catch(t){console.warn(t)}}}}).catch(n=>{throw qu.create("idb-open",{originalErrorMessage:n.message})})),BO}async function sge(n){try{let t=(await FW()).transaction(Uv),i=await t.objectStore(Uv).get(VW(n));return await t.done,i}catch(e){if(e instanceof ro)hl.warn(e.message);else{let t=qu.create("idb-get",{originalErrorMessage:e?.message});hl.warn(t.message)}}}async function kW(n,e){try{let i=(await FW()).transaction(Uv,"readwrite");await i.objectStore(Uv).put(e,VW(n)),await i.done}catch(t){if(t instanceof ro)hl.warn(t.message);else{let i=qu.create("idb-set",{originalErrorMessage:t?.message});hl.warn(i.message)}}}function VW(n){return`${n.name}!${n.options.appId}`}var oge=1024,age=30,$O=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OW();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>age){let o=lge(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hl.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=OW(),{heartbeatsToSend:i,unsentEntries:r}=cge(this._heartbeatsCache.heartbeats),s=Lv(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return hl.warn(t),""}}};function OW(){return new Date().toISOString().substring(0,10)}function cge(n,e=oge){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),LW(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),LW(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var qO=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fv()?EW().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await sge(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return kW(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return kW(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function LW(n){return Lv(JSON.stringify({version:2,heartbeats:n})).length}function lge(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function uge(n){ma(new ms("platform-logger",e=>new zO(e),"PRIVATE")),ma(new ms("heartbeat",e=>new $O(e),"PRIVATE")),Ci(HO,PW,n),Ci(HO,PW,"esm2017"),Ci("fire-js","")}uge("");var dge="firebase",hge="11.10.0";Ci(dge,hge,"app");function UW(n){n===void 0&&(n=H(Yt));let e=n.get(Ou);return t=>new gt(i=>{let r=e.add(),s=!1;function o(){s||(r(),s=!0)}let a=t.subscribe({next:c=>{i.next(c),o()},complete:()=>{i.complete(),o()},error:c=>{i.error(c),o()}});return a.add(()=>{i.unsubscribe(),o()}),a})}var Xu=new Su("ANGULARFIRE2_VERSION");function Bv(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Tm=(n,e)=>{let t=e?[e]:ET(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Sm=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Sm||{}),BW=Qy()&&typeof Zone<"u"?Sm.WARN:Sm.SILENT;var ST=class{zone;delegate;constructor(e,t=d1){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r?r.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,i)}},Yu=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=H(_t);this.outsideAngular=t.runOutsideAngular(()=>new ST(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ST(typeof Zone>"u"?void 0:Zone.current,xu))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zW=!1;function fge(n,e){!zW&&(BW>Sm.SILENT||Qy())&&(zW=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),BW>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function pge(n){let e=H(_t,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Qh(n){let e=H(_t,{optional:!0});return e?e.run(()=>n()):n()}var mge=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),ji(t,()=>Qh(()=>n.apply(void 0,i)))),xi=(n,e,t)=>(t||=e?Sm.WARN:Sm.VERBOSE,function(){let i,r=arguments,s,o,a;try{s=H(Yu),o=H(Ou),a=H(ti)}catch{return fge(n,t),n.apply(this,r)}for(let l=0;l<arguments.length;l++)typeof r[l]=="function"&&(e&&(i||=Qh(()=>o.add())),r[l]=mge(r[l],i,a));let c=pge(()=>n.apply(this,r));return e?c instanceof gt?c.pipe(Eu(s.outsideAngular),wu(s.insideAngular),UW(a)):c instanceof Promise?Qh(()=>{let l=o.add();return new Promise((u,d)=>{c.then(h=>ji(a,()=>Qh(()=>u(h))),h=>ji(a,()=>Qh(()=>d(h)))).finally(l)})}):typeof c=="function"&&i?function(){return setTimeout(i,0),c.apply(this,arguments)}:Qh(()=>c):c instanceof gt?c.pipe(Eu(s.outsideAngular),wu(s.insideAngular)):Qh(()=>c)});var fl=class{constructor(e){return e}},Jh=class{constructor(){return ET()}};function gge(n){return n&&n.length===1?n[0]:new fl(Yh())}var XO=new Te("angularfire2._apps"),_ge={provide:fl,useFactory:gge,deps:[[new Is,XO]]},yge={provide:Jh,deps:[[new Is,XO]]};function vge(n){return(e,t)=>{let i=t.get(Yc);Ci("angularfire",Xu.full,"core"),Ci("angularfire",Xu.full,"app"),Ci("angular",P1.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new fl(r)}}function HW(n,...e){return vr([_ge,yge,{provide:XO,useFactory:vge(n),multi:!0,deps:[_t,Yt,Yu,...e]}])}var jW=xi(KO,!0);var bge=new Map,xge={activated:!1,tokenObservers:[]},wge={initialized:!1,enabled:!1};function ga(n){return bge.get(n)||Object.assign({},xge)}function qW(){return wge}var Ege="https://content-firebaseappcheck.googleapis.com/v1";var Sge="exchangeDebugToken",GW={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},yXe=1440*60*1e3;var JO=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Kh,this.pending.promise.catch(t=>{}),await Tge(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Kh,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Tge(n){return new Promise(e=>{setTimeout(e,n)})}var Ige={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Qu=new pa("appCheck","AppCheck",Ige);function KW(n){if(!ga(n).activated)throw Qu.create("use-before-activation",{appName:n.name})}async function XW({url:n,body:e},t){let i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){let d=await r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}let s={method:"POST",body:JSON.stringify(e),headers:i},o;try{o=await fetch(n,s)}catch(d){throw Qu.create("fetch-network-error",{originalErrorMessage:d?.message})}if(o.status!==200)throw Qu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Qu.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Qu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function YW(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Ege}/projects/${t}/apps/${i}:${Sge}?key=${r}`,body:{debug_token:e}}}var Cge="firebase-app-check-database",Age=1,ZO="firebase-app-check-store";var TT=null;function Mge(){return TT||(TT=new Promise((n,e)=>{try{let t=indexedDB.open(Cge,Age);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Qu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(ZO,{keyPath:"compositeKey"})}}}catch(t){e(Qu.create("storage-open",{originalErrorMessage:t?.message}))}}),TT)}function Dge(n,e){return Rge(Pge(n),e)}async function Rge(n,e){let i=(await Mge()).transaction(ZO,"readwrite"),s=i.objectStore(ZO).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(Qu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function Pge(n){return`${n.options.appId}-${n.name}`}var zv=new tc("@firebase/app-check");function YO(n,e){return Fv()?Dge(n,e).catch(t=>{zv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QW(){return qW().enabled}async function JW(){let n=qW();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Nge={error:"UNKNOWN_ERROR"};function kge(n){return mT.encodeString(JSON.stringify(n),!1)}async function eL(n,e=!1,t=!1){let i=n.app;KW(i);let r=ga(i),s=r.token,o;if(s&&!Hv(s)&&(r.token=void 0,s=void 0),!s){let l=await r.cachedTokenPromise;l&&(Hv(l)?s=l:await YO(i,void 0))}if(!e&&s&&Hv(s))return{token:s.token};let a=!1;if(QW())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=XW(YW(i,await JW()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let l=await r.exchangeTokenPromise;return await YO(i,l),r.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?zv.warn(l.message):t&&zv.error(l),QO(l)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),s=await ga(i).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?zv.warn(l.message):t&&zv.error(l),o=l}let c;return s?o?Hv(s)?c={token:s.token,internalError:o}:c=QO(o):(c={token:s.token},r.token=s,await YO(i,s)):c=QO(o),a&&Vge(i,c),c}async function Oge(n){let e=n.app;KW(e);let{provider:t}=ga(e);if(QW()){let i=await JW(),{token:r}=await XW(YW(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=await t.getToken();return{token:i}}}function Lge(n,e,t,i){let{app:r}=n,s=ga(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Hv(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),WW(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>WW(n))}function ZW(n,e){let t=ga(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function WW(n){let{app:e}=n,t=ga(e),i=t.tokenRefresher;i||(i=Fge(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Fge(n){let{app:e}=n;return new JO(async()=>{let t=ga(e),i;if(t.token?i=await eL(n,!0):i=await eL(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let t=ga(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},GW.RETRIAL_MIN_WAIT,GW.RETRIAL_MAX_WAIT)}function Vge(n,e){let t=ga(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Hv(n){return n.expireTimeMillis-Date.now()>0}function QO(n){return{token:kge(Nge),error:n}}var tL=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ga(this.app);for(let t of e)ZW(this.app,t.next);return Promise.resolve()}};function Uge(n,e){return new tL(n,e)}function Bge(n){return{getToken:e=>eL(n,e),getLimitedUseToken:()=>Oge(n),addTokenListener:e=>Lge(n,"INTERNAL",e),removeTokenListener:e=>ZW(n.app,e)}}var zge="@firebase/app-check",Hge="0.10.1";var jge="app-check",$W="app-check-internal";function Gge(){ma(new ms(jge,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Uge(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($W).initialize()})),ma(new ms($W,n=>{let e=n.getProvider("app-check").getImmediate();return Bge(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ci(zge,Hge)}Gge();var Wge="app-check";var Im=class{constructor(){return Tm(Wge)}};var $ge=["localhost","0.0.0.0","127.0.0.1"],DXe=typeof window<"u"&&$ge.includes(window.location.hostname);var e$=()=>{};var t$=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},qge=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},n$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(t$(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qge(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new iL;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let g=l<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},iL=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Kge=function(n){let e=t$(n);return n$.encodeByteArray(e,!0)},sL=function(n){return Kge(n).replace(/\./g,"")},IT=function(n){try{return n$.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function i$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Xge=()=>i$().__FIREBASE_DEFAULTS__,Yge=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Qge=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&IT(n[1]);return e&&JSON.parse(e)},r$=()=>{try{return e$()||Xge()||Yge()||Qge()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var s$=n=>r$()?.[`_${n}`];function jv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function oo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oo())}function Jge(){let n=r$()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function a$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c$(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function l$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u$(){return!Jge()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oL(){try{return typeof indexedDB=="object"}catch{return!1}}function d$(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var Zge="FirebaseError",Ao=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Zge,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}},pl=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?e_e(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ao(r,a,i)}};function e_e(n,e){return n.replace(t_e,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var t_e=/\{\$([^}]+)}/g;function aL(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function h$(n,e){let t=new rL(n,e);return t.subscribe.bind(t)}var rL=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");n_e(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=nL),r.error===void 0&&(r.error=nL),r.complete===void 0&&(r.complete=nL);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function n_e(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nL(){}var OXe=14400*1e3;function Ju(n){return n&&n._delegate?n._delegate:n}var _a=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var i_e=[],pn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(pn||{}),r_e={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},s_e=pn.INFO,o_e={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},a_e=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=o_e[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Zu=class{constructor(e){this.name=e,this._logLevel=s_e,this._logHandler=a_e,this._userLogHandler=null,i_e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r_e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...e),this._logHandler(this,pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...e),this._logHandler(this,pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pn.INFO,...e),this._logHandler(this,pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pn.WARN,...e),this._logHandler(this,pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...e),this._logHandler(this,pn.ERROR,...e)}};var lL=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c_e(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function c_e(n){return n.getComponent()?.type==="VERSION"}var uL="@firebase/app",f$="0.14.6";var gl=new Zu("@firebase/app"),l_e="@firebase/app-compat",u_e="@firebase/analytics-compat",d_e="@firebase/analytics",h_e="@firebase/app-check-compat",f_e="@firebase/app-check",p_e="@firebase/auth",m_e="@firebase/auth-compat",g_e="@firebase/database",__e="@firebase/data-connect",y_e="@firebase/database-compat",v_e="@firebase/functions",b_e="@firebase/functions-compat",x_e="@firebase/installations",w_e="@firebase/installations-compat",E_e="@firebase/messaging",S_e="@firebase/messaging-compat",T_e="@firebase/performance",I_e="@firebase/performance-compat",C_e="@firebase/remote-config",A_e="@firebase/remote-config-compat",M_e="@firebase/storage",D_e="@firebase/storage-compat",R_e="@firebase/firestore",P_e="@firebase/ai",N_e="@firebase/firestore-compat",k_e="firebase",O_e="12.6.0";var L_e={[uL]:"fire-core",[l_e]:"fire-core-compat",[d_e]:"fire-analytics",[u_e]:"fire-analytics-compat",[f_e]:"fire-app-check",[h_e]:"fire-app-check-compat",[p_e]:"fire-auth",[m_e]:"fire-auth-compat",[g_e]:"fire-rtdb",[__e]:"fire-data-connect",[y_e]:"fire-rtdb-compat",[v_e]:"fire-fn",[b_e]:"fire-fn-compat",[x_e]:"fire-iid",[w_e]:"fire-iid-compat",[E_e]:"fire-fcm",[S_e]:"fire-fcm-compat",[T_e]:"fire-perf",[I_e]:"fire-perf-compat",[C_e]:"fire-rc",[A_e]:"fire-rc-compat",[M_e]:"fire-gcs",[D_e]:"fire-gcs-compat",[R_e]:"fire-fst",[N_e]:"fire-fst-compat",[P_e]:"fire-vertex","fire-js":"fire-js",[k_e]:"fire-js-all"};var F_e=new Map,V_e=new Map,p$=new Map;function m$(n,e){try{n.container.addComponent(e)}catch(t){gl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ed(n){let e=n.name;if(p$.has(e))return gl.debug(`There were multiple attempts to register component ${e}.`),!1;p$.set(e,n);for(let t of F_e.values())m$(t,n);for(let t of V_e.values())m$(t,n);return!0}function _l(n){return n==null?!1:n.settings!==void 0}var U_e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fL=new pl("app","Firebase",U_e);var Cm=O_e;function ml(n,e,t){let i=L_e[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){let o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gl.warn(o.join(" "));return}ed(new _a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var B_e="firebase-heartbeat-database",z_e=1,Gv="firebase-heartbeat-store",cL=null;function b$(){return cL||(cL=wT(B_e,z_e,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gv)}catch(t){console.warn(t)}}}}).catch(n=>{throw fL.create("idb-open",{originalErrorMessage:n.message})})),cL}async function H_e(n){try{let t=(await b$()).transaction(Gv),i=await t.objectStore(Gv).get(x$(n));return await t.done,i}catch(e){if(e instanceof Ao)gl.warn(e.message);else{let t=fL.create("idb-get",{originalErrorMessage:e?.message});gl.warn(t.message)}}}async function g$(n,e){try{let i=(await b$()).transaction(Gv,"readwrite");await i.objectStore(Gv).put(e,x$(n)),await i.done}catch(t){if(t instanceof Ao)gl.warn(t.message);else{let i=fL.create("idb-set",{originalErrorMessage:t?.message});gl.warn(i.message)}}}function x$(n){return`${n.name}!${n.options.appId}`}var j_e=1024,G_e=30,dL=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hL(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_$();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>G_e){let r=$_e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=_$(),{heartbeatsToSend:t,unsentEntries:i}=W_e(this._heartbeatsCache.heartbeats),r=sL(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return gl.warn(e),""}}};function _$(){return new Date().toISOString().substring(0,10)}function W_e(n,e=j_e){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),y$(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),y$(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var hL=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oL()?d$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await H_e(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return g$(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return g$(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function y$(n){return sL(JSON.stringify({version:2,heartbeats:n})).length}function $_e(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function q_e(n){ed(new _a("platform-logger",e=>new lL(e),"PRIVATE")),ed(new _a("heartbeat",e=>new dL(e),"PRIVATE")),ml(uL,f$,n),ml(uL,f$,"esm2020"),ml("fire-js","")}q_e("");function M$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var D$=M$,R$=new pl("auth","Firebase",M$());var DT=new Zu("@firebase/auth");function J_e(n,...e){DT.logLevel<=pn.WARN&&DT.warn(`Auth (${Cm}): ${n}`,...e)}function AT(n,...e){DT.logLevel<=pn.ERROR&&DT.error(`Auth (${Cm}): ${n}`,...e)}function w$(n,...e){throw TL(n,...e)}function SL(n,...e){return TL(n,...e)}function P$(n,e,t){let i=ct(re({},D$()),{[e]:t});return new pl("auth","Firebase",i).create(e,{appName:n.name})}function MT(n){return P$(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TL(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return R$.create(n,...e)}function jn(n,e,...t){if(!n)throw TL(e,...t)}function Wv(n){let e="INTERNAL ASSERTION FAILED: "+n;throw AT(e),new Error(e)}function RT(n,e){n||Wv(e)}function Z_e(){return E$()==="http:"||E$()==="https:"}function E$(){return typeof self<"u"&&self.location?.protocol||null}function eye(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z_e()||c$()||"connection"in navigator)?navigator.onLine:!0}function tye(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var tf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,RT(t>e,"Short delay should be less than long delay!"),this.isMobile=o$()||l$()}get(){return eye()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nye(n,e){RT(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var PT=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rye=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sye=new tf(3e4,6e4);function N$(n,e){return n.tenantId&&!e.tenantId?ct(re({},e),{tenantId:n.tenantId}):e}async function FT(n,e,t,i,r={}){return k$(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=aL(re({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=re({method:e,headers:c},s);return a$()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&jv(n.emulatorConfig.host)&&(l.credentials="include"),PT.fetch()(await O$(n,n.config.apiHost,t,a),l)})}async function k$(n,e,t){n._canInitEmulator=!1;let i=re(re({},iye),e);try{let r=new gL(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw CT(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw CT(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw CT(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw CT(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw P$(n,u,l);w$(n,u)}}catch(r){if(r instanceof Ao)throw r;w$(n,"network-request-failed",{message:String(r)})}}async function O$(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?nye(n.config,r):`${n.config.apiScheme}://${r}`;return rye.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var gL=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(SL(this.auth,"network-request-failed")),sye.get())})}};function CT(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=SL(n,e,i);return r.customData._tokenResponse=t,r}async function oye(n,e){return FT(n,"POST","/v1/accounts:delete",e)}async function NT(n,e){return FT(n,"POST","/v1/accounts:lookup",e)}function $v(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L$(n,e=!1){let t=Ju(n),i=await t.getIdToken(e),r=F$(i);jn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:$v(pL(r.auth_time)),issuedAtTime:$v(pL(r.iat)),expirationTime:$v(pL(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function pL(n){return Number(n)*1e3}function F$(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return AT("JWT malformed, contained fewer than 3 sections"),null;try{let r=IT(t);return r?JSON.parse(r):(AT("Failed to decode base64 JWT payload"),null)}catch(r){return AT("Caught error parsing JWT payload as JSON",r?.toString()),null}}function S$(n){let e=F$(n);return jn(e,"internal-error"),jn(typeof e.exp<"u","internal-error"),jn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function _L(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ao&&aye(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aye({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var yL=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Kv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$v(this.lastLoginAt),this.creationTime=$v(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function kT(n){let e=n.auth,t=await n.getIdToken(),i=await _L(n,NT(e,{idToken:t}));jn(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let s=r.providerUserInfo?.length?U$(r.providerUserInfo):[],o=cye(n.providerData,s),a=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!o?.length,l=a?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Kv(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function V$(n){let e=Ju(n);await kT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cye(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function U$(n){return n.map(i=>{var r=i,{providerId:e}=r,t=bp(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function lye(n,e){let t=await k$(n,{},async()=>{let i=aL({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await O$(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&jv(n.emulatorConfig.host)&&(c.credentials="include"),PT.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uye(n,e){return FT(n,"POST","/v2/accounts:revokeToken",N$(n,e))}var qv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jn(e.idToken,"internal-error"),jn(typeof e.idToken<"u","internal-error"),jn(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jn(e.length!==0,"internal-error");let t=S$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(jn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await lye(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(jn(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(jn(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(jn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Wv("not implemented")}};function td(n,e){jn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Zh=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:i}=o,r=bp(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Kv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await _L(this,this.stsTokenManager.getToken(this.auth,e));return jn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return L$(this,e)}reload(){return V$(this)}_assign(e){this!==e&&(jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>re({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ct(re({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await kT(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_l(this.auth.app))return Promise.reject(MT(this.auth));let e=await this.getIdToken();return await _L(this,oye(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ct(re({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>re({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:g,stsTokenManager:v}=t;jn(d&&v,e,"internal-error");let _=qv.fromJSON(this.name,v);jn(typeof d=="string",e,"internal-error"),td(i,e.name),td(r,e.name),jn(typeof h=="boolean",e,"internal-error"),jn(typeof f=="boolean",e,"internal-error"),td(s,e.name),td(o,e.name),td(a,e.name),td(c,e.name),td(l,e.name),td(u,e.name);let b=new n({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:f,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:_,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(b.providerData=g.map(R=>re({},R))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,t,i=!1){let r=new qv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await kT(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];jn(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?U$(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new qv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Kv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var T$=new Map;function ef(n){RT(n instanceof Function,"Expected a class definition");let e=T$.get(n);return e?(RT(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,T$.set(n,e),e)}var dye=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),vL=dye;function mL(n,e,t){return`firebase:${n}:${e}:${t}`}var OT=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=mL(this.userKey,r.apiKey,s),this.fullPersistenceKey=mL("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await NT(this.auth,{idToken:e}).catch(()=>{});return t?Zh._fromGetAccountInfoResponse(this.auth,t,e):null}return Zh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(ef(vL),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||ef(vL),o=mL(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await NT(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Zh._fromGetAccountInfoResponse(e,h,u)}else d=Zh._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function I$(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mye(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hye(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_ye(e))return"Blackberry";if(yye(e))return"Webos";if(fye(e))return"Safari";if((e.includes("chrome/")||pye(e))&&!e.includes("edge/"))return"Chrome";if(gye(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function hye(n=oo()){return/firefox\//i.test(n)}function fye(n=oo()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pye(n=oo()){return/crios\//i.test(n)}function mye(n=oo()){return/iemobile/i.test(n)}function gye(n=oo()){return/android/i.test(n)}function _ye(n=oo()){return/blackberry/i.test(n)}function yye(n=oo()){return/webos/i.test(n)}function B$(n,e=[]){let t;switch(n){case"Browser":t=I$(oo());break;case"Worker":t=`${I$(oo())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cm}/${i}`}var bL=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function vye(n,e={}){return FT(n,"GET","/v2/passwordPolicy",N$(n,e))}var bye=6,xL=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bye,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wL=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new bL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ef(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await OT.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await NT(this,{idToken:e}),i=await Zh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_l(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return jn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kT(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tye()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_l(this.app))return Promise.reject(MT(this));let t=e?Ju(e):null;return t&&jn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&jn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _l(this.app)?Promise.reject(MT(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _l(this.app)?Promise.reject(MT(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ef(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await vye(this),t=new xL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await uye(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ef(e)||this._popupRedirectResolver;jn(t,this,"argument-error"),this.redirectPersistenceManager=await OT.create(this,[ef(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(_l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&J_e(`Error while retrieving App Check token: ${e.error}`),e?.token}};function xye(n){return Ju(n)}var LT=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=h$(t=>this.observer=t)}get next(){return jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wye={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Eye(n){wye=n}function Sye(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Tye(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ef);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function IL(n,e,t,i){return Ju(n).onIdTokenChanged(e,t,i)}var uYe=Sye("rcb"),dYe=new tf(3e4,6e4);var hYe=new tf(2e3,1e4);var fYe=600*1e3;var pYe=new tf(3e4,6e4);var mYe=new tf(5e3,15e3);var gYe=encodeURIComponent("fac");var C$="@firebase/auth",A$="1.11.1";var EL=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Iye(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cye(n){ed(new _a("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;jn(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B$(n)},l=new wL(i,r,s,c);return Tye(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ed(new _a("auth-internal",e=>{let t=xye(e.getProvider("auth").getImmediate());return(i=>new EL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ml(C$,A$,Iye(n)),ml(C$,A$,"esm2020")}var Aye=300,_Ye=s$("authIdTokenMaxAge")||Aye;function Mye(){return document.getElementsByTagName("head")?.[0]??document}Eye({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=SL("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Mye().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cye("Browser");function z$(n){return new gt(function(e){var t=IL(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function nq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iq=nq,rq=new pa("auth","Firebase",nq());var jT=new tc("@firebase/auth");function Pye(n,...e){jT.logLevel<=fn.WARN&&jT.warn(`Auth (${Ku}): ${n}`,...e)}function UT(n,...e){jT.logLevel<=fn.ERROR&&jT.error(`Auth (${Ku}): ${n}`,...e)}function rc(n,...e){throw GL(n,...e)}function ya(n,...e){return GL(n,...e)}function jL(n,e,t){let i=Object.assign(Object.assign({},iq()),{[e]:t});return new pa("auth","Firebase",i).create(e,{appName:n.name})}function nf(n){return jL(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nye(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rc(n,"argument-error"),jL(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function GL(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return rq.create(n,...e)}function Ft(n,e,...t){if(!n)throw GL(e,...t)}function yl(n){let e="INTERNAL ASSERTION FAILED: "+n;throw UT(e),new Error(e)}function bl(n,e){n||yl(e)}function ML(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kye(){return H$()==="http:"||H$()==="https:"}function H$(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Oye(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kye()||vW()||"connection"in navigator)?navigator.onLine:!0}function Lye(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var rf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,bl(t>e,"Short delay should be less than long delay!"),this.isMobile=_W()||bW()}get(){return Oye()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function WL(n,e){bl(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var GT=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Fye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Vye=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Uye=new rf(3e4,6e4);function $L(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Mm(n,e,t,i,r={}){return sq(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=wm(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return yW()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&$u(n.emulatorConfig.host)&&(l.credentials="include"),GT.fetch()(await oq(n,n.config.apiHost,t,a),l)})}async function sq(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Fye),e);try{let r=new DL(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw VT(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw VT(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw VT(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw VT(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jL(n,u,l);rc(n,u)}}catch(r){if(r instanceof ro)throw r;rc(n,"network-request-failed",{message:String(r)})}}async function Bye(n,e,t,i,r={}){let s=await Mm(n,e,t,i,r);return"mfaPendingCredential"in s&&rc(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function oq(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?WL(n.config,r):`${n.config.apiScheme}://${r}`;return Vye.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var DL=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ya(this.auth,"network-request-failed")),Uye.get())})}};function VT(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=ya(n,e,i);return r.customData._tokenResponse=t,r}async function zye(n,e){return Mm(n,"POST","/v1/accounts:delete",e)}async function WT(n,e){return Mm(n,"POST","/v1/accounts:lookup",e)}function Xv(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qL(n,e=!1){let t=er(n),i=await t.getIdToken(e),r=KL(i);Ft(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Xv(CL(r.auth_time)),issuedAtTime:Xv(CL(r.iat)),expirationTime:Xv(CL(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function CL(n){return Number(n)*1e3}function KL(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return UT("JWT malformed, contained fewer than 3 sections"),null;try{let r=gT(t);return r?JSON.parse(r):(UT("Failed to decode base64 JWT payload"),null)}catch(r){return UT("Caught error parsing JWT payload as JSON",r?.toString()),null}}function j$(n){let e=KL(n);return Ft(e,"internal-error"),Ft(typeof e.exp<"u","internal-error"),Ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Qv(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ro&&Hye(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Hye({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var RL=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Jv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xv(this.lastLoginAt),this.creationTime=Xv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function $T(n){var e;let t=n.auth,i=await n.getIdToken(),r=await Qv(n,WT(t,{idToken:i}));Ft(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aq(s.providerUserInfo):[],a=jye(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function XL(n){let e=er(n);await $T(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jye(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function aq(n){return n.map(e=>{var{providerId:t}=e,i=pw(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Gye(n,e){let t=await sq(n,{},async()=>{let i=wm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await oq(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&$u(n.emulatorConfig.host)&&(c.credentials="include"),GT.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Wye(n,e){return Mm(n,"POST","/v2/accounts:revokeToken",$L(n,e))}var Yv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ft(e.idToken,"internal-error"),Ft(typeof e.idToken<"u","internal-error"),Ft(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ft(e.length!==0,"internal-error");let t=j$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await Gye(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Ft(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Ft(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Ft(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yl("not implemented")}};function nd(n,e){Ft(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var id=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=pw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Qv(this,this.stsTokenManager.getToken(this.auth,e));return Ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qL(this,e)}reload(){return XL(this)}_assign(e){this!==e&&(Ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await $T(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(so(this.auth.app))return Promise.reject(nf(this.auth));let e=await this.getIdToken();return await Qv(this,zye(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;let d=(i=t.displayName)!==null&&i!==void 0?i:void 0,h=(r=t.email)!==null&&r!==void 0?r:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,b=(l=t.createdAt)!==null&&l!==void 0?l:void 0,R=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:P,emailVerified:N,isAnonymous:U,providerData:O,stsTokenManager:S}=t;Ft(P&&S,e,"internal-error");let w=Yv.fromJSON(this.name,S);Ft(typeof P=="string",e,"internal-error"),nd(d,e.name),nd(h,e.name),Ft(typeof N=="boolean",e,"internal-error"),Ft(typeof U=="boolean",e,"internal-error"),nd(f,e.name),nd(g,e.name),nd(v,e.name),nd(_,e.name),nd(b,e.name),nd(R,e.name);let y=new n({uid:P,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:U,photoURL:g,phoneNumber:f,tenantId:v,stsTokenManager:w,createdAt:b,lastLoginAt:R});return O&&Array.isArray(O)&&(y.providerData=O.map(x=>Object.assign({},x))),_&&(y._redirectEventId=_),y}static async _fromIdTokenResponse(e,t,i=!1){let r=new Yv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $T(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];Ft(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?aq(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Yv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Jv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var G$=new Map;function vl(n){bl(n instanceof Function,"Expected a class definition");let e=G$.get(n);return e?(bl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,G$.set(n,e),e)}var $ye=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),PL=$ye;function BT(n,e,t){return`firebase:${n}:${e}:${t}`}var qT=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=BT(this.userKey,r.apiKey,s),this.fullPersistenceKey=BT("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await WT(this.auth,{idToken:e}).catch(()=>{});return t?id._fromGetAccountInfoResponse(this.auth,t,e):null}return id._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(vl(PL),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||vl(PL),o=BT(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await WT(e,{idToken:u}).catch(()=>{});if(!h)break;d=await id._fromGetAccountInfoResponse(e,h,u)}else d=id._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function W$(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dq(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fq(e))return"Blackberry";if(pq(e))return"Webos";if(lq(e))return"Safari";if((e.includes("chrome/")||uq(e))&&!e.includes("edge/"))return"Chrome";if(hq(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function cq(n=Er()){return/firefox\//i.test(n)}function lq(n=Er()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uq(n=Er()){return/crios\//i.test(n)}function dq(n=Er()){return/iemobile/i.test(n)}function hq(n=Er()){return/android/i.test(n)}function fq(n=Er()){return/blackberry/i.test(n)}function pq(n=Er()){return/webos/i.test(n)}function YL(n=Er()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qye(n=Er()){var e;return YL(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Kye(){return xW()&&document.documentMode===10}function mq(n=Er()){return YL(n)||hq(n)||pq(n)||fq(n)||/windows phone/i.test(n)||dq(n)}function gq(n,e=[]){let t;switch(n){case"Browser":t=W$(Er());break;case"Worker":t=`${W$(Er())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ku}/${i}`}var NL=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Xye(n,e={}){return Mm(n,"GET","/v2/passwordPolicy",$L(n,e))}var Yye=6,kL=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Yye,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var OL=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KT(this),this.idTokenSubscription=new KT(this),this.beforeStateQueue=new NL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vl(t)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await qT.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await WT(this,{idToken:e}),i=await id._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(so(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $T(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lye()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(so(this.app))return Promise.reject(nf(this));let t=e?er(e):null;return t&&Ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return so(this.app)?Promise.reject(nf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return so(this.app)?Promise.reject(nf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Xye(this),t=new kL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Wye(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&vl(e)||this._popupRedirectResolver;Ft(t,this,"argument-error"),this.redirectPersistenceManager=await qT.create(this,[vl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(so(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Pye(`Error while retrieving App Check token: ${t.error}`),t?.token}};function nI(n){return er(n)}var KT=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TW(t=>this.observer=t)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var QL={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qye(n){QL=n}function Jye(n){return QL.loadJS(n)}function Zye(){return QL.gapiScript}function _q(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function JL(n,e){let t=Em(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(ec(s,e??{}))return r;rc(r,"already-initialized")}return t.initialize({options:e})}function eve(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(vl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function ZL(n,e,t){let i=nI(n);Ft(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=yq(e),{host:o,port:a}=tve(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ft(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ft(ec(l,i.config.emulator)&&ec(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,$u(o)?(yT(`${s}//${o}${c}`),vT("Auth",!0)):r||nve()}function yq(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tve(n){let e=yq(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:$$(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:$$(o)}}}function $$(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function nve(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yl("not implemented")}_getIdTokenResponse(e){return yl("not implemented")}_linkToIdToken(e,t){return yl("not implemented")}_getReauthenticationResolver(e){return yl("not implemented")}};async function Am(n,e){return Bye(n,"POST","/v1/accounts:signInWithIdp",$L(n,e))}var ive="http://localhost",XT=class n extends Zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=pw(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Am(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,Am(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Am(e,t)}buildRequest(){let e={requestUri:ive,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wm(t)}return e}};var eb=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var YT=class extends eb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var eF=(()=>{class n extends YT{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return XT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var tb=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){let s=await id._fromIdTokenResponse(e,i,r),o=q$(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let r=q$(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})}};function q$(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var LL=class n extends ro{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function vq(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?LL._fromErrorAndOperation(n,s,e,i):s})}async function rve(n,e,t=!1){let i=await Qv(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tb._forOperation(n,"link",i)}async function sve(n,e,t=!1){let{auth:i}=n;if(so(i.app))return Promise.reject(nf(i));let r="reauthenticate";try{let s=await Qv(n,vq(i,r,e,n),t);Ft(s.idToken,i,"internal-error");let o=KL(s.idToken);Ft(o,i,"internal-error");let{sub:a}=o;return Ft(n.uid===a,i,"user-mismatch"),tb._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&rc(i,"user-mismatch"),s}}async function ove(n,e,t=!1){if(so(n.app))return Promise.reject(nf(n));let i="signIn",r=await vq(n,i,e),s=await tb._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}function tF(n,e,t,i){return er(n).onIdTokenChanged(e,t,i)}function nF(n,e,t){return er(n).beforeAuthStateChanged(e,t)}function iF(n){return er(n).signOut()}var QT="__sak";var JT=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(QT,"1"),this.storage.removeItem(QT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ave=1e3,cve=10,lve=(()=>{class n extends JT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mq(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);Kye()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,cve):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},ave)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){let i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),bq=lve;var uve=(()=>{class n extends JT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),rF=uve;function dve(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var hve=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(async u=>u(i.origin,o)),l=await dve(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sF(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var FL=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=sF("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ic(){return window}function fve(n){ic().location.href=n}function xq(){return typeof ic().WorkerGlobalScope<"u"&&typeof ic().importScripts=="function"}async function pve(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mve(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function gve(){return xq()?self:null}var wq="firebaseLocalStorageDb",_ve=1,ZT="firebaseLocalStorage",Eq="fbase_key",sf=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function iI(n,e){return n.transaction([ZT],e?"readwrite":"readonly").objectStore(ZT)}function yve(){let n=indexedDB.deleteDatabase(wq);return new sf(n).toPromise()}function VL(){let n=indexedDB.open(wq,_ve);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ZT,{keyPath:Eq})}catch(r){t(r)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(ZT)?e(i):(i.close(),await yve(),e(await VL()))})})}async function K$(n,e,t){let i=iI(n,!0).put({[Eq]:e,value:t});return new sf(i).toPromise()}async function vve(n,e){let t=iI(n,!1).get(e),i=await new sf(t).toPromise();return i===void 0?null:i.value}function X$(n,e){let t=iI(n,!0).delete(e);return new sf(t).toPromise()}var bve=800,xve=3,wve=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VL(),this.db)}async _withRetries(t){let i=0;for(;;)try{let r=await this._openDb();return await t(r)}catch(r){if(i++>xve)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xq()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hve._getInstance(gve()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await pve(),!this.activeServiceWorker)return;this.sender=new FL(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await VL();return await K$(t,QT,"1"),await X$(t,QT),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>K$(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){let i=await this._withRetries(r=>vve(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>X$(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=iI(s,!1).getAll();return new sf(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Sq=wve;var cJe=_q("rcb"),lJe=new rf(3e4,6e4);function Tq(n,e){return e?vl(e):(Ft(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var nb=class extends Zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Am(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Am(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Am(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Eve(n){return ove(n.auth,new nb(n),n.bypassAuthState)}function Sve(n){let{auth:e,user:t}=n;return Ft(t,e,"internal-error"),sve(t,new nb(n),n.bypassAuthState)}async function Tve(n){let{auth:e,user:t}=n;return Ft(t,e,"internal-error"),rve(t,new nb(n),n.bypassAuthState)}var eI=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Eve;case"linkViaPopup":case"linkViaRedirect":return Tve;case"reauthViaPopup":case"reauthViaRedirect":return Sve;default:rc(this.auth,"internal-error")}}resolve(e){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Ive=new rf(2e3,1e4);async function oF(n,e,t){if(so(n.app))return Promise.reject(ya(n,"operation-not-supported-in-this-environment"));let i=nI(n);Nye(n,e,eb);let r=Tq(i,t);return new Cve(i,"signInViaPopup",e,r).executeNotNull()}var Cve=(()=>{class n extends eI{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Ft(t,this.auth,"internal-error"),t}async onExecution(){bl(this.filter.length===1,"Popup operations only handle one event");let t=sF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ya(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ya(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ya(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ive.get())};t()}}n.currentPopupAction=null;return n})(),Ave="pendingRedirect",zT=new Map,UL=class extends eI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zT.get(this.auth._key());if(!e){try{let i=await Mve(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zT.set(this.auth._key(),e)}return this.bypassAuthState||zT.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Mve(n,e){let t=Pve(e),i=Rve(n);if(!await i._isAvailable())return!1;let r=await i._get(t)==="true";return await i._remove(t),r}function Dve(n,e){zT.set(n._key(),e)}function Rve(n){return vl(n._redirectPersistence)}function Pve(n){return BT(Ave,n.config.apiKey,n.name)}async function Nve(n,e,t=!1){if(so(n.app))return Promise.reject(nf(n));let i=nI(n),r=Tq(i,e),o=await new UL(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}var kve=600*1e3,BL=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ove(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Iq(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ya(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kve&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y$(e))}saveEventToCache(e){this.cachedEventUids.add(Y$(e)),this.lastProcessedEventTime=Date.now()}};function Y$(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Iq({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ove(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iq(n);default:return!1}}async function Lve(n,e={}){return Mm(n,"GET","/v1/projects",e)}var Fve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vve=/^https?/;async function Uve(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Lve(n);for(let t of e)try{if(Bve(t))return}catch{}rc(n,"unauthorized-domain")}function Bve(n){let e=ML(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Vve.test(t))return!1;if(Fve.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var zve=new rf(3e4,6e4);function Q$(){let n=ic().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Hve(n){return new Promise((e,t)=>{var i,r,s;function o(){Q$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q$(),t(ya(n,"network-request-failed"))},timeout:zve.get()})}if(!((r=(i=ic().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ic().gapi)===null||s===void 0)&&s.load)o();else{let a=_q("iframefcb");return ic()[a]=()=>{gapi.load?o():t(ya(n,"network-request-failed"))},Jye(`${Zye()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw HT=null,e})}var HT=null;function jve(n){return HT=HT||Hve(n),HT}var Gve=new rf(5e3,15e3),Wve="__/auth/iframe",$ve="emulator/auth/iframe",qve={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xve(n){let e=n.config;Ft(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?WL(e,$ve):`https://${n.config.authDomain}/${Wve}`,i={apiKey:e.apiKey,appName:n.name,v:Ku},r=Kve.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${wm(i).slice(1)}`}async function Yve(n){let e=await jve(n),t=ic().gapi;return Ft(t,n,"internal-error"),e.open({where:document.body,url:Xve(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qve,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});let o=ya(n,"network-request-failed"),a=ic().setTimeout(()=>{s(o)},Gve.get());function c(){ic().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}var Qve={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jve=500,Zve=600,ebe="_blank",tbe="http://localhost",tI=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function nbe(n,e,t,i=Jve,r=Zve){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},Qve),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Er().toLowerCase();t&&(a=uq(l)?ebe:t),cq(l)&&(e=e||tbe,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(qye(l)&&a!=="_self")return ibe(e||"",a),new tI(null);let d=window.open(e||"",a,u);Ft(d,n,"popup-blocked");try{d.focus()}catch{}return new tI(d)}function ibe(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var rbe="__/auth/handler",sbe="emulator/auth/handler",obe=encodeURIComponent("fac");async function J$(n,e,t,i,r,s){Ft(n.config.authDomain,n,"auth-domain-config-required"),Ft(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ku,eventId:r};if(e instanceof eb){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",SW(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof YT){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=await n._getAppCheckToken(),l=c?`#${obe}=${encodeURIComponent(c)}`:"";return`${abe(n)}?${wm(a).slice(1)}${l}`}function abe({config:n}){return n.emulator?WL(n,sbe):`https://${n.authDomain}/${rbe}`}var AL="webStorageSupport",zL=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rF,this._completeRedirectFn=Nve,this._overrideRedirectResult=Dve}async _openPopup(e,t,i,r){var s;bl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await J$(e,t,i,ML(),r);return nbe(e,o,sF())}async _openRedirect(e,t,i,r){await this._originValidation(e);let s=await J$(e,t,i,ML(),r);return fve(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(bl(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Yve(e),i=new BL(e);return t.register("authEvent",r=>(Ft(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(AL,{type:AL},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[AL];o!==void 0&&t(!!o),rc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Uve(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mq()||lq()||YL()}},Cq=zL;var Z$="@firebase/auth",eq="1.10.8";var HL=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cbe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lbe(n){ma(new ms("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ft(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gq(n)},l=new OL(i,r,s,c);return eve(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ma(new ms("auth-internal",e=>{let t=nI(e.getProvider("auth").getImmediate());return(i=>new HL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(Z$,eq,cbe(n)),Ci(Z$,eq,"esm2017")}var ube=300,dbe=NO("authIdTokenMaxAge")||ube,tq=null,hbe=n=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>dbe)return;let r=t?.token;tq!==r&&(tq=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function aF(n=Yh()){let e=Em(n,"auth");if(e.isInitialized())return e.getImmediate();let t=JL(n,{popupRedirectResolver:Cq,persistence:[Sq,bq,rF]}),i=NO("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=hbe(s.toString());nF(t,o,()=>o(t.currentUser)),tF(t,a=>o(a))}}let r=RO("auth");return r&&ZL(t,`http://${r}`),t}function fbe(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Qye({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=ya("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",fbe().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lbe("Browser");var Aq="auth",xl=class{constructor(e){return e}},ib=class{constructor(){return Tm(Aq)}};var cF=new Te("angularfire2.auth-instances");function r0e(n,e){let t=Bv(Aq,n,e);return t&&new xl(t)}function s0e(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new xl(i)}}var o0e={provide:ib,deps:[[new Is,cF]]},a0e={provide:xl,useFactory:r0e,deps:[[new Is,cF],fl]};function Mq(n,...e){return Ci("angularfire",Xu.full,"auth"),vr([a0e,o0e,{provide:cF,useFactory:s0e(n),multi:!0,deps:[_t,Yt,Yu,Jh,[new Is,Im],...e]}])}var rI=xi(z$,!0);var Dq=xi(aF,!0);var Rq=xi(oF,!0,2);var Pq=xi(iF,!0,2);var Nq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kq={};var wl,lF;(function(){var n;function e(S,w){function y(){}y.prototype=w.prototype,S.F=w.prototype,S.prototype=new y,S.prototype.constructor=S,S.D=function(x,T,M){for(var C=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)C[oe-2]=arguments[oe];return w.prototype[T].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,w,y){y||(y=0);let x=Array(16);if(typeof w=="string")for(var T=0;T<16;++T)x[T]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(T=0;T<16;++T)x[T]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=S.g[0],y=S.g[1],T=S.g[2];let M=S.g[3],C;C=w+(M^y&(T^M))+x[0]+3614090360&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[2]+606105819&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[3]+3250441966&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[6]+2821735955&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[7]+4249261313&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[10]+4294925233&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[11]+2304563134&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[14]+2792965006&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[15]+1236535329&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(T^M&(y^T))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[11]+643717713&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[0]+3921069994&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[15]+3634488961&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[4]+3889429448&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[3]+4107603335&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[8]+1163531501&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[7]+1735328473&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[12]+2368359562&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(y^T^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[11]+1839030562&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[14]+4259657740&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[7]+4139469664&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[10]+3200236656&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[3]+3572445317&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[6]+76029189&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[15]+530742520&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[2]+3299628645&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(T^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[14]+2878612391&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[5]+4237533241&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[10]+4293915773&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[1]+2240044497&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[6]+2734768916&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[13]+1309151649&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[2]+718787259&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(T+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+M&4294967295}i.prototype.v=function(S,w){w===void 0&&(w=S.length);let y=w-this.blockSize,x=this.C,T=this.h,M=0;for(;M<w;){if(T==0)for(;M<=y;)r(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<w;)if(x[T++]=S.charCodeAt(M++),T==this.blockSize){r(this,x),T=0;break}}else for(;M<w;)if(x[T++]=S[M++],T==this.blockSize){r(this,x),T=0;break}}this.h=T,this.o+=w},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var y=S.length-8;y<S.length;++y)S[y]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,y=0;y<4;++y)for(let x=0;x<32;x+=8)S[w++]=this.g[y]>>>x&255;return S};function s(S,w){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=w(S)}function o(S,w){this.h=w;let y=[],x=!0;for(let T=S.length-1;T>=0;T--){let M=S[T]|0;x&&M==w||(y[T]=M,x=!1)}this.g=y}var a={};function c(S){return-128<=S&&S<128?s(S,function(w){return new o([w|0],w<0?-1:0)}):new o([S|0],S<0?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return _(l(-S));let w=[],y=1;for(let x=0;S>=y;x++)w[x]=S/y|0,y*=4294967296;return new o(w,0)}function u(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return _(u(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');let y=l(Math.pow(w,8)),x=d;for(let M=0;M<S.length;M+=8){var T=Math.min(8,S.length-M);let C=parseInt(S.substring(M,M+T),w);T<8?(T=l(Math.pow(w,T)),x=x.j(T).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),f=c(16777216);n=o.prototype,n.m=function(){if(v(this))return-_(this).m();let S=0,w=1;for(let y=0;y<this.g.length;y++){let x=this.i(y);S+=(x>=0?x:4294967296+x)*w,w*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+_(this).toString(S);let w=l(Math.pow(S,6));var y=this;let x="";for(;;){let T=N(y,w).g;y=b(y,T.j(w));let M=((y.g.length>0?y.g[0]:y.h)>>>0).toString(S);if(y=T,g(y))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function v(S){return S.h==-1}n.l=function(S){return S=b(this,S),v(S)?-1:g(S)?0:1};function _(S){let w=S.g.length,y=[];for(let x=0;x<w;x++)y[x]=~S.g[x];return new o(y,~S.h).add(h)}n.abs=function(){return v(this)?_(this):this},n.add=function(S){let w=Math.max(this.g.length,S.g.length),y=[],x=0;for(let T=0;T<=w;T++){let M=x+(this.i(T)&65535)+(S.i(T)&65535),C=(M>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);x=C>>>16,M&=65535,C&=65535,y[T]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function b(S,w){return S.add(_(w))}n.j=function(S){if(g(this)||g(S))return d;if(v(this))return v(S)?_(this).j(_(S)):_(_(this).j(S));if(v(S))return _(this.j(_(S)));if(this.l(f)<0&&S.l(f)<0)return l(this.m()*S.m());let w=this.g.length+S.g.length,y=[];for(var x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(let T=0;T<S.g.length;T++){let M=this.i(x)>>>16,C=this.i(x)&65535,oe=S.i(T)>>>16,Z=S.i(T)&65535;y[2*x+2*T]+=C*Z,R(y,2*x+2*T),y[2*x+2*T+1]+=M*Z,R(y,2*x+2*T+1),y[2*x+2*T+1]+=C*oe,R(y,2*x+2*T+1),y[2*x+2*T+2]+=M*oe,R(y,2*x+2*T+2)}for(S=0;S<w;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=w;S<2*w;S++)y[S]=0;return new o(y,0)};function R(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function P(S,w){this.g=S,this.h=w}function N(S,w){if(g(w))throw Error("division by zero");if(g(S))return new P(d,d);if(v(S))return w=N(_(S),w),new P(_(w.g),_(w.h));if(v(w))return w=N(S,_(w)),new P(_(w.g),w.h);if(S.g.length>30){if(v(S)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;x.l(S)<=0;)y=U(y),x=U(x);var T=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!g(x);){var C=M.add(x);C.l(S)<=0&&(T=T.add(y),M=C),x=O(x,1),y=O(y,1)}return w=b(S,T.j(w)),new P(T,w)}for(T=d;S.l(w)>=0;){for(y=Math.max(1,Math.floor(S.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=l(y),C=M.j(w);v(C)||C.l(S)>0;)y-=x,M=l(y),C=M.j(w);g(M)&&(M=h),T=T.add(M),S=b(S,C)}return new P(T,S)}n.B=function(S){return N(this,S).h},n.and=function(S){let w=Math.max(this.g.length,S.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)&S.i(x);return new o(y,this.h&S.h)},n.or=function(S){let w=Math.max(this.g.length,S.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)|S.i(x);return new o(y,this.h|S.h)},n.xor=function(S){let w=Math.max(this.g.length,S.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)^S.i(x);return new o(y,this.h^S.h)};function U(S){let w=S.g.length+1,y=[];for(let x=0;x<w;x++)y[x]=S.i(x)<<1|S.i(x-1)>>>31;return new o(y,S.h)}function O(S,w){let y=w>>5;w%=32;let x=S.g.length-y,T=[];for(let M=0;M<x;M++)T[M]=w>0?S.i(M+y)>>>w|S.i(M+y+1)<<32-w:S.i(M+y);return new o(T,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,lF=kq.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,wl=kq.Integer=o}).apply(typeof Nq<"u"?Nq:typeof self<"u"?self:typeof window<"u"?window:{});var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},El={};var uF,l0e,Dm,dF,rb,oI,hF,fF,pF;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof sI=="object"&&sI];for(var I=0;I<m.length;++I){var D=m[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=t(this);function r(m,I){if(I)e:{var D=i;m=m.split(".");for(var V=0;V<m.length-1;V++){var q=m[V];if(!(q in D))break e;D=D[q]}m=m[m.length-1],V=D[m],I=I(V),I!=V&&I!=null&&e(D,m,{configurable:!0,writable:!0,value:I})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(I){var D=[],V;for(V in I)Object.prototype.hasOwnProperty.call(I,V)&&D.push([V,I[V]]);return D}});var s=s||{},o=this||self;function a(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function c(m,I,D){return m.call.apply(m.bind,arguments)}function l(m,I,D){return l=c,l.apply(null,arguments)}function u(m,I){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function d(m,I){function D(){}D.prototype=I.prototype,m.Z=I.prototype,m.prototype=new D,m.prototype.constructor=m,m.Ob=function(V,q,ne){for(var Le=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Le[Ot-2]=arguments[Ot];return I.prototype[q].apply(V,Le)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function f(m){let I=m.length;if(I>0){let D=Array(I);for(let V=0;V<I;V++)D[V]=m[V];return D}return[]}function g(m,I){for(let V=1;V<arguments.length;V++){let q=arguments[V];var D=typeof q;if(D=D!="object"?D:q?Array.isArray(q)?"array":D:"null",D=="array"||D=="object"&&typeof q.length=="number"){D=m.length||0;let ne=q.length||0;m.length=D+ne;for(let Le=0;Le<ne;Le++)m[D+Le]=q[Le]}else m.push(q)}}class v{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function _(m){o.setTimeout(()=>{throw m},0)}function b(){var m=S;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class R{constructor(){this.h=this.g=null}add(I,D){let V=P.get();V.set(I,D),this.h?this.h.next=V:this.g=V,this.h=V}}var P=new v(()=>new N,m=>m.reset());class N{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,O=!1,S=new R,w=()=>{let m=Promise.resolve(void 0);U=()=>{m.then(y)}};function y(){for(var m;m=b();){try{m.h.call(m.g)}catch(D){_(D)}var I=P;I.j(m),I.h<100&&(I.h++,m.next=I.g,I.g=m)}O=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{let D=()=>{};o.addEventListener("test",D,I),o.removeEventListener("test",D,I)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function oe(m,I){T.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,I)}d(oe,T),oe.prototype.init=function(m,I){let D=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget,I||(D=="mouseover"?I=m.fromElement:D=="mouseout"&&(I=m.toElement)),this.relatedTarget=I,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);let m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),G=0;function K(m,I,D,V,q){this.listener=m,this.proxy=null,this.src=I,this.type=D,this.capture=!!V,this.ha=q,this.key=++G,this.da=this.fa=!1}function W(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ue(m,I,D){for(let V in m)I.call(D,m[V],V,m)}function ye(m,I){for(let D in m)I.call(void 0,m[D],D,m)}function Ue(m){let I={};for(let D in m)I[D]=m[D];return I}let Qe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(m,I){let D,V;for(let q=1;q<arguments.length;q++){V=arguments[q];for(D in V)m[D]=V[D];for(let ne=0;ne<Qe.length;ne++)D=Qe[ne],Object.prototype.hasOwnProperty.call(V,D)&&(m[D]=V[D])}}function tt(m){this.src=m,this.g={},this.h=0}tt.prototype.add=function(m,I,D,V,q){let ne=m.toString();m=this.g[ne],m||(m=this.g[ne]=[],this.h++);let Le=de(m,I,V,q);return Le>-1?(I=m[Le],D||(I.fa=!1)):(I=new K(I,this.src,ne,!!V,q),I.fa=D,m.push(I)),I};function kt(m,I){let D=I.type;if(D in m.g){var V=m.g[D],q=Array.prototype.indexOf.call(V,I,void 0),ne;(ne=q>=0)&&Array.prototype.splice.call(V,q,1),ne&&(W(I),m.g[D].length==0&&(delete m.g[D],m.h--))}}function de(m,I,D,V){for(let q=0;q<m.length;++q){let ne=m[q];if(!ne.da&&ne.listener==I&&ne.capture==!!D&&ne.ha==V)return q}return-1}var he="closure_lm_"+(Math.random()*1e6|0),ze={};function nt(m,I,D,V,q){if(V&&V.once)return Sn(m,I,D,V,q);if(Array.isArray(I)){for(let ne=0;ne<I.length;ne++)nt(m,I[ne],D,V,q);return null}return D=Se(D),m&&m[Z]?m.J(I,D,a(V)?!!V.capture:!!V,q):et(m,I,D,!1,V,q)}function et(m,I,D,V,q,ne){if(!I)throw Error("Invalid event type");let Le=a(q)?!!q.capture:!!q,Ot=Ae(m);if(Ot||(m[he]=Ot=new tt(m)),D=Ot.add(I,D,V,Le,ne),D.proxy)return D;if(V=Nt(),D.proxy=V,V.src=m,V.listener=D,m.addEventListener)M||(q=Le),q===void 0&&(q=!1),m.addEventListener(I.toString(),V,q);else if(m.attachEvent)m.attachEvent(B(I.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Nt(){function m(D){return I.call(m.src,m.listener,D)}let I=Ee;return m}function Sn(m,I,D,V,q){if(Array.isArray(I)){for(let ne=0;ne<I.length;ne++)Sn(m,I[ne],D,V,q);return null}return D=Se(D),m&&m[Z]?m.K(I,D,a(V)?!!V.capture:!!V,q):et(m,I,D,!0,V,q)}function Et(m,I,D,V,q){if(Array.isArray(I))for(var ne=0;ne<I.length;ne++)Et(m,I[ne],D,V,q);else V=a(V)?!!V.capture:!!V,D=Se(D),m&&m[Z]?(m=m.i,ne=String(I).toString(),ne in m.g&&(I=m.g[ne],D=de(I,D,V,q),D>-1&&(W(I[D]),Array.prototype.splice.call(I,D,1),I.length==0&&(delete m.g[ne],m.h--)))):m&&(m=Ae(m))&&(I=m.g[I.toString()],m=-1,I&&(m=de(I,D,V,q)),(D=m>-1?I[m]:null)&&we(D))}function we(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[Z])kt(I.i,m);else{var D=m.type,V=m.proxy;I.removeEventListener?I.removeEventListener(D,V,m.capture):I.detachEvent?I.detachEvent(B(D),V):I.addListener&&I.removeListener&&I.removeListener(V),(D=Ae(I))?(kt(D,m),D.h==0&&(D.src=null,I[he]=null)):W(m)}}}function B(m){return m in ze?ze[m]:ze[m]="on"+m}function Ee(m,I){if(m.da)m=!0;else{I=new oe(I,this);let D=m.listener,V=m.ha||m.src;m.fa&&we(m),m=D.call(V,I)}return m}function Ae(m){return m=m[he],m instanceof tt?m:null}var Ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(m){return typeof m=="function"?m:(m[Ne]||(m[Ne]=function(I){return m.handleEvent(I)}),m[Ne])}function Fe(){x.call(this),this.i=new tt(this),this.M=this,this.G=null}d(Fe,x),Fe.prototype[Z]=!0,Fe.prototype.removeEventListener=function(m,I,D,V){Et(this,m,I,D,V)};function Me(m,I){var D,V=m.G;if(V)for(D=[];V;V=V.G)D.push(V);if(m=m.M,V=I.type||I,typeof I=="string")I=new T(I,m);else if(I instanceof T)I.target=I.target||m;else{var q=I;I=new T(V,m),Ze(I,q)}q=!0;let ne,Le;if(D)for(Le=D.length-1;Le>=0;Le--)ne=I.g=D[Le],q=$e(ne,V,!0,I)&&q;if(ne=I.g=m,q=$e(ne,V,!0,I)&&q,q=$e(ne,V,!1,I)&&q,D)for(Le=0;Le<D.length;Le++)ne=I.g=D[Le],q=$e(ne,V,!1,I)&&q}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var m=this.i;for(let I in m.g){let D=m.g[I];for(let V=0;V<D.length;V++)W(D[V]);delete m.g[I],m.h--}}this.G=null},Fe.prototype.J=function(m,I,D,V){return this.i.add(String(m),I,!1,D,V)},Fe.prototype.K=function(m,I,D,V){return this.i.add(String(m),I,!0,D,V)};function $e(m,I,D,V){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();let q=!0;for(let ne=0;ne<I.length;++ne){let Le=I[ne];if(Le&&!Le.da&&Le.capture==D){let Ot=Le.listener,p=Le.ha||Le.src;Le.fa&&kt(m.i,Le),q=Ot.call(p,V)!==!1&&q}}return q&&!V.defaultPrevented}function z(m,I){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=l(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:o.setTimeout(m,I||0)}function k(m){m.g=z(()=>{m.g=null,m.i&&(m.i=!1,k(m))},m.l);let I=m.h;m.h=null,m.m.apply(null,I)}class J extends x{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:k(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(m){x.call(this),this.h=m,this.g={}}d(ae,x);var pe=[];function ee(m){ue(m.g,function(I,D){this.g.hasOwnProperty(D)&&we(I)},m),m.g={}}ae.prototype.N=function(){ae.Z.N.call(this),ee(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=o.JSON.stringify,Be=o.JSON.parse,ht=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function at(){}function be(){}var De={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yt(){T.call(this,"d")}d(yt,T);function ft(){T.call(this,"c")}d(ft,T);var Ge={},Mt=null;function j(){return Mt=Mt||new Fe}Ge.Ia="serverreachability";function He(m){T.call(this,Ge.Ia,m)}d(He,T);function ke(m){let I=j();Me(I,new He(I))}Ge.STAT_EVENT="statevent";function Oe(m,I){T.call(this,Ge.STAT_EVENT,m),this.stat=I}d(Oe,T);function ve(m){let I=j();Me(I,new Oe(I,m))}Ge.Ja="timingevent";function _e(m,I){T.call(this,Ge.Ja,m),this.size=I}d(_e,T);function qe(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},I)}function Tt(){this.g=!0}Tt.prototype.ua=function(){this.g=!1};function Fn(m,I,D,V,q,ne){m.info(function(){if(m.g)if(ne){var Le="",Ot=ne.split("&");for(let E=0;E<Ot.length;E++){var p=Ot[E].split("=");if(p.length>1){let A=p[0];p=p[1];let L=A.split("_");Le=L.length>=2&&L[1]=="type"?Le+(A+"="+p+"&"):Le+(A+"=redacted&")}}}else Le=null;else Le=ne;return"XMLHTTP REQ ("+V+") [attempt "+q+"]: "+I+`
`+D+`
`+Le})}function Pn(m,I,D,V,q,ne,Le){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+q+"]: "+I+`
`+D+`
`+ne+" "+Le})}function Ti(m,I,D,V){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+dr(m,D)+(V?" "+V:"")})}function Br(m,I){m.info(function(){return"TIMEOUT: "+I})}Tt.prototype.info=function(){};function dr(m,I){if(!m.g)return I;if(!I)return null;try{let ne=JSON.parse(I);if(ne){for(m=0;m<ne.length;m++)if(Array.isArray(ne[m])){var D=ne[m];if(!(D.length<2)){var V=D[1];if(Array.isArray(V)&&!(V.length<1)){var q=V[0];if(q!="noop"&&q!="stop"&&q!="close")for(let Le=1;Le<V.length;Le++)V[Le]=""}}}}return rt(ne)}catch{return I}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zr;function Dc(){}d(Dc,at),Dc.prototype.g=function(){return new XMLHttpRequest},zr=new Dc;function Na(m){return encodeURIComponent(String(m))}function Go(m){var I=1;m=m.split(":");let D=[];for(;I>0&&m.length;)D.push(m.shift()),I--;return m.length&&D.push(m.join(":")),D}function ss(m,I,D,V){this.j=m,this.i=I,this.l=D,this.S=V||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jd}function Jd(){this.i=null,this.g="",this.h=!1}var vo={},Rc={};function ka(m,I,D){m.M=1,m.A=Oi(gn(I)),m.u=D,m.R=!0,Pc(m,null)}function Pc(m,I){m.F=Date.now(),Oa(m),m.B=gn(m.A);var D=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),zx(D.i,"t",V),m.C=0,D=m.j.L,m.h=new Jd,m.g=yp(m.j,D?I:null,!m.u),m.P>0&&(m.O=new J(l(m.Y,m,m.g),m.P)),I=m.V,D=m.g,V=m.ba;var q="readystatechange";Array.isArray(q)||(q&&(pe[0]=q.toString()),q=pe);for(let ne=0;ne<q.length;ne++){let Le=nt(D,q[ne],V||I.handleEvent,!1,I.h||I);if(!Le)break;I.g[Le.key]=Le}I=m.J?Ue(m.J):{},m.u?(m.v||(m.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,I)):(m.v="GET",m.g.ea(m.B,m.v,null,I)),ke(),Fn(m.i,m.v,m.B,m.l,m.S,m.u)}ss.prototype.ba=function(m){m=m.target;let I=this.O;I&&zn(m)==3?I.j():this.Y(m)},ss.prototype.Y=function(m){try{if(m==this.g)e:{let Ot=zn(this.g),p=this.g.ya(),E=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||Kx(this.g)))){this.K||Ot!=4||p==7||(p==8||E<=0?ke(3):ke(2)),F(this);var I=this.g.ca();this.X=I;var D=bo(this);if(this.o=I==200,Pn(this.i,this.v,this.B,this.l,this.S,Ot,I),this.o){if(this.U&&!this.L){t:{if(this.g){var V,q=this.g;if((V=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(V)){var ne=V;break t}}ne=null}if(m=ne)Ti(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,se(this,m);else{this.o=!1,this.m=3,ve(12),te(this),$(this);break e}}if(this.R){m=!0;let A;for(;!this.K&&this.C<D.length;)if(A=up(this,D),A==Rc){Ot==4&&(this.m=4,ve(14),m=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(A==vo){this.m=4,ve(15),Ti(this.i,this.l,D,"[Invalid Chunk]"),m=!1;break}else Ti(this.i,this.l,A,null),se(this,A);if(Zd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||D.length!=0||this.h.h||(this.m=1,ve(16),m=!1),this.o=this.o&&m,!m)Ti(this.i,this.l,D,"[Invalid Chunked Response]"),te(this),$(this);else if(D.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),mp(Le),Le.P=!0,ve(11))}}else Ti(this.i,this.l,D,null),se(this,D);Ot==4&&te(this),this.o&&!this.K&&(Ot==4?Z_(this.j,this):(this.o=!1,Oa(this)))}else UR(this.g),I==400&&D.indexOf("Unknown SID")>0?(this.m=3,ve(12)):(this.m=0,ve(13)),te(this),$(this)}}}catch{}finally{}};function bo(m){if(!Zd(m))return m.g.la();let I=Kx(m.g);if(I==="")return"";let D="",V=I.length,q=zn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return te(m),$(m),"";m.h.i=new o.TextDecoder}for(let ne=0;ne<V;ne++)m.h.h=!0,D+=m.h.i.decode(I[ne],{stream:!(q&&ne==V-1)});return I.length=0,m.h.g+=D,m.C=0,m.h.g}function Zd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function up(m,I){var D=m.C,V=I.indexOf(`
`,D);return V==-1?Rc:(D=Number(I.substring(D,V)),isNaN(D)?vo:(V+=1,V+D>I.length?Rc:(I=I.slice(V,V+D),m.C=V+D,I)))}ss.prototype.cancel=function(){this.K=!0,te(this)};function Oa(m){m.T=Date.now()+m.H,fu(m,m.H)}function fu(m,I){if(m.D!=null)throw Error("WatchDog timer not null");m.D=qe(l(m.aa,m),I)}function F(m){m.D&&(o.clearTimeout(m.D),m.D=null)}ss.prototype.aa=function(){this.D=null;let m=Date.now();m-this.T>=0?(Br(this.i,this.B),this.M!=2&&(ke(),ve(17)),te(this),this.m=2,$(this)):fu(this,this.T-m)};function $(m){m.j.I==0||m.K||Z_(m.j,m)}function te(m){F(m);var I=m.O;I&&typeof I.dispose=="function"&&I.dispose(),m.O=null,ee(m.V),m.g&&(I=m.g,m.g=null,I.abort(),I.dispose())}function se(m,I){try{var D=m.j;if(D.I!=0&&(D.g==m||Ye(D.h,m))){if(!m.L&&Ye(D.h,m)&&D.I==3){try{var V=D.Ba.g.parse(I)}catch{V=null}if(Array.isArray(V)&&V.length==3){var q=V;if(q[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<m.F)gp(D),Nc(D);else break e;vu(D),ve(18)}}else D.xa=q[1],0<D.xa-D.K&&q[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=qe(l(D.Va,D),6e3));Je(D.h)<=1&&D.ta&&(D.ta=void 0)}else Fa(D,11)}else if((m.L||D.g==m)&&gp(D),!C(I))for(q=D.Ba.g.parse(I),I=0;I<q.length;I++){let E=q[I],A=E[0];if(!(A<=D.K))if(D.K=A,E=E[1],D.I==2)if(E[0]=="c"){D.M=E[1],D.ba=E[2];let L=E[3];L!=null&&(D.ka=L,D.j.info("VER="+D.ka));let X=E[4];X!=null&&(D.za=X,D.j.info("SVER="+D.za));let ie=E[5];ie!=null&&typeof ie=="number"&&ie>0&&(V=1.5*ie,D.O=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;let Pe=m.g;if(Pe){let Vn=Pe.g?Pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vn){var ne=V.h;ne.g||Vn.indexOf("spdy")==-1&&Vn.indexOf("quic")==-1&&Vn.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(vt(ne,ne.h),ne.h=null))}if(V.G){let Ui=Pe.g?Pe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(V.wa=Ui,lt(V.J,V.G,Ui))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-m.F,D.j.info("Handshake RTT: "+D.T+"ms")),V=D;var Le=m;if(V.na=_p(V,V.L?V.ba:null,V.W),Le.L){It(V.h,Le);var Ot=Le,p=V.O;p&&(Ot.H=p),Ot.D&&(F(Ot),Oa(Ot)),V.g=Le}else pp(V);D.i.length>0&&bs(D)}else E[0]!="stop"&&E[0]!="close"||Fa(D,7);else D.I==3&&(E[0]=="stop"||E[0]=="close"?E[0]=="stop"?Fa(D,7):fp(D):E[0]!="noop"&&D.l&&D.l.qa(E),D.A=0)}}ke(4)}catch{}}var Y=class{constructor(m,I){this.g=m,this.map=I}};function Re(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function je(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Je(m){return m.h?1:m.g?m.g.size:0}function Ye(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function vt(m,I){m.g?m.g.add(I):m.h=I}function It(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}Re.prototype.cancel=function(){if(this.i=ut(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let m of this.g.values())m.cancel();this.g.clear()}};function ut(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let I=m.i;for(let D of m.g.values())I=I.concat(D.G);return I}return f(m.i)}var Zt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(m,I){if(m){m=m.split("&");for(let D=0;D<m.length;D++){let V=m[D].indexOf("="),q,ne=null;V>=0?(q=m[D].substring(0,V),ne=m[D].substring(V+1)):q=m[D],I(q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function xn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;m instanceof xn?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,dt(this,m.u),this.h=m.h,Xn(this,Hx(m.i)),this.m=m.m):m&&(I=String(m).match(Zt))?(this.l=!1,_n(this,I[1]||"",!0),this.o=ys(I[2]||""),this.g=ys(I[3]||"",!0),dt(this,I[4]),this.h=ys(I[5]||"",!0),Xn(this,I[6]||"",!0),this.m=ys(I[7]||"")):(this.l=!1,this.i=new os(null,this.l))}xn.prototype.toString=function(){let m=[];var I=this.j;I&&m.push(ii(I,Bn,!0),":");var D=this.g;return(D||I=="file")&&(m.push("//"),(I=this.o)&&m.push(ii(I,Bn,!0),"@"),m.push(Na(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&m.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&m.push("/"),m.push(ii(D,D.charAt(0)=="/"?Dr:Li,!0))),(D=this.i.toString())&&m.push("?",D),(D=this.m)&&m.push("#",ii(D,Fi)),m.join("")},xn.prototype.resolve=function(m){let I=gn(this),D=!!m.j;D?_n(I,m.j):D=!!m.o,D?I.o=m.o:D=!!m.g,D?I.g=m.g:D=m.u!=null;var V=m.h;if(D)dt(I,m.u);else if(D=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var q=I.h.lastIndexOf("/");q!=-1&&(V=I.h.slice(0,q+1)+V)}if(q=V,q==".."||q==".")V="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){V=q.lastIndexOf("/",0)==0,q=q.split("/");let ne=[];for(let Le=0;Le<q.length;){let Ot=q[Le++];Ot=="."?V&&Le==q.length&&ne.push(""):Ot==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),V&&Le==q.length&&ne.push("")):(ne.push(Ot),V=!0)}V=ne.join("/")}else V=q}return D?I.h=V:D=m.i.toString()!=="",D?Xn(I,Hx(m.i)):D=!!m.m,D&&(I.m=m.m),I};function gn(m){return new xn(m)}function _n(m,I,D){m.j=D?ys(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function dt(m,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);m.u=I}else m.u=null}function Xn(m,I,D){I instanceof os?(m.i=I,eh(m.i,m.l)):(D||(I=ii(I,Kt)),m.i=new os(I,m.l))}function lt(m,I,D){m.i.set(I,D)}function Oi(m){return lt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ys(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ii(m,I,D){return typeof m=="string"?(m=encodeURI(m).replace(I,Mr),D&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Mr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Bn=/[#\/\?@]/g,Li=/[#\?:]/g,Dr=/[#\?]/g,Kt=/[#\?@]/g,Fi=/#/g;function os(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function Vi(m){m.g||(m.g=new Map,m.h=0,m.i&&Tn(m.i,function(I,D){m.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}n=os.prototype,n.add=function(m,I){Vi(this),this.i=null,m=pu(this,m);let D=this.g.get(m);return D||this.g.set(m,D=[]),D.push(I),this.h+=1,this};function Ux(m,I){Vi(m),I=pu(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function q_(m,I){return Vi(m),I=pu(m,I),m.g.has(I)}n.forEach=function(m,I){Vi(this),this.g.forEach(function(D,V){D.forEach(function(q){m.call(I,q,V,this)},this)},this)};function Bx(m,I){Vi(m);let D=[];if(typeof I=="string")q_(m,I)&&(D=D.concat(m.g.get(pu(m,I))));else for(m=Array.from(m.g.values()),I=0;I<m.length;I++)D=D.concat(m[I]);return D}n.set=function(m,I){return Vi(this),this.i=null,m=pu(this,m),q_(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},n.get=function(m,I){return m?(m=Bx(this,m),m.length>0?String(m[0]):I):I};function zx(m,I,D){Ux(m,I),D.length>0&&(m.i=null,m.g.set(pu(m,I),f(D)),m.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let m=[],I=Array.from(this.g.keys());for(let V=0;V<I.length;V++){var D=I[V];let q=Na(D);D=Bx(this,D);for(let ne=0;ne<D.length;ne++){let Le=q;D[ne]!==""&&(Le+="="+Na(D[ne])),m.push(Le)}}return this.i=m.join("&")};function Hx(m){let I=new os;return I.i=m.i,m.g&&(I.g=new Map(m.g),I.h=m.h),I}function pu(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function eh(m,I){I&&!m.j&&(Vi(m),m.i=null,m.g.forEach(function(D,V){let q=V.toLowerCase();V!=q&&(Ux(this,V),zx(this,q,D))},m)),m.j=I}function La(m,I){let D=new Tt;if(o.Image){let V=new Image;V.onload=u(Wo,D,"TestLoadImage: loaded",!0,I,V),V.onerror=u(Wo,D,"TestLoadImage: error",!1,I,V),V.onabort=u(Wo,D,"TestLoadImage: abort",!1,I,V),V.ontimeout=u(Wo,D,"TestLoadImage: timeout",!1,I,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else I(!1)}function jx(m,I){let D=new Tt,V=new AbortController,q=setTimeout(()=>{V.abort(),Wo(D,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:V.signal}).then(ne=>{clearTimeout(q),ne.ok?Wo(D,"TestPingServer: ok",!0,I):Wo(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(q),Wo(D,"TestPingServer: error",!1,I)})}function Wo(m,I,D,V,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),V(D)}catch{}}function Gx(){this.g=new ht}function $o(m){this.i=m.Sb||null,this.h=m.ab||!1}d($o,at),$o.prototype.g=function(){return new dp(this.i,this.h)};function dp(m,I){Fe.call(this),this.H=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(dp,Fe),n=dp.prototype,n.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=I,this.readyState=1,vs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(I.body=m),(this.H||o).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,th(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wx(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wx(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?th(this):vs(this),this.readyState==3&&Wx(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,th(this))},n.Na=function(m){this.g&&(this.response=m,th(this))},n.ga=function(){this.g&&th(this)};function th(m){m.readyState=4,m.l=null,m.j=null,m.B=null,vs(m)}n.setRequestHeader=function(m,I){this.A.append(m,I)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let m=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,m.push(D[0]+": "+D[1]),D=I.next();return m.join(`\r
`)};function vs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(dp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function $x(m){let I="";return ue(m,function(D,V){I+=V,I+=":",I+=D,I+=`\r
`}),I}function K_(m,I,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=$x(D),typeof m=="string"?D!=null&&Na(D):lt(m,I,D))}function Zn(m){Fe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Zn,Fe);var hp=/^https?$/i,qx=["POST","PUT"];n=Zn.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,I,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zr.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(ne){mu(this,ne);return}if(m=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var q in V)D.set(q,V[q]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(let ne of V.keys())D.set(ne,V.get(ne));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(ne=>ne.toLowerCase()=="content-type"),q=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(qx,I,void 0)>=0)||V||q||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ne,Le]of D)this.g.setRequestHeader(ne,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ne){mu(this,ne)}};function mu(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.o=5,gu(m),_u(m)}function gu(m){m.A||(m.A=!0,Me(m,"complete"),Me(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Me(this,"complete"),Me(this,"abort"),_u(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_u(this,!0)),Zn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?X_(this):this.Xa())},n.Xa=function(){X_(this)};function X_(m){if(m.h&&typeof s<"u"){if(m.v&&zn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Me(m,"readystatechange"),zn(m)==4){m.h=!1;try{let ne=m.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var D;if(!(D=I)){var V;if(V=ne===0){let Le=String(m.D).match(Zt)[1]||null;!Le&&o.self&&o.self.location&&(Le=o.self.location.protocol.slice(0,-1)),V=!hp.test(Le?Le.toLowerCase():"")}D=V}if(D)Me(m,"complete"),Me(m,"success");else{m.o=6;try{var q=zn(m)>2?m.g.statusText:""}catch{q=""}m.l=q+" ["+m.ca()+"]",gu(m)}}finally{_u(m)}}}}function _u(m,I){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);let D=m.g;m.g=null,I||Me(m,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function zn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return zn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),Be(I)}};function Kx(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function UR(m){let I={};m=(m.g&&zn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(C(m[V]))continue;var D=Go(m[V]);let q=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();let ne=I[q]||[];I[q]=ne,ne.push(D)}ye(I,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yu(m,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[m]||I}function Y_(m){this.za=0,this.i=[],this.j=new Tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yu("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yu("baseRetryDelayMs",5e3,m),this.Za=yu("retryDelaySeedMs",1e4,m),this.Ta=yu("forwardChannelMaxRetries",2,m),this.va=yu("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Re(m&&m.concurrentRequestLimit),this.Ba=new Gx,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Y_.prototype,n.ka=8,n.I=1,n.connect=function(m,I,D,V){ve(0),this.W=m,this.H=I||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.J=_p(this,null,this.W),bs(this)};function fp(m){if(Q_(m),m.I==3){var I=m.V++,D=gn(m.J);if(lt(D,"SID",m.M),lt(D,"RID",I),lt(D,"TYPE","terminate"),qo(m,D),I=new ss(m,m.j,I),I.M=2,I.A=Oi(gn(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(I.A.toString(),"")}catch{}!D&&o.Image&&(new Image().src=I.A,D=!0),D||(I.g=yp(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Oa(I)}ey(m)}function Nc(m){m.g&&(mp(m),m.g.cancel(),m.g=null)}function Q_(m){Nc(m),m.v&&(o.clearTimeout(m.v),m.v=null),gp(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function bs(m){if(!je(m.h)&&!m.m){m.m=!0;var I=m.Ea;U||w(),O||(U(),O=!0),S.add(I,m),m.D=0}}function Xx(m,I){return Je(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=I.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=qe(l(m.Ea,m,I),bu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;let q=new ss(this,this.j,m),ne=this.o;if(this.U&&(ne?(ne=Ue(ne),Ze(ne,this.U)):ne=this.U),this.u!==null||this.R||(q.J=ne,ne=null),this.S)e:{for(var I=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(I+=V,I>4096){I=D;break e}if(I===4096||D===this.i.length-1){I=D+1;break e}}I=1e3}else I=1e3;I=J_(this,q,I),D=gn(this.J),lt(D,"RID",m),lt(D,"CVER",22),this.G&&lt(D,"X-HTTP-Session-Id",this.G),qo(this,D),ne&&(this.R?I="headers="+Na($x(ne))+"&"+I:this.u&&K_(D,this.u,ne)),vt(this.h,q),this.Ra&&lt(D,"TYPE","init"),this.S?(lt(D,"$req",I),lt(D,"SID","null"),q.U=!0,ka(q,D,null)):ka(q,D,I),this.I=2}}else this.I==3&&(m?Yx(this,m):this.i.length==0||je(this.h)||Yx(this))};function Yx(m,I){var D;I?D=I.l:D=m.V++;let V=gn(m.J);lt(V,"SID",m.M),lt(V,"RID",D),lt(V,"AID",m.K),qo(m,V),m.u&&m.o&&K_(V,m.u,m.o),D=new ss(m,m.j,D,m.D+1),m.u===null&&(D.J=m.o),I&&(m.i=I.G.concat(m.i)),I=J_(m,D,1e3),D.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),vt(m.h,D),ka(D,V,I)}function qo(m,I){m.H&&ue(m.H,function(D,V){lt(I,V,D)}),m.l&&ue({},function(D,V){lt(I,V,D)})}function J_(m,I,D){D=Math.min(m.i.length,D);let V=m.l?l(m.l.Ka,m.l,m):null;e:{var q=m.i;let Ot=-1;for(;;){let p=["count="+D];Ot==-1?D>0?(Ot=q[0].g,p.push("ofs="+Ot)):Ot=0:p.push("ofs="+Ot);let E=!0;for(let A=0;A<D;A++){var ne=q[A].g;let L=q[A].map;if(ne-=Ot,ne<0)Ot=Math.max(0,q[A].g-100),E=!1;else try{ne="req"+ne+"_"||"";try{var Le=L instanceof Map?L:Object.entries(L);for(let[X,ie]of Le){let Pe=ie;a(ie)&&(Pe=rt(ie)),p.push(ne+X+"="+encodeURIComponent(Pe))}}catch(X){throw p.push(ne+"type="+encodeURIComponent("_badmap")),X}}catch{V&&V(L)}}if(E){Le=p.join("&");break e}}Le=void 0}return m=m.i.splice(0,D),I.G=m,Le}function pp(m){if(!m.g&&!m.v){m.Y=1;var I=m.Da;U||w(),O||(U(),O=!0),S.add(I,m),m.A=0}}function vu(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=qe(l(m.Da,m),bu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,nh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=qe(l(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ve(10),Nc(this),nh(this))};function mp(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function nh(m){m.g=new ss(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var I=gn(m.na);lt(I,"RID","rpc"),lt(I,"SID",m.M),lt(I,"AID",m.K),lt(I,"CI",m.F?"0":"1"),!m.F&&m.ia&&lt(I,"TO",m.ia),lt(I,"TYPE","xmlhttp"),qo(m,I),m.u&&m.o&&K_(I,m.u,m.o),m.O&&(m.g.H=m.O);var D=m.g;m=m.ba,D.M=1,D.A=Oi(gn(I)),D.u=null,D.R=!0,Pc(D,m)}n.Va=function(){this.C!=null&&(this.C=null,Nc(this),vu(this),ve(19))};function gp(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function Z_(m,I){var D=null;if(m.g==I){gp(m),mp(m),m.g=null;var V=2}else if(Ye(m.h,I))D=I.G,It(m.h,I),V=1;else return;if(m.I!=0){if(I.o)if(V==1){D=I.u?I.u.length:0,I=Date.now()-I.F;var q=m.D;V=j(),Me(V,new _e(V,D)),bs(m)}else pp(m);else if(q=I.m,q==3||q==0&&I.X>0||!(V==1&&Xx(m,I)||V==2&&vu(m)))switch(D&&D.length>0&&(I=m.h,I.i=I.i.concat(D)),q){case 1:Fa(m,5);break;case 4:Fa(m,10);break;case 3:Fa(m,6);break;default:Fa(m,2)}}}function bu(m,I){let D=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(D*=2),D*I}function Fa(m,I){if(m.j.info("Error code "+I),I==2){var D=l(m.bb,m),V=m.Ua;let q=!V;V=new xn(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_n(V,"https"),Oi(V),q?La(V.toString(),D):jx(V.toString(),D)}else ve(2);m.I=0,m.l&&m.l.pa(I),ey(m),Q_(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function ey(m){if(m.I=0,m.ja=[],m.l){let I=ut(m.h);(I.length!=0||m.i.length!=0)&&(g(m.ja,I),g(m.ja,m.i),m.h.i.length=0,f(m.i),m.i.length=0),m.l.oa()}}function _p(m,I,D){var V=D instanceof xn?gn(D):new xn(D);if(V.g!="")I&&(V.g=I+"."+V.g),dt(V,V.u);else{var q=o.location;V=q.protocol,I=I?I+"."+q.hostname:q.hostname,q=+q.port;let ne=new xn(null);V&&_n(ne,V),I&&(ne.g=I),q&&dt(ne,q),D&&(ne.h=D),V=ne}return D=m.G,I=m.wa,D&&I&&lt(V,D,I),lt(V,"VER",m.ka),qo(m,V),V}function yp(m,I,D){if(I&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Aa&&!m.ma?new Zn(new $o({ab:D})):new Zn(m.ma),I.Fa(m.L),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ty(){}n=ty.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function kc(){}kc.prototype.g=function(m,I){return new Hr(m,I)};function Hr(m,I){Fe.call(this),this.g=new Y_(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(m?m["X-WebChannel-Client-Profile"]=I.sa:m={"X-WebChannel-Client-Profile":I.sa}),this.g.U=m,(m=I&&I.Qb)&&!C(m)&&(this.g.u=m),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!C(I)&&(this.g.G=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new Oc(this)}d(Hr,Fe),Hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hr.prototype.close=function(){fp(this.g)},Hr.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var D={};D.__data__=m,m=D}else this.v&&(D={},D.__data__=rt(m),m=D);I.i.push(new Y(I.Ya++,m)),I.I==3&&bs(I)},Hr.prototype.N=function(){this.g.l=null,delete this.j,fp(this.g),delete this.g,Hr.Z.N.call(this)};function ny(m){yt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(let D in I){m=D;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}d(ny,yt);function Va(){ft.call(this),this.status=1}d(Va,ft);function Oc(m){this.g=m}d(Oc,ty),Oc.prototype.ra=function(){Me(this.g,"a")},Oc.prototype.qa=function(m){Me(this.g,new ny(m))},Oc.prototype.pa=function(m){Me(this.g,new Va)},Oc.prototype.oa=function(){Me(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,Hr.prototype.send=Hr.prototype.o,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,pF=El.createWebChannelTransport=function(){return new kc},fF=El.getStatEventTarget=function(){return j()},hF=El.Event=Ge,oI=El.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,rb=El.ErrorCode=Pa,jo.COMPLETE="complete",dF=El.EventType=jo,be.EventType=De,De.OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,Dm=El.WebChannel=be,l0e=El.FetchXmlHttpFactory=$o,Zn.prototype.listenOnce=Zn.prototype.K,Zn.prototype.getLastError=Zn.prototype.Ha,Zn.prototype.getLastErrorCode=Zn.prototype.ya,Zn.prototype.getStatus=Zn.prototype.ca,Zn.prototype.getResponseJson=Zn.prototype.La,Zn.prototype.getResponseText=Zn.prototype.la,Zn.prototype.send=Zn.prototype.ea,Zn.prototype.setWithCredentials=Zn.prototype.Fa,uF=El.XhrIo=Zn}).apply(typeof sI<"u"?sI:typeof self<"u"?self:typeof window<"u"?window:{});var Oq="@firebase/firestore",Lq="4.9.2";var Jr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");var tg="12.3.0";var df=new Zu("@firebase/firestore");function Rm(){return df.logLevel}function ot(n,...e){if(df.logLevel<=pn.DEBUG){let t=e.map(Z2);df.debug(`Firestore (${tg}): ${n}`,...t)}}function Il(n,...e){if(df.logLevel<=pn.ERROR){let t=e.map(Z2);df.error(`Firestore (${tg}): ${n}`,...t)}}function db(n,...e){if(df.logLevel<=pn.WARN){let t=e.map(Z2);df.warn(`Firestore (${tg}): ${n}`,...t)}}function Z2(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function $t(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,S7(n,i,t)}function S7(n,e,t){let i=`FIRESTORE (${tg}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Il(i),new Error(i)}function Ai(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||S7(e,r,i)}function Mn(n,e){return n}var We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ct=class extends Ao{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rd=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wF=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},EF=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}};var SF=class{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ai(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new rd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rd,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rd)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ai(typeof i.accessToken=="string",31837,{l:i}),new wF(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ai(e===null||typeof e=="string",2055,{h:e}),new Jr(e)}},TF=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},IF=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new TF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},CF=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_l(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ai(this.o===void 0,3512);let i=s=>{s.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ot("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hI(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ai(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function u0e(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var fI=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=u0e(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function En(n,e){return n<e?-1:n>e?1:0}function AF(n,e){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++){let r=n.charAt(i),s=e.charAt(i);if(r!==s)return mF(r)===mF(s)?En(r,s):mF(r)?1:-1}return En(n.length,e.length)}var d0e=55296,h0e=57343;function mF(n){let e=n.charCodeAt(0);return e>=d0e&&e<=h0e}function jm(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Fq="__name__",pI=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&$t(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&$t(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return En(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):AF(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wl.fromString(e.substring(4,e.length-2))}},pr=class n extends pI{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ct(We.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},f0e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,va=class n extends pI{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return f0e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fq}static keyField(){return new n([Fq])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Ct(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ct(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ct(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ct(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Vt=class n{constructor(e){this.path=e}static fromPath(e){return new n(pr.fromString(e))}static fromName(e){return new n(pr.fromString(e).popFirst(5))}static empty(){return new n(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pr(e.slice()))}};function p0e(n,e,t,i){if(e===!0&&i===!0)throw new Ct(We.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function m0e(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function g0e(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$t(12329,{type:typeof n})}function gF(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ct(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=g0e(n);throw new Ct(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ir(n,e){let t={typeString:n};return e&&(t.value=e),t}function Tb(n,e){if(!m0e(n))throw new Ct(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Ct(We.INVALID_ARGUMENT,t);return!0}var Vq=-62135596800,Uq=1e6,gs=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Uq);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ct(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ct(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vq)throw new Ct(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uq}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tb(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Vq;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gs._jsonSchemaVersion="firestore/timestamp/1.0",gs._jsonSchema={type:ir("string",gs._jsonSchemaVersion),seconds:ir("number"),nanoseconds:ir("number")};var nn=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new gs(0,0))}static max(){return new n(new gs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hb=-1,MF=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};MF.UNKNOWN_ID=-1;function _0e(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=nn.fromTimestamp(i===1e9?new gs(t+1,0):new gs(t,i));return new hf(r,Vt.empty(),e)}function y0e(n){return new hf(n.readTime,n.key,hb)}var hf=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(nn.min(),Vt.empty(),hb)}static max(){return new n(nn.max(),Vt.empty(),hb)}};function v0e(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Vt.comparator(n.documentKey,e.documentKey),t!==0?t:En(n.largestBatchId,e.largestBatchId))}var b0e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",DF=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function BI(n){if(n.code!==We.FAILED_PRECONDITION||n.message!==b0e)throw n;ot("LocalStore","Unexpectedly lost primary lease")}var Ce=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function x0e(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ng(n){return n.name==="IndexedDbTransactionError"}var eV=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),w0e=-1;function zI(n){return n==null}function mI(n){return n===0&&1/n==-1/0}var T7="";function E0e(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bq(e)),e=S0e(n.get(t),e);return Bq(e)}function S0e(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case T7:t+="";break;default:t+=s}}return t}function Bq(n){return n+T7+""}var T0e="remoteDocuments",I7="owner";var C7="mutationQueues";var A7="mutations";var M7="documentMutations",I0e="remoteDocumentsV14";var D7="remoteDocumentGlobal";var R7="targets";var P7="targetDocuments";var N7="targetGlobal",k7="collectionParents";var O7="clientMetadata";var L7="bundles";var F7="namedQueries";var C0e="indexConfiguration";var A0e="indexState";var M0e="indexEntries";var V7="documentOverlays";var D0e="globals";var R0e=[C7,A7,M7,T0e,R7,I7,N7,P7,O7,D7,k7,L7,F7],fZe=[...R0e,V7],P0e=[C7,A7,M7,I0e,R7,I7,N7,P7,O7,D7,k7,L7,F7,V7],N0e=P0e,k0e=[...N0e,C0e,A0e,M0e];var pZe=[...k0e,D0e];function zq(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ib(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O0e(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $i=class n{constructor(e,t){this.comparator=e,this.root=t||sc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Om(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Om(this.root,e,this.comparator,!1)}getReverseIterator(){return new Om(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Om(this.root,e,this.comparator,!0)}},Om=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sc=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $t(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $t(27949);return e+(this.isRed()?0:1)}};sc.EMPTY=null,sc.RED=!0,sc.BLACK=!1;sc.EMPTY=new class{constructor(){this.size=0}get key(){throw $t(57766)}get value(){throw $t(16141)}get color(){throw $t(16727)}get left(){throw $t(29726)}get right(){throw $t(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new sc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Sr=class n{constructor(e){this.comparator=e,this.data=new $i(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gI(this.data.getIterator())}getIteratorFrom(e){return new gI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gI=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var of=class n{constructor(e){this.fields=e,e.sort(va.comparator)}static empty(){return new n([])}unionWith(e){let t=new Sr(va.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jm(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var _I=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Zr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _I("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zr.EMPTY_BYTE_STRING=new Zr("");var L0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(n){if(Ai(!!n,39018),typeof n=="string"){let e=0,t=L0e.exec(n);if(Ai(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wi(n.seconds),nanos:wi(n.nanos)}}function wi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Al(n){return typeof n=="string"?Zr.fromBase64String(n):Zr.fromUint8Array(n)}var U7="server_timestamp",B7="__type__",z7="__previous_value__",H7="__local_write_time__";function tV(n){return(n?.mapValue?.fields||{})[B7]?.stringValue===U7}function HI(n){let e=n.mapValue.fields[z7];return tV(e)?HI(e):e}function fb(n){let e=Cl(n.mapValue.fields[H7].timestampValue);return new gs(e.seconds,e.nanos)}var RF=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},PF="(default)",yI=class n{constructor(e,t){this.projectId=e,this.database=t||PF}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===PF}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var j7="__type__",G7="__max__",aI={mapValue:{fields:{__type__:{stringValue:G7}}}},W7="__vector__",pb="value";function sd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tV(n)?4:q7(n)?9007199254740991:$7(n)?10:11:$t(28295,{value:n})}function ac(n,e){if(n===e)return!0;let t=sd(n);if(t!==sd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fb(n).isEqual(fb(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Cl(r.timestampValue),a=Cl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return Al(r.bytesValue).isEqual(Al(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return wi(r.geoPointValue.latitude)===wi(s.geoPointValue.latitude)&&wi(r.geoPointValue.longitude)===wi(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return wi(r.integerValue)===wi(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=wi(r.doubleValue),a=wi(s.doubleValue);return o===a?mI(o)===mI(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return jm(n.arrayValue.values||[],e.arrayValue.values||[],ac);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(zq(o)!==zq(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ac(o[c],a[c])))return!1;return!0})(n,e);default:return $t(52216,{left:n})}}function mb(n,e){return(n.values||[]).find(t=>ac(t,e))!==void 0}function Gm(n,e){if(n===e)return 0;let t=sd(n),i=sd(e);if(t!==i)return En(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return En(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=wi(s.integerValue||s.doubleValue),c=wi(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Hq(n.timestampValue,e.timestampValue);case 4:return Hq(fb(n),fb(e));case 5:return AF(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Al(s),c=Al(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=En(a[l],c[l]);if(u!==0)return u}return En(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=En(wi(s.latitude),wi(o.latitude));return a!==0?a:En(wi(s.longitude),wi(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jq(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[pb]?.arrayValue,u=c[pb]?.arrayValue,d=En(l?.values?.length||0,u?.values?.length||0);return d!==0?d:jq(l,u)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===aI.mapValue&&o===aI.mapValue)return 0;if(s===aI.mapValue)return 1;if(o===aI.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=AF(c[d],u[d]);if(h!==0)return h;let f=Gm(a[c[d]],l[u[d]]);if(f!==0)return f}return En(c.length,u.length)})(n.mapValue,e.mapValue);default:throw $t(23264,{he:t})}}function Hq(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return En(n,e);let t=Cl(n),i=Cl(e),r=En(t.seconds,i.seconds);return r!==0?r:En(t.nanos,i.nanos)}function jq(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Gm(t[r],i[r]);if(s)return s}return En(t.length,i.length)}function Wm(n){return NF(n)}function NF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Cl(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Al(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Vt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=NF(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${NF(t.fields[o])}`;return r+"}"})(n.mapValue):$t(61005,{value:n})}function uI(n){switch(sd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=HI(n);return e?16+uI(e):16;case 5:return 2*n.stringValue.length;case 6:return Al(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+uI(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ib(i.fields,(s,o)=>{r+=s.length+uI(o)}),r})(n.mapValue);default:throw $t(13486,{value:n})}}function kF(n){return!!n&&"integerValue"in n}function nV(n){return!!n&&"arrayValue"in n}function Gq(n){return!!n&&"nullValue"in n}function Wq(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _F(n){return!!n&&"mapValue"in n}function $7(n){return(n?.mapValue?.fields||{})[j7]?.stringValue===W7}function ob(n){if(n.geoPointValue)return{geoPointValue:re({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:re({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ib(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ob(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ob(n.arrayValue.values[t]);return e}return re({},n)}function q7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===G7}var gZe={mapValue:{fields:{[j7]:{stringValue:W7},[pb]:{arrayValue:{}}}}};var Sl=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_F(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ob(t)}setAll(e){let t=va.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=ob(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());_F(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ac(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];_F(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ib(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(ob(this.value))}};var ba=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,nn.min(),nn.min(),nn.min(),Sl.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,nn.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,nn.min(),nn.min(),Sl.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,nn.min(),nn.min(),Sl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $m=class{constructor(e,t){this.position=e,this.inclusive=t}};function $q(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Vt.comparator(Vt.fromName(o.referenceValue),t.key):i=Gm(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function qq(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ac(n.position[t],e.position[t]))return!1;return!0}var qm=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function F0e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vI=class{},mr=class n extends vI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new LF(e,t,i):t==="array-contains"?new UF(e,i):t==="in"?new BF(e,i):t==="not-in"?new zF(e,i):t==="array-contains-any"?new HF(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new FF(e,i):new VF(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gm(t,this.value)):t!==null&&sd(this.value)===sd(t)&&this.matchesComparison(Gm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cc=class n extends vI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return K7(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function K7(n){return n.op==="and"}function X7(n){return V0e(n)&&K7(n)}function V0e(n){for(let e of n.filters)if(e instanceof cc)return!1;return!0}function OF(n){if(n instanceof mr)return n.field.canonicalString()+n.op.toString()+Wm(n.value);if(X7(n))return n.filters.map(e=>OF(e)).join(",");{let e=n.filters.map(t=>OF(t)).join(",");return`${n.op}(${e})`}}function Y7(n,e){return n instanceof mr?(function(i,r){return r instanceof mr&&i.op===r.op&&i.field.isEqual(r.field)&&ac(i.value,r.value)})(n,e):n instanceof cc?(function(i,r){return r instanceof cc&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Y7(o,r.filters[a]),!0):!1})(n,e):void $t(19439)}function Q7(n){return n instanceof mr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wm(t.value)}`})(n):n instanceof cc?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q7).join(" ,")+"}"})(n):"Filter"}var LF=class extends mr{constructor(e,t,i){super(e,t,i),this.key=Vt.fromName(i.referenceValue)}matches(e){let t=Vt.comparator(e.key,this.key);return this.matchesComparison(t)}},FF=class extends mr{constructor(e,t){super(e,"in",t),this.keys=J7("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},VF=class extends mr{constructor(e,t){super(e,"not-in",t),this.keys=J7("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function J7(n,e){return(e.arrayValue?.values||[]).map(t=>Vt.fromName(t.referenceValue))}var UF=class extends mr{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nV(t)&&mb(t.arrayValue,this.value)}},BF=class extends mr{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mb(this.value.arrayValue,t)}},zF=class extends mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(mb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mb(this.value.arrayValue,t)}},HF=class extends mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nV(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>mb(this.value.arrayValue,i))}};var jF=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function Kq(n,e=null,t=[],i=[],r=null,s=null,o=null){return new jF(n,e,t,i,r,s,o)}function iV(n){let e=Mn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>OF(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),zI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Wm(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Wm(i)).join(",")),e.Te=t}return e.Te}function rV(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F0e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Y7(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qq(n.startAt,e.startAt)&&qq(n.endAt,e.endAt)}function GF(n){return Vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Km=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function U0e(n,e,t,i,r,s,o,a){return new Km(n,e,t,i,r,s,o,a)}function sV(n){return new Km(n)}function Xq(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B0e(n){return n.collectionGroup!==null}function ab(n){let e=Mn(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Sr(va.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new qm(s,i))}),t.has(va.keyField().canonicalString())||e.Ie.push(new qm(va.keyField(),i))}return e.Ie}function oc(n){let e=Mn(n);return e.Ee||(e.Ee=z0e(e,ab(n))),e.Ee}function z0e(n,e){if(n.limitType==="F")return Kq(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new qm(r.field,s)});let t=n.endAt?new $m(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $m(n.startAt.position,n.startAt.inclusive):null;return Kq(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function WF(n,e,t){return new Km(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jI(n,e){return rV(oc(n),oc(e))&&n.limitType===e.limitType}function Z7(n){return`${iV(oc(n))}|lt:${n.limitType}`}function Pm(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Q7(r)).join(", ")}]`),zI(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Wm(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Wm(r)).join(",")),`Target(${i})`})(oc(n))}; limitType=${n.limitType})`}function GI(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Vt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of ab(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=$q(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,ab(i),r)||i.endAt&&!(function(o,a,c){let l=$q(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,ab(i),r))})(n,e)}function H0e(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eK(n){return(e,t)=>{let i=!1;for(let r of ab(n)){let s=j0e(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function j0e(n,e,t){let i=n.field.isKeyField()?Vt.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Gm(c,l):$t(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $t(19790,{direction:n.dir})}}var Ml=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ib(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return O0e(this.inner)}size(){return this.innerSize}};var G0e=new $i(Vt.comparator);function od(){return G0e}var tK=new $i(Vt.comparator);function sb(...n){let e=tK;for(let t of n)e=e.insert(t.key,t);return e}function W0e(n){let e=tK;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function af(){return cb()}function nK(){return cb()}function cb(){return new Ml(n=>n.toString(),(n,e)=>n.isEqual(e))}var _Ze=new $i(Vt.comparator),$0e=new Sr(Vt.comparator);function On(...n){let e=$0e;for(let t of n)e=e.add(t);return e}var q0e=new Sr(En);function K0e(){return q0e}function X0e(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mI(e)?"-0":e}}function Y0e(n){return{integerValue:""+n}}var Xm=class{constructor(){this._=void 0}};function Q0e(n,e,t){return n instanceof gb?(function(r,s){let o={fields:{[B7]:{stringValue:U7},[H7]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&tV(s)&&(s=HI(s)),s&&(o.fields[z7]=s),{mapValue:o}})(t,e):n instanceof Ym?iK(n,e):n instanceof Qm?rK(n,e):(function(r,s){let o=Z0e(r,s),a=Yq(o)+Yq(r.Ae);return kF(o)&&kF(r.Ae)?Y0e(a):X0e(r.serializer,a)})(n,e)}function J0e(n,e,t){return n instanceof Ym?iK(n,e):n instanceof Qm?rK(n,e):t}function Z0e(n,e){return n instanceof _b?(function(i){return kF(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var gb=class extends Xm{},Ym=class extends Xm{constructor(e){super(),this.elements=e}};function iK(n,e){let t=sK(e);for(let i of n.elements)t.some(r=>ac(r,i))||t.push(i);return{arrayValue:{values:t}}}var Qm=class extends Xm{constructor(e){super(),this.elements=e}};function rK(n,e){let t=sK(e);for(let i of n.elements)t=t.filter(r=>!ac(r,i));return{arrayValue:{values:t}}}var _b=class extends Xm{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Yq(n){return wi(n.integerValue||n.doubleValue)}function sK(n){return nV(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function exe(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Ym&&r instanceof Ym||i instanceof Qm&&r instanceof Qm?jm(i.elements,r.elements,ac):i instanceof _b&&r instanceof _b?ac(i.Ae,r.Ae):i instanceof gb&&r instanceof gb})(n.transform,e.transform)}var lb=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dI(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yb=class{};function oK(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $F(n.key,lb.none()):new vb(n.key,n.data,lb.none());{let t=n.data,i=Sl.empty(),r=new Sr(va.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Jm(n.key,i,new of(r.toArray()),lb.none())}}function txe(n,e,t){n instanceof vb?(function(r,s,o){let a=r.value.clone(),c=Jq(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Jm?(function(r,s,o){if(!dI(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Jq(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(aK(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function ub(n,e,t,i){return n instanceof vb?(function(s,o,a,c){if(!dI(s.precondition,o))return a;let l=s.value.clone(),u=Zq(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof Jm?(function(s,o,a,c){if(!dI(s.precondition,o))return a;let l=Zq(s.fieldTransforms,c,o),u=o.data;return u.setAll(aK(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return dI(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Qq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&jm(i,r,(s,o)=>exe(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vb=class extends yb{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Jm=class extends yb{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function aK(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Jq(n,e,t){let i=new Map;Ai(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,J0e(o,a,t[r]))}return i}function Zq(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,Q0e(s,o,e))}return i}var $F=class extends yb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var qF=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&txe(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ub(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ub(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=nK();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=oK(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(nn.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),On())}isEqual(e){return this.batchId===e.batchId&&jm(this.mutations,e.mutations,(t,i)=>Qq(t,i))&&jm(this.baseMutations,e.baseMutations,(t,i)=>Qq(t,i))}};var KF=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var XF=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tr,An;function cK(n){if(n===void 0)return Il("GRPC error has no .code"),We.UNKNOWN;switch(n){case tr.OK:return We.OK;case tr.CANCELLED:return We.CANCELLED;case tr.UNKNOWN:return We.UNKNOWN;case tr.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case tr.INTERNAL:return We.INTERNAL;case tr.UNAVAILABLE:return We.UNAVAILABLE;case tr.UNAUTHENTICATED:return We.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case tr.NOT_FOUND:return We.NOT_FOUND;case tr.ALREADY_EXISTS:return We.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return We.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case tr.ABORTED:return We.ABORTED;case tr.OUT_OF_RANGE:return We.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return We.UNIMPLEMENTED;case tr.DATA_LOSS:return We.DATA_LOSS;default:return $t(39323,{code:n})}}(An=tr||(tr={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";var nxe=null;function ixe(){return new TextEncoder}var rxe=new wl([4294967295,4294967295],0);function e7(n){let e=ixe().encode(n),t=new lF;return t.update(e),new Uint8Array(t.digest())}function t7(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wl([t,i],0),new wl([r,s],0)]}var YF=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new cf(`Invalid padding: ${t}`);if(i<0)throw new cf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new cf(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new cf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wl.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(wl.fromNumber(i)));return r.compare(rxe)===1&&(r=new wl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=e7(e),[i,r]=t7(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);if(!this.we(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=e7(e),[i,r]=t7(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},cf=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bI=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,bb.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(nn.min(),r,new $i(En),od(),On())}},bb=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,On(),On(),On())}};var Lm=class{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}},xI=class{constructor(e,t){this.targetId=e,this.Ce=t}},wI=class{constructor(e,t,i=Zr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},EI=class{constructor(){this.ve=0,this.Fe=n7(),this.Me=Zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=On(),t=On(),i=On();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:$t(38017,{changeType:s})}}),new bb(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=n7()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ai(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},QF=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=od(),this.Je=cI(),this.He=cI(),this.Ye=new $i(En)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:$t(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,r)=>{this.rt(r)&&t(r)})}st(e){let t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){let s=r.target;if(GF(s))if(i===0){let o=new Vt(s.path);this.et(t,o,ba.newNoDocument(o,nn.min()))}else Ai(i===1,20013,{expectedCount:i});else{let o=this._t(t);if(o!==i){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}nxe?.lt((function(u,d,h,f,g){let v={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},_=d.unchangedNames;return _&&(v.bloomFilter={applied:g===0,hashCount:_?.hashCount??0,bitmapLength:_?.bits?.bitmap?.length??0,padding:_?.bits?.padding??0,mightContain:b=>f?.mightContain(b)??!1}),v})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=Al(i).toUint8Array()}catch(c){if(c instanceof _I)return db("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new YF(o,r,s)}catch(c){return db(c instanceof cf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){let i=this.Ge.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),r++)}),r}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&GF(a.target)){let c=new Vt(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ba.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let i=On();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let r=new bI(e,t,this.Ye,this.je,i);return this.je=od(),this.Je=cI(),this.He=cI(),this.Ye=new $i(En),r}Xe(e,t){if(!this.rt(e))return;let i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new EI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sr(En),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sr(En),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ot("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new EI),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function cI(){return new $i(Vt.comparator)}function n7(){return new $i(Vt.comparator)}var sxe={asc:"ASCENDING",desc:"DESCENDING"},oxe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},axe={and:"AND",or:"OR"},JF=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ZF(n,e){return n.useProto3Json||zI(e)?e:{value:e}}function cxe(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lxe(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fm(n){return Ai(!!n,49232),nn.fromTimestamp((function(t){let i=Cl(t);return new gs(i.seconds,i.nanos)})(n))}function uxe(n,e){return e2(n,e).canonicalString()}function e2(n,e){let t=(function(r){return new pr(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lK(n){let e=pr.fromString(n);return Ai(pK(e),10190,{key:e.toString()}),e}function yF(n,e){let t=lK(e);if(t.get(1)!==n.databaseId.projectId)throw new Ct(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ct(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Vt(dK(t))}function uK(n,e){return uxe(n.databaseId,e)}function dxe(n){let e=lK(n);return e.length===4?pr.emptyPath():dK(e)}function i7(n){return new pr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dK(n){return Ai(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hxe(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$t(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Ai(u===void 0||typeof u=="string",58123),Zr.fromBase64String(u||"")):(Ai(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Zr.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?We.UNKNOWN:cK(l.code);return new Ct(u,l.message||"")})(o);t=new wI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=yF(n,i.document.name),s=Fm(i.document.updateTime),o=i.document.createTime?Fm(i.document.createTime):nn.min(),a=new Sl({mapValue:{fields:i.document.fields}}),c=ba.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new Lm(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=yF(n,i.document),s=i.readTime?Fm(i.readTime):nn.min(),o=ba.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Lm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=yF(n,i.document),s=i.removedTargetIds||[];t=new Lm([],s,r,null)}else{if(!("filter"in e))return $t(11601,{Rt:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new XF(r,s),a=i.targetId;t=new xI(a,o)}}return t}function fxe(n,e){return{documents:[uK(n,e.path)]}}function pxe(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uK(n,r);let s=(function(l){if(l.length!==0)return fK(cc.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:Nm(h.field),direction:_xe(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=ZF(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:r}}function mxe(n){let e=dxe(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Ai(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=hK(d);return h instanceof cc&&X7(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(g){return new qm(km(g.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(g.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,zI(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,f=d.values||[];return new $m(f,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,f=d.values||[];return new $m(f,h)})(t.endAt)),U0e(e,r,o,s,a,"F",c,l)}function gxe(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hK(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=km(t.unaryFilter.field);return mr.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=km(t.unaryFilter.field);return mr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=km(t.unaryFilter.field);return mr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=km(t.unaryFilter.field);return mr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $t(61313);default:return $t(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mr.create(km(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $t(58110);default:return $t(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return cc.create(t.compositeFilter.filters.map(i=>hK(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $t(1026)}})(t.compositeFilter.op))})(n):$t(30097,{filter:n})}function _xe(n){return sxe[n]}function yxe(n){return oxe[n]}function vxe(n){return axe[n]}function Nm(n){return{fieldPath:n.canonicalString()}}function km(n){return va.fromServerFormat(n.fieldPath)}function fK(n){return n instanceof mr?(function(t){if(t.op==="=="){if(Wq(t.value))return{unaryFilter:{field:Nm(t.field),op:"IS_NAN"}};if(Gq(t.value))return{unaryFilter:{field:Nm(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wq(t.value))return{unaryFilter:{field:Nm(t.field),op:"IS_NOT_NAN"}};if(Gq(t.value))return{unaryFilter:{field:Nm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nm(t.field),op:yxe(t.op),value:t.value}}})(n):n instanceof cc?(function(t){let i=t.getFilters().map(r=>fK(r));return i.length===1?i[0]:{compositeFilter:{op:vxe(t.op),filters:i}}})(n):$t(54877,{filter:n})}function pK(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var xb=class n{constructor(e,t,i,r,s=nn.min(),o=nn.min(),a=Zr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t2=class{constructor(e){this.yt=e}};function bxe(n){let e=mxe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?WF(e,e.limit,"L"):e}var SI=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wi(e.integerValue));else if("doubleValue"in e){let i=wi(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),mI(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Cl(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Al(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?q7(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):$7(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):$t(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};this.Ft(t,55);for(let r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=pb,s=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(wi(s)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){let i=e.values||[];this.Ft(t,50);for(let r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Vt.fromName(e).path.forEach(i=>{this.Ft(t,60),this.Ut(i,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};SI.Kt=new SI;var n2=class{constructor(){this.Cn=new i2}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(hf.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(hf.min())}updateCollectionGroup(e,t,i){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}},i2=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Sr(pr.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Sr(pr.comparator)).toArray()}};var yZe=new Uint8Array(0);var r7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mK=41943040,Mo=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(mK,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);var wb=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var s7="LruGarbageCollector",xxe=1048576;function o7([n,e],[t,i]){let r=En(n,t);return r===0?En(e,i):r}var r2=class{constructor(e){this.Ir=e,this.buffer=new Sr(o7),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();o7(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},s2=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ot(s7,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ng(t)?ot(s7,"Ignoring IndexedDB error during garbage collection: ",t):await BI(t)}await this.Vr(3e5)})}},o2=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ce.resolve(eV.ce);let i=new r2(t);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(r7)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r7):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Rm()<=pn.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function wxe(n,e){return new o2(n,e)}var a2=class{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ba.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var c2=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var l2=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ub(i.mutation,r,of.empty(),gs.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,On()).next(()=>i))}getLocalViewOfDocuments(e,t,i=On()){let r=af();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=sb();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=af();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,On()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=od(),o=cb(),a=(function(){return cb()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Jm)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),ub(u.mutation,l,u.mutation.getFieldMask(),gs.now())):o.set(l.key,of.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>a.set(l,new c2(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let i=cb(),r=new $i((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||of.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||On()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=nK();u.forEach(h=>{if(!s.has(h)){let f=oK(t.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ce.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return Vt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B0e(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ce.resolve(af()),a=hb,c=s;return o.next(l=>Ce.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ce.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,On())).next(u=>({batchId:a,changes:W0e(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Vt(t)).next(i=>{let r=sb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=sb();return this.indexManager.getCollectionParents(e,s).next(a=>Ce.forEach(a,c=>{let l=(function(d,h){return new Km(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,ba.newInvalidDocument(u)))});let a=sb();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&ub(u.mutation,l,of.empty(),gs.now()),GI(t,l)&&(a=a.insert(c,l))}),a})}};var u2=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Fm(r.createTime)}})(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:bxe(r.bundledQuery),readTime:Fm(r.readTime)}})(t)),Ce.resolve()}};var d2=class{constructor(){this.overlays=new $i(Vt.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){let i=af();return Ce.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.St(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),Ce.resolve()}getOverlaysForCollection(e,t,i){let r=af(),s=t.length+1,o=new Vt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new $i((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=af(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=af(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Ce.resolve(a)}St(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new KF(t,i));let s=this.qr.get(t);s===void 0&&(s=On(),this.qr.set(t,s)),this.qr.set(t,s.add(i.key))}};var h2=class{constructor(){this.sessionToken=Zr.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}};var Eb=class{constructor(){this.Qr=new Sr(nr.$r),this.Ur=new Sr(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new nr(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new nr(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){let t=new Vt(new pr([])),i=new nr(t,e),r=new nr(t,e+1),s=[];return this.Ur.forEachInRange([i,r],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Vt(new pr([])),i=new nr(t,e),r=new nr(t,e+1),s=On();return this.Ur.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nr(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nr=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Vt.comparator(e.key,t.key)||En(e.Yr,t.Yr)}static Kr(e,t){return En(e.Yr,t.Yr)||Vt.comparator(e.key,t.key)}};var f2=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sr(nr.$r)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new qF(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Zr=this.Zr.add(new nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.ei(i),s=r<0?0:r;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?w0e:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nr(t,0),r=new nr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],o=>{let a=this.Xr(o.Yr);s.push(a)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Sr(En);return t.forEach(r=>{let s=new nr(r,0),o=new nr(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{i=i.add(a.Yr)})}),Ce.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Vt.isDocumentKey(s)||(s=s.child(""));let o=new nr(new Vt(s),0),a=new Sr(En);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Yr)),!0)},o),Ce.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(i=>{let r=this.Xr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ai(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Ce.forEach(t.mutations,r=>{let s=new nr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new nr(t,0),r=this.Zr.firstAfterOrEqual(i);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var p2=class{constructor(e){this.ri=e,this.docs=(function(){return new $i(Vt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Ce.resolve(i?i.document.mutableCopy():ba.newInvalidDocument(t))}getEntries(e,t){let i=od();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ba.newInvalidDocument(r))}),Ce.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=od(),o=t.path,a=new Vt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||v0e(y0e(u),i)<=0||(r.has(u.key)||GI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,i,r){$t(9500)}ii(e,t){return Ce.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new m2(this)}getSize(e){return Ce.resolve(this.size)}},m2=class extends a2{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var g2=class{constructor(e){this.persistence=e,this.si=new Ml(t=>iV(t),rV),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.oi=0,this._i=new Eb,this.targetCount=0,this.ai=wb.ur()}forEachTarget(e,t){return this.si.forEach((i,r)=>t(r)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new wb(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ce.waitFor(s).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return Ce.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Ce.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return Ce.resolve(i)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}};var TI=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new eV(0),this.li=!1,this.li=!0,this.hi=new h2,this.referenceDelegate=e(this),this.Pi=new g2(this),this.indexManager=new n2,this.remoteDocumentCache=(function(r){return new p2(r)})(i=>this.referenceDelegate.Ti(i)),this.serializer=new t2(t),this.Ii=new u2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new f2(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ot("MemoryPersistence","Starting transaction:",e);let r=new _2(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,t){return Ce.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}},_2=class extends DF{constructor(e){super(),this.currentSequenceNumber=e}},y2=class n{constructor(e){this.persistence=e,this.Ri=new Eb,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw $t(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Ce.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(r=>this.fi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,i=>{let r=Vt.fromPath(i);return this.gi(e,r).next(s=>{s||t.removeEntry(r,nn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},II=class n{constructor(e,t){this.persistence=e,this.pi=new Ml(i=>E0e(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=wxe(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?Ce.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,t).next(a=>{a||(i++,s.removeEntry(o,nn.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uI(e.data.value)),t}br(e,t,i){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.pi.get(t);return Ce.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var v2=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=On(),r=On();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var b2=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var x2=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return u$()?8:x0e(oo())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new b2;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(Rm()<=pn.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",Pm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(Rm()<=pn.DEBUG&&ot("QueryEngine","Query:",Pm(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Rm()<=pn.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",Pm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oc(t))):Ce.resolve())}ys(e,t){if(Xq(t))return Ce.resolve(null);let i=oc(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=WF(t,null,"F"),i=oc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=On(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,WF(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,i,r){return Xq(t)||r.isEqual(nn.min())?Ce.resolve(null):this.ps.getDocuments(e,i).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,i,r)?Ce.resolve(null):(Rm()<=pn.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pm(t)),this.vs(e,o,t,_0e(r,hb)).next(a=>a))})}Ds(e,t){let i=new Sr(eK(e));return t.forEach((r,s)=>{GI(e,s)&&(i=i.add(s))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,i){return Rm()<=pn.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",Pm(t)),this.ps.getDocumentsMatchingQuery(e,t,hf.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var oV="LocalStore",Exe=3e8,w2=class{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new $i(En),this.xs=new Ml(s=>iV(s),rV),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Sxe(n,e,t,i){return new w2(n,e,t,i)}async function gK(n,e){let t=Mn(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=On();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function _K(n){let e=Mn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Txe(n,e){let t=Mn(n),i=e.snapshotVersion,r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Zr.EMPTY_BYTE_STRING,nn.min()).withLastLimboFreeSnapshotVersion(nn.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),(function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Exe?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(h,f,u)&&a.push(t.Pi.updateTargetData(s,f))});let c=od(),l=On();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Ixe(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!i.isEqual(nn.min())){let u=t.Pi.getLastRemoteSnapshotVersion(s).next(d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ce.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=r,s))}function Ixe(n,e,t){let i=On(),r=On();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=od();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(nn.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ot(oV,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:r}})}function Cxe(n,e){let t=Mn(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Pi.getTargetData(i,e).next(s=>s?(r=s,Ce.resolve(r)):t.Pi.allocateTargetId(i).next(o=>(r=new xb(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function E2(n,e,t){let i=Mn(n),r=i.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ng(o))throw o;ot(oV,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function a7(n,e,t){let i=Mn(n),r=nn.min(),s=On();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=Mn(c),h=d.xs.get(u);return h!==void 0?Ce.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)})(i,o,oc(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,e,t?r:nn.min(),t?s:On())).next(a=>(Axe(i,H0e(e),a),{documents:a,Qs:s})))}function Axe(n,e,t){let i=n.Os.get(e)||nn.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Os.set(e,i)}var CI=class{constructor(){this.activeTargetIds=K0e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var S2=class{constructor(){this.Mo=new CI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CI,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var T2=class{Oo(e){}shutdown(){}};var c7="ConnectivityMonitor",AI=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(c7,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ot(c7,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lI=null;function I2(){return lI===null?lI=(function(){return 268435456+Math.round(2147483648*Math.random())})():lI++,"0x"+lI.toString(16)}var vF="RestConnection",Mxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},C2=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===PF?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,s){let o=I2(),a=this.zo(e,t.toUriEncodedString());ot(vF,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,s);let{host:l}=new URL(a),u=jv(l);return this.Jo(e,a,c,i,u).then(d=>(ot(vF,`Received RPC '${e}' ${o}: `,d),d),d=>{throw db(vF,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Ho(e,t,i,r,s,o){return this.Go(e,t,i,r,s)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tg})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,t){let i=Mxe[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}};var A2=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Qr="WebChannelConnection",M2=class extends C2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,s){let o=I2();return new Promise((a,c)=>{let l=new uF;l.setWithCredentials(!0),l.listenOnce(dF.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rb.NO_ERROR:let d=l.getResponseJson();ot(Qr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case rb.TIMEOUT:ot(Qr,`RPC '${e}' ${o} timed out`),c(new Ct(We.DEADLINE_EXCEEDED,"Request time out"));break;case rb.HTTP_ERROR:let h=l.getStatus();if(ot(Qr,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let g=f?.error;if(g&&g.status&&g.message){let v=(function(b){let R=b.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(R)>=0?R:We.UNKNOWN})(g.status);c(new Ct(v,g.message))}else c(new Ct(We.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ct(We.UNAVAILABLE,"Connection failed."));break;default:$t(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ot(Qr,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);ot(Qr,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}T_(e,t,i){let r=I2(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pF(),a=fF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");ot(Qr,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.I_(d);let h=!1,f=!1,g=new A2({Yo:_=>{f?ot(Qr,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(h||(ot(Qr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),ot(Qr,`RPC '${e}' stream ${r} sending:`,_),d.send(_))},Zo:()=>d.close()}),v=(_,b,R)=>{_.listen(b,P=>{try{R(P)}catch(N){setTimeout(()=>{throw N},0)}})};return v(d,Dm.EventType.OPEN,()=>{f||(ot(Qr,`RPC '${e}' stream ${r} transport opened.`),g.o_())}),v(d,Dm.EventType.CLOSE,()=>{f||(f=!0,ot(Qr,`RPC '${e}' stream ${r} transport closed`),g.a_(),this.E_(d))}),v(d,Dm.EventType.ERROR,_=>{f||(f=!0,db(Qr,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),g.a_(new Ct(We.UNAVAILABLE,"The operation could not be completed")))}),v(d,Dm.EventType.MESSAGE,_=>{if(!f){let b=_.data[0];Ai(!!b,16349);let R=b,P=R?.error||R[0]?.error;if(P){ot(Qr,`RPC '${e}' stream ${r} received error:`,P);let N=P.status,U=(function(w){let y=tr[w];if(y!==void 0)return cK(y)})(N),O=P.message;U===void 0&&(U=We.INTERNAL,O="Unknown error status: "+N+" with message "+P.message),f=!0,g.a_(new Ct(U,O)),d.close()}else ot(Qr,`RPC '${e}' stream ${r} received:`,b),g.u_(b)}}),v(a,hF.STAT_EVENT,_=>{_.stat===oI.PROXY?ot(Qr,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===oI.NOPROXY&&ot(Qr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function bF(){return typeof document<"u"?document:null}function yK(n){return new JF(n,!0)}var MI=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ot("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var l7="PersistentStream",D2=class{constructor(e,t,i,r,s,o,a,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Il(t.toString()),Il("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===t&&this.G_(i,r)},i=>{e(()=>{let r=new Ct(We.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,t){let i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ot(l7,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ot(l7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},R2=class extends D2{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=hxe(this.serializer,e),i=(function(s){if(!("targetChange"in s))return nn.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?nn.min():o.readTime?Fm(o.readTime):nn.min()})(e);return this.listener.H_(t,i)}Y_(e){let t={};t.database=i7(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=GF(c)?{documents:fxe(s,c)}:{query:pxe(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lxe(s,o.resumeToken);let l=ZF(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(nn.min())>0){a.readTime=cxe(s,o.snapshotVersion.toTimestamp());let l=ZF(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=gxe(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){let t={};t.database=i7(this.serializer),t.removeTarget=e,this.q_(t)}};var P2=class{},N2=class extends P2{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ct(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,e2(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(We.UNKNOWN,s.toString())})}Ho(e,t,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,e2(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(We.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},k2=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Il(t),this.aa=!1):ot("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Zm="RemoteStore",O2=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{Ab(this)&&(ot(Zm,"Restarting streams for network reachability change."),await(async function(c){let l=Mn(c);l.Ea.add(4),await Cb(l),l.Ra.set("Unknown"),l.Ea.delete(4),await WI(l)})(this))})}),this.Ra=new k2(i,r)}};async function WI(n){if(Ab(n))for(let e of n.da)await e(!0)}async function Cb(n){for(let e of n.da)await e(!1)}function vK(n,e){let t=Mn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uV(t)?lV(t):ig(t).O_()&&cV(t,e))}function aV(n,e){let t=Mn(n),i=ig(t);t.Ia.delete(e),i.O_()&&bK(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ab(t)&&t.Ra.set("Unknown"))}function cV(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nn.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ig(n).Y_(e)}function bK(n,e){n.Va.Ue(e),ig(n).Z_(e)}function lV(n){n.Va=new QF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ig(n).start(),n.Ra.ua()}function uV(n){return Ab(n)&&!ig(n).x_()&&n.Ia.size>0}function Ab(n){return Mn(n).Ea.size===0}function xK(n){n.Va=void 0}async function Dxe(n){n.Ra.set("Online")}async function Rxe(n){n.Ia.forEach((e,t)=>{cV(n,e)})}async function Pxe(n,e){xK(n),uV(n)?(n.Ra.ha(e),lV(n)):n.Ra.set("Unknown")}async function Nxe(n,e,t){if(n.Ra.set("Online"),e instanceof wI&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(i){ot(Zm,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await u7(n,i)}else if(e instanceof Lm?n.Va.Ze(e):e instanceof xI?n.Va.st(e):n.Va.tt(e),!t.isEqual(nn.min()))try{let i=await _K(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(Zr.EMPTY_BYTE_STRING,u.snapshotVersion)),bK(s,c);let d=new xb(u.target,c,l,u.sequenceNumber);cV(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){ot(Zm,"Failed to raise snapshot:",i),await u7(n,i)}}async function u7(n,e,t){if(!ng(e))throw e;n.Ea.add(1),await Cb(n),n.Ra.set("Offline"),t||(t=()=>_K(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ot(Zm,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await WI(n)})}async function d7(n,e){let t=Mn(n);t.asyncQueue.verifyOperationInProgress(),ot(Zm,"RemoteStore received new credentials");let i=Ab(t);t.Ea.add(3),await Cb(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await WI(t)}async function kxe(n,e){let t=Mn(n);e?(t.Ea.delete(2),await WI(t)):e||(t.Ea.add(2),await Cb(t),t.Ra.set("Unknown"))}function ig(n){return n.ma||(n.ma=(function(t,i,r){let s=Mn(t);return s.sa(),new R2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Xo:Dxe.bind(null,n),t_:Rxe.bind(null,n),r_:Pxe.bind(null,n),H_:Nxe.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),uV(n)?lV(n):n.Ra.set("Unknown")):(await n.ma.stop(),xK(n))})),n.ma}var L2=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new rd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function wK(n,e){if(Il("AsyncQueue",`${e}: ${n}`),ng(n))return new Ct(We.UNAVAILABLE,`${e}: ${n}`);throw n}var DI=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Vt.comparator(t.key,i.key):(t,i)=>Vt.comparator(t.key,i.key),this.keyedMap=sb(),this.sortedSet=new $i(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var RI=class{constructor(){this.ga=new $i(Vt.comparator)}track(e){let t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$t(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}},eg=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,DI.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var F2=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},V2=class{constructor(){this.queries=h7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){let r=Mn(t),s=r.queries;r.queries=h7(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(i)})})(this,new Ct(We.ABORTED,"Firestore shutting down"))}};function h7(){return new Ml(n=>Z7(n),jI)}async function Oxe(n,e){let t=Mn(n),i=3,r=e.query,s=t.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new F2,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await t.onListen(r,!0);break;case 1:s.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=wK(o,`Initialization of query '${Pm(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&dV(t)}async function Lxe(n,e){let t=Mn(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Fxe(n,e){let t=Mn(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(r)&&(i=!0);o.wa=r}}i&&dV(t)}function Vxe(n,e,t){let i=Mn(n),r=i.queries.get(e);if(r)for(let s of r.Sa)s.onError(t);i.queries.delete(e)}function dV(n){n.Ca.forEach(e=>{e.next()})}var U2,f7;(f7=U2||(U2={})).Ma="default",f7.Cache="cache";var B2=class{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new eg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=eg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==U2.Cache}};var PI=class{constructor(e){this.key=e}},NI=class{constructor(e){this.key=e}},z2=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=On(),this.mutatedKeys=On(),this.eu=eK(e),this.tu=new DI(this.eu)}get nu(){return this.Ya}ru(e,t){let i=t?t.iu:new RI,r=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=GI(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?g!==v&&(i.track({type:3,doc:f}),_=!0):this.su(h,f)||(i.track({type:2,doc:f}),_=!0,(c&&this.eu(f,c)>0||l&&this.eu(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),_=!0):h&&!f&&(i.track({type:1,doc:h}),_=!0,(c||l)&&(a=!0)),_&&(f?(o=o.add(f),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{tu:o,iu:i,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((u,d)=>(function(f,g){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t(20277,{Rt:_})}};return v(f)-v(g)})(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(i),r=r??!1;let a=t&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new eg(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=On(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});let t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new NI(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new PI(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=On();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return eg.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},hV="SyncEngine",H2=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},j2=class{constructor(e){this.key=e,this.hu=!1}},G2=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ml(a=>Z7(a),jI),this.Iu=new Map,this.Eu=new Set,this.du=new $i(Vt.comparator),this.Au=new Map,this.Ru=new Eb,this.Vu={},this.mu=new Map,this.fu=wb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function Uxe(n,e,t=!0){let i=CK(n),r,s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await EK(i,e,t,!0),r}async function Bxe(n,e){let t=CK(n);await EK(t,e,!0,!1)}async function EK(n,e,t,i){let r=await Cxe(n.localStore,oc(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await zxe(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&vK(n.remoteStore,r),a}async function zxe(n,e,t,i,r){n.pu=(d,h,f)=>(async function(v,_,b,R){let P=_.view.ru(b);P.Cs&&(P=await a7(v.localStore,_.query,!1).then(({documents:S})=>_.view.ru(S,P)));let N=R&&R.targetChanges.get(_.targetId),U=R&&R.targetMismatches.get(_.targetId)!=null,O=_.view.applyChanges(P,v.isPrimaryClient,N,U);return m7(v,_.targetId,O.au),O.snapshot})(n,d,h,f);let s=await a7(n.localStore,e,!0),o=new z2(e,s.Qs),a=o.ru(s.documents),c=bb.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);m7(n,t,l.au);let u=new H2(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function Hxe(n,e,t){let i=Mn(n),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(o=>!jI(o,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await E2(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&aV(i.remoteStore,r.targetId),W2(i,r.targetId)}).catch(BI)):(W2(i,r.targetId),await E2(i.localStore,r.targetId,!0))}async function jxe(n,e){let t=Mn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),aV(t.remoteStore,i.targetId))}async function SK(n,e){let t=Mn(n);try{let i=await Txe(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Au.get(s);o&&(Ai(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ai(o.hu,14607):r.removedDocuments.size>0&&(Ai(o.hu,42227),o.hu=!1))}),await IK(t,i,e)}catch(i){await BI(i)}}function p7(n,e,t){let i=Mn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=Mn(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Sa)h.va(a)&&(l=!0)}),l&&dV(c)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Gxe(n,e,t){let i=Mn(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Au.get(e),s=r&&r.key;if(s){let o=new $i(Vt.comparator);o=o.insert(s,ba.newNoDocument(s,nn.min()));let a=On().add(s),c=new bI(nn.min(),new Map,new $i(En),o,a);await SK(i,c),i.du=i.du.remove(s),i.Au.delete(e),fV(i)}else await E2(i.localStore,e,!1).then(()=>W2(i,e,t)).catch(BI)}function W2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||TK(n,i)})}function TK(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(aV(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),fV(n))}function m7(n,e,t){for(let i of t)i instanceof PI?(n.Ru.addReference(i.key,e),Wxe(n,i)):i instanceof NI?(ot(hV,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||TK(n,i.key)):$t(19791,{wu:i})}function Wxe(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ot(hV,"New document in limbo: "+t),n.Eu.add(i),fV(n))}function fV(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Vt(pr.fromString(e)),i=n.fu.next();n.Au.set(i,new j2(t)),n.du=n.du.insert(t,i),vK(n.remoteStore,new xb(oc(sV(t.path)),i,"TargetPurposeLimboResolution",eV.ce))}}async function IK(n,e,t){let i=Mn(n),r=[],s=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,c)=>{o.push(i.pu(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient){let u=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;i.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){r.push(l);let u=v2.As(c.targetId,l);s.push(u)}}))}),await Promise.all(o),i.Pu.H_(r),await(async function(c,l){let u=Mn(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ce.forEach(l,h=>Ce.forEach(h.Es,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>Ce.forEach(h.ds,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ng(d))throw d;ot(oV,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.Ms.get(h),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);u.Ms=u.Ms.insert(h,v)}}})(i.localStore,s))}async function $xe(n,e){let t=Mn(n);if(!t.currentUser.isEqual(e)){ot(hV,"User change. New user:",e.toKey());let i=await gK(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Ct(We.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await IK(t,i.Ls)}}function qxe(n,e){let t=Mn(n),i=t.Au.get(e);if(i&&i.hu)return On().add(i.key);{let r=On(),s=t.Iu.get(e);if(!s)return r;for(let o of s){let a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function CK(n){let e=Mn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qxe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gxe.bind(null,e),e.Pu.H_=Fxe.bind(null,e.eventManager),e.Pu.yu=Vxe.bind(null,e.eventManager),e}var AK=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yK(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return Sxe(this.persistence,new x2,t.initialUser,this.serializer)}Cu(t){return new TI(y2.mi,this.serializer)}Du(t){return new S2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),$2=class extends AK{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ai(this.persistence.referenceDelegate instanceof II,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new s2(i,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new TI(i=>II.mi(i,t),this.serializer)}};var Kxe=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p7(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$xe.bind(null,this.syncEngine),await kxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new V2})()}createDatastore(t){let i=yK(t.databaseInfo.databaseId),r=(function(o){return new M2(o)})(t.databaseInfo);return(function(o,a,c,l){return new N2(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new O2(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>p7(this.syncEngine,i,0),(function(){return AI.v()?new AI:new T2})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new G2(s,o,a,c,l,u);return d&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){let r=Mn(i);ot(Zm,"RemoteStore shutting down."),r.Ea.add(5),await Cb(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var q2=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Il("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ad="FirestoreClient",K2=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Jr.UNAUTHENTICATED,this.clientId=fI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{ot(ad,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ot(ad,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=wK(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function xF(n,e){n.asyncQueue.verifyOperationInProgress(),ot(ad,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await gK(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function g7(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Xxe(n);ot(ad,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>d7(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>d7(e.remoteStore,r)),n._onlineComponents=e}async function Xxe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ot(ad,"Using user provided OfflineComponentProvider");try{await xF(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===We.FAILED_PRECONDITION||r.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;db("Error using user provided cache. Falling back to memory cache: "+t),await xF(n,new AK)}}else ot(ad,"Using default OfflineComponentProvider"),await xF(n,new $2(void 0));return n._offlineComponents}async function Yxe(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ot(ad,"Using user provided OnlineComponentProvider"),await g7(n,n._uninitializedComponentsProvider._online)):(ot(ad,"Using default OnlineComponentProvider"),await g7(n,new Kxe))),n._onlineComponents}async function _7(n){let e=await Yxe(n),t=e.eventManager;return t.onListen=Uxe.bind(null,e.syncEngine),t.onUnlisten=Hxe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Bxe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jxe.bind(null,e.syncEngine),t}function MK(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var y7=new Map;var Qxe="firestore.googleapis.com",v7=!0,kI=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qxe,this.ssl=v7}else this.host=e.host,this.ssl=e.ssl??v7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mK;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xxe)throw new Ct(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p0e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MK(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ct(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ct(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ct(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},X2=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new EF;switch(i.type){case"firstParty":return new IF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ct(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=y7.get(t);i&&(ot("ComponentProvider","Removing Datastore"),y7.delete(t),i.terminate())})(this),Promise.resolve()}};var OI=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tl=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Y2(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Tb(t,n._jsonSchema))return new n(e,i||null,new Vt(pr.fromString(t.referencePath)))}};Tl._jsonSchemaVersion="firestore/documentReference/1.0",Tl._jsonSchema={type:ir("string",Tl._jsonSchemaVersion),referencePath:ir("string")};var Y2=class n extends OI{constructor(e,t,i){super(e,t,sV(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tl(this.firestore,null,new Vt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var b7="AsyncQueue",LI=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MI(this,"async_queue_retry"),this._c=()=>{let i=bF();i&&ot(b7,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let t=bF();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=bF();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new rd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ng(e))throw e;ot(b7,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Il("INTERNAL UNHANDLED ERROR: ",x7(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=L2.createAndSchedule(this,e,t,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&$t(47125,{Pc:x7(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function x7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function w7(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Sb=class extends X2{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new LI,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new LI(e),this._firestoreClient=void 0,await e}}};function Jxe(n){if(n._terminated)throw new Ct(We.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Zxe(n),n._firestoreClient}function Zxe(n){let e=n._freezeSettings(),t=(function(r,s,o,a){return new RF(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,MK(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new K2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){let s=r?._online.build();return{_offline:r?._offline.build(s),_online:s}})(n._componentsProvider))}var Vm=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Zr.fromBase64String(e))}catch(t){throw new Ct(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tb(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Vm._jsonSchemaVersion="firestore/bytes/1.0",Vm._jsonSchema={type:ir("string",Vm._jsonSchemaVersion),bytes:ir("string")};var FI=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ct(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new va(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Um=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ct(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ct(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Tb(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Um._jsonSchemaVersion="firestore/geoPoint/1.0",Um._jsonSchema={type:ir("string",Um._jsonSchemaVersion),latitude:ir("number"),longitude:ir("number")};var Bm=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tb(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ct(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bm._jsonSchemaVersion="firestore/vectorValue/1.0",Bm._jsonSchema={type:ir("string",Bm._jsonSchemaVersion),vectorValues:ir("object")};var ewe=new RegExp("[~\\*/\\[\\]]");function twe(n,e,t){if(e.search(ewe)>=0)throw E7(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new FI(...e.split("."))._internalPath}catch{throw E7(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function E7(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ct(We.INVALID_ARGUMENT,a+n+c)}var VI=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Q2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(DK("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Q2=class extends VI{data(){return super.data()}};function DK(n,e){return typeof e=="string"?twe(n,e):e instanceof FI?e._internalPath:e._delegate._internalPath}function nwe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var J2=class{convertValue(e,t="none"){switch(sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $t(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Ib(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){let t=e.fields?.[pb].arrayValue?.values?.map(i=>wi(i.doubleValue));return new Bm(t)}convertGeoPoint(e){return new Um(wi(e.latitude),wi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=HI(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fb(e));default:return null}}convertTimestamp(e){let t=Cl(e);return new gs(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=pr.fromString(e);Ai(pK(i),9688,{name:e});let r=new yI(i.get(1),i.get(3)),s=new Vt(i.popFirst(5));return r.isEqual(t)||Il(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var lf=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uf=class n extends VI{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(DK("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};uf._jsonSchemaVersion="firestore/documentSnapshot/1.0",uf._jsonSchema={type:ir("string",uf._jsonSchemaVersion),bundleSource:ir("string","DocumentSnapshot"),bundleName:ir("string"),bundle:ir("string")};var zm=class extends uf{data(e={}){return super.data(e)}},Hm=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new zm(this._firestore,this._userDataWriter,i.key,i,new lf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ct(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new zm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new zm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:iwe(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function iwe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t(61501,{type:n})}}Hm._jsonSchemaVersion="firestore/querySnapshot/1.0",Hm._jsonSchema={type:ir("string",Hm._jsonSchemaVersion),bundleSource:ir("string","QuerySnapshot"),bundleName:ir("string"),bundle:ir("string")};var UI=class extends J2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vm(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tl(this.firestore,null,t)}};function RK(n,...e){n=Ju(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||w7(e[i])||(t=e[i++]);let r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(w7(e[i])){let c=e[i];e[i]=c.next?.bind(c),e[i+1]=c.error?.bind(c),e[i+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Tl)o=gF(n.firestore,Sb),a=sV(n._key.path),s={next:c=>{e[i]&&e[i](rwe(o,n,c))},error:e[i+1],complete:e[i+2]};else{let c=gF(n,OI);o=gF(c.firestore,Sb),a=c._query;let l=new UI(o);s={next:u=>{e[i]&&e[i](new Hm(o,l,c,u))},error:e[i+1],complete:e[i+2]},nwe(n._query)}return(function(l,u,d,h){let f=new q2(h),g=new B2(u,f,d);return l.asyncQueue.enqueueAndForget(async()=>Oxe(await _7(l),g)),()=>{f.Nu(),l.asyncQueue.enqueueAndForget(async()=>Lxe(await _7(l),g))}})(Jxe(o),a,r,s)}function rwe(n,e,t){let i=t.docs.get(e._key),r=new UI(n);return new uf(n,r,e._key,i,new lf(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){tg=r})(Cm),ed(new _a("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Sb(new SF(i.getProvider("auth-internal")),new CF(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ct(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yI(l.options.projectId,u)})(o,r),o);return s=re({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ml(Oq,Lq,e),ml(Oq,Lq,"esm2020")})();var $I=function(){return $I=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$I.apply(this,arguments)};var owe={includeMetadataChanges:!1};function pV(n,e){return e===void 0&&(e=owe),new gt(function(t){var i=RK(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function PK(n){return pV(n,{includeMetadataChanges:!0})}function NK(n,e){return e===void 0&&(e={}),PK(n).pipe(pt(function(t){return mV(t,e)}))}function mV(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:$I($I({},i),(t={},t[e.idField]=n.id,t))}function kK(n){return pV(n,{includeMetadataChanges:!0}).pipe(pt(function(e){return e.docs}))}function OK(n,e){return e===void 0&&(e={}),kK(n).pipe(pt(function(t){return t.map(function(i){return mV(i,e)})}))}var LK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FK={};var Dl,gV;(function(){var n;function e(S,w){function y(){}y.prototype=w.prototype,S.D=w.prototype,S.prototype=new y,S.prototype.constructor=S,S.C=function(x,T,M){for(var C=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)C[oe-2]=arguments[oe];return w.prototype[T].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,w,y){y||(y=0);var x=Array(16);if(typeof w=="string")for(var T=0;16>T;++T)x[T]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(T=0;16>T;++T)x[T]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=S.g[0],y=S.g[1],T=S.g[2];var M=S.g[3],C=w+(M^y&(T^M))+x[0]+3614090360&4294967295;w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[2]+606105819&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[3]+3250441966&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[6]+2821735955&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[7]+4249261313&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[10]+4294925233&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[11]+2304563134&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[14]+2792965006&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[15]+1236535329&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(T^M&(y^T))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[11]+643717713&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[0]+3921069994&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[15]+3634488961&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[4]+3889429448&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[3]+4107603335&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[8]+1163531501&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[7]+1735328473&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[12]+2368359562&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(y^T^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[11]+1839030562&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[14]+4259657740&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[7]+4139469664&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[10]+3200236656&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[3]+3572445317&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[6]+76029189&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[15]+530742520&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[2]+3299628645&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(T^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[14]+2878612391&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[5]+4237533241&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[10]+4293915773&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[1]+2240044497&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[6]+2734768916&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[13]+1309151649&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[2]+718787259&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(T+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+M&4294967295}i.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var y=w-this.blockSize,x=this.B,T=this.h,M=0;M<w;){if(T==0)for(;M<=y;)r(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<w;)if(x[T++]=S.charCodeAt(M++),T==this.blockSize){r(this,x),T=0;break}}else for(;M<w;)if(x[T++]=S[M++],T==this.blockSize){r(this,x),T=0;break}}this.h=T,this.o+=w},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var y=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=y&255,y/=256;for(this.u(S),S=Array(16),w=y=0;4>w;++w)for(var x=0;32>x;x+=8)S[y++]=this.g[w]>>>x&255;return S};function s(S,w){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=w(S)}function o(S,w){this.h=w;for(var y=[],x=!0,T=S.length-1;0<=T;T--){var M=S[T]|0;x&&M==w||(y[T]=M,x=!1)}this.g=y}var a={};function c(S){return-128<=S&&128>S?s(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return _(l(-S));for(var w=[],y=1,x=0;S>=y;x++)w[x]=S/y|0,y*=4294967296;return new o(w,0)}function u(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return _(u(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=l(Math.pow(w,8)),x=d,T=0;T<S.length;T+=8){var M=Math.min(8,S.length-T),C=parseInt(S.substring(T,T+M),w);8>M?(M=l(Math.pow(w,M)),x=x.j(M).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),f=c(16777216);n=o.prototype,n.m=function(){if(v(this))return-_(this).m();for(var S=0,w=1,y=0;y<this.g.length;y++){var x=this.i(y);S+=(0<=x?x:4294967296+x)*w,w*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+_(this).toString(S);for(var w=l(Math.pow(S,6)),y=this,x="";;){var T=N(y,w).g;y=b(y,T.j(w));var M=((0<y.g.length?y.g[0]:y.h)>>>0).toString(S);if(y=T,g(y))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function v(S){return S.h==-1}n.l=function(S){return S=b(this,S),v(S)?-1:g(S)?0:1};function _(S){for(var w=S.g.length,y=[],x=0;x<w;x++)y[x]=~S.g[x];return new o(y,~S.h).add(h)}n.abs=function(){return v(this)?_(this):this},n.add=function(S){for(var w=Math.max(this.g.length,S.g.length),y=[],x=0,T=0;T<=w;T++){var M=x+(this.i(T)&65535)+(S.i(T)&65535),C=(M>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);x=C>>>16,M&=65535,C&=65535,y[T]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function b(S,w){return S.add(_(w))}n.j=function(S){if(g(this)||g(S))return d;if(v(this))return v(S)?_(this).j(_(S)):_(_(this).j(S));if(v(S))return _(this.j(_(S)));if(0>this.l(f)&&0>S.l(f))return l(this.m()*S.m());for(var w=this.g.length+S.g.length,y=[],x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var T=0;T<S.g.length;T++){var M=this.i(x)>>>16,C=this.i(x)&65535,oe=S.i(T)>>>16,Z=S.i(T)&65535;y[2*x+2*T]+=C*Z,R(y,2*x+2*T),y[2*x+2*T+1]+=M*Z,R(y,2*x+2*T+1),y[2*x+2*T+1]+=C*oe,R(y,2*x+2*T+1),y[2*x+2*T+2]+=M*oe,R(y,2*x+2*T+2)}for(x=0;x<w;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=w;x<2*w;x++)y[x]=0;return new o(y,0)};function R(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function P(S,w){this.g=S,this.h=w}function N(S,w){if(g(w))throw Error("division by zero");if(g(S))return new P(d,d);if(v(S))return w=N(_(S),w),new P(_(w.g),_(w.h));if(v(w))return w=N(S,_(w)),new P(_(w.g),w.h);if(30<S.g.length){if(v(S)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;0>=x.l(S);)y=U(y),x=U(x);var T=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!g(x);){var C=M.add(x);0>=C.l(S)&&(T=T.add(y),M=C),x=O(x,1),y=O(y,1)}return w=b(S,T.j(w)),new P(T,w)}for(T=d;0<=S.l(w);){for(y=Math.max(1,Math.floor(S.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=l(y),C=M.j(w);v(C)||0<C.l(S);)y-=x,M=l(y),C=M.j(w);g(M)&&(M=h),T=T.add(M),S=b(S,C)}return new P(T,S)}n.A=function(S){return N(this,S).h},n.and=function(S){for(var w=Math.max(this.g.length,S.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)&S.i(x);return new o(y,this.h&S.h)},n.or=function(S){for(var w=Math.max(this.g.length,S.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)|S.i(x);return new o(y,this.h|S.h)},n.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)^S.i(x);return new o(y,this.h^S.h)};function U(S){for(var w=S.g.length+1,y=[],x=0;x<w;x++)y[x]=S.i(x)<<1|S.i(x-1)>>>31;return new o(y,S.h)}function O(S,w){var y=w>>5;w%=32;for(var x=S.g.length-y,T=[],M=0;M<x;M++)T[M]=0<w?S.i(M+y)>>>w|S.i(M+y+1)<<32-w:S.i(M+y);return new o(T,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gV=FK.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Dl=FK.Integer=o}).apply(typeof LK<"u"?LK:typeof self<"u"?self:typeof window<"u"?window:{});var qI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rl={};var _V,awe,rg,yV,Mb,KI,vV,bV,xV;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,E,A){return p==Array.prototype||p==Object.prototype||(p[E]=A.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof qI=="object"&&qI];for(var E=0;E<p.length;++E){var A=p[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function r(p,E){if(E)e:{var A=i;p=p.split(".");for(var L=0;L<p.length-1;L++){var X=p[L];if(!(X in A))break e;A=A[X]}p=p[p.length-1],L=A[p],E=E(L),E!=L&&E!=null&&e(A,p,{configurable:!0,writable:!0,value:E})}}function s(p,E){p instanceof String&&(p+="");var A=0,L=!1,X={next:function(){if(!L&&A<p.length){var ie=A++;return{value:E(ie,p[ie]),done:!1}}return L=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}r("Array.prototype.values",function(p){return p||function(){return s(this,function(E,A){return A})}});var o=o||{},a=this||self;function c(p){var E=typeof p;return E=E!="object"?E:p?Array.isArray(p)?"array":E:"null",E=="array"||E=="object"&&typeof p.length=="number"}function l(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function u(p,E,A){return p.call.apply(p.bind,arguments)}function d(p,E,A){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,L),p.apply(E,X)}}return function(){return p.apply(E,arguments)}}function h(p,E,A){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function f(p,E){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function g(p,E){function A(){}A.prototype=E.prototype,p.aa=E.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(L,X,ie){for(var Pe=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)Pe[Vn-2]=arguments[Vn];return E.prototype[X].apply(L,Pe)}}function v(p){let E=p.length;if(0<E){let A=Array(E);for(let L=0;L<E;L++)A[L]=p[L];return A}return[]}function _(p,E){for(let A=1;A<arguments.length;A++){let L=arguments[A];if(c(L)){let X=p.length||0,ie=L.length||0;p.length=X+ie;for(let Pe=0;Pe<ie;Pe++)p[X+Pe]=L[Pe]}else p.push(L)}}class b{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function R(p){return/^[\s\xa0]*$/.test(p)}function P(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function N(p){return N[" "](p),p}N[" "]=function(){};var U=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function O(p,E,A){for(let L in p)E.call(A,p[L],L,p)}function S(p,E){for(let A in p)E.call(void 0,p[A],A,p)}function w(p){let E={};for(let A in p)E[A]=p[A];return E}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(p,E){let A,L;for(let X=1;X<arguments.length;X++){L=arguments[X];for(A in L)p[A]=L[A];for(let ie=0;ie<y.length;ie++)A=y[ie],Object.prototype.hasOwnProperty.call(L,A)&&(p[A]=L[A])}}function T(p){var E=1;p=p.split(":");let A=[];for(;0<E&&p.length;)A.push(p.shift()),E--;return p.length&&A.push(p.join(":")),A}function M(p){a.setTimeout(()=>{throw p},0)}function C(){var p=ue;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class oe{constructor(){this.h=this.g=null}add(E,A){let L=Z.get();L.set(E,A),this.h?this.h.next=L:this.g=L,this.h=L}}var Z=new b(()=>new G,p=>p.reset());class G{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let K,W=!1,ue=new oe,ye=()=>{let p=a.Promise.resolve(void 0);K=()=>{p.then(Ue)}};var Ue=()=>{for(var p;p=C();){try{p.h.call(p.g)}catch(A){M(A)}var E=Z;E.j(p),100>E.h&&(E.h++,p.next=E.g,E.g=p)}W=!1};function Qe(){this.s=this.s,this.C=this.C}Qe.prototype.s=!1,Qe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ze(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var tt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{let A=()=>{};a.addEventListener("test",A,E),a.removeEventListener("test",A,E)}catch{}return p})();function kt(p,E){if(Ze.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget){if(U){e:{try{N(E.nodeName);var X=!0;break e}catch{}X=!1}X||(E=null)}}else A=="mouseover"?E=p.fromElement:A=="mouseout"&&(E=p.toElement);this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:de[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&kt.aa.h.call(this)}}g(kt,Ze);var de={2:"touch",3:"pen",4:"mouse"};kt.prototype.h=function(){kt.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ze=0;function nt(p,E,A,L,X){this.listener=p,this.proxy=null,this.src=E,this.type=A,this.capture=!!L,this.ha=X,this.key=++ze,this.da=this.fa=!1}function et(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Nt(p){this.src=p,this.g={},this.h=0}Nt.prototype.add=function(p,E,A,L,X){var ie=p.toString();p=this.g[ie],p||(p=this.g[ie]=[],this.h++);var Pe=Et(p,E,L,X);return-1<Pe?(E=p[Pe],A||(E.fa=!1)):(E=new nt(E,this.src,ie,!!L,X),E.fa=A,p.push(E)),E};function Sn(p,E){var A=E.type;if(A in p.g){var L=p.g[A],X=Array.prototype.indexOf.call(L,E,void 0),ie;(ie=0<=X)&&Array.prototype.splice.call(L,X,1),ie&&(et(E),p.g[A].length==0&&(delete p.g[A],p.h--))}}function Et(p,E,A,L){for(var X=0;X<p.length;++X){var ie=p[X];if(!ie.da&&ie.listener==E&&ie.capture==!!A&&ie.ha==L)return X}return-1}var we="closure_lm_"+(1e6*Math.random()|0),B={};function Ee(p,E,A,L,X){if(L&&L.once)return Se(p,E,A,L,X);if(Array.isArray(E)){for(var ie=0;ie<E.length;ie++)Ee(p,E[ie],A,L,X);return null}return A=ae(A),p&&p[he]?p.K(E,A,l(L)?!!L.capture:!!L,X):Ae(p,E,A,!1,L,X)}function Ae(p,E,A,L,X,ie){if(!E)throw Error("Invalid event type");var Pe=l(X)?!!X.capture:!!X,Vn=k(p);if(Vn||(p[we]=Vn=new Nt(p)),A=Vn.add(E,A,L,Pe,ie),A.proxy)return A;if(L=Ne(),A.proxy=L,L.src=p,L.listener=A,p.addEventListener)tt||(X=Pe),X===void 0&&(X=!1),p.addEventListener(E.toString(),L,X);else if(p.attachEvent)p.attachEvent($e(E.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ne(){function p(A){return E.call(p.src,p.listener,A)}let E=z;return p}function Se(p,E,A,L,X){if(Array.isArray(E)){for(var ie=0;ie<E.length;ie++)Se(p,E[ie],A,L,X);return null}return A=ae(A),p&&p[he]?p.L(E,A,l(L)?!!L.capture:!!L,X):Ae(p,E,A,!0,L,X)}function Fe(p,E,A,L,X){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)Fe(p,E[ie],A,L,X);else L=l(L)?!!L.capture:!!L,A=ae(A),p&&p[he]?(p=p.i,E=String(E).toString(),E in p.g&&(ie=p.g[E],A=Et(ie,A,L,X),-1<A&&(et(ie[A]),Array.prototype.splice.call(ie,A,1),ie.length==0&&(delete p.g[E],p.h--)))):p&&(p=k(p))&&(E=p.g[E.toString()],p=-1,E&&(p=Et(E,A,L,X)),(A=-1<p?E[p]:null)&&Me(A))}function Me(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[he])Sn(E.i,p);else{var A=p.type,L=p.proxy;E.removeEventListener?E.removeEventListener(A,L,p.capture):E.detachEvent?E.detachEvent($e(A),L):E.addListener&&E.removeListener&&E.removeListener(L),(A=k(E))?(Sn(A,p),A.h==0&&(A.src=null,E[we]=null)):et(p)}}}function $e(p){return p in B?B[p]:B[p]="on"+p}function z(p,E){if(p.da)p=!0;else{E=new kt(E,this);var A=p.listener,L=p.ha||p.src;p.fa&&Me(p),p=A.call(L,E)}return p}function k(p){return p=p[we],p instanceof Nt?p:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(p){return typeof p=="function"?p:(p[J]||(p[J]=function(E){return p.handleEvent(E)}),p[J])}function pe(){Qe.call(this),this.i=new Nt(this),this.M=this,this.F=null}g(pe,Qe),pe.prototype[he]=!0,pe.prototype.removeEventListener=function(p,E,A,L){Fe(this,p,E,A,L)};function ee(p,E){var A,L=p.F;if(L)for(A=[];L;L=L.F)A.push(L);if(p=p.M,L=E.type||E,typeof E=="string")E=new Ze(E,p);else if(E instanceof Ze)E.target=E.target||p;else{var X=E;E=new Ze(L,p),x(E,X)}if(X=!0,A)for(var ie=A.length-1;0<=ie;ie--){var Pe=E.g=A[ie];X=rt(Pe,L,!0,E)&&X}if(Pe=E.g=p,X=rt(Pe,L,!0,E)&&X,X=rt(Pe,L,!1,E)&&X,A)for(ie=0;ie<A.length;ie++)Pe=E.g=A[ie],X=rt(Pe,L,!1,E)&&X}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var p=this.i,E;for(E in p.g){for(var A=p.g[E],L=0;L<A.length;L++)et(A[L]);delete p.g[E],p.h--}}this.F=null},pe.prototype.K=function(p,E,A,L){return this.i.add(String(p),E,!1,A,L)},pe.prototype.L=function(p,E,A,L){return this.i.add(String(p),E,!0,A,L)};function rt(p,E,A,L){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();for(var X=!0,ie=0;ie<E.length;++ie){var Pe=E[ie];if(Pe&&!Pe.da&&Pe.capture==A){var Vn=Pe.listener,Ui=Pe.ha||Pe.src;Pe.fa&&Sn(p.i,Pe),X=Vn.call(Ui,L)!==!1&&X}}return X&&!L.defaultPrevented}function Be(p,E,A){if(typeof p=="function")A&&(p=h(p,A));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(p,E||0)}function ht(p){p.g=Be(()=>{p.g=null,p.i&&(p.i=!1,ht(p))},p.l);let E=p.h;p.h=null,p.m.apply(null,E)}class at extends Qe{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(p){Qe.call(this),this.h=p,this.g={}}g(be,Qe);var De=[];function yt(p){O(p.g,function(E,A){this.g.hasOwnProperty(A)&&Me(E)},p),p.g={}}be.prototype.N=function(){be.aa.N.call(this),yt(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=a.JSON.stringify,Ge=a.JSON.parse,Mt=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function j(){}j.prototype.h=null;function He(p){return p.h||(p.h=p.i())}function ke(){}var Oe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){Ze.call(this,"d")}g(ve,Ze);function _e(){Ze.call(this,"c")}g(_e,Ze);var qe={},Tt=null;function Fn(){return Tt=Tt||new pe}qe.La="serverreachability";function Pn(p){Ze.call(this,qe.La,p)}g(Pn,Ze);function Ti(p){let E=Fn();ee(E,new Pn(E))}qe.STAT_EVENT="statevent";function Br(p,E){Ze.call(this,qe.STAT_EVENT,p),this.stat=E}g(Br,Ze);function dr(p){let E=Fn();ee(E,new Br(E,p))}qe.Ma="timingevent";function Pa(p,E){Ze.call(this,qe.Ma,p),this.size=E}g(Pa,Ze);function jo(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},E)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Dc(p,E,A,L,X,ie){p.info(function(){if(p.g)if(ie)for(var Pe="",Vn=ie.split("&"),Ui=0;Ui<Vn.length;Ui++){var Un=Vn[Ui].split("=");if(1<Un.length){var jr=Un[0];Un=Un[1];var Gr=jr.split("_");Pe=2<=Gr.length&&Gr[1]=="type"?Pe+(jr+"="+Un+"&"):Pe+(jr+"=redacted&")}}else Pe=null;else Pe=ie;return"XMLHTTP REQ ("+L+") [attempt "+X+"]: "+E+`
`+A+`
`+Pe})}function Na(p,E,A,L,X,ie,Pe){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+X+"]: "+E+`
`+A+`
`+ie+" "+Pe})}function Go(p,E,A,L){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Jd(p,A)+(L?" "+L:"")})}function ss(p,E){p.info(function(){return"TIMEOUT: "+E})}zr.prototype.info=function(){};function Jd(p,E){if(!p.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var L=A[p];if(!(2>L.length)){var X=L[1];if(Array.isArray(X)&&!(1>X.length)){var ie=X[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var Pe=1;Pe<X.length;Pe++)X[Pe]=""}}}}return ft(A)}catch{return E}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ka;function Pc(){}g(Pc,j),Pc.prototype.g=function(){return new XMLHttpRequest},Pc.prototype.i=function(){return{}},ka=new Pc;function bo(p,E,A,L){this.j=p,this.i=E,this.l=A,this.R=L||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zd}function Zd(){this.i=null,this.g="",this.h=!1}var up={},Oa={};function fu(p,E,A){p.L=1,p.v=Fi(Mr(E)),p.m=A,p.P=!0,F(p,null)}function F(p,E){p.F=Date.now(),se(p),p.A=Mr(p.v);var A=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),Gx(A.i,"t",L),p.C=0,A=p.j.J,p.h=new Zd,p.g=I(p.j,A?E:null,!p.m),0<p.O&&(p.M=new at(h(p.Y,p,p.g),p.O)),E=p.U,A=p.g,L=p.ca;var X="readystatechange";Array.isArray(X)||(X&&(De[0]=X.toString()),X=De);for(var ie=0;ie<X.length;ie++){var Pe=Ee(A,X[ie],L||E.handleEvent,!1,E.h||E);if(!Pe)break;E.g[Pe.key]=Pe}E=p.H?w(p.H):{},p.m?(p.u||(p.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,E)):(p.u="GET",p.g.ea(p.A,p.u,null,E)),Ti(),Dc(p.i,p.u,p.A,p.l,p.R,p.m)}bo.prototype.ca=function(p){p=p.target;let E=this.M;E&&bs(p)==3?E.j():this.Y(p)},bo.prototype.Y=function(p){try{if(p==this.g)e:{let Gr=bs(this.g);var E=this.g.Ba();let vp=this.g.Z();if(!(3>Gr)&&(Gr!=3||this.g&&(this.h.h||this.g.oa()||Xx(this.g)))){this.J||Gr!=4||E==7||(E==8||0>=vp?Ti(3):Ti(2)),Re(this);var A=this.g.Z();this.X=A;t:if($(this)){var L=Xx(this.g);p="";var X=L.length,ie=bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Je(this),je(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(E=0;E<X;E++)this.h.h=!0,p+=this.h.i.decode(L[E],{stream:!(ie&&E==X-1)});L.length=0,this.h.g+=p,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=A==200,Na(this.i,this.u,this.A,this.l,this.R,Gr,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Vn,Ui=this.g;if((Vn=Ui.g?Ui.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Vn)){var Un=Vn;break t}}Un=null}if(A=Un)Go(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,A);else{this.o=!1,this.s=3,dr(12),Je(this),je(this);break e}}if(this.P){A=!0;let Ko;for(;!this.J&&this.C<Pe.length;)if(Ko=te(this,Pe),Ko==Oa){Gr==4&&(this.s=4,dr(14),A=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(Ko==up){this.s=4,dr(15),Go(this.i,this.l,Pe,"[Invalid Chunk]"),A=!1;break}else Go(this.i,this.l,Ko,null),Ye(this,Ko);if($(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gr!=4||Pe.length!=0||this.h.h||(this.s=1,dr(16),A=!1),this.o=this.o&&A,!A)Go(this.i,this.l,Pe,"[Invalid Chunked Response]"),Je(this),je(this);else if(0<Pe.length&&!this.W){this.W=!0;var jr=this.j;jr.g==this&&jr.ba&&!jr.M&&(jr.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),yp(jr),jr.M=!0,dr(11))}}else Go(this.i,this.l,Pe,null),Ye(this,Pe);Gr==4&&Je(this),this.o&&!this.J&&(Gr==4?Hr(this.j,this):(this.o=!1,se(this)))}else Yx(this.g),A==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Je(this),je(this)}}}catch{}finally{}};function $(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function te(p,E){var A=p.C,L=E.indexOf(`
`,A);return L==-1?Oa:(A=Number(E.substring(A,L)),isNaN(A)?up:(L+=1,L+A>E.length?Oa:(E=E.slice(L,L+A),p.C=L+A,E)))}bo.prototype.cancel=function(){this.J=!0,Je(this)};function se(p){p.S=Date.now()+p.I,Y(p,p.I)}function Y(p,E){if(p.B!=null)throw Error("WatchDog timer not null");p.B=jo(h(p.ba,p),E)}function Re(p){p.B&&(a.clearTimeout(p.B),p.B=null)}bo.prototype.ba=function(){this.B=null;let p=Date.now();0<=p-this.S?(ss(this.i,this.A),this.L!=2&&(Ti(),dr(17)),Je(this),this.s=2,je(this)):Y(this,this.S-p)};function je(p){p.j.G==0||p.J||Hr(p.j,p)}function Je(p){Re(p);var E=p.M;E&&typeof E.ma=="function"&&E.ma(),p.M=null,yt(p.U),p.g&&(E=p.g,p.g=null,E.abort(),E.ma())}function Ye(p,E){try{var A=p.j;if(A.G!=0&&(A.g==p||Tn(A.h,p))){if(!p.K&&Tn(A.h,p)&&A.G==3){try{var L=A.Da.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var X=L;if(X[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)kc(A),vu(A);else break e;_p(A),dr(18)}}else A.za=X[1],0<A.za-A.T&&37500>X[2]&&A.F&&A.v==0&&!A.C&&(A.C=jo(h(A.Za,A),6e3));if(1>=Zt(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Va(A,11)}else if((p.K||A.g==p)&&kc(A),!R(E))for(X=A.Da.g.parse(E),E=0;E<X.length;E++){let Un=X[E];if(A.T=Un[0],Un=Un[1],A.G==2)if(Un[0]=="c"){A.K=Un[1],A.ia=Un[2];let jr=Un[3];jr!=null&&(A.la=jr,A.j.info("VER="+A.la));let Gr=Un[4];Gr!=null&&(A.Aa=Gr,A.j.info("SVER="+A.Aa));let vp=Un[5];vp!=null&&typeof vp=="number"&&0<vp&&(L=1.5*vp,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;let Ko=p.g;if(Ko){let Qx=Ko.g?Ko.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qx){var ie=L.h;ie.g||Qx.indexOf("spdy")==-1&&Qx.indexOf("quic")==-1&&Qx.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(xn(ie,ie.h),ie.h=null))}if(L.D){let BR=Ko.g?Ko.g.getResponseHeader("X-HTTP-Session-Id"):null;BR&&(L.ya=BR,Kt(L.I,L.D,BR))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var Pe=p;if(L.qa=m(L,L.J?L.ia:null,L.W),Pe.K){gn(L.h,Pe);var Vn=Pe,Ui=L.L;Ui&&(Vn.I=Ui),Vn.B&&(Re(Vn),se(Vn)),L.g=Pe}else ey(L);0<A.i.length&&nh(A)}else Un[0]!="stop"&&Un[0]!="close"||Va(A,7);else A.G==3&&(Un[0]=="stop"||Un[0]=="close"?Un[0]=="stop"?Va(A,7):pp(A):Un[0]!="noop"&&A.l&&A.l.ta(Un),A.v=0)}}Ti(4)}catch{}}var vt=class{constructor(p,E){this.g=p,this.map=E}};function It(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Zt(p){return p.h?1:p.g?p.g.size:0}function Tn(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function xn(p,E){p.g?p.g.add(E):p.h=E}function gn(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}It.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let p of this.g.values())p.cancel();this.g.clear()}};function _n(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let E=p.i;for(let A of p.g.values())E=E.concat(A.D);return E}return v(p.i)}function dt(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var E=[],A=p.length,L=0;L<A;L++)E.push(p[L]);return E}E=[],A=0;for(L in p)E[A++]=p[L];return E}function Xn(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var E=[];p=p.length;for(var A=0;A<p;A++)E.push(A);return E}E=[],A=0;for(let L in p)E[A++]=L;return E}}}function lt(p,E){if(p.forEach&&typeof p.forEach=="function")p.forEach(E,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,E,void 0);else for(var A=Xn(p),L=dt(p),X=L.length,ie=0;ie<X;ie++)E.call(void 0,L[ie],A&&A[ie],p)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ys(p,E){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var L=p[A].indexOf("="),X=null;if(0<=L){var ie=p[A].substring(0,L);X=p[A].substring(L+1)}else ie=p[A];E(ie,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ii(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ii){this.h=p.h,Bn(this,p.j),this.o=p.o,this.g=p.g,Li(this,p.s),this.l=p.l;var E=p.i,A=new eh;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),Dr(this,A),this.m=p.m}else p&&(E=String(p).match(Oi))?(this.h=!1,Bn(this,E[1]||"",!0),this.o=os(E[2]||""),this.g=os(E[3]||"",!0),Li(this,E[4]),this.l=os(E[5]||"",!0),Dr(this,E[6]||"",!0),this.m=os(E[7]||"")):(this.h=!1,this.i=new eh(null,this.h))}ii.prototype.toString=function(){var p=[],E=this.j;E&&p.push(Vi(E,q_,!0),":");var A=this.g;return(A||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Vi(E,q_,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(Vi(A,A.charAt(0)=="/"?zx:Bx,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",Vi(A,pu)),p.join("")};function Mr(p){return new ii(p)}function Bn(p,E,A){p.j=A?os(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Li(p,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);p.s=E}else p.s=null}function Dr(p,E,A){E instanceof eh?(p.i=E,dp(p.i,p.h)):(A||(E=Vi(E,Hx)),p.i=new eh(E,p.h))}function Kt(p,E,A){p.i.set(E,A)}function Fi(p){return Kt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function os(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Vi(p,E,A){return typeof p=="string"?(p=encodeURI(p).replace(E,Ux),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ux(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var q_=/[#\/\?@]/g,Bx=/[#\?:]/g,zx=/[#\?]/g,Hx=/[#\?@]/g,pu=/#/g;function eh(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function La(p){p.g||(p.g=new Map,p.h=0,p.i&&ys(p.i,function(E,A){p.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=eh.prototype,n.add=function(p,E){La(this),this.i=null,p=$o(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(E),this.h+=1,this};function jx(p,E){La(p),E=$o(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Wo(p,E){return La(p),E=$o(p,E),p.g.has(E)}n.forEach=function(p,E){La(this),this.g.forEach(function(A,L){A.forEach(function(X){p.call(E,X,L,this)},this)},this)},n.na=function(){La(this);let p=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let L=0;L<E.length;L++){let X=p[L];for(let ie=0;ie<X.length;ie++)A.push(E[L])}return A},n.V=function(p){La(this);let E=[];if(typeof p=="string")Wo(this,p)&&(E=E.concat(this.g.get($o(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)E=E.concat(p[A])}return E},n.set=function(p,E){return La(this),this.i=null,p=$o(this,p),Wo(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=this.V(p),0<p.length?String(p[0]):E):E};function Gx(p,E,A){jx(p,E),0<A.length&&(p.i=null,p.g.set($o(p,E),v(A)),p.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let p=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var L=E[A];let ie=encodeURIComponent(String(L)),Pe=this.V(L);for(L=0;L<Pe.length;L++){var X=ie;Pe[L]!==""&&(X+="="+encodeURIComponent(String(Pe[L]))),p.push(X)}}return this.i=p.join("&")};function $o(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function dp(p,E){E&&!p.j&&(La(p),p.i=null,p.g.forEach(function(A,L){var X=L.toLowerCase();L!=X&&(jx(this,L),Gx(this,X,A))},p)),p.j=E}function Wx(p,E){let A=new zr;if(a.Image){let L=new Image;L.onload=f(vs,A,"TestLoadImage: loaded",!0,E,L),L.onerror=f(vs,A,"TestLoadImage: error",!1,E,L),L.onabort=f(vs,A,"TestLoadImage: abort",!1,E,L),L.ontimeout=f(vs,A,"TestLoadImage: timeout",!1,E,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else E(!1)}function th(p,E){let A=new zr,L=new AbortController,X=setTimeout(()=>{L.abort(),vs(A,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:L.signal}).then(ie=>{clearTimeout(X),ie.ok?vs(A,"TestPingServer: ok",!0,E):vs(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(X),vs(A,"TestPingServer: error",!1,E)})}function vs(p,E,A,L,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),L(A)}catch{}}function $x(){this.g=new Mt}function K_(p,E,A){let L=A||"";try{lt(p,function(X,ie){let Pe=X;l(X)&&(Pe=ft(X)),E.push(L+ie+"="+encodeURIComponent(Pe))})}catch(X){throw E.push(L+"type="+encodeURIComponent("_badmap")),X}}function Zn(p){this.l=p.Ub||null,this.j=p.eb||!1}g(Zn,j),Zn.prototype.g=function(){return new hp(this.l,this.j)},Zn.prototype.i=(function(p){return function(){return p}})({});function hp(p,E){pe.call(this),this.D=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(hp,pe),n=hp.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=E,this.readyState=1,gu(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(E.body=p),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,gu(this)),this.g&&(this.readyState=3,gu(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qx(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function qx(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?mu(this):gu(this),this.readyState==3&&qx(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,mu(this))},n.Qa=function(p){this.g&&(this.response=p,mu(this))},n.ga=function(){this.g&&mu(this)};function mu(p){p.readyState=4,p.l=null,p.j=null,p.v=null,gu(p)}n.setRequestHeader=function(p,E){this.u.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let p=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=E.next();return p.join(`\r
`)};function gu(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(hp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function X_(p){let E="";return O(p,function(A,L){E+=L,E+=":",E+=A,E+=`\r
`}),E}function _u(p,E,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=X_(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):Kt(p,E,A))}function zn(p){pe.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(zn,pe);var Kx=/^https?$/i,UR=["POST","PUT"];n=zn.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,E,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ka.g(),this.v=this.o?He(this.o):He(ka),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(ie){yu(this,ie);return}if(p=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var X in L)A.set(X,L[X]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(let ie of L.keys())A.set(ie,L.get(ie));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(ie=>ie.toLowerCase()=="content-type"),X=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UR,E,void 0))||L||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ie,Pe]of A)this.g.setRequestHeader(ie,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Q_(this),this.u=!0,this.g.send(p),this.u=!1}catch(ie){yu(this,ie)}};function yu(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.m=5,Y_(p),Nc(p)}function Y_(p){p.A||(p.A=!0,ee(p,"complete"),ee(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ee(this,"complete"),ee(this,"abort"),Nc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),zn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fp(this):this.bb())},n.bb=function(){fp(this)};function fp(p){if(p.h&&typeof o<"u"&&(!p.v[1]||bs(p)!=4||p.Z()!=2)){if(p.u&&bs(p)==4)Be(p.Ea,0,p);else if(ee(p,"readystatechange"),bs(p)==4){p.h=!1;try{let Pe=p.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var L;if(L=Pe===0){var X=String(p.D).match(Oi)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),L=!Kx.test(X?X.toLowerCase():"")}A=L}if(A)ee(p,"complete"),ee(p,"success");else{p.m=6;try{var ie=2<bs(p)?p.g.statusText:""}catch{ie=""}p.l=ie+" ["+p.Z()+"]",Y_(p)}}finally{Nc(p)}}}}function Nc(p,E){if(p.g){Q_(p);let A=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,E||ee(p,"ready");try{A.onreadystatechange=L}catch{}}}function Q_(p){p.I&&(a.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function bs(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<bs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),Ge(E)}};function Xx(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Yx(p){let E={};p=(p.g&&2<=bs(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(R(p[L]))continue;var A=T(p[L]);let X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();let ie=E[X]||[];E[X]=ie,ie.push(A)}S(E,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(p,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||E}function J_(p){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,p),this.cb=qo("retryDelaySeedMs",1e4,p),this.Wa=qo("forwardChannelMaxRetries",2,p),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new It(p&&p.concurrentRequestLimit),this.Da=new $x,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=J_.prototype,n.la=8,n.G=1,n.connect=function(p,E,A,L){dr(0),this.W=p,this.H=E||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=m(this,null,this.W),nh(this)};function pp(p){if(mp(p),p.G==3){var E=p.U++,A=Mr(p.I);if(Kt(A,"SID",p.K),Kt(A,"RID",E),Kt(A,"TYPE","terminate"),bu(p,A),E=new bo(p,p.j,E),E.L=2,E.v=Fi(Mr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=E.v,A=!0),A||(E.g=I(E.j,null),E.g.ea(E.v)),E.F=Date.now(),se(E)}Oc(p)}function vu(p){p.g&&(yp(p),p.g.cancel(),p.g=null)}function mp(p){vu(p),p.u&&(a.clearTimeout(p.u),p.u=null),kc(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function nh(p){if(!ut(p.h)&&!p.s){p.s=!0;var E=p.Ga;K||ye(),W||(K(),W=!0),ue.add(E,p),p.B=0}}function gp(p,E){return Zt(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=E.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=jo(h(p.Ga,p,E),ny(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;let X=new bo(this,this.j,p),ie=this.o;if(this.S&&(ie?(ie=w(ie),x(ie,this.S)):ie=this.S),this.m!==null||this.O||(X.H=ie,ie=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Fa(this,X,E),A=Mr(this.I),Kt(A,"RID",p),Kt(A,"CVER",22),this.D&&Kt(A,"X-HTTP-Session-Id",this.D),bu(this,A),ie&&(this.O?E="headers="+encodeURIComponent(String(X_(ie)))+"&"+E:this.m&&_u(A,this.m,ie)),xn(this.h,X),this.Ua&&Kt(A,"TYPE","init"),this.P?(Kt(A,"$req",E),Kt(A,"SID","null"),X.T=!0,fu(X,A,null)):fu(X,A,E),this.G=2}}else this.G==3&&(p?Z_(this,p):this.i.length==0||ut(this.h)||Z_(this))};function Z_(p,E){var A;E?A=E.l:A=p.U++;let L=Mr(p.I);Kt(L,"SID",p.K),Kt(L,"RID",A),Kt(L,"AID",p.T),bu(p,L),p.m&&p.o&&_u(L,p.m,p.o),A=new bo(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),E&&(p.i=E.D.concat(p.i)),E=Fa(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),xn(p.h,A),fu(A,L,E)}function bu(p,E){p.H&&O(p.H,function(A,L){Kt(E,L,A)}),p.l&&lt({},function(A,L){Kt(E,L,A)})}function Fa(p,E,A){A=Math.min(p.i.length,A);var L=p.l?h(p.l.Na,p.l,p):null;e:{var X=p.i;let ie=-1;for(;;){let Pe=["count="+A];ie==-1?0<A?(ie=X[0].g,Pe.push("ofs="+ie)):ie=0:Pe.push("ofs="+ie);let Vn=!0;for(let Ui=0;Ui<A;Ui++){let Un=X[Ui].g,jr=X[Ui].map;if(Un-=ie,0>Un)ie=Math.max(0,X[Ui].g-100),Vn=!1;else try{K_(jr,Pe,"req"+Un+"_")}catch{L&&L(jr)}}if(Vn){L=Pe.join("&");break e}}}return p=p.i.splice(0,A),E.D=p,L}function ey(p){if(!p.g&&!p.u){p.Y=1;var E=p.Fa;K||ye(),W||(K(),W=!0),ue.add(E,p),p.v=0}}function _p(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=jo(h(p.Fa,p),ny(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,ty(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=jo(h(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),vu(this),ty(this))};function yp(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function ty(p){p.g=new bo(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var E=Mr(p.qa);Kt(E,"RID","rpc"),Kt(E,"SID",p.K),Kt(E,"AID",p.T),Kt(E,"CI",p.F?"0":"1"),!p.F&&p.ja&&Kt(E,"TO",p.ja),Kt(E,"TYPE","xmlhttp"),bu(p,E),p.m&&p.o&&_u(E,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=Fi(Mr(E)),A.m=null,A.P=!0,F(A,p)}n.Za=function(){this.C!=null&&(this.C=null,vu(this),_p(this),dr(19))};function kc(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function Hr(p,E){var A=null;if(p.g==E){kc(p),yp(p),p.g=null;var L=2}else if(Tn(p.h,E))A=E.D,gn(p.h,E),L=1;else return;if(p.G!=0){if(E.o)if(L==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var X=p.B;L=Fn(),ee(L,new Pa(L,A)),nh(p)}else ey(p);else if(X=E.s,X==3||X==0&&0<E.X||!(L==1&&gp(p,E)||L==2&&_p(p)))switch(A&&0<A.length&&(E=p.h,E.i=E.i.concat(A)),X){case 1:Va(p,5);break;case 4:Va(p,10);break;case 3:Va(p,6);break;default:Va(p,2)}}}function ny(p,E){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*E}function Va(p,E){if(p.j.info("Error code "+E),E==2){var A=h(p.fb,p),L=p.Xa;let X=!L;L=new ii(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bn(L,"https"),Fi(L),X?Wx(L.toString(),A):th(L.toString(),A)}else dr(2);p.G=0,p.l&&p.l.sa(E),Oc(p),mp(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function Oc(p){if(p.G=0,p.ka=[],p.l){let E=_n(p.h);(E.length!=0||p.i.length!=0)&&(_(p.ka,E),_(p.ka,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.ra()}}function m(p,E,A){var L=A instanceof ii?Mr(A):new ii(A);if(L.g!="")E&&(L.g=E+"."+L.g),Li(L,L.s);else{var X=a.location;L=X.protocol,E=E?E+"."+X.hostname:X.hostname,X=+X.port;var ie=new ii(null);L&&Bn(ie,L),E&&(ie.g=E),X&&Li(ie,X),A&&(ie.l=A),L=ie}return A=p.D,E=p.ya,A&&E&&Kt(L,A,E),Kt(L,"VER",p.la),bu(p,L),L}function I(p,E,A){if(E&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Ca&&!p.pa?new zn(new Zn({eb:A})):new zn(p.pa),E.Ha(p.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function D(){}n=D.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function V(){}V.prototype.g=function(p,E){return new q(p,E)};function q(p,E){pe.call(this),this.g=new J_(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(p?p["X-WebChannel-Client-Profile"]=E.va:p={"X-WebChannel-Client-Profile":E.va}),this.g.S=p,(p=E&&E.Sb)&&!R(p)&&(this.g.m=p),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!R(E)&&(this.g.D=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Ot(this)}g(q,pe),q.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},q.prototype.close=function(){pp(this.g)},q.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=ft(p),p=A);E.i.push(new vt(E.Ya++,p)),E.G==3&&nh(E)},q.prototype.N=function(){this.g.l=null,delete this.j,pp(this.g),delete this.g,q.aa.N.call(this)};function ne(p){ve.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(let A in E){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}g(ne,ve);function Le(){_e.call(this),this.status=1}g(Le,_e);function Ot(p){this.g=p}g(Ot,D),Ot.prototype.ua=function(){ee(this.g,"a")},Ot.prototype.ta=function(p){ee(this.g,new ne(p))},Ot.prototype.sa=function(p){ee(this.g,new Le)},Ot.prototype.ra=function(){ee(this.g,"b")},V.prototype.createWebChannel=V.prototype.g,q.prototype.send=q.prototype.o,q.prototype.open=q.prototype.m,q.prototype.close=q.prototype.close,xV=Rl.createWebChannelTransport=function(){return new V},bV=Rl.getStatEventTarget=function(){return Fn()},vV=Rl.Event=qe,KI=Rl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,Mb=Rl.ErrorCode=vo,Rc.COMPLETE="complete",yV=Rl.EventType=Rc,ke.EventType=Oe,Oe.OPEN="a",Oe.CLOSE="b",Oe.ERROR="c",Oe.MESSAGE="d",pe.prototype.listen=pe.prototype.K,rg=Rl.WebChannel=ke,awe=Rl.FetchXmlHttpFactory=Zn,zn.prototype.listenOnce=zn.prototype.L,zn.prototype.getLastError=zn.prototype.Ka,zn.prototype.getLastErrorCode=zn.prototype.Ba,zn.prototype.getStatus=zn.prototype.Z,zn.prototype.getResponseJson=zn.prototype.Oa,zn.prototype.getResponseText=zn.prototype.oa,zn.prototype.send=zn.prototype.ea,zn.prototype.setWithCredentials=zn.prototype.Ha,_V=Rl.XhrIo=zn}).apply(typeof qI<"u"?qI:typeof self<"u"?self:typeof window<"u"?window:{});var VK="@firebase/firestore",UK="4.8.0";var Tr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");var Ig="11.10.0";var _f=new tc("@firebase/firestore");function sg(){return _f.logLevel}function it(n,...e){if(_f.logLevel<=fn.DEBUG){let t=e.map(dU);_f.debug(`Firestore (${Ig}): ${n}`,...t)}}function Pl(n,...e){if(_f.logLevel<=fn.ERROR){let t=e.map(dU);_f.error(`Firestore (${Ig}): ${n}`,...t)}}function hd(n,...e){if(_f.logLevel<=fn.WARN){let t=e.map(dU);_f.warn(`Firestore (${Ig}): ${n}`,...t)}}function dU(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Pt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,MX(n,i,t)}function MX(n,e,t){let i=`FIRESTORE (${Ig}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Pl(i),new Error(i)}function qn(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||MX(e,r,i)}function qt(n,e){return n}var fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends ro{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xa=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var tC=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},IV=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tr.UNAUTHENTICATED))}shutdown(){}},CV=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},AV=class{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qn(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xa,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xa)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qn(typeof i.accessToken=="string",31837,{l:i}),new tC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return qn(e===null||typeof e=="string",2055,{h:e}),new Tr(e)}},MV=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},DV=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new MV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nC=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},RV=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,so(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qn(this.o===void 0,3512);let i=s=>{s.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nC(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function cwe(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function DX(){return new TextEncoder}var kb=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=cwe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function cn(n,e){return n<e?-1:n>e?1:0}function PV(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return cn(i,r);{let s=DX(),o=lwe(s.encode(BK(n,t)),s.encode(BK(e,t)));return o!==0?o:cn(i,r)}}t+=i>65535?2:1}return cn(n.length,e.length)}function BK(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lwe(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return cn(n[t],e[t]);return cn(n.length,e.length)}function pg(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var zK="__name__",iC=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Pt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Pt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return cn(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):PV(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dl.fromString(e.substring(4,e.length-2))}},pi=class n extends iC{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},uwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,co=class n extends iC{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return uwe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zK}static keyField(){return new n([zK])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ve(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ve(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var wt=class n{constructor(e){this.path=e}static fromPath(e){return new n(pi.fromString(e))}static fromName(e){return new n(pi.fromString(e).popFirst(5))}static empty(){return new n(pi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pi(e.slice()))}};function RX(n,e,t){if(!t)throw new Ve(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dwe(n,e,t,i){if(e===!0&&i===!0)throw new Ve(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HK(n){if(!wt.isDocumentKey(n))throw new Ve(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jK(n){if(wt.isDocumentKey(n))throw new Ve(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PX(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function LC(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pt(12329,{type:typeof n})}function wa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=LC(n);throw new Ve(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hwe(n,e){if(e<=0)throw new Ve(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ar(n,e){let t={typeString:n};return e&&(t.value=e),t}function qb(n,e){if(!PX(n))throw new Ve(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Ve(fe.INVALID_ARGUMENT,t);return!0}var GK=-62135596800,WK=1e6,cr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*WK);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GK)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WK}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qb(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-GK;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:ar("string",cr._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};var Jt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new cr(0,0))}static max(){return new n(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ob=-1,NV=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};NV.UNKNOWN_ID=-1;function fwe(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Jt.fromTimestamp(i===1e9?new cr(t+1,0):new cr(t,i));return new yf(r,wt.empty(),e)}function pwe(n){return new yf(n.readTime,n.key,Ob)}var yf=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Jt.min(),wt.empty(),Ob)}static max(){return new n(Jt.max(),wt.empty(),Ob)}};function mwe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=wt.comparator(n.documentKey,e.documentKey),t!==0?t:cn(n.largestBatchId,e.largestBatchId))}var gwe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kV=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Cg(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==gwe)throw n;it("LocalStore","Unexpectedly lost primary lease")}var Ie=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function _we(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ag(n){return n.name==="IndexedDbTransactionError"}var hU=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),fU=-1;function FC(n){return n==null}function Lb(n){return n===0&&1/n==-1/0}function ywe(n){return typeof n=="number"&&Number.isInteger(n)&&!Lb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var NX="";function vwe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$K(e)),e=bwe(n.get(t),e);return $K(e)}function bwe(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case NX:t+="";break;default:t+=s}}return t}function $K(n){return n+NX+""}var xwe="remoteDocuments",kX="owner";var OX="mutationQueues";var LX="mutations";var FX="documentMutations",wwe="remoteDocumentsV14";var VX="remoteDocumentGlobal";var UX="targets";var BX="targetDocuments";var zX="targetGlobal",HX="collectionParents";var jX="clientMetadata";var GX="bundles";var WX="namedQueries";var Ewe="indexConfiguration";var Swe="indexState";var Twe="indexEntries";var $X="documentOverlays";var Iwe="globals";var Cwe=[OX,LX,FX,xwe,UX,kX,zX,BX,jX,VX,HX,GX,WX],zZe=[...Cwe,$X],Awe=[OX,LX,FX,wwe,UX,kX,zX,BX,jX,VX,HX,GX,WX,$X],Mwe=Awe,Dwe=[...Mwe,Ewe,Swe,Twe];var HZe=[...Dwe,Iwe];function qK(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _d(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qX(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ni=class n{constructor(e,t){this.comparator=e,this.root=t||lc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lg(this.root,e,this.comparator,!1)}getReverseIterator(){return new lg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lg(this.root,e,this.comparator,!0)}},lg=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},lc=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Pt(27949);return e+(this.isRed()?0:1)}};lc.EMPTY=null,lc.RED=!0,lc.BLACK=!1;lc.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt(57766)}get value(){throw Pt(16141)}get color(){throw Pt(16727)}get left(){throw Pt(29726)}get right(){throw Pt(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new lc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ir=class n{constructor(e){this.comparator=e,this.data=new Ni(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rC(this.data.getIterator())}getIteratorFrom(e){return new rC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},rC=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ro=class n{constructor(e){this.fields=e,e.sort(co.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ir(co.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pg(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var sC=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ts=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sC("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ts.EMPTY_BYTE_STRING=new ts("");var Rwe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nl(n){if(qn(!!n,39018),typeof n=="string"){let e=0,t=Rwe.exec(n);if(qn(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ei(n.seconds),nanos:Ei(n.nanos)}}function Ei(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kl(n){return typeof n=="string"?ts.fromBase64String(n):ts.fromUint8Array(n)}var KX="server_timestamp",XX="__type__",YX="__previous_value__",QX="__local_write_time__";function VC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XX])===null||t===void 0?void 0:t.stringValue)===KX}function UC(n){let e=n.mapValue.fields[YX];return VC(e)?UC(e):e}function Fb(n){let e=Nl(n.mapValue.fields[QX].timestampValue);return new cr(e.seconds,e.nanos)}var OV=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},oC="(default)",aC=class n{constructor(e,t){this.projectId=e,this.database=t||oC}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===oC}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pU="__type__",JX="__max__",XI={mapValue:{fields:{__type__:{stringValue:JX}}}},mU="__vector__",mg="value";function fd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VC(n)?4:eY(n)?9007199254740991:ZX(n)?10:11:Pt(28295,{value:n})}function fc(n,e){if(n===e)return!0;let t=fd(n);if(t!==fd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fb(n).isEqual(Fb(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Nl(r.timestampValue),a=Nl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return kl(r.bytesValue).isEqual(kl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ei(r.geoPointValue.latitude)===Ei(s.geoPointValue.latitude)&&Ei(r.geoPointValue.longitude)===Ei(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ei(r.integerValue)===Ei(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ei(r.doubleValue),a=Ei(s.doubleValue);return o===a?Lb(o)===Lb(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return pg(n.arrayValue.values||[],e.arrayValue.values||[],fc);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(qK(o)!==qK(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!fc(o[c],a[c])))return!1;return!0})(n,e);default:return Pt(52216,{left:n})}}function Vb(n,e){return(n.values||[]).find(t=>fc(t,e))!==void 0}function gg(n,e){if(n===e)return 0;let t=fd(n),i=fd(e);if(t!==i)return cn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ei(s.integerValue||s.doubleValue),c=Ei(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return KK(n.timestampValue,e.timestampValue);case 4:return KK(Fb(n),Fb(e));case 5:return PV(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=kl(s),c=kl(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=cn(a[l],c[l]);if(u!==0)return u}return cn(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=cn(Ei(s.latitude),Ei(o.latitude));return a!==0?a:cn(Ei(s.longitude),Ei(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return XK(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,u;let d=s.fields||{},h=o.fields||{},f=(a=d[mg])===null||a===void 0?void 0:a.arrayValue,g=(c=h[mg])===null||c===void 0?void 0:c.arrayValue,v=cn(((l=f?.values)===null||l===void 0?void 0:l.length)||0,((u=g?.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:XK(f,g)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===XI.mapValue&&o===XI.mapValue)return 0;if(s===XI.mapValue)return 1;if(o===XI.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=PV(c[d],u[d]);if(h!==0)return h;let f=gg(a[c[d]],l[u[d]]);if(f!==0)return f}return cn(c.length,u.length)})(n.mapValue,e.mapValue);default:throw Pt(23264,{le:t})}}function KK(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return cn(n,e);let t=Nl(n),i=Nl(e),r=cn(t.seconds,i.seconds);return r!==0?r:cn(t.nanos,i.nanos)}function XK(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=gg(t[r],i[r]);if(s)return s}return cn(t.length,i.length)}function _g(n){return LV(n)}function LV(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Nl(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return kl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return wt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=LV(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${LV(t.fields[o])}`;return r+"}"})(n.mapValue):Pt(61005,{value:n})}function JI(n){switch(fd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=UC(n);return e?16+JI(e):16;case 5:return 2*n.stringValue.length;case 6:return kl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+JI(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return _d(i.fields,(s,o)=>{r+=s.length+JI(o)}),r})(n.mapValue);default:throw Pt(13486,{value:n})}}function cC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FV(n){return!!n&&"integerValue"in n}function gU(n){return!!n&&"arrayValue"in n}function YK(n){return!!n&&"nullValue"in n}function QK(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ZI(n){return!!n&&"mapValue"in n}function ZX(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pU])===null||t===void 0?void 0:t.stringValue)===mU}function Rb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _d(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Rb(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eY(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JX}var GZe={mapValue:{fields:{[pU]:{stringValue:mU},[mg]:{arrayValue:{}}}}};var ao=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ZI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rb(t)}setAll(e){let t=co.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Rb(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());ZI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ZI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_d(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Rb(this.value))}};function tY(n){let e=[];return _d(n.fields,(t,i)=>{let r=new co([t]);if(ZI(i)){let s=tY(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Ro(e)}var Ea=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Jt.min(),Jt.min(),Jt.min(),ao.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Jt.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Jt.min(),Jt.min(),ao.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Jt.min(),Jt.min(),ao.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var pd=class{constructor(e,t){this.position=e,this.inclusive=t}};function JK(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=wt.comparator(wt.fromName(o.referenceValue),t.key):i=gg(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZK(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fc(n.position[t],e.position[t]))return!1;return!0}var vf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Pwe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var lC=class{},or=class n extends lC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UV(e,t,i):t==="array-contains"?new HV(e,i):t==="in"?new jV(e,i):t==="not-in"?new GV(e,i):t==="array-contains-any"?new WV(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new BV(e,i):new zV(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gg(t,this.value)):t!==null&&fd(this.value)===fd(t)&&this.matchesComparison(gg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Sa=class n extends lC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return nY(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function nY(n){return n.op==="and"}function iY(n){return Nwe(n)&&nY(n)}function Nwe(n){for(let e of n.filters)if(e instanceof Sa)return!1;return!0}function VV(n){if(n instanceof or)return n.field.canonicalString()+n.op.toString()+_g(n.value);if(iY(n))return n.filters.map(e=>VV(e)).join(",");{let e=n.filters.map(t=>VV(t)).join(",");return`${n.op}(${e})`}}function rY(n,e){return n instanceof or?(function(i,r){return r instanceof or&&i.op===r.op&&i.field.isEqual(r.field)&&fc(i.value,r.value)})(n,e):n instanceof Sa?(function(i,r){return r instanceof Sa&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&rY(o,r.filters[a]),!0):!1})(n,e):void Pt(19439)}function sY(n){return n instanceof or?(function(t){return`${t.field.canonicalString()} ${t.op} ${_g(t.value)}`})(n):n instanceof Sa?(function(t){return t.op.toString()+" {"+t.getFilters().map(sY).join(" ,")+"}"})(n):"Filter"}var UV=class extends or{constructor(e,t,i){super(e,t,i),this.key=wt.fromName(i.referenceValue)}matches(e){let t=wt.comparator(e.key,this.key);return this.matchesComparison(t)}},BV=class extends or{constructor(e,t){super(e,"in",t),this.keys=oY("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},zV=class extends or{constructor(e,t){super(e,"not-in",t),this.keys=oY("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function oY(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>wt.fromName(i.referenceValue))}var HV=class extends or{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gU(t)&&Vb(t.arrayValue,this.value)}},jV=class extends or{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vb(this.value.arrayValue,t)}},GV=class extends or{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vb(this.value.arrayValue,t)}},WV=class extends or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gU(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Vb(this.value.arrayValue,i))}};var $V=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function eX(n,e=null,t=[],i=[],r=null,s=null,o=null){return new $V(n,e,t,i,r,s,o)}function _U(n){let e=qt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>VV(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),FC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>_g(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>_g(i)).join(",")),e.Pe=t}return e.Pe}function yU(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Pwe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rY(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZK(n.startAt,e.startAt)&&ZK(n.endAt,e.endAt)}function qV(n){return wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ol=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function kwe(n,e,t,i,r,s,o,a){return new Ol(n,e,t,i,r,s,o,a)}function vU(n){return new Ol(n)}function tX(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bU(n){return n.collectionGroup!==null}function ug(n){let e=qt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ir(co.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new vf(s,i))}),t.has(co.keyField().canonicalString())||e.Te.push(new vf(co.keyField(),i))}return e.Te}function uc(n){let e=qt(n);return e.Ie||(e.Ie=Owe(e,ug(n))),e.Ie}function Owe(n,e){if(n.limitType==="F")return eX(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new vf(r.field,s)});let t=n.endAt?new pd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new pd(n.startAt.position,n.startAt.inclusive):null;return eX(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function KV(n,e){let t=n.filters.concat([e]);return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function uC(n,e,t){return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function BC(n,e){return yU(uc(n),uc(e))&&n.limitType===e.limitType}function aY(n){return`${_U(uc(n))}|lt:${n.limitType}`}function og(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>sY(r)).join(", ")}]`),FC(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>_g(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>_g(r)).join(",")),`Target(${i})`})(uc(n))}; limitType=${n.limitType})`}function zC(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):wt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of ug(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=JK(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,ug(i),r)||i.endAt&&!(function(o,a,c){let l=JK(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,ug(i),r))})(n,e)}function Lwe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cY(n){return(e,t)=>{let i=!1;for(let r of ug(n)){let s=Fwe(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Fwe(n,e,t){let i=n.field.isKeyField()?wt.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?gg(c,l):Pt(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Pt(19790,{direction:n.dir})}}var Ll=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_d(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return qX(this.inner)}size(){return this.innerSize}};var Vwe=new Ni(wt.comparator);function Fl(){return Vwe}var lY=new Ni(wt.comparator);function Db(...n){let e=lY;for(let t of n)e=e.insert(t.key,t);return e}function uY(n){let e=lY;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ff(){return Pb()}function dY(){return Pb()}function Pb(){return new Ll(n=>n.toString(),(n,e)=>n.isEqual(e))}var Uwe=new Ni(wt.comparator),Bwe=new Ir(wt.comparator);function vn(...n){let e=Bwe;for(let t of n)e=e.add(t);return e}var zwe=new Ir(cn);function Hwe(){return zwe}function xU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lb(e)?"-0":e}}function hY(n){return{integerValue:""+n}}function jwe(n,e){return ywe(e)?hY(e):xU(n,e)}var yg=class{constructor(){this._=void 0}};function Gwe(n,e,t){return n instanceof vg?(function(r,s){let o={fields:{[XX]:{stringValue:KX},[QX]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&VC(s)&&(s=UC(s)),s&&(o.fields[YX]=s),{mapValue:o}})(t,e):n instanceof bf?pY(n,e):n instanceof xf?mY(n,e):(function(r,s){let o=fY(r,s),a=nX(o)+nX(r.Ee);return FV(o)&&FV(r.Ee)?hY(a):xU(r.serializer,a)})(n,e)}function Wwe(n,e,t){return n instanceof bf?pY(n,e):n instanceof xf?mY(n,e):t}function fY(n,e){return n instanceof bg?(function(i){return FV(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var vg=class extends yg{},bf=class extends yg{constructor(e){super(),this.elements=e}};function pY(n,e){let t=gY(e);for(let i of n.elements)t.some(r=>fc(r,i))||t.push(i);return{arrayValue:{values:t}}}var xf=class extends yg{constructor(e){super(),this.elements=e}};function mY(n,e){let t=gY(e);for(let i of n.elements)t=t.filter(r=>!fc(r,i));return{arrayValue:{values:t}}}var bg=class extends yg{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function nX(n){return Ei(n.integerValue||n.doubleValue)}function gY(n){return gU(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function $we(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof bf&&r instanceof bf||i instanceof xf&&r instanceof xf?pg(i.elements,r.elements,fc):i instanceof bg&&r instanceof bg?fc(i.Ee,r.Ee):i instanceof vg&&r instanceof vg})(n.transform,e.transform)}var XV=class{constructor(e,t){this.version=e,this.transformResults=t}},dc=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eC(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xg=class{};function _Y(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ub(n.key,dc.none()):new wf(n.key,n.data,dc.none());{let t=n.data,i=ao.empty(),r=new Ir(co.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new pc(n.key,i,new Ro(r.toArray()),dc.none())}}function qwe(n,e,t){n instanceof wf?(function(r,s,o){let a=r.value.clone(),c=rX(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof pc?(function(r,s,o){if(!eC(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=rX(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(yY(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Nb(n,e,t,i){return n instanceof wf?(function(s,o,a,c){if(!eC(s.precondition,o))return a;let l=s.value.clone(),u=sX(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof pc?(function(s,o,a,c){if(!eC(s.precondition,o))return a;let l=sX(s.fieldTransforms,c,o),u=o.data;return u.setAll(yY(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return eC(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Kwe(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=fY(i.transform,r||null);s!=null&&(t===null&&(t=ao.empty()),t.set(i.field,s))}return t||null}function iX(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&pg(i,r,(s,o)=>$we(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wf=class extends xg{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},pc=class extends xg{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function yY(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function rX(n,e,t){let i=new Map;qn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Wwe(o,a,t[r]))}return i}function sX(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,Gwe(s,o,e))}return i}var Ub=class extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},YV=class extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var QV=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&qwe(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nb(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Nb(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=dY();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=_Y(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&pg(this.mutations,e.mutations,(t,i)=>iX(t,i))&&pg(this.baseMutations,e.baseMutations,(t,i)=>iX(t,i))}},JV=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){qn(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Uwe})(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var ZV=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var e3=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rr,Dn;function Xwe(n){switch(n){case fe.OK:return Pt(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Pt(15467,{code:n})}}function vY(n){if(n===void 0)return Pl("GRPC error has no .code"),fe.UNKNOWN;switch(n){case rr.OK:return fe.OK;case rr.CANCELLED:return fe.CANCELLED;case rr.UNKNOWN:return fe.UNKNOWN;case rr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case rr.INTERNAL:return fe.INTERNAL;case rr.UNAVAILABLE:return fe.UNAVAILABLE;case rr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case rr.NOT_FOUND:return fe.NOT_FOUND;case rr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case rr.ABORTED:return fe.ABORTED;case rr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case rr.DATA_LOSS:return fe.DATA_LOSS;default:return Pt(39323,{code:n})}}(Dn=rr||(rr={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";var oX=null;var Ywe=new Dl([4294967295,4294967295],0);function aX(n){let e=DX().encode(n),t=new gV;return t.update(e),new Uint8Array(t.digest())}function cX(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dl([t,i],0),new Dl([r,s],0)]}var t3=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new pf(`Invalid padding: ${t}`);if(i<0)throw new pf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new pf(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new pf(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Dl.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(Dl.fromNumber(i)));return r.compare(Ywe)===1&&(r=new Dl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=aX(e),[i,r]=cX(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=aX(e),[i,r]=cX(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);this.we(o)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},pf=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dC=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Bb.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Jt.min(),r,new Ni(cn),Fl(),vn())}},Bb=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,vn(),vn(),vn())}};var dg=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},hC=class{constructor(e,t){this.targetId=e,this.De=t}},fC=class{constructor(e,t,i=ts.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},pC=class{constructor(){this.ve=0,this.Ce=lX(),this.Fe=ts.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=vn(),t=vn(),i=vn();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Pt(38017,{changeType:s})}}),new Bb(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=lX()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,qn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},n3=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fl(),this.je=YI(),this.Je=YI(),this.He=new Ni(cn)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Pt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let s=r.target;if(qV(s))if(i===0){let o=new wt(s.path);this.Xe(t,o,Ea.newNoDocument(o,Jt.min()))}else qn(i===1,20013,{expectedCount:i});else{let o=this.ot(t);if(o!==i){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}oX?.ct((function(u,d,h,f,g){var v,_,b,R,P,N;let U={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},O=d.unchangedNames;return O&&(U.bloomFilter={applied:g===0,hashCount:(v=O?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(R=(b=(_=O?.bits)===null||_===void 0?void 0:_.bitmap)===null||b===void 0?void 0:b.length)!==null&&R!==void 0?R:0,padding:(N=(P=O?.bits)===null||P===void 0?void 0:P.padding)!==null&&N!==void 0?N:0,mightContain:S=>{var w;return(w=f?.mightContain(S))!==null&&w!==void 0&&w}}),U})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=kl(i).toUint8Array()}catch(c){if(c instanceof sC)return hd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new t3(o,r,s)}catch(c){return hd(c instanceof pf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&qV(a.target)){let c=new wt(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Ea.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let i=vn();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let r=new dC(e,t,this.He,this.ze,i);return this.ze=Fl(),this.je=YI(),this.Je=YI(),this.He=new Ni(cn),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new pC,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ir(cn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ir(cn),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||it("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pC),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function YI(){return new Ni(wt.comparator)}function lX(){return new Ni(wt.comparator)}var Qwe={asc:"ASCENDING",desc:"DESCENDING"},Jwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zwe={and:"AND",or:"OR"},i3=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function r3(n,e){return n.useProto3Json||FC(e)?e:{value:e}}function mC(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bY(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eEe(n,e){return mC(n,e.toTimestamp())}function hc(n){return qn(!!n,49232),Jt.fromTimestamp((function(t){let i=Nl(t);return new cr(i.seconds,i.nanos)})(n))}function wU(n,e){return s3(n,e).canonicalString()}function s3(n,e){let t=(function(r){return new pi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xY(n){let e=pi.fromString(n);return qn(IY(e),10190,{key:e.toString()}),e}function o3(n,e){return wU(n.databaseId,e.path)}function wV(n,e){let t=xY(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new wt(EY(t))}function wY(n,e){return wU(n.databaseId,e)}function tEe(n){let e=xY(n);return e.length===4?pi.emptyPath():EY(e)}function a3(n){return new pi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EY(n){return qn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function uX(n,e,t){return{name:o3(n,e),fields:t.value.mapValue.fields}}function nEe(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Pt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(qn(u===void 0||typeof u=="string",58123),ts.fromBase64String(u||"")):(qn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ts.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?fe.UNKNOWN:vY(l.code);return new Ve(u,l.message||"")})(o);t=new fC(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=wV(n,i.document.name),s=hc(i.document.updateTime),o=i.document.createTime?hc(i.document.createTime):Jt.min(),a=new ao({mapValue:{fields:i.document.fields}}),c=Ea.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new dg(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=wV(n,i.document),s=i.readTime?hc(i.readTime):Jt.min(),o=Ea.newNoDocument(r,s),a=i.removedTargetIds||[];t=new dg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=wV(n,i.document),s=i.removedTargetIds||[];t=new dg([],s,r,null)}else{if(!("filter"in e))return Pt(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new e3(r,s),a=i.targetId;t=new hC(a,o)}}return t}function iEe(n,e){let t;if(e instanceof wf)t={update:uX(n,e.key,e.value)};else if(e instanceof Ub)t={delete:o3(n,e.key)};else if(e instanceof pc)t={update:uX(n,e.key,e.data),updateMask:hEe(e.fieldMask)};else{if(!(e instanceof YV))return Pt(16599,{Rt:e.type});t={verify:o3(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(s,o){let a=o.transform;if(a instanceof vg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bg)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Pt(20930,{transform:o.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:eEe(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pt(27497)})(n,e.precondition)),t}function rEe(n,e){return n&&n.length>0?(qn(e!==void 0,14353),n.map(t=>(function(r,s){let o=r.updateTime?hc(r.updateTime):hc(s);return o.isEqual(Jt.min())&&(o=hc(s)),new XV(o,r.transformResults||[])})(t,e))):[]}function sEe(n,e){return{documents:[wY(n,e.path)]}}function oEe(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=wY(n,r);let s=(function(l){if(l.length!==0)return TY(Sa.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:ag(h.field),direction:lEe(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=r3(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:r}}function aEe(n){let e=tEe(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){qn(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=SY(d);return h instanceof Sa&&iY(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(g){return new vf(cg(g.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(g.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,FC(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,f=d.values||[];return new pd(f,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,f=d.values||[];return new pd(f,h)})(t.endAt)),kwe(e,r,o,s,a,"F",c,l)}function cEe(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SY(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=cg(t.unaryFilter.field);return or.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=cg(t.unaryFilter.field);return or.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=cg(t.unaryFilter.field);return or.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=cg(t.unaryFilter.field);return or.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pt(61313);default:return Pt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return or.create(cg(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pt(58110);default:return Pt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Sa.create(t.compositeFilter.filters.map(i=>SY(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pt(1026)}})(t.compositeFilter.op))})(n):Pt(30097,{filter:n})}function lEe(n){return Qwe[n]}function uEe(n){return Jwe[n]}function dEe(n){return Zwe[n]}function ag(n){return{fieldPath:n.canonicalString()}}function cg(n){return co.fromServerFormat(n.fieldPath)}function TY(n){return n instanceof or?(function(t){if(t.op==="=="){if(QK(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NAN"}};if(YK(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QK(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NOT_NAN"}};if(YK(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ag(t.field),op:uEe(t.op),value:t.value}}})(n):n instanceof Sa?(function(t){let i=t.getFilters().map(r=>TY(r));return i.length===1?i[0]:{compositeFilter:{op:dEe(t.op),filters:i}}})(n):Pt(54877,{filter:n})}function hEe(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IY(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zb=class n{constructor(e,t,i,r,s=Jt.min(),o=Jt.min(),a=ts.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var c3=class{constructor(e){this.gt=e}};function fEe(n){let e=aEe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uC(e,e.limit,"L"):e}var gC=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ei(e.integerValue));else if("doubleValue"in e){let i=Ei(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),Lb(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=Nl(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(kl(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?eY(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):ZX(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Pt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let s=e.fields||{};this.Ct(t,53);let o=mg,a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(Ei(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),wt.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};gC.Ut=new gC;var l3=class{constructor(){this.Dn=new u3}addToCollectionParentIndex(e,t){return this.Dn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(yf.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(yf.min())}updateCollectionGroup(e,t,i){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}},u3=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ir(pi.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ir(pi.comparator)).toArray()}};var WZe=new Uint8Array(0);var dX={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CY=41943040,Do=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(CY,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);var Hb=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var hX="LruGarbageCollector",pEe=1048576;function fX([n,e],[t,i]){let r=cn(n,t);return r===0?cn(e,i):r}var d3=class{constructor(e){this.Tr=e,this.buffer=new Ir(fX),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();fX(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},h3=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){it(hX,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ag(t)?it(hX,"Ignoring IndexedDB error during garbage collection: ",t):await Cg(t)}await this.Rr(3e5)})}},f3=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(hU.ue);let i=new d3(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(dX)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dX):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),sg()<=fn.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function mEe(n,e){return new f3(n,e)}var p3=class{constructor(){this.changes=new Ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ea.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var m3=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var g3=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Nb(i.mutation,r,Ro.empty(),cr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,vn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=vn()){let r=ff();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Db();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=ff();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,vn()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Fl(),o=Pb(),a=(function(){return Pb()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof pc)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Nb(u.mutation,l,u.mutation.getFieldMask(),cr.now())):o.set(l.key,Ro.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new m3(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Pb(),r=new Ni((o,a)=>o-a),s=vn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||Ro.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||vn()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=dY();u.forEach(h=>{if(!s.has(h)){let f=_Y(t.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ie.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ie.resolve(ff()),a=Ob,c=s;return o.next(l=>Ie.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ie.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,vn())).next(u=>({batchId:a,changes:uY(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wt(t)).next(i=>{let r=Db();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Db();return this.indexManager.getCollectionParents(e,s).next(a=>Ie.forEach(a,c=>{let l=(function(d,h){return new Ol(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Ea.newInvalidDocument(u)))});let a=Db();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Nb(u.mutation,l,Ro.empty(),cr.now()),zC(t,l)&&(a=a.insert(c,l))}),a})}};var _3=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:hc(r.createTime)}})(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:fEe(r.bundledQuery),readTime:hc(r.readTime)}})(t)),Ie.resolve()}};var y3=class{constructor(){this.overlays=new Ni(wt.comparator),this.kr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ff();return Ie.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.wt(e,t,s)}),Ie.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),Ie.resolve()}getOverlaysForCollection(e,t,i){let r=ff(),s=t.length+1,o=new wt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ni((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=ff(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=ff(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Ie.resolve(a)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new ZV(t,i));let s=this.kr.get(t);s===void 0&&(s=vn(),this.kr.set(t,s)),this.kr.set(t,s.add(i.key))}};var v3=class{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}};var jb=class{constructor(){this.qr=new Ir(sr.Qr),this.$r=new Ir(sr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new sr(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new sr(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new wt(new pi([])),i=new sr(t,e),r=new sr(t,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new wt(new pi([])),i=new sr(t,e),r=new sr(t,e+1),s=vn();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new sr(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},sr=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return wt.comparator(e.key,t.key)||cn(e.Hr,t.Hr)}static Ur(e,t){return cn(e.Hr,t.Hr)||wt.comparator(e.key,t.key)}};var b3=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ir(sr.Qr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new QV(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Yr=this.Yr.add(new sr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,t){return Ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),s=r<0?0:r;return Ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?fU:this.er-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{let a=this.Zr(o.Hr);s.push(a)}),Ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ir(cn);return t.forEach(r=>{let s=new sr(r,0),o=new sr(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),Ie.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;wt.isDocumentKey(s)||(s=s.child(""));let o=new sr(new wt(s),0),a=new Ir(cn);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Hr)),!0)},o),Ie.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){qn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Ie.forEach(t.mutations,r=>{let s=new sr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new sr(t,0),r=this.Yr.firstAfterOrEqual(i);return Ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var x3=class{constructor(e){this.ni=e,this.docs=(function(){return new Ni(wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Ie.resolve(i?i.document.mutableCopy():Ea.newInvalidDocument(t))}getEntries(e,t){let i=Fl();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ea.newInvalidDocument(r))}),Ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Fl(),o=t.path,a=new wt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||mwe(pwe(u),i)<=0||(r.has(u.key)||zC(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ie.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Pt(9500)}ri(e,t){return Ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new w3(this)}getSize(e){return Ie.resolve(this.size)}},w3=class extends p3{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),Ie.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var E3=class{constructor(e){this.persistence=e,this.ii=new Ll(t=>_U(t),yU),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this.si=0,this.oi=new jb,this.targetCount=0,this._i=Hb.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Ie.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Hb(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.hr(t),Ie.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ie.waitFor(s).next(()=>r)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return Ie.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Ie.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return Ie.resolve(i)}containsKey(e,t){return Ie.resolve(this.oi.containsKey(t))}};var _C=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new hU(0),this.ci=!1,this.ci=!0,this.li=new v3,this.referenceDelegate=e(this),this.hi=new E3(this),this.indexManager=new l3,this.remoteDocumentCache=(function(r){return new x3(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new c3(t),this.Ti=new _3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new b3(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){it("MemoryPersistence","Starting transaction:",e);let r=new S3(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,t){return Ie.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},S3=class extends kV{constructor(e){super(),this.currentSequenceNumber=e}},T3=class n{constructor(e){this.persistence=e,this.Ai=new jb,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Pt(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Ie.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.mi,i=>{let r=wt.fromPath(i);return this.fi(e,r).next(s=>{s||t.removeEntry(r,Jt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Ie.or([()=>Ie.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},yC=class n{constructor(e,t){this.persistence=e,this.gi=new Ll(i=>vwe(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=mEe(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return Ie.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?Ie.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Jt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Ie.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=JI(e.data.value)),t}Sr(e,t,i){return Ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return Ie.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var I3=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=vn(),r=vn();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var C3=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var A3=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return wW()?8:_we(Er())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new C3;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(sg()<=fn.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",og(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(sg()<=fn.DEBUG&&it("QueryEngine","Query:",og(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(sg()<=fn.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",og(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,uc(t))):Ie.resolve())}ps(e,t){if(tX(t))return Ie.resolve(null);let i=uc(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=uC(t,null,"F"),i=uc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=vn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,uC(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,i,r){return tX(t)||r.isEqual(Jt.min())?Ie.resolve(null):this.gs.getDocuments(e,i).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,i,r)?Ie.resolve(null):(sg()<=fn.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),og(t)),this.vs(e,o,t,fwe(r,Ob)).next(a=>a))})}bs(e,t){let i=new Ir(cY(e));return t.forEach((r,s)=>{zC(e,s)&&(i=i.add(s))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,i){return sg()<=fn.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",og(t)),this.gs.getDocumentsMatchingQuery(e,t,yf.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var EU="LocalStore",gEe=3e8,M3=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Ni(cn),this.Ms=new Ll(s=>_U(s),yU),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function _Ee(n,e,t,i){return new M3(n,e,t,i)}async function AY(n,e){let t=qt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=vn();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function yEe(n,e){let t=qt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let d=l.batch,h=d.keys(),f=Ie.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(c,g)).next(v=>{let _=l.docVersions.get(g);qn(_!==null,48541),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),u.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))})(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let c=vn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function MY(n){let e=qt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function vEe(n,e){let t=qt(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ts.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),(function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=gEe?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(h,f,u)&&a.push(t.hi.updateTargetData(s,f))});let c=Fl(),l=vn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(bEe(s,o,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!i.isEqual(Jt.min())){let u=t.hi.getLastRemoteSnapshotVersion(s).next(d=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ie.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=r,s))}function bEe(n,e,t){let i=vn(),r=vn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Fl();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Jt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):it(EU,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function xEe(n,e){let t=qt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=fU),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function wEe(n,e){let t=qt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(s=>s?(r=s,Ie.resolve(r)):t.hi.allocateTargetId(i).next(o=>(r=new zb(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function D3(n,e,t){let i=qt(n),r=i.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ag(o))throw o;it(EU,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function pX(n,e,t){let i=qt(n),r=Jt.min(),s=vn();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=qt(c),h=d.Ms.get(u);return h!==void 0?Ie.resolve(d.Fs.get(h)):d.hi.getTargetData(l,u)})(i,o,uc(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,t?r:Jt.min(),t?s:vn())).next(a=>(EEe(i,Lwe(e),a),{documents:a,qs:s})))}function EEe(n,e,t){let i=n.xs.get(e)||Jt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.xs.set(e,i)}var vC=class{constructor(){this.activeTargetIds=Hwe()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var R3=class{constructor(){this.Fo=new vC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var P3=class{xo(e){}shutdown(){}};var mX="ConnectivityMonitor",bC=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){it(mX,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){it(mX,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var QI=null;function N3(){return QI===null?QI=(function(){return 268435456+Math.round(2147483648*Math.random())})():QI++,"0x"+QI.toString(16)}var EV="RestConnection",SEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},k3=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===oC?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,s){let o=N3(),a=this.Go(e,t.toUriEncodedString());it(EV,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);let{host:l}=new URL(a),u=$u(l);return this.jo(e,a,c,i,u).then(d=>(it(EV,`Received RPC '${e}' ${o}: `,d),d),d=>{throw hd(EV,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Jo(e,t,i,r,s,o){return this.Wo(e,t,i,r,s)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ig})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,t){let i=SEe[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var O3=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var es="WebChannelConnection",L3=class extends k3{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,s){let o=N3();return new Promise((a,c)=>{let l=new _V;l.setWithCredentials(!0),l.listenOnce(yV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mb.NO_ERROR:let d=l.getResponseJson();it(es,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Mb.TIMEOUT:it(es,`RPC '${e}' ${o} timed out`),c(new Ve(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Mb.HTTP_ERROR:let h=l.getStatus();if(it(es,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let g=f?.error;if(g&&g.status&&g.message){let v=(function(b){let R=b.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(R)>=0?R:fe.UNKNOWN})(g.status);c(new Ve(v,g.message))}else c(new Ve(fe.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ve(fe.UNAVAILABLE,"Connection failed."));break;default:Pt(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{it(es,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);it(es,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}P_(e,t,i){let r=N3(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xV(),a=bV(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");it(es,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.T_(d);let h=!1,f=!1,g=new O3({Ho:_=>{f?it(es,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(h||(it(es,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),it(es,`RPC '${e}' stream ${r} sending:`,_),d.send(_))},Yo:()=>d.close()}),v=(_,b,R)=>{_.listen(b,P=>{try{R(P)}catch(N){setTimeout(()=>{throw N},0)}})};return v(d,rg.EventType.OPEN,()=>{f||(it(es,`RPC '${e}' stream ${r} transport opened.`),g.s_())}),v(d,rg.EventType.CLOSE,()=>{f||(f=!0,it(es,`RPC '${e}' stream ${r} transport closed`),g.__(),this.I_(d))}),v(d,rg.EventType.ERROR,_=>{f||(f=!0,hd(es,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),g.__(new Ve(fe.UNAVAILABLE,"The operation could not be completed")))}),v(d,rg.EventType.MESSAGE,_=>{var b;if(!f){let R=_.data[0];qn(!!R,16349);let P=R,N=P?.error||((b=P[0])===null||b===void 0?void 0:b.error);if(N){it(es,`RPC '${e}' stream ${r} received error:`,N);let U=N.status,O=(function(y){let x=rr[y];if(x!==void 0)return vY(x)})(U),S=N.message;O===void 0&&(O=fe.INTERNAL,S="Unknown error status: "+U+" with message "+N.message),f=!0,g.__(new Ve(O,S)),d.close()}else it(es,`RPC '${e}' stream ${r} received:`,R),g.a_(R)}}),v(a,vV.STAT_EVENT,_=>{_.stat===KI.PROXY?it(es,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===KI.NOPROXY&&it(es,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.o_()},0),g}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function SV(){return typeof document<"u"?document:null}function HC(n){return new i3(n,!0)}var xC=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&it("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var gX="PersistentStream",wC=class{constructor(e,t,i,r,s,o,a,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new xC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Pl(t.toString()),Pl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new Ve(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return it(gX,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(it(gX,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},F3=class extends wC{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=nEe(this.serializer,e),i=(function(s){if(!("targetChange"in s))return Jt.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Jt.min():o.readTime?hc(o.readTime):Jt.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=a3(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=qV(c)?{documents:sEe(s,c)}:{query:oEe(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bY(s,o.resumeToken);let l=r3(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Jt.min())>0){a.readTime=mC(s,o.snapshotVersion.toTimestamp());let l=r3(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=cEe(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=a3(this.serializer),t.removeTarget=e,this.k_(t)}},V3=class extends wC{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return qn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){qn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=rEe(e.writeResults,e.commitTime),i=hc(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=a3(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>iEe(this.serializer,i))};this.k_(t)}};var U3=class{},B3=class extends U3{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,s3(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(fe.UNKNOWN,s.toString())})}Jo(e,t,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,s3(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(fe.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},z3=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pl(t),this._a=!1):it("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ef="RemoteStore",H3=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{Sf(this)&&(it(Ef,"Restarting streams for network reachability change."),await(async function(c){let l=qt(c);l.Ia.add(4),await Kb(l),l.Aa.set("Unknown"),l.Ia.delete(4),await jC(l)})(this))})}),this.Aa=new z3(i,r)}};async function jC(n){if(Sf(n))for(let e of n.da)await e(!0)}async function Kb(n){for(let e of n.da)await e(!1)}function DY(n,e){let t=qt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),CU(t)?IU(t):Mg(t).x_()&&TU(t,e))}function SU(n,e){let t=qt(n),i=Mg(t);t.Ta.delete(e),i.x_()&&RY(t,e),t.Ta.size===0&&(i.x_()?i.B_():Sf(t)&&t.Aa.set("Unknown"))}function TU(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Jt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mg(n).H_(e)}function RY(n,e){n.Ra.$e(e),Mg(n).Y_(e)}function IU(n){n.Ra=new n3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Mg(n).start(),n.Aa.aa()}function CU(n){return Sf(n)&&!Mg(n).M_()&&n.Ta.size>0}function Sf(n){return qt(n).Ia.size===0}function PY(n){n.Ra=void 0}async function TEe(n){n.Aa.set("Online")}async function IEe(n){n.Ta.forEach((e,t)=>{TU(n,e)})}async function CEe(n,e){PY(n),CU(n)?(n.Aa.la(e),IU(n)):n.Aa.set("Unknown")}async function AEe(n,e,t){if(n.Aa.set("Online"),e instanceof fC&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))})(n,e)}catch(i){it(Ef,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await EC(n,i)}else if(e instanceof dg?n.Ra.Ye(e):e instanceof hC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Jt.min()))try{let i=await MY(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ta.get(l);u&&s.Ta.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ta.get(c);if(!u)return;s.Ta.set(c,u.withResumeToken(ts.EMPTY_BYTE_STRING,u.snapshotVersion)),RY(s,c);let d=new zb(u.target,c,l,u.sequenceNumber);TU(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){it(Ef,"Failed to raise snapshot:",i),await EC(n,i)}}async function EC(n,e,t){if(!Ag(e))throw e;n.Ia.add(1),await Kb(n),n.Aa.set("Offline"),t||(t=()=>MY(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{it(Ef,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await jC(n)})}function NY(n,e){return e().catch(t=>EC(n,t,e))}async function GC(n){let e=qt(n),t=md(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:fU;for(;MEe(e);)try{let r=await xEe(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,DEe(e,r)}catch(r){await EC(e,r)}kY(e)&&OY(e)}function MEe(n){return Sf(n)&&n.Pa.length<10}function DEe(n,e){n.Pa.push(e);let t=md(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function kY(n){return Sf(n)&&!md(n).M_()&&n.Pa.length>0}function OY(n){md(n).start()}async function REe(n){md(n).na()}async function PEe(n){let e=md(n);for(let t of n.Pa)e.X_(t.mutations)}async function NEe(n,e,t){let i=n.Pa.shift(),r=JV.from(i,e,t);await NY(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await GC(n)}async function kEe(n,e){e&&md(n).Z_&&await(async function(i,r){if((function(o){return Xwe(o)&&o!==fe.ABORTED})(r.code)){let s=i.Pa.shift();md(i).N_(),await NY(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await GC(i)}})(n,e),kY(n)&&OY(n)}async function _X(n,e){let t=qt(n);t.asyncQueue.verifyOperationInProgress(),it(Ef,"RemoteStore received new credentials");let i=Sf(t);t.Ia.add(3),await Kb(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await jC(t)}async function OEe(n,e){let t=qt(n);e?(t.Ia.delete(2),await jC(t)):e||(t.Ia.add(2),await Kb(t),t.Aa.set("Unknown"))}function Mg(n){return n.Va||(n.Va=(function(t,i,r){let s=qt(t);return s.ia(),new F3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:TEe.bind(null,n),e_:IEe.bind(null,n),n_:CEe.bind(null,n),J_:AEe.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),CU(n)?IU(n):n.Aa.set("Unknown")):(await n.Va.stop(),PY(n))})),n.Va}function md(n){return n.ma||(n.ma=(function(t,i,r){let s=qt(t);return s.ia(),new V3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:REe.bind(null,n),n_:kEe.bind(null,n),ea:PEe.bind(null,n),ta:NEe.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await GC(n)):(await n.ma.stop(),n.Pa.length>0&&(it(Ef,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var j3=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function AU(n,e){if(Pl("AsyncQueue",`${e}: ${n}`),Ag(n))return new Ve(fe.UNAVAILABLE,`${e}: ${n}`);throw n}var SC=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||wt.comparator(t.key,i.key):(t,i)=>wt.comparator(t.key,i.key),this.keyedMap=Db(),this.sortedSet=new Ni(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var TC=class{constructor(){this.fa=new Ni(wt.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Pt(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},wg=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,SC.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&BC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var G3=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},W3=class{constructor(){this.queries=yX(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=qt(t),s=r.queries;r.queries=yX(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(i)})})(this,new Ve(fe.ABORTED,"Firestore shutting down"))}};function yX(){return new Ll(n=>aY(n),BC)}async function LY(n,e){let t=qt(n),i=3,r=e.query,s=t.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new G3,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await t.onListen(r,!0);break;case 1:s.ya=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=AU(o,`Initialization of query '${og(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&MU(t)}async function FY(n,e){let t=qt(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function LEe(n,e){let t=qt(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&MU(t)}function FEe(n,e,t){let i=qt(n),r=i.queries.get(e);if(r)for(let s of r.wa)s.onError(t);i.queries.delete(e)}function MU(n){n.Da.forEach(e=>{e.next()})}var $3,vX;(vX=$3||($3={})).Fa="default",vX.Cache="cache";var IC=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new wg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=wg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$3.Cache}};var CC=class{constructor(e){this.key=e}},AC=class{constructor(e){this.key=e}},q3=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=vn(),this.mutatedKeys=vn(),this.Xa=cY(e),this.eu=new SC(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new TC,r=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=zC(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?g!==v&&(i.track({type:3,doc:f}),_=!0):this.iu(h,f)||(i.track({type:2,doc:f}),_=!0,(c&&this.Xa(f,c)>0||l&&this.Xa(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),_=!0):h&&!f&&(i.track({type:1,doc:h}),_=!0,(c||l)&&(a=!0)),_&&(f?(o=o.add(f),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((u,d)=>(function(f,g){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt(20277,{At:_})}};return v(f)-v(g)})(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(i),r=r!=null&&r;let a=t&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new wg(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new TC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=vn(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new AC(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new CC(i))}),t}uu(e){this.Ha=e.qs,this.Za=vn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return wg.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},DU="SyncEngine",K3=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},X3=class{constructor(e){this.key=e,this.lu=!1}},Y3=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ll(a=>aY(a),BC),this.Tu=new Map,this.Iu=new Set,this.du=new Ni(wt.comparator),this.Eu=new Map,this.Au=new jb,this.Ru={},this.Vu=new Map,this.mu=Hb.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function VEe(n,e,t=!0){let i=jY(n),r,s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await VY(i,e,t,!0),r}async function UEe(n,e){let t=jY(n);await VY(t,e,!0,!1)}async function VY(n,e,t,i){let r=await wEe(n.localStore,uc(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await BEe(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&DY(n.remoteStore,r),a}async function BEe(n,e,t,i,r){n.gu=(d,h,f)=>(async function(v,_,b,R){let P=_.view.nu(b);P.Ds&&(P=await pX(v.localStore,_.query,!1).then(({documents:S})=>_.view.nu(S,P)));let N=R&&R.targetChanges.get(_.targetId),U=R&&R.targetMismatches.get(_.targetId)!=null,O=_.view.applyChanges(P,v.isPrimaryClient,N,U);return xX(v,_.targetId,O._u),O.snapshot})(n,d,h,f);let s=await pX(n.localStore,e,!0),o=new q3(e,s.qs),a=o.nu(s.documents),c=Bb.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);xX(n,t,l._u);let u=new K3(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function zEe(n,e,t){let i=qt(n),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!BC(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await D3(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&SU(i.remoteStore,r.targetId),Q3(i,r.targetId)}).catch(Cg)):(Q3(i,r.targetId),await D3(i.localStore,r.targetId,!0))}async function HEe(n,e){let t=qt(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),SU(t.remoteStore,i.targetId))}async function jEe(n,e,t){let i=YEe(n);try{let r=await(function(o,a){let c=qt(o),l=cr.now(),u=a.reduce((f,g)=>f.add(g.key),vn()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Fl(),v=vn();return c.Os.getEntries(f,u).next(_=>{g=_,g.forEach((b,R)=>{R.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(_=>{d=_;let b=[];for(let R of a){let P=Kwe(R,d.get(R.key).overlayedDocument);P!=null&&b.push(new pc(R.key,P,tY(P.value.mapValue),dc.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,b,a)}).next(_=>{h=_;let b=_.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,_.batchId,b)})}).then(()=>({batchId:h.batchId,changes:uY(d)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Ni(cn)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(i,r.batchId,t),await Xb(i,r.changes),await GC(i.remoteStore)}catch(r){let s=AU(r,"Failed to persist write");t.reject(s)}}async function UY(n,e){let t=qt(n);try{let i=await vEe(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Eu.get(s);o&&(qn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?qn(o.lu,14607):r.removedDocuments.size>0&&(qn(o.lu,42227),o.lu=!1))}),await Xb(t,i,e)}catch(i){await Cg(i)}}function bX(n,e,t){let i=qt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=qt(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.wa)h.va(a)&&(l=!0)}),l&&MU(c)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GEe(n,e,t){let i=qt(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),s=r&&r.key;if(s){let o=new Ni(wt.comparator);o=o.insert(s,Ea.newNoDocument(s,Jt.min()));let a=vn().add(s),c=new dC(Jt.min(),new Map,new Ni(cn),o,a);await UY(i,c),i.du=i.du.remove(s),i.Eu.delete(e),RU(i)}else await D3(i.localStore,e,!1).then(()=>Q3(i,e,t)).catch(Cg)}async function WEe(n,e){let t=qt(n),i=e.batch.batchId;try{let r=await yEe(t.localStore,e);zY(t,i,null),BY(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Xb(t,r)}catch(r){await Cg(r)}}async function $Ee(n,e,t){let i=qt(n);try{let r=await(function(o,a){let c=qt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(qn(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(i.localStore,e);zY(i,e,t),BY(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Xb(i,r)}catch(r){await Cg(r)}}function BY(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function zY(n,e,t){let i=qt(n),r=i.Ru[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Q3(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||HY(n,i)})}function HY(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(SU(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),RU(n))}function xX(n,e,t){for(let i of t)i instanceof CC?(n.Au.addReference(i.key,e),qEe(n,i)):i instanceof AC?(it(DU,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||HY(n,i.key)):Pt(19791,{yu:i})}function qEe(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(it(DU,"New document in limbo: "+t),n.Iu.add(i),RU(n))}function RU(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new wt(pi.fromString(e)),i=n.mu.next();n.Eu.set(i,new X3(t)),n.du=n.du.insert(t,i),DY(n.remoteStore,new zb(uc(vU(t.path)),i,"TargetPurposeLimboResolution",hU.ue))}}async function Xb(n,e,t){let i=qt(n),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,c)=>{o.push(i.gu(c,e,t).then(l=>{var u;if((l||t)&&i.isPrimaryClient){let d=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){r.push(l);let d=I3.Es(c.targetId,l);s.push(d)}}))}),await Promise.all(o),i.hu.J_(r),await(async function(c,l){let u=qt(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ie.forEach(l,h=>Ie.forEach(h.Is,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>Ie.forEach(h.ds,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ag(d))throw d;it(EU,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.Fs.get(h),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);u.Fs=u.Fs.insert(h,v)}}})(i.localStore,s))}async function KEe(n,e){let t=qt(n);if(!t.currentUser.isEqual(e)){it(DU,"User change. New user:",e.toKey());let i=await AY(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ve(fe.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xb(t,i.Bs)}}function XEe(n,e){let t=qt(n),i=t.Eu.get(e);if(i&&i.lu)return vn().add(i.key);{let r=vn(),s=t.Tu.get(e);if(!s)return r;for(let o of s){let a=t.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function jY(n){let e=qt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UY.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XEe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GEe.bind(null,e),e.hu.J_=LEe.bind(null,e.eventManager),e.hu.pu=FEe.bind(null,e.eventManager),e}function YEe(n){let e=qt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WEe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$Ee.bind(null,e),e}var GY=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=HC(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,i){return null}Fu(t,i){return null}vu(t){return _Ee(this.persistence,new A3,t.initialUser,this.serializer)}Du(t){return new _C(T3.Vi,this.serializer)}bu(t){return new R3}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),J3=class extends GY{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){qn(this.persistence.referenceDelegate instanceof yC,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new h3(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new _C(i=>yC.Vi(i,t),this.serializer)}};var QEe=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bX(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KEe.bind(null,this.syncEngine),await OEe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new W3})()}createDatastore(t){let i=HC(t.databaseInfo.databaseId),r=(function(o){return new L3(o)})(t.databaseInfo);return(function(o,a,c,l){return new B3(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new H3(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>bX(this.syncEngine,i,0),(function(){return bC.C()?new bC:new P3})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new Y3(s,o,a,c,l,u);return d&&(h.fu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(s){let o=qt(s);it(Ef,"RemoteStore shutting down."),o.Ia.add(5),await Kb(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}return n.provider={build:()=>new n},n})();var MC=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var gd="FirestoreClient",Z3=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Tr.UNAUTHENTICATED,this.clientId=kb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{it(gd,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(it(gd,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=AU(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function TV(n,e){n.asyncQueue.verifyOperationInProgress(),it(gd,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await AY(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{hd("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{it("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{hd("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e}async function wX(n,e){n.asyncQueue.verifyOperationInProgress();let t=await JEe(n);it(gd,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>_X(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>_X(e.remoteStore,r)),n._onlineComponents=e}async function JEe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){it(gd,"Using user provided OfflineComponentProvider");try{await TV(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===fe.FAILED_PRECONDITION||r.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;hd("Error using user provided cache. Falling back to memory cache: "+t),await TV(n,new GY)}}else it(gd,"Using default OfflineComponentProvider"),await TV(n,new J3(void 0));return n._offlineComponents}async function WY(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(it(gd,"Using user provided OnlineComponentProvider"),await wX(n,n._uninitializedComponentsProvider._online)):(it(gd,"Using default OnlineComponentProvider"),await wX(n,new QEe))),n._onlineComponents}function ZEe(n){return WY(n).then(e=>e.syncEngine)}async function $Y(n){let e=await WY(n),t=e.eventManager;return t.onListen=VEe.bind(null,e.syncEngine),t.onUnlisten=zEe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UEe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HEe.bind(null,e.syncEngine),t}function eSe(n,e,t={}){let i=new xa;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new MC({next:h=>{u.Ou(),o.enqueueAndForget(()=>FY(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new Ve(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new Ve(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new IC(vU(a.path),u,{includeMetadataChanges:!0,ka:!0});return LY(s,d)})(await $Y(n),n.asyncQueue,e,t,i)),i.promise}function tSe(n,e,t={}){let i=new xa;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new MC({next:h=>{u.Ou(),o.enqueueAndForget(()=>FY(s,d)),h.fromCache&&c.source==="server"?l.reject(new Ve(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new IC(a,u,{includeMetadataChanges:!0,ka:!0});return LY(s,d)})(await $Y(n),n.asyncQueue,e,t,i)),i.promise}function qY(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var EX=new Map;var KY="firestore.googleapis.com",SX=!0,DC=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KY,this.ssl=SX}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:SX;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CY;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pEe)throw new Ve(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dwe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qY((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eg=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new IV;switch(i.type){case"firstParty":return new DV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=EX.get(t);i&&(it("ComponentProvider","Removing Datastore"),EX.delete(t),i.terminate())})(this),Promise.resolve()}};function XY(n,e,t,i={}){var r;n=wa(n,Eg);let s=$u(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(yT(`https://${c}`),vT("Firestore",!0)),o.host!==KY&&o.host!==c&&hd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:i});if(!ec(l,a)&&(n._setSettings(l),i.mockUserToken)){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Tr.MOCK_USER;else{u=gW(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Ve(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Tr(h)}n._authCredentials=new CV(new tC(u,d))}}var Vl=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Cr=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(qb(t,n._jsonSchema))return new n(e,i||null,new wt(pi.fromString(t.referencePath)))}};Cr._jsonSchemaVersion="firestore/documentReference/1.0",Cr._jsonSchema={type:ar("string",Cr._jsonSchemaVersion),referencePath:ar("string")};var cd=class n extends Vl{constructor(e,t,i){super(e,t,vU(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new wt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function YY(n,e,...t){if(n=er(n),RX("collection","path",e),n instanceof Eg){let i=pi.fromString(e,...t);return jK(i),new cd(n,null,i)}{if(!(n instanceof Cr||n instanceof cd))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(pi.fromString(e,...t));return jK(i),new cd(n.firestore,null,i)}}function PU(n,e,...t){if(n=er(n),arguments.length===1&&(e=kb.newId()),RX("doc","path",e),n instanceof Eg){let i=pi.fromString(e,...t);return HK(i),new Cr(n,null,new wt(i))}{if(!(n instanceof Cr||n instanceof cd))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(pi.fromString(e,...t));return HK(i),new Cr(n.firestore,n instanceof cd?n.converter:null,new wt(i))}}var TX="AsyncQueue",RC=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new xC(this,"async_queue_retry"),this.oc=()=>{let i=SV();i&&it(TX,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=SV();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=SV();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new xa;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ag(e))throw e;it(TX,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Pl("INTERNAL UNHANDLED ERROR: ",IX(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=j3.createAndSchedule(this,e,t,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&Pt(47125,{hc:IX(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function IX(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Ul=class extends Eg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new RC,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new RC(e),this._firestoreClient=void 0,await e}}};function QY(n,e){let t=typeof n=="object"?n:Yh(),i=typeof n=="string"?n:e||oC,r=Em(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=mW("firestore");s&&XY(r,...s)}return r}function NU(n){if(n._terminated)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nSe(n),n._firestoreClient}function nSe(n){var e,t,i;let r=n._freezeSettings(),s=(function(a,c,l,u){return new OV(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,qY(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Z3(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var ld=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ts.fromBase64String(e))}catch(t){throw new Ve(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qb(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ld._jsonSchemaVersion="firestore/bytes/1.0",ld._jsonSchema={type:ar("string",ld._jsonSchemaVersion),bytes:ar("string")};var Sg=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new co(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gb=class{constructor(e){this._methodName=e}};var ud=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(qb(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ud._jsonSchemaVersion="firestore/geoPoint/1.0",ud._jsonSchema={type:ar("string",ud._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};var dd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qb(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};dd._jsonSchemaVersion="firestore/vectorValue/1.0",dd._jsonSchema={type:ar("string",dd._jsonSchemaVersion),vectorValues:ar("object")};var iSe=/^__.*__$/,eU=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new wf(e,this.data,t,this.fieldTransforms)}},PC=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function JY(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt(40011,{Ec:n})}}var tU=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return kC(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(JY(this.Ec)&&iSe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},nU=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||HC(e)}Dc(e,t,i,r=!1){return new tU({Ec:e,methodName:t,bc:i,path:co.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Yb(n){let e=n._freezeSettings(),t=HC(n._databaseId);return new nU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ZY(n,e,t,i,r,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,r);kU("Data must be an object, but it was:",o,i);let a=tQ(i,o),c,l;if(s.merge)c=new Ro(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=iU(e,d,t);if(!o.contains(h))throw new Ve(fe.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);iQ(u,h)||u.push(h)}c=new Ro(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new eU(new ao(a),c,l)}var NC=class n extends Gb{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function rSe(n,e,t,i){let r=n.Dc(1,e,t);kU("Data must be an object, but it was:",r,i);let s=[],o=ao.empty();_d(i,(c,l)=>{let u=OU(e,c,t);l=er(l);let d=r.gc(u);if(l instanceof NC)s.push(u);else{let h=Qb(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new Ro(s);return new PC(o,a,r.fieldTransforms)}function sSe(n,e,t,i,r,s){let o=n.Dc(1,e,t),a=[iU(e,i,t)],c=[r];if(s.length%2!=0)throw new Ve(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(iU(e,s[h])),c.push(s[h+1]);let l=[],u=ao.empty();for(let h=a.length-1;h>=0;--h)if(!iQ(l,a[h])){let f=a[h],g=c[h];g=er(g);let v=o.gc(f);if(g instanceof NC)l.push(f);else{let _=Qb(g,v);_!=null&&(l.push(f),u.set(f,_))}}let d=new Ro(l);return new PC(u,d,o.fieldTransforms)}function eQ(n,e,t,i=!1){return Qb(t,n.Dc(i?4:3,e))}function Qb(n,e){if(nQ(n=er(n)))return kU("Unsupported field value:",e,n),tQ(n,e);if(n instanceof Gb)return(function(i,r){if(!JY(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let s=[],o=0;for(let a of i){let c=Qb(a,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(i,r){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jwe(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=cr.fromDate(i);return{timestampValue:mC(r.serializer,s)}}if(i instanceof cr){let s=new cr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mC(r.serializer,s)}}if(i instanceof ud)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ld)return{bytesValue:bY(r.serializer,i._byteString)};if(i instanceof Cr){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wU(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof dd)return(function(o,a){return{mapValue:{fields:{[pU]:{stringValue:mU},[mg]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return xU(a.serializer,l)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${LC(i)}`)})(n,e)}function tQ(n,e){let t={};return qX(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_d(n,(i,r)=>{let s=Qb(r,e.Vc(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function nQ(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof ud||n instanceof ld||n instanceof Cr||n instanceof Gb||n instanceof dd)}function kU(n,e,t){if(!nQ(t)||!PX(t)){let i=LC(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function iU(n,e,t){if((e=er(e))instanceof Sg)return e._internalPath;if(typeof e=="string")return OU(n,e);throw kC("Field path arguments must be of type string or ",n,!1,void 0,t)}var oSe=new RegExp("[~\\*/\\[\\]]");function OU(n,e,t){if(e.search(oSe)>=0)throw kC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sg(...e.split("."))._internalPath}catch{throw kC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kC(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ve(fe.INVALID_ARGUMENT,a+n+c)}function iQ(n,e){return n.some(t=>t.isEqual(e))}var Wb=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(LU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rU=class extends Wb{data(){return super.data()}};function LU(n,e){return typeof e=="string"?OU(n,e):e instanceof Sg?e._internalPath:e._delegate._internalPath}function aSe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $b=class{},Tg=class extends $b{};function rQ(n,e,...t){let i=[];e instanceof $b&&i.push(e),i=i.concat(t),(function(s){let o=s.filter(c=>c instanceof oU).length,a=s.filter(c=>c instanceof sU).length;if(o>1||o>0&&a>0)throw new Ve(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var sU=class n extends Tg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return cQ(e._query,t),new Vl(e.firestore,e.converter,KV(e._query,t))}_parse(e){let t=Yb(e.firestore);return(function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ve(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){AX(d,u);let g=[];for(let v of d)g.push(CX(c,s,v));h={arrayValue:{values:g}}}else h=CX(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||AX(d,u),h=eQ(a,o,d,u==="in"||u==="not-in");return or.create(l,u,h)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var oU=class n extends $b{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Sa.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)cQ(o,c),o=KV(o,c)})(e._query,t),new Vl(e.firestore,e.converter,KV(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var aU=class n extends Tg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,s,o){if(r.startAt!==null)throw new Ve(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ve(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vf(s,o)})(e._query,this._field,this._direction);return new Vl(e.firestore,e.converter,(function(r,s){let o=r.explicitOrderBy.concat([s]);return new Ol(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function sQ(n,e="asc"){let t=e,i=LU("orderBy",n);return aU._create(i,t)}var cU=class n extends Tg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Vl(e.firestore,e.converter,uC(e._query,this._limit,this._limitType))}};function oQ(n){return hwe("limit",n),cU._create("limit",n,"F")}var lU=class n extends Tg{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=cSe(e,this.type,this._docOrFields,this._inclusive);return new Vl(e.firestore,e.converter,(function(r,s){return new Ol(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)})(e._query,t))}};function aQ(...n){return lU._create("startAfter",n,!1)}function cSe(n,e,t,i){if(t[0]=er(t[0]),t[0]instanceof Wb)return(function(s,o,a,c,l){if(!c)throw new Ve(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of ug(s))if(d.field.isKeyField())u.push(cC(o,c.key));else{let h=c.data.field(d.field);if(VC(h))throw new Ve(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new pd(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=Yb(n.firestore);return(function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new Ve(fe.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let g=0;g<u.length;g++){let v=u[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof v}`);if(!bU(o)&&v.indexOf("/")!==-1)throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${v}' contains a slash.`);let _=o.path.child(pi.fromString(v));if(!wt.isDocumentKey(_))throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let b=new wt(_);f.push(cC(a,b))}else{let _=eQ(c,l,v);f.push(_)}}return new pd(f,d)})(n._query,n.firestore._databaseId,r,e,t,i)}}function CX(n,e,t){if(typeof(t=er(t))=="string"){if(t==="")throw new Ve(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bU(e)&&t.indexOf("/")!==-1)throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(pi.fromString(t));if(!wt.isDocumentKey(i))throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cC(n,new wt(i))}if(t instanceof Cr)return cC(n,t._key);throw new Ve(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LC(t)}.`)}function AX(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cQ(n,e){let t=(function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var uU=class{convertValue(e,t="none"){switch(fd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return _d(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[mg].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ei(o.doubleValue));return new dd(s)}convertGeoPoint(e){return new ud(Ei(e.latitude),Ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=UC(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fb(e));default:return null}}convertTimestamp(e){let t=Nl(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=pi.fromString(e);qn(IY(i),9688,{name:e});let r=new aC(i.get(1),i.get(3)),s=new wt(i.popFirst(5));return r.isEqual(t)||Pl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function lQ(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var mf=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gf=class n extends Wb{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(LU("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gf._jsonSchemaVersion="firestore/documentSnapshot/1.0",gf._jsonSchema={type:ar("string",gf._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};var hg=class extends gf{data(e={}){return super.data(e)}},fg=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new mf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new hg(this._firestore,this._userDataWriter,i.key,i,new mf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new hg(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new hg(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:lSe(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function lSe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt(61501,{type:n})}}function uQ(n){n=wa(n,Cr);let e=wa(n.firestore,Ul);return eSe(NU(e),n._key).then(t=>uSe(e,n,t))}fg._jsonSchemaVersion="firestore/querySnapshot/1.0",fg._jsonSchema={type:ar("string",fg._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};var OC=class extends uU{constructor(e){super(),this.firestore=e}convertBytes(e){return new ld(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}};function dQ(n){n=wa(n,Vl);let e=wa(n.firestore,Ul),t=NU(e),i=new OC(e);return aSe(n._query),tSe(t,n._query).then(r=>new fg(e,i,n,r))}function hQ(n,e,t){n=wa(n,Cr);let i=wa(n.firestore,Ul),r=lQ(n.converter,e,t);return WC(i,[ZY(Yb(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,dc.none())])}function fQ(n,e,t,...i){n=wa(n,Cr);let r=wa(n.firestore,Ul),s=Yb(r),o;return o=typeof(e=er(e))=="string"||e instanceof Sg?sSe(s,"updateDoc",n._key,e,t,i):rSe(s,"updateDoc",n._key,e),WC(r,[o.toMutation(n._key,dc.exists(!0))])}function pQ(n){return WC(wa(n.firestore,Ul),[new Ub(n._key,dc.none())])}function mQ(n,e){let t=wa(n.firestore,Ul),i=PU(n),r=lQ(n.converter,e);return WC(t,[ZY(Yb(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,dc.exists(!1))]).then(()=>i)}function WC(n,e){return(function(i,r){let s=new xa;return i.asyncQueue.enqueueAndForget(async()=>jEe(await ZEe(i),r,s)),s.promise})(NU(n),e)}function uSe(n,e,t){let i=t.docs.get(e._key),r=new OC(n);return new gf(n,r,e._key,i,new mf(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ig=r})(Ku),ma(new ms("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Ul(new AV(i.getProvider("auth-internal")),new RV(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aC(l.options.projectId,u)})(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ci(VK,UK,e),Ci(VK,UK,"esm2017")})();var Bl=class{constructor(e){return e}},gQ="firestore",FU=class{constructor(){return Tm(gQ)}};var VU=new Te("angularfire2.firestore-instances");function dSe(n,e){let t=Bv(gQ,n,e);return t&&new Bl(t)}function hSe(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Bl(i)}}var fSe={provide:FU,deps:[[new Is,VU]]},pSe={provide:Bl,useFactory:dSe,deps:[[new Is,VU],fl]};function _Q(n,...e){return Ci("angularfire",Xu.full,"fst"),vr([pSe,fSe,{provide:VU,useFactory:hSe(n),multi:!0,deps:[_t,Yt,Yu,Jh,[new Is,ib],[new Is,Im],...e]}])}var yQ=xi(OK,!0);var vQ=xi(NK,!0);var bQ=xi(mQ,!0,2);var $C=xi(YY,!0,2);var xQ=xi(pQ,!0,2);var Dg=xi(PU,!0,2);var wQ=xi(uQ,!0);var EQ=xi(dQ,!0);var SQ=xi(QY,!0);var UU=xi(oQ,!0,2);var Jb=xi(sQ,!0,2),qC=xi(rQ,!0,2);var TQ=xi(hQ,!0,2);var IQ=xi(aQ,!0,2);var CQ=xi(fQ,!0,2);var Tf={production:!0,test:!1,firebase:{apiKey:"AIzaSyAa3aCpidnJ3MB3D2FlpkCHGuVcRyhfmb8",authDomain:"vvskchaitanya-1.firebaseapp.com",projectId:"vvskchaitanya-1",storageBucket:"vvskchaitanya-1.appspot.com",messagingSenderId:"683857452414",appId:"1:683857452414:web:41b3da4368a3df73d5272f",measurementId:"G-BCJ69CN9L7"},githubToken:""};function If(n){return n.buttons===0||n.detail===0}function Cf(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var BU;function AQ(){if(BU==null){let n=typeof document<"u"?document.head:null;BU=!!(n&&(n.createShadowRoot||n.attachShadow))}return BU}function zU(n){if(AQ()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ls(n){return n.composedPath?n.composedPath()[0]:n.target}var HU;try{HU=typeof Intl<"u"&&Intl.v8BreakIterator}catch{HU=!1}var qi=(()=>{class n{_platformId=H(Yc);isBrowser=this._platformId?Q8(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||HU)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zb;function MQ(){if(Zb==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zb=!0}))}finally{Zb=Zb||!1}return Zb}function Rg(n){return MQ()?n:!!n.capture}function Pg(n,e=0){return DQ(n)?Number(n):arguments.length===2?e:0}function DQ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Po(n){return n instanceof tn?n.nativeElement:n}var RQ=new Te("cdk-input-modality-detector-options"),PQ={ignoreKeys:[18,17,224,91,16]},NQ=650,jU={passive:!0,capture:!0},kQ=(()=>{class n{_platform=H(qi);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Bi(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ls(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<NQ||(this._modality.next(If(t)?"keyboard":"mouse"),this._mostRecentTarget=Ls(t))};_onTouchstart=t=>{if(Cf(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ls(t)};constructor(){let t=H(_t),i=H(zt),r=H(RQ,{optional:!0});if(this._options=re(re({},PQ),r),this.modalityDetected=this._modality.pipe(_1(1)),this.modalityChanged=this.modalityDetected.pipe(fh()),this._platform.isBrowser){let s=H(Yi).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(i,"keydown",this._onKeydown,jU),s.listen(i,"mousedown",this._onMousedown,jU),s.listen(i,"touchstart",this._onTouchstart,jU)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e0=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(e0||{}),OQ=new Te("cdk-focus-monitor-default-options"),KC=Rg({passive:!0,capture:!0}),Ng=(()=>{class n{_ngZone=H(_t);_platform=H(qi);_inputModalityDetector=H(kQ);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=H(zt);_stopInputModalityDetector=new At;constructor(){let t=H(OQ,{optional:!0});this._detectionMode=t?.detectionMode||e0.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=Ls(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=Po(t);if(!this._platform.isBrowser||r.nodeType!==1)return bt();let s=zU(r)||this._document,o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let a={checkChildren:i,subject:new At,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=Po(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=Po(t),o=this._document.activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===e0.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===e0.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?NQ:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=Ls(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,KC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,KC)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ba(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,KC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,KC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XC=new WeakMap,No=(()=>{class n{_appRef;_injector=H(Yt);_environmentInjector=H(ti);load(t){let i=this._appRef=this._appRef||this._injector.get(xr),r=XC.get(i);r||(r={loaders:new Set,refs:[]},XC.set(i,r),i.onDestroy(()=>{XC.get(i)?.refs.forEach(s=>s.destroy()),XC.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(rS(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GU(n){return Array.isArray(n)?n:[n]}var LQ=new Set,Af,WU=(()=>{class n{_platform=H(qi);_nonce=H(Jp,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_Se}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&gSe(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gSe(n,e){if(!LQ.has(n))try{Af||(Af=document.createElement("style"),e&&Af.setAttribute("nonce",e),Af.setAttribute("type","text/css"),document.head.appendChild(Af)),Af.sheet&&(Af.sheet.insertRule(`@media ${n} {body{ }}`,0),LQ.add(n))}catch(t){console.error(t)}}function _Se(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}function ySe(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var FQ=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vSe=(()=>{class n{_mutationObserverFactory=H(FQ);_observedElements=new Map;_ngZone=H(_t);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){let i=Po(t);return new gt(r=>{let o=this._observeElement(i).pipe(pt(a=>a.filter(c=>!ySe(c))),ei(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let i=new At,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VQ=(()=>{class n{_contentObserver=H(vSe);_elementRef=H(tn);event=new yn;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=Pg(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(hy(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Pi],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),UQ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({providers:[FQ]})}return n})();var $U={},Mf=class n{_appId=H(Qp);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),$U.hasOwnProperty(e)||($U[e]=0),`${e}${t?n._infix+"-":""}${$U[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var bSe=200,YC=class{_letterKeyStream=new At;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new At;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:bSe;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Hi(t=>this._pressedLetters.push(t)),hy(e),ei(()=>this._pressedLetters.length>0),pt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}};function QC(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var JC=class{_items;_activeItemIndex=bi(-1);_activeItem=bi(null);_wrap=!1;_typeaheadSubscription=Nn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof qc?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Wy(e)&&(this._effectRef=Ry(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new At;change=new At;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new YC(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||QC(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex()+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return Wy(this._items)?this._items():this._items instanceof qc?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var t0=class extends JC{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var ZC;function xSe(){if(ZC===void 0&&(ZC=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(ZC=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ZC}function kg(n){return xSe()?.createHTML(n)||n}var Df;function HQ(){if(Df==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Df=!1,Df;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)Df=!0;else{let n=Element.prototype.scrollTo;n?Df=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Df=!1}}return Df}function XU(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var ESe=new Te("MATERIAL_ANIMATIONS"),jQ=null;function SSe(){return H(ESe,{optional:!0})?.animationsDisabled||H(Fu,{optional:!0})==="NoopAnimations"?"di-disabled":(jQ??=H(WU).matchMedia("(prefers-reduced-motion)").matches,jQ?"reduced-motion":"enabled")}function Ta(){return SSe()!=="enabled"}function Ki(n){return n==null?"":typeof n=="string"?n:`${n}px`}function zl(n){return n!=null&&`${n}`!="false"}var ko=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(ko||{}),YU=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=ko.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},GQ=Rg({passive:!0,capture:!0}),QU=class{_events=new Map;addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,GQ)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,GQ)))}_delegateEventHandler=e=>{let t=Ls(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}},n0={enterDuration:225,exitDuration:150},TSe=800,WQ=Rg({passive:!0,capture:!0}),$Q=["mousedown","touchstart"],qQ=["mouseup","mouseleave","touchend","touchcancel"],ISe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Rf=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new QU;constructor(e,t,i,r,s){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=Po(i)),s&&s.get(No).load(ISe)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=re(re({},n0),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||CSe(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,g=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,v=new YU(this,u,i,g);u.style.transform="scale3d(1, 1, 1)",v.state=ko.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let _=null;return!g&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>{_&&(_.fallbackTimer=null),clearTimeout(P),this._finishRippleTransition(v)},R=()=>this._destroyRipple(v),P=setTimeout(R,l+100);u.addEventListener("transitionend",b),u.addEventListener("transitioncancel",R),_={onTransitionEnd:b,onTransitionCancel:R,fallbackTimer:P}}),this._activeRipples.set(v,_),(g||!l)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(e.state===ko.FADING_OUT||e.state===ko.HIDDEN)return;let t=e.element,i=re(re({},n0),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=ko.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Po(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,$Q.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{qQ.forEach(t=>{this._triggerElement.addEventListener(t,this,WQ)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===ko.FADING_IN?this._startFadeOutTransition(e):e.state===ko.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=ko.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=ko.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=If(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+TSe;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Cf(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===ko.VISIBLE||e.config.terminateOnPointerUp&&e.state===ko.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&($Q.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(qQ.forEach(t=>e.removeEventListener(t,this,WQ)),this._pointerUpEventsRegistered=!1))}};function CSe(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var i0=new Te("mat-ripple-global-options"),KQ=(()=>{class n{_elementRef=H(tn);_animationsDisabled=Ta();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=H(_t),i=H(qi),r=H(i0,{optional:!0}),s=H(Yt);this._globalOptions=r||{},this._rippleRenderer=new Rf(this,t,this._elementRef,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:re(re(re({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,re(re({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,re(re({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&oi("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var ASe={capture:!0},MSe=["focus","mousedown","mouseenter","touchstart"],JU="mat-ripple-loader-uninitialized",ZU="mat-ripple-loader-class-name",XQ="mat-ripple-loader-centered",eA="mat-ripple-loader-disabled",YQ=(()=>{class n{_document=H(zt);_animationsDisabled=Ta();_globalRippleOptions=H(i0,{optional:!0});_platform=H(qi);_ngZone=H(_t);_injector=H(Yt);_eventCleanups;_hosts=new Map;constructor(){let t=H(Yi).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>MSe.map(i=>t.listen(this._document,i,this._onInteraction,ASe)))}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(t,i){t.setAttribute(JU,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(ZU))&&t.setAttribute(ZU,i.className||""),i.centered&&t.setAttribute(XQ,""),i.disabled&&t.setAttribute(eA,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(eA,""):t.removeAttribute(eA)}_onInteraction=t=>{let i=Ls(t);if(i instanceof HTMLElement){let r=i.closest(`[${JU}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(ZU)),t.append(i);let r=this._globalRippleOptions,s=this._animationsDisabled?0:r?.animation?.enterDuration??n0.enterDuration,o=this._animationsDisabled?0:r?.animation?.exitDuration??n0.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||t.hasAttribute(eA),rippleConfig:{centered:t.hasAttribute(XQ),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:o}}},c=new Rf(a,this._ngZone,i,this._platform,this._injector),l=!a.rippleDisabled;l&&c.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:c,hasSetUpEvents:l}),t.removeAttribute(JU)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Og=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var DSe=["mat-icon-button",""],RSe=["*"],PSe=new Te("MAT_BUTTON_CONFIG");function QQ(n){return n==null?void 0:I8(n)}var eB=(()=>{class n{_elementRef=H(tn);_ngZone=H(_t);_animationsDisabled=Ta();_config=H(PSe,{optional:!0});_focusMonitor=H(Ng);_cleanupClick;_renderer=H(kr);_rippleLoader=H(YQ);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){H(No).load(Og);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Gi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),il(r.color?"mat-"+r.color:""),oi("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Pi],disabled:[2,"disabled","disabled",Pi],ariaDisabled:[2,"aria-disabled","ariaDisabled",Pi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Pi],tabIndex:[2,"tabIndex","tabIndex",QQ],_tabindex:[2,"tabindex","_tabindex",QQ]}})}return n})(),tB=(()=>{class n extends eB{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[ui],attrs:DSe,ngContentSelectors:RSe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(fr(),sa(0,"span",0),$n(1),sa(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var NSe=new Te("cdk-dir-doc",{providedIn:"root",factory:()=>H(zt)}),kSe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function JQ(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?kSe.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var r0=(()=>{class n{get value(){return this.valueSignal()}valueSignal=bi("ltr");change=new yn;constructor(){let t=H(NSe,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(JQ(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({})}return n})();var Lg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();var OSe=["matButton",""],LSe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],FSe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var ZQ=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),yd=(()=>{class n extends eB{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=VSe(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?ZQ.get(this._appearance):null,s=ZQ.get(t);r&&i.remove(...r),i.add(...s),this._appearance=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[ui],attrs:OSe,ngContentSelectors:FSe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(fr(LSe),sa(0,"span",0),$n(1),Lr(2,"span",1),$n(3,1),Kr(),$n(4,2),sa(5,"span",2)(6,"span",3)),i&2&&oi("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function VSe(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var Oo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Lg,Mi]})}return n})();var USe=["*"];var BSe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],zSe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],HSe=new Te("MAT_CARD_CONFIG"),vd=(()=>{class n{appearance;constructor(){let t=H(HSe,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(i,r){i&2&&oi("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")("mat-mdc-card-filled",r.appearance==="filled")("mdc-card--filled",r.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:USe,decls:1,vars:0,template:function(i,r){i&1&&(fr(),$n(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),nA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var Fg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),eJ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var iA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:zSe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(fr(BSe),$n(0),Lr(1,"div",0),$n(2,1),Kr(),$n(3,2))},encapsulation:2,changeDetection:0})}return n})();var Lo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();function tJ(n){return Error(`Unable to find icon with the name "${n}"`)}function jSe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function nJ(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function iJ(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Hl=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},sJ=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Hl(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(Nr.HTML,r);if(!o)throw iJ(r);let a=kg(o);return this._addSvgIconConfig(t,i,new Hl("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Hl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(Nr.HTML,i);if(!s)throw iJ(i);let o=kg(s);return this._addSvgIconSetConfig(t,new Hl("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Nr.RESOURCE_URL,t);if(!i)throw nJ(t);let r=this._cachedIconsByUrl.get(i);return r?bt(sA(r)):this._loadSvgIconFromConfig(new Hl(t,null)).pipe(Hi(s=>this._cachedIconsByUrl.set(i,s)),pt(s=>sA(s)))}getNamedSvgIcon(t,i=""){let r=rJ(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):cy(tJ(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?bt(sA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(pt(i=>sA(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return bt(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(hh(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Nr.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),bt(null)})));return dy(s).pipe(pt(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw tJ(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Hi(i=>t.svgText=i),pt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?bt(null):this._fetchIcon(t).pipe(Hi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(kg("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(kg("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw jSe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(Nr.RESOURCE_URL,i);if(!o)throw nJ(i);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(pt(l=>kg(l)),ph(()=>this._inProgressUrlFetches.delete(o)),g1());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(rJ(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return GSe(s)?new Hl(s.url,null,s.options):new Hl(s,null)}}static \u0275fac=function(i){return new(i||n)(st(Ik,8),st(Ck),st(zt,8),st(ws))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sA(n){return n.cloneNode(!0)}function rJ(n,e){return n+":"+e}function GSe(n){return!!(n.url&&n.options)}var WSe=["*"],$Se=new Te("MAT_ICON_DEFAULT_OPTIONS"),qSe=new Te("mat-icon-location",{providedIn:"root",factory:()=>{let n=H(zt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),oJ=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],KSe=oJ.map(n=>`[${n}]`).join(", "),XSe=/^url\(['"]?#(.*?)['"]?\)$/,mc=(()=>{class n{_elementRef=H(tn);_iconRegistry=H(sJ);_location=H(qSe);_errorHandler=H(ws);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Nn.EMPTY;constructor(){let t=H(new tm("aria-hidden"),{optional:!0}),i=H($Se,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(KSe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)oJ.forEach(o=>{let a=i[s],c=a.getAttribute(o),l=c?c.match(XSe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(zi(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Gi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),il(r.color?"mat-"+r.color:""),oi("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Pi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:WSe,decls:1,vars:0,template:function(i,r){i&1&&(fr(),$n(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Fs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();var Vs=class n{auth=H(xl);router=H(io);user$=rI(this.auth);constructor(){}async loginWithGoogle(){let e=new eF;try{await Rq(this.auth,e),this.router.navigate(["/dashboard"])}catch(t){console.error("Login failed",t)}}async logout(){await Pq(this.auth),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})};function YSe(n,e){if(n&1){let t=Xr();ce(0,"button",17),wn("click",function(){ci(t);let r=Yn();return li(r.installApp())}),ce(1,"mat-icon"),ge(2,"get_app"),le(),ge(3," Install App "),le()}}function QSe(n,e){n&1&&(ce(0,"p",18),ge(1," Use Chrome, Edge, or Safari to install this app on your device. "),le())}function JSe(n,e){if(n&1){let t=Xr();ce(0,"button",19),wn("click",function(){ci(t);let r=Yn();return li(r.authService.loginWithGoogle())}),Cn(1,"div",20),ce(2,"div",21)(3,"div",22),Wc(),ce(4,"svg",23),Cn(5,"path",24)(6,"path",25)(7,"path",26)(8,"path",27)(9,"path",28),le()(),Ah(),ce(10,"span",29),ge(11,"Sign in with Google"),le(),ce(12,"span",30),ge(13,"Sign in with Google"),le()()()}}function ZSe(n,e){n&1&&(ce(0,"p",31),ge(1,"Join thousands of users optimizing their lifestyle today."),le())}function eTe(n,e){n&1&&(ce(0,"p",31),ge(1,"Sign in to access your personalized dashboard."),le())}var oA=class n{authService=H(Vs);router=H(io);deferredPrompt;showInstallButton=!1;isStandalone=!1;onBeforeInstallPrompt(e){e.preventDefault(),this.deferredPrompt=e,(Tf.production||Tf.test)&&(this.showInstallButton=!0)}ngOnInit(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||!Tf.production&&!Tf.test,this.isStandalone||(this.showInstallButton=!0),this.isStandalone&&this.authService.user$.subscribe(e=>{e&&this.router.navigate(["/dashboard"])})}async installApp(){if(this.deferredPrompt){this.deferredPrompt.prompt();let{outcome:e}=await this.deferredPrompt.userChoice;e==="accepted"&&(this.showInstallButton=!1),this.deferredPrompt=null}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-home"]],hostBindings:function(t,i){t&1&&wn("beforeinstallprompt",function(s){return i.onBeforeInstallPrompt(s)},EN)},decls:41,vars:5,consts:[[1,"home-container"],[1,"hero-section"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"cta-container"],["mat-raised-button","","color","primary","class","install-button",3,"click",4,"ngIf"],["class","install-note",4,"ngIf"],["class","gsi-material-button",3,"click",4,"ngIf"],["class","hero-note",4,"ngIf"],[1,"value-prop-section"],[1,"features-grid"],[1,"feature-item"],[1,"icon-wrapper"],["color","primary"],["color","accent"],["color","warn"],["mat-raised-button","","color","primary",1,"install-button",3,"click"],[1,"install-note"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"],[1,"hero-note"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),ge(4,"Lifestyle Adapter"),le(),ce(5,"p",4),ge(6," Your personal growth companion for a better lifestyle. "),le(),ce(7,"div",5),Or(8,YSe,4,0,"button",6)(9,QSe,2,0,"p",7)(10,JSe,14,0,"button",8),le(),Or(11,ZSe,2,0,"p",9)(12,eTe,2,0,"p",9),le()(),ce(13,"div",10)(14,"h2"),ge(15,"Why Lifestyle Adapter?"),le(),ce(16,"div",11)(17,"div",12)(18,"div",13)(19,"mat-icon",14),ge(20,"insights"),le()(),ce(21,"h3"),ge(22,"Data-Driven Growth"),le(),ce(23,"p"),ge(24,"Stop guessing. Use real data to understand what works for you and what doesn't."),le()(),ce(25,"div",12)(26,"div",13)(27,"mat-icon",15),ge(28,"schedule"),le()(),ce(29,"h3"),ge(30,"Habit Formation"),le(),ce(31,"p"),ge(32,"Build streaks and track consistency to turn positive actions into automatic behaviors."),le()(),ce(33,"div",12)(34,"div",13)(35,"mat-icon",16),ge(36,"trending_up"),le()(),ce(37,"h3"),ge(38,"Measurable Progress"),le(),ce(39,"p"),ge(40,"Watch your LA Score rise as you improve your sleep, activity, and focus."),le()()()()()),t&2&&(Lt(8),In("ngIf",!i.isStandalone&&i.showInstallButton),Lt(),In("ngIf",!i.isStandalone&&!i.showInstallButton),Lt(),In("ngIf",i.isStandalone),Lt(),In("ngIf",!i.isStandalone),Lt(),In("ngIf",i.isStandalone))},dependencies:[Ns,ca,Oo,yd,Lo,Fs,mc],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a237e,#283593);color:#fff;padding:100px 20px;text-align:center;display:flex;justify-content:center;align-items:center;min-height:400px}.hero-content[_ngcontent-%COMP%]{max-width:800px;width:100%}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:24px;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300;margin-bottom:48px;opacity:.9;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto}.cta-container[_ngcontent-%COMP%]{margin-bottom:24px;display:flex;flex-direction:column;align-items:center;gap:16px;width:100%}.install-button[_ngcontent-%COMP%]{padding:12px 32px!important;font-size:1.1rem!important;border-radius:50px!important;height:auto!important}.install-note[_ngcontent-%COMP%]{font-size:.95rem;opacity:.8;margin:0;padding:12px 24px;background:#ffffff1a;border-radius:8px}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}.hero-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7;margin-top:16px}.value-prop-section[_ngcontent-%COMP%]{padding:80px 20px;background-color:#f5f5f5;text-align:center}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:60px}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:40px;max-width:1200px;margin:0 auto}.feature-item[_ngcontent-%COMP%]{background:#fff;padding:40px 30px;border-radius:16px;box-shadow:0 4px 20px #0000000d;transition:transform .3s ease}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.icon-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;width:64px;height:64px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 auto 24px}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:16px;color:#333}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}@media(max-width:768px){.hero-section[_ngcontent-%COMP%]{padding:60px 20px;min-height:auto}.hero-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:16px}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:32px}.value-prop-section[_ngcontent-%COMP%]{padding:60px 20px}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:40px}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:30px}.feature-item[_ngcontent-%COMP%]{padding:30px 20px}}@media(max-width:480px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1rem}.install-button[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]{width:100%}}"]})};var aA=class n{authService=H(Vs);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-container"],[1,"login-card"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),ge(4,"Welcome to Lifestyle Adapter"),le(),ce(5,"mat-card-subtitle"),ge(6,"Sign in to continue"),le()(),ce(7,"mat-card-content")(8,"button",2),wn("click",function(){return i.authService.loginWithGoogle()}),Cn(9,"div",3),ce(10,"div",4)(11,"div",5),Wc(),ce(12,"svg",6),Cn(13,"path",7)(14,"path",8)(15,"path",9)(16,"path",10)(17,"path",11),le()(),Ah(),ce(18,"span",12),ge(19,"Sign in with Google"),le(),ce(20,"span",13),ge(21,"Sign in with Google"),le()()()()()())},dependencies:[Oo,Lo,vd,Fg,iA,eJ,nA,Fs],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{padding:30px;text-align:center;max-width:400px;width:100%}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:100%;max-width:400px;min-width:min-content;margin-top:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}@media(max-width:480px){.login-container[_ngcontent-%COMP%]{padding:16px;height:auto;min-height:calc(100vh - 64px)}.login-card[_ngcontent-%COMP%]{padding:20px;box-shadow:none!important;border:1px solid #e0e0e0}}"]})};var cA=class n{authService=H(Vs);ngOnInit(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,i){t&1&&(Lr(0,"p"),ge(1,"Logging out..."),Kr())},encapsulation:2})};function c0(n){return n+.5|0}var bd=(n,e,t)=>Math.max(Math.min(n,t),e);function o0(n){return bd(c0(n*2.55),0,255)}function xd(n){return bd(c0(n*255),0,255)}function jl(n){return bd(c0(n/2.55)/100,0,1)}function aJ(n){return bd(c0(n*100),0,100)}var Fo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iB=[..."0123456789ABCDEF"],tTe=n=>iB[n&15],nTe=n=>iB[(n&240)>>4]+iB[n&15],lA=n=>(n&240)>>4===(n&15),iTe=n=>lA(n.r)&&lA(n.g)&&lA(n.b)&&lA(n.a);function rTe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Fo[n[1]]*17,g:255&Fo[n[2]]*17,b:255&Fo[n[3]]*17,a:e===5?Fo[n[4]]*17:255}:(e===7||e===9)&&(t={r:Fo[n[1]]<<4|Fo[n[2]],g:Fo[n[3]]<<4|Fo[n[4]],b:Fo[n[5]]<<4|Fo[n[6]],a:e===9?Fo[n[7]]<<4|Fo[n[8]]:255})),t}var sTe=(n,e)=>n<255?e(n):"";function oTe(n){var e=iTe(n)?tTe:nTe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+sTe(n.a,e):void 0}var aTe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dJ(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function cTe(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function lTe(n,e,t){let i=dJ(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function uTe(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function rB(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=uTe(t,i,r,u,s),c=c*60+.5),[c|0,l||0,a]}function sB(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(xd)}function oB(n,e,t){return sB(dJ,n,e,t)}function dTe(n,e,t){return sB(lTe,n,e,t)}function hTe(n,e,t){return sB(cTe,n,e,t)}function hJ(n){return(n%360+360)%360}function fTe(n){let e=aTe.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?o0(+e[5]):xd(+e[5]));let r=hJ(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=dTe(r,s,o):e[1]==="hsv"?i=hTe(r,s,o):i=oB(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function pTe(n,e){var t=rB(n);t[0]=hJ(t[0]+e),t=oB(t),n.r=t[0],n.g=t[1],n.b=t[2]}function mTe(n){if(!n)return;let e=rB(n),t=e[0],i=aJ(e[1]),r=aJ(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${jl(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var cJ={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lJ={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function gTe(){let n={},e=Object.keys(lJ),t=Object.keys(cJ),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,cJ[s]);s=parseInt(lJ[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var uA;function _Te(n){uA||(uA=gTe(),uA.transparent=[0,0,0,0]);let e=uA[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var yTe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vTe(n){let e=yTe.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?o0(o):bd(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?o0(i):bd(i,0,255)),r=255&(e[4]?o0(r):bd(r,0,255)),s=255&(e[6]?o0(s):bd(s,0,255)),{r:i,g:r,b:s,a:t}}}function bTe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${jl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var nB=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Vg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xTe(n,e,t){let i=Vg(jl(n.r)),r=Vg(jl(n.g)),s=Vg(jl(n.b));return{r:xd(nB(i+t*(Vg(jl(e.r))-i))),g:xd(nB(r+t*(Vg(jl(e.g))-r))),b:xd(nB(s+t*(Vg(jl(e.b))-s))),a:n.a+t*(e.a-n.a)}}function dA(n,e,t){if(n){let i=rB(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=oB(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fJ(n,e){return n&&Object.assign(e||{},n)}function uJ(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=xd(n[3]))):(e=fJ(n,{r:0,g:0,b:0,a:1}),e.a=xd(e.a)),e}function wTe(n){return n.charAt(0)==="r"?vTe(n):fTe(n)}var a0=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=uJ(e):t==="string"&&(i=rTe(e)||_Te(e)||wTe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=fJ(this._rgb);return e&&(e.a=jl(e.a)),e}set rgb(e){this._rgb=uJ(e)}rgbString(){return this._valid?bTe(this._rgb):void 0}hexString(){return this._valid?oTe(this._rgb):void 0}hslString(){return this._valid?mTe(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=xTe(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=xd(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=c0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return dA(this._rgb,2,e),this}darken(e){return dA(this._rgb,2,-e),this}saturate(e){return dA(this._rgb,1,e),this}desaturate(e){return dA(this._rgb,1,-e),this}rotate(e){return pTe(this._rgb,e),this}};function _c(){}var SJ=(()=>{let n=0;return()=>n++})();function Rn(n){return n==null}function hi(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function bn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Di(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function js(n,e){return Di(n)?n:e}function sn(n,e){return typeof n>"u"?e:n}var TJ=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ai(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Kn(n,e,t,i){let r,s,o;if(hi(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(bn(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function d0(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function mA(n){if(hi(n))return n.map(mA);if(bn(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=mA(n[t[r]]);return e}return n}function IJ(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function ETe(n,e,t,i){if(!IJ(n))return;let r=e[n],s=t[n];bn(r)&&bn(s)?Bg(r,s,i):e[n]=mA(s)}function Bg(n,e,t){let i=hi(e)?e:[e],r=i.length;if(!bn(n))return n;t=t||{};let s=t.merger||ETe,o;for(let a=0;a<r;++a){if(o=i[a],!bn(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function Hg(n,e){return Bg(n,e,{merger:STe})}function STe(n,e,t){if(!IJ(n))return;let i=e[n],r=t[n];bn(i)&&bn(r)?Hg(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=mA(r))}var pJ={"":n=>n,x:n=>n.x,y:n=>n.y};function TTe(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function ITe(n){let e=TTe(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function Of(n,e){return(pJ[e]||(pJ[e]=ITe(e)))(n)}function vA(n){return n.charAt(0).toUpperCase()+n.slice(1)}var jg=n=>typeof n<"u",Gl=n=>typeof n=="function",uB=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function CJ(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Xi=Math.PI,zs=2*Xi,CTe=zs+Xi,gA=Number.POSITIVE_INFINITY,ATe=Xi/180,Bs=Xi/2,Pf=Xi/4,mJ=Xi*2/3,Wl=Math.log10,Ia=Math.sign;function Gg(n,e,t){return Math.abs(n-e)<t}function dB(n){let e=Math.round(n);n=Gg(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Wl(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function AJ(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function MTe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Wg(n){return!MTe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function MJ(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function hB(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $l(n){return n*(Xi/180)}function bA(n){return n*(180/Xi)}function fB(n){if(!Di(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function DJ(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*Xi&&(s+=zs),{angle:s,distance:r}}function _A(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function DTe(n,e){return(n-e+CTe)%zs-Xi}function Us(n){return(n%zs+zs)%zs}function pB(n,e,t,i){let r=Us(n),s=Us(e),o=Us(t),a=Us(s-r),c=Us(o-r),l=Us(r-s),u=Us(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Hs(n,e,t){return Math.max(e,Math.min(t,n))}function RJ(n){return Hs(n,-32768,32767)}function ql(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function xA(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var Ed=(n,e,t,i)=>xA(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),PJ=(n,e,t)=>xA(n,t,i=>n[i][e]>=t);function NJ(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var kJ=["push","pop","shift","splice","unshift"];function OJ(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),kJ.forEach(t=>{let i="_onData"+vA(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function mB(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(kJ.forEach(s=>{delete n[s]}),delete n._chartjs)}function gB(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var _B=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function yB(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,_B.call(window,()=>{i=!1,n.apply(e,t)}))}}function LJ(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var wA=n=>n==="start"?"left":n==="end"?"right":"center",Fr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,FJ=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function VJ(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(r=Math.min(Ed(c,u,d).lo,t?i:Ed(e,u,o.getPixelForValue(d)).lo),l){let v=c.slice(0,r+1).reverse().findIndex(_=>!Rn(_[a.axis]));r-=Math.max(0,v)}r=Hs(r,0,i-1)}if(g){let v=Math.max(Ed(c,o.axis,h,!0).hi+1,t?0:Ed(e,u,o.getPixelForValue(h),!0).hi+1);if(l){let _=c.slice(v-1).findIndex(b=>!Rn(b[a.axis]));v+=Math.max(0,_)}s=Hs(v,r,i)-r}else s=i-r}return{start:r,count:s}}function UJ(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var hA=n=>n===0||n===1,gJ=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*zs/t)),_J=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*zs/t)+1,Ug={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Bs)+1,easeOutSine:n=>Math.sin(n*Bs),easeInOutSine:n=>-.5*(Math.cos(Xi*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>hA(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>hA(n)?n:gJ(n,.075,.3),easeOutElastic:n=>hA(n)?n:_J(n,.075,.3),easeInOutElastic(n){return hA(n)?n:n<.5?.5*gJ(n*2,.1125,.45):.5+.5*_J(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ug.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ug.easeInBounce(n*2)*.5:Ug.easeOutBounce(n*2-1)*.5+.5};function vB(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function bB(n){return vB(n)?n:new a0(n)}function aB(n){return vB(n)?n:new a0(n).saturate(.5).darken(.1).hexString()}var RTe=["x","y","borderWidth","radius","tension"],PTe=["color","borderColor","backgroundColor"];function NTe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:PTe},numbers:{type:"number",properties:RTe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kTe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var yJ=new Map;function OTe(n,e){e=e||{};let t=n+JSON.stringify(e),i=yJ.get(t);return i||(i=new Intl.NumberFormat(n,e),yJ.set(t,i)),i}function EA(n,e,t){return OTe(e,t).format(n)}var BJ={values(n){return hi(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=LTe(n,t)}let o=Wl(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),EA(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Wl(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?BJ.numeric.call(this,n,e,t):""}};function LTe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var h0={formatters:BJ};function FTe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:h0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Td=Object.create(null),SA=Object.create(null);function l0(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function cB(n,e,t){return typeof e=="string"?Bg(l0(n,e),t):Bg(l0(n,""),e)}var lB=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>aB(r.backgroundColor),this.hoverBorderColor=(i,r)=>aB(r.borderColor),this.hoverColor=(i,r)=>aB(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return cB(this,e,t)}get(e){return l0(this,e)}describe(e,t){return cB(SA,e,t)}override(e,t){return cB(Td,e,t)}route(e,t,i,r){let s=l0(this,e),o=l0(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return bn(c)?Object.assign({},l,c):sn(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},mi=new lB({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[NTe,kTe,FTe]);function VTe(n){return!n||Rn(n.size)||Rn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function u0(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function zJ(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!hi(d))o=u0(n,r,s,o,d);else if(hi(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!hi(h)&&(o=u0(n,r,s,o,h));n.restore();let f=s.length/2;if(f>t.length){for(c=0;c<f;c++)delete r[s[c]];s.splice(0,f)}return o}function Id(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function xB(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function TA(n,e,t,i){wB(n,e,t,i,null)}function wB(n,e,t,i,r){let s,o,a,c,l,u,d,h,f=e.pointStyle,g=e.rotation,v=e.radius,_=(g||0)*ATe;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(_),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,v,0,0,zs):n.arc(t,i,v,0,zs),n.closePath();break;case"triangle":u=r?r/2:v,n.moveTo(t+Math.sin(_)*u,i-Math.cos(_)*v),_+=mJ,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*v),_+=mJ,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*v),n.closePath();break;case"rectRounded":l=v*.516,c=v-l,o=Math.cos(_+Pf)*c,d=Math.cos(_+Pf)*(r?r/2-l:c),a=Math.sin(_+Pf)*c,h=Math.sin(_+Pf)*(r?r/2-l:c),n.arc(t-d,i-a,l,_-Xi,_-Bs),n.arc(t+h,i-o,l,_-Bs,_),n.arc(t+d,i+a,l,_,_+Bs),n.arc(t-h,i+o,l,_+Bs,_+Xi),n.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*v,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}_+=Pf;case"rectRot":d=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,h=Math.sin(_)*(r?r/2:v),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":_+=Pf;case"cross":d=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,h=Math.sin(_)*(r?r/2:v),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,h=Math.sin(_)*(r?r/2:v),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),_+=Pf,d=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,h=Math.sin(_)*(r?r/2:v),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(_)*v,a=Math.sin(_)*v,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(_)*(r?r/2:v),i+Math.sin(_)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function gc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function f0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function p0(n){n.restore()}function HJ(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function jJ(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function UTe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Rn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function BTe(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function zTe(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Cd(n,e,t,i,r,s={}){let o=hi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,UTe(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&zTe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Rn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),BTe(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function $g(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Xi,Xi,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Xi,Bs,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Bs,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Bs,!0),n.lineTo(t+o.topLeft,i)}var HTe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jTe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GTe(n,e){let t=(""+n).match(HTe);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var WTe=n=>+n||0;function EB(n,e){let t={},i=bn(e),r=i?Object.keys(e):e,s=bn(n)?i?o=>sn(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=WTe(s(o));return t}function SB(n){return EB(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ad(n){return EB(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Vr(n){let e=SB(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lr(n,e){n=n||{},e=e||mi.font;let t=sn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=sn(n.style,e.style);i&&!(""+i).match(jTe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:sn(n.family,e.family),lineHeight:GTe(sn(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:sn(n.weight,e.weight),string:""};return r.string=VTe(r),r}function m0(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&hi(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function GJ(n,e,t){let{min:i,max:r}=n,s=TJ(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Kl(n,e){return Object.assign(Object.create(n),e)}function IA(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=qJ("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>IA([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return WJ(a,c,()=>ZTe(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return bJ(a).includes(c)},ownKeys(a){return bJ(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function kf(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:TB(n,i),setContext:s=>kf(n,s,t,i),override:s=>kf(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return WJ(s,o,()=>qTe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function TB(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Gl(t)?t:()=>t,isIndexable:Gl(i)?i:()=>i}}var $Te=(n,e)=>n?n+vA(e):e,IB=(n,e)=>bn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WJ(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function qTe(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Gl(a)&&o.isScriptable(e)&&(a=KTe(e,a,n,t)),hi(a)&&a.length&&(a=XTe(e,a,n,o.isIndexable)),IB(e,a)&&(a=kf(a,r,s&&s[e],o)),a}function KTe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),IB(n,c)&&(c=CB(r._scopes,r,n,c)),c}function XTe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(bn(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=CB(l,r,n,u);e.push(kf(d,s,o&&o[n],a))}}return e}function $J(n,e,t){return Gl(n)?n(e,t):n}var YTe=(n,e)=>n===!0?e:typeof n=="string"?Of(e,n):void 0;function QTe(n,e,t,i,r){for(let s of e){let o=YTe(t,s);if(o){n.add(o);let a=$J(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function CB(n,e,t,i){let r=e._rootScopes,s=$J(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=vJ(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=vJ(a,o,s,c,i),c===null)?!1:IA(Array.from(a),[""],r,s,()=>JTe(e,t,i))}function vJ(n,e,t,i,r){for(;t;)t=QTe(n,e,t,i,r);return t}function JTe(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return hi(r)&&bn(t)?t:r||{}}function ZTe(n,e,t,i){let r;for(let s of e)if(r=qJ($Te(s,n),t),typeof r<"u")return IB(n,r)?CB(t,i,n,r):r}function qJ(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function bJ(n){let e=n._keys;return e||(e=n._keys=eIe(n._scopes)),e}function eIe(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}var tIe=Number.EPSILON||1e-14,zg=(n,e)=>e<n.length&&!n[e].skip&&n[e],KJ=n=>n==="x"?"y":"x";function nIe(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=_A(s,r),c=_A(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=i*l,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function iIe(n,e,t){let i=n.length,r,s,o,a,c,l=zg(n,0);for(let u=0;u<i-1;++u)if(c=l,l=zg(n,u+1),!(!c||!l)){if(Gg(e[u],0,tIe)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function rIe(n,e,t="x"){let i=KJ(t),r=n.length,s,o,a,c=zg(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=zg(n,l+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[l])}}function sIe(n,e="x"){let t=KJ(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=zg(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=zg(n,o+1),!!c){if(l){let u=l[e]-c[e];r[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?Ia(r[o-1])!==Ia(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}iIe(n,r,s),rIe(n,s,e)}function fA(n,e,t){return Math.max(Math.min(n,t),e)}function oIe(n,e){let t,i,r,s,o,a=gc(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&gc(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=fA(r.cp1x,e.left,e.right),r.cp1y=fA(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=fA(r.cp2x,e.left,e.right),r.cp2y=fA(r.cp2y,e.top,e.bottom)))}function XJ(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")sIe(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=nIe(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&oIe(n,t)}function CA(){return typeof window<"u"&&typeof document<"u"}function AA(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yA(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var MA=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function aIe(n,e){return MA(n).getPropertyValue(e)}var cIe=["top","right","bottom","left"];function Nf(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=cIe[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var lIe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function uIe(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(lIe(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Md(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=MA(t),s=r.boxSizing==="border-box",o=Nf(r,"padding"),a=Nf(r,"border","width"),{x:c,y:l,box:u}=uIe(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((c-d)/f*t.width/i),y:Math.round((l-h)/g*t.height/i)}}function dIe(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&AA(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=MA(s),c=Nf(a,"border","width"),l=Nf(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=yA(a.maxWidth,s,"clientWidth"),r=yA(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||gA,maxHeight:r||gA}}var Sd=n=>Math.round(n*10)/10;function YJ(n,e,t,i){let r=MA(n),s=Nf(r,"margin"),o=yA(r.maxWidth,n,"clientWidth")||gA,a=yA(r.maxHeight,n,"clientHeight")||gA,c=dIe(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let h=Nf(r,"border","width"),f=Nf(r,"padding");l-=f.width+h.width,u-=f.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=Sd(Math.min(l,o,c.maxWidth)),u=Sd(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Sd(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=Sd(Math.floor(u*i))),{width:l,height:u}}function AB(n,e,t){let i=e||1,r=Sd(n.height*i),s=Sd(n.width*i);n.height=Sd(n.height),n.width=Sd(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var QJ=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};CA()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function MB(n,e){let t=aIe(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function wd(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function JJ(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function ZJ(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=wd(n,r,t),a=wd(r,s,t),c=wd(s,e,t),l=wd(o,a,t),u=wd(a,c,t);return wd(l,u,t)}var hIe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},fIe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Lf(n,e,t){return n?hIe(e,t):fIe()}function DB(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function RB(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function eZ(n){return n==="angle"?{between:pB,compare:DTe,normalize:Us}:{between:ql,compare:(e,t)=>e-t,normalize:e=>e}}function xJ({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function pIe(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=eZ(i),c=e.length,{start:l,end:u,loop:d}=n,h,f;if(d){for(l+=c,u+=c,h=0,f=c;h<f&&o(a(e[l%c][i]),r,s);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:n.style}}function PB(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=eZ(i),{start:u,end:d,loop:h,style:f}=pIe(n,e,t),g=[],v=!1,_=null,b,R,P,N=()=>c(r,P,b)&&a(r,P)!==0,U=()=>a(s,b)===0||c(s,P,b),O=()=>v||N(),S=()=>!v||U();for(let w=u,y=u;w<=d;++w)R=e[w%o],!R.skip&&(b=l(R[i]),b!==P&&(v=c(b,r,s),_===null&&O()&&(_=a(b,r)===0?w:y),_!==null&&S()&&(g.push(xJ({start:_,end:w,loop:h,count:o,style:f})),_=null),y=w,P=b));return _!==null&&g.push(xJ({start:_,end:d,loop:h,count:o,style:f})),g}function NB(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=PB(i[r],n.points,e);s.length&&t.push(...s)}return t}function mIe(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function gIe(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function tZ(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=mIe(t,r,s,i);if(i===!0)return wJ(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return wJ(n,gIe(t,o,c,l),t,e)}function wJ(n,e,t,i){return!i||!i.setContext||!t?e:_Ie(n,e,t,i)}function _Ie(n,e,t,i){let r=n._chart.getContext(),s=EJ(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,d=e[0].start,h=d;function f(g,v,_,b){let R=a?-1:1;if(g!==v){for(g+=c;t[g%c].skip;)g-=R;for(;t[v%c].skip;)v+=R;g%c!==v%c&&(l.push({start:g%c,end:v%c,loop:_,style:b}),u=b,d=v%c)}}for(let g of e){d=a?d:g.start;let v=t[d%c],_;for(h=d+1;h<=g.end;h++){let b=t[h%c];_=EJ(i.setContext(Kl(r,{type:"segment",p0:v,p1:b,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),yIe(_,u)&&f(d,h-1,g.loop,u),v=b,u=_}d<h-1&&f(d,h-1,g.loop,u)}return l}function EJ(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function yIe(n,e){if(!e)return!1;let t=[],i=function(r,s){return vB(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function pA(n,e,t){return n.options.clip?n[t]:e[t]}function vIe(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:pA(t,e,"left"),right:pA(t,e,"right"),top:pA(i,e,"top"),bottom:pA(i,e,"bottom")}:e}function kB(n,e){let t=e._clip;if(t.disabled)return!1;let i=vIe(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var $B=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_B.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Xl=new $B,nZ="transparent",bIe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=bB(n||nZ),r=i.valid&&bB(e||nZ);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},qB=class{constructor(e,t,i,r){let s=t[i];r=m0([e.to,r,s,e.from]);let o=m0([e.from,s,r]);this._active=!0,this._fn=e.fn||bIe[e.type||typeof o],this._easing=Ug[e.easing]||Ug.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=m0([e.to,t,r,e.from]),this._from=m0([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},FA=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bn(e))return;let t=Object.keys(mi.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!bn(s))return;let o={};for(let a of t)o[a]=s[a];(hi(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=wIe(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&xIe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],h=i.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new qB(h,e,l,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Xl.add(this._chart,i),!0}};function xIe(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function wIe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function iZ(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function EIe(n,e,t){if(t===!1)return!1;let i=iZ(n,t),r=iZ(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function SIe(n){let e,t,i,r;return bn(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function iee(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function rZ(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(u=!0,i.all)continue;break}l=n.values[c],Di(l)&&(s||e===0||Ia(e)===Ia(l))&&(e+=l)}return!u&&!i.all?0:e}function TIe(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[r]:u,[s]:n[u]};return a}function OB(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function IIe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function CIe(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function AIe(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function sZ(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function oZ(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=IIe(s,o,i),d=e.length,h;for(let f=0;f<d;++f){let g=e[f],{[c]:v,[l]:_}=g,b=g._stacks||(g._stacks={});h=b[l]=AIe(r,u,v),h[a]=_,h._top=sZ(h,o,!0,i.type),h._bottom=sZ(h,o,!1,i.type);let R=h._visualValues||(h._visualValues={});R[a]=_}}function LB(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function MIe(n,e){return Kl(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function DIe(n,e,t){return Kl(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function g0(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var FB=n=>n==="reset"||n==="none",aZ=(n,e)=>e?n:Object.assign({},n),RIe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:iee(t,!0),values:null},sz=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=OB(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&g0(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,f,g,v)=>h==="x"?f:h==="r"?v:g,o=i.xAxisID=sn(r.xAxisID,LB(t,"x")),a=i.yAxisID=sn(r.yAxisID,LB(t,"y")),c=i.rAxisID=sn(r.rAxisID,LB(t,"r")),l=i.indexAxis,u=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&mB(this._data,this),t._stacked&&g0(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(bn(i)){let s=this._cachedMeta;this._data=TIe(i,s)}else if(r!==i){if(r){mB(r,this);let s=this._cachedMeta;g0(s),s._parsed=[]}i&&Object.isExtensible(i)&&OJ(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=OB(i.vScale,i),i.stack!==r.stack&&(s=!0,g0(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&(oZ(this,i._parsed),i._stacked=OB(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{hi(s[t])?f=this.parseArrayData(r,s,t,i):bn(s[t])?f=this.parseObjectData(r,s,t,i):f=this.parsePrimitiveData(r,s,t,i);let g=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<i;++d)r._parsed[d+t]=h=f[d],l&&(g()&&(l=!1),u=h);r._sorted=l}a&&oZ(this,f)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,g,v;for(f=0,g=s;f<g;++f)v=f+r,h[f]={[c]:d||o.parse(u[v],v),[l]:a.parse(i[v],v)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+r,h=i[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,f,g;for(d=0,h=s;d<h;++d)f=d+r,g=i[f],u[d]={x:o.parse(Of(g,c),f),y:a.parse(Of(g,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:iee(s,!0),values:i._stacks[t.axis]._visualValues};return rZ(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=rZ(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=RIe(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=CIe(c),f,g;function v(){g=s[f];let _=g[c.axis];return!Di(g[t.axis])||d>_||h<_}for(f=0;f<a&&!(!v()&&(this.updateRangeFromParsed(u,t,g,l),o));++f);if(o){for(f=a-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(u,t,g,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Di(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=SIe(sn(this.options.clip,EIe(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=DIe(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=MIe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&jg(r);if(c)return aZ(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),g=Object.keys(mi.elements[t]),v=()=>this.getContext(r,s,i),_=u.resolveNamedOptions(f,g,v,h);return _.$shared&&(_.$shared=l,o[a]=Object.freeze(aZ(_,l))),_}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(t,r,i))}let u=new FA(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||FB(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){FB(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!FB(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&g0(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function PIe(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=gB(i.sort((r,s)=>r-s))}return n._cache.$bar}function NIe(n){let e=n.iScale,t=PIe(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(jg(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function kIe(n,e,t,i){let r=t.barThickness,s,o;return Rn(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function OIe(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function LIe(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function ree(n,e,t,i){return hi(n)?LIe(n,e,t,i):e[t.axis]=t.parse(n,i),e}function cZ(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,u,d,h;for(l=t,u=t+i;l<u;++l)h=e[l],d={},d[r.axis]=a||r.parse(o[l],l),c.push(ree(h,d,s,l));return c}function VB(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function FIe(n,e,t){return n!==0?Ia(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function VIe(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function UIe(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=VIe(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=u:(s[lZ(u,o,a,c)]=!0,r=l)),s[lZ(r,o,a,c)]=!0,n.borderSkipped=s}function lZ(n,e,t,i){return i?(n=BIe(n,e,t),n=uZ(n,t,e)):n=uZ(n,e,t),n}function BIe(n,e,t){return n===e?t:n===t?e:n}function uZ(n,e,t){return n==="start"?e:n==="end"?t:n}function zIe(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var see=(()=>{class n extends sz{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return cZ(t,i,r,s)}parseArrayData(t,i,r,s){return cZ(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],f,g,v,_;for(f=r,g=r+s;f<g;++f)_=i[f],v={},v[o.axis]=o.parse(Of(_,u),f),h.push(ree(Of(_,d),v,a,f));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=VB(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s);for(let g=i;g<i+r;g++){let v=this.getParsed(g),_=o||Rn(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,d),R=(v._stacks||{})[c.axis],P={horizontal:u,base:_.base,enableBorderRadius:!R||VB(v._custom)||a===R._top||a===R._bottom,x:u?_.head:b.center,y:u?b.center:_.head,height:u?b.size:Math.abs(_.size),width:u?Math.abs(_.size):b.size};f&&(P.options=h||this.resolveDataElementOptions(g,t[g].active?"active":s));let N=P.options||t[g].options;UIe(P,N,R,a),zIe(P,N,d.ratio),this.updateElement(t[g],g,P,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],u=d=>{let h=d._parsed.find(g=>g[r.axis]===l),f=h&&h[d.vScale.axis];if(Rn(f)||isNaN(f))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===i).shift()}_getAxis(){let t={},i=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)t[sn(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||NIe(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,d=VB(u),h=l[i.axis],f=0,g=r?this.applyStack(i,l,r):h,v,_;g!==h&&(f=g-h,g=h),d&&(h=u.barStart,g=u.barEnd-u.barStart,h!==0&&Ia(h)!==Ia(u.barEnd)&&(f=0),f+=h);let b=!Rn(o)&&!d?o:f,R=i.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=i.getPixelForValue(f+g):v=R,_=v-R,Math.abs(_)<a){_=FIe(_,i,c)*a,h===c&&(R-=_/2);let P=i.getPixelForDecimal(0),N=i.getPixelForDecimal(1),U=Math.min(P,N),O=Math.max(P,N);R=Math.max(Math.min(R,O),U),v=R+_,r&&!d&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(v)-i.getValueForPixel(R))}if(R===i.getPixelForValue(c)){let P=Ia(_)*i.getLineWidthForValue(c)/2;R+=P,_-=P}return{size:_,base:R,head:v,center:v+_/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=sn(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(i.grouped){let d=o?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?OIe(t,i,s,d*u):kIe(t,i,s,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(sn(f,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+g;c=h.start+h.chunk*v+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})();var oee=(()=>{class n extends sz{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=VJ(i,s,a);this._drawStart=c,this._drawCount=l,UJ(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),f=a.axis,g=c.axis,{spanGaps:v,segment:_}=this.options,b=Wg(v)?v:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||s==="none",P=i+r,N=t.length,U=i>0&&this.getParsed(i-1);for(let O=0;O<N;++O){let S=t[O],w=R?S:{};if(O<i||O>=P){w.skip=!0;continue}let y=this.getParsed(O),x=Rn(y[g]),T=w[f]=a.getPixelForValue(y[f],O),M=w[g]=o||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,y,l):y[g],O);w.skip=isNaN(T)||isNaN(M)||x,w.stop=O>0&&Math.abs(y[f]-U[f])>b,_&&(w.parsed=y,w.raw=u.data[O]),h&&(w.options=d||this.resolveDataElementOptions(O,S.active?"active":s)),R||this.updateElement(S,O,w,s),U=y}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function Ff(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var KB=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ff()}parse(){return Ff()}format(){return Ff()}add(){return Ff()}diff(){return Ff()}startOf(){return Ff()}endOf(){return Ff()}},HIe={_date:KB};function jIe(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?PJ:Ed;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){let h=l(s,e,t-d),f=l(s,e,t+d);return{lo:h.lo,hi:f.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,f=h.slice(0,u.lo+1).reverse().findIndex(v=>!Rn(v[d.axis]));u.lo-=Math.max(0,f);let g=h.slice(u.hi).findIndex(v=>!Rn(v[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function T0(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=jIe(s[a],e,o,r);for(let f=d;f<=h;++f){let g=u[f];g.skip||i(g,l,f)}}}function GIe(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function UB(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||T0(n,t,e,function(a,c,l){!r&&!gc(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function WIe(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=DJ(o,{x:e.x,y:e.y});pB(d,l,u)&&r.push({element:o,datasetIndex:a,index:c})}return T0(n,t,e,s),r}function $Ie(n,e,t,i,r,s){let o=[],a=GIe(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let f=u.inRange(e.x,e.y,r);if(i&&!f)return;let g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!f)return;let _=a(e,g);_<c?(o=[{element:u,datasetIndex:d,index:h}],c=_):_===c&&o.push({element:u,datasetIndex:d,index:h})}return T0(n,t,e,l),o}function BB(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?WIe(n,e,t,r):$Ie(n,e,t,i,r,s)}function dZ(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return T0(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var qIe={evaluateInteractionItems:T0,modes:{index(n,e,t,i){let r=Md(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?UB(n,r,s,i,o):BB(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=Md(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?UB(n,r,s,i,o):BB(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=Md(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return UB(n,r,s,i,o)},nearest(n,e,t,i){let r=Md(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return BB(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=Md(e,n);return dZ(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=Md(e,n);return dZ(n,r,"y",t.intersect,i)}}},aee=["left","top","right","bottom"];function _0(n,e){return n.filter(t=>t.pos===e)}function hZ(n,e){return n.filter(t=>aee.indexOf(t.pos)===-1&&t.box.axis===e)}function y0(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function KIe(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function XIe(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!aee.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function YIe(n,e){let t=XIe(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function QIe(n){let e=KIe(n),t=y0(e.filter(l=>l.box.fullSize),!0),i=y0(_0(e,"left"),!0),r=y0(_0(e,"right")),s=y0(_0(e,"top"),!0),o=y0(_0(e,"bottom")),a=hZ(e,"x"),c=hZ(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:_0(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function fZ(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function cee(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function JIe(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!bn(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&cee(o,s.getPadding());let a=Math.max(0,e.outerWidth-fZ(o,n,"left","right")),c=Math.max(0,e.outerHeight-fZ(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function ZIe(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function eCe(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function x0(n,e,t,i){let r=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,eCe(a.horizontal,e));let{same:d,other:h}=JIe(e,t,a,i);l|=d&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&x0(r,e,t,i)||u}function DA(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function pZ(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;jg(l.start)&&(o=l.start),c.fullSize?DA(c,r.left,o,t.outerWidth-r.right-r.left,h):DA(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;jg(l.start)&&(s=l.start),c.fullSize?DA(c,s,r.top,h,t.outerHeight-r.bottom-r.top):DA(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Vo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=Vr(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=QIe(n.boxes),c=a.vertical,l=a.horizontal;Kn(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let u=c.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);cee(h,Vr(i));let f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=YIe(c.concat(l),d);x0(a.fullSize,f,d,g),x0(c,f,d,g),x0(l,f,d,g)&&x0(c,f,d,g),ZIe(f),pZ(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,pZ(a.rightAndBottom,f,d,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Kn(a.chartArea,v=>{let _=v.box;Object.assign(_,n.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},VA=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},XB=class extends VA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},OA="$chartjs",tCe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mZ=n=>n===null||n==="";function nCe(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[OA]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",mZ(r)){let s=MB(n,"width");s!==void 0&&(n.width=s)}if(mZ(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=MB(n,"height");s!==void 0&&(n.height=s)}return n}var lee=QJ?{passive:!0}:!1;function iCe(n,e,t){n&&n.addEventListener(e,t,lee)}function rCe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,lee)}function sCe(n,e){let t=tCe[n.type]||n.type,{x:i,y:r}=Md(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function UA(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function oCe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||UA(a.addedNodes,i),o=o&&!UA(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function aCe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||UA(a.removedNodes,i),o=o&&!UA(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var E0=new Map,gZ=0;function uee(){let n=window.devicePixelRatio;n!==gZ&&(gZ=n,E0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function cCe(n,e){E0.size||window.addEventListener("resize",uee),E0.set(n,e)}function lCe(n){E0.delete(n),E0.size||window.removeEventListener("resize",uee)}function uCe(n,e,t){let i=n.canvas,r=i&&AA(i);if(!r)return;let s=yB((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(r),cCe(n,s),o}function zB(n,e,t){t&&t.disconnect(),e==="resize"&&lCe(n)}function dCe(n,e,t){let i=n.canvas,r=yB(s=>{n.ctx!==null&&t(sCe(s,n))},n);return iCe(i,e,r),r}var YB=class extends VA{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(nCe(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[OA])return!1;let i=t[OA].initial;["height","width"].forEach(s=>{let o=i[s];Rn(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[OA],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:oCe,detach:aCe,resize:uCe}[t]||dCe;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:zB,detach:zB,resize:zB}[t]||rCe)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return YJ(e,t,i,r)}isAttached(e){let t=e&&AA(e);return!!(t&&t.isConnected)}};function hCe(n){return!CA()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?XB:YB}var bc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Wg(this.x)&&Wg(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function fCe(n,e){let t=n.options.ticks,i=pCe(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?gCe(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return _Ce(e,l,s,o/r),l;let u=mCe(s,e,r);if(o>0){let d,h,f=o>1?Math.round((c-a)/(o-1)):null;for(RA(e,l,u,Rn(f)?0:a-f,a),d=0,h=o-1;d<h;d++)RA(e,l,u,s[d],s[d+1]);return RA(e,l,u,c,Rn(f)?e.length:c+f),l}return RA(e,l,u),l}function pCe(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function mCe(n,e,t){let i=yCe(n),r=e.length/t;if(!i)return Math.max(r,1);let s=AJ(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function gCe(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function _Ce(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function RA(n,e,t,i,r){let s=sn(i,0),o=Math.min(sn(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function yCe(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var vCe=n=>n==="left"?"right":n==="right"?"left":n,_Z=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,yZ=(n,e)=>Math.min(e||n,n);function vZ(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function bCe(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function xCe(n,e){Kn(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function v0(n){return n.drawTicks?n.tickLength:0}function bZ(n,e){if(!n.display)return 0;let t=lr(n.font,e),i=Vr(n.padding);return(hi(n.text)?n.text.length:1)*t.lineHeight+i.height}function wCe(n,e){return Kl(n,{scale:e,type:"scale"})}function ECe(n,e,t){return Kl(n,{tick:t,index:e,type:"tick"})}function SCe(n,e,t){let i=wA(n);return(t&&e!=="right"||!t&&e==="right")&&(i=vCe(i)),i}function TCe(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,h,f,g,v=o-r,_=a-s;if(n.isHorizontal()){if(f=Fr(i,s,a),bn(t)){let b=Object.keys(t)[0],R=t[b];g=u[b].getPixelForValue(R)+v-e}else t==="center"?g=(l.bottom+l.top)/2+v-e:g=_Z(n,t,e);h=a-s}else{if(bn(t)){let b=Object.keys(t)[0],R=t[b];f=u[b].getPixelForValue(R)-_+e}else t==="center"?f=(l.left+l.right)/2-_+e:f=_Z(n,t,e);g=Fr(i,o,r),d=t==="left"?-Bs:Bs}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}var Uf=class n extends bc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=js(e,Number.POSITIVE_INFINITY),t=js(t,Number.NEGATIVE_INFINITY),i=js(i,Number.POSITIVE_INFINITY),r=js(r,Number.NEGATIVE_INFINITY),{min:js(e,i),max:js(t,r),minDefined:Di(e),maxDefined:Di(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:js(t,js(i,t)),max:js(i,js(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ai(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=GJ(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?vZ(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fCe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ai(this.options.afterUpdate,[this])}beforeSetDimensions(){ai(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ai(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ai(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ai(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ai(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ai(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ai(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=yZ(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Hs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),c=this.maxHeight-v0(e.grid)-t.padding-bZ(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=bA(Math.min(Math.asin(Hs((u.highest.height+6)/a,-1,1)),Math.asin(Hs(c/l,-1,1))-Math.asin(Hs(h/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ai(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ai(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=bZ(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=v0(s)+c):(e.height=this.maxHeight,e.width=v0(s)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,g=$l(this.labelRotation),v=Math.cos(g),_=Math.sin(g);if(a){let b=i.mirror?0:_*d.width+v*h.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{let b=i.mirror?0:v*d.width+_*h.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(l,u,_,v)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;c?l?(h=r*e.width,f=i*t.height):(h=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ai(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Rn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=vZ(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/yZ(t,i)),l=0,u=0,d,h,f,g,v,_,b,R,P,N,U;for(d=0;d<t;d+=c){if(g=e[d].label,v=this._resolveTickFontOptions(d),r.font=_=v.string,b=s[_]=s[_]||{data:{},gc:[]},R=v.lineHeight,P=N=0,!Rn(g)&&!hi(g))P=u0(r,b.data,b.gc,P,g),N=R;else if(hi(g))for(h=0,f=g.length;h<f;++h)U=g[h],!Rn(U)&&!hi(U)&&(P=u0(r,b.data,b.gc,P,U),N+=R);o.push(P),a.push(N),l=Math.max(P,l),u=Math.max(N,u)}xCe(s,t);let O=o.indexOf(l),S=a.indexOf(u),w=y=>({width:o[y]||0,height:a[y]||0});return{first:w(0),last:w(t-1),widest:w(O),highest:w(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return RJ(this._alignToPixels?Id(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=ECe(this.getContext(),e,i))}return this.$context||(this.$context=wCe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=$l(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=v0(s),f=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,_=v/2,b=function(G){return Id(i,G,v)},R,P,N,U,O,S,w,y,x,T,M,C;if(o==="top")R=b(this.bottom),S=this.bottom-h,y=R-_,T=b(e.top)+_,C=e.bottom;else if(o==="bottom")R=b(this.top),T=e.top,C=b(e.bottom)-_,S=R+_,y=this.top+h;else if(o==="left")R=b(this.right),O=this.right-h,w=R-_,x=b(e.left)+_,M=e.right;else if(o==="right")R=b(this.left),x=e.left,M=b(e.right)-_,O=R+_,w=this.left+h;else if(t==="x"){if(o==="center")R=b((e.top+e.bottom)/2+.5);else if(bn(o)){let G=Object.keys(o)[0],K=o[G];R=b(this.chart.scales[G].getPixelForValue(K))}T=e.top,C=e.bottom,S=R+_,y=S+h}else if(t==="y"){if(o==="center")R=b((e.left+e.right)/2);else if(bn(o)){let G=Object.keys(o)[0],K=o[G];R=b(this.chart.scales[G].getPixelForValue(K))}O=R-_,w=O-h,x=e.left,M=e.right}let oe=sn(r.ticks.maxTicksLimit,d),Z=Math.max(1,Math.ceil(d/oe));for(P=0;P<d;P+=Z){let G=this.getContext(P),K=s.setContext(G),W=a.setContext(G),ue=K.lineWidth,ye=K.color,Ue=W.dash||[],Qe=W.dashOffset,Ze=K.tickWidth,tt=K.tickColor,kt=K.tickBorderDash||[],de=K.tickBorderDashOffset;N=bCe(this,P,c),N!==void 0&&(U=Id(i,N,ue),l?O=w=x=M=U:S=y=T=C=U,f.push({tx1:O,ty1:S,tx2:w,ty2:y,x1:x,y1:T,x2:M,y2:C,width:ue,color:ye,borderDash:Ue,borderDashOffset:Qe,tickWidth:Ze,tickColor:tt,tickBorderDash:kt,tickBorderDashOffset:de}))}return this._ticksLength=d,this._borderValue=R,f}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=v0(i.grid),f=h+u,g=d?-u:f,v=-$l(this.labelRotation),_=[],b,R,P,N,U,O,S,w,y,x,T,M,C="middle";if(r==="top")O=this.bottom-g,S=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+g,S=this._getXAxisLabelAlignment();else if(r==="left"){let Z=this._getYAxisLabelAlignment(h);S=Z.textAlign,U=Z.x}else if(r==="right"){let Z=this._getYAxisLabelAlignment(h);S=Z.textAlign,U=Z.x}else if(t==="x"){if(r==="center")O=(e.top+e.bottom)/2+f;else if(bn(r)){let Z=Object.keys(r)[0],G=r[Z];O=this.chart.scales[Z].getPixelForValue(G)+f}S=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")U=(e.left+e.right)/2-f;else if(bn(r)){let Z=Object.keys(r)[0],G=r[Z];U=this.chart.scales[Z].getPixelForValue(G)}S=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?C="top":c==="end"&&(C="bottom"));let oe=this._getLabelSizes();for(b=0,R=a.length;b<R;++b){P=a[b],N=P.label;let Z=s.setContext(this.getContext(b));w=this.getPixelForTick(b)+s.labelOffset,y=this._resolveTickFontOptions(b),x=y.lineHeight,T=hi(N)?N.length:1;let G=T/2,K=Z.color,W=Z.textStrokeColor,ue=Z.textStrokeWidth,ye=S;o?(U=w,S==="inner"&&(b===R-1?ye=this.options.reverse?"left":"right":b===0?ye=this.options.reverse?"right":"left":ye="center"),r==="top"?l==="near"||v!==0?M=-T*x+x/2:l==="center"?M=-oe.highest.height/2-G*x+x:M=-oe.highest.height+x/2:l==="near"||v!==0?M=x/2:l==="center"?M=oe.highest.height/2-G*x:M=oe.highest.height-T*x,d&&(M*=-1),v!==0&&!Z.showLabelBackdrop&&(U+=x/2*Math.sin(v))):(O=w,M=(1-T)*x/2);let Ue;if(Z.showLabelBackdrop){let Qe=Vr(Z.backdropPadding),Ze=oe.heights[b],tt=oe.widths[b],kt=M-Qe.top,de=0-Qe.left;switch(C){case"middle":kt-=Ze/2;break;case"bottom":kt-=Ze;break}switch(S){case"center":de-=tt/2;break;case"right":de-=tt;break;case"inner":b===R-1?de-=tt:b>0&&(de-=tt/2);break}Ue={left:de,top:kt,width:tt+Qe.width,height:Ze+Qe.height,color:Z.backdropColor}}_.push({label:N,font:y,textOffset:M,options:{rotation:v,color:K,strokeColor:W,strokeWidth:ue,textAlign:ye,textBaseline:C,translation:[U,O],backdrop:Ue}})}return _}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-$l(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?r?(u=this.right+s,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=Id(e,this.left,o)-o/2,u=Id(e,this.right,a)+a/2,d=h=c):(d=Id(e,this.top,o)-o/2,h=Id(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&f0(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;Cd(i,l,0,u,c,a)}r&&p0(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=lr(i.font),o=Vr(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||bn(t)?(c+=o.bottom,hi(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=TCe(this,c,t,a);Cd(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:SCe(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=sn(e.grid&&e.grid.z,-1),r=sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return lr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},qg=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;ACe(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,ICe(e,o,i),this.override&&mi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in mi[r]&&(delete mi[r][i],this.override&&delete Td[i])}};function ICe(n,e,t){let i=Bg(Object.create(null),[t?mi.get(t):{},mi.get(e),n.defaults]);mi.set(e,i),n.defaultRoutes&&CCe(e,n.defaultRoutes),n.descriptors&&mi.describe(e,n.descriptors)}function CCe(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");mi.route(s,r,c,a)})}function ACe(n){return"id"in n&&"defaults"in n}var QB=class{constructor(){this.controllers=new qg(sz,"datasets",!0),this.elements=new qg(bc,"elements"),this.plugins=new qg(Object,"plugins"),this.scales=new qg(Uf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Kn(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=vA(e);ai(i["before"+r],[],i),t[e](i),ai(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},vc=new QB,JB=class{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(ai(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Rn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=sn(i.options&&i.options.plugins,{}),s=MCe(i);return r===!1&&!t?[]:RCe(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function MCe(n){let e={},t=[],i=Object.keys(vc.plugins.items);for(let s=0;s<i.length;s++)t.push(vc.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function DCe(n,e){return!e&&n===!1?null:n===!0?{}:n}function RCe(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=DCe(i[c],r);l!==null&&s.push({plugin:a,options:PCe(n.config,{plugin:a,local:t[c]},l,o)})}return s}function PCe(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ZB(n,e){let t=mi.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function NCe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function kCe(n,e){return n===e?"_index_":"_value_"}function xZ(n){if(n==="x"||n==="y"||n==="r")return n}function OCe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ez(n,...e){if(xZ(n))return n;for(let t of e){let i=t.axis||OCe(t.position)||n.length>1&&xZ(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function wZ(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function LCe(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return wZ(n,"x",t[0])||wZ(n,"y",t[0])}return{}}function FCe(n,e){let t=Td[n.type]||{scales:{}},i=e.scales||{},r=ZB(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!bn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=ez(o,a,LCe(o,n),mi.scales[a.type]),l=kCe(c,r),u=t.scales||{};s[o]=Hg(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||ZB(a,e),u=(Td[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=NCe(d,c),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Hg(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Hg(a,[mi.scales[a.type],mi.scale])}),s}function dee(n){let e=n.options||(n.options={});e.plugins=sn(e.plugins,{}),e.scales=FCe(n,e)}function hee(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function VCe(n){return n=n||{},n.data=hee(n.data),dee(n),n}var EZ=new Map,fee=new Set;function PA(n,e){let t=EZ.get(n);return t||(t=e(),EZ.set(n,t),fee.add(t)),t}var b0=(n,e,t)=>{let i=Of(e,t);i!==void 0&&n.add(i)},tz=class{constructor(e){this._config=VCe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hee(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),dee(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return PA(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return PA(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return PA(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return PA(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>b0(c,e,d))),u.forEach(d=>b0(c,r,d)),u.forEach(d=>b0(c,Td[s]||{},d)),u.forEach(d=>b0(c,mi,d)),u.forEach(d=>b0(c,SA,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),fee.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,Td[t]||{},mi.datasets[t]||{},{type:t},mi,SA]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=SZ(this._resolverCache,e,r),c=o;if(BCe(o,t)){s.$shared=!1,i=Gl(i)?i():i;let l=this.createResolver(e,i,a);c=kf(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=SZ(this._resolverCache,e,i);return bn(t)?kf(s,t,void 0,r):s}};function SZ(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:IA(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var UCe=n=>bn(n)&&Object.getOwnPropertyNames(n).some(e=>Gl(n[e]));function BCe(n,e){let{isScriptable:t,isIndexable:i}=TB(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Gl(a)||UCe(a))||o&&hi(a))return!0}return!1}var zCe="4.5.1",HCe=["top","bottom","left","right","chartArea"];function TZ(n,e){return n==="top"||n==="bottom"||HCe.indexOf(n)===-1&&e==="x"}function IZ(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function CZ(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ai(t&&t.onComplete,[n],e)}function jCe(n){let e=n.chart,t=e.options.animation;ai(t&&t.onProgress,[n],e)}function pee(n){return CA()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var LA={},AZ=n=>{let e=pee(n);return Object.values(LA).filter(t=>t.canvas===e).pop()};function GCe(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function WCe(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Xg=(()=>{class n{static defaults=mi;static instances=LA;static overrides=Td;static registry=vc;static version=zCe;static getChart=AZ;static register(...t){vc.add(...t),MZ()}static unregister(...t){vc.remove(...t),MZ()}constructor(t,i){let r=this.config=new tz(i),s=pee(t),o=AZ(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||hCe(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=SJ(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new JB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LJ(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],LA[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Xl.listen(this,"complete",CZ),Xl.listen(this,"progress",jCe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Rn(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():AB(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xB(this.canvas,this.ctx),this}stop(){return Xl.stop(this),this}resize(t,i){Xl.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,AB(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ai(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Kn(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=ez(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Kn(o,a=>{let c=a.options,l=c.id,u=ez(l,c),d=sn(c.type,a.dtype);(c.position===void 0||TZ(c.position,u)!==TZ(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===d)h=r[l];else{let f=vc.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(c,t)}),Kn(s,(a,c)=>{a||delete r[c]}),Kn(r,a=>{Vo.configure(this,a,a.options),Vo.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(IZ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||ZB(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=vc.getController(c),{datasetElementType:u,dataElementType:d}=mi.datasets[c];Object.assign(l,{dataElementType:vc.getElement(d),datasetElementType:u&&vc.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Kn(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Kn(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(IZ("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Kn(this.scales,t=>{Vo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!uB(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;GCe(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!uB(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vo.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Kn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Gl(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xl.has(this)?this.attached&&!Xl.running(this)&&Xl.start(this):(this.draw(),CZ({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=kB(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&f0(i,s),t.controller.draw(),s&&p0(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return gc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=qIe.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Kl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);jg(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Xl.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xB(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete LA[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Kn(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){Kn(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Kn(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!d0(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=CJ(t),u=WCe(t,this._lastEvent,r,l);r&&(this._lastEvent=null,ai(o.onHover,[t,c,this],this),l&&ai(o.onClick,[t,c,this],this));let d=!d0(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function MZ(){return Kn(Xg.instances,n=>n._plugins.invalidate())}function mee(n,e,t=e){n.lineCap=sn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(sn(t.borderDash,e.borderDash)),n.lineDashOffset=sn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=sn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=sn(t.borderWidth,e.borderWidth),n.strokeStyle=sn(t.borderColor,e.borderColor)}function $Ce(n,e,t){n.lineTo(t.x,t.y)}function qCe(n){return n.stepped?HJ:n.tension||n.cubicInterpolationMode==="monotone"?jJ:$Ce}function gee(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function KCe(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=gee(r,t,i),u=qCe(s),{move:d=!0,reverse:h}=i||{},f,g,v;for(f=0;f<=l;++f)g=r[(a+(h?l-f:f))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,v,g,h,s.stepped),v=g);return c&&(g=r[(a+(h?l:0))%o],u(n,v,g,h,s.stepped)),!!c}function XCe(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=gee(r,t,i),{move:c=!0,reverse:l}=i||{},u=0,d=0,h,f,g,v,_,b,R=N=>(o+(l?a-N:N))%s,P=()=>{v!==_&&(n.lineTo(u,_),n.lineTo(u,v),n.lineTo(u,b))};for(c&&(f=r[R(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=r[R(h)],f.skip)continue;let N=f.x,U=f.y,O=N|0;O===g?(U<v?v=U:U>_&&(_=U),u=(d*u+N)/++d):(P(),n.lineTo(N,U),g=O,d=0,v=_=U),b=U}P()}function nz(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?XCe:KCe}function YCe(n){return n.stepped?JJ:n.tension||n.cubicInterpolationMode==="monotone"?ZJ:wd}function QCe(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),mee(n,e.options),n.stroke(r)}function JCe(n,e,t,i){let{segments:r,options:s}=e,o=nz(e);for(let a of r)mee(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var ZCe=typeof Path2D=="function";function eAe(n,e,t,i){ZCe&&!e.options.segment?QCe(n,e,t,i):JCe(n,e,t,i)}var I0=(()=>{class n extends bc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;XJ(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tZ(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=NB(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=YCe(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],g=o[h],v=o[f];if(g===v){c.push(g);continue}let _=Math.abs((s-g[i])/(v[i]-g[i])),b=l(g,v,_,r.stepped);b[i]=t[i],c.push(b)}return c.length===1?c[0]:c}pathSegment(t,i,r){return nz(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=nz(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),eAe(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function DZ(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var _ee=(()=>{class n extends bc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return DZ(this,t,"x",i)}inYRange(t,i){return DZ(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!gc(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,TA(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function yee(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-d,u=i+d):(d=s/2,a=t-d,c=t+d,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function Dd(n,e,t,i){return n?0:Hs(e,t,i)}function tAe(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=SB(i);return{t:Dd(r.top,s.top,0,t),r:Dd(r.right,s.right,0,e),b:Dd(r.bottom,s.bottom,0,t),l:Dd(r.left,s.left,0,e)}}function nAe(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ad(r),o=Math.min(e,t),a=n.borderSkipped,c=i||bn(r);return{topLeft:Dd(!c||a.top||a.left,s.topLeft,0,o),topRight:Dd(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Dd(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Dd(!c||a.bottom||a.right,s.bottomRight,0,o)}}function iAe(n){let e=yee(n),t=e.right-e.left,i=e.bottom-e.top,r=tAe(n,t/2,i/2),s=nAe(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function HB(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&yee(n,i);return a&&(r||ql(e,a.left,a.right))&&(s||ql(t,a.top,a.bottom))}function rAe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function sAe(n,e){n.rect(e.x,e.y,e.w,e.h)}function jB(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var BA=class extends bc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=iAe(this),a=rAe(o.radius)?$g:sAe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,jB(o,t,s)),e.clip(),a(e,jB(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,jB(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return HB(this,e,t,i)}inXRange(e,t){return HB(this,e,null,t)}inYRange(e,t){return HB(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};function oAe(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=WA(c,l,r);let u=iz(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[c],end:r[l]});continue}let d=NB(e,u);for(let h of d){let f=iz(t,s[h.start],s[h.end],h.loop),g=PB(a,r,f);for(let v of g)o.push({source:v,target:h,start:{[t]:RZ(u,f,"start",Math.max)},end:{[t]:RZ(u,f,"end",Math.min)}})}}return o}function iz(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Us(r),s=Us(s)),{property:n,start:r,end:s}}function aAe(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=WA(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function WA(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function RZ(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function vee(n,e){let t=[],i=!1;return hi(n)?(i=!0,t=n):t=aAe(n,e),t.length?new I0({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function PZ(n){return n&&n.fill!==!1}function cAe(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Di(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function lAe(n,e,t){let i=fAe(n);if(bn(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Di(r)&&Math.floor(r)===r?uAe(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function uAe(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function dAe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:bn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function hAe(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:bn(n)?i=n.value:i=e.getBaseValue(),i}function fAe(n){let e=n.options,t=e.fill,i=sn(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function pAe(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=mAe(e,t);a.push(vee({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)gAe(r,o[u],a)}return new I0({points:r,options:{}})}function mAe(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function gAe(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=_Ae(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function _Ae(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][t],h=o[u.end][t];if(ql(r,d,h)){a=r===d,c=r===h;break}}return{first:a,last:c,point:i}}var zA=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:zs},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function yAe(n){let{chart:e,fill:t,line:i}=n;if(Di(t))return vAe(e,t);if(t==="stack")return pAe(n);if(t==="shape")return!0;let r=bAe(n);return r instanceof zA?r:vee(r,i)}function vAe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function bAe(n){return(n.scale||{}).getPointPositionForValue?wAe(n):xAe(n)}function xAe(n){let{scale:e={},fill:t}=n,i=dAe(t,e);if(Di(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function wAe(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=hAe(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new zA({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function GB(n,e,t){let i=yAe(e),{chart:r,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,d=l.backgroundColor,{above:h=d,below:f=d}=u||{},g=r.getDatasetMeta(s),v=kB(r,g);i&&o.points.length&&(f0(n,t),EAe(n,{line:o,target:i,above:h,below:f,area:t,scale:a,axis:c,clip:v}),p0(n))}function EAe(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==r&&(l==="x"?(NZ(n,i,o.top),WB(n,{line:t,target:i,color:r,scale:a,property:l,clip:c}),n.restore(),n.save(),NZ(n,i,o.bottom)):l==="y"&&(kZ(n,i,o.left),WB(n,{line:t,target:i,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),kZ(n,i,o.right),u=r)),WB(n,{line:t,target:i,color:u,scale:a,property:l,clip:c}),n.restore()}function NZ(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[WA(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function kZ(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[WA(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,d.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function WB(n,e){let{line:t,target:i,property:r,color:s,scale:o,clip:a}=e,c=oAe(t,i,r);for(let{source:l,target:u,start:d,end:h}of c){let{style:{backgroundColor:f=s}={}}=l,g=i!==!0;n.save(),n.fillStyle=f,SAe(n,o,a,g&&iz(r,d,h)),n.beginPath();let v=!!t.pathSegment(n,l),_;if(g){v?n.closePath():OZ(n,i,h,r);let b=!!i.pathSegment(n,u,{move:v,reverse:!0});_=v&&b,_||OZ(n,i,d,r)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function SAe(n,e,t,i){let r=e.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let c,l,u,d;s==="x"?(c=o,l=r.top,u=a,d=r.bottom):(c=r.left,l=o,u=r.right,d=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),d=Math.min(d,t.bottom)),n.rect(c,l,u-c,d-l),n.clip()}}function OZ(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var bee={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof I0&&(c={visible:n.isDatasetVisible(o),index:o,fill:lAe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=cAe(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&GB(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;PZ(s)&&GB(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!PZ(i)||t.drawTime!=="beforeDatasetDraw"||GB(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},LZ=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},TAe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,HA=class extends bc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ai(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=lr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=LZ(i,s),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,v)=>{let _=i+t/2+s.measureText(g.text).width;(v===0||l[l.length-1]+_+2*a>o)&&(d+=u,l[l.length-(v>0?0:1)]=0,f+=u,h++),c[v]={left:0,top:f,row:h,width:_,height:r},l[l.length-1]+=_+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,f=0,g=0,v=0;return this.legendItems.forEach((_,b)=>{let{itemWidth:R,itemHeight:P}=IAe(i,t,s,_,r);b>0&&f+P+2*a>u&&(d+=h+a,l.push({width:h,height:f}),g+=h+a,v++,h=f=0),c[b]={left:g,top:f,col:v,width:R,height:P},h=Math.max(h,R),f+=P+a}),d+=h,l.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Lf(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Fr(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Fr(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=Fr(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Fr(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;f0(e,this),this._draw(),p0(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=mi.color,c=Lf(e.rtl,this.left,this.width),l=lr(o.font),{padding:u}=o,d=l.size,h=d/2,f;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:g,boxHeight:v,itemHeight:_}=LZ(o,d),b=function(O,S,w){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;r.save();let y=sn(w.lineWidth,1);if(r.fillStyle=sn(w.fillStyle,a),r.lineCap=sn(w.lineCap,"butt"),r.lineDashOffset=sn(w.lineDashOffset,0),r.lineJoin=sn(w.lineJoin,"miter"),r.lineWidth=y,r.strokeStyle=sn(w.strokeStyle,a),r.setLineDash(sn(w.lineDash,[])),o.usePointStyle){let x={radius:v*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:y},T=c.xPlus(O,g/2),M=S+h;wB(r,x,T,M,o.pointStyleWidth&&g)}else{let x=S+Math.max((d-v)/2,0),T=c.leftForLtr(O,g),M=Ad(w.borderRadius);r.beginPath(),Object.values(M).some(C=>C!==0)?$g(r,{x:T,y:x,w:g,h:v,radius:M}):r.rect(T,x,g,v),r.fill(),y!==0&&r.stroke()}r.restore()},R=function(O,S,w){Cd(r,w.text,O,S+_/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},P=this.isHorizontal(),N=this._computeTitleHeight();P?f={x:Fr(s,this.left+u,this.right-i[0]),y:this.top+u+N,line:0}:f={x:this.left+u,y:Fr(s,this.top+N+u,this.bottom-t[0].height),line:0},DB(this.ctx,e.textDirection);let U=_+u;this.legendItems.forEach((O,S)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;let w=r.measureText(O.text).width,y=c.textAlign(O.textAlign||(O.textAlign=o.textAlign)),x=g+h+w,T=f.x,M=f.y;c.setWidth(this.width),P?S>0&&T+x+u>this.right&&(M=f.y+=U,f.line++,T=f.x=Fr(s,this.left+u,this.right-i[f.line])):S>0&&M+U>this.bottom&&(T=f.x=T+t[f.line].width+u,f.line++,M=f.y=Fr(s,this.top+N+u,this.bottom-t[f.line].height));let C=c.x(T);if(b(C,M,O),T=FJ(y,T+g+h,P?T+x:this.right,e.rtl),R(c.x(T),M,O),P)f.x+=x+u;else if(typeof O.text!="string"){let oe=l.lineHeight;f.y+=xee(O,oe)+u}else f.y+=U}),RB(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=lr(t.font),r=Vr(t.padding);if(!t.display)return;let s=Lf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=Fr(e.align,d,this.right-h);else{let g=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=l+Fr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}let f=Fr(a,d,d+h);o.textAlign=s.textAlign(wA(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Cd(o,t.text,f,u,i)}_computeTitleHeight(){let e=this.options.title,t=lr(e.font),i=Vr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(ql(e,this.left,this.right)&&ql(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ql(e,r.left,r.left+r.width)&&ql(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!MAe(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=TAe(r,i);r&&!s&&ai(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ai(t.onHover,[e,i,this],this)}else i&&ai(t.onClick,[e,i,this],this)}};function IAe(n,e,t,i,r){let s=CAe(i,n,e,t),o=AAe(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function CAe(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function AAe(n,e,t){let i=n;return typeof e.text!="string"&&(i=xee(e,t)),i}function xee(n,e){let t=n.text?n.text.length:0;return e*t}function MAe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var wee={id:"legend",_element:HA,start(n,e,t){let i=n.legend=new HA({ctx:n.ctx,options:t,chart:n});Vo.configure(n,i,t),Vo.addBox(n,i)},stop(n){Vo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Vo.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=Vr(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},jA=class extends bc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=hi(i.text)?i.text.length:1;this._padding=Vr(i.padding);let s=r*lr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=Fr(a,i,s),d=t+e,l=s-i):(o.position==="left"?(u=i+e,d=Fr(a,r,t),c=Xi*-.5):(u=s-e,d=Fr(a,t,r),c=Xi*.5),l=r-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=lr(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);Cd(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:wA(t.align),textBaseline:"middle",translation:[o,a]})}};function DAe(n,e){let t=new jA({ctx:n.ctx,options:e,chart:n});Vo.configure(n,t,e),Vo.addBox(n,t),n.titleBlock=t}var Eee={id:"title",_element:jA,start(n,e,t){DAe(n,t)},stop(n){let e=n.titleBlock;Vo.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Vo.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var w0={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=_A(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function yc(n,e){return e&&(hi(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Yl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function RAe(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function FZ(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=lr(e.bodyFont),l=lr(e.titleFont),u=lr(e.footerFont),d=s.length,h=r.length,f=i.length,g=Vr(e.padding),v=g.height,_=0,b=i.reduce((N,U)=>N+U.before.length+U.lines.length+U.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(v+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){let N=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;v+=f*N+(b-f)*c.lineHeight+(b-1)*e.bodySpacing}h&&(v+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let R=0,P=function(N){_=Math.max(_,t.measureText(N).width+R)};return t.save(),t.font=l.string,Kn(n.title,P),t.font=c.string,Kn(n.beforeBody.concat(n.afterBody),P),R=e.displayColors?o+2+e.boxPadding:0,Kn(i,N=>{Kn(N.before,P),Kn(N.lines,P),Kn(N.after,P)}),R=0,t.font=u.string,Kn(n.footer,P),t.restore(),_+=g.width,{width:_,height:v}}function PAe(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function NAe(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function kAe(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),NAe(l,n,e,t)&&(l="center"),l}function VZ(n,e,t){let i=t.yAlign||e.yAlign||PAe(n,t);return{xAlign:t.xAlign||e.xAlign||kAe(n,e,t,i),yAlign:i}}function OAe(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function LAe(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function UZ(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Ad(o),g=OAe(e,a),v=LAe(e,c,l);return c==="center"?a==="left"?g+=l:a==="right"&&(g-=l):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(d,f)+r),{x:Hs(g,0,i.width-e.width),y:Hs(v,0,i.height-e.height)}}function NA(n,e,t){let i=Vr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function BZ(n){return yc([],Yl(n))}function FAe(n,e,t){return Kl(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function zZ(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var See={beforeTitle:_c,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:_c,beforeBody:_c,beforeLabel:_c,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Rn(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:_c,afterBody:_c,beforeFooter:_c,footer:_c,afterFooter:_c};function Gs(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?See[e].call(t,i):r}var HZ=(()=>{class n extends bc{static positioners=w0;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new FA(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=FAe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Gs(r,"beforeTitle",this,t),o=Gs(r,"title",this,t),a=Gs(r,"afterTitle",this,t),c=[];return c=yc(c,Yl(s)),c=yc(c,Yl(o)),c=yc(c,Yl(a)),c}getBeforeBody(t,i){return BZ(Gs(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return Kn(t,o=>{let a={before:[],lines:[],after:[]},c=zZ(r,o);yc(a.before,Yl(Gs(c,"beforeLabel",this,o))),yc(a.lines,Gs(c,"label",this,o)),yc(a.after,Yl(Gs(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return BZ(Gs(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Gs(r,"beforeFooter",this,t),o=Gs(r,"footer",this,t),a=Gs(r,"afterFooter",this,t),c=[];return c=yc(c,Yl(s)),c=yc(c,Yl(o)),c=yc(c,Yl(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(RAe(this.chart,i[l]));return t.filter&&(c=c.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,r))),Kn(c,d=>{let h=zZ(t.callbacks,d);s.push(Gs(h,"labelColor",this,d)),o.push(Gs(h,"labelPointStyle",this,d)),a.push(Gs(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=w0[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=FZ(this,r),u=Object.assign({},c,l),d=VZ(this.chart,r,u),h=UZ(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=Ad(c),{x:f,y:g}=t,{width:v,height:_}=i,b,R,P,N,U,O;return o==="center"?(U=g+_/2,s==="left"?(b=f,R=b-a,N=U+a,O=U-a):(b=f+v,R=b+a,N=U-a,O=U+a),P=b):(s==="left"?R=f+Math.max(l,d)+a:s==="right"?R=f+v-Math.max(u,h)-a:R=this.caretX,o==="top"?(N=g,U=N-a,b=R-a,P=R+a):(N=g+_,U=N+a,b=R+a,P=R-a),O=N),{x1:b,x2:R,x3:P,y1:N,y2:U,y3:O}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let u=Lf(r.rtl,this.x,this.width);for(t.x=NA(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=lr(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,d=lr(o.bodyFont),h=NA(this,"left",o),f=s.x(h),g=l<d.lineHeight?(d.lineHeight-l)/2:0,v=i.y+g;if(o.usePointStyle){let _={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},b=s.leftForLtr(f,u)+u/2,R=v+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,TA(t,_,b,R),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,TA(t,_,b,R)}else{t.lineWidth=bn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let _=s.leftForLtr(f,u),b=s.leftForLtr(s.xPlus(f,1),u-2),R=Ad(a.borderRadius);Object.values(R).some(P=>P!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,$g(t,{x:_,y:v,w:u,h:l,radius:R}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),$g(t,{x:b,y:v+1,w:u-2,h:l-2,radius:R}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(_,v,u,l),t.strokeRect(_,v,u,l),t.fillStyle=a.backgroundColor,t.fillRect(b,v+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=r,h=lr(r.bodyFont),f=h.lineHeight,g=0,v=Lf(r.rtl,this.x,this.width),_=function(y){i.fillText(y,v.x(t.x+g),t.y+f/2),t.y+=f+o},b=v.textAlign(a),R,P,N,U,O,S,w;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=NA(this,b,r),i.fillStyle=r.bodyColor,Kn(this.beforeBody,_),g=c&&b!=="right"?a==="center"?u/2+d:u+2+d:0,U=0,S=s.length;U<S;++U){for(R=s[U],P=this.labelTextColors[U],i.fillStyle=P,Kn(R.before,_),N=R.lines,c&&N.length&&(this._drawColorBox(i,t,U,v,r),f=Math.max(h.lineHeight,l)),O=0,w=N.length;O<w;++O)_(N[O]),f=h.lineHeight;Kn(R.after,_)}g=0,f=h.lineHeight,Kn(this.afterBody,_),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=Lf(r.rtl,this.x,this.width);for(t.x=NA(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=lr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:v}=Ad(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+h,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+u-f,l),i.quadraticCurveTo(c+u,l,c+u,l+f),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+u,l+d-v),i.quadraticCurveTo(c+u,l+d,c+u-v,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+g,l+d),i.quadraticCurveTo(c,l+d,c,l+d-g),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+h),i.quadraticCurveTo(c,l,c+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=w0[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=FZ(this,t),l=Object.assign({},a,this._size),u=VZ(i,t,l),d=UZ(t,l,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Vr(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),DB(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),RB(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!d0(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!d0(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=w0[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),Tee={id:"tooltip",_element:HZ,positioners:w0,afterInit(n,e,t){t&&(n.tooltip=new HZ({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",ct(re({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:See},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var VAe=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function UAe(n,e,t,i){let r=n.indexOf(e);if(r===-1)return VAe(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var BAe=(n,e)=>n===null?null:Hs(Math.round(n),0,e);function jZ(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Iee=(()=>{class n extends Uf{static id="category";static defaults={ticks:{callback:jZ}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Rn(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:UAe(r,t,sn(i,t),this._addedLabels),BAe(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return jZ.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function zAe(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,g=u-1,{min:v,max:_}=e,b=!Rn(o),R=!Rn(a),P=!Rn(l),N=(_-v)/(d+1),U=dB((_-v)/g/f)*f,O,S,w,y;if(U<1e-14&&!b&&!R)return[{value:v},{value:_}];y=Math.ceil(_/U)-Math.floor(v/U),y>g&&(U=dB(y*U/g/f)*f),Rn(c)||(O=Math.pow(10,c),U=Math.ceil(U*O)/O),r==="ticks"?(S=Math.floor(v/U)*U,w=Math.ceil(_/U)*U):(S=v,w=_),b&&R&&s&&MJ((a-o)/s,U/1e3)?(y=Math.round(Math.min((a-o)/U,u)),U=(a-o)/y,S=o,w=a):P?(S=b?o:S,w=R?a:w,y=l-1,U=(w-S)/y):(y=(w-S)/U,Gg(y,Math.round(y),U/1e3)?y=Math.round(y):y=Math.ceil(y));let x=Math.max(fB(U),fB(S));O=Math.pow(10,Rn(c)?x:c),S=Math.round(S*O)/O,w=Math.round(w*O)/O;let T=0;for(b&&(h&&S!==o?(t.push({value:o}),S<o&&T++,Gg(Math.round((S+T*U)*O)/O,o,GZ(o,N,n))&&T++):S<o&&T++);T<y;++T){let M=Math.round((S+T*U)*O)/O;if(R&&M>a)break;t.push({value:M})}return R&&h&&w!==a?t.length&&Gg(t[t.length-1].value,a,GZ(a,N,n))?t[t.length-1].value=a:t.push({value:a}):(!R||w===a)&&t.push({value:w}),t}function GZ(n,e,{horizontal:t,minRotation:i}){let r=$l(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Kg=class extends Uf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Rn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=Ia(r),l=Ia(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=zAe(r,s);return e.bounds==="ticks"&&hB(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return EA(e,this.chart.options.locale,this.options.ticks.format)}},GA=class extends Kg{static id="linear";static defaults={ticks:{callback:h0.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Di(e)?e:0,this.max=Di(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=$l(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},S0=n=>Math.floor(Wl(n)),Vf=(n,e)=>Math.pow(10,S0(n)+e);function WZ(n){return n/Math.pow(10,S0(n))===1}function $Z(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function HAe(n,e){let t=e-n,i=S0(t);for(;$Z(n,e,i)>10;)i++;for(;$Z(n,e,i)<10;)i--;return Math.min(i,S0(n))}function jAe(n,{min:e,max:t}){e=js(n.min,e);let i=[],r=S0(e),s=HAe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=js(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:WZ(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let f=js(n.max,h);return i.push({value:f,major:WZ(f),significand:d}),i}var qZ=class extends Uf{static id="logarithmic";static defaults={ticks:{callback:h0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Kg.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Di(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Di(e)?Math.max(0,e):null,this.max=Di(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Di(this._userMin)&&(this.min=e===Vf(this.min,0)?Vf(this.min,-1):Vf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Vf(i,-1)),o(Vf(r,1)))),i<=0&&s(Vf(r,-1)),r<=0&&o(Vf(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=jAe(t,this);return e.bounds==="ticks"&&hB(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":EA(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Wl(e),this._valueRange=Wl(this.max)-Wl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Wl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function rz(n){let e=n.ticks;if(e.display&&n.display){let t=Vr(e.backdropPadding);return sn(e.font&&e.font.size,mi.font.size)+t.height}return 0}function GAe(n,e,t){return t=hi(t)?t:[t],{w:zJ(n,e.string,t),h:t.length*e.lineHeight}}function KZ(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function WAe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Xi/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),d=lr(l.font),h=GAe(n.ctx,d,n._pointLabels[c]);i[c]=h;let f=Us(n.getIndexAngle(c)+a),g=Math.round(bA(f)),v=KZ(g,u.x,h.w,0,180),_=KZ(g,u.y,h.h,90,270);$Ae(t,e,f,v,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=XAe(n,i,r)}function $Ae(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function qAe(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(bA(Us(c.angle+Bs))),u=JAe(c.y,a.h,l),d=YAe(l),h=QAe(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function KAe(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(gc({x:t,y:i},e)||gc({x:t,y:s},e)||gc({x:r,y:i},e)||gc({x:r,y:s},e))}function XAe(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:rz(s)/2,additionalAngle:o?Xi/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let d=qAe(n,u,c);i.push(d),a==="auto"&&(d.visible=KAe(d,l),d.visible&&(l=d))}return i}function YAe(n){return n===0||n===180?"center":n<180?"left":"right"}function QAe(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function JAe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function ZAe(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Rn(a)){let c=Ad(e.borderRadius),l=Vr(e.backdropPadding);n.fillStyle=a;let u=i-l.left,d=r-l.top,h=s-i+l.width,f=o-r+l.height;Object.values(c).some(g=>g!==0)?(n.beginPath(),$g(n,{x:u,y:d,w:h,h:f,radius:c}),n.fill()):n.fillRect(u,d,h,f)}}function eMe(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));ZAe(t,o,s);let a=lr(o.font),{x:c,y:l,textAlign:u}=s;Cd(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function Cee(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,zs);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function tMe(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Cee(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function nMe(n,e,t){return Kl(n,{label:t,index:e,type:"pointLabel"})}var XZ=class extends Kg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:h0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Vr(rz(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Di(e)&&!isNaN(e)?e:0,this.max=Di(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/rz(this.options))}generateTickLabels(e){Kg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=ai(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?WAe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=zs/(this._pointLabels.length||1),i=this.options.startAngle||0;return Us(e*t+$l(i))}getDistanceFromCenterForValue(e){if(Rn(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Rn(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return nMe(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-Bs+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),Cee(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&eMe(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),g=s.setContext(h);tMe(this,f,c,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=lr(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=Vr(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Cd(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},$A={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ws=Object.keys($A);function YZ(n,e){return n-e}function QZ(n,e){if(Rn(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Di(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Wg(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function JZ(n,e,t,i){let r=Ws.length;for(let s=Ws.indexOf(n);s<r-1;++s){let o=$A[Ws[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Ws[s]}return Ws[r-1]}function iMe(n,e,t,i,r){for(let s=Ws.length-1;s>=Ws.indexOf(t);s--){let o=Ws[s];if($A[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Ws[t?Ws.indexOf(t):0]}function rMe(n){for(let e=Ws.indexOf(n)+1,t=Ws.length;e<t;++e)if($A[Ws[e]].common)return Ws[e]}function ZZ(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=xA(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function sMe(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function eee(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:sMe(n,i,r,t)}var tee=(()=>{class n extends Uf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new HIe._date(t.adapters.date);s.init(i),Hg(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:QZ(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Di(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Di(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=NJ(s,o,a);return this._unit=i.unit||(r.autoSkip?JZ(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):iMe(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:rMe(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),eee(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Hs(i,0,a),r=Hs(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||JZ(o.minUnit,i,r,this._getLabelCapacity(i)),c=sn(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Wg(l)||l===!0,d={},h=i,f,g;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,g=0;f<r;f=+t.add(f,c,a),g++)ZZ(d,f,v);return(f===r||s.bounds==="ticks"||g===1)&&ZZ(d,f,v),Object.keys(d).sort(YZ).map(_=>+_)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return ai(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],f=r[i],g=u&&h&&f&&f.major;return this._adapter.format(t,s||(g?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=$l(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,eee(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(QZ(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return gB(t.sort(YZ))}}return n})();function kA(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Ed(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Ed(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var nee=class extends tee{static id="timeseries";static defaults=tee.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=kA(t,this.min),this._tableRange=kA(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],c=r[o-1],l=r[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(kA(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return kA(this._table,i*this._tableRange+this._minPos,!0)}};var oMe=typeof global=="object"&&global&&global.Object===Object&&global,qA=oMe;var aMe=typeof self=="object"&&self&&self.Object===Object&&self,cMe=qA||aMe||Function("return this")(),Uo=cMe;var lMe=Uo.Symbol,Yg=lMe;var Aee=Object.prototype,uMe=Aee.hasOwnProperty,dMe=Aee.toString,C0=Yg?Yg.toStringTag:void 0;function hMe(n){var e=uMe.call(n,C0),t=n[C0];try{n[C0]=void 0;var i=!0}catch{}var r=dMe.call(n);return i&&(e?n[C0]=t:delete n[C0]),r}var Mee=hMe;var fMe=Object.prototype,pMe=fMe.toString;function mMe(n){return pMe.call(n)}var Dee=mMe;var gMe="[object Null]",_Me="[object Undefined]",Ree=Yg?Yg.toStringTag:void 0;function yMe(n){return n==null?n===void 0?_Me:gMe:Ree&&Ree in Object(n)?Mee(n):Dee(n)}var Rd=yMe;function vMe(n){return n!=null&&typeof n=="object"}var xc=vMe;var bMe=Array.isArray,A0=bMe;function xMe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var $s=xMe;function wMe(n){return n}var KA=wMe;var EMe="[object AsyncFunction]",SMe="[object Function]",TMe="[object GeneratorFunction]",IMe="[object Proxy]";function CMe(n){if(!$s(n))return!1;var e=Rd(n);return e==SMe||e==TMe||e==EMe||e==IMe}var Qg=CMe;var AMe=Uo["__core-js_shared__"],XA=AMe;var Pee=(function(){var n=/[^.]+$/.exec(XA&&XA.keys&&XA.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function MMe(n){return!!Pee&&Pee in n}var Nee=MMe;var DMe=Function.prototype,RMe=DMe.toString;function PMe(n){if(n!=null){try{return RMe.call(n)}catch{}try{return n+""}catch{}}return""}var kee=PMe;var NMe=/[\\^$.*+?()[\]{}|]/g,kMe=/^\[object .+?Constructor\]$/,OMe=Function.prototype,LMe=Object.prototype,FMe=OMe.toString,VMe=LMe.hasOwnProperty,UMe=RegExp("^"+FMe.call(VMe).replace(NMe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BMe(n){if(!$s(n)||Nee(n))return!1;var e=Qg(n)?UMe:kMe;return e.test(kee(n))}var Oee=BMe;function zMe(n,e){return n?.[e]}var Lee=zMe;function HMe(n,e){var t=Lee(n,e);return Oee(t)?t:void 0}var Jg=HMe;var Fee=Object.create,jMe=(function(){function n(){}return function(e){if(!$s(e))return{};if(Fee)return Fee(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})(),Vee=jMe;function GMe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var Uee=GMe;function WMe(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var Bee=WMe;var $Me=800,qMe=16,KMe=Date.now;function XMe(n){var e=0,t=0;return function(){var i=KMe(),r=qMe-(i-t);if(t=i,r>0){if(++e>=$Me)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var zee=XMe;function YMe(n){return function(){return n}}var Hee=YMe;var QMe=(function(){try{var n=Jg(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Zg=QMe;var JMe=Zg?function(n,e){return Zg(n,"toString",{configurable:!0,enumerable:!1,value:Hee(e),writable:!0})}:KA,jee=JMe;var ZMe=zee(jee),Gee=ZMe;var eDe=9007199254740991,tDe=/^(?:0|[1-9]\d*)$/;function nDe(n,e){var t=typeof n;return e=e??eDe,!!e&&(t=="number"||t!="symbol"&&tDe.test(n))&&n>-1&&n%1==0&&n<e}var YA=nDe;function iDe(n,e,t){e=="__proto__"&&Zg?Zg(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var e_=iDe;function rDe(n,e){return n===e||n!==n&&e!==e}var Pd=rDe;var sDe=Object.prototype,oDe=sDe.hasOwnProperty;function aDe(n,e,t){var i=n[e];(!(oDe.call(n,e)&&Pd(i,t))||t===void 0&&!(e in n))&&e_(n,e,t)}var Wee=aDe;function cDe(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=i?i(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),r?e_(t,a,c):Wee(t,a,c)}return t}var $ee=cDe;var qee=Math.max;function lDe(n,e,t){return e=qee(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=qee(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),Uee(n,this,a)}}var Kee=lDe;function uDe(n,e){return Gee(Kee(n,e,KA),n+"")}var Xee=uDe;var dDe=9007199254740991;function hDe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=dDe}var QA=hDe;function fDe(n){return n!=null&&QA(n.length)&&!Qg(n)}var t_=fDe;function pDe(n,e,t){if(!$s(t))return!1;var i=typeof e;return(i=="number"?t_(t)&&YA(e,t.length):i=="string"&&e in t)?Pd(t[e],n):!1}var Yee=pDe;function mDe(n){return Xee(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&Yee(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var Qee=mDe;var gDe=Object.prototype;function _De(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||gDe;return n===t}var JA=_De;function yDe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var Jee=yDe;var vDe="[object Arguments]";function bDe(n){return xc(n)&&Rd(n)==vDe}var oz=bDe;var Zee=Object.prototype,xDe=Zee.hasOwnProperty,wDe=Zee.propertyIsEnumerable,EDe=oz((function(){return arguments})())?oz:function(n){return xc(n)&&xDe.call(n,"callee")&&!wDe.call(n,"callee")},M0=EDe;function SDe(){return!1}var ete=SDe;var ite=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tte=ite&&typeof module=="object"&&module&&!module.nodeType&&module,TDe=tte&&tte.exports===ite,nte=TDe?Uo.Buffer:void 0,IDe=nte?nte.isBuffer:void 0,CDe=IDe||ete,ZA=CDe;var ADe="[object Arguments]",MDe="[object Array]",DDe="[object Boolean]",RDe="[object Date]",PDe="[object Error]",NDe="[object Function]",kDe="[object Map]",ODe="[object Number]",LDe="[object Object]",FDe="[object RegExp]",VDe="[object Set]",UDe="[object String]",BDe="[object WeakMap]",zDe="[object ArrayBuffer]",HDe="[object DataView]",jDe="[object Float32Array]",GDe="[object Float64Array]",WDe="[object Int8Array]",$De="[object Int16Array]",qDe="[object Int32Array]",KDe="[object Uint8Array]",XDe="[object Uint8ClampedArray]",YDe="[object Uint16Array]",QDe="[object Uint32Array]",gi={};gi[jDe]=gi[GDe]=gi[WDe]=gi[$De]=gi[qDe]=gi[KDe]=gi[XDe]=gi[YDe]=gi[QDe]=!0;gi[ADe]=gi[MDe]=gi[zDe]=gi[DDe]=gi[HDe]=gi[RDe]=gi[PDe]=gi[NDe]=gi[kDe]=gi[ODe]=gi[LDe]=gi[FDe]=gi[VDe]=gi[UDe]=gi[BDe]=!1;function JDe(n){return xc(n)&&QA(n.length)&&!!gi[Rd(n)]}var rte=JDe;function ZDe(n){return function(e){return n(e)}}var ste=ZDe;var ote=typeof exports=="object"&&exports&&!exports.nodeType&&exports,D0=ote&&typeof module=="object"&&module&&!module.nodeType&&module,eRe=D0&&D0.exports===ote,az=eRe&&qA.process,tRe=(function(){try{var n=D0&&D0.require&&D0.require("util").types;return n||az&&az.binding&&az.binding("util")}catch{}})(),cz=tRe;var ate=cz&&cz.isTypedArray,nRe=ate?ste(ate):rte,eM=nRe;var iRe=Object.prototype,rRe=iRe.hasOwnProperty;function sRe(n,e){var t=A0(n),i=!t&&M0(n),r=!t&&!i&&ZA(n),s=!t&&!i&&!r&&eM(n),o=t||i||r||s,a=o?Jee(n.length,String):[],c=a.length;for(var l in n)(e||rRe.call(n,l))&&!(o&&(l=="length"||r&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||YA(l,c)))&&a.push(l);return a}var cte=sRe;function oRe(n,e){return function(t){return n(e(t))}}var lte=oRe;function aRe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ute=aRe;var cRe=Object.prototype,lRe=cRe.hasOwnProperty;function uRe(n){if(!$s(n))return ute(n);var e=JA(n),t=[];for(var i in n)i=="constructor"&&(e||!lRe.call(n,i))||t.push(i);return t}var dte=uRe;function dRe(n){return t_(n)?cte(n,!0):dte(n)}var tM=dRe;var hRe=Jg(Object,"create"),Ql=hRe;function fRe(){this.__data__=Ql?Ql(null):{},this.size=0}var hte=fRe;function pRe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var fte=pRe;var mRe="__lodash_hash_undefined__",gRe=Object.prototype,_Re=gRe.hasOwnProperty;function yRe(n){var e=this.__data__;if(Ql){var t=e[n];return t===mRe?void 0:t}return _Re.call(e,n)?e[n]:void 0}var pte=yRe;var vRe=Object.prototype,bRe=vRe.hasOwnProperty;function xRe(n){var e=this.__data__;return Ql?e[n]!==void 0:bRe.call(e,n)}var mte=xRe;var wRe="__lodash_hash_undefined__";function ERe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ql&&e===void 0?wRe:e,this}var gte=ERe;function n_(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}n_.prototype.clear=hte;n_.prototype.delete=fte;n_.prototype.get=pte;n_.prototype.has=mte;n_.prototype.set=gte;var lz=n_;function SRe(){this.__data__=[],this.size=0}var _te=SRe;function TRe(n,e){for(var t=n.length;t--;)if(Pd(n[t][0],e))return t;return-1}var Nd=TRe;var IRe=Array.prototype,CRe=IRe.splice;function ARe(n){var e=this.__data__,t=Nd(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():CRe.call(e,t,1),--this.size,!0}var yte=ARe;function MRe(n){var e=this.__data__,t=Nd(e,n);return t<0?void 0:e[t][1]}var vte=MRe;function DRe(n){return Nd(this.__data__,n)>-1}var bte=DRe;function RRe(n,e){var t=this.__data__,i=Nd(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var xte=RRe;function i_(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}i_.prototype.clear=_te;i_.prototype.delete=yte;i_.prototype.get=vte;i_.prototype.has=bte;i_.prototype.set=xte;var kd=i_;var PRe=Jg(Uo,"Map"),nM=PRe;function NRe(){this.size=0,this.__data__={hash:new lz,map:new(nM||kd),string:new lz}}var wte=NRe;function kRe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Ete=kRe;function ORe(n,e){var t=n.__data__;return Ete(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Od=ORe;function LRe(n){var e=Od(this,n).delete(n);return this.size-=e?1:0,e}var Ste=LRe;function FRe(n){return Od(this,n).get(n)}var Tte=FRe;function VRe(n){return Od(this,n).has(n)}var Ite=VRe;function URe(n,e){var t=Od(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var Cte=URe;function r_(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}r_.prototype.clear=wte;r_.prototype.delete=Ste;r_.prototype.get=Tte;r_.prototype.has=Ite;r_.prototype.set=Cte;var Ate=r_;var BRe=lte(Object.getPrototypeOf,Object),iM=BRe;var zRe="[object Object]",HRe=Function.prototype,jRe=Object.prototype,Mte=HRe.toString,GRe=jRe.hasOwnProperty,WRe=Mte.call(Object);function $Re(n){if(!xc(n)||Rd(n)!=zRe)return!1;var e=iM(n);if(e===null)return!0;var t=GRe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Mte.call(t)==WRe}var Dte=$Re;function qRe(){this.__data__=new kd,this.size=0}var Rte=qRe;function KRe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var Pte=KRe;function XRe(n){return this.__data__.get(n)}var Nte=XRe;function YRe(n){return this.__data__.has(n)}var kte=YRe;var QRe=200;function JRe(n,e){var t=this.__data__;if(t instanceof kd){var i=t.__data__;if(!nM||i.length<QRe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Ate(i)}return t.set(n,e),this.size=t.size,this}var Ote=JRe;function s_(n){var e=this.__data__=new kd(n);this.size=e.size}s_.prototype.clear=Rte;s_.prototype.delete=Pte;s_.prototype.get=Nte;s_.prototype.has=kte;s_.prototype.set=Ote;var Lte=s_;var Bte=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fte=Bte&&typeof module=="object"&&module&&!module.nodeType&&module,ZRe=Fte&&Fte.exports===Bte,Vte=ZRe?Uo.Buffer:void 0,Ute=Vte?Vte.allocUnsafe:void 0;function e1e(n,e){if(e)return n.slice();var t=n.length,i=Ute?Ute(t):new n.constructor(t);return n.copy(i),i}var zte=e1e;var t1e=Uo.Uint8Array,uz=t1e;function n1e(n){var e=new n.constructor(n.byteLength);return new uz(e).set(new uz(n)),e}var Hte=n1e;function i1e(n,e){var t=e?Hte(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var jte=i1e;function r1e(n){return typeof n.constructor=="function"&&!JA(n)?Vee(iM(n)):{}}var Gte=r1e;function s1e(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var c=o[n?a:++r];if(t(s[c],c,s)===!1)break}return e}}var Wte=s1e;var o1e=Wte(),$te=o1e;function a1e(n,e,t){(t!==void 0&&!Pd(n[e],t)||t===void 0&&!(e in n))&&e_(n,e,t)}var R0=a1e;function c1e(n){return xc(n)&&t_(n)}var qte=c1e;function l1e(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var P0=l1e;function u1e(n){return $ee(n,tM(n))}var Kte=u1e;function d1e(n,e,t,i,r,s,o){var a=P0(n,t),c=P0(e,t),l=o.get(c);if(l){R0(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=A0(c),f=!h&&ZA(c),g=!h&&!f&&eM(c);u=c,h||f||g?A0(a)?u=a:qte(a)?u=Bee(a):f?(d=!1,u=zte(c,!0)):g?(d=!1,u=jte(c,!0)):u=[]:Dte(c)||M0(c)?(u=a,M0(a)?u=Kte(a):(!$s(a)||Qg(a))&&(u=Gte(c))):d=!1}d&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),R0(n,t,u)}var Xte=d1e;function Yte(n,e,t,i,r){n!==e&&$te(e,function(s,o){if(r||(r=new Lte),$s(s))Xte(n,e,o,t,Yte,i,r);else{var a=i?i(P0(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),R0(n,o,a)}},tM)}var Qte=Yte;var h1e=Qee(function(n,e,t){Qte(n,e,t)}),dz=h1e;var f1e=new Te("Configuration for ngCharts");var p1e=(()=>{class n{constructor(){this.colorschemesOptions=new Bi(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jte=(()=>{class n{constructor(t,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new yn,this.chartHover=new yn,this.subs=[],this.themeOverrides={},s?.registerables&&Xg.register(...s.registerables),s?.defaults&&mi.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(fh()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let i=["type"],r=Object.getOwnPropertyNames(t);if(r.some(s=>i.includes(s))||r.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Xg(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return dz({onHover:(t,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(mt(tn),mt(_t),mt(p1e),mt(f1e,8))}}static{this.\u0275dir=xt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[hs]})}}return n})();var rM=class n{firestore=H(Bl);constructor(){}getUserData(e){let t=Dg(this.firestore,`users/${e}`);return vQ(t)}async initUserData(e){let t=Dg(this.firestore,`users/${e}`);(await wQ(t)).exists()||await TQ(t,{laScore:0})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})};function m1e(n,e){if(n&1&&(ce(0,"div",1)(1,"div",2)(2,"h1"),ge(3),le(),ce(4,"p",3),ge(5,"Here's your lifestyle overview for today."),le()(),ce(6,"div",4)(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title"),ge(10,"LA Score"),le(),ce(11,"mat-icon",6),ge(12,"speed"),le()(),ce(13,"mat-card-content")(14,"div",7),ge(15),le(),ce(16,"div",8),Cn(17,"canvas",9),le()()(),ce(18,"mat-card",10)(19,"mat-card-header")(20,"mat-card-title"),ge(21,"Streak"),le(),ce(22,"mat-icon",11),ge(23,"local_fire_department"),le()(),ce(24,"mat-card-content")(25,"div",12),ge(26,"5 Days"),le(),ce(27,"p",13),ge(28,"Keep it up!"),le()()(),ce(29,"mat-card",10)(30,"mat-card-header")(31,"mat-card-title"),ge(32,"Habits"),le(),ce(33,"mat-icon",14),ge(34,"check_circle"),le()(),ce(35,"mat-card-content")(36,"div",12),ge(37,"8/10"),le(),ce(38,"p",13),ge(39,"Completed today"),le()()()(),ce(40,"div",15)(41,"mat-card",16)(42,"mat-card-header")(43,"mat-card-title"),ge(44,"Weekly Progress"),le()(),ce(45,"mat-card-content")(46,"div",17),Cn(47,"canvas",9),le()()()()()),n&2){let t,i=e.ngIf,r=Yn();Lt(3),Ky("Welcome back, ",(i.displayName==null||(t=i.displayName.split(" "))==null?null:t[0])||"User","!"),Lt(12),fs(r.laScore),Lt(2),In("data",r.barChartData)("options",r.barChartOptions)("type",r.barChartType),Lt(30),In("data",r.lineChartData)("options",r.lineChartOptions)("type",r.lineChartType)}}Xg.register(see,BA,oee,I0,_ee,bee,Iee,GA,Eee,Tee,wee);var sM=class n{authService=H(Vs);firestoreService=H(rM);laScore=0;user$=this.authService.user$;barChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#333"}}};barChartType="bar";barChartData={labels:["LA Score"],datasets:[{data:[0],label:"Score",backgroundColor:["#3f51b5"],borderRadius:5}]};lineChartOptions={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}},scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!0,position:"bottom"}}};lineChartType="line";lineChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{data:[65,59,80,81,56,55,40],label:"Weekly Progress",backgroundColor:"rgba(63, 81, 181, 0.2)",borderColor:"#3f51b5",pointBackgroundColor:"#fff",pointBorderColor:"#3f51b5",fill:"origin"}]};ngOnInit(){this.authService.user$.pipe(yi(e=>e?(this.firestoreService.initUserData(e.uid),this.firestoreService.getUserData(e.uid)):bt(null))).subscribe(e=>{e&&e.laScore!==void 0&&(this.laScore=e.laScore,this.updateChart(this.laScore))})}updateChart(e){this.barChartData={labels:["Current Score"],datasets:[{data:[e],label:"LA Score",backgroundColor:["#3f51b5"],borderRadius:5}]};let t=[e-10,e-5,e+2,e-2,e+5,e,e];this.lineChartData=ct(re({},this.lineChartData),{datasets:[ct(re({},this.lineChartData.datasets[0]),{data:t.map(i=>Math.max(0,Math.min(100,i)))})]})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[1,"welcome-section"],[1,"subtitle"],[1,"stats-grid"],[1,"stat-card","main-score-card"],["color","primary",1,"card-icon"],[1,"score-value"],[1,"chart-wrapper","small-chart"],["baseChart","",3,"data","options","type"],[1,"stat-card"],["color","accent",1,"card-icon"],[1,"stat-value"],[1,"stat-desc"],["color","warn",1,"card-icon"],[1,"charts-section"],[1,"chart-card"],[1,"chart-wrapper","main-chart"]],template:function(t,i){t&1&&(Or(0,m1e,48,8,"div",0),rl(1,"async")),t&2&&In("ngIf",Vu(1,1,i.user$))},dependencies:[Ns,ca,Jte,Lo,vd,Fg,iA,nA,Fs,mc,Oh],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:1.1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.card-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.score-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3f51b5;line-height:1;margin-bottom:16px}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;margin-bottom:4px}.stat-desc[_ngcontent-%COMP%]{color:#666;margin:0}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.small-chart[_ngcontent-%COMP%]{height:100px}.main-chart[_ngcontent-%COMP%]{height:300px}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px}@media(max-width:600px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.score-value[_ngcontent-%COMP%]{font-size:2.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}}"]})};var hz=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=zl(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=zl(t)}_inset=!1;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){i&2&&(Gi("aria-orientation",r.vertical?"vertical":"horizontal"),oi("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return n})(),oM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();var cne=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(mt(kr),mt(tn))};static \u0275dir=xt({type:n})}return n})(),yz=(()=>{class n extends cne{static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,features:[ui]})}return n})(),U0=new Te("");var g1e={provide:U0,useExisting:Qs(()=>mM),multi:!0};function _1e(){let n=To()?To().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var y1e=new Te(""),mM=(()=>{class n extends cne{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!_1e())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(mt(kr),mt(tn),mt(y1e,8))};static \u0275dir=xt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&wn("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Ds([g1e]),ui]})}return n})();function vz(n){return n==null||bz(n)===0}function bz(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var xz=new Te(""),wz=new Te(""),v1e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,c_=class{static min(e){return b1e(e)}static max(e){return x1e(e)}static required(e){return w1e(e)}static requiredTrue(e){return E1e(e)}static email(e){return S1e(e)}static minLength(e){return T1e(e)}static maxLength(e){return I1e(e)}static pattern(e){return C1e(e)}static nullValidator(e){return lne()}static compose(e){return mne(e)}static composeAsync(e){return _ne(e)}};function b1e(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function x1e(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function w1e(n){return vz(n.value)?{required:!0}:null}function E1e(n){return n.value===!0?null:{required:!0}}function S1e(n){return vz(n.value)||v1e.test(n.value)?null:{email:!0}}function T1e(n){return e=>{let t=e.value?.length??bz(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function I1e(n){return e=>{let t=e.value?.length??bz(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function C1e(n){if(!n)return lne;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(vz(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function lne(n){return null}function une(n){return n!=null}function dne(n){return tl(n)?_i(n):n}function hne(n){let e={};return n.forEach(t=>{e=t!=null?re(re({},e),t):e}),Object.keys(e).length===0?null:e}function fne(n,e){return e.map(t=>t(n))}function A1e(n){return!n.validate}function pne(n){return n.map(e=>A1e(e)?e:t=>e.validate(t))}function mne(n){if(!n)return null;let e=n.filter(une);return e.length==0?null:function(t){return hne(fne(t,e))}}function gne(n){return n!=null?mne(pne(n)):null}function _ne(n){if(!n)return null;let e=n.filter(une);return e.length==0?null:function(t){let i=fne(t,e).map(dne);return dy(i).pipe(pt(hne))}}function yne(n){return n!=null?_ne(pne(n)):null}function Zte(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vne(n){return n._rawValidators}function bne(n){return n._rawAsyncValidators}function fz(n){return n?Array.isArray(n)?n:[n]:[]}function cM(n,e){return Array.isArray(n)?n.includes(e):n===e}function ene(n,e){let t=fz(e);return fz(n).forEach(r=>{cM(t,r)||t.push(r)}),t}function tne(n,e){return fz(e).filter(t=>!cM(n,t))}var lM=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gne(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yne(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Bf=class extends lM{name;get formDirective(){return null}get path(){return null}},zf=class extends lM{_parent=null;name=null;valueAccessor=null},uM=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var xne=(()=>{class n extends uM{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(mt(zf,2))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&oi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[ui]})}return n})(),wne=(()=>{class n extends uM{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(mt(Bf,10))};static \u0275dir=xt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&oi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[ui]})}return n})();var N0="VALID",aM="INVALID",o_="PENDING",k0="DISABLED",Ld=class{},dM=class extends Ld{value;source;constructor(e,t){super(),this.value=e,this.source=t}},O0=class extends Ld{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},L0=class extends Ld{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},a_=class extends Ld{status;source;constructor(e,t){super(),this.status=e,this.source=t}},pz=class extends Ld{source;constructor(e){super(),this.source=e}},V0=class extends Ld{source;constructor(e){super(),this.source=e}};function Ez(n){return(gM(n)?n.validators:n)||null}function M1e(n){return Array.isArray(n)?gne(n):n||null}function Sz(n,e){return(gM(e)?e.asyncValidators:n)||null}function D1e(n){return Array.isArray(n)?yne(n):n||null}function gM(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ene(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new me(1e3,"");if(!i[t])throw new me(1001,"")}function Sne(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new me(1002,"")})}var l_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ii(this.statusReactive)}set status(e){Ii(()=>this.statusReactive.set(e))}_status=em(()=>this.statusReactive(),{});statusReactive=bi(void 0,{});get valid(){return this.status===N0}get invalid(){return this.status===aM}get pending(){return this.status==o_}get disabled(){return this.status===k0}get enabled(){return this.status!==k0}errors;get pristine(){return Ii(this.pristineReactive)}set pristine(e){Ii(()=>this.pristineReactive.set(e))}_pristine=em(()=>this.pristineReactive(),{});pristineReactive=bi(!0,{});get dirty(){return!this.pristine}get touched(){return Ii(this.touchedReactive)}set touched(e){Ii(()=>this.touchedReactive.set(e))}_touched=em(()=>this.touchedReactive(),{});touchedReactive=bi(!1,{});get untouched(){return!this.touched}_events=new At;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ene(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ene(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tne(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tne(e,this._rawAsyncValidators))}hasValidator(e){return cM(this._rawValidators,e)}hasAsyncValidator(e){return cM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ct(re({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new L0(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new L0(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ct(re({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new O0(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new O0(!0,i))}markAsPending(e={}){this.status=o_;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new a_(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ct(re({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=k0,this.errors=null,this._forEachChild(r=>{r.disable(ct(re({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dM(this.value,i)),this._events.next(new a_(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ct(re({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=N0,this._forEachChild(i=>{i.enable(ct(re({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ct(re({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N0||this.status===o_)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dM(this.value,t)),this._events.next(new a_(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ct(re({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?k0:N0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=o_,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=dne(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new a_(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new yn,this.statusChanges=new yn}_calculateStatus(){return this._allControlsDisabled()?k0:this.errors?aM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(o_)?o_:this._anyControlsHaveStatus(aM)?aM:N0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new O0(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new L0(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gM(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=M1e(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=D1e(this._rawAsyncValidators)}},hM=class extends l_{constructor(e,t,i){super(Ez(t),Sz(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Sne(this,!0,e),Object.keys(e).forEach(i=>{Ene(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,ct(re({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new V0(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mz=class extends hM{};var _M=new Te("",{factory:()=>yM}),yM="always";function Tne(n,e){return[...e.path,n]}function gz(n,e,t=yM){Tz(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),P1e(n,e),k1e(n,e),N1e(n,e),R1e(n,e)}function nne(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),pM(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function R1e(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Tz(n,e){let t=vne(n);e.validator!==null?n.setValidators(Zte(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=bne(n);e.asyncValidator!==null?n.setAsyncValidators(Zte(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();fM(e._rawValidators,r),fM(e._rawAsyncValidators,r)}function pM(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=vne(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=bne(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return fM(e._rawValidators,i),fM(e._rawAsyncValidators,i),t}function P1e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ine(n,e)})}function N1e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ine(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Ine(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function k1e(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function O1e(n,e){n==null,Tz(n,e)}function L1e(n,e){return pM(n,e)}function Cne(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function F1e(n){return Object.getPrototypeOf(n.constructor)===yz}function V1e(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ane(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===mM?t=s:F1e(s)?i=s:r=s}),r||i||t||null}function U1e(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ine(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rne(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var F0=class extends l_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Ez(t),Sz(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rne(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new V0(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ine(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ine(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rne(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var B1e=n=>n instanceof F0;var z1e={provide:zf,useExisting:Qs(()=>Iz)},sne=Promise.resolve(),Iz=(()=>{class n extends zf{_changeDetectorRef;callSetDisabledState;control=new F0;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new yn;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ane(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Cne(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){sne.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Pi(i);sne.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Tne(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(mt(Bf,9),mt(xz,10),mt(wz,10),mt(U0,10),mt(Rs,8),mt(_M,8))};static \u0275dir=xt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ds([z1e]),ui,hs]})}return n})();var Mne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var _z=class extends l_{constructor(e,t,i){super(Ez(t),Sz(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Sne(this,!1,e),e.forEach((i,r)=>{Ene(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],ct(re({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new V0(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var H1e=(()=>{class n extends Bf{callSetDisabledState;get submitted(){return Ii(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=em(()=>this._submittedReactive(),{});_submittedReactive=bi(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(pM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return gz(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){nne(t.control||null,t,!1),U1e(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,V1e(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new pz(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(nne(i||null,t),B1e(r)&&(gz(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);O1e(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&L1e(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tz(this.form,this),this._oldForm&&pM(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(mt(xz,10),mt(wz,10),mt(_M,8))};static \u0275dir=xt({type:n,features:[ui,hs]})}return n})();var Dne=new Te("");var j1e={provide:zf,useExisting:Qs(()=>Cz)},Cz=(()=>{class n extends zf{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new yn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ane(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Cne(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Tne(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(mt(Bf,13),mt(xz,10),mt(wz,10),mt(U0,10),mt(Dne,8))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ds([j1e]),ui,hs]})}return n})();var G1e={provide:Bf,useExisting:Qs(()=>Az)},Az=(()=>{class n extends H1e{form=null;ngSubmit=new yn;get control(){return this.form}static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&wn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ds([G1e]),ui]})}return n})(),W1e={provide:U0,useExisting:Qs(()=>vM),multi:!0};function Rne(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $1e(n){return n.split(":")[0]}var vM=(()=>{class n extends yz{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=H(xr).injector;destroyRef=H(Ss);cdr=H(Rs);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Xa({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=Rne(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=$1e(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&wn("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ds([W1e]),ui]})}return n})(),Pne=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Rne(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(mt(tn),mt(kr),mt(vM,9))};static \u0275dir=xt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),q1e={provide:U0,useExisting:Qs(()=>Nne),multi:!0};function one(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function K1e(n){return n.split(":")[0]}var Nne=(()=>{class n extends yz{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);r.push(l)}}else{let o=i.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=K1e(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&wn("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ds([q1e]),ui]})}return n})(),kne=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(one(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(one(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(mt(tn),mt(kr),mt(Nne,9))};static \u0275dir=xt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var One=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({})}return n})();function ane(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Lne=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return ane(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new hM(r,s)}record(t,i=null){let r=this._reduceControls(t);return new mz(r,i)}control(t,i,r){let s={};return this.useNonNullable?(ane(i)?s=i:(s.validators=i,s.asyncValidators=r),new F0(t,ct(re({},s),{nonNullable:!0}))):new F0(t,i,r)}array(t,i,r){let s=t.map(o=>this._createControl(o));return new _z(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof F0)return t;if(t instanceof l_)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_M,useValue:t.callSetDisabledState??yM}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[One]})}return n})(),Vne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Dne,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:_M,useValue:t.callSetDisabledState??yM}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[One]})}return n})();var Une=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();var Y1e=["*"],Q1e=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,J1e=["unscopedContent"],Z1e=["text"],ePe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],tPe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var nPe=new Te("ListOption"),Dz=(()=>{class n{_elementRef=H(tn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),Rz=(()=>{class n{_elementRef=H(tn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),iPe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),Bne=(()=>{class n{_listOption=H(nPe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,hostVars:4,hostBindings:function(i,r){i&2&&oi("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),rPe=(()=>{class n extends Bne{static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[ui]})}return n})(),Pz=(()=>{class n extends Bne{static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[ui]})}return n})(),sPe=new Te("MAT_LIST_CONFIG"),Mz=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=zl(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(zl(t))}_disabled=bi(!1);_defaultOptions=H(sPe,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,hostVars:1,hostBindings:function(i,r){i&2&&Gi("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),oPe=(()=>{class n{_elementRef=H(tn);_ngZone=H(_t);_listBase=H(Mz,{optional:!0});_platform=H(qi);_hostElement;_isButtonElement;_noopAnimations=Ta();_avatars;_icons;set lines(t){this._explicitLines=Pg(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=zl(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(zl(t))}_disabled=bi(!1);_subscriptions=new Nn;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){H(No).load(Og);let t=H(i0,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Rf(this,this._ngZone,this._hostElement,this._platform,H(Yt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(dh(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,contentQueries:function(i,r,s){if(i&1&&(Ms(s,rPe,4),Ms(s,Pz,4)),i&2){let o;Qi(o=Ji())&&(r._avatars=o),Qi(o=Ji())&&(r._icons=o)}},hostVars:4,hostBindings:function(i,r){i&2&&(Gi("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),oi("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var zne=(()=>{class n extends Mz{static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275cmp=Rt({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[Ds([{provide:Mz,useExisting:n}]),ui],ngContentSelectors:Y1e,decls:1,vars:0,template:function(i,r){i&1&&(fr(),$n(0))},styles:[Q1e],encapsulation:2,changeDetection:0})}return n})(),Hne=(()=>{class n extends oPe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=zl(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275cmp=Rt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,s){if(i&1&&(Ms(s,Rz,5),Ms(s,Dz,5),Ms(s,iPe,5)),i&2){let o;Qi(o=Ji())&&(r._lines=o),Qi(o=Ji())&&(r._titles=o),Qi(o=Ji())&&(r._meta=o)}},viewQuery:function(i,r){if(i&1&&(nl(J1e,5),nl(Z1e,5)),i&2){let s;Qi(s=Ji())&&(r._unscopedContent=s.first),Qi(s=Ji())&&(r._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Gi("aria-current",r._getAriaCurrent()),oi("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[ui],ngContentSelectors:tPe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let s=Xr();fr(ePe),$n(0),ce(1,"span",1),$n(2,1),$n(3,2),ce(4,"span",2,0),wn("cdkObserveContent",function(){return ci(s),li(r._updateItemLines(!0))}),$n(6,3),le()(),$n(7,4),$n(8,5),Cn(9,"div",3)}},dependencies:[VQ],encapsulation:2,changeDetection:0})}return n})();var jne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return n})();var Gne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[UQ,Lg,Une,Mi,oM]})}return n})();function cPe(n,e){if(n&1){let t=Xr();ce(0,"div",1)(1,"mat-card",2),Cn(2,"div",3),ce(3,"div",4),Cn(4,"div",5),ce(5,"div",6)(6,"h2",7),ge(7),le(),ce(8,"p",8),ge(9),le()()(),Cn(10,"mat-divider"),ce(11,"mat-card-content")(12,"mat-list")(13,"h3",9),ge(14,"Account Details"),le(),ce(15,"mat-list-item")(16,"mat-icon",10),ge(17,"fingerprint"),le(),ce(18,"div",11),ge(19,"User ID"),le(),ce(20,"div",12),ge(21),le()(),ce(22,"mat-list-item")(23,"mat-icon",10),ge(24,"verified_user"),le(),ce(25,"div",11),ge(26,"Email Verified"),le(),ce(27,"div",13),ge(28),le()(),ce(29,"mat-list-item")(30,"mat-icon",10),ge(31,"calendar_today"),le(),ce(32,"div",11),ge(33,"Last Sign In"),le(),ce(34,"div",13),ge(35),rl(36,"date"),le()()(),Cn(37,"mat-divider"),ce(38,"div",14)(39,"button",15),wn("click",function(){ci(t);let r=Yn();return li(r.authService.logout())}),ce(40,"mat-icon"),ge(41,"logout"),le(),ge(42," Sign Out "),le()()()()()}if(n&2){let t=e.ngIf;Lt(4),qy("background-image","url("+(t.photoURL||"")+")"),Lt(3),fs(t.displayName),Lt(2),fs(t.email),Lt(12),fs(t.uid),Lt(7),fs(t.emailVerified?"Yes":"No"),Lt(7),fs(ZN(36,7,t.metadata.lastSignInTime,"medium"))}}var bM=class n{authService=H(Vs);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-card"],[1,"profile-cover"],[1,"profile-header"],[1,"profile-avatar"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["mat-subheader",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"uid-text"],["matListItemLine",""],[1,"profile-actions"],["mat-stroked-button","","color","warn",3,"click"]],template:function(t,i){t&1&&(Or(0,cPe,43,10,"div",0),rl(1,"async")),t&2&&In("ngIf",Vu(1,1,i.user$))},dependencies:[Ns,ca,Lo,vd,Fg,Oo,yd,Fs,mc,Gne,zne,Hne,Pz,jne,hz,Rz,Dz,oM,Oh,fk],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 20px;min-height:calc(100vh - 144px);background-color:#f5f5f5}.profile-card[_ngcontent-%COMP%]{width:100%;max-width:500px;overflow:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014}.profile-cover[_ngcontent-%COMP%]{height:120px;background:linear-gradient(135deg,#3f51b5,#5c6bc0)}.profile-header[_ngcontent-%COMP%]{position:relative;padding:0 24px 24px;text-align:center;margin-top:-60px}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background-size:cover;background-position:center;background-color:#e0e0e0;border:4px solid white;box-shadow:0 2px 10px #0000001a;margin:0 auto 16px}.profile-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.5rem;font-weight:500;color:#333}.profile-email[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem}.uid-text[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;color:#666}.profile-actions[_ngcontent-%COMP%]{padding:24px 16px 8px;display:flex;justify-content:center}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:8px}  .mat-mdc-list-item-icon{color:#757575}"]})};var Nz=pt(n=>!!n),lPe=(()=>{class n{router;auth;constructor(t,i){this.router=t,this.auth=i}canActivate=(t,i)=>{let r=t.data.authGuardPipe||(()=>Nz);return rI(this.auth).pipe(zi(1),r(t,i),pt(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(i){return new(i||n)(st(io),st(xl))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),B0=n=>({canActivate:[lPe],data:{authGuardPipe:n}});var Wne=n=>ch(Nz,pt(e=>e||n)),$ne=n=>ch(Nz,pt(e=>e&&n||!0));var vie=0,w4=1,bie=2;var E4=1,xie=2,Tc=3,ru=0,_s=1,Ic=2,Cc=0,Xf=1,S4=2,T4=3,I4=4,wie=5,Gd=100,Eie=101,Sie=102,Tie=103,Iie=104,Cie=200,Aie=201,Mie=202,Die=203,WM=204,$M=205,Rie=206,Pie=207,Nie=208,kie=209,Oie=210,Lie=211,Fie=212,Vie=213,Uie=214,bD=0,xD=1,wD=2,Yf=3,ED=4,SD=5,TD=6,ID=7,CD=0,Bie=1,zie=2,cu=0,Hie=1,jie=2,Gie=3,Wie=4,$ie=5,qie=6,Kie=7;var c4=300,np=301,ip=302,AD=303,MD=304,Ix=306,qM=1e3,Ec=1001,KM=1002,Xs=1003,Xie=1004;var Cx=1005;var po=1006,DD=1007;var Xd=1008;var Ra=1009,C4=1010,A4=1011,k_=1012,RD=1013,Yd=1014,Ac=1015,rp=1016,PD=1017,ND=1018,O_=1020,M4=35902,D4=35899,R4=1021,P4=1022,Ho=1023,E_=1026,L_=1027,N4=1028,kD=1029,OD=1030,LD=1031;var FD=1033,Ax=33776,Mx=33777,Dx=33778,Rx=33779,VD=35840,UD=35841,BD=35842,zD=35843,HD=36196,jD=37492,GD=37496,WD=37808,$D=37809,qD=37810,KD=37811,XD=37812,YD=37813,QD=37814,JD=37815,ZD=37816,eR=37817,tR=37818,nR=37819,iR=37820,rR=37821,sR=36492,oR=36494,aR=36495,cR=36283,lR=36284,uR=36285,dR=36286;var Y0=2300,XM=2301,GM=2302,l4=2400,u4=2401,d4=2402;var Yie=3200,Qie=3201;var k4=0,Jie=1,lu="",ho="srgb",Qf="srgb-linear",Q0="linear",Jn="srgb";var $f=7680;var h4=519,Zie=512,ere=513,tre=514,O4=515,nre=516,ire=517,rre=518,sre=519,f4=35044;var L4="300 es",Da=2e3,J0=2001;function F4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Z0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ore(){let n=Z0("canvas");return n.style.display="block",n}var qne={},S_=null;function V4(...n){let e="THREE."+n.shift();S_?S_("log",e,...n):console.log(e,...n)}function Ht(...n){let e="THREE."+n.shift();S_?S_("warn",e,...n):console.warn(e,...n)}function un(...n){let e="THREE."+n.shift();S_?S_("error",e,...n):console.error(e,...n)}function T_(...n){let e=n.join(" ");e in qne||(qne[e]=!0,Ht(...n))}function are(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}var su=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var kz=Math.PI/180,YM=180/Math.PI;function F_(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ns[n&255]+ns[n>>8&255]+ns[n>>16&255]+ns[n>>24&255]+"-"+ns[e&255]+ns[e>>8&255]+"-"+ns[e>>16&15|64]+ns[e>>24&255]+"-"+ns[t&63|128]+ns[t>>8&255]+"-"+ns[t>>16&255]+ns[t>>24&255]+ns[i&255]+ns[i>>8&255]+ns[i>>16&255]+ns[i>>24&255]).toLowerCase()}function mn(n,e,t){return Math.max(e,Math.min(t,n))}function uPe(n,e){return(n%e+e)%e}function Oz(n,e,t){return(1-t)*n+t*e}function z0(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Xe=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ou=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],h=s[o+0],f=s[o+1],g=s[o+2],v=s[o+3];if(a<=0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a>=1){e[t+0]=h,e[t+1]=f,e[t+2]=g,e[t+3]=v;return}if(d!==v||c!==h||l!==f||u!==g){let _=c*h+l*f+u*g+d*v;_<0&&(h=-h,f=-f,g=-g,v=-v,_=-_);let b=1-a;if(_<.9995){let R=Math.acos(_),P=Math.sin(R);b=Math.sin(b*R)/P,a=Math.sin(a*R)/P,c=c*b+h*a,l=l*b+f*a,u=u*b+g*a,d=d*b+v*a}else{c=c*b+h*a,l=l*b+f*a,u=u*b+g*a,d=d*b+v*a;let R=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=R,l*=R,u*=R,d*=R}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){let a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*d+c*f-l*h,e[t+1]=c*g+u*h+l*d-a*f,e[t+2]=l*g+u*f+a*h-c*d,e[t+3]=u*g-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),f=c(r/2),g=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*g,this._y=l*f*d-h*u*g,this._z=l*u*g+h*f*d,this._w=l*u*d-h*f*g;break;case"YXZ":this._x=h*u*d+l*f*g,this._y=l*f*d-h*u*g,this._z=l*u*g-h*f*d,this._w=l*u*d+h*f*g;break;case"ZXY":this._x=h*u*d-l*f*g,this._y=l*f*d+h*u*g,this._z=l*u*g+h*f*d,this._w=l*u*d-h*f*g;break;case"ZYX":this._x=h*u*d-l*f*g,this._y=l*f*d+h*u*g,this._z=l*u*g-h*f*d,this._w=l*u*d+h*f*g;break;case"YZX":this._x=h*u*d+l*f*g,this._y=l*f*d+h*u*g,this._z=l*u*g-h*f*d,this._w=l*u*d-h*f*g;break;case"XZY":this._x=h*u*d-l*f*g,this._y=l*f*d-h*u*g,this._z=l*u*g+h*f*d,this._w=l*u*d+h*f*g;break;default:Ht("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-r)*f}else if(i>a&&i>d){let f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+l)/f}else if(a>d){let f=2*Math.sqrt(1+a-i-d);this._w=(s-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(c+u)/f}else{let f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,s=e._z,o=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,s=-s,o=-o,a=-a);let c=1-t;if(a<.9995){let l=Math.acos(a),u=Math.sin(l);c=Math.sin(c*l)/u,t=Math.sin(t*l)/u,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Q=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Kne.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Kne.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Lz.copy(this).projectOnVector(e),this.sub(Lz)}reflect(e){return this.sub(Lz.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Lz=new Q,Kne=new ou,rn=class n{constructor(e,t,i,r,s,o,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],g=i[8],v=r[0],_=r[3],b=r[6],R=r[1],P=r[4],N=r[7],U=r[2],O=r[5],S=r[8];return s[0]=o*v+a*R+c*U,s[3]=o*_+a*P+c*O,s[6]=o*b+a*N+c*S,s[1]=l*v+u*R+d*U,s[4]=l*_+u*P+d*O,s[7]=l*b+u*N+d*S,s[2]=h*v+f*R+g*U,s[5]=h*_+f*P+g*O,s[8]=h*b+f*N+g*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,g=t*d+i*h+r*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/g;return e[0]=d*v,e[1]=(r*l-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=h*v,e[4]=(u*t-r*c)*v,e[5]=(r*s-a*t)*v,e[6]=f*v,e[7]=(i*c-l*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){let c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Fz.makeScale(e,t)),this}rotate(e){return this.premultiply(Fz.makeRotation(-e)),this}translate(e,t){return this.premultiply(Fz.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Fz=new rn,Xne=new rn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Yne=new rn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function dPe(){let n={enabled:!0,workingColorSpace:Qf,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Jn&&(r.r=iu(r.r),r.g=iu(r.g),r.b=iu(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Jn&&(r.r=w_(r.r),r.g=w_(r.g),r.b=w_(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===lu?Q0:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return T_("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return T_("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Qf]:{primaries:e,whitePoint:i,transfer:Q0,toXYZ:Xne,fromXYZ:Yne,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ho},outputColorSpaceConfig:{drawingBufferColorSpace:ho}},[ho]:{primaries:e,whitePoint:i,transfer:Jn,toXYZ:Xne,fromXYZ:Yne,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ho}}}),n}var Ln=dPe();function iu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function w_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var u_,QM=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{u_===void 0&&(u_=Z0("canvas")),u_.width=e.width,u_.height=e.height;let r=u_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=u_}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Z0("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=iu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(iu(t[i]/255)*255):t[i]=iu(t[i]);return{data:t,width:e.width,height:e.height}}else return Ht("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},hPe=0,I_=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hPe++}),this.uuid=F_(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Vz(r[o].image)):s.push(Vz(r[o]))}else s=Vz(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function Vz(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?QM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Ht("Texture: Unable to serialize Texture."),{})}var fPe=0,Uz=new Q,uu=(()=>{class n extends su{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ec,s=Ec,o=po,a=Xd,c=Ho,l=Ra,u=n.DEFAULT_ANISOTROPY,d=lu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fPe++}),this.uuid=F_(),this.name="",this.source=new I_(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Uz).x}get height(){return this.source.getSize(Uz).y}get depth(){return this.source.getSize(Uz).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){Ht(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let s=this[i];if(s===void 0){Ht(`Texture.setValues(): property '${i}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==c4)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case qM:t.x=t.x-Math.floor(t.x);break;case Ec:t.x=t.x<0?0:1;break;case KM:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case qM:t.y=t.y-Math.floor(t.y);break;case Ec:t.y=t.y<0?0:1;break;case KM:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=c4,n.DEFAULT_ANISOTROPY=1,n})(),Qn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],g=c[9],v=c[2],_=c[6],b=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-v)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+v)<.1&&Math.abs(g+_)<.1&&Math.abs(l+f+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let P=(l+1)/2,N=(f+1)/2,U=(b+1)/2,O=(u+h)/4,S=(d+v)/4,w=(g+_)/4;return P>N&&P>U?P<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(P),r=O/i,s=S/i):N>U?N<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(N),i=O/r,s=w/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=S/s,r=w/s),this.set(i,r,s,t),this}let R=Math.sqrt((_-g)*(_-g)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(R)<.001&&(R=1),this.x=(_-g)/R,this.y=(d-v)/R,this.z=(h-u)/R,this.w=Math.acos((l+f+b-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this.w=mn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this.w=mn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},JM=class extends su{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:po,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Qn(0,0,e,t),this.scissorTest=!1,this.viewport=new Qn(0,0,e,t);let r={width:e,height:t,depth:i.depth},s=new uu(r);this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:po,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new I_(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Sc=class extends JM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},ex=class extends uu{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=Ec,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var ZM=class extends uu{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=Ec,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Wd=class{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ca.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ca.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Ca.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ca):Ca.fromBufferAttribute(s,o),Ca.applyMatrix4(e.matrixWorld),this.expandByPoint(Ca);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xM.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),xM.copy(i.boundingBox)),xM.applyMatrix4(e.matrixWorld),this.union(xM)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ca),Ca.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(H0),wM.subVectors(this.max,H0),d_.subVectors(e.a,H0),h_.subVectors(e.b,H0),f_.subVectors(e.c,H0),Fd.subVectors(h_,d_),Vd.subVectors(f_,h_),Hf.subVectors(d_,f_);let t=[0,-Fd.z,Fd.y,0,-Vd.z,Vd.y,0,-Hf.z,Hf.y,Fd.z,0,-Fd.x,Vd.z,0,-Vd.x,Hf.z,0,-Hf.x,-Fd.y,Fd.x,0,-Vd.y,Vd.x,0,-Hf.y,Hf.x,0];return!Bz(t,d_,h_,f_,wM)||(t=[1,0,0,0,1,0,0,0,1],!Bz(t,d_,h_,f_,wM))?!1:(EM.crossVectors(Fd,Vd),t=[EM.x,EM.y,EM.z],Bz(t,d_,h_,f_,wM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ca).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ca).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Jl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Jl=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],Ca=new Q,xM=new Wd,d_=new Q,h_=new Q,f_=new Q,Fd=new Q,Vd=new Q,Hf=new Q,H0=new Q,wM=new Q,EM=new Q,jf=new Q;function Bz(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){jf.fromArray(n,s);let a=r.x*Math.abs(jf.x)+r.y*Math.abs(jf.y)+r.z*Math.abs(jf.z),c=e.dot(jf),l=t.dot(jf),u=i.dot(jf);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var pPe=new Wd,j0=new Q,zz=new Q,Jf=class{constructor(e=new Q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):pPe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;j0.subVectors(e,this.center);let t=j0.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(j0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zz.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(j0.copy(e.center).add(zz)),this.expandByPoint(j0.copy(e.center).sub(zz))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},Zl=new Q,Hz=new Q,SM=new Q,Ud=new Q,jz=new Q,TM=new Q,Gz=new Q,tx=class{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Zl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Zl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Zl.copy(this.origin).addScaledVector(this.direction,t),Zl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Hz.copy(e).add(t).multiplyScalar(.5),SM.copy(t).sub(e).normalize(),Ud.copy(this.origin).sub(Hz);let s=e.distanceTo(t)*.5,o=-this.direction.dot(SM),a=Ud.dot(this.direction),c=-Ud.dot(SM),l=Ud.lengthSq(),u=Math.abs(1-o*o),d,h,f,g;if(u>0)if(d=o*c-a,h=o*a-c,g=s*u,d>=0)if(h>=-g)if(h<=g){let v=1/u;d*=v,h*=v,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-g?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=g?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Hz).addScaledVector(SM,h),f}intersectSphere(e,t){Zl.subVectors(e.center,this.origin);let i=Zl.dot(this.direction),r=Zl.dot(Zl)-i*i,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Zl)!==null}intersectTriangle(e,t,i,r,s){jz.subVectors(t,e),TM.subVectors(i,e),Gz.crossVectors(jz,TM);let o=this.direction.dot(Gz),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ud.subVectors(this.origin,e);let c=a*this.direction.dot(TM.crossVectors(Ud,TM));if(c<0)return null;let l=a*this.direction.dot(jz.cross(Ud));if(l<0||c+l>o)return null;let u=-a*Ud.dot(Gz);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Si=class n{constructor(e,t,i,r,s,o,a,c,l,u,d,h,f,g,v,_){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,f,g,v,_)}set(e,t,i,r,s,o,a,c,l,u,d,h,f,g,v,_){let b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=c,b[2]=l,b[6]=u,b[10]=d,b[14]=h,b[3]=f,b[7]=g,b[11]=v,b[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/p_.setFromMatrixColumn(e,0).length(),s=1/p_.setFromMatrixColumn(e,1).length(),o=1/p_.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let h=o*u,f=o*d,g=a*u,v=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+g*l,t[5]=h-v*l,t[9]=-a*c,t[2]=v-h*l,t[6]=g+f*l,t[10]=o*c}else if(e.order==="YXZ"){let h=c*u,f=c*d,g=l*u,v=l*d;t[0]=h+v*a,t[4]=g*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=v+h*a,t[10]=o*c}else if(e.order==="ZXY"){let h=c*u,f=c*d,g=l*u,v=l*d;t[0]=h-v*a,t[4]=-o*d,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=v-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){let h=o*u,f=o*d,g=a*u,v=a*d;t[0]=c*u,t[4]=g*l-f,t[8]=h*l+v,t[1]=c*d,t[5]=v*l+h,t[9]=f*l-g,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){let h=o*c,f=o*l,g=a*c,v=a*l;t[0]=c*u,t[4]=v-h*d,t[8]=g*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+g,t[10]=h-v*d}else if(e.order==="XZY"){let h=o*c,f=o*l,g=a*c,v=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+v,t[5]=o*u,t[9]=f*d-g,t[2]=g*d-f,t[6]=a*u,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mPe,e,gPe)}lookAt(e,t,i){let r=this.elements;return lo.subVectors(e,t),lo.lengthSq()===0&&(lo.z=1),lo.normalize(),Bd.crossVectors(i,lo),Bd.lengthSq()===0&&(Math.abs(i.z)===1?lo.x+=1e-4:lo.z+=1e-4,lo.normalize(),Bd.crossVectors(i,lo)),Bd.normalize(),IM.crossVectors(lo,Bd),r[0]=Bd.x,r[4]=IM.x,r[8]=lo.x,r[1]=Bd.y,r[5]=IM.y,r[9]=lo.y,r[2]=Bd.z,r[6]=IM.z,r[10]=lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],g=i[2],v=i[6],_=i[10],b=i[14],R=i[3],P=i[7],N=i[11],U=i[15],O=r[0],S=r[4],w=r[8],y=r[12],x=r[1],T=r[5],M=r[9],C=r[13],oe=r[2],Z=r[6],G=r[10],K=r[14],W=r[3],ue=r[7],ye=r[11],Ue=r[15];return s[0]=o*O+a*x+c*oe+l*W,s[4]=o*S+a*T+c*Z+l*ue,s[8]=o*w+a*M+c*G+l*ye,s[12]=o*y+a*C+c*K+l*Ue,s[1]=u*O+d*x+h*oe+f*W,s[5]=u*S+d*T+h*Z+f*ue,s[9]=u*w+d*M+h*G+f*ye,s[13]=u*y+d*C+h*K+f*Ue,s[2]=g*O+v*x+_*oe+b*W,s[6]=g*S+v*T+_*Z+b*ue,s[10]=g*w+v*M+_*G+b*ye,s[14]=g*y+v*C+_*K+b*Ue,s[3]=R*O+P*x+N*oe+U*W,s[7]=R*S+P*T+N*Z+U*ue,s[11]=R*w+P*M+N*G+U*ye,s[15]=R*y+P*C+N*K+U*Ue,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14],g=e[3],v=e[7],_=e[11],b=e[15];return g*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*f-i*c*f)+v*(+t*c*f-t*l*h+s*o*h-r*o*f+r*l*u-s*c*u)+_*(+t*l*d-t*a*f-s*o*d+i*o*f+s*a*u-i*l*u)+b*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],g=e[12],v=e[13],_=e[14],b=e[15],R=d*_*l-v*h*l+v*c*f-a*_*f-d*c*b+a*h*b,P=g*h*l-u*_*l-g*c*f+o*_*f+u*c*b-o*h*b,N=u*v*l-g*d*l+g*a*f-o*v*f-u*a*b+o*d*b,U=g*d*c-u*v*c-g*a*h+o*v*h+u*a*_-o*d*_,O=t*R+i*P+r*N+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/O;return e[0]=R*S,e[1]=(v*h*s-d*_*s-v*r*f+i*_*f+d*r*b-i*h*b)*S,e[2]=(a*_*s-v*c*s+v*r*l-i*_*l-a*r*b+i*c*b)*S,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*f-i*c*f)*S,e[4]=P*S,e[5]=(u*_*s-g*h*s+g*r*f-t*_*f-u*r*b+t*h*b)*S,e[6]=(g*c*s-o*_*s-g*r*l+t*_*l+o*r*b-t*c*b)*S,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*f+t*c*f)*S,e[8]=N*S,e[9]=(g*d*s-u*v*s-g*i*f+t*v*f+u*i*b-t*d*b)*S,e[10]=(o*v*s-g*a*s+g*i*l-t*v*l-o*i*b+t*a*b)*S,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*f-t*a*f)*S,e[12]=U*S,e[13]=(u*v*r-g*d*r+g*i*h-t*v*h-u*i*_+t*d*_)*S,e[14]=(g*a*r-o*v*r-g*i*c+t*v*c+o*i*_-t*a*_)*S,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*S,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,g=s*d,v=o*u,_=o*d,b=a*d,R=c*l,P=c*u,N=c*d,U=i.x,O=i.y,S=i.z;return r[0]=(1-(v+b))*U,r[1]=(f+N)*U,r[2]=(g-P)*U,r[3]=0,r[4]=(f-N)*O,r[5]=(1-(h+b))*O,r[6]=(_+R)*O,r[7]=0,r[8]=(g+P)*S,r[9]=(_-R)*S,r[10]=(1-(h+v))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=p_.set(r[0],r[1],r[2]).length(),o=p_.set(r[4],r[5],r[6]).length(),a=p_.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Aa.copy(this);let l=1/s,u=1/o,d=1/a;return Aa.elements[0]*=l,Aa.elements[1]*=l,Aa.elements[2]*=l,Aa.elements[4]*=u,Aa.elements[5]*=u,Aa.elements[6]*=u,Aa.elements[8]*=d,Aa.elements[9]*=d,Aa.elements[10]*=d,t.setFromRotationMatrix(Aa),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Da,c=!1){let l=this.elements,u=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),f=(i+r)/(i-r),g,v;if(c)g=s/(o-s),v=o*s/(o-s);else if(a===Da)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===J0)g=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Da,c=!1){let l=this.elements,u=2/(t-e),d=2/(i-r),h=-(t+e)/(t-e),f=-(i+r)/(i-r),g,v;if(c)g=1/(o-s),v=o/(o-s);else if(a===Da)g=-2/(o-s),v=-(o+s)/(o-s);else if(a===J0)g=-1/(o-s),v=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=d,l[9]=0,l[13]=f,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},p_=new Q,Aa=new Si,mPe=new Q(0,0,0),gPe=new Q(1,1,1),Bd=new Q,IM=new Q,lo=new Q,Qne=new Si,Jne=new ou,$d=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(mn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-mn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,g),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,g));break;case"XZY":this._z=Math.asin(-mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:Ht("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return Qne.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Qne,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Jne.setFromEuler(this),this.setFromQuaternion(Jne,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),nx=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},_Pe=0,Zne=new Q,m_=new ou,eu=new Si,CM=new Q,G0=new Q,yPe=new Q,vPe=new ou,eie=new Q(1,0,0),tie=new Q(0,1,0),nie=new Q(0,0,1),iie={type:"added"},bPe={type:"removed"},g_={type:"childadded",child:null},Wz={type:"childremoved",child:null},du=(()=>{class n extends su{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_Pe++}),this.uuid=F_(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new Q,i=new $d,r=new ou,s=new Q(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Si},normalMatrix:{value:new rn}}),this.matrix=new Si,this.matrixWorld=new Si,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new nx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return m_.setFromAxisAngle(t,i),this.quaternion.multiply(m_),this}rotateOnWorldAxis(t,i){return m_.setFromAxisAngle(t,i),this.quaternion.premultiply(m_),this}rotateX(t){return this.rotateOnAxis(eie,t)}rotateY(t){return this.rotateOnAxis(tie,t)}rotateZ(t){return this.rotateOnAxis(nie,t)}translateOnAxis(t,i){return Zne.copy(t).applyQuaternion(this.quaternion),this.position.add(Zne.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(eie,t)}translateY(t){return this.translateOnAxis(tie,t)}translateZ(t){return this.translateOnAxis(nie,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(eu.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?CM.copy(t):CM.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),G0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eu.lookAt(G0,CM,this.up):eu.lookAt(CM,G0,this.up),this.quaternion.setFromRotationMatrix(eu),s&&(eu.extractRotation(s.matrixWorld),m_.setFromRotationMatrix(eu),this.quaternion.premultiply(m_.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(un("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(iie),g_.child=t,this.dispatchEvent(g_),g_.child=null):un("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(bPe),Wz.child=t,this.dispatchEvent(Wz),Wz.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),eu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),eu.multiply(t.parent.matrixWorld)),t.applyMatrix4(eu),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(iie),g_.child=t,this.dispatchEvent(g_),g_.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(G0,t,yPe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(G0,vPe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(c=>ct(re({},c),{boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(c=>re({},c)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function o(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];s.animations.push(o(t.animations,l))}}if(i){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),g=a(t.animations),v=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=s,r;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new Q(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ma=new Q,tu=new Q,$z=new Q,nu=new Q,__=new Q,y_=new Q,rie=new Q,qz=new Q,Kz=new Q,Xz=new Q,Yz=new Qn,Qz=new Qn,Jz=new Qn,jd=class n{constructor(e=new Q,t=new Q,i=new Q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ma.subVectors(e,t),r.cross(Ma);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ma.subVectors(r,t),tu.subVectors(i,t),$z.subVectors(e,t);let o=Ma.dot(Ma),a=Ma.dot(tu),c=Ma.dot($z),l=tu.dot(tu),u=tu.dot($z),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;let h=1/d,f=(l*c-a*u)*h,g=(o*u-a*c)*h;return s.set(1-f-g,g,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,nu)===null?!1:nu.x>=0&&nu.y>=0&&nu.x+nu.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,nu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,nu.x),c.addScaledVector(o,nu.y),c.addScaledVector(a,nu.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return Yz.setScalar(0),Qz.setScalar(0),Jz.setScalar(0),Yz.fromBufferAttribute(e,t),Qz.fromBufferAttribute(e,i),Jz.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Yz,s.x),o.addScaledVector(Qz,s.y),o.addScaledVector(Jz,s.z),o}static isFrontFacing(e,t,i,r){return Ma.subVectors(i,t),tu.subVectors(e,t),Ma.cross(tu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ma.subVectors(this.c,this.b),tu.subVectors(this.a,this.b),Ma.cross(tu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,o,a;__.subVectors(r,i),y_.subVectors(s,i),qz.subVectors(e,i);let c=__.dot(qz),l=y_.dot(qz);if(c<=0&&l<=0)return t.copy(i);Kz.subVectors(e,r);let u=__.dot(Kz),d=y_.dot(Kz);if(u>=0&&d<=u)return t.copy(r);let h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(__,o);Xz.subVectors(e,s);let f=__.dot(Xz),g=y_.dot(Xz);if(g>=0&&f<=g)return t.copy(s);let v=f*l-c*g;if(v<=0&&l>=0&&g<=0)return a=l/(l-g),t.copy(i).addScaledVector(y_,a);let _=u*g-f*d;if(_<=0&&d-u>=0&&f-g>=0)return rie.subVectors(s,r),a=(d-u)/(d-u+(f-g)),t.copy(r).addScaledVector(rie,a);let b=1/(_+v+h);return o=v*b,a=h*b,t.copy(i).addScaledVector(__,o).addScaledVector(y_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},cre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zd={h:0,s:0,l:0},AM={h:0,s:0,l:0};function Zz(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var dn=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ho){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ln.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Ln.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ln.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Ln.workingColorSpace){if(e=uPe(e,1),t=mn(t,0,1),i=mn(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Zz(o,s,e+1/3),this.g=Zz(o,s,e),this.b=Zz(o,s,e-1/3)}return Ln.colorSpaceToWorking(this,r),this}setStyle(e,t=ho){function i(s){s!==void 0&&parseFloat(s)<1&&Ht("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:Ht("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);Ht("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ho){let i=cre[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Ht("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=iu(e.r),this.g=iu(e.g),this.b=iu(e.b),this}copyLinearToSRGB(e){return this.r=w_(e.r),this.g=w_(e.g),this.b=w_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ho){return Ln.workingToColorSpace(is.copy(this),e),Math.round(mn(is.r*255,0,255))*65536+Math.round(mn(is.g*255,0,255))*256+Math.round(mn(is.b*255,0,255))}getHexString(e=ho){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ln.workingColorSpace){Ln.workingToColorSpace(is.copy(this),t);let i=is.r,r=is.g,s=is.b,o=Math.max(i,r,s),a=Math.min(i,r,s),c,l,u=(a+o)/2;if(a===o)c=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Ln.workingColorSpace){return Ln.workingToColorSpace(is.copy(this),t),e.r=is.r,e.g=is.g,e.b=is.b,e}getStyle(e=ho){Ln.workingToColorSpace(is.copy(this),e);let t=is.r,i=is.g,r=is.b;return e!==ho?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(zd),this.setHSL(zd.h+e,zd.s+t,zd.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(zd),e.getHSL(AM);let i=Oz(zd.h,AM.h,t),r=Oz(zd.s,AM.s,t),s=Oz(zd.l,AM.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},is=new dn;dn.NAMES=cre;var xPe=0,au=class extends su{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xPe++}),this.uuid=F_(),this.name="",this.type="Material",this.blending=Xf,this.side=ru,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=WM,this.blendDst=$M,this.blendEquation=Gd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new dn(0,0,0),this.blendAlpha=0,this.depthFunc=Yf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$f,this.stencilZFail=$f,this.stencilZPass=$f,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){Ht(`Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){Ht(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Xf&&(i.blending=this.blending),this.side!==ru&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==WM&&(i.blendSrc=this.blendSrc),this.blendDst!==$M&&(i.blendDst=this.blendDst),this.blendEquation!==Gd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==h4&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$f&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$f&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$f&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let c=s[a];delete c.metadata,o.push(c)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},ix=class extends au{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $d,this.combine=CD,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var ur=new Q,MM=new Xe,wPe=0,fo=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:wPe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=f4,this.updateRanges=[],this.gpuType=Ac,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)MM.fromBufferAttribute(this,t),MM.applyMatrix3(e),this.setXY(t,MM.x,MM.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix3(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix4(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyNormalMatrix(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.transformDirection(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=z0(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=qs(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=z0(t,this.array)),t}setX(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=z0(t,this.array)),t}setY(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=z0(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=z0(t,this.array)),t}setW(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array),r=qs(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array),r=qs(r,this.array),s=qs(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==f4&&(e.usage=this.usage),e}};var rx=class extends fo{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var sx=class extends fo{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Ks=class extends fo{constructor(e,t,i){super(new Float32Array(e),t,i)}},EPe=0,Bo=new Si,e4=new du,v_=new Q,uo=new Wd,W0=new Wd,Ar=new Q,mo=class n extends su{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EPe++}),this.uuid=F_(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(F4(e)?sx:rx)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new rn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bo.makeRotationFromQuaternion(e),this.applyMatrix4(Bo),this}rotateX(e){return Bo.makeRotationX(e),this.applyMatrix4(Bo),this}rotateY(e){return Bo.makeRotationY(e),this.applyMatrix4(Bo),this}rotateZ(e){return Bo.makeRotationZ(e),this.applyMatrix4(Bo),this}translate(e,t,i){return Bo.makeTranslation(e,t,i),this.applyMatrix4(Bo),this}scale(e,t,i){return Bo.makeScale(e,t,i),this.applyMatrix4(Bo),this}lookAt(e){return e4.lookAt(e),e4.updateMatrix(),this.applyMatrix4(e4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(v_).negate(),this.translate(v_.x,v_.y,v_.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,s=e.length;r<s;r++){let o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ks(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&Ht("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wd);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){un("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];uo.setFromBufferAttribute(s),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,uo.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,uo.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(uo.min),this.boundingBox.expandByPoint(uo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&un('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jf);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){un("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(e){let i=this.boundingSphere.center;if(uo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];W0.setFromBufferAttribute(a),this.morphTargetsRelative?(Ar.addVectors(uo.min,W0.min),uo.expandByPoint(Ar),Ar.addVectors(uo.max,W0.max),uo.expandByPoint(Ar)):(uo.expandByPoint(W0.min),uo.expandByPoint(W0.max))}uo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ar.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ar));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Ar.fromBufferAttribute(a,l),c&&(v_.fromBufferAttribute(e,l),Ar.add(v_)),r=Math.max(r,i.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&un('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){un("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fo(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],c=[];for(let w=0;w<i.count;w++)a[w]=new Q,c[w]=new Q;let l=new Q,u=new Q,d=new Q,h=new Xe,f=new Xe,g=new Xe,v=new Q,_=new Q;function b(w,y,x){l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,y),d.fromBufferAttribute(i,x),h.fromBufferAttribute(s,w),f.fromBufferAttribute(s,y),g.fromBufferAttribute(s,x),u.sub(l),d.sub(l),f.sub(h),g.sub(h);let T=1/(f.x*g.y-g.x*f.y);isFinite(T)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(d,-f.y).multiplyScalar(T),_.copy(d).multiplyScalar(f.x).addScaledVector(u,-g.x).multiplyScalar(T),a[w].add(v),a[y].add(v),a[x].add(v),c[w].add(_),c[y].add(_),c[x].add(_))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let w=0,y=R.length;w<y;++w){let x=R[w],T=x.start,M=x.count;for(let C=T,oe=T+M;C<oe;C+=3)b(e.getX(C+0),e.getX(C+1),e.getX(C+2))}let P=new Q,N=new Q,U=new Q,O=new Q;function S(w){U.fromBufferAttribute(r,w),O.copy(U);let y=a[w];P.copy(y),P.sub(U.multiplyScalar(U.dot(y))).normalize(),N.crossVectors(O,y);let T=N.dot(c[w])<0?-1:1;o.setXYZW(w,P.x,P.y,P.z,T)}for(let w=0,y=R.length;w<y;++w){let x=R[w],T=x.start,M=x.count;for(let C=T,oe=T+M;C<oe;C+=3)S(e.getX(C+0)),S(e.getX(C+1)),S(e.getX(C+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fo(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new Q,s=new Q,o=new Q,a=new Q,c=new Q,l=new Q,u=new Q,d=new Q;if(e)for(let h=0,f=e.count;h<f;h+=3){let g=e.getX(h+0),v=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,_),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),l.fromBufferAttribute(i,_),a.add(u),c.add(u),l.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(_,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ar.fromBufferAttribute(e,t),Ar.normalize(),e.setXYZ(t,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u),f=0,g=0;for(let v=0,_=c.length;v<_;v++){a.isInterleavedBufferAttribute?f=c[v]*a.data.stride+a.offset:f=c[v]*u;for(let b=0;b<u;b++)h[g++]=l[f++]}return new fo(h,u,d)}if(this.index===null)return Ht("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,i);t.setAttribute(a,l)}let s=this.morphAttributes;for(let a in s){let c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){let h=l[u],f=e(h,i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,c=o.length;a<c;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let c in i){let l=i[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},s=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){let f=l[d];u.push(f.toJSON(e.data))}u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let s=e.morphAttributes;for(let l in s){let u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},sie=new Si,Gf=new tx,DM=new Jf,oie=new Q,RM=new Q,PM=new Q,NM=new Q,t4=new Q,kM=new Q,aie=new Q,OM=new Q,go=class extends du{constructor(e=new mo,t=new ix){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){kM.set(0,0,0);for(let c=0,l=s.length;c<l;c++){let u=a[c],d=s[c];u!==0&&(t4.fromBufferAttribute(d,e),o?kM.addScaledVector(t4,u):kM.addScaledVector(t4.sub(t),u))}t.add(kM)}return t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),DM.copy(i.boundingSphere),DM.applyMatrix4(s),Gf.copy(e.ray).recast(e.near),!(DM.containsPoint(Gf.origin)===!1&&(Gf.intersectSphere(DM,oie)===null||Gf.origin.distanceToSquared(oie)>(e.far-e.near)**2))&&(sie.copy(s).invert(),Gf.copy(e.ray).applyMatrix4(sie),!(i.boundingBox!==null&&Gf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Gf)))}_computeIntersections(e,t,i){let r,s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){let _=h[g],b=o[_.materialIndex],R=Math.max(_.start,f.start),P=Math.min(a.count,Math.min(_.start+_.count,f.start+f.count));for(let N=R,U=P;N<U;N+=3){let O=a.getX(N),S=a.getX(N+1),w=a.getX(N+2);r=LM(this,b,e,i,l,u,d,O,S,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{let g=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let _=g,b=v;_<b;_+=3){let R=a.getX(_),P=a.getX(_+1),N=a.getX(_+2);r=LM(this,o,e,i,l,u,d,R,P,N),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){let _=h[g],b=o[_.materialIndex],R=Math.max(_.start,f.start),P=Math.min(c.count,Math.min(_.start+_.count,f.start+f.count));for(let N=R,U=P;N<U;N+=3){let O=N,S=N+1,w=N+2;r=LM(this,b,e,i,l,u,d,O,S,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{let g=Math.max(0,f.start),v=Math.min(c.count,f.start+f.count);for(let _=g,b=v;_<b;_+=3){let R=_,P=_+1,N=_+2;r=LM(this,o,e,i,l,u,d,R,P,N),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}};function SPe(n,e,t,i,r,s,o,a){let c;if(e.side===_s?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side===ru,a),c===null)return null;OM.copy(a),OM.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(OM);return l<t.near||l>t.far?null:{distance:l,point:OM.clone(),object:n}}function LM(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,RM),n.getVertexPosition(c,PM),n.getVertexPosition(l,NM);let u=SPe(n,e,t,i,RM,PM,NM,aie);if(u){let d=new Q;jd.getBarycoord(aie,RM,PM,NM,d),r&&(u.uv=jd.getInterpolatedAttribute(r,a,c,l,d,new Xe)),s&&(u.uv1=jd.getInterpolatedAttribute(s,a,c,l,d,new Xe)),o&&(u.normal=jd.getInterpolatedAttribute(o,a,c,l,d,new Q),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new Q,materialIndex:0};jd.getNormal(RM,PM,NM,h.normal),u.face=h,u.barycoord=d}return u}var C_=class n extends mo{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let c=[],l=[],u=[],d=[],h=0,f=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ks(l,3)),this.setAttribute("normal",new Ks(u,3)),this.setAttribute("uv",new Ks(d,2));function g(v,_,b,R,P,N,U,O,S,w,y){let x=N/S,T=U/w,M=N/2,C=U/2,oe=O/2,Z=S+1,G=w+1,K=0,W=0,ue=new Q;for(let ye=0;ye<G;ye++){let Ue=ye*T-C;for(let Qe=0;Qe<Z;Qe++){let Ze=Qe*x-M;ue[v]=Ze*R,ue[_]=Ue*P,ue[b]=oe,l.push(ue.x,ue.y,ue.z),ue[v]=0,ue[_]=0,ue[b]=O>0?1:-1,u.push(ue.x,ue.y,ue.z),d.push(Qe/S),d.push(1-ye/w),K+=1}}for(let ye=0;ye<w;ye++)for(let Ue=0;Ue<S;Ue++){let Qe=h+Ue+Z*ye,Ze=h+Ue+Z*(ye+1),tt=h+(Ue+1)+Z*(ye+1),kt=h+(Ue+1)+Z*ye;c.push(Qe,Ze,kt),c.push(Ze,tt,kt),W+=6}a.addGroup(f,W,y),f+=W,h+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function sp(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Ht("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function rs(n){let e={};for(let t=0;t<n.length;t++){let i=sp(n[t]);for(let r in i)e[r]=i[r]}return e}function TPe(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function U4(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ln.workingColorSpace}var lre={clone:sp,merge:rs},IPe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CPe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,zo=class extends au{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=IPe,this.fragmentShader=CPe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sp(e.uniforms),this.uniformsGroups=TPe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},ox=class extends du{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Si,this.projectionMatrix=new Si,this.projectionMatrixInverse=new Si,this.coordinateSystem=Da,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Hd=new Q,cie=new Xe,lie=new Xe,Ur=class extends ox{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=YM*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(kz*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return YM*2*Math.atan(Math.tan(kz*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Hd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Hd.x,Hd.y).multiplyScalar(-e/Hd.z),Hd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Hd.x,Hd.y).multiplyScalar(-e/Hd.z)}getViewSize(e,t){return this.getViewBounds(e,cie,lie),t.subVectors(lie,cie)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(kz*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},b_=-90,x_=1,eD=class extends du{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ur(b_,x_,e,t);r.layers=this.layers,this.add(r);let s=new Ur(b_,x_,e,t);s.layers=this.layers,this.add(s);let o=new Ur(b_,x_,e,t);o.layers=this.layers,this.add(o);let a=new Ur(b_,x_,e,t);a.layers=this.layers,this.add(a);let c=new Ur(b_,x_,e,t);c.layers=this.layers,this.add(c);let l=new Ur(b_,x_,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(let l of t)this.remove(l);if(e===Da)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===J0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;let v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}},ax=class extends uu{constructor(e=[],t=np,i,r,s,o,a,c,l,u){super(e,t,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},tD=class extends Sc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new ax(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new C_(5,5,5),s=new zo({name:"CubemapFromEquirect",uniforms:sp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:_s,blending:Cc});s.uniforms.tEquirect.value=t;let o=new go(r,s),a=t.minFilter;return t.minFilter===Xd&&(t.minFilter=po),new eD(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}},qf=class extends du{constructor(){super(),this.isGroup=!0,this.type="Group"}},APe={type:"move"},A_=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let v of e.hand.values()){let _=t.getJointPose(v,i),b=this._getHandJoint(l,v);_!==null&&(b.matrix.fromArray(_.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=_.radius),b.visible=_!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,g=.005;l.inputState.pinching&&h>f+g?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-g&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(APe)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new qf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var cx=class extends du{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $d,this.environmentIntensity=1,this.environmentRotation=new $d,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var nD=class extends uu{constructor(e=null,t=1,i=1,r,s,o,a,c,l=Xs,u=Xs,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var n4=new Q,MPe=new Q,DPe=new rn,wc=class{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=n4.subVectors(i,t).cross(MPe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(n4),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||DPe.getNormalMatrix(e),r=this.coplanarPoint(n4).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Wf=new Jf,RPe=new Xe(.5,.5),FM=new Q,M_=class{constructor(e=new wc,t=new wc,i=new wc,r=new wc,s=new wc,o=new wc){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Da,i=!1){let r=this.planes,s=e.elements,o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],d=s[5],h=s[6],f=s[7],g=s[8],v=s[9],_=s[10],b=s[11],R=s[12],P=s[13],N=s[14],U=s[15];if(r[0].setComponents(l-o,f-u,b-g,U-R).normalize(),r[1].setComponents(l+o,f+u,b+g,U+R).normalize(),r[2].setComponents(l+a,f+d,b+v,U+P).normalize(),r[3].setComponents(l-a,f-d,b-v,U-P).normalize(),i)r[4].setComponents(c,h,_,N).normalize(),r[5].setComponents(l-c,f-h,b-_,U-N).normalize();else if(r[4].setComponents(l-c,f-h,b-_,U-N).normalize(),t===Da)r[5].setComponents(l+c,f+h,b+_,U+N).normalize();else if(t===J0)r[5].setComponents(c,h,_,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Wf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Wf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wf)}intersectsSprite(e){Wf.center.set(0,0,0);let t=RPe.distanceTo(e.center);return Wf.radius=.7071067811865476+t,Wf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wf)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(FM.x=r.normal.x>0?e.max.x:e.min.x,FM.y=r.normal.y>0?e.max.y:e.min.y,FM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(FM)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var D_=class extends au{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},uie=new Si,p4=new tx,VM=new Jf,UM=new Q,lx=class extends du{constructor(e=new mo,t=new D_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),VM.copy(i.boundingSphere),VM.applyMatrix4(r),VM.radius+=s,e.ray.intersectsSphere(VM)===!1)return;uie.copy(r).invert(),p4.copy(e.ray).applyMatrix4(uie);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(l!==null){let h=Math.max(0,o.start),f=Math.min(l.count,o.start+o.count);for(let g=h,v=f;g<v;g++){let _=l.getX(g);UM.fromBufferAttribute(d,_),die(UM,_,c,r,e,t,this)}}else{let h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let g=h,v=f;g<v;g++)UM.fromBufferAttribute(d,g),die(UM,g,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function die(n,e,t,i,r,s,o){let a=p4.distanceSqToPoint(n);if(a<t){let c=new Q;p4.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}var ux=class extends uu{constructor(e,t,i=Yd,r,s,o,a=Xs,c=Xs,l,u=E_,d=1){if(u!==E_&&u!==L_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:t,depth:d};super(h,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new I_(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},dx=class extends uu{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}};var _o=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Ht("Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,s=i.length,o;t?o=t:o=e*i[s-1];let a=0,c=s-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);let u=i[r],h=i[r+1]-u,f=(o-u)/h;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);let o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Xe:new Q);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new Q,r=[],s=[],o=[],a=new Q,c=new Si;for(let f=0;f<=e;f++){let g=f/e;r[f]=this.getTangentAt(g,new Q)}s[0]=new Q,o[0]=new Q;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let g=Math.acos(mn(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(c.makeRotationAxis(a,g))}o[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(mn(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let g=1;g<=e;g++)s[g].applyMatrix4(c.makeRotationAxis(r[g],f*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},R_=class extends _o{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Xe){let i=t,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);let a=this.aStartAngle+e*s,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=c-this.aX,f=l-this.aY;c=h*u-f*d+this.aX,l=h*d+f*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},iD=class extends R_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}};function B4(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,d){let h=(o-s)/l-(a-s)/(l+u)+(a-o)/u,f=(a-o)/u-(c-o)/(u+d)+(c-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){let o=s*s,a=o*s;return n+e*s+t*o+i*a}}}var BM=new Q,i4=new B4,r4=new B4,s4=new B4,rD=class extends _o{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Q){let i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=r[(a-1)%s]:(BM.subVectors(r[0],r[1]).add(r[0]),l=BM);let d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(BM.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=BM),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,g=Math.pow(l.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),_=Math.pow(h.distanceToSquared(u),f);v<1e-4&&(v=1),g<1e-4&&(g=v),_<1e-4&&(_=v),i4.initNonuniformCatmullRom(l.x,d.x,h.x,u.x,g,v,_),r4.initNonuniformCatmullRom(l.y,d.y,h.y,u.y,g,v,_),s4.initNonuniformCatmullRom(l.z,d.z,h.z,u.z,g,v,_)}else this.curveType==="catmullrom"&&(i4.initCatmullRom(l.x,d.x,h.x,u.x,this.tension),r4.initCatmullRom(l.y,d.y,h.y,u.y,this.tension),s4.initCatmullRom(l.z,d.z,h.z,u.z,this.tension));return i.set(i4.calc(c),r4.calc(c),s4.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new Q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function hie(n,e,t,i,r){let s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function PPe(n,e){let t=1-n;return t*t*e}function NPe(n,e){return 2*(1-n)*n*e}function kPe(n,e){return n*n*e}function K0(n,e,t,i){return PPe(n,e)+NPe(n,t)+kPe(n,i)}function OPe(n,e){let t=1-n;return t*t*t*e}function LPe(n,e){let t=1-n;return 3*t*t*n*e}function FPe(n,e){return 3*(1-n)*n*n*e}function VPe(n,e){return n*n*n*e}function X0(n,e,t,i,r){return OPe(n,e)+LPe(n,t)+FPe(n,i)+VPe(n,r)}var hx=class extends _o{constructor(e=new Xe,t=new Xe,i=new Xe,r=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Xe){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(X0(e,r.x,s.x,o.x,a.x),X0(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},sD=class extends _o{constructor(e=new Q,t=new Q,i=new Q,r=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Q){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(X0(e,r.x,s.x,o.x,a.x),X0(e,r.y,s.y,o.y,a.y),X0(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},fx=class extends _o{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},oD=class extends _o{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},px=class extends _o{constructor(e=new Xe,t=new Xe,i=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Xe){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(K0(e,r.x,s.x,o.x),K0(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},aD=class extends _o{constructor(e=new Q,t=new Q,i=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Q){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(K0(e,r.x,s.x,o.x),K0(e,r.y,s.y,o.y),K0(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},mx=class extends _o{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){let i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(hie(a,c.x,l.x,u.x,d.x),hie(a,c.y,l.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new Xe().fromArray(r))}return this}},m4=Object.freeze({__proto__:null,ArcCurve:iD,CatmullRomCurve3:rD,CubicBezierCurve:hx,CubicBezierCurve3:sD,EllipseCurve:R_,LineCurve:fx,LineCurve3:oD,QuadraticBezierCurve:px,QuadraticBezierCurve3:aD,SplineCurve:mx}),cD=class extends _o{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new m4[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=i){let o=r[s]-i,a=this.curves[s],c=a.getLength(),l=c===0?0:1-o/c;return a.getPointAt(l,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,s=this.curves;r<s.length;r++){let o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){let u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new m4[r.type]().fromJSON(r))}return this}},gx=class extends cD{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new fx(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let s=new px(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){let a=new hx(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r),new Xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new mx(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){let l=new R_(e,t,i,r,s,o,a,c);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Zf=class extends gx{constructor(e){super(e),this.uuid=F_(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new gx().fromJSON(r))}return this}};function UPe(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,s=ure(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;let a,c,l;if(i&&(s=GPe(n,e,s,t)),n.length>80*t){a=n[0],c=n[1];let u=a,d=c;for(let h=t;h<r;h+=t){let f=n[h],g=n[h+1];f<a&&(a=f),g<c&&(c=g),f>u&&(u=f),g>d&&(d=g)}l=Math.max(u-a,d-c),l=l!==0?32767/l:0}return _x(s,o,t,a,c,l,0),o}function ure(n,e,t,i,r){let s;if(r===tNe(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=fie(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=fie(o/i|0,n[o],n[o+1],s);return s&&P_(s,s.next)&&(vx(s),s=s.next),s}function ep(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(P_(t,t.next)||Ri(t.prev,t,t.next)===0)){if(vx(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function _x(n,e,t,i,r,s,o){if(!n)return;!o&&s&&XPe(n,i,r,s);let a=n;for(;n.prev!==n.next;){let c=n.prev,l=n.next;if(s?zPe(n,i,r,s):BPe(n)){e.push(c.i,n.i,l.i),vx(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=HPe(ep(n),e),_x(n,e,t,i,r,s,2)):o===2&&jPe(n,e,t,i,r,s):_x(ep(n),e,t,i,r,s,1);break}}}function BPe(n){let e=n.prev,t=n,i=n.next;if(Ri(e,t,i)>=0)return!1;let r=e.x,s=t.x,o=i.x,a=e.y,c=t.y,l=i.y,u=Math.min(r,s,o),d=Math.min(a,c,l),h=Math.max(r,s,o),f=Math.max(a,c,l),g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&q0(r,a,s,c,o,l,g.x,g.y)&&Ri(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function zPe(n,e,t,i){let r=n.prev,s=n,o=n.next;if(Ri(r,s,o)>=0)return!1;let a=r.x,c=s.x,l=o.x,u=r.y,d=s.y,h=o.y,f=Math.min(a,c,l),g=Math.min(u,d,h),v=Math.max(a,c,l),_=Math.max(u,d,h),b=g4(f,g,e,t,i),R=g4(v,_,e,t,i),P=n.prevZ,N=n.nextZ;for(;P&&P.z>=b&&N&&N.z<=R;){if(P.x>=f&&P.x<=v&&P.y>=g&&P.y<=_&&P!==r&&P!==o&&q0(a,u,c,d,l,h,P.x,P.y)&&Ri(P.prev,P,P.next)>=0||(P=P.prevZ,N.x>=f&&N.x<=v&&N.y>=g&&N.y<=_&&N!==r&&N!==o&&q0(a,u,c,d,l,h,N.x,N.y)&&Ri(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;P&&P.z>=b;){if(P.x>=f&&P.x<=v&&P.y>=g&&P.y<=_&&P!==r&&P!==o&&q0(a,u,c,d,l,h,P.x,P.y)&&Ri(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;N&&N.z<=R;){if(N.x>=f&&N.x<=v&&N.y>=g&&N.y<=_&&N!==r&&N!==o&&q0(a,u,c,d,l,h,N.x,N.y)&&Ri(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function HPe(n,e){let t=n;do{let i=t.prev,r=t.next.next;!P_(i,r)&&hre(i,t,t.next,r)&&yx(i,r)&&yx(r,i)&&(e.push(i.i,t.i,r.i),vx(t),vx(t.next),t=n=r),t=t.next}while(t!==n);return ep(t)}function jPe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&JPe(o,a)){let c=fre(o,a);o=ep(o,o.next),c=ep(c,c.next),_x(o,e,t,i,r,s,0),_x(c,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function GPe(n,e,t,i){let r=[];for(let s=0,o=e.length;s<o;s++){let a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=ure(n,a,c,i,!1);l===l.next&&(l.steiner=!0),r.push(QPe(l))}r.sort(WPe);for(let s=0;s<r.length;s++)t=$Pe(r[s],t);return t}function WPe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function $Pe(n,e){let t=qPe(n,e);if(!t)return e;let i=fre(t,n);return ep(i,i.next),ep(t,t.next)}function qPe(n,e){let t=e,i=n.x,r=n.y,s=-1/0,o;if(P_(n,t))return t;do{if(P_(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;let a=o,c=o.x,l=o.y,u=1/0;t=o;do{if(i>=t.x&&t.x>=c&&i!==t.x&&dre(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)){let d=Math.abs(r-t.y)/(i-t.x);yx(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&KPe(o,t)))&&(o=t,u=d)}t=t.next}while(t!==a);return o}function KPe(n,e){return Ri(n.prev,n,e.prev)<0&&Ri(e.next,n,n.next)<0}function XPe(n,e,t,i){let r=n;do r.z===0&&(r.z=g4(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,YPe(r)}function YPe(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let l=0;l<t&&(a++,o=o.nextZ,!!o);l++);let c=t;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function g4(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function QPe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function dre(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function q0(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&dre(n,e,t,i,r,s,o,a)}function JPe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!ZPe(n,e)&&(yx(n,e)&&yx(e,n)&&eNe(n,e)&&(Ri(n.prev,n,e.prev)||Ri(n,e.prev,e))||P_(n,e)&&Ri(n.prev,n,n.next)>0&&Ri(e.prev,e,e.next)>0)}function Ri(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function P_(n,e){return n.x===e.x&&n.y===e.y}function hre(n,e,t,i){let r=HM(Ri(n,e,t)),s=HM(Ri(n,e,i)),o=HM(Ri(t,i,n)),a=HM(Ri(t,i,e));return!!(r!==s&&o!==a||r===0&&zM(n,t,e)||s===0&&zM(n,i,e)||o===0&&zM(t,n,i)||a===0&&zM(t,e,i))}function zM(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function HM(n){return n>0?1:n<0?-1:0}function ZPe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hre(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function yx(n,e){return Ri(n.prev,n,n.next)<0?Ri(n,e,n.next)>=0&&Ri(n,n.prev,e)>=0:Ri(n,e,n.prev)<0||Ri(n,n.next,e)<0}function eNe(n,e){let t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function fre(n,e){let t=_4(n.i,n.x,n.y),i=_4(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function fie(n,e,t,i){let r=_4(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function vx(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function _4(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function tNe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}var y4=class{static triangulate(e,t,i=2){return UPe(e,t,i)}},Kf=class n{static area(e){let t=e.length,i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],s=[];pie(e),mie(i,e);let o=e.length;t.forEach(pie);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,mie(i,t[c]);let a=y4.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}};function pie(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function mie(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var bx=class n extends mo{constructor(e=new Zf([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];o(l)}this.setAttribute("position",new Ks(r,3)),this.setAttribute("uv",new Ks(s,2)),this.computeVertexNormals();function o(a){let c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3,b=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:nNe,P,N=!1,U,O,S,w;b&&(P=b.getSpacedPoints(u),N=!0,h=!1,U=b.computeFrenetFrames(u,!1),O=new Q,S=new Q,w=new Q),h||(_=0,f=0,g=0,v=0);let y=a.extractPoints(l),x=y.shape,T=y.holes;if(!Kf.isClockWise(x)){x=x.reverse();for(let we=0,B=T.length;we<B;we++){let Ee=T[we];Kf.isClockWise(Ee)&&(T[we]=Ee.reverse())}}function C(we){let Ee=10000000000000001e-36,Ae=we[0];for(let Ne=1;Ne<=we.length;Ne++){let Se=Ne%we.length,Fe=we[Se],Me=Fe.x-Ae.x,$e=Fe.y-Ae.y,z=Me*Me+$e*$e,k=Math.max(Math.abs(Fe.x),Math.abs(Fe.y),Math.abs(Ae.x),Math.abs(Ae.y)),J=Ee*k*k;if(z<=J){we.splice(Se,1),Ne--;continue}Ae=Fe}}C(x),T.forEach(C);let oe=T.length,Z=x;for(let we=0;we<oe;we++){let B=T[we];x=x.concat(B)}function G(we,B,Ee){return B||un("ExtrudeGeometry: vec does not exist"),we.clone().addScaledVector(B,Ee)}let K=x.length;function W(we,B,Ee){let Ae,Ne,Se,Fe=we.x-B.x,Me=we.y-B.y,$e=Ee.x-we.x,z=Ee.y-we.y,k=Fe*Fe+Me*Me,J=Fe*z-Me*$e;if(Math.abs(J)>Number.EPSILON){let ae=Math.sqrt(k),pe=Math.sqrt($e*$e+z*z),ee=B.x-Me/ae,rt=B.y+Fe/ae,Be=Ee.x-z/pe,ht=Ee.y+$e/pe,at=((Be-ee)*z-(ht-rt)*$e)/(Fe*z-Me*$e);Ae=ee+Fe*at-we.x,Ne=rt+Me*at-we.y;let be=Ae*Ae+Ne*Ne;if(be<=2)return new Xe(Ae,Ne);Se=Math.sqrt(be/2)}else{let ae=!1;Fe>Number.EPSILON?$e>Number.EPSILON&&(ae=!0):Fe<-Number.EPSILON?$e<-Number.EPSILON&&(ae=!0):Math.sign(Me)===Math.sign(z)&&(ae=!0),ae?(Ae=-Me,Ne=Fe,Se=Math.sqrt(k)):(Ae=Fe,Ne=Me,Se=Math.sqrt(k/2))}return new Xe(Ae/Se,Ne/Se)}let ue=[];for(let we=0,B=Z.length,Ee=B-1,Ae=we+1;we<B;we++,Ee++,Ae++)Ee===B&&(Ee=0),Ae===B&&(Ae=0),ue[we]=W(Z[we],Z[Ee],Z[Ae]);let ye=[],Ue,Qe=ue.concat();for(let we=0,B=oe;we<B;we++){let Ee=T[we];Ue=[];for(let Ae=0,Ne=Ee.length,Se=Ne-1,Fe=Ae+1;Ae<Ne;Ae++,Se++,Fe++)Se===Ne&&(Se=0),Fe===Ne&&(Fe=0),Ue[Ae]=W(Ee[Ae],Ee[Se],Ee[Fe]);ye.push(Ue),Qe=Qe.concat(Ue)}let Ze;if(_===0)Ze=Kf.triangulateShape(Z,T);else{let we=[],B=[];for(let Ee=0;Ee<_;Ee++){let Ae=Ee/_,Ne=f*Math.cos(Ae*Math.PI/2),Se=g*Math.sin(Ae*Math.PI/2)+v;for(let Fe=0,Me=Z.length;Fe<Me;Fe++){let $e=G(Z[Fe],ue[Fe],Se);nt($e.x,$e.y,-Ne),Ae===0&&we.push($e)}for(let Fe=0,Me=oe;Fe<Me;Fe++){let $e=T[Fe];Ue=ye[Fe];let z=[];for(let k=0,J=$e.length;k<J;k++){let ae=G($e[k],Ue[k],Se);nt(ae.x,ae.y,-Ne),Ae===0&&z.push(ae)}Ae===0&&B.push(z)}}Ze=Kf.triangulateShape(we,B)}let tt=Ze.length,kt=g+v;for(let we=0;we<K;we++){let B=h?G(x[we],Qe[we],kt):x[we];N?(S.copy(U.normals[0]).multiplyScalar(B.x),O.copy(U.binormals[0]).multiplyScalar(B.y),w.copy(P[0]).add(S).add(O),nt(w.x,w.y,w.z)):nt(B.x,B.y,0)}for(let we=1;we<=u;we++)for(let B=0;B<K;B++){let Ee=h?G(x[B],Qe[B],kt):x[B];N?(S.copy(U.normals[we]).multiplyScalar(Ee.x),O.copy(U.binormals[we]).multiplyScalar(Ee.y),w.copy(P[we]).add(S).add(O),nt(w.x,w.y,w.z)):nt(Ee.x,Ee.y,d/u*we)}for(let we=_-1;we>=0;we--){let B=we/_,Ee=f*Math.cos(B*Math.PI/2),Ae=g*Math.sin(B*Math.PI/2)+v;for(let Ne=0,Se=Z.length;Ne<Se;Ne++){let Fe=G(Z[Ne],ue[Ne],Ae);nt(Fe.x,Fe.y,d+Ee)}for(let Ne=0,Se=T.length;Ne<Se;Ne++){let Fe=T[Ne];Ue=ye[Ne];for(let Me=0,$e=Fe.length;Me<$e;Me++){let z=G(Fe[Me],Ue[Me],Ae);N?nt(z.x,z.y+P[u-1].y,P[u-1].x+Ee):nt(z.x,z.y,d+Ee)}}}de(),he();function de(){let we=r.length/3;if(h){let B=0,Ee=K*B;for(let Ae=0;Ae<tt;Ae++){let Ne=Ze[Ae];et(Ne[2]+Ee,Ne[1]+Ee,Ne[0]+Ee)}B=u+_*2,Ee=K*B;for(let Ae=0;Ae<tt;Ae++){let Ne=Ze[Ae];et(Ne[0]+Ee,Ne[1]+Ee,Ne[2]+Ee)}}else{for(let B=0;B<tt;B++){let Ee=Ze[B];et(Ee[2],Ee[1],Ee[0])}for(let B=0;B<tt;B++){let Ee=Ze[B];et(Ee[0]+K*u,Ee[1]+K*u,Ee[2]+K*u)}}i.addGroup(we,r.length/3-we,0)}function he(){let we=r.length/3,B=0;ze(Z,B),B+=Z.length;for(let Ee=0,Ae=T.length;Ee<Ae;Ee++){let Ne=T[Ee];ze(Ne,B),B+=Ne.length}i.addGroup(we,r.length/3-we,1)}function ze(we,B){let Ee=we.length;for(;--Ee>=0;){let Ae=Ee,Ne=Ee-1;Ne<0&&(Ne=we.length-1);for(let Se=0,Fe=u+_*2;Se<Fe;Se++){let Me=K*Se,$e=K*(Se+1),z=B+Ae+Me,k=B+Ne+Me,J=B+Ne+$e,ae=B+Ae+$e;Nt(z,k,J,ae)}}}function nt(we,B,Ee){c.push(we),c.push(B),c.push(Ee)}function et(we,B,Ee){Sn(we),Sn(B),Sn(Ee);let Ae=r.length/3,Ne=R.generateTopUV(i,r,Ae-3,Ae-2,Ae-1);Et(Ne[0]),Et(Ne[1]),Et(Ne[2])}function Nt(we,B,Ee,Ae){Sn(we),Sn(B),Sn(Ae),Sn(B),Sn(Ee),Sn(Ae);let Ne=r.length/3,Se=R.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Et(Se[0]),Et(Se[1]),Et(Se[3]),Et(Se[1]),Et(Se[2]),Et(Se[3])}function Sn(we){r.push(c[we*3+0]),r.push(c[we*3+1]),r.push(c[we*3+2])}function Et(we){s.push(we.x),s.push(we.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return iNe(t,i,e)}static fromJSON(e,t){let i=[];for(let s=0,o=e.shapes.length;s<o;s++){let a=t[e.shapes[s]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new m4[r.type]().fromJSON(r)),new n(i,e.options)}},nNe={generateTopUV:function(n,e,t,i,r){let s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],l=e[r*3],u=e[r*3+1];return[new Xe(s,o),new Xe(a,c),new Xe(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){let o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[r*3],f=e[r*3+1],g=e[r*3+2],v=e[s*3],_=e[s*3+1],b=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new Xe(o,1-c),new Xe(l,1-d),new Xe(h,1-g),new Xe(v,1-b)]:[new Xe(a,1-c),new Xe(u,1-d),new Xe(f,1-g),new Xe(_,1-b)]}};function iNe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var xx=class n extends mo{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],g=[],v=[],_=[];for(let b=0;b<u;b++){let R=b*h-o;for(let P=0;P<l;P++){let N=P*d-s;g.push(N,-R,0),v.push(0,0,1),_.push(P/a),_.push(1-b/c)}}for(let b=0;b<c;b++)for(let R=0;R<a;R++){let P=R+l*b,N=R+l*(b+1),U=R+1+l*(b+1),O=R+1+l*b;f.push(P,N,O),f.push(N,U,O)}this.setIndex(f),this.setAttribute("position",new Ks(g,3)),this.setAttribute("normal",new Ks(v,3)),this.setAttribute("uv",new Ks(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var wx=class extends au{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new dn(16777215),this.specular=new dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=k4,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $d,this.combine=CD,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var lD=class extends au{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Yie,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},uD=class extends au{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function jM(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function rNe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var tp=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){let a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},dD=class extends tp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:l4,endingEnd:l4}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case u4:s=e,a=2*t-i;break;case d4:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case u4:o=e,c=2*i-t;break;case d4:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,g=(i-t)/(r-t),v=g*g,_=v*g,b=-h*_+2*h*v-h*g,R=(1+h)*_+(-1.5-2*h)*v+(-.5+h)*g+1,P=(-1-f)*_+(1.5+f)*v+.5*g,N=f*_-f*v;for(let U=0;U!==a;++U)s[U]=b*o[u+U]+R*o[l+U]+P*o[c+U]+N*o[d+U];return s}},hD=class extends tp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}},fD=class extends tp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},yo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jM(t,this.TimeBufferType),this.values=jM(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:jM(e.times,Array),values:jM(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new fD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Y0:t=this.InterpolantFactoryMethodDiscrete;break;case XM:t=this.InterpolantFactoryMethodLinear;break;case GM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Ht("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y0;case this.InterpolantFactoryMethodLinear:return XM;case this.InterpolantFactoryMethodSmooth:return GM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(un("KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(un("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){un("KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){un("KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&rNe(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){un("KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===GM,s=e.length-1,o=1;for(let a=1;a<s;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{let d=a*i,h=d-i,f=d+i;for(let g=0;g!==i;++g){let v=t[d+g];if(v!==t[h+g]||v!==t[f+g]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];let d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};yo.prototype.ValueTypeName="";yo.prototype.TimeBufferType=Float32Array;yo.prototype.ValueBufferType=Float32Array;yo.prototype.DefaultInterpolation=XM;var qd=class extends yo{constructor(e,t,i){super(e,t,i)}};qd.prototype.ValueTypeName="bool";qd.prototype.ValueBufferType=Array;qd.prototype.DefaultInterpolation=Y0;qd.prototype.InterpolantFactoryMethodLinear=void 0;qd.prototype.InterpolantFactoryMethodSmooth=void 0;var pD=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};pD.prototype.ValueTypeName="color";var mD=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};mD.prototype.ValueTypeName="number";var gD=class extends tp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t),l=e*a;for(let u=l+a;l!==u;l+=4)ou.slerpFlat(s,0,o,l-a,o,l,c);return s}},Ex=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new gD(this.times,this.values,this.getValueSize(),e)}};Ex.prototype.ValueTypeName="quaternion";Ex.prototype.InterpolantFactoryMethodSmooth=void 0;var Kd=class extends yo{constructor(e,t,i){super(e,t,i)}};Kd.prototype.ValueTypeName="string";Kd.prototype.ValueBufferType=Array;Kd.prototype.DefaultInterpolation=Y0;Kd.prototype.InterpolantFactoryMethodLinear=void 0;Kd.prototype.InterpolantFactoryMethodSmooth=void 0;var _D=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};_D.prototype.ValueTypeName="vector";var Sx=class extends du{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var o4=new Si,gie=new Q,_ie=new Q,v4=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.mapType=Ra,this.map=null,this.mapPass=null,this.matrix=new Si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new M_,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new Qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;gie.setFromMatrixPosition(e.matrixWorld),t.position.copy(gie),_ie.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_ie),t.updateMatrixWorld(),o4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o4,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(o4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var yie=new Si,$0=new Q,a4=new Q,b4=class extends v4{constructor(){super(new Ur(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new Qn(2,1,1,1),new Qn(0,1,1,1),new Qn(3,1,1,1),new Qn(1,1,1,1),new Qn(3,0,1,1),new Qn(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),$0.setFromMatrixPosition(e.matrixWorld),i.position.copy($0),a4.copy(i.position),a4.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(a4),i.updateMatrixWorld(),r.makeTranslation(-$0.x,-$0.y,-$0.z),yie.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yie,i.coordinateSystem,i.reversedDepth)}},N_=class extends Sx{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new b4}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},yD=class extends ox{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};var Tx=class extends Sx{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var vD=class extends Ur{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var z4="\\[\\]\\.:\\/",sNe=new RegExp("["+z4+"]","g"),H4="[^"+z4+"]",oNe="[^"+z4.replace("\\.","")+"]",aNe=/((?:WC+[\/:])*)/.source.replace("WC",H4),cNe=/(WCOD+)?/.source.replace("WCOD",oNe),lNe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",H4),uNe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",H4),dNe=new RegExp("^"+aNe+cNe+lNe+uNe+"$"),hNe=["material","materials","bones","map"],x4=class{constructor(e,t,i){let r=i||ki.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},ki=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(sNe,"")}static parseTrackName(t){let i=dNe.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);hNe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(o){for(let a=0;a<o.length;a++){let c=o[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){Ht("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){un("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){un("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){un("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){un("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){un("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){un("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){un("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=i.nodeName;un("PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){un("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){un("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=x4,n})();ki.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ki.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ki.prototype.GetterByBindingType=[ki.prototype._getValue_direct,ki.prototype._getValue_array,ki.prototype._getValue_arrayElement,ki.prototype._getValue_toArray];ki.prototype.SetterByBindingTypeAndVersioning=[[ki.prototype._setValue_direct,ki.prototype._setValue_direct_setNeedsUpdate,ki.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_array,ki.prototype._setValue_array_setNeedsUpdate,ki.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_arrayElement,ki.prototype._setValue_arrayElement_setNeedsUpdate,ki.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_fromArray,ki.prototype._setValue_fromArray_setNeedsUpdate,ki.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var tdt=new Float32Array(1);function j4(n,e,t,i){let r=fNe(i);switch(t){case R4:return n*e;case N4:return n*e/r.components*r.byteLength;case kD:return n*e/r.components*r.byteLength;case OD:return n*e*2/r.components*r.byteLength;case LD:return n*e*2/r.components*r.byteLength;case P4:return n*e*3/r.components*r.byteLength;case Ho:return n*e*4/r.components*r.byteLength;case FD:return n*e*4/r.components*r.byteLength;case Ax:case Mx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Dx:case Rx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case UD:case zD:return Math.max(n,16)*Math.max(e,8)/4;case VD:case BD:return Math.max(n,8)*Math.max(e,8)/2;case HD:case jD:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case GD:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case WD:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $D:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qD:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case KD:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case XD:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case YD:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case QD:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case JD:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ZD:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case eR:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case tR:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case nR:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case iR:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case rR:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case sR:case oR:case aR:return Math.ceil(n/4)*Math.ceil(e/4)*16;case cR:case lR:return Math.ceil(n/4)*Math.ceil(e/4)*8;case uR:case dR:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function fNe(n){switch(n){case Ra:case C4:return{byteLength:1,components:1};case k_:case A4:case rp:return{byteLength:2,components:1};case PD:case ND:return{byteLength:2,components:4};case Yd:case RD:case Ac:return{byteLength:4,components:1};case M4:case D4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"181"}}));typeof window<"u"&&(window.__THREE__?Ht("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="181");function Lre(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mNe(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(typeof Float16Array<"u"&&l instanceof Float16Array)f=n.HALF_FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,c,l){let u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),d.length===0)n.bufferSubData(l,0,u);else{d.sort((f,g)=>f.start-g.start);let h=0;for(let f=1;f<d.length;f++){let g=d[h],v=d[f];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++h,d[h]=v)}d.length=h+1;for(let f=0,g=d.length;f<g;f++){let v=d[f];n.bufferSubData(l,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:s,update:o}}var gNe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,_Ne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yNe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,vNe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bNe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,xNe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,wNe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ENe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,SNe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,TNe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,INe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,CNe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ANe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,MNe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,DNe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,RNe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,PNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,kNe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ONe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,LNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,VNe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,UNe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,BNe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zNe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,HNe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jNe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GNe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,WNe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$Ne="gl_FragColor = linearToOutputTexel( gl_FragColor );",qNe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,KNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XNe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,YNe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,QNe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ZNe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eke=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tke=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nke=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ike=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rke=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ske=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,oke=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ake=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cke=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lke=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,uke=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dke=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hke=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fke=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,pke=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,mke=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gke=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_ke=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,yke=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vke=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bke=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xke=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,wke=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Eke=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ske=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tke=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ike=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Cke=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ake=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Mke=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Dke=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Rke=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Pke=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nke=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,kke=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Oke=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lke=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fke=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Vke=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Uke=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Bke=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,zke=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Hke=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,jke=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Gke=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Wke=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$ke=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qke=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Kke=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Xke=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yke=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qke=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Jke=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Zke=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,eOe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tOe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nOe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,iOe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rOe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sOe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oOe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aOe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cOe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lOe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,uOe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,dOe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hOe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fOe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pOe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,mOe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gOe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_Oe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yOe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vOe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bOe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xOe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,wOe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,EOe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,SOe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,TOe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IOe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,COe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AOe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MOe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DOe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ROe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,POe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NOe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,kOe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OOe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,LOe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,FOe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VOe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UOe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,BOe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zOe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HOe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jOe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GOe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WOe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Oe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qOe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KOe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:gNe,alphahash_pars_fragment:_Ne,alphamap_fragment:yNe,alphamap_pars_fragment:vNe,alphatest_fragment:bNe,alphatest_pars_fragment:xNe,aomap_fragment:wNe,aomap_pars_fragment:ENe,batching_pars_vertex:SNe,batching_vertex:TNe,begin_vertex:INe,beginnormal_vertex:CNe,bsdfs:ANe,iridescence_fragment:MNe,bumpmap_pars_fragment:DNe,clipping_planes_fragment:RNe,clipping_planes_pars_fragment:PNe,clipping_planes_pars_vertex:NNe,clipping_planes_vertex:kNe,color_fragment:ONe,color_pars_fragment:LNe,color_pars_vertex:FNe,color_vertex:VNe,common:UNe,cube_uv_reflection_fragment:BNe,defaultnormal_vertex:zNe,displacementmap_pars_vertex:HNe,displacementmap_vertex:jNe,emissivemap_fragment:GNe,emissivemap_pars_fragment:WNe,colorspace_fragment:$Ne,colorspace_pars_fragment:qNe,envmap_fragment:KNe,envmap_common_pars_fragment:XNe,envmap_pars_fragment:YNe,envmap_pars_vertex:QNe,envmap_physical_pars_fragment:cke,envmap_vertex:JNe,fog_vertex:ZNe,fog_pars_vertex:eke,fog_fragment:tke,fog_pars_fragment:nke,gradientmap_pars_fragment:ike,lightmap_pars_fragment:rke,lights_lambert_fragment:ske,lights_lambert_pars_fragment:oke,lights_pars_begin:ake,lights_toon_fragment:lke,lights_toon_pars_fragment:uke,lights_phong_fragment:dke,lights_phong_pars_fragment:hke,lights_physical_fragment:fke,lights_physical_pars_fragment:pke,lights_fragment_begin:mke,lights_fragment_maps:gke,lights_fragment_end:_ke,logdepthbuf_fragment:yke,logdepthbuf_pars_fragment:vke,logdepthbuf_pars_vertex:bke,logdepthbuf_vertex:xke,map_fragment:wke,map_pars_fragment:Eke,map_particle_fragment:Ske,map_particle_pars_fragment:Tke,metalnessmap_fragment:Ike,metalnessmap_pars_fragment:Cke,morphinstance_vertex:Ake,morphcolor_vertex:Mke,morphnormal_vertex:Dke,morphtarget_pars_vertex:Rke,morphtarget_vertex:Pke,normal_fragment_begin:Nke,normal_fragment_maps:kke,normal_pars_fragment:Oke,normal_pars_vertex:Lke,normal_vertex:Fke,normalmap_pars_fragment:Vke,clearcoat_normal_fragment_begin:Uke,clearcoat_normal_fragment_maps:Bke,clearcoat_pars_fragment:zke,iridescence_pars_fragment:Hke,opaque_fragment:jke,packing:Gke,premultiplied_alpha_fragment:Wke,project_vertex:$ke,dithering_fragment:qke,dithering_pars_fragment:Kke,roughnessmap_fragment:Xke,roughnessmap_pars_fragment:Yke,shadowmap_pars_fragment:Qke,shadowmap_pars_vertex:Jke,shadowmap_vertex:Zke,shadowmask_pars_fragment:eOe,skinbase_vertex:tOe,skinning_pars_vertex:nOe,skinning_vertex:iOe,skinnormal_vertex:rOe,specularmap_fragment:sOe,specularmap_pars_fragment:oOe,tonemapping_fragment:aOe,tonemapping_pars_fragment:cOe,transmission_fragment:lOe,transmission_pars_fragment:uOe,uv_pars_fragment:dOe,uv_pars_vertex:hOe,uv_vertex:fOe,worldpos_vertex:pOe,background_vert:mOe,background_frag:gOe,backgroundCube_vert:_Oe,backgroundCube_frag:yOe,cube_vert:vOe,cube_frag:bOe,depth_vert:xOe,depth_frag:wOe,distanceRGBA_vert:EOe,distanceRGBA_frag:SOe,equirect_vert:TOe,equirect_frag:IOe,linedashed_vert:COe,linedashed_frag:AOe,meshbasic_vert:MOe,meshbasic_frag:DOe,meshlambert_vert:ROe,meshlambert_frag:POe,meshmatcap_vert:NOe,meshmatcap_frag:kOe,meshnormal_vert:OOe,meshnormal_frag:LOe,meshphong_vert:FOe,meshphong_frag:VOe,meshphysical_vert:UOe,meshphysical_frag:BOe,meshtoon_vert:zOe,meshtoon_frag:HOe,points_vert:jOe,points_frag:GOe,shadow_vert:WOe,shadow_frag:$Oe,sprite_vert:qOe,sprite_frag:KOe},Ke={common:{diffuse:{value:new dn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new rn},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new rn}},envmap:{envMap:{value:null},envMapRotation:{value:new rn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new rn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new rn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new rn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new rn},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new rn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new rn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new rn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new rn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0},uvTransform:{value:new rn}},sprite:{diffuse:{value:new dn(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new rn},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0}}},Mc={basic:{uniforms:rs([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:rs([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new dn(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:rs([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new dn(0)},specular:{value:new dn(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:rs([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:rs([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new dn(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:rs([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:rs([Ke.points,Ke.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:rs([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:rs([Ke.common,Ke.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:rs([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:rs([Ke.sprite,Ke.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new rn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new rn}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:rs([Ke.common,Ke.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:rs([Ke.lights,Ke.fog,{color:{value:new dn(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};Mc.physical={uniforms:rs([Mc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new rn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new rn},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new rn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new rn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new rn},sheen:{value:0},sheenColor:{value:new dn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new rn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new rn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new rn},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new rn},attenuationDistance:{value:0},attenuationColor:{value:new dn(0)},specularColor:{value:new dn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new rn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new rn},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new rn}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};var hR={r:0,b:0,g:0},op=new $d,XOe=new Si;function YOe(n,e,t,i,r,s,o){let a=new dn(0),c=s===!0?0:1,l,u,d=null,h=0,f=null;function g(P){let N=P.isScene===!0?P.background:null;return N&&N.isTexture&&(N=(P.backgroundBlurriness>0?t:e).get(N)),N}function v(P){let N=!1,U=g(P);U===null?b(a,c):U&&U.isColor&&(b(U,1),N=!0);let O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||N)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(P,N){let U=g(N);U&&(U.isCubeTexture||U.mapping===Ix)?(u===void 0&&(u=new go(new C_(1,1,1),new zo({name:"BackgroundCubeMaterial",uniforms:sp(Mc.backgroundCube.uniforms),vertexShader:Mc.backgroundCube.vertexShader,fragmentShader:Mc.backgroundCube.fragmentShader,side:_s,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,S,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),op.copy(N.backgroundRotation),op.x*=-1,op.y*=-1,op.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(op.y*=-1,op.z*=-1),u.material.uniforms.envMap.value=U,u.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(XOe.makeRotationFromEuler(op)),u.material.toneMapped=Ln.getTransfer(U.colorSpace)!==Jn,(d!==U||h!==U.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=U,h=U.version,f=n.toneMapping),u.layers.enableAll(),P.unshift(u,u.geometry,u.material,0,0,null)):U&&U.isTexture&&(l===void 0&&(l=new go(new xx(2,2),new zo({name:"BackgroundMaterial",uniforms:sp(Mc.background.uniforms),vertexShader:Mc.background.vertexShader,fragmentShader:Mc.background.fragmentShader,side:ru,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=U,l.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,l.material.toneMapped=Ln.getTransfer(U.colorSpace)!==Jn,U.matrixAutoUpdate===!0&&U.updateMatrix(),l.material.uniforms.uvTransform.value.copy(U.matrix),(d!==U||h!==U.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=U,h=U.version,f=n.toneMapping),l.layers.enableAll(),P.unshift(l,l.geometry,l.material,0,0,null))}function b(P,N){P.getRGB(hR,U4(n)),i.buffers.color.setClear(hR.r,hR.g,hR.b,N,o)}function R(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(P,N=1){a.set(P),c=N,b(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(P){c=P,b(a,c)},render:v,addToRenderList:_,dispose:R}}function QOe(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),s=r,o=!1;function a(x,T,M,C,oe){let Z=!1,G=d(C,M,T);s!==G&&(s=G,l(s.object)),Z=f(x,C,M,oe),Z&&g(x,C,M,oe),oe!==null&&e.update(oe,n.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,N(x,T,M,C),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(oe).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function u(x){return n.deleteVertexArray(x)}function d(x,T,M){let C=M.wireframe===!0,oe=i[x.id];oe===void 0&&(oe={},i[x.id]=oe);let Z=oe[T.id];Z===void 0&&(Z={},oe[T.id]=Z);let G=Z[C];return G===void 0&&(G=h(c()),Z[C]=G),G}function h(x){let T=[],M=[],C=[];for(let oe=0;oe<t;oe++)T[oe]=0,M[oe]=0,C[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:T,enabledAttributes:M,attributeDivisors:C,object:x,attributes:{},index:null}}function f(x,T,M,C){let oe=s.attributes,Z=T.attributes,G=0,K=M.getAttributes();for(let W in K)if(K[W].location>=0){let ye=oe[W],Ue=Z[W];if(Ue===void 0&&(W==="instanceMatrix"&&x.instanceMatrix&&(Ue=x.instanceMatrix),W==="instanceColor"&&x.instanceColor&&(Ue=x.instanceColor)),ye===void 0||ye.attribute!==Ue||Ue&&ye.data!==Ue.data)return!0;G++}return s.attributesNum!==G||s.index!==C}function g(x,T,M,C){let oe={},Z=T.attributes,G=0,K=M.getAttributes();for(let W in K)if(K[W].location>=0){let ye=Z[W];ye===void 0&&(W==="instanceMatrix"&&x.instanceMatrix&&(ye=x.instanceMatrix),W==="instanceColor"&&x.instanceColor&&(ye=x.instanceColor));let Ue={};Ue.attribute=ye,ye&&ye.data&&(Ue.data=ye.data),oe[W]=Ue,G++}s.attributes=oe,s.attributesNum=G,s.index=C}function v(){let x=s.newAttributes;for(let T=0,M=x.length;T<M;T++)x[T]=0}function _(x){b(x,0)}function b(x,T){let M=s.newAttributes,C=s.enabledAttributes,oe=s.attributeDivisors;M[x]=1,C[x]===0&&(n.enableVertexAttribArray(x),C[x]=1),oe[x]!==T&&(n.vertexAttribDivisor(x,T),oe[x]=T)}function R(){let x=s.newAttributes,T=s.enabledAttributes;for(let M=0,C=T.length;M<C;M++)T[M]!==x[M]&&(n.disableVertexAttribArray(M),T[M]=0)}function P(x,T,M,C,oe,Z,G){G===!0?n.vertexAttribIPointer(x,T,M,oe,Z):n.vertexAttribPointer(x,T,M,C,oe,Z)}function N(x,T,M,C){v();let oe=C.attributes,Z=M.getAttributes(),G=T.defaultAttributeValues;for(let K in Z){let W=Z[K];if(W.location>=0){let ue=oe[K];if(ue===void 0&&(K==="instanceMatrix"&&x.instanceMatrix&&(ue=x.instanceMatrix),K==="instanceColor"&&x.instanceColor&&(ue=x.instanceColor)),ue!==void 0){let ye=ue.normalized,Ue=ue.itemSize,Qe=e.get(ue);if(Qe===void 0)continue;let Ze=Qe.buffer,tt=Qe.type,kt=Qe.bytesPerElement,de=tt===n.INT||tt===n.UNSIGNED_INT||ue.gpuType===RD;if(ue.isInterleavedBufferAttribute){let he=ue.data,ze=he.stride,nt=ue.offset;if(he.isInstancedInterleavedBuffer){for(let et=0;et<W.locationSize;et++)b(W.location+et,he.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let et=0;et<W.locationSize;et++)_(W.location+et);n.bindBuffer(n.ARRAY_BUFFER,Ze);for(let et=0;et<W.locationSize;et++)P(W.location+et,Ue/W.locationSize,tt,ye,ze*kt,(nt+Ue/W.locationSize*et)*kt,de)}else{if(ue.isInstancedBufferAttribute){for(let he=0;he<W.locationSize;he++)b(W.location+he,ue.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let he=0;he<W.locationSize;he++)_(W.location+he);n.bindBuffer(n.ARRAY_BUFFER,Ze);for(let he=0;he<W.locationSize;he++)P(W.location+he,Ue/W.locationSize,tt,ye,Ue*kt,Ue/W.locationSize*he*kt,de)}}else if(G!==void 0){let ye=G[K];if(ye!==void 0)switch(ye.length){case 2:n.vertexAttrib2fv(W.location,ye);break;case 3:n.vertexAttrib3fv(W.location,ye);break;case 4:n.vertexAttrib4fv(W.location,ye);break;default:n.vertexAttrib1fv(W.location,ye)}}}}R()}function U(){w();for(let x in i){let T=i[x];for(let M in T){let C=T[M];for(let oe in C)u(C[oe].object),delete C[oe];delete T[M]}delete i[x]}}function O(x){if(i[x.id]===void 0)return;let T=i[x.id];for(let M in T){let C=T[M];for(let oe in C)u(C[oe].object),delete C[oe];delete T[M]}delete i[x.id]}function S(x){for(let T in i){let M=i[T];if(M[x.id]===void 0)continue;let C=M[x.id];for(let oe in C)u(C[oe].object),delete C[oe];delete M[x.id]}}function w(){y(),o=!0,s!==r&&(s=r,l(s.object))}function y(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:w,resetDefaultState:y,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:S,initAttributes:v,enableAttribute:_,disableUnusedAttributes:R}}function JOe(n,e,t){let i;function r(l){i=l}function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)}function o(l,u,d){d!==0&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let f=0;for(let g=0;g<d;g++)f+=u[g];t.update(f,i,1)}function c(l,u,d,h){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let g=0;g<l.length;g++)o(l[g],u[g],h[g]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let g=0;for(let v=0;v<d;v++)g+=u[v]*h[v];t.update(g,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function ZOe(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let S=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(S){return!(S!==Ho&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(S){let w=S===rp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==Ra&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==Ac&&!w)}function c(S){if(S==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(Ht("WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,h=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),P=n.getParameter(n.MAX_VARYING_VECTORS),N=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=g>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reversedDepthBuffer:h,maxTextures:f,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:R,maxVaryings:P,maxFragmentUniforms:N,vertexTextures:U,maxSamples:O}}function eLe(n){let e=this,t=null,i=0,r=!1,s=!1,o=new wc,a=new rn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){let g=d.clippingPlanes,v=d.clipIntersection,_=d.clipShadows,b=n.get(d);if(!r||g===null||g.length===0||s&&!_)s?u(null):l();else{let R=s?0:i,P=R*4,N=b.clippingState||null;c.value=N,N=u(g,h,P,f);for(let U=0;U!==P;++U)N[U]=t[U];b.clippingState=N,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=R}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,g){let v=d!==null?d.length:0,_=null;if(v!==0){if(_=c.value,g!==!0||_===null){let b=f+v*4,R=h.matrixWorldInverse;a.getNormalMatrix(R),(_===null||_.length<b)&&(_=new Float32Array(b));for(let P=0,N=f;P!==v;++P,N+=4)o.copy(d[P]).applyMatrix4(R,a),o.normal.toArray(_,N),_[N+3]=o.constant}c.value=_,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function tLe(n){let e=new WeakMap;function t(o,a){return a===AD?o.mapping=np:a===MD&&(o.mapping=ip),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===AD||a===MD)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let l=new tD(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var Qd=4,pre=[.125,.215,.35,.446,.526,.582],cp=20,nLe=256,Px=new yD,mre=new dn,G4=null,W4=0,$4=0,q4=!1,iLe=new Q,pR=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,s={}){let{size:o=256,position:a=iLe}=s;G4=this._renderer.getRenderTarget(),W4=this._renderer.getActiveCubeFace(),$4=this._renderer.getActiveMipmapLevel(),q4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=yre(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_re(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(G4,W4,$4),this._renderer.xr.enabled=q4,e.scissorTest=!1,V_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===np||e.mapping===ip?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),G4=this._renderer.getRenderTarget(),W4=this._renderer.getActiveCubeFace(),$4=this._renderer.getActiveMipmapLevel(),q4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:po,minFilter:po,generateMipmaps:!1,type:rp,format:Ho,colorSpace:Qf,depthBuffer:!1},r=gre(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gre(e,t,i);let{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=rLe(s)),this._blurMaterial=oLe(s,e,t),this._ggxMaterial=sLe(s,e,t)}return r}_compileMaterial(e){let t=new go(new mo,e);this._renderer.compile(t,Px)}_sceneToCubeUV(e,t,i,r,s){let c=new Ur(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(mre),d.toneMapping=cu,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new go(new C_,new ix({name:"PMREM.Background",side:_s,depthWrite:!1,depthTest:!1})));let v=this._backgroundBox,_=v.material,b=!1,R=e.background;R?R.isColor&&(_.color.copy(R),e.background=null,b=!0):(_.color.copy(mre),b=!0);for(let P=0;P<6;P++){let N=P%3;N===0?(c.up.set(0,l[P],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[P],s.y,s.z)):N===1?(c.up.set(0,0,l[P]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[P],s.z)):(c.up.set(0,l[P],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[P]));let U=this._cubeSize;V_(r,N*U,P>2?U:0,U,U),d.setRenderTarget(r),b&&d.render(v,c),d.render(e,c)}d.toneMapping=f,d.autoClear=h,e.background=R}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===np||e.mapping===ip;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=yre()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_re());let s=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;let a=s.uniforms;a.envMap.value=e;let c=this._cubeSize;V_(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,Px)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodMeshes.length;for(let s=1;s<r;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){let r=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,a=this._lodMeshes[i];a.material=o;let c=o.uniforms,l=i/(this._lodMeshes.length-1),u=t/(this._lodMeshes.length-1),d=Math.sqrt(l*l-u*u),h=.05+l*.95,f=d*h,{_lodMax:g}=this,v=this._sizeLods[i],_=3*v*(i>g-Qd?i-g+Qd:0),b=4*(this._cubeSize-v);c.envMap.value=e.texture,c.roughness.value=f,c.mipInt.value=g-t,V_(s,_,b,3*v,2*v),r.setRenderTarget(s),r.render(a,Px),c.envMap.value=s.texture,c.roughness.value=0,c.mipInt.value=g-i,V_(e,_,b,3*v,2*v),r.setRenderTarget(e),r.render(a,Px)}_blur(e,t,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){let c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&un("blur direction must be either latitudinal or longitudinal!");let u=3,d=this._lodMeshes[r];d.material=l;let h=l.uniforms,f=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*cp-1),v=s/g,_=isFinite(s)?1+Math.floor(u*v):cp;_>cp&&Ht(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${cp}`);let b=[],R=0;for(let S=0;S<cp;++S){let w=S/v,y=Math.exp(-w*w/2);b.push(y),S===0?R+=y:S<_&&(R+=2*y)}for(let S=0;S<b.length;S++)b[S]=b[S]/R;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=b,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:P}=this;h.dTheta.value=g,h.mipInt.value=P-i;let N=this._sizeLods[r],U=3*N*(r>P-Qd?r-P+Qd:0),O=4*(this._cubeSize-N);V_(t,U,O,3*N,2*N),c.setRenderTarget(t),c.render(d,Px)}};function rLe(n){let e=[],t=[],i=[],r=n,s=n-Qd+1+pre.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);e.push(a);let c=1/a;o>n-Qd?c=pre[o-n+Qd-1]:o===0&&(c=0),t.push(c);let l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,g=6,v=3,_=2,b=1,R=new Float32Array(v*g*f),P=new Float32Array(_*g*f),N=new Float32Array(b*g*f);for(let O=0;O<f;O++){let S=O%3*2/3-1,w=O>2?0:-1,y=[S,w,0,S+2/3,w,0,S+2/3,w+1,0,S,w,0,S+2/3,w+1,0,S,w+1,0];R.set(y,v*g*O),P.set(h,_*g*O);let x=[O,O,O,O,O,O];N.set(x,b*g*O)}let U=new mo;U.setAttribute("position",new fo(R,v)),U.setAttribute("uv",new fo(P,_)),U.setAttribute("faceIndex",new fo(N,b)),i.push(new go(U,null)),r>Qd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function gre(n,e,t){let i=new Sc(n,e,t);return i.texture.mapping=Ix,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function V_(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function sLe(n,e,t){return new zo({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:nLe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:gR(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function oLe(n,e,t){let i=new Float32Array(cp),r=new Q(0,1,0);return new zo({name:"SphericalGaussianBlur",defines:{n:cp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function _re(){return new zo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function yre(){return new zo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function gR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aLe(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===AD||c===MD,u=c===np||c===ip;if(l||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new pR(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let f=a.image;return l&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new pR(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){let c=a.target;c.removeEventListener("dispose",s);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function cLe(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&T_("WebGLRenderer: "+i+" extension not supported."),r}}}function lLe(n,e,t,i){let r={},s=new WeakMap;function o(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete r[h.id];let f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function c(d){let h=d.attributes;for(let f in h)e.update(h[f],n.ARRAY_BUFFER)}function l(d){let h=[],f=d.index,g=d.attributes.position,v=0;if(f!==null){let R=f.array;v=f.version;for(let P=0,N=R.length;P<N;P+=3){let U=R[P+0],O=R[P+1],S=R[P+2];h.push(U,O,O,S,S,U)}}else if(g!==void 0){let R=g.array;v=g.version;for(let P=0,N=R.length/3-1;P<N;P+=3){let U=P+0,O=P+1,S=P+2;h.push(U,O,O,S,S,U)}}else return;let _=new(F4(h)?sx:rx)(h,1);_.version=v;let b=s.get(d);b&&e.remove(b),s.set(d,_)}function u(d){let h=s.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function uLe(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function c(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)}function l(h,f,g){g!==0&&(n.drawElementsInstanced(i,f,s,h*o,g),t.update(f,i,g))}function u(h,f,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,g);let _=0;for(let b=0;b<g;b++)_+=f[b];t.update(_,i,1)}function d(h,f,g,v){if(g===0)return;let _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<h.length;b++)l(h[b]/o,f[b],v[b]);else{_.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,v,0,g);let b=0;for(let R=0;R<g;R++)b+=f[R]*v[R];t.update(b,i,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function dLe(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:un("WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function hLe(n,e,t){let i=new WeakMap,r=new Qn;function s(o,a,c){let l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let x=function(){w.dispose(),i.delete(a),a.removeEventListener("dispose",x)};var f=x;h!==void 0&&h.texture.dispose();let g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],R=a.morphAttributes.normal||[],P=a.morphAttributes.color||[],N=0;g===!0&&(N=1),v===!0&&(N=2),_===!0&&(N=3);let U=a.attributes.position.count*N,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);let S=new Float32Array(U*O*4*d),w=new ex(S,U,O,d);w.type=Ac,w.needsUpdate=!0;let y=N*4;for(let T=0;T<d;T++){let M=b[T],C=R[T],oe=P[T],Z=U*O*4*T;for(let G=0;G<M.count;G++){let K=G*y;g===!0&&(r.fromBufferAttribute(M,G),S[Z+K+0]=r.x,S[Z+K+1]=r.y,S[Z+K+2]=r.z,S[Z+K+3]=0),v===!0&&(r.fromBufferAttribute(C,G),S[Z+K+4]=r.x,S[Z+K+5]=r.y,S[Z+K+6]=r.z,S[Z+K+7]=0),_===!0&&(r.fromBufferAttribute(oe,G),S[Z+K+8]=r.x,S[Z+K+9]=r.y,S[Z+K+10]=r.z,S[Z+K+11]=oe.itemSize===4?r.w:1)}}h={count:d,texture:w,size:new Xe(U,O)},i.set(a,h),a.addEventListener("dispose",x)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let _=0;_<l.length;_++)g+=l[_];let v=a.morphTargetsRelative?1:1-g;c.getUniforms().setValue(n,"morphTargetBaseInfluence",v),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function fLe(n,e,t,i){let r=new WeakMap;function s(c){let l=i.render.frame,u=c.geometry,d=e.get(c,u);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d}function o(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}var Fre=new uu,vre=new ux(1,1),Vre=new ex,Ure=new ZM,Bre=new ax,bre=[],xre=[],wre=new Float32Array(16),Ere=new Float32Array(9),Sre=new Float32Array(4);function B_(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,s=bre[r];if(s===void 0&&(s=new Float32Array(r),bre[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function gr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function _r(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function _R(n,e){let t=xre[e];t===void 0&&(t=new Int32Array(e),xre[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function pLe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mLe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2fv(this.addr,e),_r(t,e)}}function gLe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gr(t,e))return;n.uniform3fv(this.addr,e),_r(t,e)}}function _Le(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4fv(this.addr,e),_r(t,e)}}function yLe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;Sre.set(i),n.uniformMatrix2fv(this.addr,!1,Sre),_r(t,i)}}function vLe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;Ere.set(i),n.uniformMatrix3fv(this.addr,!1,Ere),_r(t,i)}}function bLe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;wre.set(i),n.uniformMatrix4fv(this.addr,!1,wre),_r(t,i)}}function xLe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function wLe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2iv(this.addr,e),_r(t,e)}}function ELe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3iv(this.addr,e),_r(t,e)}}function SLe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4iv(this.addr,e),_r(t,e)}}function TLe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function ILe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2uiv(this.addr,e),_r(t,e)}}function CLe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3uiv(this.addr,e),_r(t,e)}}function ALe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4uiv(this.addr,e),_r(t,e)}}function MLe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(vre.compareFunction=O4,s=vre):s=Fre,t.setTexture2D(e||s,r)}function DLe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Ure,r)}function RLe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Bre,r)}function PLe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Vre,r)}function NLe(n){switch(n){case 5126:return pLe;case 35664:return mLe;case 35665:return gLe;case 35666:return _Le;case 35674:return yLe;case 35675:return vLe;case 35676:return bLe;case 5124:case 35670:return xLe;case 35667:case 35671:return wLe;case 35668:case 35672:return ELe;case 35669:case 35673:return SLe;case 5125:return TLe;case 36294:return ILe;case 36295:return CLe;case 36296:return ALe;case 35678:case 36198:case 36298:case 36306:case 35682:return MLe;case 35679:case 36299:case 36307:return DLe;case 35680:case 36300:case 36308:case 36293:return RLe;case 36289:case 36303:case 36311:case 36292:return PLe}}function kLe(n,e){n.uniform1fv(this.addr,e)}function OLe(n,e){let t=B_(e,this.size,2);n.uniform2fv(this.addr,t)}function LLe(n,e){let t=B_(e,this.size,3);n.uniform3fv(this.addr,t)}function FLe(n,e){let t=B_(e,this.size,4);n.uniform4fv(this.addr,t)}function VLe(n,e){let t=B_(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ULe(n,e){let t=B_(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function BLe(n,e){let t=B_(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function zLe(n,e){n.uniform1iv(this.addr,e)}function HLe(n,e){n.uniform2iv(this.addr,e)}function jLe(n,e){n.uniform3iv(this.addr,e)}function GLe(n,e){n.uniform4iv(this.addr,e)}function WLe(n,e){n.uniform1uiv(this.addr,e)}function $Le(n,e){n.uniform2uiv(this.addr,e)}function qLe(n,e){n.uniform3uiv(this.addr,e)}function KLe(n,e){n.uniform4uiv(this.addr,e)}function XLe(n,e,t){let i=this.cache,r=e.length,s=_R(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Fre,s[o])}function YLe(n,e,t){let i=this.cache,r=e.length,s=_R(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Ure,s[o])}function QLe(n,e,t){let i=this.cache,r=e.length,s=_R(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Bre,s[o])}function JLe(n,e,t){let i=this.cache,r=e.length,s=_R(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Vre,s[o])}function ZLe(n){switch(n){case 5126:return kLe;case 35664:return OLe;case 35665:return LLe;case 35666:return FLe;case 35674:return VLe;case 35675:return ULe;case 35676:return BLe;case 5124:case 35670:return zLe;case 35667:case 35671:return HLe;case 35668:case 35672:return jLe;case 35669:case 35673:return GLe;case 5125:return WLe;case 36294:return $Le;case 36295:return qLe;case 36296:return KLe;case 35678:case 36198:case 36298:case 36306:case 35682:return XLe;case 35679:case 36299:case 36307:return YLe;case 35680:case 36300:case 36308:case 36293:return QLe;case 36289:case 36303:case 36311:case 36292:return JLe}}var X4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=NLe(t.type)}},Y4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ZLe(t.type)}},Q4=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(e,t[a.id],i)}}},K4=/(\w+)(\])?(\[|\.)?/g;function Tre(n,e){n.seq.push(e),n.map[e.id]=e}function eFe(n,e,t){let i=n.name,r=i.length;for(K4.lastIndex=0;;){let s=K4.exec(i),o=K4.lastIndex,a=s[1],c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){Tre(t,l===void 0?new X4(a,n,e):new Y4(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new Q4(a),Tre(t,d)),t=d}}}var U_=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);eFe(s,o,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){let a=t[s],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&i.push(o)}return i}};function Ire(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var tFe=37297,nFe=0;function iFe(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}var Cre=new rn;function rFe(n){Ln._getMatrix(Cre,Ln.workingColorSpace,n);let e=`mat3( ${Cre.elements.map(t=>t.toFixed(4))} )`;switch(Ln.getTransfer(n)){case Q0:return[e,"LinearTransferOETF"];case Jn:return[e,"sRGBTransferOETF"];default:return Ht("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Are(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";let o=/ERROR: 0:(\d+)/.exec(s);if(o){let a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+iFe(n.getShaderSource(e),a)}else return s}function sFe(n,e){let t=rFe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function oFe(n,e){let t;switch(e){case Hie:t="Linear";break;case jie:t="Reinhard";break;case Gie:t="Cineon";break;case Wie:t="ACESFilmic";break;case qie:t="AgX";break;case Kie:t="Neutral";break;case $ie:t="Custom";break;default:Ht("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var fR=new Q;function aFe(){Ln.getLuminanceCoefficients(fR);let n=fR.x.toFixed(4),e=fR.y.toFixed(4),t=fR.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function cFe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Nx).join(`
`)}function lFe(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function uFe(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Nx(n){return n!==""}function Mre(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Dre(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var dFe=/^[ \t]*#include +<([\w\d./]+)>/gm;function J4(n){return n.replace(dFe,fFe)}var hFe=new Map;function fFe(n,e){let t=on[e];if(t===void 0){let i=hFe.get(e);if(i!==void 0)t=on[i],Ht('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return J4(t)}var pFe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rre(n){return n.replace(pFe,mFe)}function mFe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Pre(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gFe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===E4?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xie?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Tc&&(e="SHADOWMAP_TYPE_VSM"),e}function _Fe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case np:case ip:e="ENVMAP_TYPE_CUBE";break;case Ix:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yFe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ip:e="ENVMAP_MODE_REFRACTION";break}return e}function vFe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case CD:e="ENVMAP_BLENDING_MULTIPLY";break;case Bie:e="ENVMAP_BLENDING_MIX";break;case zie:e="ENVMAP_BLENDING_ADD";break}return e}function bFe(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function xFe(n,e,t,i){let r=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,c=gFe(t),l=_Fe(t),u=yFe(t),d=vFe(t),h=bFe(t),f=cFe(t),g=lFe(s),v=r.createProgram(),_,b,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Nx).join(`
`),_.length>0&&(_+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Nx).join(`
`),b.length>0&&(b+=`
`)):(_=[Pre(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Nx).join(`
`),b=[Pre(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cu?"#define TONE_MAPPING":"",t.toneMapping!==cu?on.tonemapping_pars_fragment:"",t.toneMapping!==cu?oFe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,sFe("linearToOutputTexel",t.outputColorSpace),aFe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Nx).join(`
`)),o=J4(o),o=Mre(o,t),o=Dre(o,t),a=J4(a),a=Mre(a,t),a=Dre(a,t),o=Rre(o),a=Rre(a),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,_=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,b=["#define varying in",t.glslVersion===L4?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===L4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let P=R+_+o,N=R+b+a,U=Ire(r,r.VERTEX_SHADER,P),O=Ire(r,r.FRAGMENT_SHADER,N);r.attachShader(v,U),r.attachShader(v,O),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function S(T){if(n.debug.checkShaderErrors){let M=r.getProgramInfoLog(v)||"",C=r.getShaderInfoLog(U)||"",oe=r.getShaderInfoLog(O)||"",Z=M.trim(),G=C.trim(),K=oe.trim(),W=!0,ue=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(W=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,v,U,O);else{let ye=Are(r,U,"vertex"),Ue=Are(r,O,"fragment");un("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+T.name+`
Material Type: `+T.type+`

Program Info Log: `+Z+`
`+ye+`
`+Ue)}else Z!==""?Ht("WebGLProgram: Program Info Log:",Z):(G===""||K==="")&&(ue=!1);ue&&(T.diagnostics={runnable:W,programLog:Z,vertexShader:{log:G,prefix:_},fragmentShader:{log:K,prefix:b}})}r.deleteShader(U),r.deleteShader(O),w=new U_(r,v),y=uFe(r,v)}let w;this.getUniforms=function(){return w===void 0&&S(this),w};let y;this.getAttributes=function(){return y===void 0&&S(this),y};let x=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(v,tFe)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=nFe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=U,this.fragmentShader=O,this}var wFe=0,Z4=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new eH(e),t.set(e,i)),i}},eH=class{constructor(e){this.id=wFe++,this.code=e,this.usedTimes=0}};function EFe(n,e,t,i,r,s,o){let a=new nx,c=new Z4,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(y){return l.add(y),y===0?"uv":`uv${y}`}function _(y,x,T,M,C){let oe=M.fog,Z=C.geometry,G=y.isMeshStandardMaterial?M.environment:null,K=(y.isMeshStandardMaterial?t:e).get(y.envMap||G),W=K&&K.mapping===Ix?K.image.height:null,ue=g[y.type];y.precision!==null&&(f=r.getMaxPrecision(y.precision),f!==y.precision&&Ht("WebGLProgram.getParameters:",y.precision,"not supported, using",f,"instead."));let ye=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,Ue=ye!==void 0?ye.length:0,Qe=0;Z.morphAttributes.position!==void 0&&(Qe=1),Z.morphAttributes.normal!==void 0&&(Qe=2),Z.morphAttributes.color!==void 0&&(Qe=3);let Ze,tt,kt,de;if(ue){let Pn=Mc[ue];Ze=Pn.vertexShader,tt=Pn.fragmentShader}else Ze=y.vertexShader,tt=y.fragmentShader,c.update(y),kt=c.getVertexShaderID(y),de=c.getFragmentShaderID(y);let he=n.getRenderTarget(),ze=n.state.buffers.depth.getReversed(),nt=C.isInstancedMesh===!0,et=C.isBatchedMesh===!0,Nt=!!y.map,Sn=!!y.matcap,Et=!!K,we=!!y.aoMap,B=!!y.lightMap,Ee=!!y.bumpMap,Ae=!!y.normalMap,Ne=!!y.displacementMap,Se=!!y.emissiveMap,Fe=!!y.metalnessMap,Me=!!y.roughnessMap,$e=y.anisotropy>0,z=y.clearcoat>0,k=y.dispersion>0,J=y.iridescence>0,ae=y.sheen>0,pe=y.transmission>0,ee=$e&&!!y.anisotropyMap,rt=z&&!!y.clearcoatMap,Be=z&&!!y.clearcoatNormalMap,ht=z&&!!y.clearcoatRoughnessMap,at=J&&!!y.iridescenceMap,be=J&&!!y.iridescenceThicknessMap,De=ae&&!!y.sheenColorMap,yt=ae&&!!y.sheenRoughnessMap,ft=!!y.specularMap,Ge=!!y.specularColorMap,Mt=!!y.specularIntensityMap,j=pe&&!!y.transmissionMap,He=pe&&!!y.thicknessMap,ke=!!y.gradientMap,Oe=!!y.alphaMap,ve=y.alphaTest>0,_e=!!y.alphaHash,qe=!!y.extensions,Tt=cu;y.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(Tt=n.toneMapping);let Fn={shaderID:ue,shaderType:y.type,shaderName:y.name,vertexShader:Ze,fragmentShader:tt,defines:y.defines,customVertexShaderID:kt,customFragmentShaderID:de,isRawShaderMaterial:y.isRawShaderMaterial===!0,glslVersion:y.glslVersion,precision:f,batching:et,batchingColor:et&&C._colorsTexture!==null,instancing:nt,instancingColor:nt&&C.instanceColor!==null,instancingMorph:nt&&C.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:he===null?n.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:Qf,alphaToCoverage:!!y.alphaToCoverage,map:Nt,matcap:Sn,envMap:Et,envMapMode:Et&&K.mapping,envMapCubeUVHeight:W,aoMap:we,lightMap:B,bumpMap:Ee,normalMap:Ae,displacementMap:h&&Ne,emissiveMap:Se,normalMapObjectSpace:Ae&&y.normalMapType===Jie,normalMapTangentSpace:Ae&&y.normalMapType===k4,metalnessMap:Fe,roughnessMap:Me,anisotropy:$e,anisotropyMap:ee,clearcoat:z,clearcoatMap:rt,clearcoatNormalMap:Be,clearcoatRoughnessMap:ht,dispersion:k,iridescence:J,iridescenceMap:at,iridescenceThicknessMap:be,sheen:ae,sheenColorMap:De,sheenRoughnessMap:yt,specularMap:ft,specularColorMap:Ge,specularIntensityMap:Mt,transmission:pe,transmissionMap:j,thicknessMap:He,gradientMap:ke,opaque:y.transparent===!1&&y.blending===Xf&&y.alphaToCoverage===!1,alphaMap:Oe,alphaTest:ve,alphaHash:_e,combine:y.combine,mapUv:Nt&&v(y.map.channel),aoMapUv:we&&v(y.aoMap.channel),lightMapUv:B&&v(y.lightMap.channel),bumpMapUv:Ee&&v(y.bumpMap.channel),normalMapUv:Ae&&v(y.normalMap.channel),displacementMapUv:Ne&&v(y.displacementMap.channel),emissiveMapUv:Se&&v(y.emissiveMap.channel),metalnessMapUv:Fe&&v(y.metalnessMap.channel),roughnessMapUv:Me&&v(y.roughnessMap.channel),anisotropyMapUv:ee&&v(y.anisotropyMap.channel),clearcoatMapUv:rt&&v(y.clearcoatMap.channel),clearcoatNormalMapUv:Be&&v(y.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&v(y.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&v(y.iridescenceMap.channel),iridescenceThicknessMapUv:be&&v(y.iridescenceThicknessMap.channel),sheenColorMapUv:De&&v(y.sheenColorMap.channel),sheenRoughnessMapUv:yt&&v(y.sheenRoughnessMap.channel),specularMapUv:ft&&v(y.specularMap.channel),specularColorMapUv:Ge&&v(y.specularColorMap.channel),specularIntensityMapUv:Mt&&v(y.specularIntensityMap.channel),transmissionMapUv:j&&v(y.transmissionMap.channel),thicknessMapUv:He&&v(y.thicknessMap.channel),alphaMapUv:Oe&&v(y.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ae||$e),vertexColors:y.vertexColors,vertexAlphas:y.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:C.isPoints===!0&&!!Z.attributes.uv&&(Nt||Oe),fog:!!oe,useFog:y.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:y.flatShading===!0&&y.wireframe===!1,sizeAttenuation:y.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:ze,skinning:C.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:Ue,morphTextureStride:Qe,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:y.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:Tt,decodeVideoTexture:Nt&&y.map.isVideoTexture===!0&&Ln.getTransfer(y.map.colorSpace)===Jn,decodeVideoTextureEmissive:Se&&y.emissiveMap.isVideoTexture===!0&&Ln.getTransfer(y.emissiveMap.colorSpace)===Jn,premultipliedAlpha:y.premultipliedAlpha,doubleSided:y.side===Ic,flipSided:y.side===_s,useDepthPacking:y.depthPacking>=0,depthPacking:y.depthPacking||0,index0AttributeName:y.index0AttributeName,extensionClipCullDistance:qe&&y.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&y.extensions.multiDraw===!0||et)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:y.customProgramCacheKey()};return Fn.vertexUv1s=l.has(1),Fn.vertexUv2s=l.has(2),Fn.vertexUv3s=l.has(3),l.clear(),Fn}function b(y){let x=[];if(y.shaderID?x.push(y.shaderID):(x.push(y.customVertexShaderID),x.push(y.customFragmentShaderID)),y.defines!==void 0)for(let T in y.defines)x.push(T),x.push(y.defines[T]);return y.isRawShaderMaterial===!1&&(R(x,y),P(x,y),x.push(n.outputColorSpace)),x.push(y.customProgramCacheKey),x.join()}function R(y,x){y.push(x.precision),y.push(x.outputColorSpace),y.push(x.envMapMode),y.push(x.envMapCubeUVHeight),y.push(x.mapUv),y.push(x.alphaMapUv),y.push(x.lightMapUv),y.push(x.aoMapUv),y.push(x.bumpMapUv),y.push(x.normalMapUv),y.push(x.displacementMapUv),y.push(x.emissiveMapUv),y.push(x.metalnessMapUv),y.push(x.roughnessMapUv),y.push(x.anisotropyMapUv),y.push(x.clearcoatMapUv),y.push(x.clearcoatNormalMapUv),y.push(x.clearcoatRoughnessMapUv),y.push(x.iridescenceMapUv),y.push(x.iridescenceThicknessMapUv),y.push(x.sheenColorMapUv),y.push(x.sheenRoughnessMapUv),y.push(x.specularMapUv),y.push(x.specularColorMapUv),y.push(x.specularIntensityMapUv),y.push(x.transmissionMapUv),y.push(x.thicknessMapUv),y.push(x.combine),y.push(x.fogExp2),y.push(x.sizeAttenuation),y.push(x.morphTargetsCount),y.push(x.morphAttributeCount),y.push(x.numDirLights),y.push(x.numPointLights),y.push(x.numSpotLights),y.push(x.numSpotLightMaps),y.push(x.numHemiLights),y.push(x.numRectAreaLights),y.push(x.numDirLightShadows),y.push(x.numPointLightShadows),y.push(x.numSpotLightShadows),y.push(x.numSpotLightShadowsWithMaps),y.push(x.numLightProbes),y.push(x.shadowMapType),y.push(x.toneMapping),y.push(x.numClippingPlanes),y.push(x.numClipIntersection),y.push(x.depthPacking)}function P(y,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),x.gradientMap&&a.enable(22),y.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.reversedDepthBuffer&&a.enable(4),x.skinning&&a.enable(5),x.morphTargets&&a.enable(6),x.morphNormals&&a.enable(7),x.morphColors&&a.enable(8),x.premultipliedAlpha&&a.enable(9),x.shadowMapEnabled&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.decodeVideoTextureEmissive&&a.enable(20),x.alphaToCoverage&&a.enable(21),y.push(a.mask)}function N(y){let x=g[y.type],T;if(x){let M=Mc[x];T=lre.clone(M.uniforms)}else T=y.uniforms;return T}function U(y,x){let T;for(let M=0,C=u.length;M<C;M++){let oe=u[M];if(oe.cacheKey===x){T=oe,++T.usedTimes;break}}return T===void 0&&(T=new xFe(n,x,y,s),u.push(T)),T}function O(y){if(--y.usedTimes===0){let x=u.indexOf(y);u[x]=u[u.length-1],u.pop(),y.destroy()}}function S(y){c.remove(y)}function w(){c.dispose()}return{getParameters:_,getProgramCacheKey:b,getUniforms:N,acquireProgram:U,releaseProgram:O,releaseShaderCache:S,programs:u,dispose:w}}function SFe(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function TFe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Nre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kre(){let n=[],e=0,t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,h,f,g,v,_){let b=n[e];return b===void 0?(b={id:d.id,object:d,geometry:h,material:f,groupOrder:g,renderOrder:d.renderOrder,z:v,group:_},n[e]=b):(b.id=d.id,b.object=d,b.geometry=h,b.material=f,b.groupOrder=g,b.renderOrder=d.renderOrder,b.z=v,b.group=_),e++,b}function a(d,h,f,g,v,_){let b=o(d,h,f,g,v,_);f.transmission>0?i.push(b):f.transparent===!0?r.push(b):t.push(b)}function c(d,h,f,g,v,_){let b=o(d,h,f,g,v,_);f.transmission>0?i.unshift(b):f.transparent===!0?r.unshift(b):t.unshift(b)}function l(d,h){t.length>1&&t.sort(d||TFe),i.length>1&&i.sort(h||Nre),r.length>1&&r.sort(h||Nre)}function u(){for(let d=e,h=n.length;d<h;d++){let f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:c,finish:u,sort:l}}function IFe(){let n=new WeakMap;function e(i,r){let s=n.get(i),o;return s===void 0?(o=new kre,n.set(i,[o])):r>=s.length?(o=new kre,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function CFe(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new dn};break;case"SpotLight":t={position:new Q,direction:new Q,color:new dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new dn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new dn,groundColor:new dn};break;case"RectAreaLight":t={color:new dn,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return n[e.id]=t,t}}}function AFe(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var MFe=0;function DFe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function RFe(n){let e=new CFe,t=AFe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new Q);let r=new Q,s=new Si,o=new Si;function a(l){let u=0,d=0,h=0;for(let y=0;y<9;y++)i.probe[y].set(0,0,0);let f=0,g=0,v=0,_=0,b=0,R=0,P=0,N=0,U=0,O=0,S=0;l.sort(DFe);for(let y=0,x=l.length;y<x;y++){let T=l[y],M=T.color,C=T.intensity,oe=T.distance,Z=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)u+=M.r*C,d+=M.g*C,h+=M.b*C;else if(T.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(T.sh.coefficients[G],C);S++}else if(T.isDirectionalLight){let G=e.get(T);if(G.color.copy(T.color).multiplyScalar(T.intensity),T.castShadow){let K=T.shadow,W=t.get(T);W.shadowIntensity=K.intensity,W.shadowBias=K.bias,W.shadowNormalBias=K.normalBias,W.shadowRadius=K.radius,W.shadowMapSize=K.mapSize,i.directionalShadow[f]=W,i.directionalShadowMap[f]=Z,i.directionalShadowMatrix[f]=T.shadow.matrix,R++}i.directional[f]=G,f++}else if(T.isSpotLight){let G=e.get(T);G.position.setFromMatrixPosition(T.matrixWorld),G.color.copy(M).multiplyScalar(C),G.distance=oe,G.coneCos=Math.cos(T.angle),G.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),G.decay=T.decay,i.spot[v]=G;let K=T.shadow;if(T.map&&(i.spotLightMap[U]=T.map,U++,K.updateMatrices(T),T.castShadow&&O++),i.spotLightMatrix[v]=K.matrix,T.castShadow){let W=t.get(T);W.shadowIntensity=K.intensity,W.shadowBias=K.bias,W.shadowNormalBias=K.normalBias,W.shadowRadius=K.radius,W.shadowMapSize=K.mapSize,i.spotShadow[v]=W,i.spotShadowMap[v]=Z,N++}v++}else if(T.isRectAreaLight){let G=e.get(T);G.color.copy(M).multiplyScalar(C),G.halfWidth.set(T.width*.5,0,0),G.halfHeight.set(0,T.height*.5,0),i.rectArea[_]=G,_++}else if(T.isPointLight){let G=e.get(T);if(G.color.copy(T.color).multiplyScalar(T.intensity),G.distance=T.distance,G.decay=T.decay,T.castShadow){let K=T.shadow,W=t.get(T);W.shadowIntensity=K.intensity,W.shadowBias=K.bias,W.shadowNormalBias=K.normalBias,W.shadowRadius=K.radius,W.shadowMapSize=K.mapSize,W.shadowCameraNear=K.camera.near,W.shadowCameraFar=K.camera.far,i.pointShadow[g]=W,i.pointShadowMap[g]=Z,i.pointShadowMatrix[g]=T.shadow.matrix,P++}i.point[g]=G,g++}else if(T.isHemisphereLight){let G=e.get(T);G.skyColor.copy(T.color).multiplyScalar(C),G.groundColor.copy(T.groundColor).multiplyScalar(C),i.hemi[b]=G,b++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ke.LTC_FLOAT_1,i.rectAreaLTC2=Ke.LTC_FLOAT_2):(i.rectAreaLTC1=Ke.LTC_HALF_1,i.rectAreaLTC2=Ke.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let w=i.hash;(w.directionalLength!==f||w.pointLength!==g||w.spotLength!==v||w.rectAreaLength!==_||w.hemiLength!==b||w.numDirectionalShadows!==R||w.numPointShadows!==P||w.numSpotShadows!==N||w.numSpotMaps!==U||w.numLightProbes!==S)&&(i.directional.length=f,i.spot.length=v,i.rectArea.length=_,i.point.length=g,i.hemi.length=b,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=N+U-O,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=S,w.directionalLength=f,w.pointLength=g,w.spotLength=v,w.rectAreaLength=_,w.hemiLength=b,w.numDirectionalShadows=R,w.numPointShadows=P,w.numSpotShadows=N,w.numSpotMaps=U,w.numLightProbes=S,i.version=MFe++)}function c(l,u){let d=0,h=0,f=0,g=0,v=0,_=u.matrixWorldInverse;for(let b=0,R=l.length;b<R;b++){let P=l[b];if(P.isDirectionalLight){let N=i.directional[d];N.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(_),d++}else if(P.isSpotLight){let N=i.spot[f];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(_),N.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(_),f++}else if(P.isRectAreaLight){let N=i.rectArea[g];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(_),o.identity(),s.copy(P.matrixWorld),s.premultiply(_),o.extractRotation(s),N.halfWidth.set(P.width*.5,0,0),N.halfHeight.set(0,P.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),g++}else if(P.isPointLight){let N=i.point[h];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(_),h++}else if(P.isHemisphereLight){let N=i.hemi[v];N.direction.setFromMatrixPosition(P.matrixWorld),N.direction.transformDirection(_),v++}}}return{setup:a,setupView:c,state:i}}function Ore(n){let e=new RFe(n),t=[],i=[];function r(u){l.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function PFe(n){let e=new WeakMap;function t(r,s=0){let o=e.get(r),a;return o===void 0?(a=new Ore(n),e.set(r,[a])):s>=o.length?(a=new Ore(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var NFe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kFe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function OFe(n,e,t){let i=new M_,r=new Xe,s=new Xe,o=new Qn,a=new lD({depthPacking:Qie}),c=new uD,l={},u=t.maxTextureSize,d={[ru]:_s,[_s]:ru,[Ic]:Ic},h=new zo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:NFe,fragmentShader:kFe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let g=new mo;g.setAttribute("position",new fo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new go(g,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E4;let b=this.type;this.render=function(O,S,w){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||O.length===0)return;let y=n.getRenderTarget(),x=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),M=n.state;M.setBlending(Cc),M.buffers.depth.getReversed()===!0?M.buffers.color.setClear(0,0,0,0):M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);let C=b!==Tc&&this.type===Tc,oe=b===Tc&&this.type!==Tc;for(let Z=0,G=O.length;Z<G;Z++){let K=O[Z],W=K.shadow;if(W===void 0){Ht("WebGLShadowMap:",K,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);let ue=W.getFrameExtents();if(r.multiply(ue),s.copy(W.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ue.x),r.x=s.x*ue.x,W.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ue.y),r.y=s.y*ue.y,W.mapSize.y=s.y)),W.map===null||C===!0||oe===!0){let Ue=this.type!==Tc?{minFilter:Xs,magFilter:Xs}:{};W.map!==null&&W.map.dispose(),W.map=new Sc(r.x,r.y,Ue),W.map.texture.name=K.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();let ye=W.getViewportCount();for(let Ue=0;Ue<ye;Ue++){let Qe=W.getViewport(Ue);o.set(s.x*Qe.x,s.y*Qe.y,s.x*Qe.z,s.y*Qe.w),M.viewport(o),W.updateMatrices(K,Ue),i=W.getFrustum(),N(S,w,W.camera,K,this.type)}W.isPointLightShadow!==!0&&this.type===Tc&&R(W,w),W.needsUpdate=!1}b=this.type,_.needsUpdate=!1,n.setRenderTarget(y,x,T)};function R(O,S){let w=e.update(v);h.defines.VSM_SAMPLES!==O.blurSamples&&(h.defines.VSM_SAMPLES=O.blurSamples,f.defines.VSM_SAMPLES=O.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Sc(r.x,r.y)),h.uniforms.shadow_pass.value=O.map.texture,h.uniforms.resolution.value=O.mapSize,h.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(S,null,w,h,v,null),f.uniforms.shadow_pass.value=O.mapPass.texture,f.uniforms.resolution.value=O.mapSize,f.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(S,null,w,f,v,null)}function P(O,S,w,y){let x=null,T=w.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(T!==void 0)x=T;else if(x=w.isPointLight===!0?c:a,n.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0||S.alphaToCoverage===!0){let M=x.uuid,C=S.uuid,oe=l[M];oe===void 0&&(oe={},l[M]=oe);let Z=oe[C];Z===void 0&&(Z=x.clone(),oe[C]=Z,S.addEventListener("dispose",U)),x=Z}if(x.visible=S.visible,x.wireframe=S.wireframe,y===Tc?x.side=S.shadowSide!==null?S.shadowSide:S.side:x.side=S.shadowSide!==null?S.shadowSide:d[S.side],x.alphaMap=S.alphaMap,x.alphaTest=S.alphaToCoverage===!0?.5:S.alphaTest,x.map=S.map,x.clipShadows=S.clipShadows,x.clippingPlanes=S.clippingPlanes,x.clipIntersection=S.clipIntersection,x.displacementMap=S.displacementMap,x.displacementScale=S.displacementScale,x.displacementBias=S.displacementBias,x.wireframeLinewidth=S.wireframeLinewidth,x.linewidth=S.linewidth,w.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let M=n.properties.get(x);M.light=w}return x}function N(O,S,w,y,x){if(O.visible===!1)return;if(O.layers.test(S.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&x===Tc)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,O.matrixWorld);let C=e.update(O),oe=O.material;if(Array.isArray(oe)){let Z=C.groups;for(let G=0,K=Z.length;G<K;G++){let W=Z[G],ue=oe[W.materialIndex];if(ue&&ue.visible){let ye=P(O,ue,y,x);O.onBeforeShadow(n,O,S,w,C,ye,W),n.renderBufferDirect(w,null,C,ye,O,W),O.onAfterShadow(n,O,S,w,C,ye,W)}}}else if(oe.visible){let Z=P(O,oe,y,x);O.onBeforeShadow(n,O,S,w,C,Z,null),n.renderBufferDirect(w,null,C,Z,O,null),O.onAfterShadow(n,O,S,w,C,Z,null)}}let M=O.children;for(let C=0,oe=M.length;C<oe;C++)N(M[C],S,w,y,x)}function U(O){O.target.removeEventListener("dispose",U);for(let w in l){let y=l[w],x=O.target.uuid;x in y&&(y[x].dispose(),delete y[x])}}}var LFe={[bD]:xD,[wD]:TD,[ED]:ID,[Yf]:SD,[xD]:bD,[TD]:wD,[ID]:ED,[SD]:Yf};function FFe(n,e){function t(){let j=!1,He=new Qn,ke=null,Oe=new Qn(0,0,0,0);return{setMask:function(ve){ke!==ve&&!j&&(n.colorMask(ve,ve,ve,ve),ke=ve)},setLocked:function(ve){j=ve},setClear:function(ve,_e,qe,Tt,Fn){Fn===!0&&(ve*=Tt,_e*=Tt,qe*=Tt),He.set(ve,_e,qe,Tt),Oe.equals(He)===!1&&(n.clearColor(ve,_e,qe,Tt),Oe.copy(He))},reset:function(){j=!1,ke=null,Oe.set(-1,0,0,0)}}}function i(){let j=!1,He=!1,ke=null,Oe=null,ve=null;return{setReversed:function(_e){if(He!==_e){let qe=e.get("EXT_clip_control");_e?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),He=_e;let Tt=ve;ve=null,this.setClear(Tt)}},getReversed:function(){return He},setTest:function(_e){_e?he(n.DEPTH_TEST):ze(n.DEPTH_TEST)},setMask:function(_e){ke!==_e&&!j&&(n.depthMask(_e),ke=_e)},setFunc:function(_e){if(He&&(_e=LFe[_e]),Oe!==_e){switch(_e){case bD:n.depthFunc(n.NEVER);break;case xD:n.depthFunc(n.ALWAYS);break;case wD:n.depthFunc(n.LESS);break;case Yf:n.depthFunc(n.LEQUAL);break;case ED:n.depthFunc(n.EQUAL);break;case SD:n.depthFunc(n.GEQUAL);break;case TD:n.depthFunc(n.GREATER);break;case ID:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=_e}},setLocked:function(_e){j=_e},setClear:function(_e){ve!==_e&&(He&&(_e=1-_e),n.clearDepth(_e),ve=_e)},reset:function(){j=!1,ke=null,Oe=null,ve=null,He=!1}}}function r(){let j=!1,He=null,ke=null,Oe=null,ve=null,_e=null,qe=null,Tt=null,Fn=null;return{setTest:function(Pn){j||(Pn?he(n.STENCIL_TEST):ze(n.STENCIL_TEST))},setMask:function(Pn){He!==Pn&&!j&&(n.stencilMask(Pn),He=Pn)},setFunc:function(Pn,Ti,Br){(ke!==Pn||Oe!==Ti||ve!==Br)&&(n.stencilFunc(Pn,Ti,Br),ke=Pn,Oe=Ti,ve=Br)},setOp:function(Pn,Ti,Br){(_e!==Pn||qe!==Ti||Tt!==Br)&&(n.stencilOp(Pn,Ti,Br),_e=Pn,qe=Ti,Tt=Br)},setLocked:function(Pn){j=Pn},setClear:function(Pn){Fn!==Pn&&(n.clearStencil(Pn),Fn=Pn)},reset:function(){j=!1,He=null,ke=null,Oe=null,ve=null,_e=null,qe=null,Tt=null,Fn=null}}}let s=new t,o=new i,a=new r,c=new WeakMap,l=new WeakMap,u={},d={},h=new WeakMap,f=[],g=null,v=!1,_=null,b=null,R=null,P=null,N=null,U=null,O=null,S=new dn(0,0,0),w=0,y=!1,x=null,T=null,M=null,C=null,oe=null,Z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),G=!1,K=0,W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(W)[1]),G=K>=1):W.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),G=K>=2);let ue=null,ye={},Ue=n.getParameter(n.SCISSOR_BOX),Qe=n.getParameter(n.VIEWPORT),Ze=new Qn().fromArray(Ue),tt=new Qn().fromArray(Qe);function kt(j,He,ke,Oe){let ve=new Uint8Array(4),_e=n.createTexture();n.bindTexture(j,_e),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qe=0;qe<ke;qe++)j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY?n.texImage3D(He,0,n.RGBA,1,1,Oe,0,n.RGBA,n.UNSIGNED_BYTE,ve):n.texImage2D(He+qe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ve);return _e}let de={};de[n.TEXTURE_2D]=kt(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=kt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[n.TEXTURE_2D_ARRAY]=kt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=kt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),he(n.DEPTH_TEST),o.setFunc(Yf),Ee(!1),Ae(w4),he(n.CULL_FACE),we(Cc);function he(j){u[j]!==!0&&(n.enable(j),u[j]=!0)}function ze(j){u[j]!==!1&&(n.disable(j),u[j]=!1)}function nt(j,He){return d[j]!==He?(n.bindFramebuffer(j,He),d[j]=He,j===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=He),j===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=He),!0):!1}function et(j,He){let ke=f,Oe=!1;if(j){ke=h.get(He),ke===void 0&&(ke=[],h.set(He,ke));let ve=j.textures;if(ke.length!==ve.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let _e=0,qe=ve.length;_e<qe;_e++)ke[_e]=n.COLOR_ATTACHMENT0+_e;ke.length=ve.length,Oe=!0}}else ke[0]!==n.BACK&&(ke[0]=n.BACK,Oe=!0);Oe&&n.drawBuffers(ke)}function Nt(j){return g!==j?(n.useProgram(j),g=j,!0):!1}let Sn={[Gd]:n.FUNC_ADD,[Eie]:n.FUNC_SUBTRACT,[Sie]:n.FUNC_REVERSE_SUBTRACT};Sn[Tie]=n.MIN,Sn[Iie]=n.MAX;let Et={[Cie]:n.ZERO,[Aie]:n.ONE,[Mie]:n.SRC_COLOR,[WM]:n.SRC_ALPHA,[Oie]:n.SRC_ALPHA_SATURATE,[Nie]:n.DST_COLOR,[Rie]:n.DST_ALPHA,[Die]:n.ONE_MINUS_SRC_COLOR,[$M]:n.ONE_MINUS_SRC_ALPHA,[kie]:n.ONE_MINUS_DST_COLOR,[Pie]:n.ONE_MINUS_DST_ALPHA,[Lie]:n.CONSTANT_COLOR,[Fie]:n.ONE_MINUS_CONSTANT_COLOR,[Vie]:n.CONSTANT_ALPHA,[Uie]:n.ONE_MINUS_CONSTANT_ALPHA};function we(j,He,ke,Oe,ve,_e,qe,Tt,Fn,Pn){if(j===Cc){v===!0&&(ze(n.BLEND),v=!1);return}if(v===!1&&(he(n.BLEND),v=!0),j!==wie){if(j!==_||Pn!==y){if((b!==Gd||N!==Gd)&&(n.blendEquation(n.FUNC_ADD),b=Gd,N=Gd),Pn)switch(j){case Xf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S4:n.blendFunc(n.ONE,n.ONE);break;case T4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case I4:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:un("WebGLState: Invalid blending: ",j);break}else switch(j){case Xf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S4:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case T4:un("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case I4:un("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:un("WebGLState: Invalid blending: ",j);break}R=null,P=null,U=null,O=null,S.set(0,0,0),w=0,_=j,y=Pn}return}ve=ve||He,_e=_e||ke,qe=qe||Oe,(He!==b||ve!==N)&&(n.blendEquationSeparate(Sn[He],Sn[ve]),b=He,N=ve),(ke!==R||Oe!==P||_e!==U||qe!==O)&&(n.blendFuncSeparate(Et[ke],Et[Oe],Et[_e],Et[qe]),R=ke,P=Oe,U=_e,O=qe),(Tt.equals(S)===!1||Fn!==w)&&(n.blendColor(Tt.r,Tt.g,Tt.b,Fn),S.copy(Tt),w=Fn),_=j,y=!1}function B(j,He){j.side===Ic?ze(n.CULL_FACE):he(n.CULL_FACE);let ke=j.side===_s;He&&(ke=!ke),Ee(ke),j.blending===Xf&&j.transparent===!1?we(Cc):we(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),o.setFunc(j.depthFunc),o.setTest(j.depthTest),o.setMask(j.depthWrite),s.setMask(j.colorWrite);let Oe=j.stencilWrite;a.setTest(Oe),Oe&&(a.setMask(j.stencilWriteMask),a.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),a.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Se(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?he(n.SAMPLE_ALPHA_TO_COVERAGE):ze(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ee(j){x!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),x=j)}function Ae(j){j!==vie?(he(n.CULL_FACE),j!==T&&(j===w4?n.cullFace(n.BACK):j===bie?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ze(n.CULL_FACE),T=j}function Ne(j){j!==M&&(G&&n.lineWidth(j),M=j)}function Se(j,He,ke){j?(he(n.POLYGON_OFFSET_FILL),(C!==He||oe!==ke)&&(n.polygonOffset(He,ke),C=He,oe=ke)):ze(n.POLYGON_OFFSET_FILL)}function Fe(j){j?he(n.SCISSOR_TEST):ze(n.SCISSOR_TEST)}function Me(j){j===void 0&&(j=n.TEXTURE0+Z-1),ue!==j&&(n.activeTexture(j),ue=j)}function $e(j,He,ke){ke===void 0&&(ue===null?ke=n.TEXTURE0+Z-1:ke=ue);let Oe=ye[ke];Oe===void 0&&(Oe={type:void 0,texture:void 0},ye[ke]=Oe),(Oe.type!==j||Oe.texture!==He)&&(ue!==ke&&(n.activeTexture(ke),ue=ke),n.bindTexture(j,He||de[j]),Oe.type=j,Oe.texture=He)}function z(){let j=ye[ue];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function k(){try{n.compressedTexImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function J(){try{n.compressedTexImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function ae(){try{n.texSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function pe(){try{n.texSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function ee(){try{n.compressedTexSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function rt(){try{n.compressedTexSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function Be(){try{n.texStorage2D(...arguments)}catch(j){j("WebGLState:",j)}}function ht(){try{n.texStorage3D(...arguments)}catch(j){j("WebGLState:",j)}}function at(){try{n.texImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function be(){try{n.texImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function De(j){Ze.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),Ze.copy(j))}function yt(j){tt.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),tt.copy(j))}function ft(j,He){let ke=l.get(He);ke===void 0&&(ke=new WeakMap,l.set(He,ke));let Oe=ke.get(j);Oe===void 0&&(Oe=n.getUniformBlockIndex(He,j.name),ke.set(j,Oe))}function Ge(j,He){let Oe=l.get(He).get(j);c.get(He)!==Oe&&(n.uniformBlockBinding(He,Oe,j.__bindingPointIndex),c.set(He,Oe))}function Mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ue=null,ye={},d={},h=new WeakMap,f=[],g=null,v=!1,_=null,b=null,R=null,P=null,N=null,U=null,O=null,S=new dn(0,0,0),w=0,y=!1,x=null,T=null,M=null,C=null,oe=null,Ze.set(0,0,n.canvas.width,n.canvas.height),tt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:he,disable:ze,bindFramebuffer:nt,drawBuffers:et,useProgram:Nt,setBlending:we,setMaterial:B,setFlipSided:Ee,setCullFace:Ae,setLineWidth:Ne,setPolygonOffset:Se,setScissorTest:Fe,activeTexture:Me,bindTexture:$e,unbindTexture:z,compressedTexImage2D:k,compressedTexImage3D:J,texImage2D:at,texImage3D:be,updateUBOMapping:ft,uniformBlockBinding:Ge,texStorage2D:Be,texStorage3D:ht,texSubImage2D:ae,texSubImage3D:pe,compressedTexSubImage2D:ee,compressedTexSubImage3D:rt,scissor:De,viewport:yt,reset:Mt}}function VFe(n,e,t,i,r,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Xe,u=new WeakMap,d,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(z,k){return f?new OffscreenCanvas(z,k):Z0("canvas")}function v(z,k,J){let ae=1,pe=$e(z);if((pe.width>J||pe.height>J)&&(ae=J/Math.max(pe.width,pe.height)),ae<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){let ee=Math.floor(ae*pe.width),rt=Math.floor(ae*pe.height);d===void 0&&(d=g(ee,rt));let Be=k?g(ee,rt):d;return Be.width=ee,Be.height=rt,Be.getContext("2d").drawImage(z,0,0,ee,rt),Ht("WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+ee+"x"+rt+")."),Be}else return"data"in z&&Ht("WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),z;return z}function _(z){return z.generateMipmaps}function b(z){n.generateMipmap(z)}function R(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function P(z,k,J,ae,pe=!1){if(z!==null){if(n[z]!==void 0)return n[z];Ht("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let ee=k;if(k===n.RED&&(J===n.FLOAT&&(ee=n.R32F),J===n.HALF_FLOAT&&(ee=n.R16F),J===n.UNSIGNED_BYTE&&(ee=n.R8)),k===n.RED_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.R8UI),J===n.UNSIGNED_SHORT&&(ee=n.R16UI),J===n.UNSIGNED_INT&&(ee=n.R32UI),J===n.BYTE&&(ee=n.R8I),J===n.SHORT&&(ee=n.R16I),J===n.INT&&(ee=n.R32I)),k===n.RG&&(J===n.FLOAT&&(ee=n.RG32F),J===n.HALF_FLOAT&&(ee=n.RG16F),J===n.UNSIGNED_BYTE&&(ee=n.RG8)),k===n.RG_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.RG8UI),J===n.UNSIGNED_SHORT&&(ee=n.RG16UI),J===n.UNSIGNED_INT&&(ee=n.RG32UI),J===n.BYTE&&(ee=n.RG8I),J===n.SHORT&&(ee=n.RG16I),J===n.INT&&(ee=n.RG32I)),k===n.RGB_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.RGB8UI),J===n.UNSIGNED_SHORT&&(ee=n.RGB16UI),J===n.UNSIGNED_INT&&(ee=n.RGB32UI),J===n.BYTE&&(ee=n.RGB8I),J===n.SHORT&&(ee=n.RGB16I),J===n.INT&&(ee=n.RGB32I)),k===n.RGBA_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.RGBA8UI),J===n.UNSIGNED_SHORT&&(ee=n.RGBA16UI),J===n.UNSIGNED_INT&&(ee=n.RGBA32UI),J===n.BYTE&&(ee=n.RGBA8I),J===n.SHORT&&(ee=n.RGBA16I),J===n.INT&&(ee=n.RGBA32I)),k===n.RGB&&(J===n.UNSIGNED_INT_5_9_9_9_REV&&(ee=n.RGB9_E5),J===n.UNSIGNED_INT_10F_11F_11F_REV&&(ee=n.R11F_G11F_B10F)),k===n.RGBA){let rt=pe?Q0:Ln.getTransfer(ae);J===n.FLOAT&&(ee=n.RGBA32F),J===n.HALF_FLOAT&&(ee=n.RGBA16F),J===n.UNSIGNED_BYTE&&(ee=rt===Jn?n.SRGB8_ALPHA8:n.RGBA8),J===n.UNSIGNED_SHORT_4_4_4_4&&(ee=n.RGBA4),J===n.UNSIGNED_SHORT_5_5_5_1&&(ee=n.RGB5_A1)}return(ee===n.R16F||ee===n.R32F||ee===n.RG16F||ee===n.RG32F||ee===n.RGBA16F||ee===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ee}function N(z,k){let J;return z?k===null||k===Yd||k===O_?J=n.DEPTH24_STENCIL8:k===Ac?J=n.DEPTH32F_STENCIL8:k===k_&&(J=n.DEPTH24_STENCIL8,Ht("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Yd||k===O_?J=n.DEPTH_COMPONENT24:k===Ac?J=n.DEPTH_COMPONENT32F:k===k_&&(J=n.DEPTH_COMPONENT16),J}function U(z,k){return _(z)===!0||z.isFramebufferTexture&&z.minFilter!==Xs&&z.minFilter!==po?Math.log2(Math.max(k.width,k.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?k.mipmaps.length:1}function O(z){let k=z.target;k.removeEventListener("dispose",O),w(k),k.isVideoTexture&&u.delete(k)}function S(z){let k=z.target;k.removeEventListener("dispose",S),x(k)}function w(z){let k=i.get(z);if(k.__webglInit===void 0)return;let J=z.source,ae=h.get(J);if(ae){let pe=ae[k.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&y(z),Object.keys(ae).length===0&&h.delete(J)}i.remove(z)}function y(z){let k=i.get(z);n.deleteTexture(k.__webglTexture);let J=z.source,ae=h.get(J);delete ae[k.__cacheKey],o.memory.textures--}function x(z){let k=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let ae=0;ae<6;ae++){if(Array.isArray(k.__webglFramebuffer[ae]))for(let pe=0;pe<k.__webglFramebuffer[ae].length;pe++)n.deleteFramebuffer(k.__webglFramebuffer[ae][pe]);else n.deleteFramebuffer(k.__webglFramebuffer[ae]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[ae])}else{if(Array.isArray(k.__webglFramebuffer))for(let ae=0;ae<k.__webglFramebuffer.length;ae++)n.deleteFramebuffer(k.__webglFramebuffer[ae]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let ae=0;ae<k.__webglColorRenderbuffer.length;ae++)k.__webglColorRenderbuffer[ae]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[ae]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}let J=z.textures;for(let ae=0,pe=J.length;ae<pe;ae++){let ee=i.get(J[ae]);ee.__webglTexture&&(n.deleteTexture(ee.__webglTexture),o.memory.textures--),i.remove(J[ae])}i.remove(z)}let T=0;function M(){T=0}function C(){let z=T;return z>=r.maxTextures&&Ht("WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),T+=1,z}function oe(z){let k=[];return k.push(z.wrapS),k.push(z.wrapT),k.push(z.wrapR||0),k.push(z.magFilter),k.push(z.minFilter),k.push(z.anisotropy),k.push(z.internalFormat),k.push(z.format),k.push(z.type),k.push(z.generateMipmaps),k.push(z.premultiplyAlpha),k.push(z.flipY),k.push(z.unpackAlignment),k.push(z.colorSpace),k.join()}function Z(z,k){let J=i.get(z);if(z.isVideoTexture&&Fe(z),z.isRenderTargetTexture===!1&&z.isExternalTexture!==!0&&z.version>0&&J.__version!==z.version){let ae=z.image;if(ae===null)Ht("WebGLRenderer: Texture marked for update but no image data found.");else if(ae.complete===!1)Ht("WebGLRenderer: Texture marked for update but image is incomplete");else{de(J,z,k);return}}else z.isExternalTexture&&(J.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,J.__webglTexture,n.TEXTURE0+k)}function G(z,k){let J=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&J.__version!==z.version){de(J,z,k);return}else z.isExternalTexture&&(J.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,J.__webglTexture,n.TEXTURE0+k)}function K(z,k){let J=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&J.__version!==z.version){de(J,z,k);return}t.bindTexture(n.TEXTURE_3D,J.__webglTexture,n.TEXTURE0+k)}function W(z,k){let J=i.get(z);if(z.version>0&&J.__version!==z.version){he(J,z,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+k)}let ue={[qM]:n.REPEAT,[Ec]:n.CLAMP_TO_EDGE,[KM]:n.MIRRORED_REPEAT},ye={[Xs]:n.NEAREST,[Xie]:n.NEAREST_MIPMAP_NEAREST,[Cx]:n.NEAREST_MIPMAP_LINEAR,[po]:n.LINEAR,[DD]:n.LINEAR_MIPMAP_NEAREST,[Xd]:n.LINEAR_MIPMAP_LINEAR},Ue={[Zie]:n.NEVER,[sre]:n.ALWAYS,[ere]:n.LESS,[O4]:n.LEQUAL,[tre]:n.EQUAL,[rre]:n.GEQUAL,[nre]:n.GREATER,[ire]:n.NOTEQUAL};function Qe(z,k){if(k.type===Ac&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===po||k.magFilter===DD||k.magFilter===Cx||k.magFilter===Xd||k.minFilter===po||k.minFilter===DD||k.minFilter===Cx||k.minFilter===Xd)&&Ht("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,ue[k.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,ue[k.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,ue[k.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,ye[k.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,ye[k.minFilter]),k.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,Ue[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Xs||k.minFilter!==Cx&&k.minFilter!==Xd||k.type===Ac&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){let J=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function Ze(z,k){let J=!1;z.__webglInit===void 0&&(z.__webglInit=!0,k.addEventListener("dispose",O));let ae=k.source,pe=h.get(ae);pe===void 0&&(pe={},h.set(ae,pe));let ee=oe(k);if(ee!==z.__cacheKey){pe[ee]===void 0&&(pe[ee]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,J=!0),pe[ee].usedTimes++;let rt=pe[z.__cacheKey];rt!==void 0&&(pe[z.__cacheKey].usedTimes--,rt.usedTimes===0&&y(k)),z.__cacheKey=ee,z.__webglTexture=pe[ee].texture}return J}function tt(z,k,J){return Math.floor(Math.floor(z/J)/k)}function kt(z,k,J,ae){let ee=z.updateRanges;if(ee.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,k.width,k.height,J,ae,k.data);else{ee.sort((be,De)=>be.start-De.start);let rt=0;for(let be=1;be<ee.length;be++){let De=ee[rt],yt=ee[be],ft=De.start+De.count,Ge=tt(yt.start,k.width,4),Mt=tt(De.start,k.width,4);yt.start<=ft+1&&Ge===Mt&&tt(yt.start+yt.count-1,k.width,4)===Ge?De.count=Math.max(De.count,yt.start+yt.count-De.start):(++rt,ee[rt]=yt)}ee.length=rt+1;let Be=n.getParameter(n.UNPACK_ROW_LENGTH),ht=n.getParameter(n.UNPACK_SKIP_PIXELS),at=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,k.width);for(let be=0,De=ee.length;be<De;be++){let yt=ee[be],ft=Math.floor(yt.start/4),Ge=Math.ceil(yt.count/4),Mt=ft%k.width,j=Math.floor(ft/k.width),He=Ge,ke=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Mt),n.pixelStorei(n.UNPACK_SKIP_ROWS,j),t.texSubImage2D(n.TEXTURE_2D,0,Mt,j,He,ke,J,ae,k.data)}z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Be),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ht),n.pixelStorei(n.UNPACK_SKIP_ROWS,at)}}function de(z,k,J){let ae=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ae=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ae=n.TEXTURE_3D);let pe=Ze(z,k),ee=k.source;t.bindTexture(ae,z.__webglTexture,n.TEXTURE0+J);let rt=i.get(ee);if(ee.version!==rt.__version||pe===!0){t.activeTexture(n.TEXTURE0+J);let Be=Ln.getPrimaries(Ln.workingColorSpace),ht=k.colorSpace===lu?null:Ln.getPrimaries(k.colorSpace),at=k.colorSpace===lu||Be===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,at);let be=v(k.image,!1,r.maxTextureSize);be=Me(k,be);let De=s.convert(k.format,k.colorSpace),yt=s.convert(k.type),ft=P(k.internalFormat,De,yt,k.colorSpace,k.isVideoTexture);Qe(ae,k);let Ge,Mt=k.mipmaps,j=k.isVideoTexture!==!0,He=rt.__version===void 0||pe===!0,ke=ee.dataReady,Oe=U(k,be);if(k.isDepthTexture)ft=N(k.format===L_,k.type),He&&(j?t.texStorage2D(n.TEXTURE_2D,1,ft,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,ft,be.width,be.height,0,De,yt,null));else if(k.isDataTexture)if(Mt.length>0){j&&He&&t.texStorage2D(n.TEXTURE_2D,Oe,ft,Mt[0].width,Mt[0].height);for(let ve=0,_e=Mt.length;ve<_e;ve++)Ge=Mt[ve],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ve,0,0,Ge.width,Ge.height,De,yt,Ge.data):t.texImage2D(n.TEXTURE_2D,ve,ft,Ge.width,Ge.height,0,De,yt,Ge.data);k.generateMipmaps=!1}else j?(He&&t.texStorage2D(n.TEXTURE_2D,Oe,ft,be.width,be.height),ke&&kt(k,be,De,yt)):t.texImage2D(n.TEXTURE_2D,0,ft,be.width,be.height,0,De,yt,be.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){j&&He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,ft,Mt[0].width,Mt[0].height,be.depth);for(let ve=0,_e=Mt.length;ve<_e;ve++)if(Ge=Mt[ve],k.format!==Ho)if(De!==null)if(j){if(ke)if(k.layerUpdates.size>0){let qe=j4(Ge.width,Ge.height,k.format,k.type);for(let Tt of k.layerUpdates){let Fn=Ge.data.subarray(Tt*qe/Ge.data.BYTES_PER_ELEMENT,(Tt+1)*qe/Ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ve,0,0,Tt,Ge.width,Ge.height,1,De,Fn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ve,0,0,0,Ge.width,Ge.height,be.depth,De,Ge.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ve,ft,Ge.width,Ge.height,be.depth,0,Ge.data,0,0);else Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else j?ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ve,0,0,0,Ge.width,Ge.height,be.depth,De,yt,Ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ve,ft,Ge.width,Ge.height,be.depth,0,De,yt,Ge.data)}else{j&&He&&t.texStorage2D(n.TEXTURE_2D,Oe,ft,Mt[0].width,Mt[0].height);for(let ve=0,_e=Mt.length;ve<_e;ve++)Ge=Mt[ve],k.format!==Ho?De!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,ve,0,0,Ge.width,Ge.height,De,Ge.data):t.compressedTexImage2D(n.TEXTURE_2D,ve,ft,Ge.width,Ge.height,0,Ge.data):Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):j?ke&&t.texSubImage2D(n.TEXTURE_2D,ve,0,0,Ge.width,Ge.height,De,yt,Ge.data):t.texImage2D(n.TEXTURE_2D,ve,ft,Ge.width,Ge.height,0,De,yt,Ge.data)}else if(k.isDataArrayTexture)if(j){if(He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,ft,be.width,be.height,be.depth),ke)if(k.layerUpdates.size>0){let ve=j4(be.width,be.height,k.format,k.type);for(let _e of k.layerUpdates){let qe=be.data.subarray(_e*ve/be.data.BYTES_PER_ELEMENT,(_e+1)*ve/be.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,_e,be.width,be.height,1,De,yt,qe)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,De,yt,be.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ft,be.width,be.height,be.depth,0,De,yt,be.data);else if(k.isData3DTexture)j?(He&&t.texStorage3D(n.TEXTURE_3D,Oe,ft,be.width,be.height,be.depth),ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,De,yt,be.data)):t.texImage3D(n.TEXTURE_3D,0,ft,be.width,be.height,be.depth,0,De,yt,be.data);else if(k.isFramebufferTexture){if(He)if(j)t.texStorage2D(n.TEXTURE_2D,Oe,ft,be.width,be.height);else{let ve=be.width,_e=be.height;for(let qe=0;qe<Oe;qe++)t.texImage2D(n.TEXTURE_2D,qe,ft,ve,_e,0,De,yt,null),ve>>=1,_e>>=1}}else if(Mt.length>0){if(j&&He){let ve=$e(Mt[0]);t.texStorage2D(n.TEXTURE_2D,Oe,ft,ve.width,ve.height)}for(let ve=0,_e=Mt.length;ve<_e;ve++)Ge=Mt[ve],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ve,0,0,De,yt,Ge):t.texImage2D(n.TEXTURE_2D,ve,ft,De,yt,Ge);k.generateMipmaps=!1}else if(j){if(He){let ve=$e(be);t.texStorage2D(n.TEXTURE_2D,Oe,ft,ve.width,ve.height)}ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,De,yt,be)}else t.texImage2D(n.TEXTURE_2D,0,ft,De,yt,be);_(k)&&b(ae),rt.__version=ee.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function he(z,k,J){if(k.image.length!==6)return;let ae=Ze(z,k),pe=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+J);let ee=i.get(pe);if(pe.version!==ee.__version||ae===!0){t.activeTexture(n.TEXTURE0+J);let rt=Ln.getPrimaries(Ln.workingColorSpace),Be=k.colorSpace===lu?null:Ln.getPrimaries(k.colorSpace),ht=k.colorSpace===lu||rt===Be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);let at=k.isCompressedTexture||k.image[0].isCompressedTexture,be=k.image[0]&&k.image[0].isDataTexture,De=[];for(let _e=0;_e<6;_e++)!at&&!be?De[_e]=v(k.image[_e],!0,r.maxCubemapSize):De[_e]=be?k.image[_e].image:k.image[_e],De[_e]=Me(k,De[_e]);let yt=De[0],ft=s.convert(k.format,k.colorSpace),Ge=s.convert(k.type),Mt=P(k.internalFormat,ft,Ge,k.colorSpace),j=k.isVideoTexture!==!0,He=ee.__version===void 0||ae===!0,ke=pe.dataReady,Oe=U(k,yt);Qe(n.TEXTURE_CUBE_MAP,k);let ve;if(at){j&&He&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Mt,yt.width,yt.height);for(let _e=0;_e<6;_e++){ve=De[_e].mipmaps;for(let qe=0;qe<ve.length;qe++){let Tt=ve[qe];k.format!==Ho?ft!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe,0,0,Tt.width,Tt.height,ft,Tt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe,Mt,Tt.width,Tt.height,0,Tt.data):Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe,0,0,Tt.width,Tt.height,ft,Ge,Tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe,Mt,Tt.width,Tt.height,0,ft,Ge,Tt.data)}}}else{if(ve=k.mipmaps,j&&He){ve.length>0&&Oe++;let _e=$e(De[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Mt,_e.width,_e.height)}for(let _e=0;_e<6;_e++)if(be){j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,De[_e].width,De[_e].height,ft,Ge,De[_e].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,Mt,De[_e].width,De[_e].height,0,ft,Ge,De[_e].data);for(let qe=0;qe<ve.length;qe++){let Fn=ve[qe].image[_e].image;j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe+1,0,0,Fn.width,Fn.height,ft,Ge,Fn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe+1,Mt,Fn.width,Fn.height,0,ft,Ge,Fn.data)}}else{j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,ft,Ge,De[_e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,Mt,ft,Ge,De[_e]);for(let qe=0;qe<ve.length;qe++){let Tt=ve[qe];j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe+1,0,0,ft,Ge,Tt.image[_e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,qe+1,Mt,ft,Ge,Tt.image[_e])}}}_(k)&&b(n.TEXTURE_CUBE_MAP),ee.__version=pe.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function ze(z,k,J,ae,pe,ee){let rt=s.convert(J.format,J.colorSpace),Be=s.convert(J.type),ht=P(J.internalFormat,rt,Be,J.colorSpace),at=i.get(k),be=i.get(J);if(be.__renderTarget=k,!at.__hasExternalTextures){let De=Math.max(1,k.width>>ee),yt=Math.max(1,k.height>>ee);pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?t.texImage3D(pe,ee,ht,De,yt,k.depth,0,rt,Be,null):t.texImage2D(pe,ee,ht,De,yt,0,rt,Be,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),Se(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ae,pe,be.__webglTexture,0,Ne(k)):(pe===n.TEXTURE_2D||pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ae,pe,be.__webglTexture,ee),t.bindFramebuffer(n.FRAMEBUFFER,null)}function nt(z,k,J){if(n.bindRenderbuffer(n.RENDERBUFFER,z),k.depthBuffer){let ae=k.depthTexture,pe=ae&&ae.isDepthTexture?ae.type:null,ee=N(k.stencilBuffer,pe),rt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=Ne(k);Se(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Be,ee,k.width,k.height):J?n.renderbufferStorageMultisample(n.RENDERBUFFER,Be,ee,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,ee,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,rt,n.RENDERBUFFER,z)}else{let ae=k.textures;for(let pe=0;pe<ae.length;pe++){let ee=ae[pe],rt=s.convert(ee.format,ee.colorSpace),Be=s.convert(ee.type),ht=P(ee.internalFormat,rt,Be,ee.colorSpace),at=Ne(k);J&&Se(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,at,ht,k.width,k.height):Se(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,at,ht,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,ht,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(z,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ae=i.get(k.depthTexture);ae.__renderTarget=k,(!ae.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Z(k.depthTexture,0);let pe=ae.__webglTexture,ee=Ne(k);if(k.depthTexture.format===E_)Se(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0,ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0);else if(k.depthTexture.format===L_)Se(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0,ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0);else throw new Error("Unknown depthTexture format")}function Nt(z){let k=i.get(z),J=z.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==z.depthTexture){let ae=z.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),ae){let pe=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,ae.removeEventListener("dispose",pe)};ae.addEventListener("dispose",pe),k.__depthDisposeCallback=pe}k.__boundDepthTexture=ae}if(z.depthTexture&&!k.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");let ae=z.texture.mipmaps;ae&&ae.length>0?et(k.__webglFramebuffer[0],z):et(k.__webglFramebuffer,z)}else if(J){k.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[ae]),k.__webglDepthbuffer[ae]===void 0)k.__webglDepthbuffer[ae]=n.createRenderbuffer(),nt(k.__webglDepthbuffer[ae],z,!1);else{let pe=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ee=k.__webglDepthbuffer[ae];n.bindRenderbuffer(n.RENDERBUFFER,ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,ee)}}else{let ae=z.texture.mipmaps;if(ae&&ae.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),nt(k.__webglDepthbuffer,z,!1);else{let pe=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ee=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,ee)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Sn(z,k,J){let ae=i.get(z);k!==void 0&&ze(ae.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),J!==void 0&&Nt(z)}function Et(z){let k=z.texture,J=i.get(z),ae=i.get(k);z.addEventListener("dispose",S);let pe=z.textures,ee=z.isWebGLCubeRenderTarget===!0,rt=pe.length>1;if(rt||(ae.__webglTexture===void 0&&(ae.__webglTexture=n.createTexture()),ae.__version=k.version,o.memory.textures++),ee){J.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(k.mipmaps&&k.mipmaps.length>0){J.__webglFramebuffer[Be]=[];for(let ht=0;ht<k.mipmaps.length;ht++)J.__webglFramebuffer[Be][ht]=n.createFramebuffer()}else J.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){J.__webglFramebuffer=[];for(let Be=0;Be<k.mipmaps.length;Be++)J.__webglFramebuffer[Be]=n.createFramebuffer()}else J.__webglFramebuffer=n.createFramebuffer();if(rt)for(let Be=0,ht=pe.length;Be<ht;Be++){let at=i.get(pe[Be]);at.__webglTexture===void 0&&(at.__webglTexture=n.createTexture(),o.memory.textures++)}if(z.samples>0&&Se(z)===!1){J.__webglMultisampledFramebuffer=n.createFramebuffer(),J.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let Be=0;Be<pe.length;Be++){let ht=pe[Be];J.__webglColorRenderbuffer[Be]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,J.__webglColorRenderbuffer[Be]);let at=s.convert(ht.format,ht.colorSpace),be=s.convert(ht.type),De=P(ht.internalFormat,at,be,ht.colorSpace,z.isXRRenderTarget===!0),yt=Ne(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,De,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.RENDERBUFFER,J.__webglColorRenderbuffer[Be])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(J.__webglDepthRenderbuffer=n.createRenderbuffer(),nt(J.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ee){t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture),Qe(n.TEXTURE_CUBE_MAP,k);for(let Be=0;Be<6;Be++)if(k.mipmaps&&k.mipmaps.length>0)for(let ht=0;ht<k.mipmaps.length;ht++)ze(J.__webglFramebuffer[Be][ht],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ht);else ze(J.__webglFramebuffer[Be],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);_(k)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(rt){for(let Be=0,ht=pe.length;Be<ht;Be++){let at=pe[Be],be=i.get(at),De=n.TEXTURE_2D;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(De=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(De,be.__webglTexture),Qe(De,at),ze(J.__webglFramebuffer,z,at,n.COLOR_ATTACHMENT0+Be,De,0),_(at)&&b(De)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Be=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Be,ae.__webglTexture),Qe(Be,k),k.mipmaps&&k.mipmaps.length>0)for(let ht=0;ht<k.mipmaps.length;ht++)ze(J.__webglFramebuffer[ht],z,k,n.COLOR_ATTACHMENT0,Be,ht);else ze(J.__webglFramebuffer,z,k,n.COLOR_ATTACHMENT0,Be,0);_(k)&&b(Be),t.unbindTexture()}z.depthBuffer&&Nt(z)}function we(z){let k=z.textures;for(let J=0,ae=k.length;J<ae;J++){let pe=k[J];if(_(pe)){let ee=R(z),rt=i.get(pe).__webglTexture;t.bindTexture(ee,rt),b(ee),t.unbindTexture()}}}let B=[],Ee=[];function Ae(z){if(z.samples>0){if(Se(z)===!1){let k=z.textures,J=z.width,ae=z.height,pe=n.COLOR_BUFFER_BIT,ee=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,rt=i.get(z),Be=k.length>1;if(Be)for(let at=0;at<k.length;at++)t.bindFramebuffer(n.FRAMEBUFFER,rt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,rt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,rt.__webglMultisampledFramebuffer);let ht=z.texture.mipmaps;ht&&ht.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,rt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,rt.__webglFramebuffer);for(let at=0;at<k.length;at++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(pe|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(pe|=n.STENCIL_BUFFER_BIT)),Be){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,rt.__webglColorRenderbuffer[at]);let be=i.get(k[at]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,be,0)}n.blitFramebuffer(0,0,J,ae,0,0,J,ae,pe,n.NEAREST),c===!0&&(B.length=0,Ee.length=0,B.push(n.COLOR_ATTACHMENT0+at),z.depthBuffer&&z.resolveDepthBuffer===!1&&(B.push(ee),Ee.push(ee),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ee)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,B))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Be)for(let at=0;at<k.length;at++){t.bindFramebuffer(n.FRAMEBUFFER,rt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,rt.__webglColorRenderbuffer[at]);let be=i.get(k[at]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,rt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,be,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,rt.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&c){let k=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function Ne(z){return Math.min(r.maxSamples,z.samples)}function Se(z){let k=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Fe(z){let k=o.render.frame;u.get(z)!==k&&(u.set(z,k),z.update())}function Me(z,k){let J=z.colorSpace,ae=z.format,pe=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||J!==Qf&&J!==lu&&(Ln.getTransfer(J)===Jn?(ae!==Ho||pe!==Ra)&&Ht("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):un("WebGLTextures: Unsupported texture color space:",J)),k}function $e(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(l.width=z.naturalWidth||z.width,l.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(l.width=z.displayWidth,l.height=z.displayHeight):(l.width=z.width,l.height=z.height),l}this.allocateTextureUnit=C,this.resetTextureUnits=M,this.setTexture2D=Z,this.setTexture2DArray=G,this.setTexture3D=K,this.setTextureCube=W,this.rebindTextures=Sn,this.setupRenderTarget=Et,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=Nt,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Se}function UFe(n,e){function t(i,r=lu){let s,o=Ln.getTransfer(r);if(i===Ra)return n.UNSIGNED_BYTE;if(i===PD)return n.UNSIGNED_SHORT_4_4_4_4;if(i===ND)return n.UNSIGNED_SHORT_5_5_5_1;if(i===M4)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===D4)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===C4)return n.BYTE;if(i===A4)return n.SHORT;if(i===k_)return n.UNSIGNED_SHORT;if(i===RD)return n.INT;if(i===Yd)return n.UNSIGNED_INT;if(i===Ac)return n.FLOAT;if(i===rp)return n.HALF_FLOAT;if(i===R4)return n.ALPHA;if(i===P4)return n.RGB;if(i===Ho)return n.RGBA;if(i===E_)return n.DEPTH_COMPONENT;if(i===L_)return n.DEPTH_STENCIL;if(i===N4)return n.RED;if(i===kD)return n.RED_INTEGER;if(i===OD)return n.RG;if(i===LD)return n.RG_INTEGER;if(i===FD)return n.RGBA_INTEGER;if(i===Ax||i===Mx||i===Dx||i===Rx)if(o===Jn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Ax)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Mx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Dx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Rx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Ax)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Mx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Dx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Rx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===VD||i===UD||i===BD||i===zD)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===VD)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===UD)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===BD)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===zD)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===HD||i===jD||i===GD)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===HD||i===jD)return o===Jn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===GD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===WD||i===$D||i===qD||i===KD||i===XD||i===YD||i===QD||i===JD||i===ZD||i===eR||i===tR||i===nR||i===iR||i===rR)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===WD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$D)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===qD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===KD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===XD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===YD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===QD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===JD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ZD)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===eR)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===tR)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===nR)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===iR)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===rR)return o===Jn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===sR||i===oR||i===aR)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===sR)return o===Jn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===oR)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===aR)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===cR||i===lR||i===uR||i===dR)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===cR)return s.COMPRESSED_RED_RGTC1_EXT;if(i===lR)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===uR)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===dR)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===O_?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var BFe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,zFe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,tH=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){let i=new dx(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new zo({vertexShader:BFe,fragmentShader:zFe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new go(new xx(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},nH=class extends su{constructor(e,t){super();let i=this,r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,g=null,v=typeof XRWebGLBinding<"u",_=new tH,b={},R=t.getContextAttributes(),P=null,N=null,U=[],O=[],S=new Xe,w=null,y=new Ur;y.viewport=new Qn;let x=new Ur;x.viewport=new Qn;let T=[y,x],M=new vD,C=null,oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let he=U[de];return he===void 0&&(he=new A_,U[de]=he),he.getTargetRaySpace()},this.getControllerGrip=function(de){let he=U[de];return he===void 0&&(he=new A_,U[de]=he),he.getGripSpace()},this.getHand=function(de){let he=U[de];return he===void 0&&(he=new A_,U[de]=he),he.getHandSpace()};function Z(de){let he=O.indexOf(de.inputSource);if(he===-1)return;let ze=U[he];ze!==void 0&&(ze.update(de.inputSource,de.frame,l||o),ze.dispatchEvent({type:de.type,data:de.inputSource}))}function G(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",K);for(let de=0;de<U.length;de++){let he=O[de];he!==null&&(O[de]=null,U[de].disconnect(he))}C=null,oe=null,_.reset();for(let de in b)delete b[de];e.setRenderTarget(P),f=null,h=null,d=null,r=null,N=null,kt.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){s=de,i.isPresenting===!0&&Ht("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,i.isPresenting===!0&&Ht("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(de){l=de},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d===null&&v&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(de){if(r=de,r!==null){if(P=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",G),r.addEventListener("inputsourceschange",K),R.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(S),v&&"createProjectionLayer"in XRWebGLBinding.prototype){let ze=null,nt=null,et=null;R.depth&&(et=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ze=R.stencil?L_:E_,nt=R.stencil?O_:Yd);let Nt={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:s};d=this.getBinding(),h=d.createProjectionLayer(Nt),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),N=new Sc(h.textureWidth,h.textureHeight,{format:Ho,type:Ra,depthTexture:new ux(h.textureWidth,h.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,ze),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let ze={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,ze),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),N=new Sc(f.framebufferWidth,f.framebufferHeight,{format:Ho,type:Ra,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await r.requestReferenceSpace(a),kt.setContext(r),kt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function K(de){for(let he=0;he<de.removed.length;he++){let ze=de.removed[he],nt=O.indexOf(ze);nt>=0&&(O[nt]=null,U[nt].disconnect(ze))}for(let he=0;he<de.added.length;he++){let ze=de.added[he],nt=O.indexOf(ze);if(nt===-1){for(let Nt=0;Nt<U.length;Nt++)if(Nt>=O.length){O.push(ze),nt=Nt;break}else if(O[Nt]===null){O[Nt]=ze,nt=Nt;break}if(nt===-1)break}let et=U[nt];et&&et.connect(ze)}}let W=new Q,ue=new Q;function ye(de,he,ze){W.setFromMatrixPosition(he.matrixWorld),ue.setFromMatrixPosition(ze.matrixWorld);let nt=W.distanceTo(ue),et=he.projectionMatrix.elements,Nt=ze.projectionMatrix.elements,Sn=et[14]/(et[10]-1),Et=et[14]/(et[10]+1),we=(et[9]+1)/et[5],B=(et[9]-1)/et[5],Ee=(et[8]-1)/et[0],Ae=(Nt[8]+1)/Nt[0],Ne=Sn*Ee,Se=Sn*Ae,Fe=nt/(-Ee+Ae),Me=Fe*-Ee;if(he.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(Me),de.translateZ(Fe),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert(),et[10]===-1)de.projectionMatrix.copy(he.projectionMatrix),de.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{let $e=Sn+Fe,z=Et+Fe,k=Ne-Me,J=Se+(nt-Me),ae=we*Et/z*$e,pe=B*Et/z*$e;de.projectionMatrix.makePerspective(k,J,ae,pe,$e,z),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}}function Ue(de,he){he===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(he.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(r===null)return;let he=de.near,ze=de.far;_.texture!==null&&(_.depthNear>0&&(he=_.depthNear),_.depthFar>0&&(ze=_.depthFar)),M.near=x.near=y.near=he,M.far=x.far=y.far=ze,(C!==M.near||oe!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,oe=M.far),M.layers.mask=de.layers.mask|6,y.layers.mask=M.layers.mask&3,x.layers.mask=M.layers.mask&5;let nt=de.parent,et=M.cameras;Ue(M,nt);for(let Nt=0;Nt<et.length;Nt++)Ue(et[Nt],nt);et.length===2?ye(M,y,x):M.projectionMatrix.copy(y.projectionMatrix),Qe(de,M,nt)};function Qe(de,he,ze){ze===null?de.matrix.copy(he.matrixWorld):(de.matrix.copy(ze.matrixWorld),de.matrix.invert(),de.matrix.multiply(he.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(he.projectionMatrix),de.projectionMatrixInverse.copy(he.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=YM*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(de){c=de,h!==null&&(h.fixedFoveation=de),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=de)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(M)},this.getCameraTexture=function(de){return b[de]};let Ze=null;function tt(de,he){if(u=he.getViewerPose(l||o),g=he,u!==null){let ze=u.views;f!==null&&(e.setRenderTargetFramebuffer(N,f.framebuffer),e.setRenderTarget(N));let nt=!1;ze.length!==M.cameras.length&&(M.cameras.length=0,nt=!0);for(let Et=0;Et<ze.length;Et++){let we=ze[Et],B=null;if(f!==null)B=f.getViewport(we);else{let Ae=d.getViewSubImage(h,we);B=Ae.viewport,Et===0&&(e.setRenderTargetTextures(N,Ae.colorTexture,Ae.depthStencilTexture),e.setRenderTarget(N))}let Ee=T[Et];Ee===void 0&&(Ee=new Ur,Ee.layers.enable(Et),Ee.viewport=new Qn,T[Et]=Ee),Ee.matrix.fromArray(we.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(we.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(B.x,B.y,B.width,B.height),Et===0&&(M.matrix.copy(Ee.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),nt===!0&&M.cameras.push(Ee)}let et=r.enabledFeatures;if(et&&et.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&v){d=i.getBinding();let Et=d.getDepthInformation(ze[0]);Et&&Et.isValid&&Et.texture&&_.init(Et,r.renderState)}if(et&&et.includes("camera-access")&&v){e.state.unbindTexture(),d=i.getBinding();for(let Et=0;Et<ze.length;Et++){let we=ze[Et].camera;if(we){let B=b[we];B||(B=new dx,b[we]=B);let Ee=d.getCameraImage(we);B.sourceTexture=Ee}}}}for(let ze=0;ze<U.length;ze++){let nt=O[ze],et=U[ze];nt!==null&&et!==void 0&&et.update(nt,he,l||o)}Ze&&Ze(de,he),he.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:he}),g=null}let kt=new Lre;kt.setAnimationLoop(tt),this.setAnimationLoop=function(de){Ze=de},this.dispose=function(){}}},ap=new $d,HFe=new Si;function jFe(n,e){function t(_,b){_.matrixAutoUpdate===!0&&_.updateMatrix(),b.value.copy(_.matrix)}function i(_,b){b.color.getRGB(_.fogColor.value,U4(n)),b.isFog?(_.fogNear.value=b.near,_.fogFar.value=b.far):b.isFogExp2&&(_.fogDensity.value=b.density)}function r(_,b,R,P,N){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(_,b):b.isMeshToonMaterial?(s(_,b),d(_,b)):b.isMeshPhongMaterial?(s(_,b),u(_,b)):b.isMeshStandardMaterial?(s(_,b),h(_,b),b.isMeshPhysicalMaterial&&f(_,b,N)):b.isMeshMatcapMaterial?(s(_,b),g(_,b)):b.isMeshDepthMaterial?s(_,b):b.isMeshDistanceMaterial?(s(_,b),v(_,b)):b.isMeshNormalMaterial?s(_,b):b.isLineBasicMaterial?(o(_,b),b.isLineDashedMaterial&&a(_,b)):b.isPointsMaterial?c(_,b,R,P):b.isSpriteMaterial?l(_,b):b.isShadowMaterial?(_.color.value.copy(b.color),_.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(_,b){_.opacity.value=b.opacity,b.color&&_.diffuse.value.copy(b.color),b.emissive&&_.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(_.map.value=b.map,t(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.bumpMap&&(_.bumpMap.value=b.bumpMap,t(b.bumpMap,_.bumpMapTransform),_.bumpScale.value=b.bumpScale,b.side===_s&&(_.bumpScale.value*=-1)),b.normalMap&&(_.normalMap.value=b.normalMap,t(b.normalMap,_.normalMapTransform),_.normalScale.value.copy(b.normalScale),b.side===_s&&_.normalScale.value.negate()),b.displacementMap&&(_.displacementMap.value=b.displacementMap,t(b.displacementMap,_.displacementMapTransform),_.displacementScale.value=b.displacementScale,_.displacementBias.value=b.displacementBias),b.emissiveMap&&(_.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,_.emissiveMapTransform)),b.specularMap&&(_.specularMap.value=b.specularMap,t(b.specularMap,_.specularMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest);let R=e.get(b),P=R.envMap,N=R.envMapRotation;P&&(_.envMap.value=P,ap.copy(N),ap.x*=-1,ap.y*=-1,ap.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(ap.y*=-1,ap.z*=-1),_.envMapRotation.value.setFromMatrix4(HFe.makeRotationFromEuler(ap)),_.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=b.reflectivity,_.ior.value=b.ior,_.refractionRatio.value=b.refractionRatio),b.lightMap&&(_.lightMap.value=b.lightMap,_.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,_.lightMapTransform)),b.aoMap&&(_.aoMap.value=b.aoMap,_.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,_.aoMapTransform))}function o(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,b.map&&(_.map.value=b.map,t(b.map,_.mapTransform))}function a(_,b){_.dashSize.value=b.dashSize,_.totalSize.value=b.dashSize+b.gapSize,_.scale.value=b.scale}function c(_,b,R,P){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.size.value=b.size*R,_.scale.value=P*.5,b.map&&(_.map.value=b.map,t(b.map,_.uvTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function l(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.rotation.value=b.rotation,b.map&&(_.map.value=b.map,t(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function u(_,b){_.specular.value.copy(b.specular),_.shininess.value=Math.max(b.shininess,1e-4)}function d(_,b){b.gradientMap&&(_.gradientMap.value=b.gradientMap)}function h(_,b){_.metalness.value=b.metalness,b.metalnessMap&&(_.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,_.metalnessMapTransform)),_.roughness.value=b.roughness,b.roughnessMap&&(_.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,_.roughnessMapTransform)),b.envMap&&(_.envMapIntensity.value=b.envMapIntensity)}function f(_,b,R){_.ior.value=b.ior,b.sheen>0&&(_.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),_.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(_.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,_.sheenColorMapTransform)),b.sheenRoughnessMap&&(_.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,_.sheenRoughnessMapTransform))),b.clearcoat>0&&(_.clearcoat.value=b.clearcoat,_.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(_.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,_.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(_.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===_s&&_.clearcoatNormalScale.value.negate())),b.dispersion>0&&(_.dispersion.value=b.dispersion),b.iridescence>0&&(_.iridescence.value=b.iridescence,_.iridescenceIOR.value=b.iridescenceIOR,_.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(_.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,_.iridescenceMapTransform)),b.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),b.transmission>0&&(_.transmission.value=b.transmission,_.transmissionSamplerMap.value=R.texture,_.transmissionSamplerSize.value.set(R.width,R.height),b.transmissionMap&&(_.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,_.transmissionMapTransform)),_.thickness.value=b.thickness,b.thicknessMap&&(_.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=b.attenuationDistance,_.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(_.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(_.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=b.specularIntensity,_.specularColor.value.copy(b.specularColor),b.specularColorMap&&(_.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,_.specularColorMapTransform)),b.specularIntensityMap&&(_.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,b){b.matcap&&(_.matcap.value=b.matcap)}function v(_,b){let R=e.get(b).light;_.referencePosition.value.setFromMatrixPosition(R.matrixWorld),_.nearDistance.value=R.shadow.camera.near,_.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function GFe(n,e,t,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,P){let N=P.program;i.uniformBlockBinding(R,N)}function l(R,P){let N=r[R.id];N===void 0&&(g(R),N=u(R),r[R.id]=N,R.addEventListener("dispose",_));let U=P.program;i.updateUBOMapping(R,U);let O=e.render.frame;s[R.id]!==O&&(h(R),s[R.id]=O)}function u(R){let P=d();R.__bindingPointIndex=P;let N=n.createBuffer(),U=R.__size,O=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,N),n.bufferData(n.UNIFORM_BUFFER,U,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,P,N),N}function d(){for(let R=0;R<a;R++)if(o.indexOf(R)===-1)return o.push(R),R;return un("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(R){let P=r[R.id],N=R.uniforms,U=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,P);for(let O=0,S=N.length;O<S;O++){let w=Array.isArray(N[O])?N[O]:[N[O]];for(let y=0,x=w.length;y<x;y++){let T=w[y];if(f(T,O,y,U)===!0){let M=T.__offset,C=Array.isArray(T.value)?T.value:[T.value],oe=0;for(let Z=0;Z<C.length;Z++){let G=C[Z],K=v(G);typeof G=="number"||typeof G=="boolean"?(T.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,M+oe,T.__data)):G.isMatrix3?(T.__data[0]=G.elements[0],T.__data[1]=G.elements[1],T.__data[2]=G.elements[2],T.__data[3]=0,T.__data[4]=G.elements[3],T.__data[5]=G.elements[4],T.__data[6]=G.elements[5],T.__data[7]=0,T.__data[8]=G.elements[6],T.__data[9]=G.elements[7],T.__data[10]=G.elements[8],T.__data[11]=0):(G.toArray(T.__data,oe),oe+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,M,T.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(R,P,N,U){let O=R.value,S=P+"_"+N;if(U[S]===void 0)return typeof O=="number"||typeof O=="boolean"?U[S]=O:U[S]=O.clone(),!0;{let w=U[S];if(typeof O=="number"||typeof O=="boolean"){if(w!==O)return U[S]=O,!0}else if(w.equals(O)===!1)return w.copy(O),!0}return!1}function g(R){let P=R.uniforms,N=0,U=16;for(let S=0,w=P.length;S<w;S++){let y=Array.isArray(P[S])?P[S]:[P[S]];for(let x=0,T=y.length;x<T;x++){let M=y[x],C=Array.isArray(M.value)?M.value:[M.value];for(let oe=0,Z=C.length;oe<Z;oe++){let G=C[oe],K=v(G),W=N%U,ue=W%K.boundary,ye=W+ue;N+=ue,ye!==0&&U-ye<K.storage&&(N+=U-ye),M.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=N,N+=K.storage}}}let O=N%U;return O>0&&(N+=U-O),R.__size=N,R.__cache={},this}function v(R){let P={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(P.boundary=4,P.storage=4):R.isVector2?(P.boundary=8,P.storage=8):R.isVector3||R.isColor?(P.boundary=16,P.storage=12):R.isVector4?(P.boundary=16,P.storage=16):R.isMatrix3?(P.boundary=48,P.storage=48):R.isMatrix4?(P.boundary=64,P.storage=64):R.isTexture?Ht("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Ht("WebGLRenderer: Unsupported uniform value type.",R),P}function _(R){let P=R.target;P.removeEventListener("dispose",_);let N=o.indexOf(P.__bindingPointIndex);o.splice(N,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function b(){for(let R in r)n.deleteBuffer(r[R]);o=[],r={},s={}}return{bind:c,update:l,dispose:b}}var WFe=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]),hu=null;function $Fe(){return hu===null&&(hu=new nD(WFe,32,32,OD,rp),hu.minFilter=po,hu.magFilter=po,hu.wrapS=Ec,hu.wrapT=Ec,hu.generateMipmaps=!1,hu.needsUpdate=!0),hu}var mR=class{constructor(e={}){let{canvas:t=ore(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=o;let g=new Set([FD,LD,kD]),v=new Set([Ra,Yd,k_,O_,PD,ND]),_=new Uint32Array(4),b=new Int32Array(4),R=null,P=null,N=[],U=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=cu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let O=this,S=!1;this._outputColorSpace=ho;let w=0,y=0,x=null,T=-1,M=null,C=new Qn,oe=new Qn,Z=null,G=new dn(0),K=0,W=t.width,ue=t.height,ye=1,Ue=null,Qe=null,Ze=new Qn(0,0,W,ue),tt=new Qn(0,0,W,ue),kt=!1,de=new M_,he=!1,ze=!1,nt=new Si,et=new Q,Nt=new Qn,Sn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Et=!1;function we(){return x===null?ye:1}let B=i;function Ee(F,$){return t.getContext(F,$)}try{let F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${"181"}`),t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",_e,!1),t.addEventListener("webglcontextcreationerror",qe,!1),B===null){let $="webgl2";if(B=Ee($,F),B===null)throw Ee($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw F("WebGLRenderer: "+F.message),F}let Ae,Ne,Se,Fe,Me,$e,z,k,J,ae,pe,ee,rt,Be,ht,at,be,De,yt,ft,Ge,Mt,j,He;function ke(){Ae=new cLe(B),Ae.init(),Mt=new UFe(B,Ae),Ne=new ZOe(B,Ae,e,Mt),Se=new FFe(B,Ae),Ne.reversedDepthBuffer&&h&&Se.buffers.depth.setReversed(!0),Fe=new dLe(B),Me=new SFe,$e=new VFe(B,Ae,Se,Me,Ne,Mt,Fe),z=new tLe(O),k=new aLe(O),J=new mNe(B),j=new QOe(B,J),ae=new lLe(B,J,Fe,j),pe=new fLe(B,ae,J,Fe),yt=new hLe(B,Ne,$e),at=new eLe(Me),ee=new EFe(O,z,k,Ae,Ne,j,at),rt=new jFe(O,Me),Be=new IFe,ht=new PFe(Ae),De=new YOe(O,z,k,Se,pe,f,c),be=new OFe(O,pe,Ne),He=new GFe(B,Fe,Ne,Se),ft=new JOe(B,Ae,Fe),Ge=new uLe(B,Ae,Fe),Fe.programs=ee.programs,O.capabilities=Ne,O.extensions=Ae,O.properties=Me,O.renderLists=Be,O.shadowMap=be,O.state=Se,O.info=Fe}ke();let Oe=new nH(O,B);this.xr=Oe,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let F=Ae.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){let F=Ae.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(F){F!==void 0&&(ye=F,this.setSize(W,ue,!1))},this.getSize=function(F){return F.set(W,ue)},this.setSize=function(F,$,te=!0){if(Oe.isPresenting){Ht("WebGLRenderer: Can't change size while VR device is presenting.");return}W=F,ue=$,t.width=Math.floor(F*ye),t.height=Math.floor($*ye),te===!0&&(t.style.width=F+"px",t.style.height=$+"px"),this.setViewport(0,0,F,$)},this.getDrawingBufferSize=function(F){return F.set(W*ye,ue*ye).floor()},this.setDrawingBufferSize=function(F,$,te){W=F,ue=$,ye=te,t.width=Math.floor(F*te),t.height=Math.floor($*te),this.setViewport(0,0,F,$)},this.getCurrentViewport=function(F){return F.copy(C)},this.getViewport=function(F){return F.copy(Ze)},this.setViewport=function(F,$,te,se){F.isVector4?Ze.set(F.x,F.y,F.z,F.w):Ze.set(F,$,te,se),Se.viewport(C.copy(Ze).multiplyScalar(ye).round())},this.getScissor=function(F){return F.copy(tt)},this.setScissor=function(F,$,te,se){F.isVector4?tt.set(F.x,F.y,F.z,F.w):tt.set(F,$,te,se),Se.scissor(oe.copy(tt).multiplyScalar(ye).round())},this.getScissorTest=function(){return kt},this.setScissorTest=function(F){Se.setScissorTest(kt=F)},this.setOpaqueSort=function(F){Ue=F},this.setTransparentSort=function(F){Qe=F},this.getClearColor=function(F){return F.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor(...arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha(...arguments)},this.clear=function(F=!0,$=!0,te=!0){let se=0;if(F){let Y=!1;if(x!==null){let Re=x.texture.format;Y=g.has(Re)}if(Y){let Re=x.texture.type,je=v.has(Re),Je=De.getClearColor(),Ye=De.getClearAlpha(),vt=Je.r,It=Je.g,ut=Je.b;je?(_[0]=vt,_[1]=It,_[2]=ut,_[3]=Ye,B.clearBufferuiv(B.COLOR,0,_)):(b[0]=vt,b[1]=It,b[2]=ut,b[3]=Ye,B.clearBufferiv(B.COLOR,0,b))}else se|=B.COLOR_BUFFER_BIT}$&&(se|=B.DEPTH_BUFFER_BIT),te&&(se|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",_e,!1),t.removeEventListener("webglcontextcreationerror",qe,!1),De.dispose(),Be.dispose(),ht.dispose(),Me.dispose(),z.dispose(),k.dispose(),pe.dispose(),j.dispose(),He.dispose(),ee.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",Pa),Oe.removeEventListener("sessionend",jo),zr.stop()};function ve(F){F.preventDefault(),V4("WebGLRenderer: Context Lost."),S=!0}function _e(){V4("WebGLRenderer: Context Restored."),S=!1;let F=Fe.autoReset,$=be.enabled,te=be.autoUpdate,se=be.needsUpdate,Y=be.type;ke(),Fe.autoReset=F,be.enabled=$,be.autoUpdate=te,be.needsUpdate=se,be.type=Y}function qe(F){un("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function Tt(F){let $=F.target;$.removeEventListener("dispose",Tt),Fn($)}function Fn(F){Pn(F),Me.remove(F)}function Pn(F){let $=Me.get(F).programs;$!==void 0&&($.forEach(function(te){ee.releaseProgram(te)}),F.isShaderMaterial&&ee.releaseShaderCache(F))}this.renderBufferDirect=function(F,$,te,se,Y,Re){$===null&&($=Sn);let je=Y.isMesh&&Y.matrixWorld.determinant()<0,Je=Pc(F,$,te,se,Y);Se.setMaterial(se,je);let Ye=te.index,vt=1;if(se.wireframe===!0){if(Ye=ae.getWireframeAttribute(te),Ye===void 0)return;vt=2}let It=te.drawRange,ut=te.attributes.position,Zt=It.start*vt,Tn=(It.start+It.count)*vt;Re!==null&&(Zt=Math.max(Zt,Re.start*vt),Tn=Math.min(Tn,(Re.start+Re.count)*vt)),Ye!==null?(Zt=Math.max(Zt,0),Tn=Math.min(Tn,Ye.count)):ut!=null&&(Zt=Math.max(Zt,0),Tn=Math.min(Tn,ut.count));let xn=Tn-Zt;if(xn<0||xn===1/0)return;j.setup(Y,se,Je,te,Ye);let gn,_n=ft;if(Ye!==null&&(gn=J.get(Ye),_n=Ge,_n.setIndex(gn)),Y.isMesh)se.wireframe===!0?(Se.setLineWidth(se.wireframeLinewidth*we()),_n.setMode(B.LINES)):_n.setMode(B.TRIANGLES);else if(Y.isLine){let dt=se.linewidth;dt===void 0&&(dt=1),Se.setLineWidth(dt*we()),Y.isLineSegments?_n.setMode(B.LINES):Y.isLineLoop?_n.setMode(B.LINE_LOOP):_n.setMode(B.LINE_STRIP)}else Y.isPoints?_n.setMode(B.POINTS):Y.isSprite&&_n.setMode(B.TRIANGLES);if(Y.isBatchedMesh)if(Y._multiDrawInstances!==null)T_("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_n.renderMultiDrawInstances(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount,Y._multiDrawInstances);else if(Ae.get("WEBGL_multi_draw"))_n.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else{let dt=Y._multiDrawStarts,Xn=Y._multiDrawCounts,lt=Y._multiDrawCount,Oi=Ye?J.get(Ye).bytesPerElement:1,ys=Me.get(se).currentProgram.getUniforms();for(let ii=0;ii<lt;ii++)ys.setValue(B,"_gl_DrawID",ii),_n.render(dt[ii]/Oi,Xn[ii])}else if(Y.isInstancedMesh)_n.renderInstances(Zt,xn,Y.count);else if(te.isInstancedBufferGeometry){let dt=te._maxInstanceCount!==void 0?te._maxInstanceCount:1/0,Xn=Math.min(te.instanceCount,dt);_n.renderInstances(Zt,xn,Xn)}else _n.render(Zt,xn)};function Ti(F,$,te){F.transparent===!0&&F.side===Ic&&F.forceSinglePass===!1?(F.side=_s,F.needsUpdate=!0,vo(F,$,te),F.side=ru,F.needsUpdate=!0,vo(F,$,te),F.side=Ic):vo(F,$,te)}this.compile=function(F,$,te=null){te===null&&(te=F),P=ht.get(te),P.init($),U.push(P),te.traverseVisible(function(Y){Y.isLight&&Y.layers.test($.layers)&&(P.pushLight(Y),Y.castShadow&&P.pushShadow(Y))}),F!==te&&F.traverseVisible(function(Y){Y.isLight&&Y.layers.test($.layers)&&(P.pushLight(Y),Y.castShadow&&P.pushShadow(Y))}),P.setupLights();let se=new Set;return F.traverse(function(Y){if(!(Y.isMesh||Y.isPoints||Y.isLine||Y.isSprite))return;let Re=Y.material;if(Re)if(Array.isArray(Re))for(let je=0;je<Re.length;je++){let Je=Re[je];Ti(Je,te,Y),se.add(Je)}else Ti(Re,te,Y),se.add(Re)}),P=U.pop(),se},this.compileAsync=function(F,$,te=null){let se=this.compile(F,$,te);return new Promise(Y=>{function Re(){if(se.forEach(function(je){Me.get(je).currentProgram.isReady()&&se.delete(je)}),se.size===0){Y(F);return}setTimeout(Re,10)}Ae.get("KHR_parallel_shader_compile")!==null?Re():setTimeout(Re,10)})};let Br=null;function dr(F){Br&&Br(F)}function Pa(){zr.stop()}function jo(){zr.start()}let zr=new Lre;zr.setAnimationLoop(dr),typeof self<"u"&&zr.setContext(self),this.setAnimationLoop=function(F){Br=F,Oe.setAnimationLoop(F),F===null?zr.stop():zr.start()},Oe.addEventListener("sessionstart",Pa),Oe.addEventListener("sessionend",jo),this.render=function(F,$){if($!==void 0&&$.isCamera!==!0){un("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera($),$=Oe.getCamera()),F.isScene===!0&&F.onBeforeRender(O,F,$,x),P=ht.get(F,U.length),P.init($),U.push(P),nt.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),de.setFromProjectionMatrix(nt,Da,$.reversedDepth),ze=this.localClippingEnabled,he=at.init(this.clippingPlanes,ze),R=Be.get(F,N.length),R.init(),N.push(R),Oe.enabled===!0&&Oe.isPresenting===!0){let Re=O.xr.getDepthSensingMesh();Re!==null&&Dc(Re,$,-1/0,O.sortObjects)}Dc(F,$,0,O.sortObjects),R.finish(),O.sortObjects===!0&&R.sort(Ue,Qe),Et=Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1,Et&&De.addToRenderList(R,F),this.info.render.frame++,he===!0&&at.beginShadows();let te=P.state.shadowsArray;be.render(te,F,$),he===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();let se=R.opaque,Y=R.transmissive;if(P.setupLights(),$.isArrayCamera){let Re=$.cameras;if(Y.length>0)for(let je=0,Je=Re.length;je<Je;je++){let Ye=Re[je];Go(se,Y,F,Ye)}Et&&De.render(F);for(let je=0,Je=Re.length;je<Je;je++){let Ye=Re[je];Na(R,F,Ye,Ye.viewport)}}else Y.length>0&&Go(se,Y,F,$),Et&&De.render(F),Na(R,F,$);x!==null&&y===0&&($e.updateMultisampleRenderTarget(x),$e.updateRenderTargetMipmap(x)),F.isScene===!0&&F.onAfterRender(O,F,$),j.resetDefaultState(),T=-1,M=null,U.pop(),U.length>0?(P=U[U.length-1],he===!0&&at.setGlobalState(O.clippingPlanes,P.state.camera)):P=null,N.pop(),N.length>0?R=N[N.length-1]:R=null};function Dc(F,$,te,se){if(F.visible===!1)return;if(F.layers.test($.layers)){if(F.isGroup)te=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update($);else if(F.isLight)P.pushLight(F),F.castShadow&&P.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||de.intersectsSprite(F)){se&&Nt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(nt);let je=pe.update(F),Je=F.material;Je.visible&&R.push(F,je,Je,te,Nt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||de.intersectsObject(F))){let je=pe.update(F),Je=F.material;if(se&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),Nt.copy(F.boundingSphere.center)):(je.boundingSphere===null&&je.computeBoundingSphere(),Nt.copy(je.boundingSphere.center)),Nt.applyMatrix4(F.matrixWorld).applyMatrix4(nt)),Array.isArray(Je)){let Ye=je.groups;for(let vt=0,It=Ye.length;vt<It;vt++){let ut=Ye[vt],Zt=Je[ut.materialIndex];Zt&&Zt.visible&&R.push(F,je,Zt,te,Nt.z,ut)}}else Je.visible&&R.push(F,je,Je,te,Nt.z,null)}}let Re=F.children;for(let je=0,Je=Re.length;je<Je;je++)Dc(Re[je],$,te,se)}function Na(F,$,te,se){let{opaque:Y,transmissive:Re,transparent:je}=F;P.setupLightsView(te),he===!0&&at.setGlobalState(O.clippingPlanes,te),se&&Se.viewport(C.copy(se)),Y.length>0&&ss(Y,$,te),Re.length>0&&ss(Re,$,te),je.length>0&&ss(je,$,te),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function Go(F,$,te,se){if((te.isScene===!0?te.overrideMaterial:null)!==null)return;P.state.transmissionRenderTarget[se.id]===void 0&&(P.state.transmissionRenderTarget[se.id]=new Sc(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")||Ae.has("EXT_color_buffer_float")?rp:Ra,minFilter:Xd,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ln.workingColorSpace}));let Re=P.state.transmissionRenderTarget[se.id],je=se.viewport||C;Re.setSize(je.z*O.transmissionResolutionScale,je.w*O.transmissionResolutionScale);let Je=O.getRenderTarget(),Ye=O.getActiveCubeFace(),vt=O.getActiveMipmapLevel();O.setRenderTarget(Re),O.getClearColor(G),K=O.getClearAlpha(),K<1&&O.setClearColor(16777215,.5),O.clear(),Et&&De.render(te);let It=O.toneMapping;O.toneMapping=cu;let ut=se.viewport;if(se.viewport!==void 0&&(se.viewport=void 0),P.setupLightsView(se),he===!0&&at.setGlobalState(O.clippingPlanes,se),ss(F,te,se),$e.updateMultisampleRenderTarget(Re),$e.updateRenderTargetMipmap(Re),Ae.has("WEBGL_multisampled_render_to_texture")===!1){let Zt=!1;for(let Tn=0,xn=$.length;Tn<xn;Tn++){let gn=$[Tn],{object:_n,geometry:dt,material:Xn,group:lt}=gn;if(Xn.side===Ic&&_n.layers.test(se.layers)){let Oi=Xn.side;Xn.side=_s,Xn.needsUpdate=!0,Jd(_n,te,se,dt,Xn,lt),Xn.side=Oi,Xn.needsUpdate=!0,Zt=!0}}Zt===!0&&($e.updateMultisampleRenderTarget(Re),$e.updateRenderTargetMipmap(Re))}O.setRenderTarget(Je,Ye,vt),O.setClearColor(G,K),ut!==void 0&&(se.viewport=ut),O.toneMapping=It}function ss(F,$,te){let se=$.isScene===!0?$.overrideMaterial:null;for(let Y=0,Re=F.length;Y<Re;Y++){let je=F[Y],{object:Je,geometry:Ye,group:vt}=je,It=je.material;It.allowOverride===!0&&se!==null&&(It=se),Je.layers.test(te.layers)&&Jd(Je,$,te,Ye,It,vt)}}function Jd(F,$,te,se,Y,Re){F.onBeforeRender(O,$,te,se,Y,Re),F.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),Y.onBeforeRender(O,$,te,se,F,Re),Y.transparent===!0&&Y.side===Ic&&Y.forceSinglePass===!1?(Y.side=_s,Y.needsUpdate=!0,O.renderBufferDirect(te,$,se,Y,F,Re),Y.side=ru,Y.needsUpdate=!0,O.renderBufferDirect(te,$,se,Y,F,Re),Y.side=Ic):O.renderBufferDirect(te,$,se,Y,F,Re),F.onAfterRender(O,$,te,se,Y,Re)}function vo(F,$,te){$.isScene!==!0&&($=Sn);let se=Me.get(F),Y=P.state.lights,Re=P.state.shadowsArray,je=Y.state.version,Je=ee.getParameters(F,Y.state,Re,$,te),Ye=ee.getProgramCacheKey(Je),vt=se.programs;se.environment=F.isMeshStandardMaterial?$.environment:null,se.fog=$.fog,se.envMap=(F.isMeshStandardMaterial?k:z).get(F.envMap||se.environment),se.envMapRotation=se.environment!==null&&F.envMap===null?$.environmentRotation:F.envMapRotation,vt===void 0&&(F.addEventListener("dispose",Tt),vt=new Map,se.programs=vt);let It=vt.get(Ye);if(It!==void 0){if(se.currentProgram===It&&se.lightsStateVersion===je)return ka(F,Je),It}else Je.uniforms=ee.getUniforms(F),F.onBeforeCompile(Je,O),It=ee.acquireProgram(Je,Ye),vt.set(Ye,It),se.uniforms=Je.uniforms;let ut=se.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(ut.clippingPlanes=at.uniform),ka(F,Je),se.needsLights=Zd(F),se.lightsStateVersion=je,se.needsLights&&(ut.ambientLightColor.value=Y.state.ambient,ut.lightProbe.value=Y.state.probe,ut.directionalLights.value=Y.state.directional,ut.directionalLightShadows.value=Y.state.directionalShadow,ut.spotLights.value=Y.state.spot,ut.spotLightShadows.value=Y.state.spotShadow,ut.rectAreaLights.value=Y.state.rectArea,ut.ltc_1.value=Y.state.rectAreaLTC1,ut.ltc_2.value=Y.state.rectAreaLTC2,ut.pointLights.value=Y.state.point,ut.pointLightShadows.value=Y.state.pointShadow,ut.hemisphereLights.value=Y.state.hemi,ut.directionalShadowMap.value=Y.state.directionalShadowMap,ut.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,ut.spotShadowMap.value=Y.state.spotShadowMap,ut.spotLightMatrix.value=Y.state.spotLightMatrix,ut.spotLightMap.value=Y.state.spotLightMap,ut.pointShadowMap.value=Y.state.pointShadowMap,ut.pointShadowMatrix.value=Y.state.pointShadowMatrix),se.currentProgram=It,se.uniformsList=null,It}function Rc(F){if(F.uniformsList===null){let $=F.currentProgram.getUniforms();F.uniformsList=U_.seqWithValue($.seq,F.uniforms)}return F.uniformsList}function ka(F,$){let te=Me.get(F);te.outputColorSpace=$.outputColorSpace,te.batching=$.batching,te.batchingColor=$.batchingColor,te.instancing=$.instancing,te.instancingColor=$.instancingColor,te.instancingMorph=$.instancingMorph,te.skinning=$.skinning,te.morphTargets=$.morphTargets,te.morphNormals=$.morphNormals,te.morphColors=$.morphColors,te.morphTargetsCount=$.morphTargetsCount,te.numClippingPlanes=$.numClippingPlanes,te.numIntersection=$.numClipIntersection,te.vertexAlphas=$.vertexAlphas,te.vertexTangents=$.vertexTangents,te.toneMapping=$.toneMapping}function Pc(F,$,te,se,Y){$.isScene!==!0&&($=Sn),$e.resetTextureUnits();let Re=$.fog,je=se.isMeshStandardMaterial?$.environment:null,Je=x===null?O.outputColorSpace:x.isXRRenderTarget===!0?x.texture.colorSpace:Qf,Ye=(se.isMeshStandardMaterial?k:z).get(se.envMap||je),vt=se.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,It=!!te.attributes.tangent&&(!!se.normalMap||se.anisotropy>0),ut=!!te.morphAttributes.position,Zt=!!te.morphAttributes.normal,Tn=!!te.morphAttributes.color,xn=cu;se.toneMapped&&(x===null||x.isXRRenderTarget===!0)&&(xn=O.toneMapping);let gn=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,_n=gn!==void 0?gn.length:0,dt=Me.get(se),Xn=P.state.lights;if(he===!0&&(ze===!0||F!==M)){let Kt=F===M&&se.id===T;at.setState(se,F,Kt)}let lt=!1;se.version===dt.__version?(dt.needsLights&&dt.lightsStateVersion!==Xn.state.version||dt.outputColorSpace!==Je||Y.isBatchedMesh&&dt.batching===!1||!Y.isBatchedMesh&&dt.batching===!0||Y.isBatchedMesh&&dt.batchingColor===!0&&Y.colorTexture===null||Y.isBatchedMesh&&dt.batchingColor===!1&&Y.colorTexture!==null||Y.isInstancedMesh&&dt.instancing===!1||!Y.isInstancedMesh&&dt.instancing===!0||Y.isSkinnedMesh&&dt.skinning===!1||!Y.isSkinnedMesh&&dt.skinning===!0||Y.isInstancedMesh&&dt.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&dt.instancingColor===!1&&Y.instanceColor!==null||Y.isInstancedMesh&&dt.instancingMorph===!0&&Y.morphTexture===null||Y.isInstancedMesh&&dt.instancingMorph===!1&&Y.morphTexture!==null||dt.envMap!==Ye||se.fog===!0&&dt.fog!==Re||dt.numClippingPlanes!==void 0&&(dt.numClippingPlanes!==at.numPlanes||dt.numIntersection!==at.numIntersection)||dt.vertexAlphas!==vt||dt.vertexTangents!==It||dt.morphTargets!==ut||dt.morphNormals!==Zt||dt.morphColors!==Tn||dt.toneMapping!==xn||dt.morphTargetsCount!==_n)&&(lt=!0):(lt=!0,dt.__version=se.version);let Oi=dt.currentProgram;lt===!0&&(Oi=vo(se,$,Y));let ys=!1,ii=!1,Mr=!1,Bn=Oi.getUniforms(),Li=dt.uniforms;if(Se.useProgram(Oi.program)&&(ys=!0,ii=!0,Mr=!0),se.id!==T&&(T=se.id,ii=!0),ys||M!==F){Se.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),Bn.setValue(B,"projectionMatrix",F.projectionMatrix),Bn.setValue(B,"viewMatrix",F.matrixWorldInverse);let Fi=Bn.map.cameraPosition;Fi!==void 0&&Fi.setValue(B,et.setFromMatrixPosition(F.matrixWorld)),Ne.logarithmicDepthBuffer&&Bn.setValue(B,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&Bn.setValue(B,"isOrthographic",F.isOrthographicCamera===!0),M!==F&&(M=F,ii=!0,Mr=!0)}if(Y.isSkinnedMesh){Bn.setOptional(B,Y,"bindMatrix"),Bn.setOptional(B,Y,"bindMatrixInverse");let Kt=Y.skeleton;Kt&&(Kt.boneTexture===null&&Kt.computeBoneTexture(),Bn.setValue(B,"boneTexture",Kt.boneTexture,$e))}Y.isBatchedMesh&&(Bn.setOptional(B,Y,"batchingTexture"),Bn.setValue(B,"batchingTexture",Y._matricesTexture,$e),Bn.setOptional(B,Y,"batchingIdTexture"),Bn.setValue(B,"batchingIdTexture",Y._indirectTexture,$e),Bn.setOptional(B,Y,"batchingColorTexture"),Y._colorsTexture!==null&&Bn.setValue(B,"batchingColorTexture",Y._colorsTexture,$e));let Dr=te.morphAttributes;if((Dr.position!==void 0||Dr.normal!==void 0||Dr.color!==void 0)&&yt.update(Y,te,Oi),(ii||dt.receiveShadow!==Y.receiveShadow)&&(dt.receiveShadow=Y.receiveShadow,Bn.setValue(B,"receiveShadow",Y.receiveShadow)),se.isMeshGouraudMaterial&&se.envMap!==null&&(Li.envMap.value=Ye,Li.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1),se.isMeshStandardMaterial&&se.envMap===null&&$.environment!==null&&(Li.envMapIntensity.value=$.environmentIntensity),Li.dfgLUT!==void 0&&(Li.dfgLUT.value=$Fe()),ii&&(Bn.setValue(B,"toneMappingExposure",O.toneMappingExposure),dt.needsLights&&bo(Li,Mr),Re&&se.fog===!0&&rt.refreshFogUniforms(Li,Re),rt.refreshMaterialUniforms(Li,se,ye,ue,P.state.transmissionRenderTarget[F.id]),U_.upload(B,Rc(dt),Li,$e)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(U_.upload(B,Rc(dt),Li,$e),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&Bn.setValue(B,"center",Y.center),Bn.setValue(B,"modelViewMatrix",Y.modelViewMatrix),Bn.setValue(B,"normalMatrix",Y.normalMatrix),Bn.setValue(B,"modelMatrix",Y.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){let Kt=se.uniformsGroups;for(let Fi=0,os=Kt.length;Fi<os;Fi++){let Vi=Kt[Fi];He.update(Vi,Oi),He.bind(Vi,Oi)}}return Oi}function bo(F,$){F.ambientLightColor.needsUpdate=$,F.lightProbe.needsUpdate=$,F.directionalLights.needsUpdate=$,F.directionalLightShadows.needsUpdate=$,F.pointLights.needsUpdate=$,F.pointLightShadows.needsUpdate=$,F.spotLights.needsUpdate=$,F.spotLightShadows.needsUpdate=$,F.rectAreaLights.needsUpdate=$,F.hemisphereLights.needsUpdate=$}function Zd(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(F,$,te){let se=Me.get(F);se.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,se.__autoAllocateDepthBuffer===!1&&(se.__useRenderToTexture=!1),Me.get(F.texture).__webglTexture=$,Me.get(F.depthTexture).__webglTexture=se.__autoAllocateDepthBuffer?void 0:te,se.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,$){let te=Me.get(F);te.__webglFramebuffer=$,te.__useDefaultFramebuffer=$===void 0};let up=B.createFramebuffer();this.setRenderTarget=function(F,$=0,te=0){x=F,w=$,y=te;let se=!0,Y=null,Re=!1,je=!1;if(F){let Ye=Me.get(F);if(Ye.__useDefaultFramebuffer!==void 0)Se.bindFramebuffer(B.FRAMEBUFFER,null),se=!1;else if(Ye.__webglFramebuffer===void 0)$e.setupRenderTarget(F);else if(Ye.__hasExternalTextures)$e.rebindTextures(F,Me.get(F.texture).__webglTexture,Me.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){let ut=F.depthTexture;if(Ye.__boundDepthTexture!==ut){if(ut!==null&&Me.has(ut)&&(F.width!==ut.image.width||F.height!==ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$e.setupDepthRenderbuffer(F)}}let vt=F.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(je=!0);let It=Me.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(It[$])?Y=It[$][te]:Y=It[$],Re=!0):F.samples>0&&$e.useMultisampledRTT(F)===!1?Y=Me.get(F).__webglMultisampledFramebuffer:Array.isArray(It)?Y=It[te]:Y=It,C.copy(F.viewport),oe.copy(F.scissor),Z=F.scissorTest}else C.copy(Ze).multiplyScalar(ye).floor(),oe.copy(tt).multiplyScalar(ye).floor(),Z=kt;if(te!==0&&(Y=up),Se.bindFramebuffer(B.FRAMEBUFFER,Y)&&se&&Se.drawBuffers(F,Y),Se.viewport(C),Se.scissor(oe),Se.setScissorTest(Z),Re){let Ye=Me.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ye.__webglTexture,te)}else if(je){let Ye=$;for(let vt=0;vt<F.textures.length;vt++){let It=Me.get(F.textures[vt]);B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+vt,It.__webglTexture,te,Ye)}}else if(F!==null&&te!==0){let Ye=Me.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Ye.__webglTexture,te)}T=-1},this.readRenderTargetPixels=function(F,$,te,se,Y,Re,je,Je=0){if(!(F&&F.isWebGLRenderTarget)){un("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=Me.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&je!==void 0&&(Ye=Ye[je]),Ye){Se.bindFramebuffer(B.FRAMEBUFFER,Ye);try{let vt=F.textures[Je],It=vt.format,ut=vt.type;if(!Ne.textureFormatReadable(It)){un("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ne.textureTypeReadable(ut)){un("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=F.width-se&&te>=0&&te<=F.height-Y&&(F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Je),B.readPixels($,te,se,Y,Mt.convert(It),Mt.convert(ut),Re))}finally{let vt=x!==null?Me.get(x).__webglFramebuffer:null;Se.bindFramebuffer(B.FRAMEBUFFER,vt)}}},this.readRenderTargetPixelsAsync=async function(F,$,te,se,Y,Re,je,Je=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ye=Me.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&je!==void 0&&(Ye=Ye[je]),Ye)if($>=0&&$<=F.width-se&&te>=0&&te<=F.height-Y){Se.bindFramebuffer(B.FRAMEBUFFER,Ye);let vt=F.textures[Je],It=vt.format,ut=vt.type;if(!Ne.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ne.textureTypeReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let Zt=B.createBuffer();B.bindBuffer(B.PIXEL_PACK_BUFFER,Zt),B.bufferData(B.PIXEL_PACK_BUFFER,Re.byteLength,B.STREAM_READ),F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Je),B.readPixels($,te,se,Y,Mt.convert(It),Mt.convert(ut),0);let Tn=x!==null?Me.get(x).__webglFramebuffer:null;Se.bindFramebuffer(B.FRAMEBUFFER,Tn);let xn=B.fenceSync(B.SYNC_GPU_COMMANDS_COMPLETE,0);return B.flush(),await are(B,xn,4),B.bindBuffer(B.PIXEL_PACK_BUFFER,Zt),B.getBufferSubData(B.PIXEL_PACK_BUFFER,0,Re),B.deleteBuffer(Zt),B.deleteSync(xn),Re}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,$=null,te=0){let se=Math.pow(2,-te),Y=Math.floor(F.image.width*se),Re=Math.floor(F.image.height*se),je=$!==null?$.x:0,Je=$!==null?$.y:0;$e.setTexture2D(F,0),B.copyTexSubImage2D(B.TEXTURE_2D,te,0,0,je,Je,Y,Re),Se.unbindTexture()};let Oa=B.createFramebuffer(),fu=B.createFramebuffer();this.copyTextureToTexture=function(F,$,te=null,se=null,Y=0,Re=null){Re===null&&(Y!==0?(T_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Re=Y,Y=0):Re=0);let je,Je,Ye,vt,It,ut,Zt,Tn,xn,gn=F.isCompressedTexture?F.mipmaps[Re]:F.image;if(te!==null)je=te.max.x-te.min.x,Je=te.max.y-te.min.y,Ye=te.isBox3?te.max.z-te.min.z:1,vt=te.min.x,It=te.min.y,ut=te.isBox3?te.min.z:0;else{let Dr=Math.pow(2,-Y);je=Math.floor(gn.width*Dr),Je=Math.floor(gn.height*Dr),F.isDataArrayTexture?Ye=gn.depth:F.isData3DTexture?Ye=Math.floor(gn.depth*Dr):Ye=1,vt=0,It=0,ut=0}se!==null?(Zt=se.x,Tn=se.y,xn=se.z):(Zt=0,Tn=0,xn=0);let _n=Mt.convert($.format),dt=Mt.convert($.type),Xn;$.isData3DTexture?($e.setTexture3D($,0),Xn=B.TEXTURE_3D):$.isDataArrayTexture||$.isCompressedArrayTexture?($e.setTexture2DArray($,0),Xn=B.TEXTURE_2D_ARRAY):($e.setTexture2D($,0),Xn=B.TEXTURE_2D),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,$.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,$.unpackAlignment);let lt=B.getParameter(B.UNPACK_ROW_LENGTH),Oi=B.getParameter(B.UNPACK_IMAGE_HEIGHT),ys=B.getParameter(B.UNPACK_SKIP_PIXELS),ii=B.getParameter(B.UNPACK_SKIP_ROWS),Mr=B.getParameter(B.UNPACK_SKIP_IMAGES);B.pixelStorei(B.UNPACK_ROW_LENGTH,gn.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,gn.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,vt),B.pixelStorei(B.UNPACK_SKIP_ROWS,It),B.pixelStorei(B.UNPACK_SKIP_IMAGES,ut);let Bn=F.isDataArrayTexture||F.isData3DTexture,Li=$.isDataArrayTexture||$.isData3DTexture;if(F.isDepthTexture){let Dr=Me.get(F),Kt=Me.get($),Fi=Me.get(Dr.__renderTarget),os=Me.get(Kt.__renderTarget);Se.bindFramebuffer(B.READ_FRAMEBUFFER,Fi.__webglFramebuffer),Se.bindFramebuffer(B.DRAW_FRAMEBUFFER,os.__webglFramebuffer);for(let Vi=0;Vi<Ye;Vi++)Bn&&(B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Me.get(F).__webglTexture,Y,ut+Vi),B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Me.get($).__webglTexture,Re,xn+Vi)),B.blitFramebuffer(vt,It,je,Je,Zt,Tn,je,Je,B.DEPTH_BUFFER_BIT,B.NEAREST);Se.bindFramebuffer(B.READ_FRAMEBUFFER,null),Se.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else if(Y!==0||F.isRenderTargetTexture||Me.has(F)){let Dr=Me.get(F),Kt=Me.get($);Se.bindFramebuffer(B.READ_FRAMEBUFFER,Oa),Se.bindFramebuffer(B.DRAW_FRAMEBUFFER,fu);for(let Fi=0;Fi<Ye;Fi++)Bn?B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Dr.__webglTexture,Y,ut+Fi):B.framebufferTexture2D(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Dr.__webglTexture,Y),Li?B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Kt.__webglTexture,Re,xn+Fi):B.framebufferTexture2D(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Kt.__webglTexture,Re),Y!==0?B.blitFramebuffer(vt,It,je,Je,Zt,Tn,je,Je,B.COLOR_BUFFER_BIT,B.NEAREST):Li?B.copyTexSubImage3D(Xn,Re,Zt,Tn,xn+Fi,vt,It,je,Je):B.copyTexSubImage2D(Xn,Re,Zt,Tn,vt,It,je,Je);Se.bindFramebuffer(B.READ_FRAMEBUFFER,null),Se.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else Li?F.isDataTexture||F.isData3DTexture?B.texSubImage3D(Xn,Re,Zt,Tn,xn,je,Je,Ye,_n,dt,gn.data):$.isCompressedArrayTexture?B.compressedTexSubImage3D(Xn,Re,Zt,Tn,xn,je,Je,Ye,_n,gn.data):B.texSubImage3D(Xn,Re,Zt,Tn,xn,je,Je,Ye,_n,dt,gn):F.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,Re,Zt,Tn,je,Je,_n,dt,gn.data):F.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,Re,Zt,Tn,gn.width,gn.height,_n,gn.data):B.texSubImage2D(B.TEXTURE_2D,Re,Zt,Tn,je,Je,_n,dt,gn);B.pixelStorei(B.UNPACK_ROW_LENGTH,lt),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Oi),B.pixelStorei(B.UNPACK_SKIP_PIXELS,ys),B.pixelStorei(B.UNPACK_SKIP_ROWS,ii),B.pixelStorei(B.UNPACK_SKIP_IMAGES,Mr),Re===0&&$.generateMipmaps&&B.generateMipmap(Xn),Se.unbindTexture()},this.initRenderTarget=function(F){Me.get(F).__webglFramebuffer===void 0&&$e.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?$e.setTextureCube(F,0):F.isData3DTexture?$e.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?$e.setTexture2DArray(F,0):$e.setTexture2D(F,0),Se.unbindTexture()},this.resetState=function(){w=0,y=0,x=null,Se.reset(),j.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Da}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Ln._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ln._getUnpackColorSpace()}};var KFe=["canvasContainer"],yR=class n{canvasContainer;scene;camera;renderer;textMesh;stars=[];animationId=0;ngOnInit(){this.initScene(),this.createStarfield(),this.createText(),this.renderer.render(this.scene,this.camera)}ngAfterViewInit(){this.canvasContainer&&this.canvasContainer.nativeElement.appendChild(this.renderer.domElement)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer.dispose()}initScene(){this.scene=new cx,this.scene.background=new dn(17),this.camera=new Ur(75,window.innerWidth/400,.1,1e3),this.camera.position.z=5,this.renderer=new mR({antialias:!0}),this.renderer.setSize(window.innerWidth,400),this.renderer.setPixelRatio(window.devicePixelRatio);let e=new Tx(16777215,.5);this.scene.add(e);let t=new N_(4149685,2);t.position.set(5,5,5),this.scene.add(t);let i=new N_(16711935,1.5);i.position.set(-5,-5,5),this.scene.add(i)}createStarfield(){let e=new mo,t=new D_({color:16777215,size:.05,transparent:!0}),i=[];for(let s=0;s<1e3;s++){let o=(Math.random()-.5)*100,a=(Math.random()-.5)*100,c=(Math.random()-.5)*100;i.push(o,a,c)}e.setAttribute("position",new Ks(i,3));let r=new lx(e,t);this.scene.add(r),this.stars.push(r)}createText(){let e=[],t=new Zf;t.lineTo(0,2),t.lineTo(2,4),e.push(t);let i=new Zf;i.moveTo(1.5,0),i.lineTo(2,2),i.lineTo(2.3,2),i.lineTo(2.8,0),i.lineTo(2.5,0),i.lineTo(2.35,.8),i.lineTo(1.95,.8),i.lineTo(1.8,0),i.lineTo(1.5,0);let r=new bx(e);r.center();let s=new wx({color:4149685,emissive:1713022,specular:6056896,shininess:100});this.textMesh=new go(r,s),this.scene.add(this.textMesh)}animate=()=>{this.animationId=requestAnimationFrame(this.animate),this.textMesh&&(this.textMesh.rotation.y+=.01,this.textMesh.rotation.x=Math.sin(Date.now()*.001)*.2),this.stars.forEach(e=>{e.rotation.y+=5e-4,e.rotation.x+=2e-4}),this.renderer.render(this.scene,this.camera)};onWindowResize(){this.camera.aspect=window.innerWidth/400,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,400)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-mybanner"]],viewQuery:function(t,i){if(t&1&&nl(KFe,7),t&2){let r;Qi(r=Ji())&&(i.canvasContainer=r.first)}},decls:2,vars:0,consts:[["canvasContainer",""],[1,"banner-container"]],template:function(t,i){t&1&&sa(0,"div",1,0)},styles:[".banner-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow:hidden;position:relative;background:#001}.banner-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]})};var vR=class n{retry(){window.location.reload()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-no-internet"]],decls:12,vars:0,consts:[[1,"no-internet-container"],[1,"message-card"],["color","warn",1,"error-icon"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"mat-card",1)(2,"mat-icon",2),ge(3,"wifi_off"),le(),ce(4,"h2"),ge(5,"Unable to connect to Internet"),le(),ce(6,"p"),ge(7,"Please check your connection and try again."),le(),ce(8,"button",3),wn("click",function(){return i.retry()}),ce(9,"mat-icon"),ge(10,"refresh"),le(),ge(11," Retry "),le()()())},dependencies:[Ns,Oo,yd,Lo,vd,Fs,mc],styles:[".no-internet-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5;padding:20px}.message-card[_ngcontent-%COMP%]{padding:40px;text-align:center;max-width:400px;width:100%;display:flex;flex-direction:column;align-items:center;gap:20px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}h2[_ngcontent-%COMP%]{margin:0;color:#333}p[_ngcontent-%COMP%]{color:#666;margin:0}"]})};var bR=class n{constructor(e){this.firestore=e}collPath="notifications";createNotification(e){let t=$C(this.firestore,this.collPath);return bQ(t,ct(re({},e),{createdAt:new Date})).then(r=>r.id)}updateNotification(e,t){let i=Dg(this.firestore,`${this.collPath}/${e}`);return CQ(i,t)}deleteNotification(e){let t=Dg(this.firestore,`${this.collPath}/${e}`);return xQ(t)}async getNotificationsPage(e=5,t){let i=$C(this.firestore,this.collPath),r;t?r=qC(i,Jb("time"),IQ(t),UU(e)):r=qC(i,Jb("time"),UU(e));let s=await EQ(r),o=[];s.forEach(c=>{o.push(re({id:c.id},c.data()))});let a=s.docs[s.docs.length-1];return{items:o,lastDoc:a}}streamNotifications(){let e=$C(this.firestore,this.collPath),t=qC(e,Jb("time"),Jb("createdAt"));return yQ(t,{idField:"id"})}static \u0275fac=function(t){return new(t||n)(st(Bl))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})};function YFe(n,e){if(n&1){let t=Xr();Nh(0),ce(1,"div",9),wn("click",function(){ci(t);let r=Yn();return li(r.openCreate())}),ce(2,"div",10),ge(3,"+"),le(),ce(4,"p"),ge(5,"No reminders yet \u2014 tap to create one"),le()(),kh()}}function QFe(n,e){if(n&1){let t=Xr();ce(0,"div",18)(1,"div",19)(2,"div",20),ge(3),le(),ce(4,"div",21),ge(5),le()(),ce(6,"div",22)(7,"div",23),ge(8),le(),ce(9,"div",24)(10,"button",25),wn("click",function(){let r=ci(t).$implicit,s=Yn(2);return li(s.openEdit(r))}),ge(11,"\u270E"),le(),ce(12,"button",26),wn("click",function(){let r=ci(t).$implicit,s=Yn(2);return li(s.delete(r))}),ge(13,"\u{1F5D1}"),le()()()()}if(n&2){let t=e.$implicit;Lt(3),fs(t.title),Lt(2),JE("",t.repeat," \u2022 ",t.day),Lt(3),fs(t.time)}}function JFe(n,e){if(n&1){let t=Xr();ce(0,"section",11),Or(1,QFe,14,4,"div",12),ce(2,"div",13)(3,"button",14),wn("click",function(){ci(t);let r=Yn();return li(r.loadPrevious())}),ge(4,"\u2039 Prev"),le(),ce(5,"select",15),eS("ngModelChange",function(r){ci(t);let s=Yn();return JN(s.pageSize,r)||(s.pageSize=r),li(r)}),wn("change",function(){ci(t);let r=Yn();return li(r.loadFirstPage())}),ce(6,"option",16),ge(7,"5"),le(),ce(8,"option",16),ge(9,"10"),le(),ce(10,"option",16),ge(11,"20"),le()(),ce(12,"button",14),wn("click",function(){ci(t);let r=Yn();return li(r.loadNext())}),ge(13,"Next \u203A"),le()(),ce(14,"button",17),wn("click",function(){ci(t);let r=Yn();return li(r.openCreate())}),ge(15,"+"),le()()}if(n&2){let t=Yn();Lt(),In("ngForOf",t.notifications),Lt(2),In("disabled",t.loading),Lt(2),ZE("ngModel",t.pageSize),Lt(),In("ngValue",5),Lt(2),In("ngValue",10),Lt(2),In("ngValue",20),Lt(2),In("disabled",t.loading)}}function ZFe(n,e){n&1&&(ce(0,"div",27),ge(1,"Loading\u2026"),le())}function e2e(n,e){if(n&1){let t=Xr();ce(0,"div",28),wn("click",function(){ci(t);let r=Yn();return li(r.showModal=!1)}),le()}}function t2e(n,e){if(n&1){let t=Xr();ce(0,"div",29)(1,"form",30),wn("ngSubmit",function(){ci(t);let r=Yn();return li(r.submit())}),ce(2,"h3"),ge(3),le(),ce(4,"label",31)(5,"span",32),ge(6,"Reminder title"),le(),Cn(7,"input",33),le(),ce(8,"div",34)(9,"label",31)(10,"span",32),ge(11,"Repeat"),le(),ce(12,"select",35)(13,"option"),ge(14,"Daily"),le(),ce(15,"option"),ge(16,"Weekly"),le(),ce(17,"option"),ge(18,"Monthly"),le()()(),ce(19,"label",31)(20,"span",32),ge(21,"Day"),le(),ce(22,"select",36)(23,"option"),ge(24,"Everyday"),le(),ce(25,"option"),ge(26,"Mon"),le(),ce(27,"option"),ge(28,"Tue"),le(),ce(29,"option"),ge(30,"Wed"),le(),ce(31,"option"),ge(32,"Thu"),le(),ce(33,"option"),ge(34,"Fri"),le(),ce(35,"option"),ge(36,"Sat"),le(),ce(37,"option"),ge(38,"Sun"),le()()()(),ce(39,"label",31)(40,"span",32),ge(41,"Time"),le(),Cn(42,"input",37),le(),ce(43,"div",38)(44,"button",39),wn("click",function(){ci(t);let r=Yn();return li(r.showModal=!1)}),ge(45,"Cancel"),le(),ce(46,"button",40),ge(47),le()()()()}if(n&2){let t=Yn();Lt(),In("formGroup",t.form),Lt(2),fs(t.editing?"Edit Reminder":"New Reminder"),Lt(44),fs(t.editing?"Save":"Schedule")}}var xR=class n{constructor(e,t){this.ns=e;this.fb=t;this.form=this.fb.group({title:["",c_.required],repeat:["Daily"],day:["Everyday"],time:["",[c_.required,c_.pattern(/^([01]\d|2[0-3]):([0-5]\d)$/)]]})}pageSize=5;notifications=[];loading=!1;lastDoc=null;pageStack=[];showModal=!1;editing=null;form;emptyMode=!1;ngOnInit(){this.loadFirstPage()}async loadFirstPage(){this.loading=!0,this.pageStack=[],this.lastDoc=null;let e=await this.ns.getNotificationsPage(this.pageSize);this.notifications=e.items,this.lastDoc=e.lastDoc||null,this.pageStack.push(this.lastDoc),this.emptyMode=this.notifications.length===0,this.loading=!1}async loadNext(){if(!this.lastDoc)return;this.loading=!0;let e=await this.ns.getNotificationsPage(this.pageSize,this.lastDoc);e.items.length?(this.pageStack.push(e.lastDoc||null),this.notifications=e.items,this.lastDoc=e.lastDoc||null):this.lastDoc=null,this.emptyMode=this.notifications.length===0,this.loading=!1}async loadPrevious(){if(this.pageStack.length<=1){await this.loadFirstPage();return}this.pageStack.pop();let e=this.pageStack[this.pageStack.length-1]||null;this.loading=!0;let t,i=this.pageStack.length-1,r=[];t=void 0;for(let s=0;s<=i;s++){let o=await this.ns.getNotificationsPage(this.pageSize,t);r=o.items,t=o.lastDoc||void 0}this.notifications=r,this.lastDoc=t||null,this.emptyMode=this.notifications.length===0,this.loading=!1}openCreate(){this.editing=null,this.form.reset({title:"",repeat:"Daily",day:"Everyday",time:""}),this.showModal=!0}openEdit(e){this.editing=e,this.form.patchValue({title:e.title,repeat:e.repeat,day:e.day,time:e.time}),this.showModal=!0}async submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let e={title:this.form.value.title,repeat:this.form.value.repeat,day:this.form.value.day,time:this.form.value.time};this.editing&&this.editing.id?await this.ns.updateNotification(this.editing.id,e):await this.ns.createNotification(e),await this.loadFirstPage(),this.showModal=!1}async delete(e){e.id&&confirm(`Delete "${e.title}"?`)&&(await this.ns.deleteNotification(e.id),await this.loadFirstPage())}static \u0275fac=function(t){return new(t||n)(mt(bR),mt(Lne))};static \u0275cmp=Rt({type:n,selectors:[["app-notifications"]],decls:11,vars:5,consts:[[1,"notifications-root"],[1,"topbar"],[1,"top-actions"],[1,"content"],[4,"ngIf"],["class","list-section",4,"ngIf"],["class","loading-strip",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true",4,"ngIf"],[1,"empty-state",3,"click"],[1,"empty-plus"],[1,"list-section"],["class","card",4,"ngFor","ngForOf"],[1,"pagination"],[1,"p-btn",3,"click","disabled"],[1,"page-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["aria-label","Add notification",1,"fab",3,"click"],[1,"card"],[1,"item-left"],[1,"title"],[1,"meta"],[1,"item-right"],[1,"time"],[1,"actions"],["title","Edit",1,"icon-btn",3,"click"],["title","Delete",1,"icon-btn",3,"click"],[1,"loading-strip"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"modal"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"label"],["type","text","formControlName","title","placeholder","e.g., Hydration reminder"],[1,"grid-2"],["formControlName","repeat"],["formControlName","day"],["type","time","formControlName","time"],[1,"modal-actions"],["type","button",1,"btn","ghost",3,"click"],["type","submit",1,"btn","primary"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"header",1)(2,"h2"),ge(3,"Notifications"),le(),Cn(4,"div",2),le(),ce(5,"main",3),Or(6,YFe,6,0,"ng-container",4)(7,JFe,16,7,"section",5)(8,ZFe,2,0,"div",6),le(),Or(9,e2e,1,0,"div",7)(10,t2e,48,3,"div",8),le()),t&2&&(Lt(6),In("ngIf",i.emptyMode&&!i.loading),Lt(),In("ngIf",!i.emptyMode),Lt(),In("ngIf",i.loading),Lt(),In("ngIf",i.showModal),Lt(),In("ngIf",i.showModal))},dependencies:[Ns,fS,ca,Fne,Mne,Pne,kne,mM,vM,xne,wne,Iz,Vne,Az,Cz,Oo,Fs,Lo],styles:[`[_nghost-%COMP%]{display:block;font-family:Inter,system-ui,-apple-system,sans-serif;color:#0f172a;--primary-color: #2563eb;--primary-hover: #1d4ed8;--bg-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);--card-bg: #ffffff;--text-main: #0f172a;--text-muted: #64748b;--border-color: #e2e8f0;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.notifications-root[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:2rem auto;padding:1.5rem;background:var(--bg-gradient);border-radius:1rem;box-shadow:var(--shadow-lg);position:relative;box-sizing:border-box}@media(max-width:640px){.notifications-root[_ngcontent-%COMP%]{margin:0;border-radius:0;min-height:100vh;padding:1rem}}.topbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:1rem;border-bottom:1px solid var(--border-color);margin-bottom:1rem}.topbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:1.5rem;color:var(--text-main);letter-spacing:-.025em}.list-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:var(--card-bg);border-radius:.75rem;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--text-main)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);display:flex;align-items:center;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-color);font-size:.875rem;background:#eff6ff;padding:.25rem .5rem;border-radius:.375rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media(max-width:400px){.card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}}.empty-state[_ngcontent-%COMP%]{min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;border:2px dashed var(--border-color);border-radius:1rem;cursor:pointer;background:#ffffff80;transition:background .2s}.empty-state[_ngcontent-%COMP%]:hover{background:#fffc}.empty-state[_ngcontent-%COMP%]   .empty-plus[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0f2fe;font-size:2rem;color:var(--primary-color);box-shadow:var(--shadow-sm)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-weight:500}.fab[_ngcontent-%COMP%]{position:fixed;right:2rem;bottom:2rem;width:3.5rem;height:3.5rem;border-radius:50%;border:none;background:var(--primary-color);color:#fff;font-size:1.75rem;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-lg);cursor:pointer;transition:transform .2s,background .2s;z-index:10}.fab[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:scale(1.05)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.p-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 1rem;border-radius:.5rem;cursor:pointer;font-weight:500;color:var(--text-main);transition:all .2s}.p-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc;border-color:#cbd5e1}.p-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-select[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 2rem .5rem 1rem;border-radius:.5rem;cursor:pointer;font-family:inherit;color:var(--text-main);outline:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .5rem center;background-size:1rem}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-size:1.1rem;padding:.5rem;border-radius:.375rem;color:var(--text-muted);transition:background .2s,color .2s}.icon-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.loading-strip[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:var(--text-muted);font-style:italic}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a99;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:40;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:90%;max-width:450px;background:#fff;border-radius:1rem;padding:1.5rem;z-index:50;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%,-40%);opacity:0}to{transform:translate(-50%,-50%);opacity:1}}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:700;color:var(--text-main)}.field[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.5rem}.field[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:.5rem;border:1px solid var(--border-color);background:#fff;outline:none;font-size:1rem;color:var(--text-main);transition:border-color .2s,box-shadow .2s;box-sizing:border-box}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #2563eb1a}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem 1.5rem;border:none;cursor:pointer;font-weight:600;font-size:.875rem;transition:all .2s}.btn.ghost[_ngcontent-%COMP%]{background:transparent;color:var(--text-muted)}.btn.ghost[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.btn.primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;box-shadow:0 4px 6px -1px #2563eb33}.btn.primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 6px 8px -1px #2563eb4d}`]})};var zre=()=>Wne(["login"]),Hre=()=>$ne(["dashboard"]),jre=[re({path:"",component:oA},B0(Hre)),re({path:"login",component:aA},B0(Hre)),{path:"logout",component:cA},re({path:"dashboard",component:sM},B0(zre)),re({path:"profile",component:bM},B0(zre)),{path:"banner",component:yR},{path:"no-internet",component:vR},{path:"notifications",component:xR},{path:"**",redirectTo:""}];var iH="Service workers are disabled or not supported by this browser",z_=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new gt(i=>i.error(new me(5601,!1)));else{let i=null,r=new At;this.worker=new gt(l=>(i!==null&&l.next(i),r.subscribe(u=>l.next(u))));let s=()=>{let{controller:l}=e;l!==null&&(i=l,r.next(i))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(yi(()=>e.getRegistration().then(l=>{if(!l)throw new me(5601,!1);return l})));let o=new At;this.events=o.asObservable();let a=l=>{let{data:u}=l;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(xr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(i=>{this.worker.pipe(zi(1)).subscribe(r=>{r.postMessage(re({action:e},t)),i()})})}postMessageWithOperation(e,t,i){let r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=i=>i.type===e:t=i=>e.includes(i.type),this.events.pipe(ei(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(zi(1))}waitForOperationCompleted(e){return new Promise((t,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(ei(r=>r.nonce===e),zi(1),pt(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:i})})}get isEnabled(){return!!this.serviceWorker}},n2e=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new At;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Fc,this.notificationClicks=Fc,this.notificationCloses=Fc,this.pushSubscriptionChanges=Fc,this.subscription=Fc;return}this.messages=this.sw.eventsOfType("PUSH").pipe(pt(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(pt(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(pt(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(pt(r=>r.data)),this.pushManager=this.sw.registration.pipe(pt(r=>r.pushManager));let i=this.pushManager.pipe(yi(r=>r.getSubscription()));this.subscription=new gt(r=>{let s=i.subscribe(r),o=this.subscriptionChanges.subscribe(r);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(iH));let i={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(yi(c=>c.subscribe(i)),zi(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(iH));let t=i=>{if(i===null)throw new me(5602,!1);return i.unsubscribe().then(r=>{if(!r)throw new me(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,r)=>{this.subscription.pipe(zi(1),yi(t)).subscribe({next:i,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||n)(st(z_))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),i2e=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Fc,this.unrecoverable=Fc;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(iH));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new me(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||n)(st(z_))};static \u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),Wre=new Te("");function r2e(){let n=H(kx);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=H(Wre),t=H(_t),i=H(xr);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,s=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",s),i.onDestroy(()=>{r.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:s}=n;if(typeof s=="function")r=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Gre(+a[0]||0);break;case"registerWhenStable":r=Promise.race([i.whenStable(),Gre(+a[0])]);break;default:throw new me(5600,!1)}}r.then(()=>{i.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(Ha(5604,!1)))})})}function Gre(n){return new Promise(e=>setTimeout(e,n))}function s2e(){let n=H(kx),e=H(Yt),t=!0;return new z_(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var kx=class{enabled;updateViaCache;type;scope;registrationStrategy};function $re(n,e={}){return vr([n2e,i2e,{provide:Wre,useValue:n},{provide:kx,useValue:e},{provide:z_,useFactory:s2e},WE(r2e)])}var qre={providers:[SP(),Yk(jre),uW(),HW(()=>jW(Tf.firebase)),Mq(()=>Dq()),_Q(()=>SQ()),$re("ngsw-worker.js",{enabled:!Qy(),registrationStrategy:"registerWhenStable:30000"})]};var o2e=["*",[["mat-toolbar-row"]]],a2e=["*","mat-toolbar-row"],c2e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),Kre=(()=>{class n{_elementRef=H(tn);_platform=H(qi);_document=H(zt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Ms(s,c2e,5),i&2){let o;Qi(o=Ji())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(il(r.color?"mat-"+r.color:""),oi("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:a2e,decls:2,vars:0,template:function(i,r){i&1&&(fr(o2e),$n(0),$n(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return n})();var wR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi]})}return n})();var Ox=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},rH=class extends Ox{component;viewContainerRef;injector;projectableNodes;constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=r}},H_=class extends Ox{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},sH=class extends Ox{element;constructor(e){super(),this.element=e instanceof tn?e.nativeElement:e}},oH=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof rH)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof H_)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof sH)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Lx=class extends oH{outletElement;_appRef;_defaultInjector;constructor(e,t,i){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=i}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(Xc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||Yt.NULL,s=r.get(ti,i.injector);t=rS(e.component,{elementInjector:r,environmentInjector:s,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Xre=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({})}return n})();var u2e=20,SR=(()=>{class n{_ngZone=H(_t);_platform=H(qi);_renderer=H(Yi).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new At;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=u2e){return this._platform.isBrowser?new gt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(Mw(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):bt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ei(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_scrollableContainsElement(t,i){let r=Po(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d2e=20,j_=(()=>{class n{_platform=H(qi);_listeners;_viewportSize;_change=new At;_document=H(zt);constructor(){let t=H(_t),i=H(Yi).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(t=d2e){return t>0?this._change.pipe(Mw(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ER=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({})}return n})(),aH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Mi,ER,Mi,ER]})}return n})();var Yre=HQ();function ise(n){return new TR(n.get(j_),n.get(zt))}var TR=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ki(-this._previousScrollPosition.left),e.style.top=Ki(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Yre&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Yre&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};function rse(n,e){return new IR(n.get(SR),n.get(_t),n.get(j_),e)}var IR=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ei(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Fx=class{enable(){}disable(){}attach(){}};function cH(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function Qre(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}function PR(n,e){return new CR(n.get(SR),n.get(j_),n.get(_t),e)}var CR=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();cH(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sse=(()=>{class n{_injector=H(Yt);constructor(){}noop=()=>new Fx;close=t=>rse(this._injector,t);block=()=>ise(this._injector);reposition=t=>PR(this._injector,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G_=class{positionStrategy;scrollStrategy=new Fx;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var AR=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var ose=(()=>{class n{_attachedOverlays=[];_document=H(zt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ase=(()=>{class n extends ose{_ngZone=H(_t);_renderer=H(Yi).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cse=(()=>{class n extends ose{_platform=H(qi);_ngZone=H(_t);_renderer=H(Yi).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0},s=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[s.listen(i,"pointerdown",this._pointerDownListener,r),s.listen(i,"click",this._clickListener,r),s.listen(i,"auxclick",this._clickListener,r),s.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=Ls(t)};_clickListener=t=>{let i=Ls(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Jre(a.overlayElement,i)||Jre(a.overlayElement,r))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=br(n)))(r||n)}})();static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jre(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var lse=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return n})(),use=(()=>{class n{_platform=H(qi);_containerElement;_document=H(zt);_styleLoader=H(No);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||XU()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),XU()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(lse)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lH=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function uH(n){return n&&n.nodeType===1}var MR=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new At;_attachments=new At;_detachments=new At;_positionStrategy;_scrollStrategy;_locationChanges=Nn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new At;_outsidePointerEvents=new At;_afterNextRenderRef;constructor(e,t,i,r,s,o,a,c,l,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){this._attachHost();let t=this._portalOutlet.attach(e);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Xa(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=re(re({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ct(re({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ki(this._config.width),e.height=Ki(this._config.height),e.minWidth=Ki(this._config.minWidth),e.minHeight=Ki(this._config.minHeight),e.maxWidth=Ki(this._config.maxWidth),e.maxHeight=Ki(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachHost(){if(!this._host.parentElement){let e=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;uH(e)?e.after(this._host):e?.type==="parent"?e.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new lH(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=GU(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=Xa(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},Zre="cdk-overlay-connected-position-bounding-box",h2e=/([A-Za-z%]+)$/;function NR(n,e){return new DR(e,n.get(j_),n.get(zt),n.get(qi),n.get(use))}var DR=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new At;_resizeSubscription=Nn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(Zre),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&lp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Zre),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}withPopoverLocation(e){return this._popoverLocation=e,this}getPopoverInsertionPoint(){return this._popoverLocation==="global"?null:this._popoverLocation!=="inline"?this._popoverLocation:this._origin instanceof tn?this._origin.nativeElement:uH(this._origin)?this._origin:null}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=tse(t),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,f=a+s.height-i.height,g=this._subtractOverflows(s.width,u,d),v=this._subtractOverflows(s.height,h,f),_=g*v;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:v===s.height,fitsInViewportHorizontally:g==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=ese(this._overlayRef.getConfig().minHeight),a=ese(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=tse(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._getViewportMarginStart()?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._getViewportMarginTop()?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!f2e(this._lastScrollVisibility,i)){let r=new AR(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(t.overlayY==="top")o=e.y,s=i.height-o+this._getViewportMarginBottom();else if(t.overlayY==="bottom")a=i.height-e.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),s=i.height-a+this._getViewportMarginTop();else{let f=Math.min(i.bottom-e.y+i.top,e.y),g=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>g&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-g/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,l=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),u=e.x-this._getViewportMarginStart();else if(c)d=e.x,u=i.right-e.x-this._getViewportMarginEnd();else{let f=Math.min(i.right-e.x+i.left,e.x),g=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>g&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-g/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="auto",r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.width=Ki(i.width),r.height=Ki(i.height),r.top=Ki(i.top)||"auto",r.bottom=Ki(i.bottom)||"auto",r.left=Ki(i.left)||"auto",r.right=Ki(i.right)||"auto",t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Ki(s)),o&&(r.maxWidth=Ki(o))}this._lastBoundingBoxSize=i,lp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){lp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){lp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();lp(i,this._getExactOverlayY(t,e,u)),lp(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Ki(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ki(o.maxWidth):s&&(i.maxWidth="")),lp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Ki(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Ki(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Qre(e,i),isOriginOutsideView:cH(e,i),isOverlayClipped:Qre(t,i),isOverlayOutsideView:cH(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._getViewportMarginTop(),left:i.left+this._getViewportMarginStart(),right:i.left+e-this._getViewportMarginEnd(),bottom:i.top+t-this._getViewportMarginBottom(),width:e-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:t-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&GU(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){let e=this._origin;if(e instanceof tn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function lp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ese(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(h2e);return!t||t==="px"?parseFloat(e):null}return n||null}function tse(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function f2e(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var nse="cdk-global-overlay-wrapper";function dse(n){return new RR}var RR=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(nse),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",g="",v="";c?v="flex-start":u==="center"?(v="center",h?g=d:f=d):h?u==="left"||u==="end"?(v="flex-end",f=d):(u==="right"||u==="start")&&(v="flex-start",g=d):u==="left"||u==="start"?(v="flex-start",f=d):(u==="right"||u==="end")&&(v="flex-end",g=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":g,t.justifyContent=v,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(nse),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},hse=(()=>{class n{_injector=H(Yt);constructor(){}global(){return dse()}flexibleConnectedTo(t){return NR(this._injector,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fse=new Te("OVERLAY_DEFAULT_CONFIG");function kR(n,e){n.get(No).load(lse);let t=n.get(use),i=n.get(zt),r=n.get(Mf),s=n.get(xr),o=n.get(r0),a=n.get(kr,null,{optional:!0})||n.get(Yi).createRenderer(null,null),c=new G_(e),l=n.get(fse,null,{optional:!0})?.usePopover??!0;c.direction=c.direction||o.value,"showPopover"in i.body?c.usePopover=e?.usePopover??l:c.usePopover=!1;let u=i.createElement("div"),d=i.createElement("div");u.id=r.getId("cdk-overlay-"),u.classList.add("cdk-overlay-pane"),d.appendChild(u),c.usePopover&&(d.setAttribute("popover","manual"),d.classList.add("cdk-overlay-popover"));let h=c.usePopover?c.positionStrategy?.getPopoverInsertionPoint?.():null;return t.getContainerElement().appendChild(d),uH(h)?h.after(d):h?.type==="parent"&&h.element.appendChild(d),new MR(new Lx(u,s,n),d,u,c,n.get(_t),n.get(ase),i,n.get(Bu),n.get(cse),e?.disableAnimations??n.get(Fu,null,{optional:!0})==="NoopAnimations",n.get(ti),a)}var pse=(()=>{class n{scrollStrategies=H(sse);_positionBuilder=H(hse);_injector=H(Yt);constructor(){}create(t){return kR(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({providers:[pse],imports:[Mi,Xre,aH,aH]})}return n})();var _2e=["mat-menu-item",""],y2e=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],v2e=["mat-icon, [matMenuItemIcon]","*"];function b2e(n,e){n&1&&(Wc(),ce(0,"svg",2),Cn(1,"polygon",3),le())}var x2e=["*"];function w2e(n,e){if(n&1){let t=Xr();Lr(0,"div",0),YE("click",function(){ci(t);let r=Yn();return li(r.closed.emit("click"))})("animationstart",function(r){ci(t);let s=Yn();return li(s._onAnimationStart(r.animationName))})("animationend",function(r){ci(t);let s=Yn();return li(s._onAnimationDone(r.animationName))})("animationcancel",function(r){ci(t);let s=Yn();return li(s._onAnimationDone(r.animationName))}),Lr(1,"div",1),$n(2),Kr()()}if(n&2){let t=Yn();il(t._classList),oi("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation",t._panelAnimationState==="void")("mat-menu-panel-animating",t._isAnimating()),XE("id",t.panelId),Gi("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var fH=new Te("MAT_MENU_PANEL"),Vx=(()=>{class n{_elementRef=H(tn);_document=H(zt);_focusMonitor=H(Ng);_parentMenu=H(fH,{optional:!0});_changeDetectorRef=H(Rs);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new At;_focused=new At;_highlighted=!1;_triggersSubmenu=!1;constructor(){H(No).load(Og),this._parentMenu?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&wn("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(Gi("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),oi("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Pi],disableRipple:[2,"disableRipple","disableRipple",Pi]},exportAs:["matMenuItem"],attrs:_2e,ngContentSelectors:v2e,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(fr(y2e),$n(0),ce(1,"span",0),$n(2,1),le(),Cn(3,"div",1),qE(4,b2e,2,0,":svg:svg",2)),i&2&&(Lt(3),In("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),Lt(),KE(r._triggersSubmenu?4:-1))},dependencies:[KQ],encapsulation:2,changeDetection:0})}return n})();var E2e=new Te("MatMenuContent");var S2e=new Te("mat-menu-default-options",{providedIn:"root",factory:()=>({overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"})}),hH="_mat-menu-enter",OR="_mat-menu-exit",$_=(()=>{class n{_elementRef=H(tn);_changeDetectorRef=H(Rs);_injector=H(Yt);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=Ta();_allItems;_directDescendantItems=new qc;_classList={};_panelAnimationState="void";_animationDone=new At;_isAnimating=bi(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){let i=this._previousPanelClass,r=re({},this._classList);i&&i.length&&i.split(" ").forEach(s=>{r[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{r[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new yn;close=this.closed;panelId=H(Mf).getId("mat-menu-panel-");constructor(){let t=H(S2e);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new t0(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Uc(this._directDescendantItems),yi(t=>dh(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Uc(this._directDescendantItems),yi(i=>dh(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let i=t.keyCode,r=this._keyManager;switch(i){case 27:QC(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(t);return}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Xa(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,i=this.yPosition){this._classList=ct(re({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(t){let i=t===OR;(i||t===hH)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(t){(t===hH||t===OR)&&this._isAnimating.set(!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(OR),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?hH:OR)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Uc(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Rt({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,s){if(i&1&&(Ms(s,E2e,5),Ms(s,Vx,5),Ms(s,Vx,4)),i&2){let o;Qi(o=Ji())&&(r.lazyContent=o.first),Qi(o=Ji())&&(r._allItems=o),Qi(o=Ji())&&(r.items=o)}},viewQuery:function(i,r){if(i&1&&nl(Zs,5),i&2){let s;Qi(s=Ji())&&(r.templateRef=s.first)}},hostVars:3,hostBindings:function(i,r){i&2&&Gi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Pi],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:Pi(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Ds([{provide:fH,useExisting:n}])],ngContentSelectors:x2e,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(fr(),HE(0,w2e,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{border-top-color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),T2e=new Te("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=H(Yt);return()=>PR(n)}});var W_=new WeakMap,I2e=(()=>{class n{_canHaveBackdrop;_element=H(tn);_viewContainerRef=H(As);_menuItemInstance=H(Vx,{optional:!0,self:!0});_dir=H(r0,{optional:!0});_focusMonitor=H(Ng);_ngZone=H(_t);_injector=H(Yt);_scrollStrategy=H(T2e);_changeDetectorRef=H(Rs);_animationsDisabled=Ta();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Nn.EMPTY;_menuCloseSubscription=Nn.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(t){t!==this._menuInternal&&(this._menuInternal=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(t){this._canHaveBackdrop=t;let i=H(fH,{optional:!0});this._parentMaterialMenu=i instanceof $_?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&W_.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(t){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let r=W_.get(i);W_.set(i,this),r&&r!==this&&r._closeMenu();let s=this._createOverlay(i),o=s.getConfig(),a=o.positionStrategy;this._setPosition(i,a),this._canHaveBackdrop?o.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:o.hasBackdrop=!1,s.hasAttached()||(s.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,t&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof $_&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Ba(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}_destroyMenu(t){let i=this._overlayRef,r=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),r instanceof $_&&this._ownsMenu(r)?(this._pendingRemoval=r._animationDone.pipe(zi(1)).subscribe(()=>{i.detach(),W_.has(r)||r.lazyContent?.detach()}),r._setIsOpen(!1)):(i.detach(),r?.lazyContent?.detach()),r&&this._ownsMenu(r)&&W_.delete(r),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=kR(this._injector,i),this._overlayRef.keydownEvents().subscribe(r=>{this._menu instanceof $_&&this._menu._handleKeydown(r)})}return this._overlayRef}_getOverlayConfig(t){return new G_({positionStrategy:NR(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{this._ngZone.run(()=>{let s=r.connectionPair.overlayX==="start"?"after":"before",o=r.connectionPair.overlayY==="top"?"below":"above";t.setPositionClasses(s,o)})})}_setPosition(t,i){let[r,s]=t.xPosition==="before"?["end","start"]:["start","end"],[o,a]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,d]=[r,s],h=0;if(this._triggersSubmenu()){if(d=r=t.xPosition==="before"?"start":"end",s=u=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let f=this._parentMaterialMenu.items.first;this._parentInnerPadding=f?f._getHostElement().offsetTop:0}h=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c=o==="top"?"bottom":"top",l=a==="top"?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:h},{originX:s,originY:c,overlayX:d,overlayY:o,offsetY:h},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-h},{originX:s,originY:l,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){let t=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:bt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ei(o=>this._menuOpen&&o!==this._menuItemInstance)):bt();return dh(t,r,s,i)}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new H_(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return W_.get(t)===this}static \u0275fac=function(i){VE()};static \u0275dir=xt({type:n})}return n})(),mse=(()=>{class n extends I2e{_cleanupTouchstart;_hoverSubscription=Nn.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){this._menu=t}menuData;restoreFocus=!0;menuOpened=new yn;onMenuOpen=this.menuOpened;menuClosed=new yn;onMenuClose=this.menuClosed;constructor(){super(!0);let t=H(kr);this._cleanupTouchstart=t.listen(this._element.nativeElement,"touchstart",i=>{Cf(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(t){return t.backdropClick()}_handleMousedown(t){If(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let i=t.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&wn("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),i&2&&Gi("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu==null?null:r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[ui]})}return n})();var gse=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qt({type:n});static \u0275inj=Gt({imports:[Lg,dH,Mi,ER]})}return n})();function A2e(n,e){n&1&&(Nh(0),ce(1,"a",13)(2,"mat-icon"),ge(3,"dashboard"),le(),ge(4," Dashboard "),le(),ce(5,"a",14)(6,"mat-icon"),ge(7,"person"),le(),ge(8," Profile "),le(),kh())}function M2e(n,e){n&1&&(Nh(0),ce(1,"a",15)(2,"mat-icon"),ge(3,"dashboard"),le(),ce(4,"span"),ge(5,"Dashboard"),le()(),ce(6,"a",16)(7,"mat-icon"),ge(8,"person"),le(),ce(9,"span"),ge(10,"Profile"),le()(),kh())}var LR=class n{authService=H(Vs);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-header"]],decls:26,vars:7,consts:[["menu","matMenu"],["color","primary",1,"app-header"],["routerLink","/",1,"logo"],["src","icons/la-logo.png","alt","LA Logo",1,"logo-img"],[1,"logo-text"],[1,"spacer"],[1,"desktop-nav"],["mat-button","","href","https://la.vvsk.in","target","_blank"],[4,"ngIf"],[1,"mobile-nav"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","","href","https://la.vvsk.in","target","_blank"],["mat-button","","routerLink","/dashboard"],["mat-button","","routerLink","/profile"],["mat-menu-item","","routerLink","/dashboard"],["mat-menu-item","","routerLink","/profile"]],template:function(t,i){if(t&1&&(ce(0,"mat-toolbar",1)(1,"div",2),Cn(2,"img",3),ce(3,"span",4),ge(4,"Lifestyle Adapter"),le()(),Cn(5,"span",5),ce(6,"div",6)(7,"a",7)(8,"mat-icon"),ge(9,"library_books"),le(),ge(10," LA Framework 1.0 "),le(),Or(11,A2e,9,0,"ng-container",8),rl(12,"async"),le(),ce(13,"div",9)(14,"button",10)(15,"mat-icon"),ge(16,"menu"),le()(),ce(17,"mat-menu",11,0)(19,"a",12)(20,"mat-icon"),ge(21,"library_books"),le(),ce(22,"span"),ge(23,"LA Framework 1.0"),le()(),Or(24,M2e,11,0,"ng-container",8),rl(25,"async"),le()()()),t&2){let r=QE(18);Lt(11),In("ngIf",Vu(12,3,i.user$)),Lt(3),In("matMenuTriggerFor",r),Lt(10),In("ngIf",Vu(25,5,i.user$))}},dependencies:[wR,Kre,Oo,yd,tB,KS,Ns,ca,Fs,mc,gse,$_,Vx,mse,Oh],styles:[".app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer}.logo-img[_ngcontent-%COMP%]{height:40px;width:auto}.logo-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;letter-spacing:.5px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mobile-nav[_ngcontent-%COMP%]{display:none}@media(max-width:768px){.desktop-nav[_ngcontent-%COMP%]{display:none}.mobile-nav[_ngcontent-%COMP%]{display:block}.logo-text[_ngcontent-%COMP%]{font-size:1rem}.logo-img[_ngcontent-%COMP%]{height:32px}}"]})};var FR=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["href","#"]],template:function(t,i){t&1&&(Lr(0,"footer",0)(1,"div",1)(2,"p"),ge(3,"\xA9 2026 Lifestyle Adapter. All rights reserved."),Kr(),Lr(4,"div",2)(5,"a",3),ge(6,"Privacy Policy"),Kr(),Lr(7,"a",3),ge(8,"Terms of Service"),Kr()()()())},dependencies:[wR],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:20px 0;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;margin-left:20px;font-size:.9rem;transition:color .3s}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px}}"]})};var VR=class n{title="lifestyle-adapter";router=H(io);ngOnInit(){window.matchMedia("(display-mode: standalone)").matches&&(navigator.onLine||this.router.navigate(["/no-internet"]))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"content"]],template:function(t,i){t&1&&(Cn(0,"app-header"),ce(1,"main",0),Cn(2,"router-outlet"),le(),Cn(3,"app-footer"))},dependencies:[Sv,LR,FR],styles:[".content[_ngcontent-%COMP%]{min-height:calc(100vh - 128px);padding:20px}"]})};xk(VR,qre).catch(n=>console.error(n));
