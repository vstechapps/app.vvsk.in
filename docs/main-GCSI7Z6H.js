var $W=Object.defineProperty,HW=Object.defineProperties;var qW=Object.getOwnPropertyDescriptors;var p_=Object.getOwnPropertySymbols;var TO=Object.prototype.hasOwnProperty,SO=Object.prototype.propertyIsEnumerable;var IO=(n,e,t)=>e in n?$W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})TO.call(e,t)&&IO(n,t,e[t]);if(p_)for(var t of p_(e))SO.call(e,t)&&IO(n,t,e[t]);return n},Ve=(n,e)=>HW(n,qW(e));var od=(n,e)=>{var t={};for(var r in n)TO.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&p_)for(var r of p_(n))e.indexOf(r)<0&&SO.call(n,r)&&(t[r]=n[r]);return t};var Un=null,m_=!1,h0=1,WW=null,Zr=Symbol("SIGNAL");function Pe(n){let e=Un;return Un=n,e}function g_(){return Un}var y_={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function __(n){if(m_)throw new Error("");if(Un===null)return;Un.consumerOnSignalRead(n);let e=Un.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Un.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Un.producers,t!==void 0&&t.producer===n)){Un.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Un&&(!r||KW(i,Un)))return;let s=ad(Un),o={producer:n,consumer:Un,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Un.producersTail=o,e!==void 0?e.nextProducer=o:Un.producers=o,s&&RO(n,o)}function CO(){h0++}function DO(n){if(!(ad(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===h0)){if(!n.producerMustRecompute(n)&&!b_(n)){d0(n);return}n.producerRecomputeValue(n),d0(n)}}function f0(n){if(n.consumers===void 0)return;let e=m_;m_=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||GW(r)}}finally{m_=e}}function p0(){return Un?.consumerAllowSignalWrites!==!1}function GW(n){n.dirty=!0,f0(n),n.consumerMarkedDirty?.(n)}function d0(n){n.dirty=!1,n.lastCleanEpoch=h0}function v_(n){return n&&AO(n),Pe(n)}function AO(n){n.producersTail=void 0,n.recomputing=!0}function m0(n,e){Pe(e),n&&xO(n)}function xO(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ad(n))do t=g0(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function b_(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(DO(t),r!==t.version))return!0}return!1}function mp(n){if(ad(n)){let e=n.producers;for(;e!==void 0;)e=g0(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function RO(n,e){let t=n.consumersTail,r=ad(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)RO(i.producer,i)}function g0(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ad(e)){let s=e.producers;for(;s!==void 0;)s=g0(s)}return t}function ad(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function kO(n){WW?.(n)}function KW(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function PO(n,e){return Object.is(n,e)}function QW(){throw new Error}var MO=QW;function NO(n){MO(n)}function y0(n){MO=n}var YW=null;function _0(n,e){let t=Object.create(w_);t.value=n,e!==void 0&&(t.equal=e);let r=()=>OO(t);return r[Zr]=t,kO(t),[r,o=>gp(t,o),o=>LO(t,o)]}function OO(n){return __(n),n.value}function gp(n,e){p0()||NO(n),n.equal(n.value,e)||(n.value=e,XW(n))}function LO(n,e){p0()||NO(n),gp(n,e(n.value))}var w_=Ve(H({},y_),{equal:PO,value:void 0,kind:"signal"});function XW(n){n.version++,CO(),f0(n),YW?.(n)}function v0(n){let e=Pe(null);try{return n()}finally{Pe(e)}}function Te(n){return typeof n=="function"}function cd(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var E_=cd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function nl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof E_?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{FO(s)}catch(o){e=e??[],o instanceof E_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new E_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FO(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&nl(t,e)}remove(e){let{_finalizers:t}=this;t&&nl(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var b0=Mt.EMPTY;function I_(n){return n instanceof Mt||n&&"closed"in n&&Te(n.remove)&&Te(n.add)&&Te(n.unsubscribe)}function FO(n){Te(n)?n():n.unsubscribe()}var Ii={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ld={setTimeout(n,e,...t){let{delegate:r}=ld;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ld;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function T_(n){ld.setTimeout(()=>{let{onUnhandledError:e}=Ii;if(e)e(n);else throw n})}function rl(){}var VO=w0("C",void 0,void 0);function UO(n){return w0("E",void 0,n)}function jO(n){return w0("N",n,void 0)}function w0(n,e,t){return{kind:n,value:e,error:t}}var il=null;function ud(n){if(Ii.useDeprecatedSynchronousErrorHandling){let e=!il;if(e&&(il={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=il;if(il=null,t)throw r}}else n()}function BO(n){Ii.useDeprecatedSynchronousErrorHandling&&il&&(il.errorThrown=!0,il.error=n)}var sl=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,I_(e)&&e.add(this)):this.destination=eG}static create(e,t,r){return new Zs(e,t,r)}next(e){this.isStopped?I0(jO(e),this):this._next(e)}error(e){this.isStopped?I0(UO(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?I0(VO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JW=Function.prototype.bind;function E0(n,e){return JW.call(n,e)}var T0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){S_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){S_(r)}else S_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){S_(t)}}},Zs=class extends sl{constructor(e,t,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ii.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&E0(e.next,s),error:e.error&&E0(e.error,s),complete:e.complete&&E0(e.complete,s)}):i=e}this.destination=new T0(i)}};function S_(n){Ii.useDeprecatedSynchronousErrorHandling?BO(n):T_(n)}function ZW(n){throw n}function I0(n,e){let{onStoppedNotification:t}=Ii;t&&ld.setTimeout(()=>t(n,e))}var eG={closed:!0,next:rl,error:ZW,complete:rl};var dd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Or(n){return n}function ol(...n){return S0(n)}function S0(n){return n.length===0?Or:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=nG(t)?t:new Zs(t,r,i);return ud(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=zO(r),new r((i,s)=>{let o=new Zs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[dd](){return this}pipe(...t){return S0(t)(this)}toPromise(t){return t=zO(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function zO(n){var e;return(e=n??Ii.Promise)!==null&&e!==void 0?e:Promise}function tG(n){return n&&Te(n.next)&&Te(n.error)&&Te(n.complete)}function nG(n){return n&&n instanceof sl||tG(n)&&I_(n)}function rG(n){return Te(n?.lift)}function Be(n){return e=>{if(rG(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ge(n,e,t,r,i){return new C0(n,e,t,r,i)}var C0=class extends sl{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var $O=cd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new C_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $O}next(t){ud(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ud(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ud(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?b0:(this.currentObservers=null,s.push(t),new Mt(()=>{this.currentObservers=null,nl(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new C_(e,t),n})(),C_=class extends ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:b0}};var qt=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var D0={now(){return(D0.delegate||Date).now()},delegate:void 0};var D_=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var yp={setInterval(n,e,...t){let{delegate:r}=yp;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=yp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var hd=class extends D_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return yp.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&yp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,nl(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var fd=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};fd.now=D0.now;var pd=class extends fd{constructor(e,t=fd.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _p=new pd(hd);var A_=class extends hd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var x_=class extends pd{};var A0=new x_(A_);var jn=new ue(n=>n.complete());function HO(n){return n&&Te(n.schedule)}function x0(n){return n[n.length-1]}function R_(n){return Te(x0(n))?n.pop():void 0}function is(n){return HO(x0(n))?n.pop():void 0}function qO(n,e){return typeof x0(n)=="number"?n.pop():e}function k_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function GO(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function WO(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function al(n){return this instanceof al?(this.v=n,this):new al(n)}function KO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(E){return Promise.resolve(E).then(m,f)}}function a(m,E){r[m]&&(i[m]=function(C){return new Promise(function(S,P){s.push([m,C,S,P])>1||c(m,C)})},E&&(i[m]=E(i[m])))}function c(m,E){try{l(r[m](E))}catch(C){p(s[0][3],C)}}function l(m){m.value instanceof al?Promise.resolve(m.value.v).then(u,f):p(s[0][2],m)}function u(m){c("next",m)}function f(m){c("throw",m)}function p(m,E){m(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function QO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WO=="function"?WO(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var P_=n=>n&&typeof n.length=="number"&&typeof n!="function";function M_(n){return Te(n?.then)}function N_(n){return Te(n[dd])}function O_(n){return Symbol.asyncIterator&&Te(n?.[Symbol.asyncIterator])}function L_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var F_=iG();function V_(n){return Te(n?.[F_])}function U_(n){return KO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield al(t.read());if(i)return yield al(void 0);yield yield al(r)}}finally{t.releaseLock()}})}function j_(n){return Te(n?.getReader)}function Ct(n){if(n instanceof ue)return n;if(n!=null){if(N_(n))return sG(n);if(P_(n))return oG(n);if(M_(n))return aG(n);if(O_(n))return YO(n);if(V_(n))return cG(n);if(j_(n))return lG(n)}throw L_(n)}function sG(n){return new ue(e=>{let t=n[dd]();if(Te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oG(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function aG(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,T_)})}function cG(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function YO(n){return new ue(e=>{uG(n,e).catch(t=>e.error(t))})}function lG(n){return YO(U_(n))}function uG(n,e){var t,r,i,s;return GO(this,void 0,void 0,function*(){try{for(t=QO(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ur(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Da(n,e=0){return Be((t,r)=>{t.subscribe(Ge(r,i=>ur(r,n,()=>r.next(i),e),()=>ur(r,n,()=>r.complete(),e),i=>ur(r,n,()=>r.error(i),e)))})}function Aa(n,e=0){return Be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function XO(n,e){return Ct(n).pipe(Aa(e),Da(e))}function JO(n,e){return Ct(n).pipe(Aa(e),Da(e))}function ZO(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eL(n,e){return new ue(t=>{let r;return ur(t,e,()=>{r=n[F_](),ur(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function B_(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{ur(t,e,()=>{let r=n[Symbol.asyncIterator]();ur(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tL(n,e){return B_(U_(n),e)}function nL(n,e){if(n!=null){if(N_(n))return XO(n,e);if(P_(n))return ZO(n,e);if(M_(n))return JO(n,e);if(O_(n))return B_(n,e);if(V_(n))return eL(n,e);if(j_(n))return tL(n,e)}throw L_(n)}function jt(n,e){return e?nL(n,e):Ct(n)}function he(...n){let e=is(n);return jt(n,e)}function vp(n,e){let t=Te(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function z_(n){return!!n&&(n instanceof ue||Te(n.lift)&&Te(n.subscribe))}var cl=cd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function de(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ge(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:dG}=Array;function hG(n,e){return dG(e)?n(...e):n(e)}function $_(n){return de(e=>hG(n,e))}var{isArray:fG}=Array,{getPrototypeOf:pG,prototype:mG,keys:gG}=Object;function H_(n){if(n.length===1){let e=n[0];if(fG(e))return{args:e,keys:null};if(yG(e)){let t=gG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function yG(n){return n&&typeof n=="object"&&pG(n)===mG}function q_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function R0(...n){let e=is(n),t=R_(n),{args:r,keys:i}=H_(n);if(r.length===0)return jt([],e);let s=new ue(_G(r,e,i?o=>q_(i,o):Or));return t?s.pipe($_(t)):s}function _G(n,e,t=Or){return r=>{rL(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)rL(e,()=>{let l=jt(n[c],e),u=!1;l.subscribe(Ge(r,f=>{s[c]=f,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function rL(n,e,t){n?ur(t,n,e):e()}function iL(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},m=C=>l<r?E(C):c.push(C),E=C=>{s&&e.next(C),l++;let S=!1;Ct(t(C,u++)).subscribe(Ge(e,P=>{i?.(P),s?m(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?ur(e,o,()=>E(P)):E(P)}p()}catch(P){e.error(P)}}))};return n.subscribe(Ge(e,m,()=>{f=!0,p()})),()=>{a?.()}}function Jn(n,e,t=1/0){return Te(e)?Jn((r,i)=>de((s,o)=>e(r,s,i,o))(Ct(n(r,i))),t):(typeof e=="number"&&(t=e),Be((r,i)=>iL(r,i,n,t)))}function W_(n=1/0){return Jn(Or,n)}function sL(){return W_(1)}function md(...n){return sL()(jt(n,is(n)))}function bp(n){return new ue(e=>{Ct(n()).subscribe(e)})}function k0(...n){let e=R_(n),{args:t,keys:r}=H_(n),i=new ue(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let f=!1;Ct(t[u]).subscribe(Ge(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?q_(r,a):a),s.complete())}))}});return e?i.pipe($_(e)):i}function P0(...n){let e=is(n),t=qO(n,1/0),r=n;return r.length?r.length===1?Ct(r[0]):W_(t)(jt(r,e)):jn}var eo=new ue(rl);function Jt(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ge(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ll(n){return Be((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ge(t,void 0,void 0,o=>{s=Ct(n(o,ll(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function gd(n,e){return Te(e)?Jn(n,e,1):Jn(n,1)}function M0(n,e=_p){return Be((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(Ge(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function N0(n){return Be((e,t)=>{let r=!1;e.subscribe(Ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pn(n){return n<=0?()=>jn:Be((e,t)=>{let r=0;e.subscribe(Ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yd(n,e=Or){return n=n??vG,Be((t,r)=>{let i,s=!0;t.subscribe(Ge(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function vG(n,e){return n===e}function oL(n=bG){return Be((e,t)=>{let r=!1;e.subscribe(Ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bG(){return new cl}function ul(n){return Be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function to(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Jt((i,s)=>n(i,s,r)):Or,pn(1),t?N0(e):oL(()=>new cl))}function G_(n){return n<=0?()=>jn:Be((e,t)=>{let r=[];e.subscribe(Ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function L0(n={}){let{connector:e=()=>new ut,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,u=f=!1},E=()=>{let C=o;m(),C?.unsubscribe()};return Be((C,S)=>{l++,!f&&!u&&p();let P=c=c??e();S.add(()=>{l--,l===0&&!f&&!u&&(a=O0(E,i))}),P.subscribe(S),!o&&l>0&&(o=new Zs({next:M=>P.next(M),error:M=>{f=!0,p(),a=O0(m,t,M),P.error(M)},complete:()=>{u=!0,p(),a=O0(m,r),P.complete()}}),Ct(C).subscribe(o))})(s)}}function O0(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Zs({next:()=>{r.unsubscribe(),n()}});return Ct(e(...t)).subscribe(r)}function F0(n){return Jt((e,t)=>n<=t)}function K_(...n){let e=is(n);return Be((t,r)=>{(e?md(n,t,e):md(n,t)).subscribe(r)})}function Zt(n,e){return Be((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ge(r,c=>{i?.unsubscribe();let l=0,u=s++;Ct(n(c,u)).subscribe(i=Ge(r,f=>r.next(e?e(c,f,u,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function dl(n){return Be((e,t)=>{Ct(n).subscribe(Ge(t,()=>t.complete(),rl)),!t.closed&&e.subscribe(t)})}function mn(n,e,t){let r=Te(n)||e||t?{next:n,error:e,complete:t}:n;return r?Be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ge(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Or}var V0;function Q_(){return V0}function ss(n){let e=V0;return V0=n,e}var aL=Symbol("NotFound");function _d(n){return n===aL||n?.name==="\u0275NotFound"}var fl=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},eS=new fl("21.0.1");var ev="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(os(e,t)),this.code=e}};function TG(n){return`NG0${Math.abs(n)}`}function os(n,e){return`${TG(n)}${e?": "+e:""}`}var ei=globalThis;function dt(n){for(let e in n)if(n[e]===dt)return e;throw Error("")}function hL(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ro(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ro).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function tv(n,e){return n?e?`${n} ${e}`:n:e||""}var SG=dt({__forward_ref__:dt});function Cp(n){return n.__forward_ref__=Cp,n.toString=function(){return ro(this())},n}function Pn(n){return tS(n)?n():n}function tS(n){return typeof n=="function"&&n.hasOwnProperty(SG)&&n.__forward_ref__===Cp}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function st(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dp(n){return CG(n,nv)}function nS(n){return Dp(n)!==null}function CG(n,e){return n.hasOwnProperty(e)&&n[e]||null}function DG(n){let e=n?.[nv]??null;return e||null}function j0(n){return n&&n.hasOwnProperty(X_)?n[X_]:null}var nv=dt({\u0275prov:dt}),X_=dt({\u0275inj:dt}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rS(n){return n&&!!n.\u0275providers}var iS=dt({\u0275cmp:dt}),sS=dt({\u0275dir:dt}),oS=dt({\u0275pipe:dt}),aS=dt({\u0275mod:dt}),Ep=dt({\u0275fac:dt}),_l=dt({__NG_ELEMENT_ID__:dt}),cL=dt({__NG_ENV_ID__:dt});function Ap(n){return typeof n=="string"?n:n==null?"":String(n)}function fL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ap(n)}var pL=dt({ngErrorCode:dt}),AG=dt({ngErrorMessage:dt}),xG=dt({ngTokenPath:dt});function cS(n,e){return mL("",-200,e)}function rv(n,e){throw new $(-201,!1)}function mL(n,e,t){let r=new $(e,n);return r[pL]=e,r[AG]=n,t&&(r[xG]=t),r}function RG(n){return n[pL]}var B0;function gL(){return B0}function Zn(n){let e=B0;return B0=n,e}function lS(n,e,t){let r=Dp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;rv(n,"Injector")}var kG={},hl=kG,z0="__NG_DI_FLAG__",$0=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=pl(t)||0;try{return this.injector.get(e,r&8?null:hl,r)}catch(i){if(_d(i))return i;throw i}}};function PG(n,e=0){let t=Q_();if(t===void 0)throw new $(-203,!1);if(t===null)return lS(n,void 0,e);{let r=MG(e),i=t.retrieve(n,r);if(_d(i)){if(r.optional)return null;throw i}return i}}function ae(n,e=0){return(gL()||PG)(Pn(n),e)}function N(n,e){return ae(n,pl(e))}function pl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function MG(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function H0(n){let e=[];for(let t=0;t<n.length;t++){let r=Pn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=NG(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function yL(n,e){return n[z0]=e,n.prototype[z0]=e,n}function NG(n){return n[z0]}function xa(n,e){let t=n.hasOwnProperty(Ep);return t?n[Ep]:null}function _L(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function vL(n){return n.flat(Number.POSITIVE_INFINITY)}function iv(n,e){n.forEach(t=>Array.isArray(t)?iv(t,e):e(t))}function uS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bL(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function wL(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function sv(n,e,t){let r=bd(n,e);return r>=0?n[r|1]=t:(r=~r,wL(n,r,e,t)),r}function ov(n,e){let t=bd(n,e);if(t>=0)return n[t|1]}function bd(n,e){return OG(n,e,1)}function OG(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ka={},er=[],Pa=new J(""),dS=new J("",-1),hS=new J(""),Ip=class{get(e,t=hl){if(t===hl){let i=mL("",-201);throw i.name="\u0275NotFound",i}return t}};function fS(n){return n[aS]||null}function io(n){return n[iS]||null}function pS(n){return n[sS]||null}function EL(n){return n[oS]||null}function In(n){return{\u0275providers:n}}function IL(n){return In([{provide:Pa,multi:!0,useValue:n}])}function TL(...n){return{\u0275providers:mS(!0,n),\u0275fromNgModule:!0}}function mS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return iv(e,o=>{let a=o;J_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&SL(i,s),t}function SL(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gS(i,s=>{e(s,r)})}}function J_(n,e,t,r){if(n=Pn(n),!n)return!1;let i=null,s=j0(n),o=!s&&io(n);if(!s&&!o){let c=n.ngModule;if(s=j0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)J_(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{iv(s.imports,u=>{J_(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&SL(l,e)}if(!a){let l=xa(i)||(()=>new i);e({provide:i,useFactory:l,deps:er},i),e({provide:hS,useValue:i,multi:!0},i),e({provide:Pa,useValue:()=>ae(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;gS(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function gS(n,e){for(let t of n)rS(t)&&(t=t.\u0275providers),Array.isArray(t)?gS(t,e):e(t)}var LG=dt({provide:String,useValue:dt});function CL(n){return n!==null&&typeof n=="object"&&LG in n}function FG(n){return!!(n&&n.useExisting)}function VG(n){return!!(n&&n.useFactory)}function ml(n){return typeof n=="function"}function DL(n){return!!n.useClass}var Rp=new J(""),Y_={},lL={},U0;function wd(){return U0===void 0&&(U0=new Ip),U0}var xt=class{},gl=class extends xt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,W0(e,o=>this.processProvider(o)),this.records.set(dS,vd(void 0,this)),i.has("environment")&&this.records.set(xt,vd(void 0,this));let s=this.records.get(Rp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hS,er,{self:!0}))}retrieve(e,t){let r=pl(t)||0;try{return this.get(e,hl,r)}catch(i){if(_d(i))return i;throw i}}destroy(){wp(this),this._destroyed=!0;let e=Pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return wp(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wp(this);let t=ss(this),r=Zn(void 0),i;try{return e()}finally{ss(t),Zn(r)}}get(e,t=hl,r){if(wp(this),e.hasOwnProperty(cL))return e[cL](this);let i=pl(r),s,o=ss(this),a=Zn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=$G(e)&&Dp(e);u&&this.injectableDefInScope(u)?l=vd(q0(e),Y_):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?wd():this.parent;return t=i&8&&t===hl?null:t,c.get(e,t)}catch(c){let l=RG(c);throw l===-200||l===-201?new $(l,null):c}finally{Zn(a),ss(o)}}resolveInjectorInitializers(){let e=Pe(null),t=ss(this),r=Zn(void 0),i;try{let s=this.get(Pa,er,{self:!0});for(let o of s)o()}finally{ss(t),Zn(r),Pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ro(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pn(e);let t=ml(e)?e:Pn(e&&e.provide),r=jG(e);if(!ml(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vd(void 0,Y_,!0),i.factory=()=>H0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Pe(null);try{if(t.value===lL)throw cS(ro(e));return t.value===Y_&&(t.value=lL,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&zG(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function q0(n){let e=Dp(n),t=e!==null?e.factory:xa(n);if(t!==null)return t;if(n instanceof J)throw new $(204,!1);if(n instanceof Function)return UG(n);throw new $(204,!1)}function UG(n){if(n.length>0)throw new $(204,!1);let t=DG(n);return t!==null?()=>t.factory(n):()=>new n}function jG(n){if(CL(n))return vd(void 0,n.useValue);{let e=yS(n);return vd(e,Y_)}}function yS(n,e,t){let r;if(ml(n)){let i=Pn(n);return xa(i)||q0(i)}else if(CL(n))r=()=>Pn(n.useValue);else if(VG(n))r=()=>n.useFactory(...H0(n.deps||[]));else if(FG(n))r=(i,s)=>ae(Pn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Pn(n&&(n.useClass||n.provide));if(BG(n))r=()=>new i(...H0(n.deps));else return xa(i)||q0(i)}return r}function wp(n){if(n.destroyed)throw new $(205,!1)}function vd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function BG(n){return!!n.deps}function zG(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $G(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function W0(n,e){for(let t of n)Array.isArray(t)?W0(t,e):t&&rS(t)?W0(t.\u0275providers,e):e(t)}function Wt(n,e){let t;n instanceof gl?(wp(n),t=n):t=new $0(n);let r,i=ss(t),s=Zn(void 0);try{return e()}finally{ss(i),Zn(s)}}function AL(){return gL()!==void 0||Q_()!=null}var Ti=0,me=1,be=2,En=3,ti=4,tr=5,Ed=6,Id=7,Bn=8,Ma=9,as=10,Nt=11,Td=12,_S=13,vl=14,dr=15,Na=16,bl=17,cs=18,kp=19,vS=20,no=21,av=22,Pp=23,Fr=24,cv=25,Mp=26,zt=27,xL=1;var Oa=7,Np=8,wl=9,nr=10;function ls(n){return Array.isArray(n)&&typeof n[xL]=="object"}function Si(n){return Array.isArray(n)&&n[xL]===!0}function bS(n){return(n.flags&4)!==0}function La(n){return n.componentOffset>-1}function Sd(n){return(n.flags&1)===1}function us(n){return!!n.template}function Cd(n){return(n[be]&512)!==0}function El(n){return(n[be]&256)===256}var wS="svg",RL="math";function ni(n){for(;Array.isArray(n);)n=n[Ti];return n}function ES(n,e){return ni(e[n])}function Ci(n,e){return ni(e[n.index])}function lv(n,e){return n.data[e]}function uv(n,e){return n[e]}function IS(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ri(n,e){let t=e[n];return ls(t)?t:t[Ti]}function kL(n){return(n[be]&4)===4}function dv(n){return(n[be]&128)===128}function PL(n){return Si(n[En])}function Fa(n,e){return e==null?null:n[e]}function TS(n){n[bl]=0}function SS(n){n[be]&1024||(n[be]|=1024,dv(n)&&Lp(n))}function ML(n,e){for(;n>0;)e=e[vl],n--;return e}function Op(n){return!!(n[be]&9216||n[Fr]?.dirty)}function hv(n){n[as].changeDetectionScheduler?.notify(8),n[be]&64&&(n[be]|=1024),Op(n)&&Lp(n)}function Lp(n){n[as].changeDetectionScheduler?.notify(0);let e=Ra(n);for(;e!==null&&!(e[be]&8192||(e[be]|=8192,!dv(e)));)e=Ra(e)}function CS(n,e){if(El(n))throw new $(911,!1);n[no]===null&&(n[no]=[]),n[no].push(e)}function NL(n,e){if(n[no]===null)return;let t=n[no].indexOf(e);t!==-1&&n[no].splice(t,1)}function Ra(n){let e=n[En];return Si(e)?e[En]:e}function DS(n){return n[Id]??=[]}function AS(n){return n.cleanup??=[]}function OL(n,e,t,r){let i=DS(e);i.push(t),n.firstCreatePass&&AS(n).push(r,i.length-1)}var xe={lFrame:WL(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var G0=!1;function LL(){return xe.lFrame.elementDepthCount}function FL(){xe.lFrame.elementDepthCount++}function xS(){xe.lFrame.elementDepthCount--}function fv(){return xe.bindingsEnabled}function RS(){return xe.skipHydrationRootTNode!==null}function kS(n){return xe.skipHydrationRootTNode===n}function PS(){xe.skipHydrationRootTNode=null}function ze(){return xe.lFrame.lView}function Tn(){return xe.lFrame.tView}function Dd(n){return xe.lFrame.contextLView=n,n[Bn]}function Ad(n){return xe.lFrame.contextLView=null,n}function zn(){let n=MS();for(;n!==null&&n.type===64;)n=n.parent;return n}function MS(){return xe.lFrame.currentTNode}function VL(){let n=xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xd(n,e){let t=xe.lFrame;t.currentTNode=n,t.isParent=e}function NS(){return xe.lFrame.isParent}function OS(){xe.lFrame.isParent=!1}function UL(){return xe.lFrame.contextLView}function LS(){return G0}function FS(n){let e=G0;return G0=n,e}function VS(){let n=xe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jL(n){return xe.lFrame.bindingIndex=n}function pv(){return xe.lFrame.bindingIndex++}function US(n){let e=xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function BL(){return xe.lFrame.inI18n}function zL(n,e){let t=xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,mv(e)}function $L(){return xe.lFrame.currentDirectiveIndex}function mv(n){xe.lFrame.currentDirectiveIndex=n}function HL(n){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jS(){return xe.lFrame.currentQueryIndex}function gv(n){xe.lFrame.currentQueryIndex=n}function HG(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[tr]:null}function BS(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=HG(s),i===null||(s=s[vl],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=xe.lFrame=qL();return r.currentTNode=e,r.lView=n,!0}function yv(n){let e=qL(),t=n[me];xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qL(){let n=xe.lFrame,e=n===null?null:n.child;return e===null?WL(n):e}function WL(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function GL(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zS=GL;function _v(){let n=GL();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function KL(n){return(xe.lFrame.contextLView=ML(n,xe.lFrame.contextLView))[Bn]}function Va(){return xe.lFrame.selectedIndex}function Ua(n){xe.lFrame.selectedIndex=n}function $S(){let n=xe.lFrame;return lv(n.tView,n.selectedIndex)}function Fp(){xe.lFrame.currentNamespace=wS}function Vp(){qG()}function qG(){xe.lFrame.currentNamespace=null}function QL(){return xe.lFrame.currentNamespace}var YL=!0;function vv(){return YL}function Up(n){YL=n}function K0(n,e=null,t=null,r){let i=HS(n,e,t,r);return i.resolveInjectorInitializers(),i}function HS(n,e=null,t=null,r,i=new Set){let s=[t||er,TL(n)];return r=r||(typeof n=="object"?void 0:ro(n)),new gl(s,e||wd(),r||null,i)}var yt=class n{static THROW_IF_NOT_FOUND=hl;static NULL=new Ip;static create(e,t){if(Array.isArray(e))return K0({name:""},t,e,"");{let r=e.name??"";return K0({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>ae(dS)});static __NG_ELEMENT_ID__=-1},Je=new J(""),so=(()=>{class n{static __NG_ELEMENT_ID__=WG;static __NG_ENV_ID__=t=>t}return n})(),Q0=class extends so{_lView;constructor(e){super(),this._lView=e}get destroyed(){return El(this._lView)}onDestroy(e){let t=this._lView;return CS(t,e),()=>NL(t,e)}};function WG(){return new Q0(ze())}var XL=!1,oo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new qt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ue(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Y0=class extends ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,AL()&&(this.destroyRef=N(so,{optional:!0})??void 0,this.pendingTasks=N(oo,{optional:!0})??void 0)}emit(e){let t=Pe(null);try{super.next(e)}finally{Pe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Bt=Y0;function Z_(...n){}function qS(n){let e,t;function r(){n=Z_;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function WS(n){return queueMicrotask(()=>n()),()=>{n=Z_}}var GS="isAngularZone",Tp=GS+"_ID",GG=0,Se=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Bt(!1);onMicrotaskEmpty=new Bt(!1);onStable=new Bt(!1);onError=new Bt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=XL}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,YG(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(GS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KG,Z_,Z_);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},KG={};function KS(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qS(()=>{n.callbackScheduled=!1,X0(n),n.isCheckStableRunning=!0,KS(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),X0(n)}function YG(n){let e=()=>{QG(n)},t=GG++;n._inner=n._inner.fork({name:"angular",properties:{[GS]:!0,[Tp]:t,[Tp+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(XG(c))return r.invokeTask(s,o,a,c);try{return uL(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dL(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return uL(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JG(c)&&e(),dL(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,X0(n),KS(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function X0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function uL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dL(n){n._nesting--,KS(n)}var Sp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Bt;onMicrotaskEmpty=new Bt;onStable=new Bt;onError=new Bt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function XG(n){return JL(n,"__ignore_ng_zone__")}function JG(n){return JL(n,"__scheduler_tick__")}function JL(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Lr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hr=new J("",{factory:()=>{let n=N(Se),e=N(xt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Lr),t.handleError(r))})}}}),ZL={provide:Pa,useValue:()=>{let n=N(Lr,{optional:!0})},multi:!0},ZG=new J("",{factory:()=>{let n=N(Je).defaultView;if(!n)return;let e=N(hr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),N(so).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function QS(){return In([IL(()=>void N(ZG))])}function Di(n,e){let[t,r,i]=_0(n,e?.equal),s=t,o=s[Zr];return s.set=r,s.update=i,s.asReadonly=eF.bind(s),s}function eF(){let n=this[Zr];if(n.readonlyFn===void 0){let e=()=>this();e[Zr]=n,n.readonlyFn=e}return n.readonlyFn}var yl=class{},jp=new J("",{factory:()=>!0});var YS=new J(""),ja=(()=>{class n{internalPendingTasks=N(oo);scheduler=N(yl);errorHandler=N(hr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),XS=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new J0})}return n})(),J0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Z0=class{[Zr];constructor(e){this[Zr]=e}destroy(){this[Zr].destroy()}};function fr(n){return v0(n)}function Ld(n){return{toString:n}.toString()}var bv="__parameters__";function oK(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function aK(n,e,t){return Ld(()=>{let r=oK(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let f=c.hasOwnProperty(bv)?c[bv]:Object.defineProperty(c,bv,{value:[]})[bv];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var pr=yL(aK("Optional"),8);function cK(n){return typeof n=="function"}function RF(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var xv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},co=(()=>{let n=()=>kF;return n.ngInherit=!0,n})();function kF(n){return n.type.prototype.ngOnChanges&&(n.setInput=uK),lK}function lK(){let n=MF(this),e=n?.current;if(e){let t=n.previous;if(t===ka)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uK(n,e,t,r,i){let s=this.declaredInputs[r],o=MF(n)||dK(n,{previous:ka,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new xv(l&&l.currentValue,t,c===ka),RF(n,e,i,t)}var PF="__ngSimpleChanges__";function MF(n){return n[PF]||null}function dK(n,e){return n[PF]=e}var tF=[];var _t=function(n,e=null,t){for(let r=0;r<tF.length;r++){let i=tF[r];i(n,e,t)}},ot=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ot||{});function hK(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=kF(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function NF(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Sv(n,e,t){OF(n,e,3,t)}function Cv(n,e,t,r){(n[be]&3)===t&&OF(n,e,t,r)}function JS(n,e){let t=n[be];(t&3)===e&&(t&=16383,t+=1,n[be]=t)}function OF(n,e,t,r){let i=r!==void 0?n[bl]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[bl]+=65536),(a<s||s==-1)&&(fK(n,t,e,c),n[bl]=(n[bl]&4294901760)+c+2),c++}function nF(n,e){_t(ot.LifecycleHookStart,n,e);let t=Pe(null);try{e.call(n)}finally{Pe(t),_t(ot.LifecycleHookEnd,n,e)}}function fK(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[be]>>14<n[bl]>>16&&(n[be]&3)===e&&(n[be]+=16384,nF(a,s)):nF(a,s)}var kd=-1,Tl=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function pK(n){return(n.flags&8)!==0}function mK(n){return(n.flags&16)!==0}function gK(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];yK(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function LF(n){return n===3||n===4||n===6}function yK(n){return n.charCodeAt(0)===64}function Pd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?rF(n,t,i,null,e[++r]):rF(n,t,i,null,null))}}return n}function rF(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function FF(n){return n!==kd}function Rv(n){return n&32767}function _K(n){return n>>16}function kv(n,e){let t=_K(n),r=e;for(;t>0;)r=r[vl],t--;return r}var lC=!0;function Pv(n){let e=lC;return lC=n,e}var vK=256,VF=vK-1,UF=5,bK=0,ds={};function wK(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_l)&&(r=t[_l]),r==null&&(r=t[_l]=bK++);let i=r&VF,s=1<<i;e.data[n+(i>>UF)]|=s}function Mv(n,e){let t=jF(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,ZS(r.data,n),ZS(e,null),ZS(r.blueprint,null));let i=BC(n,e),s=n.injectorIndex;if(FF(i)){let o=Rv(i),a=kv(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function ZS(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function BC(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=qF(i),r===null)return kd;if(t++,i=i[vl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return kd}function uC(n,e,t){wK(n,e,t)}function EK(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(LF(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function BF(n,e,t){if(t&8||n!==void 0)return n;rv(e,"NodeInjector")}function zF(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ma],s=Zn(void 0);try{return i?i.get(e,r,t&8):lS(e,r,t&8)}finally{Zn(s)}}return BF(r,e,t)}function $F(n,e,t,r=0,i){if(n!==null){if(e[be]&2048&&!(r&2)){let o=CK(n,e,t,r,ds);if(o!==ds)return o}let s=HF(n,e,t,r,ds);if(s!==ds)return s}return zF(e,t,r,i)}function HF(n,e,t,r,i){let s=TK(t);if(typeof s=="function"){if(!BS(e,n,r))return r&1?BF(i,t,r):zF(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))rv(t);else return o}finally{zS()}}else if(typeof s=="number"){let o=null,a=jF(n,e),c=kd,l=r&1?e[dr][tr]:null;for((a===-1||r&4)&&(c=a===-1?BC(n,e):e[a+8],c===kd||!sF(r,!1)?a=-1:(o=e[me],a=Rv(c),e=kv(c,e)));a!==-1;){let u=e[me];if(iF(s,a,u.data)){let f=IK(a,e,t,o,r,l);if(f!==ds)return f}c=e[a+8],c!==kd&&sF(r,e[me].data[a+8]===l)&&iF(s,a,e)?(o=u,a=Rv(c),e=kv(c,e)):a=-1}}return i}function IK(n,e,t,r,i,s){let o=e[me],a=o.data[n+8],c=r==null?La(a)&&lC:r!=o&&(a.type&3)!==0,l=i&1&&s===a,u=Dv(a,o,t,c,l);return u!==null?Hp(e,o,u,a,i):ds}function Dv(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,f=r?a:a+u,p=i?a+u:l;for(let m=f;m<p;m++){let E=o[m];if(m<c&&t===E||m>=c&&E.type===t)return m}if(i){let m=o[c];if(m&&us(m)&&m.type===t)return c}return null}function Hp(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Tl){let a=s;if(a.resolving){let m=fL(o[t]);throw cS(m)}let c=Pv(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],u,f=a.injectImpl?Zn(a.injectImpl):null,p=BS(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&hK(t,o[t],e)}finally{f!==null&&Zn(f),Pv(c),a.resolving=!1,zS()}}return s}function TK(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_l)?n[_l]:void 0;return typeof e=="number"?e>=0?e&VF:SK:e}function iF(n,e,t){let r=1<<n;return!!(t[e+(n>>UF)]&r)}function sF(n,e){return!(n&2)&&!(n&1&&e)}var Il=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return $F(this._tNode,this._lView,e,pl(r),t)}};function SK(){return new Il(zn(),ze())}function fs(n){return Ld(()=>{let e=n.prototype.constructor,t=e[Ep]||dC(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ep]||dC(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function dC(n){return tS(n)?()=>{let e=dC(Pn(n));return e&&e()}:xa(n)}function CK(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[be]&2048&&!Cd(o);){let a=HF(s,o,t,r|2,ds);if(a!==ds)return a;let c=s.parent;if(!c){let l=o[vS];if(l){let u=l.get(t,ds,r);if(u!==ds)return u}c=qF(o),o=o[vl]}s=c}return i}function qF(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[tr]:null}function Kp(n){return EK(zn(),n)}function DK(){return Fd(zn(),ze())}function Fd(n,e){return new It(Ci(n,e))}var It=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=DK}return n})();function AK(n){return n instanceof It?n.nativeElement:n}function xK(){return this._results[Symbol.iterator]()}var Nv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ut}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=vL(e);(this._changesDetected=!_L(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=xK};function WF(n){return(n.flags&128)===128}var zC=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(zC||{}),GF=new Map,RK=0;function kK(){return RK++}function PK(n){GF.set(n[kp],n)}function hC(n){GF.delete(n[kp])}var oF="__ngContext__";function Md(n,e){ls(e)?(n[oF]=e[kp],PK(e)):n[oF]=e}function KF(n){return YF(n[Td])}function QF(n){return YF(n[ti])}function YF(n){for(;n!==null&&!Si(n);)n=n[ti];return n}var MK;function $C(n){MK=n}var Hv=new J("",{factory:()=>NK}),NK="ng";var qv=new J(""),lo=new J("",{providedIn:"platform",factory:()=>"unknown"}),Vd=new J(""),Ud=new J("",{factory:()=>N(Je).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var XF=!1,JF=new J("",{factory:()=>XF});var OK=(n,e,t,r)=>{};function LK(n,e,t,r){OK(n,e,t,r)}function Wv(n){return(n.flags&32)===32}var FK=()=>null;function ZF(n,e,t=!1){return FK(n,e,t)}function eV(n,e){let t=n.contentQueries;if(t!==null){let r=Pe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];gv(s),a.contentQueries(2,e[o],o)}}}finally{Pe(r)}}}function fC(n,e,t){gv(0);let r=Pe(null);try{e(n,t)}finally{Pe(r)}}function HC(n,e,t){if(bS(e)){let r=Pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Pe(r)}}}var Ri=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Ri||{}),wv;function VK(){if(wv===void 0&&(wv=null,ei.trustedTypes))try{wv=ei.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wv}function Gv(n){return VK()?.createHTML(n)||n}var Ev;function UK(){if(Ev===void 0&&(Ev=null,ei.trustedTypes))try{Ev=ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ev}function aF(n){return UK()?.createScriptURL(n)||n}var ao=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ev})`}},pC=class extends ao{getTypeName(){return"HTML"}},mC=class extends ao{getTypeName(){return"Style"}},gC=class extends ao{getTypeName(){return"Script"}},yC=class extends ao{getTypeName(){return"URL"}},_C=class extends ao{getTypeName(){return"ResourceURL"}};function ki(n){return n instanceof ao?n.changingThisBreaksApplicationSecurity:n}function uo(n,e){let t=tV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ev})`)}return t===e}function tV(n){return n instanceof ao&&n.getTypeName()||null}function qC(n){return new pC(n)}function WC(n){return new mC(n)}function GC(n){return new gC(n)}function KC(n){return new yC(n)}function QC(n){return new _C(n)}function jK(n){let e=new bC(n);return BK()?new vC(e):e}var vC=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Gv(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},bC=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Gv(e),t}};function BK(){try{return!!new window.DOMParser().parseFromString(Gv(""),"text/html")}catch{return!1}}var zK=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qp(n){return n=String(n),n.match(zK)?n:"unsafe:"+n}function ho(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Yp(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var nV=ho("area,br,col,hr,img,wbr"),rV=ho("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iV=ho("rp,rt"),$K=Yp(iV,rV),HK=Yp(rV,ho("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qK=Yp(iV,ho("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cF=Yp(nV,HK,qK,$K),sV=ho("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),WK=ho("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),GK=ho("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),KK=Yp(sV,WK,GK),QK=ho("script,style,template"),wC=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=JK(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=XK(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=lF(e).toLowerCase();if(!cF.hasOwnProperty(t))return this.sanitizedSomething=!0,!QK.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!KK.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;sV[a]&&(c=Qp(c)),this.buf.push(" ",o,'="',uF(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=lF(e).toLowerCase();cF.hasOwnProperty(t)&&!nV.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(uF(e))}};function YK(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function XK(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw oV(e);return e}function JK(n){let e=n.firstChild;if(e&&YK(n,e))throw oV(e);return e}function lF(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function oV(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var ZK=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e7=/([^\#-~ |!])/g;function uF(n){return n.replace(/&/g,"&amp;").replace(ZK,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(e7,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Iv;function YC(n,e){let t=null;try{Iv=Iv||jK(n);let r=e?String(e):"";t=Iv.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Iv.getInertBodyElement(r)}while(r!==s);let a=new wC().sanitizeChildren(dF(t)||t);return Gv(a)}finally{if(t){let r=dF(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function dF(n){return"content"in n&&t7(n)?n.content:null}function t7(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Mn=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Mn||{});function aV(n){let e=lV();return e?e.sanitize(Mn.URL,n)||"":uo(n,"URL")?ki(n):Qp(Ap(n))}function cV(n){let e=lV();if(e)return aF(e.sanitize(Mn.RESOURCE_URL,n)||"");if(uo(n,"ResourceURL"))return aF(ki(n));throw new $(904,!1)}function n7(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?cV:aV}function XC(n,e,t){return n7(e,t)(n)}function lV(){let n=ze();return n&&n[as].sanitizer}var r7=/^>|^->|<!--|-->|--!>|<!-$/g,i7=/(<|>)/g,s7="\u200B$1\u200B";function o7(n){return n.replace(r7,e=>e.replace(i7,s7))}function uV(n){return n instanceof Function?n():n}function a7(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var dV="ng-template";function c7(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&a7(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(JC(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function JC(n){return n.type===4&&n.value!==dV}function l7(n,e,t){let r=n.type===4&&!t?dV:n.value;return e===r}function u7(n,e,t){let r=4,i=n.attrs,s=i!==null?f7(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ai(r)&&!Ai(c))return!1;if(o&&Ai(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!l7(n,c,t)||c===""&&e.length===1){if(Ai(r))return!1;o=!0}}else if(r&8){if(i===null||!c7(n,i,c,t)){if(Ai(r))return!1;o=!0}}else{let l=e[++a],u=d7(c,i,JC(n),t);if(u===-1){if(Ai(r))return!1;o=!0;continue}if(l!==""){let f;if(u>s?f="":f=i[u+1].toLowerCase(),r&2&&l!==f){if(Ai(r))return!1;o=!0}}}}return Ai(r)||o}function Ai(n){return(n&1)===0}function d7(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return p7(e,n)}function hV(n,e,t=!1){for(let r=0;r<e.length;r++)if(u7(n,e[r],t))return!0;return!1}function h7(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function f7(n){for(let e=0;e<n.length;e++){let t=n[e];if(LF(t))return e}return n.length}function p7(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function m7(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function hF(n,e){return n?":not("+e.trim()+")":e}function g7(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ai(o)&&(e+=hF(s,i),i=""),r=o,s=s||!Ai(r);t++}return i!==""&&(e+=hF(s,i)),e}function y7(n){return n.map(g7).join(",")}function _7(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Ai(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Pi={};function v7(n,e){return n.createText(e)}function b7(n,e,t){n.setValue(e,t)}function w7(n,e){return n.createComment(o7(e))}function fV(n,e,t){return n.createElement(e,t)}function Ov(n,e,t,r,i){n.insertBefore(e,t,r,i)}function pV(n,e,t){n.appendChild(e,t)}function fF(n,e,t,r,i){r!==null?Ov(n,e,t,r,i):pV(n,e,t)}function E7(n,e,t,r){n.removeChild(null,e,t,r)}function I7(n,e,t){n.setAttribute(e,"style",t)}function T7(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mV(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&gK(n,e,r),i!==null&&T7(n,e,i),s!==null&&I7(n,e,s)}function ZC(n,e,t,r,i,s,o,a,c,l,u){let f=zt+r,p=f+i,m=S7(f,p),E=typeof l=="function"?l():l;return m[me]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:u}}function S7(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pi);return t}function C7(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ZC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function eD(n,e,t,r,i,s,o,a,c,l,u){let f=e.blueprint.slice();return f[Ti]=i,f[be]=r|4|128|8|64|1024,(l!==null||n&&n[be]&2048)&&(f[be]|=2048),TS(f),f[En]=f[vl]=n,f[Bn]=t,f[as]=o||n&&n[as],f[Nt]=a||n&&n[Nt],f[Ma]=c||n&&n[Ma]||null,f[tr]=s,f[kp]=kK(),f[Ed]=u,f[vS]=l,f[dr]=e.type==2?n[dr]:f,f}function D7(n,e,t){let r=Ci(e,n),i=C7(t),s=n[as].rendererFactory,o=tD(n,eD(n,i,null,gV(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function gV(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yV(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function tD(n,e){return n[Td]?n[_S][ti]=e:n[Td]=e,n[_S]=e,e}function $n(n=1){_V(Tn(),ze(),Va()+n,!1)}function _V(n,e,t,r){if(!r)if((e[be]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Sv(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Cv(e,s,0,t)}Ua(t)}var Kv=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Kv||{});function EC(n,e,t,r){let i=Pe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Kv.SignalBased)!==0&&(c=e[s][Zr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):RF(e,c,s,r)}finally{Pe(i)}}var hs=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(hs||{}),A7;function nD(n,e){return A7(n,e)}var Nd=new Set,rD=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(rD||{}),xl=new J(""),pF=new Set;function Xp(n){pF.has(n)||(pF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vV=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var x7=new J("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function bV(n,e,t){let r=n.get(x7);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function R7(n,e){for(let[t,r]of e)bV(n,r.animateFns)}function mF(n,e,t,r){let i=n?.[Mp]?.enter;e!==null&&i&&i.has(t.index)&&R7(r,i)}function Rd(n,e,t,r,i,s,o,a){if(i!=null){let c,l=!1;Si(i)?c=i:ls(i)&&(l=!0,i=i[Ti]);let u=ni(i);n===0&&r!==null?(mF(a,r,s,t),o==null?pV(e,r,u):Ov(e,r,u,o||null,!0)):n===1&&r!==null?(mF(a,r,s,t),Ov(e,r,u,o||null,!0)):n===2?gF(a,s,t,f=>{E7(e,u,l,f)}):n===3&&gF(a,s,t,()=>{e.destroyNode(u)}),c!=null&&B7(e,n,t,c,s,r,o)}}function k7(n,e){wV(n,e),e[Ti]=null,e[tr]=null}function P7(n,e,t,r,i,s){r[Ti]=i,r[tr]=e,Qv(n,r,t,1,i,s)}function wV(n,e){e[as].changeDetectionScheduler?.notify(9),Qv(n,e,e[Nt],2,null,null)}function M7(n){let e=n[Td];if(!e)return eC(n[me],n);for(;e;){let t=null;if(ls(e))t=e[Td];else{let r=e[nr];r&&(t=r)}if(!t){for(;e&&!e[ti]&&e!==n;)ls(e)&&eC(e[me],e),e=e[En];e===null&&(e=n),ls(e)&&eC(e[me],e),t=e&&e[ti]}e=t}}function iD(n,e){let t=n[wl],r=t.indexOf(e);t.splice(r,1)}function EV(n,e){if(El(e))return;let t=e[Nt];t.destroyNode&&Qv(n,e,t,3,null,null),M7(e)}function eC(n,e){if(El(e))return;let t=Pe(null);try{e[be]&=-129,e[be]|=256,e[Fr]&&mp(e[Fr]),L7(n,e),O7(n,e),e[me].type===1&&e[Nt].destroy();let r=e[Na];if(r!==null&&Si(e[En])){r!==e[En]&&iD(r,e);let i=e[cs];i!==null&&i.detachView(n)}hC(e)}finally{Pe(t)}}function gF(n,e,t,r){let i=n?.[Mp];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Nd.add(n),bV(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),N7(n,r)}else n&&Nd.delete(n),r(!1)},i)}function N7(n,e){let t=n[Mp]?.running;if(t){t.then(()=>{n[Mp].running=void 0,Nd.delete(n),e(!0)});return}e(!1)}function O7(n,e){let t=n.cleanup,r=e[Id];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Id]=null);let i=e[no];if(i!==null){e[no]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Pp];if(s!==null){e[Pp]=null;for(let o of s)o.destroy()}}function L7(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Tl)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];_t(ot.LifecycleHookStart,a,c);try{c.call(a)}finally{_t(ot.LifecycleHookEnd,a,c)}}else{_t(ot.LifecycleHookStart,i,s);try{s.call(i)}finally{_t(ot.LifecycleHookEnd,i,s)}}}}}function IV(n,e,t){return F7(n,e.parent,t)}function F7(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ti];if(La(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ri.None||i===Ri.Emulated)return null}return Ci(r,t)}function TV(n,e,t){return U7(n,e,t)}function V7(n,e,t){return n.type&40?Ci(n,t):null}var U7=V7,yF;function sD(n,e,t,r){let i=IV(n,r,e),s=e[Nt],o=r.parent||e[tr],a=TV(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)fF(s,i,t[c],a,!1);else fF(s,i,t,a,!1);yF!==void 0&&yF(s,r,e,t,i)}function zp(n,e){if(e!==null){let t=e.type;if(t&3)return Ci(e,n);if(t&4)return IC(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return zp(n,r);{let i=n[e.index];return Si(i)?IC(-1,i):ni(i)}}else{if(t&128)return zp(n,e.next);if(t&32)return nD(e,n)()||ni(n[e.index]);{let r=SV(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ra(n[dr]);return zp(i,r)}else return zp(n,e.next)}}}return null}function SV(n,e){if(e!==null){let r=n[dr][tr],i=e.projection;return r.projection[i]}return null}function IC(n,e){let t=nr+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return zp(r,i)}return e[Oa]}function oD(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Ma];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(o&&e===0&&(c&&Md(ni(c),r),t.flags|=2),!Wv(t))if(l&8)oD(n,e,t.child,r,i,s,!1),Rd(e,n,a,i,c,t,s,r);else if(l&32){let u=nD(t,r),f;for(;f=u();)Rd(e,n,a,i,f,t,s,r);Rd(e,n,a,i,c,t,s,r)}else l&16?CV(n,e,r,t,i,s):Rd(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Qv(n,e,t,r,i,s){oD(t,r,n.firstChild,e,i,s,!1)}function j7(n,e,t){let r=e[Nt],i=IV(n,t,e),s=t.parent||e[tr],o=TV(s,t,e);CV(r,0,e,t,i,o)}function CV(n,e,t,r,i,s){let o=t[dr],c=o[tr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Rd(e,n,t[Ma],i,u,r,s,t)}else{let l=c,u=o[En];WF(r)&&(l.flags|=128),oD(n,e,l,u,i,s,!0)}}function B7(n,e,t,r,i,s,o){let a=r[Oa],c=ni(r);a!==c&&Rd(e,n,t,s,a,i,o);for(let l=nr;l<r.length;l++){let u=r[l];Qv(u[me],u,n,e,s,a)}}function z7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:hs.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=hs.Important),n.setStyle(t,r,i,s))}}function DV(n,e,t,r,i){let s=Va(),o=r&2;try{Ua(-1),o&&e.length>zt&&_V(n,e,zt,!1);let a=o?ot.TemplateUpdateStart:ot.TemplateCreateStart;_t(a,i,t),t(r,i)}finally{Ua(s);let a=o?ot.TemplateUpdateEnd:ot.TemplateCreateEnd;_t(a,i,t)}}function Yv(n,e,t){Y7(n,e,t),(t.flags&64)===64&&X7(n,e,t)}function Jp(n,e,t=Ci){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function $7(n,e,t,r){let s=r.get(JF,XF)||t===Ri.ShadowDom||t===Ri.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return H7(o),o}function H7(n){q7(n)}var q7=()=>null;function W7(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function G7(n,e,t,r,i,s){let o=e[me];if(uD(n,o,e,t,r)){La(n)&&Q7(e,n.index);return}n.type&3&&(t=W7(t)),K7(n,e,t,r,i,s)}function K7(n,e,t,r,i,s){if(n.type&3){let o=Ci(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Q7(n,e){let t=ri(e,n);t[be]&16||(t[be]|=64)}function Y7(n,e,t){let r=t.directiveStart,i=t.directiveEnd;La(t)&&D7(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mv(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Hp(e,n,o,t);if(Md(c,e),s!==null&&tQ(e,o-r,c,a,t,s),us(a)){let l=ri(t.index,e);l[Bn]=Hp(e,n,o,t)}}}function X7(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=$L();try{Ua(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];mv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&J7(c,l)}}finally{Ua(-1),mv(o)}}function J7(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function aD(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];hV(e,s.selectors,!1)&&(r??=[],us(s)?r.unshift(s):r.push(s))}return r}function Z7(n,e,t,r,i,s){let o=Ci(n,e);eQ(e[Nt],o,s,n.value,t,r,i)}function eQ(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ap(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function tQ(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];EC(r,t,c,l)}}function cD(n,e,t,r,i){let s=zt+t,o=e[me],a=i(o,e,n,r,t);e[s]=a,xd(n,!0);let c=n.type===2;return c?(mV(e[Nt],a,n),(LL()===0||Sd(n))&&Md(a,e),FL()):Md(a,e),vv()&&(!c||!Wv(n))&&sD(o,e,a,n),n}function lD(n){let e=n;return NS()?OS():(e=e.parent,xd(e,!1)),e}function nQ(n,e){let t=n[Ma];if(!t)return;let r;try{r=t.get(hr,null)}catch{r=null}r?.(e)}function uD(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],f=e.data[l];EC(f,t[l],u,i),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];EC(u,l,r,i),a=!0}return a}function rQ(n,e){let t=ri(e,n),r=t[me];iQ(r,t);let i=t[Ti];i!==null&&t[Ed]===null&&(t[Ed]=ZF(i,t[Ma])),_t(ot.ComponentStart);try{dD(r,t,t[Bn])}finally{_t(ot.ComponentEnd,t[Bn])}}function iQ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function dD(n,e,t){yv(e);try{let r=n.viewQuery;r!==null&&fC(1,r,t);let i=n.template;i!==null&&DV(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[cs]?.finishViewCreation(n),n.staticContentQueries&&eV(n,e),n.staticViewQueries&&fC(2,n.viewQuery,t);let s=n.components;s!==null&&sQ(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[be]&=-5,_v()}}function sQ(n,e){for(let t=0;t<e.length;t++)rQ(n,e[t])}function AV(n,e,t,r){let i=Pe(null);try{let s=e.tView,a=n[be]&4096?4096:16,c=eD(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Na]=l;let u=n[cs];return u!==null&&(c[cs]=u.createEmbeddedView(s)),dD(s,c,t),c}finally{Pe(i)}}function TC(n,e){return!e||e.firstChild===null||WF(n)}function qp(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ni(s)),Si(s)&&xV(s,r);let o=t.type;if(o&8)qp(n,e,t.child,r);else if(o&32){let a=nD(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=SV(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ra(e[dr]);qp(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function xV(n,e){for(let t=nr;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&qp(r[me],r,i,e)}n[Oa]!==n[Ti]&&e.push(n[Oa])}function RV(n){if(n[cv]!==null){for(let e of n[cv])e.impl.addSequence(e);n[cv].length=0}}var kV=[];function oQ(n){return n[Fr]??aQ(n)}function aQ(n){let e=kV.pop()??Object.create(lQ);return e.lView=n,e}function cQ(n){n.lView[Fr]!==n&&(n.lView=null,kV.push(n))}var lQ=Ve(H({},y_),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Lp(n.lView)},consumerOnSignalRead(){this.lView[Fr]=this}});function uQ(n){let e=n[Fr]??Object.create(dQ);return e.lView=n,e}var dQ=Ve(H({},y_),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ra(n.lView);for(;e&&!PV(e[me]);)e=Ra(e);e&&SS(e)},consumerOnSignalRead(){this.lView[Fr]=this}});function PV(n){return n.type!==2}function MV(n){if(n[Pp]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Pp])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[be]&8192)}}var hQ=100;function NV(n,e=0){let r=n[as].rendererFactory,i=!1;i||r.begin?.();try{fQ(n,e)}finally{i||r.end?.()}}function fQ(n,e){let t=LS();try{FS(!0),SC(n,e);let r=0;for(;Op(n);){if(r===hQ)throw new $(103,!1);r++,SC(n,1)}}finally{FS(t)}}function pQ(n,e,t,r){if(El(e))return;let i=e[be],s=!1,o=!1;yv(e);let a=!0,c=null,l=null;s||(PV(n)?(l=oQ(e),c=v_(l)):g_()===null?(a=!1,l=uQ(e),c=v_(l)):e[Fr]&&(mp(e[Fr]),e[Fr]=null));try{TS(e),jL(n.bindingStartIndex),t!==null&&DV(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let m=n.preOrderCheckHooks;m!==null&&Sv(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Cv(e,m,0,null),JS(e,0)}if(o||mQ(e),MV(e),OV(e,0),n.contentQueries!==null&&eV(n,e),!s)if(u){let m=n.contentCheckHooks;m!==null&&Sv(e,m)}else{let m=n.contentHooks;m!==null&&Cv(e,m,1),JS(e,1)}yQ(n,e);let f=n.components;f!==null&&FV(e,f,0);let p=n.viewQuery;if(p!==null&&fC(2,p,r),!s)if(u){let m=n.viewCheckHooks;m!==null&&Sv(e,m)}else{let m=n.viewHooks;m!==null&&Cv(e,m,2),JS(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[av]){for(let m of e[av])m();e[av]=null}s||(RV(e),e[be]&=-73)}catch(u){throw s||Lp(e),u}finally{l!==null&&(m0(l,c),a&&cQ(l)),_v()}}function OV(n,e){for(let t=KF(n);t!==null;t=QF(t))for(let r=nr;r<t.length;r++){let i=t[r];LV(i,e)}}function mQ(n){for(let e=KF(n);e!==null;e=QF(e)){if(!(e[be]&2))continue;let t=e[wl];for(let r=0;r<t.length;r++){let i=t[r];SS(i)}}}function gQ(n,e,t){_t(ot.ComponentStart);let r=ri(e,n);try{LV(r,t)}finally{_t(ot.ComponentEnd,r[Bn])}}function LV(n,e){dv(n)&&SC(n,e)}function SC(n,e){let r=n[me],i=n[be],s=n[Fr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&b_(s)),o||=!1,s&&(s.dirty=!1),n[be]&=-9217,o)pQ(r,n,r.template,n[Bn]);else if(i&8192){let a=Pe(null);try{MV(n),OV(n,1);let c=r.components;c!==null&&FV(n,c,1),RV(n)}finally{Pe(a)}}}function FV(n,e,t){for(let r=0;r<e.length;r++)gQ(n,e[r],t)}function yQ(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ua(~i);else{let s=i,o=t[++r],a=t[++r];zL(o,s);let c=e[s];_t(ot.HostBindingsUpdateStart,c);try{a(2,c)}finally{_t(ot.HostBindingsUpdateEnd,c)}}}}finally{Ua(-1)}}function hD(n,e){let t=LS()?64:1088;for(n[as].changeDetectionScheduler?.notify(e);n;){n[be]|=t;let r=Ra(n);if(Cd(n)&&!r)return n;n=r}return null}function VV(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function UV(n,e,t,r=!0){let i=e[me];if(_Q(i,e,n,t),r){let o=IC(t,n),a=e[Nt],c=a.parentNode(n[Oa]);c!==null&&P7(i,n[tr],a,e,c,o)}let s=e[Ed];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function CC(n,e){if(n.length<=nr)return;let t=nr+e,r=n[t];if(r){let i=r[Na];i!==null&&i!==n&&iD(i,r),e>0&&(n[t-1][ti]=r[ti]);let s=xp(n,nr+e);k7(r[me],r);let o=s[cs];o!==null&&o.detachView(s[me]),r[En]=null,r[ti]=null,r[be]&=-129}return r}function _Q(n,e,t,r){let i=nr+r,s=t.length;r>0&&(t[i-1][ti]=e),r<s-nr?(e[ti]=t[i],uS(t,nr+r,e)):(t.push(e),e[ti]=null),e[En]=t;let o=e[Na];o!==null&&t!==o&&jV(o,e);let a=e[cs];a!==null&&a.insertView(n),hv(e),e[be]|=128}function jV(n,e){let t=n[wl],r=e[En];if(ls(r))n[be]|=2;else{let i=r[En][dr];e[dr]!==i&&(n[be]|=2)}t===null?n[wl]=[e]:t.push(e)}var Ba=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return qp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Bn]}set context(e){this._lView[Bn]=e}get destroyed(){return El(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[En];if(Si(e)){let t=e[Np],r=t?t.indexOf(this):-1;r>-1&&(CC(e,r),xp(t,r))}this._attachedToViewContainer=!1}EV(this._lView[me],this._lView)}onDestroy(e){CS(this._lView,e)}markForCheck(){hD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[be]&=-129}reattach(){hv(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,NV(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cd(this._lView),t=this._lView[Na];t!==null&&!e&&iD(t,this._lView),wV(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=Cd(this._lView),r=this._lView[Na];r!==null&&!t&&jV(r,this._lView),hv(this._lView)}};var Sl=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vQ;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=AV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ba(s)}}return n})();function vQ(){return Xv(zn(),ze())}function Xv(n,e){return n.type&4?new Sl(e,n,Fd(n,e)):null}function jd(n,e,t,r,i){let s=n.data[e];if(s===null)s=bQ(n,e,t,r,i),BL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=VL();s.injectorIndex=o===null?-1:o.injectorIndex}return xd(s,!0),s}function bQ(n,e,t,r,i){let s=MS(),o=NS(),a=o?s:s&&s.parent,c=n.data[e]=EQ(n,a,t,e,r,i);return wQ(n,c,s,o),c}function wQ(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function EQ(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return RS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var IQ=()=>null;function DC(n,e){return IQ(n,e)}var BV=class{},Jv=class{},AC=class{resolveComponentFactory(e){throw new $(917,!1)}},Zp=class{static NULL=new AC},Vr=class{},Rl=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>TQ()}return n})();function TQ(){let n=ze(),e=zn(),t=ri(e.index,n);return(ls(t)?t:n)[Nt]}var zV=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var Av={},xC=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Av,r);return i!==Av||t===Av?i:this.parentInjector.get(e,t,r)}};function Lv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=tv(i,a);else if(s==2){let c=a,l=e[++o];r=tv(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ot(n,e=0){let t=ze();if(t===null)return ae(n,e);let r=zn();return $F(r,t,Pn(n),e)}function $V(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}DQ(n,e,t,a,s,c,l)}s!==null&&r!==null&&SQ(t,r,s)}function SQ(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}function CQ(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function DQ(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let p=0;p<a;p++){let m=r[p];!c&&us(m)&&(c=!0,CQ(n,t,p)),uC(Mv(t,e),n,m.type)}MQ(t,n.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let l=!1,u=!1,f=yV(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(t.mergedAttrs=Pd(t.mergedAttrs,m.hostAttrs),xQ(n,t,e,f,m),PQ(f,m,i),o!==null&&o.has(m)){let[C,S]=o.get(m);t.directiveToIndex.set(m.type,[f,C+t.directiveStart,S+t.directiveStart])}else(s===null||!s.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let E=m.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),f++}AQ(n,t,s)}function AQ(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_F(0,e,i,r),_F(1,e,i,r),bF(e,r,!1);else{let s=t.get(i);vF(0,e,s,r),vF(1,e,s,r),bF(e,r,!0)}}}function _F(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),HV(e,s)}}function vF(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),HV(e,o)}}function HV(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function bF(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||JC(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function xQ(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=xa(i.type,!0)),o=new Tl(s,us(i),Ot,null);n.blueprint[r]=o,t[r]=o,RQ(n,e,r,yV(n,t,i.hostVars,Pi),i)}function RQ(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;kQ(o)!=a&&o.push(a),o.push(t,r,s)}}function kQ(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function PQ(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;us(e)&&(t[""]=n)}}function MQ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fD(n,e,t,r,i,s,o,a){let c=e[me],l=c.consts,u=Fa(l,o),f=jd(c,n,t,r,u);return s&&$V(c,e,f,Fa(l,a),i),f.mergedAttrs=Pd(f.mergedAttrs,f.attrs),f.attrs!==null&&Lv(f,f.attrs,!1),f.mergedAttrs!==null&&Lv(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function pD(n,e){NF(n,e),bS(e)&&n.queries.elementEnd(e)}function NQ(n,e,t,r,i,s){let o=e.consts,a=Fa(o,i),c=jd(e,n,t,r,a);if(c.mergedAttrs=Pd(c.mergedAttrs,c.attrs),s!=null){let l=Fa(o,s);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Lv(c,c.attrs,!1),c.mergedAttrs!==null&&Lv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function qV(n,e,t){return n[e]=t}function za(n,e,t){if(t===Pi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function OQ(n,e,t,r){let i=za(n,e,t);return za(n,e+1,r)||i}function tC(n,e,t){return function r(i){let s=La(n)?ri(n.index,e):e;hD(s,5);let o=e[Bn],a=wF(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=wF(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function wF(n,e,t,r){let i=Pe(null);try{return _t(ot.OutputStart,e,t),t(r)!==!1}catch(s){return nQ(n,s),!1}finally{_t(ot.OutputEnd,e,t),Pe(i)}}function LQ(n,e,t,r,i,s,o,a){let c=Sd(n),l=!1,u=null;if(!r&&c&&(u=VQ(e,t,s,n.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let f=Ci(n,t),p=r?r(f):f;LK(t,p,s,a);let m=i.listen(p,s,a);if(!FQ(s)){let E=r?C=>r(ni(C[n.index])):n.index;WV(E,e,t,s,a,m,!1)}}return l}function FQ(n){return n.startsWith("animation")||n.startsWith("transition")}function VQ(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Id],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function WV(n,e,t,r,i,s,o){let a=e.firstCreatePass?AS(e):null,c=DS(t),l=c.length;c.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function EF(n,e,t,r,i,s){let o=e[t],a=e[me],l=a.data[t].outputs[r],f=o[l].subscribe(s);WV(n.index,a,e,i,s,f,!0)}var RC=Symbol("BINDING");var Fv=class extends Zp{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=io(e);return new Cl(t,this.ngModule)}};function UQ(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Kv.SignalBased)!==0};return i&&(s.transform=i),s})}function jQ(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function BQ(n,e,t){let r=e instanceof xt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new xC(t,r):t}function zQ(n){let e=n.get(Vr,null);if(e===null)throw new $(407,!1);let t=n.get(zV,null),r=n.get(yl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function $Q(n,e){let t=GV(n);return fV(e,t,t==="svg"?wS:t==="math"?RL:null)}function GV(n){return(n.selectors[0][0]||"div").toLowerCase()}var Cl=class extends Jv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=UQ(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=jQ(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=y7(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){_t(ot.DynamicComponentStart);let a=Pe(null);try{let c=this.componentDef,l=HQ(r,c,o,s),u=BQ(c,i||this.ngModule,e),f=zQ(u),p=f.rendererFactory.createRenderer(null,c),m=r?$7(p,r,c.encapsulation,u):$Q(c,p),E=o?.some(IF)||s?.some(P=>typeof P!="function"&&P.bindings.some(IF)),C=eD(null,l,null,512|gV(c),null,null,f,p,u,null,ZF(m,u,!0));C[zt]=m,yv(C);let S=null;try{let P=fD(zt,C,2,"#host",()=>l.directiveRegistry,!0,0);mV(p,m,P),Md(m,C),Yv(l,C,P),HC(l,P,C),pD(l,P),t!==void 0&&WQ(P,this.ngContentSelectors,t),S=ri(P.index,C),C[Bn]=S[Bn],dD(l,C,null)}catch(P){throw S!==null&&hC(S),hC(C),P}finally{_t(ot.DynamicComponentEnd),_v()}return new Vv(this.componentType,C,!!E)}finally{Pe(a)}}};function HQ(n,e,t,r){let i=n?["ng-version","21.0.1"]:_7(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[RC].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[RC].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(s??=[]).push(p)),p.update&&(p.targetIdx=m,(o??=[]).push(p))}}let c=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=pS(f);c.push(p)}return ZC(0,null,qQ(s,o),1,a,c,null,null,null,[i],null)}function qQ(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function IF(n){let e=n[RC].kind;return e==="input"||e==="twoWay"}var Vv=class extends BV{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=lv(t[me],zt),this.location=Fd(this._tNode,t),this.instance=ri(this._tNode.index,t)[Bn],this.hostView=this.changeDetectorRef=new Ba(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=uD(r,i[me],i,e,t);this.previousInputValues.set(e,t);let o=ri(r.index,i);hD(o,1)}get injector(){return new Il(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WQ(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var $a=(()=>{class n{static __NG_ELEMENT_ID__=GQ}return n})();function GQ(){let n=zn();return QV(n,ze())}var KQ=$a,KV=class extends KQ{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new Il(this._hostTNode,this._hostLView)}get parentInjector(){let e=BC(this._hostTNode,this._hostLView);if(FF(e)){let t=kv(e,this._hostLView),r=Rv(e),i=t[me].data[r+8];return new Il(i,t)}else return new Il(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=TF(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nr}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=DC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,TC(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!cK(e),l;if(c)l=t;else{let S=t||{};l=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef,o=S.directives,a=S.bindings}let u=c?e:new Cl(io(e)),f=r||this.parentInjector;if(!s&&u.ngModule==null){let P=(c?f:this.parentInjector).get(xt,null);P&&(s=P)}let p=io(u.componentType??{}),m=DC(this._lContainer,p?.id??null),E=m?.firstChild??null,C=u.create(f,i,E,s,o,a);return this.insertImpl(C.hostView,l,TC(this._hostTNode,m)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(PL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[En],l=new KV(c,c[tr],c[En]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return UV(o,i,s,r),e.attachToViewContainerRef(),uS(nC(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=TF(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=CC(this._lContainer,t);r&&(xp(nC(this._lContainer),t),EV(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=CC(this._lContainer,t);return r&&xp(nC(this._lContainer),t)!=null?new Ba(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function TF(n){return n[Np]}function nC(n){return n[Np]||(n[Np]=[])}function QV(n,e){let t,r=e[n.index];return Si(r)?t=r:(t=VV(r,e,null,n),e[n.index]=t,tD(e,t)),YQ(t,e,n,r),new KV(t,n,e)}function QQ(n,e){let t=n[Nt],r=t.createComment(""),i=Ci(e,n),s=t.parentNode(i);return Ov(t,s,r,t.nextSibling(i),!1),r}var YQ=ZQ,XQ=()=>!1;function JQ(n,e,t){return XQ(n,e,t)}function ZQ(n,e,t,r){if(n[Oa])return;let i;t.type&8?i=ni(r):i=QQ(e,t),n[Oa]=i}var kC=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},PC=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)mD(e,t).matches!==null&&this.queries[t].setDirty()}},Uv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=aY(e):this.predicate=e}},MC=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},NC=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,eY(t,s)),this.matchTNodeWithReadOption(e,t,Dv(t,e,s,!1,!1))}else r===Sl?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Dv(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===It||i===$a||i===Sl&&t.type&4)this.addMatch(t.index,-2);else{let s=Dv(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function eY(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function tY(n,e){return n.type&11?Fd(n,e):n.type&4?Xv(n,e):null}function nY(n,e,t,r){return t===-1?tY(e,n):t===-2?rY(n,e,r):Hp(n,n[me],t,e)}function rY(n,e,t){if(t===It)return Fd(e,n);if(t===Sl)return Xv(e,n);if(t===$a)return QV(e,n)}function YV(n,e,t,r){let i=e[cs].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(nY(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function OC(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=YV(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let f=nr;f<u.length;f++){let p=u[f];p[Na]===p[En]&&OC(p[me],p,l,r)}if(u[wl]!==null){let f=u[wl];for(let p=0;p<f.length;p++){let m=f[p];OC(m[me],m,l,r)}}}}}return r}function iY(n,e){return n[cs].queries[e].queryList}function XV(n,e,t){let r=new Nv((t&4)===4);return OL(n,e,r,r.destroy),(e[cs]??=new PC).queries.push(new kC(r))-1}function sY(n,e,t){let r=Tn();return r.firstCreatePass&&(JV(r,new Uv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),XV(r,ze(),e)}function oY(n,e,t,r){let i=Tn();if(i.firstCreatePass){let s=zn();JV(i,new Uv(e,t,r),s.index),cY(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return XV(i,ze(),t)}function aY(n){return n.split(",").map(e=>e.trim())}function JV(n,e,t){n.queries===null&&(n.queries=new MC),n.queries.track(new NC(e,t))}function cY(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function mD(n,e){return n.queries.getByIndex(e)}function lY(n,e){let t=n[me],r=mD(t,e);return r.crossesNgTemplate?OC(t,n,e,[]):YV(t,n,r,e)}var Dl=class{},Zv=class{};var jv=class extends Dl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fv(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=fS(e);this._bootstrapComponents=uV(s.bootstrap),this._r3Injector=HS(e,t,[{provide:Dl,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver},...r],ro(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bv=class extends Zv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jv(this.moduleType,e,[])}};var Wp=class extends Dl{injector;componentFactoryResolver=new Fv(this);instance=null;constructor(e){super();let t=new gl([...e.providers,{provide:Dl,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver}],e.parent||wd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function em(n,e,t=null){return new Wp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var uY=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=mS(!1,t.type),i=r.length>0?em([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ae(xt))})}return n})();function Fe(n){return Ld(()=>{let e=ZV(n),t=Ve(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(uY).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ri.Emulated,styles:n.styles||er,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Xp("NgStandalone"),e2(t);let r=n.dependencies;return t.directiveDefs=SF(r,dY),t.pipeDefs=SF(r,EL),t.id=pY(t),t})}function dY(n){return io(n)||pS(n)}function ht(n){return Ld(()=>({type:n.type,bootstrap:n.bootstrap||er,declarations:n.declarations||er,imports:n.imports||er,exports:n.exports||er,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hY(n,e){if(n==null)return ka;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Kv.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function fY(n){if(n==null)return ka;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function rt(n){return Ld(()=>{let e=ZV(n);return e2(e),e})}function eb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ZV(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ka,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||er,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hY(n.inputs,e),outputs:fY(n.outputs),debugInfo:null}}function e2(n){n.features?.forEach(e=>e(n))}function SF(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function pY(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function mY(n){return Object.getPrototypeOf(n.prototype).constructor}function ps(n){let e=mY(n.type),t=!0,r=[n];for(;e;){let i;if(us(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=rC(n.inputs),o.declaredInputs=rC(n.declaredInputs),o.outputs=rC(n.outputs);let a=i.hostBindings;a&&bY(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&_Y(n,c),l&&vY(n,l),gY(n,i),hL(n.outputs,i.outputs),us(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ps&&(t=!1)}}e=Object.getPrototypeOf(e)}yY(r)}function gY(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function yY(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pd(i.hostAttrs,t=Pd(t,i.hostAttrs))}}function rC(n){return n===ka?{}:n===er?[]:n}function _Y(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vY(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function bY(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function t2(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Pd(n.mergedAttrs,n.attrs);let u=n.tView=ZC(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),xd(n,!1);let c=IY(t,e,n,r);vv()&&sD(t,e,c,n),Md(c,e);let l=VV(c,e,c,n);e[r+zt]=l,tD(e,l),JQ(l,n,e)}function wY(n,e,t,r,i,s,o,a,c,l,u){let f=t+zt,p;return e.firstCreatePass?(p=jd(e,f,4,o||null,a||null),fv()&&$V(e,n,p,Fa(e.consts,l),aD),NF(e,p)):p=e.data[f],t2(p,n,e,t,r,i,s,c),Sd(p)&&Yv(e,n,p),l!=null&&Jp(n,p,u),p}function EY(n,e,t,r,i,s,o,a,c,l,u){let f=t+zt,p;if(e.firstCreatePass){if(p=jd(e,f,4,o||null,a||null),l!=null){let m=Fa(e.consts,l);p.localNames=[];for(let E=0;E<m.length;E+=2)p.localNames.push(m[E],-1)}}else p=e.data[f];return t2(p,n,e,t,r,i,s,c),l!=null&&Jp(n,p,u),p}function ms(n,e,t,r,i,s,o,a){let c=ze(),l=Tn(),u=Fa(l.consts,s);return wY(c,l,n,e,t,r,i,u,void 0,o,a),ms}var IY=TY;function TY(n,e,t,r){return Up(!0),e[Nt].createComment("")}var tb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var gD=new J("");function kl(n){return!!n&&typeof n.then=="function"}function nb(n){return!!n&&typeof n.subscribe=="function"}var yD=new J("");function rb(n){return In([{provide:yD,multi:!0,useValue:n}])}var _D=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(yD,{optional:!0})??[];injector=N(yt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Wt(this.injector,i);if(kl(s))t.push(s);else if(nb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ib=new J("");function n2(){y0(()=>{let n="";throw new $(600,n)})}function r2(n){return n.isBoundToModule}var SY=10;var ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(hr);afterRenderManager=N(vV);zonelessEnabled=N(jp);rootEffectScheduler=N(XS);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ut;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(oo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(de(t=>!t))}constructor(){N(xl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(xt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=yt.NULL){return this._injector.get(Se).run(()=>{_t(ot.BootstrapComponentStart);let o=t instanceof Jv;if(!this._injector.get(_D).done){let E="";throw new $(405,E)}let c;o?c=t:c=this._injector.get(Zp).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=r2(c)?void 0:this._injector.get(Dl),u=r||c.selector,f=c.create(i,[],u,l),p=f.location.nativeElement,m=f.injector.get(gD,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),$p(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),_t(ot.BootstrapComponentEnd,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_t(ot.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(rD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw _t(ot.ChangeDetectionEnd),new $(101,!1);let t=Pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Pe(t),this.afterTick.next(),_t(ot.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<SY;){_t(ot.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{_t(ot.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Op(i))continue;let s=r&&!this.zonelessEnabled?0:1;NV(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Op(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;$p(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ib,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$p(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $p(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rr(n,e,t,r){let i=ze(),s=pv();if(za(i,s,e)){let o=Tn(),a=$S();Z7(a,i,n,e,t,r)}return rr}var iDe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Mi(n,e,t){let r=ze(),i=pv();if(za(r,i,e)){let s=Tn(),o=$S();G7(o,r,n,e,r[Nt],t)}return Mi}function LC(n,e,t,r,i){uD(e,n,t,i?"class":"style",r)}function te(n,e,t,r){let i=ze(),s=i[me],o=n+zt,a=s.firstCreatePass?fD(o,i,2,e,aD,fv(),t,r):s.data[o];if(cD(a,i,n,e,i2),Sd(a)){let c=i[me];Yv(c,i,a),HC(c,a,i)}return r!=null&&Jp(i,a),te}function ne(){let n=Tn(),e=zn(),t=lD(e);return n.firstCreatePass&&pD(n,t),kS(t)&&PS(),xS(),t.classesWithoutHost!=null&&pK(t)&&LC(n,t,ze(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&mK(t)&&LC(n,t,ze(),t.stylesWithoutHost,!1),ne}function Lt(n,e,t,r){return te(n,e,t,r),ne(),Lt}function Ur(n,e,t,r){let i=ze(),s=i[me],o=n+zt,a=s.firstCreatePass?NQ(o,s,2,e,t,r):s.data[o];return cD(a,i,n,e,i2),r!=null&&Jp(i,a),Ur}function jr(){let n=zn(),e=lD(n);return kS(e)&&PS(),xS(),jr}function Bd(n,e,t,r){return Ur(n,e,t,r),jr(),Bd}var i2=(n,e,t,r,i)=>(Up(!0),fV(e[Nt],r,QL()));function sb(n,e,t){let r=ze(),i=r[me],s=n+zt,o=i.firstCreatePass?fD(s,r,8,"ng-container",aD,fv(),e,t):i.data[s];if(cD(o,r,n,"ng-container",CY),Sd(o)){let a=r[me];Yv(a,r,o),HC(a,o,r)}return t!=null&&Jp(r,o),sb}function ob(){let n=Tn(),e=zn(),t=lD(e);return n.firstCreatePass&&pD(n,t),ob}var CY=(n,e,t,r,i)=>(Up(!0),w7(e[Nt],""));function tm(){return ze()}var Bp=void 0;function DY(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var AY=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Bp,Bp,Bp],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",DY],iC={};function Br(n){let e=xY(n),t=CF(e);if(t)return t;let r=e.split("-")[0];if(t=CF(r),t)return t;if(r==="en")return AY;throw new $(701,!1)}function CF(n){return n in iC||(iC[n]=ei.ng&&ei.ng.common&&ei.ng.common.locales&&ei.ng.common.locales[n]),iC[n]}var Gt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Gt||{});function xY(n){return n.toLowerCase().replace(/_/g,"-")}var nm="en-US";var RY=nm;function s2(n){typeof n=="string"&&(RY=n.toLowerCase().replace(/_/g,"-"))}function si(n,e,t){let r=ze(),i=Tn(),s=zn();return kY(i,r,r[Nt],s,n,e,t),si}function kY(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=tC(r,e,s),LQ(r,n,e,o,t,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],m=u[f+1];c??=tC(r,e,s),EF(r,e,p,m,i,c)}if(l&&l.length)for(let f of l)c??=tC(r,e,s),EF(r,e,f,i,i,c)}}function zd(n=1){return KL(n)}function PY(n,e){let t=null,r=h7(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?hV(n,s,!0):m7(r,s))return i}return t}function mr(n){let e=ze()[dr][tr];if(!e.projection){let t=n?n.length:1,r=e.projection=bL(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?PY(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Rt(n,e=0,t,r,i,s){let o=ze(),a=Tn(),c=r?n+1:null;c!==null&&EY(o,a,c,r,i,s,null,t);let l=jd(a,zt+n,16,null,t||null);l.projection===null&&(l.projection=e),OS();let f=!o[Ed]||RS();o[dr][tr].projection[l.projection]===null&&c!==null?MY(o,a,c):f&&!Wv(l)&&j7(a,o,l)}function MY(n,e,t){let r=zt+t,i=e.data[r],s=n[r],o=DC(s,i.tView.ssrId),a=AV(n,i,void 0,{dehydratedView:o});UV(s,a,0,TC(i,o))}function gs(n,e,t,r){oY(n,e,t,r)}function ab(n,e,t){sY(n,e,t)}function oi(n){let e=ze(),t=Tn(),r=jS();gv(r+1);let i=mD(t,r);if(n.dirty&&kL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=lY(e,r);n.reset(s,AK),n.notifyOnChanges()}return!0}return!1}function ai(){return iY(ze(),jS())}function cb(n){let e=UL();return uv(e,zt+n)}function Tv(n,e){return n<<17|e<<2}function Al(n){return n>>17&32767}function NY(n){return(n&2)==2}function OY(n,e){return n&131071|e<<17}function FC(n){return n|2}function Od(n){return(n&131068)>>2}function sC(n,e){return n&-131069|e<<2}function LY(n){return(n&1)===1}function VC(n){return n|1}function FY(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Al(o),c=Od(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let f=t;u=f[1],(u===null||bd(f,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let p=Al(n[a+1]);n[r+1]=Tv(p,a),p!==0&&(n[p+1]=sC(n[p+1],r)),n[a+1]=OY(n[a+1],r)}else n[r+1]=Tv(a,0),a!==0&&(n[a+1]=sC(n[a+1],r)),a=r;else n[r+1]=Tv(c,0),a===0?a=r:n[c+1]=sC(n[c+1],r),c=r;l&&(n[r+1]=FC(n[r+1])),DF(n,u,r,!0),DF(n,u,r,!1),VY(e,u,n,r,s),o=Tv(a,c),s?e.classBindings=o:e.styleBindings=o}function VY(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&bd(s,e)>=0&&(t[r+1]=VC(t[r+1]))}function DF(n,e,t,r){let i=n[t+1],s=e===null,o=r?Al(i):Od(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];UY(c,e)&&(a=!0,n[o+1]=r?VC(l):FC(l)),o=r?Al(l):Od(l)}a&&(n[t+1]=r?FC(i):VC(i))}function UY(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bd(n,e)>=0:!1}var xi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jY(n){return n.substring(xi.key,xi.keyEnd)}function BY(n){return zY(n),o2(n,a2(n,0,xi.textEnd))}function o2(n,e){let t=xi.textEnd;return t===e?-1:(e=xi.keyEnd=$Y(n,xi.key=e,t),a2(n,e,t))}function zY(n){xi.key=0,xi.keyEnd=0,xi.value=0,xi.valueEnd=0,xi.textEnd=n.length}function a2(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function $Y(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function lb(n,e,t){return c2(n,e,t,!1),lb}function gn(n,e){return c2(n,e,null,!0),gn}function Pl(n){qY(XY,HY,n,!0)}function HY(n,e){for(let t=BY(e);t>=0;t=o2(e,t))sv(n,jY(e),!0)}function c2(n,e,t,r){let i=ze(),s=Tn(),o=US(2);if(s.firstUpdatePass&&u2(s,n,o,r),e!==Pi&&za(i,o,e)){let a=s.data[Va()];d2(s,a,i,i[Nt],n,i[o+1]=ZY(e,t),r,o)}}function qY(n,e,t,r){let i=Tn(),s=US(2);i.firstUpdatePass&&u2(i,null,s,r);let o=ze();if(t!==Pi&&za(o,s,t)){let a=i.data[Va()];if(h2(a,r)&&!l2(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=tv(c,t||"")),LC(i,a,o,t,r)}else JY(i,a,o,o[Nt],o[s+1],o[s+1]=YY(n,e,t),r,s)}}function l2(n,e){return e>=n.expandoStartIndex}function u2(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Va()],o=l2(n,t);h2(s,r)&&e===null&&!o&&(e=!1),e=WY(i,s,e,r),FY(i,s,e,t,o,r)}}function WY(n,e,t,r){let i=HL(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=oC(null,n,e,t,r),t=Gp(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=oC(i,n,e,t,r),s===null){let c=GY(n,e,r);c!==void 0&&Array.isArray(c)&&(c=oC(null,n,e,c[1],r),c=Gp(c,e.attrs,r),KY(n,e,r,c))}else s=QY(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function GY(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Od(r)!==0)return n[Al(r)]}function KY(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Al(i)]=r}function QY(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Gp(r,o,t)}return Gp(r,e.attrs,t)}function oC(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Gp(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Gp(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sv(n,o,t?!0:e[++s]))}return n===void 0?null:n}function YY(n,e,t){if(t==null||t==="")return er;let r=[],i=ki(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function XY(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&sv(n,r,t)}function JY(n,e,t,r,i,s,o,a){i===Pi&&(i=er);let c=0,l=0,u=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;u!==null||f!==null;){let p=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,E=null,C;u===f?(c+=2,l+=2,p!==m&&(E=f,C=m)):f===null||u!==null&&u<f?(c+=2,E=u):(l+=2,E=f,C=m),E!==null&&d2(n,e,t,r,E,C,o,a),u=c<i.length?i[c]:null,f=l<s.length?s[l]:null}}function d2(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=LY(l)?AF(c,e,t,i,Od(l),o):void 0;if(!zv(u)){zv(s)||NY(l)&&(s=AF(c,null,t,i,a,o));let f=ES(Va(),t);z7(r,o,f,i,s)}}function AF(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,p=t[i+1];p===Pi&&(p=f?er:void 0);let m=f?ov(p,r):u===r?p:void 0;if(l&&!zv(m)&&(m=ov(c,r)),zv(m)&&(a=m,o))return a;let E=n[i+1];i=o?Al(E):Od(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ov(c,r))}return a}function zv(n){return n!==void 0}function ZY(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ro(ki(n)))),n}function h2(n,e){return(n.flags&(e?8:16))!==0}function se(n,e=""){let t=ze(),r=Tn(),i=n+zt,s=r.firstCreatePass?jd(r,i,1,e,null):r.data[i],o=eX(r,t,s,e,n);t[i]=o,vv()&&sD(r,t,o,s),xd(s,!1)}var eX=(n,e,t,r,i)=>(Up(!0),v7(e[Nt],r));function tX(n,e,t,r=""){return za(n,pv(),t)?e+Ap(t)+r:Pi}function ys(n){return rm("",n),ys}function rm(n,e,t){let r=ze(),i=tX(r,n,e,t);return i!==Pi&&nX(r,Va(),i),rm}function nX(n,e,t){let r=ES(e,n);b7(n[Nt],r,t)}function rX(n,e,t){let r=Tn();if(r.firstCreatePass){let i=us(n);UC(t,r.data,r.blueprint,i,!0),UC(e,r.data,r.blueprint,i,!1)}}function UC(n,e,t,r,i){if(n=Pn(n),Array.isArray(n))for(let s=0;s<n.length;s++)UC(n[s],e,t,r,i);else{let s=Tn(),o=ze(),a=zn(),c=ml(n)?n:Pn(n.provide),l=yS(n),u=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ml(n)||!n.multi){let m=new Tl(l,i,Ot,null),E=cC(c,e,i?u:u+p,f);E===-1?(uC(Mv(a,o),s,c),aC(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[E]=m,o[E]=m)}else{let m=cC(c,e,u+p,f),E=cC(c,e,u,u+p),C=m>=0&&t[m],S=E>=0&&t[E];if(i&&!S||!i&&!C){uC(Mv(a,o),s,c);let P=oX(i?sX:iX,t.length,i,r,l,n);!i&&S&&(t[E].providerFactory=P),aC(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=f2(t[i?E:m],l,!i&&r);aC(s,n,m>-1?m:E,P)}!i&&r&&S&&t[E].componentProviders++}}}function aC(n,e,t,r){let i=ml(e),s=DL(e);if(i||s){let c=(s?Pn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function f2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function cC(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function iX(n,e,t,r,i){return jC(this.multi,[])}function sX(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Hp(r,r[me],this.providerFactory.index,i);o=c.slice(0,a),jC(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],jC(s,o);return o}function jC(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function oX(n,e,t,r,i,s){let o=new Tl(n,t,Ot,null);return o.multi=[],o.index=e,o.componentProviders=0,f2(o,i,r&&!t),o}function ub(n,e=[]){return t=>{t.providersResolver=(r,i)=>rX(r,i?i(n):n,e)}}function p2(n,e){let t=n[e];return t===Pi?void 0:t}function aX(n,e,t,r,i,s){let o=e+t;return za(n,o,i)?qV(n,o+1,s?r.call(s,i):r(i)):p2(n,o+1)}function cX(n,e,t,r,i,s,o){let a=e+t;return OQ(n,a,i,s)?qV(n,a+2,o?r.call(o,i,s):r(i,s)):p2(n,a+2)}function Ha(n,e){let t=Tn(),r,i=n+zt;t.firstCreatePass?(r=lX(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=xa(r.type,!0)),o,a=Zn(Ot);try{let c=Pv(!1),l=s();return Pv(c),IS(t,ze(),i,l),l}finally{Zn(a)}}function lX(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ml(n,e,t){let r=n+zt,i=ze(),s=uv(i,r);return m2(i,r)?aX(i,VS(),e,s.transform,t,s):s.transform(t)}function vD(n,e,t,r){let i=n+zt,s=ze(),o=uv(s,i);return m2(s,i)?cX(s,VS(),e,o.transform,t,r,o):o.transform(t,r)}function m2(n,e){return n[me].data[e].pure}function db(n,e){return Xv(n,e)}var $v=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},bD=(()=>{class n{compileModuleSync(t){return new Bv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=fS(t),s=uV(i.declarations).reduce((o,a)=>{let c=io(a);return c&&o.push(new Cl(c)),o},[]);return new $v(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g2=(()=>{class n{applicationErrorHandler=N(hr);appRef=N(ii);taskService=N(oo);ngZone=N(Se);zonelessEnabled=N(jp);tracing=N(xl,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Tp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(YS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?WS:qS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Tp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y2(){return[{provide:yl,useExisting:g2},{provide:Se,useClass:Sp},{provide:jp,useValue:!0}]}function uX(){return typeof $localize<"u"&&$localize.locale||nm}var im=new J("",{factory:()=>N(im,{optional:!0,skipSelf:!0})||uX()});var b2=Symbol("InputSignalNode#UNSET"),SX=Ve(H({},w_),{transformFn:void 0,applyValueToInputSignal(n,e){gp(n,e)}});function w2(n,e){let t=Object.create(SX);t.value=n,t.transformFn=e?.transform;function r(){if(__(t),t.value===b2){let i=null;throw new $(-950,i)}return t.value}return r[Zr]=t,r}var $d=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Kp(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function _2(n,e){return w2(n,e)}function CX(n){return w2(b2,n)}var E2=(_2.required=CX,_2);var wD=new J(""),DX=new J("");function sm(n){return!n.moduleRef}function AX(n){let e=sm(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Se);return t.run(()=>{sm(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),sm(n)){let s=()=>e.destroy(),o=n.platformInjector.get(wD);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(wD);o.add(s),n.moduleRef.onDestroy(()=>{$p(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return RX(r,t,()=>{let s=e.get(oo),o=s.add(),a=e.get(_D);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(im,nm);if(s2(c||nm),!e.get(DX,!0))return sm(n)?e.get(ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sm(n)){let u=e.get(ii);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return xX?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var xX;function RX(n,e,t){try{let r=t();return kl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hb=null;function kX(n=[],e){return yt.create({name:e,providers:[{provide:Rp,useValue:"platform"},{provide:wD,useValue:new Set([()=>hb=null])},...n]})}function PX(n=[]){if(hb)return hb;let e=kX(n);return hb=e,n2(),MX(e),e}function MX(n){let e=n.get(qv,null);Wt(n,()=>{e?.forEach(t=>t())})}function om(){return!1}var Hd=(()=>{class n{static __NG_ELEMENT_ID__=NX}return n})();function NX(n){return OX(zn(),ze(),(n&16)===16)}function OX(n,e,t){if(La(n)&&!t){let r=ri(n.index,e);return new Ba(r,r)}else if(n.type&175){let r=e[dr];return new Ba(r,e)}return null}function I2(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;_t(ot.BootstrapApplicationStart);try{let s=i?.injector??PX(r),o=[y2(),ZL,...t||[]],a=new Wp({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return AX({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{_t(ot.BootstrapApplicationEnd)}}function zr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function T2(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function S2(n,e){let t=io(n),r=e.elementInjector||wd();return new Cl(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var A2=null;function fo(){return A2}function ED(n){A2??=n}var am=class{},ID=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(x2),providedIn:"platform"})}return n})();var x2=(()=>{class n extends ID{_location;_history;_doc=N(Je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fo().getBaseHref(this._doc)}onPopState(t){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function R2(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function C2(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Wa(n){return n&&n[0]!=="?"?`?${n}`:n}var qd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(P2),providedIn:"root"})}return n})(),k2=new J(""),P2=(()=>{class n extends qd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return R2(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Wa(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Wa(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Wa(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ae(ID),ae(k2,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wd=(()=>{class n{_subject=new ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=VX(C2(D2(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wa(r))}normalize(t){return n.stripTrailingSlash(FX(this._basePath,D2(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wa(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wa(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wa;static joinWithSlash=R2;static stripTrailingSlash=C2;static \u0275fac=function(r){return new(r||n)(ae(qd))};static \u0275prov=Q({token:n,factory:()=>LX(),providedIn:"root"})}return n})();function LX(){return new Wd(ae(qd))}function FX(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function D2(n){return n.replace(/\/index.html$/,"")}function VX(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Hn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Hn||{}),vt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(vt||{}),gr=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(gr||{}),mo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function O2(n){return Br(n)[Gt.LocaleId]}function L2(n,e,t){let r=Br(n),i=[r[Gt.DayPeriodsFormat],r[Gt.DayPeriodsStandalone]],s=ci(i,e);return ci(s,t)}function F2(n,e,t){let r=Br(n),i=[r[Gt.DaysFormat],r[Gt.DaysStandalone]],s=ci(i,e);return ci(s,t)}function V2(n,e,t){let r=Br(n),i=[r[Gt.MonthsFormat],r[Gt.MonthsStandalone]],s=ci(i,e);return ci(s,t)}function U2(n,e){let r=Br(n)[Gt.Eras];return ci(r,e)}function cm(n,e){let t=Br(n);return ci(t[Gt.DateFormat],e)}function lm(n,e){let t=Br(n);return ci(t[Gt.TimeFormat],e)}function um(n,e){let r=Br(n)[Gt.DateTimeFormat];return ci(r,e)}function dm(n,e){let t=Br(n),r=t[Gt.NumberSymbols][e];if(typeof r>"u"){if(e===mo.CurrencyDecimal)return t[Gt.NumberSymbols][mo.Decimal];if(e===mo.CurrencyGroup)return t[Gt.NumberSymbols][mo.Group]}return r}function j2(n){if(!n[Gt.ExtraData])throw new $(2303,!1)}function B2(n){let e=Br(n);return j2(e),(e[Gt.ExtraData][2]||[]).map(r=>typeof r=="string"?TD(r):[TD(r[0]),TD(r[1])])}function z2(n,e,t){let r=Br(n);j2(r);let i=[r[Gt.ExtraData][0],r[Gt.ExtraData][1]],s=ci(i,e)||[];return ci(s,t)||[]}function ci(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new $(2304,!1)}function TD(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var UX=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fb={},jX=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function $2(n,e,t,r){let i=QX(n);e=po(t,e)||e;let o=[],a;for(;e;)if(a=jX.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=q2(r,c),i=KX(i,r));let l="";return o.forEach(u=>{let f=WX(u);l+=f?f(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function _b(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function po(n,e){let t=O2(n);if(fb[t]??={},fb[t][e])return fb[t][e];let r="";switch(e){case"shortDate":r=cm(n,gr.Short);break;case"mediumDate":r=cm(n,gr.Medium);break;case"longDate":r=cm(n,gr.Long);break;case"fullDate":r=cm(n,gr.Full);break;case"shortTime":r=lm(n,gr.Short);break;case"mediumTime":r=lm(n,gr.Medium);break;case"longTime":r=lm(n,gr.Long);break;case"fullTime":r=lm(n,gr.Full);break;case"short":let i=po(n,"shortTime"),s=po(n,"shortDate");r=pb(um(n,gr.Short),[i,s]);break;case"medium":let o=po(n,"mediumTime"),a=po(n,"mediumDate");r=pb(um(n,gr.Medium),[o,a]);break;case"long":let c=po(n,"longTime"),l=po(n,"longDate");r=pb(um(n,gr.Long),[c,l]);break;case"full":let u=po(n,"fullTime"),f=po(n,"fullDate");r=pb(um(n,gr.Full),[u,f]);break}return r&&(fb[t][e]=r),r}function pb(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ni(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function BX(n,e){return Ni(n,3).substring(0,e)}function en(n,e,t=0,r=!1,i=!1){return function(s,o){let a=zX(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return BX(a,e);let c=dm(o,mo.MinusSign);return Ni(a,e,c,r,i)}}function zX(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function Tt(n,e,t=Hn.Format,r=!1){return function(i,s){return $X(i,s,n,e,t,r)}}function $X(n,e,t,r,i,s){switch(t){case 2:return V2(e,i,r)[n.getMonth()];case 1:return F2(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=B2(e),u=z2(e,i,r),f=l.findIndex(p=>{if(Array.isArray(p)){let[m,E]=p,C=o>=m.hours&&a>=m.minutes,S=o<E.hours||o===E.hours&&a<E.minutes;if(m.hours<E.hours){if(C&&S)return!0}else if(C||S)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(f!==-1)return u[f]}return L2(e,i,r)[o<12?0:1];case 3:return U2(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new $(2302,!1)}}function mb(n){return function(e,t,r){let i=-1*r,s=dm(t,mo.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Ni(o,2,s)+Ni(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Ni(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Ni(o,2,s)+":"+Ni(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Ni(o,2,s)+":"+Ni(Math.abs(i%60),2,s);default:throw new $(2310,!1)}}}var HX=0,yb=4;function qX(n){let e=_b(n,HX,1).getDay();return _b(n,0,1+(e<=yb?yb:yb+7)-e)}function H2(n){let e=n.getDay(),t=e===0?-3:yb-e;return _b(n.getFullYear(),n.getMonth(),n.getDate()+t)}function SD(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=H2(t),o=qX(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Ni(i,n,dm(r,mo.MinusSign))}}function gb(n,e=!1){return function(t,r){let s=H2(t).getFullYear();return Ni(s,n,dm(r,mo.MinusSign),e)}}var CD={};function WX(n){if(CD[n])return CD[n];let e;switch(n){case"G":case"GG":case"GGG":e=Tt(3,vt.Abbreviated);break;case"GGGG":e=Tt(3,vt.Wide);break;case"GGGGG":e=Tt(3,vt.Narrow);break;case"y":e=en(0,1,0,!1,!0);break;case"yy":e=en(0,2,0,!0,!0);break;case"yyy":e=en(0,3,0,!1,!0);break;case"yyyy":e=en(0,4,0,!1,!0);break;case"Y":e=gb(1);break;case"YY":e=gb(2,!0);break;case"YYY":e=gb(3);break;case"YYYY":e=gb(4);break;case"M":case"L":e=en(1,1,1);break;case"MM":case"LL":e=en(1,2,1);break;case"MMM":e=Tt(2,vt.Abbreviated);break;case"MMMM":e=Tt(2,vt.Wide);break;case"MMMMM":e=Tt(2,vt.Narrow);break;case"LLL":e=Tt(2,vt.Abbreviated,Hn.Standalone);break;case"LLLL":e=Tt(2,vt.Wide,Hn.Standalone);break;case"LLLLL":e=Tt(2,vt.Narrow,Hn.Standalone);break;case"w":e=SD(1);break;case"ww":e=SD(2);break;case"W":e=SD(1,!0);break;case"d":e=en(2,1);break;case"dd":e=en(2,2);break;case"c":case"cc":e=en(7,1);break;case"ccc":e=Tt(1,vt.Abbreviated,Hn.Standalone);break;case"cccc":e=Tt(1,vt.Wide,Hn.Standalone);break;case"ccccc":e=Tt(1,vt.Narrow,Hn.Standalone);break;case"cccccc":e=Tt(1,vt.Short,Hn.Standalone);break;case"E":case"EE":case"EEE":e=Tt(1,vt.Abbreviated);break;case"EEEE":e=Tt(1,vt.Wide);break;case"EEEEE":e=Tt(1,vt.Narrow);break;case"EEEEEE":e=Tt(1,vt.Short);break;case"a":case"aa":case"aaa":e=Tt(0,vt.Abbreviated);break;case"aaaa":e=Tt(0,vt.Wide);break;case"aaaaa":e=Tt(0,vt.Narrow);break;case"b":case"bb":case"bbb":e=Tt(0,vt.Abbreviated,Hn.Standalone,!0);break;case"bbbb":e=Tt(0,vt.Wide,Hn.Standalone,!0);break;case"bbbbb":e=Tt(0,vt.Narrow,Hn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Tt(0,vt.Abbreviated,Hn.Format,!0);break;case"BBBB":e=Tt(0,vt.Wide,Hn.Format,!0);break;case"BBBBB":e=Tt(0,vt.Narrow,Hn.Format,!0);break;case"h":e=en(3,1,-12);break;case"hh":e=en(3,2,-12);break;case"H":e=en(3,1);break;case"HH":e=en(3,2);break;case"m":e=en(4,1);break;case"mm":e=en(4,2);break;case"s":e=en(5,1);break;case"ss":e=en(5,2);break;case"S":e=en(6,1);break;case"SS":e=en(6,2);break;case"SSS":e=en(6,3);break;case"Z":case"ZZ":case"ZZZ":e=mb(0);break;case"ZZZZZ":e=mb(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=mb(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=mb(2);break;default:return null}return CD[n]=e,e}function q2(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function GX(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function KX(n,e,t){let i=n.getTimezoneOffset(),s=q2(e,i);return GX(n,-1*(s-i))}function QX(n){if(M2(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return _b(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(UX))return YX(r)}let e=new Date(n);if(!M2(e))throw new $(2311,!1);return e}function YX(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function M2(n){return n instanceof Date&&!isNaN(n.valueOf())}var Nl=(()=>{class n{_viewContainer;_context=new vb;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N2(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N2(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ot($a),Ot(Sl))};static \u0275dir=rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),vb=class{$implicit=null;ngIf=null};function N2(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}function W2(n,e){return new $(2100,!1)}var DD=class{createSubscription(e,t,r){return fr(()=>e.subscribe({next:t,error:r}))}dispose(e){fr(()=>e.unsubscribe())}},AD=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},XX=new AD,JX=new DD,Ol=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=N(hr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(kl(t))return XX;if(nb(t))return JX;throw W2(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Ot(Hd,16))};static \u0275pipe=eb({name:"async",type:n,pure:!1})}return n})();var ZX="mediumDate",G2=new J(""),K2=new J(""),xD=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??ZX,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return $2(t,o,s||this.locale,a)}catch(o){throw W2(n,o.message)}}static \u0275fac=function(r){return new(r||n)(Ot(im,16),Ot(G2,24),Ot(K2,24))};static \u0275pipe=eb({name:"date",type:n,pure:!0})}return n})();var Ga=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({})}return n})();function bb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ll=class{};var RD="browser";function Q2(n){return n===RD}var hm=class{_doc;constructor(e){this._doc=e}manager},Eb=(()=>{class n extends hm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ae(Je))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Sb=new J(""),ND=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Eb));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Eb);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ae(Sb),ae(Se))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),kD="ng-app-id";function Y2(n){for(let e of n)e.remove()}function X2(n,e){let t=e.createElement("style");return t.textContent=n,t}function tJ(n,e,t,r){let i=n.head?.querySelectorAll(`style[${kD}="${e}"],link[${kD}="${e}"]`);if(i)for(let s of i)s.removeAttribute(kD),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function MD(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var OD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,tJ(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,X2);r?.forEach(i=>this.addUsage(i,this.external,MD))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Y2(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Y2(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,X2(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,MD(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ae(Je),ae(Hv),ae(Ud,8),ae(lo))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),PD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},LD=/%COMP%/g;var Z2="%COMP%",nJ=`_nghost-${Z2}`,rJ=`_ngcontent-${Z2}`,iJ=!0,sJ=new J("",{factory:()=>iJ});function oJ(n){return rJ.replace(LD,n)}function aJ(n){return nJ.replace(LD,n)}function eU(n,e){return e.map(t=>t.replace(LD,n))}var mm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new fm(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Tb?i.applyToHost(t):i instanceof pm&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case Ri.Emulated:s=new Tb(c,l,r,this.appId,u,o,a,f,p);break;case Ri.ShadowDom:return new Ib(c,t,r,o,a,this.nonce,f,p,l);case Ri.ExperimentalIsolatedShadowDom:return new Ib(c,t,r,o,a,this.nonce,f,p);default:s=new pm(c,l,r,u,o,a,f,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ae(ND),ae(OD),ae(Hv),ae(sJ),ae(Je),ae(Se),ae(Ud),ae(xl,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),fm=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(PD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(J2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(J2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=PD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=PD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hs.DashCase|hs.Important)?e.style.setProperty(t,r,i&hs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fo().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function J2(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ib=class extends fm{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=eU(r.id,u);for(let p of u){let m=document.createElement("style");o&&m.setAttribute("nonce",o),m.textContent=p,this.shadowRoot.appendChild(m)}let f=r.getExternalStyles?.();if(f)for(let p of f){let m=MD(p,i);o&&m.setAttribute("nonce",o),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pm=class extends fm{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?eU(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Nd.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Tb=class extends pm{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,l,u),this.contentAttr=oJ(u),this.hostAttr=aJ(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Cb=class n extends am{supportsDOMEvents=!0;static makeCurrent(){ED(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=cJ();return t==null?null:lJ(t)}resetBaseElement(){gm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bb(document.cookie,e)}},gm=null;function cJ(){return gm=gm||document.head.querySelector("base"),gm?gm.getAttribute("href"):null}function lJ(n){return new URL(n,document.baseURI).pathname}var uJ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),tU=["alt","control","meta","shift"],dJ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hJ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nU=(()=>{class n extends hm{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fo().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),tU.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=dJ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),tU.forEach(o=>{if(o!==i){let a=hJ[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ae(Je))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function FD(n,e,t){let r=H({rootComponent:n,platformRef:t?.platformRef},fJ(e));return I2(r)}function fJ(n){return{appProviders:[..._J,...n?.providers??[]],platformProviders:yJ}}function pJ(){Cb.makeCurrent()}function mJ(){return new Lr}function gJ(){return $C(document),document}var yJ=[{provide:lo,useValue:RD},{provide:qv,useValue:pJ,multi:!0},{provide:Je,useFactory:gJ}];var _J=[{provide:Rp,useValue:"root"},{provide:Lr,useFactory:mJ},{provide:Sb,useClass:Eb,multi:!0},{provide:Sb,useClass:nU,multi:!0},mm,OD,ND,{provide:Vr,useExisting:mm},{provide:Ll,useClass:uJ},[]];var Ka=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var UD=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},jD=class{encodeKey(e){return rU(e)}encodeValue(e){return rU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function vJ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var bJ=/%(\d[a-f0-9])/gi,wJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function rU(n){return encodeURIComponent(n).replace(bJ,(e,t)=>wJ[t]??e)}function Db(n){return`${n}`}var go=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new jD,e.fromString){if(e.fromObject)throw new $(2805,!1);this.map=vJ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Db):[Db(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Db(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Db(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function EJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function iU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sU(n){return typeof Blob<"u"&&n instanceof Blob}function oU(n){return typeof FormData<"u"&&n instanceof FormData}function IJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var aU="Content-Type",cU="Accept",lU="text/plain",uU="application/json",TJ=`${uU}, ${lU}, */*`,Gd=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(EJ(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new $(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Ka,this.context??=new UD,!this.params)this.params=new go,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||iU(this.body)||sU(this.body)||oU(this.body)||IJ(this.body)?this.body:this.body instanceof go?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oU(this.body)?null:sU(this.body)?this.body.type||null:iU(this.body)?null:typeof this.body=="string"?lU:this.body instanceof go?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?uU:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,f=e.referrer||this.referrer,p=e.integrity||this.integrity,m=e.referrerPolicy||this.referrerPolicy,E=e.transferCache??this.transferCache,C=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,P=e.withCredentials??this.withCredentials,M=e.reportProgress??this.reportProgress,F=e.headers||this.headers,j=e.params||this.params,z=e.context??this.context;return e.setHeaders!==void 0&&(F=Object.keys(e.setHeaders).reduce((B,T)=>B.set(T,e.setHeaders[T]),F)),e.setParams&&(j=Object.keys(e.setParams).reduce((B,T)=>B.set(T,e.setParams[T]),j)),new n(t,r,S,{params:j,headers:F,context:z,reportProgress:M,responseType:i,withCredentials:P,transferCache:E,keepalive:s,cache:a,priority:o,timeout:C,mode:c,redirect:l,credentials:u,referrer:f,integrity:p,referrerPolicy:m})}},Fl=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Fl||{}),ym=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ka,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},BD=class n extends ym{constructor(e={}){super(e)}type=Fl.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_m=class n extends ym{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Fl.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Kd=class extends ym{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},SJ=200,CJ=204;var DJ=/^\)\]\}',?\n/;var AJ=(()=>{class n{xhrFactory;tracingService=N(xl,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new $(-2800,!1);let r=this.xhrFactory;return he(null).pipe(Zt(()=>new ue(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((S,P)=>o.setRequestHeader(S,P.join(","))),t.headers.has(cU)||o.setRequestHeader(cU,TJ),!t.headers.has(aU)){let S=t.detectContentTypeHeader();S!==null&&o.setRequestHeader(aU,S)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let S=t.responseType.toLowerCase();o.responseType=S!=="json"?S:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let S=o.statusText||"OK",P=new Ka(o.getAllResponseHeaders()),M=o.responseURL||t.url;return c=new BD({headers:P,status:o.status,statusText:S,url:M}),c},u=this.maybePropagateTrace(()=>{let{headers:S,status:P,statusText:M,url:F}=l(),j=null;P!==CJ&&(j=typeof o.response>"u"?o.responseText:o.response),P===0&&(P=j?SJ:0);let z=P>=200&&P<300;if(t.responseType==="json"&&typeof j=="string"){let B=j;j=j.replace(DJ,"");try{j=j!==""?JSON.parse(j):null}catch(T){j=B,z&&(z=!1,j={error:T,text:j})}}z?(s.next(new _m({body:j,headers:S,status:P,statusText:M,url:F||void 0})),s.complete()):s.error(new Kd({error:j,headers:S,status:P,statusText:M,url:F||void 0}))}),f=this.maybePropagateTrace(S=>{let{url:P}=l(),M=new Kd({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(M)}),p=f;t.timeout&&(p=this.maybePropagateTrace(S=>{let{url:P}=l(),M=new Kd({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:P||void 0});s.error(M)}));let m=!1,E=this.maybePropagateTrace(S=>{m||(s.next(l()),m=!0);let P={type:Fl.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),t.responseType==="text"&&o.responseText&&(P.partialText=o.responseText),s.next(P)}),C=this.maybePropagateTrace(S=>{let P={type:Fl.UploadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),s.next(P)});return o.addEventListener("load",u),o.addEventListener("error",f),o.addEventListener("timeout",p),o.addEventListener("abort",f),t.reportProgress&&(o.addEventListener("progress",E),a!==null&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:Fl.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",u),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",E),a!==null&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(ae(Ll))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xJ(n,e){return e(n)}function RJ(n,e,t){return(r,i)=>Wt(t,()=>e(r,s=>n(s,i)))}var kJ=new J("",{factory:()=>[]}),dU=new J(""),PJ=new J("",{providedIn:"root",factory:()=>!0});var MJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ae(AJ),i},providedIn:"root"})}return n})();var NJ=(()=>{class n{backend;injector;chain=null;pendingTasks=N(ja);contributeToStability=N(PJ);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(kJ),...this.injector.get(dU,[])]));this.chain=r.reduceRight((i,s)=>RJ(i,s,this.injector),xJ)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ul(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ae(MJ),ae(xt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ae(NJ),i},providedIn:"root"})}return n})();function VD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var zD=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Gd)s=t;else{let c;i.headers instanceof Ka?c=i.headers:c=new Ka(i.headers);let l;i.params&&(i.params instanceof go?l=i.params:l=new go({fromObject:i.params})),s=new Gd(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let o=he(s).pipe(gd(c=>this.handler.handle(c)));if(t instanceof Gd||i.observe==="events")return o;let a=o.pipe(Jt(c=>c instanceof _m));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new $(2806,!1);return c.body}));case"blob":return a.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new $(2807,!1);return c.body}));case"text":return a.pipe(de(c=>{if(c.body!==null&&typeof c.body!="string")throw new $(2808,!1);return c.body}));case"json":default:return a.pipe(de(c=>c.body))}case"response":return a;default:throw new $(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new go().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,VD(i,r))}post(t,r,i={}){return this.request("POST",t,VD(i,r))}put(t,r,i={}){return this.request("PUT",t,VD(i,r))}static \u0275fac=function(r){return new(r||n)(ae(OJ))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hU=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ae(Je))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $D=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ae(FJ),i},providedIn:"root"})}return n})(),FJ=(()=>{class n extends $D{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Mn.NONE:return r;case Mn.HTML:return uo(r,"HTML")?ki(r):YC(this._doc,String(r)).toString();case Mn.STYLE:return uo(r,"Style")?ki(r):r;case Mn.SCRIPT:if(uo(r,"Script"))return ki(r);throw new $(5200,!1);case Mn.URL:return uo(r,"URL")?ki(r):Qp(String(r));case Mn.RESOURCE_URL:if(uo(r,"ResourceURL"))return ki(r);throw new $(5201,!1);default:throw new $(5202,!1)}}bypassSecurityTrustHtml(t){return qC(t)}bypassSecurityTrustStyle(t){return WC(t)}bypassSecurityTrustScript(t){return GC(t)}bypassSecurityTrustUrl(t){return KC(t)}bypassSecurityTrustResourceUrl(t){return QC(t)}static \u0275fac=function(r){return new(r||n)(ae(Je))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var we="primary",km=Symbol("RouteTitle"),KD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bl(n){return new KD(n)}function EU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mb(n){return new Promise((e,t)=>{n.pipe(to()).subscribe({next:r=>e(r),error:r=>t(r)})})}function UJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_s(n[t],e[t]))return!1;return!0}function _s(n,e){let t=n?QD(n):void 0,r=e?QD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!IU(n[i],e[i]))return!1;return!0}function QD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function IU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function TU(n){return n.length>0?n[n.length-1]:null}function $l(n){return z_(n)?n:kl(n)?jt(Promise.resolve(n)):he(n)}function SU(n){return z_(n)?Mb(n):Promise.resolve(n)}var jJ={exact:DU,subset:AU},CU={exact:BJ,subset:zJ,ignored:()=>!0};function pU(n,e,t){return jJ[t.paths](n.root,e.root,t.matrixParams)&&CU[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function BJ(n,e){return _s(n,e)}function DU(n,e,t){if(!Ul(n.segments,e.segments)||!Rb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DU(n.children[r],e.children[r],t))return!1;return!0}function zJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IU(n[t],e[t]))}function AU(n,e,t){return xU(n,e,e.segments,t)}function xU(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ul(i,t)||e.hasChildren()||!Rb(i,t,r))}else if(n.segments.length===t.length){if(!Ul(n.segments,t)||!Rb(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!AU(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ul(n.segments,i)||!Rb(n.segments,i,r)||!n.children[we]?!1:xU(n.children[we],e,s,r)}}function Rb(n,e,t){return e.every((r,i)=>CU[t](n[i].parameters,r.parameters))}var Li=class{root;queryParams;fragment;_queryParamMap;constructor(e=new at([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bl(this.queryParams),this._queryParamMap}toString(){return qJ.serialize(this)}},at=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kb(this)}},Qa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bl(this.parameters),this._parameterMap}toString(){return kU(this)}};function $J(n,e){return Ul(n,e)&&n.every((t,r)=>_s(t.parameters,e[r].parameters))}function Ul(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function HJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var Pm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new Ya,providedIn:"root"})}return n})(),Ya=class{parse(e){let t=new XD(e);return new Li(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vm(e.root,!0)}`,r=KJ(e.queryParams),i=typeof e.fragment=="string"?`#${WJ(e.fragment)}`:"";return`${t}${r}${i}`}},qJ=new Ya;function kb(n){return n.segments.map(e=>kU(e)).join("/")}function vm(n,e){if(!n.hasChildren())return kb(n);if(e){let t=n.children[we]?vm(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${vm(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=HJ(n,(r,i)=>i===we?[vm(n.children[we],!1)]:[`${i}:${vm(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${kb(n)}/${t[0]}`:`${kb(n)}/(${t.join("//")})`}}function RU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ab(n){return RU(n).replace(/%3B/gi,";")}function WJ(n){return encodeURI(n)}function YD(n){return RU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pb(n){return decodeURIComponent(n)}function mU(n){return Pb(n.replace(/\+/g,"%20"))}function kU(n){return`${YD(n.path)}${GJ(n.parameters)}`}function GJ(n){return Object.entries(n).map(([e,t])=>`;${YD(e)}=${YD(t)}`).join("")}function KJ(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ab(t)}=${Ab(i)}`).join("&"):`${Ab(t)}=${Ab(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var QJ=/^[^\/()?;#]+/;function HD(n){let e=n.match(QJ);return e?e[0]:""}var YJ=/^[^\/()?;=#]+/;function XJ(n){let e=n.match(YJ);return e?e[0]:""}var JJ=/^[^=?&#]+/;function ZJ(n){let e=n.match(JJ);return e?e[0]:""}var eZ=/^[^&#]+/;function tZ(n){let e=n.match(eZ);return e?e[0]:""}var XD=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new at(e,t)),r}parseSegment(){let e=HD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Qa(Pb(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=XJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=HD(this.remaining);i&&(r=i,this.capture(r))}e[Pb(t)]=Pb(r)}parseQueryParam(e){let t=ZJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=tZ(this.remaining);o&&(r=o,this.capture(r))}let i=mU(t),s=mU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=HD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s??we]=Object.keys(o).length===1&&o[we]?o[we]:new at([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function PU(n){return n.segments.length>0?new at([],{[we]:n}):n}function MU(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=MU(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new at(n.segments,e);return nZ(t)}function nZ(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new at(n.segments.concat(e.segments),e.children)}return n}function Xa(n){return n instanceof Li}function NU(n,e,t=null,r=null,i=new Ya){let s=OU(n);return LU(s,e,t,r,i)}function OU(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new at(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=PU(r);return e??i}function LU(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return qD(s,s,s,t,r,i);let o=rZ(e);if(o.toRoot())return qD(s,s,new at([],{}),t,r,i);let a=iZ(o,s,n),c=a.processChildren?wm(a.segmentGroup,a.index,o.commands):VU(a.segmentGroup,a.index,o.commands);return qD(s,a.segmentGroup,c,t,r,i)}function Nb(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Tm(n){return typeof n=="object"&&n!=null&&n.outlets}function gU(n,e,t){n||="\u0275";let r=new Li;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function qD(n,e,t,r,i,s){let o={};for(let[l,u]of Object.entries(r??{}))o[l]=Array.isArray(u)?u.map(f=>gU(l,f,s)):gU(l,u,s);let a;n===e?a=t:a=FU(n,e,t);let c=PU(MU(a));return new Li(c,o,i)}function FU(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=FU(s,e,t)}),new at(n.segments,r)}var Ob=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nb(r[0]))throw new $(4003,!1);let i=r.find(Tm);if(i&&i!==TU(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rZ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ob(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ob(t,e,r)}var Yd=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function iZ(n,e,t){if(n.isAbsolute)return new Yd(e,!0,0);if(!t)return new Yd(e,!1,NaN);if(t.parent===null)return new Yd(t,!0,0);let r=Nb(n.commands[0])?0:1,i=t.segments.length-1+r;return sZ(t,i,n.numberOfDoubleDots)}function sZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Yd(r,!1,i-s)}function oZ(n){return Tm(n[0])?n[0].outlets:{[we]:n}}function VU(n,e,t){if(n??=new at([],{}),n.segments.length===0&&n.hasChildren())return wm(n,e,t);let r=aZ(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new at(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new at(n.segments.slice(r.pathIndex),n.children),wm(s,0,i)}else return r.match&&i.length===0?new at(n.segments,{}):r.match&&!n.hasChildren()?JD(n,e,t):r.match?wm(n,0,i):JD(n,e,t)}function wm(n,e,t){if(t.length===0)return new at(n.segments,{});{let r=oZ(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=wm(n.children[we],e,t);return new at(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=VU(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new at(n.segments,i)}}function aZ(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Tm(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_U(c,l,o))return s;r+=2}else{if(!_U(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function JD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Tm(s)){let c=cZ(s.outlets);return new at(r,c)}if(i===0&&Nb(t[0])){let c=n.segments[e];r.push(new Qa(c.path,yU(t[0]))),i++;continue}let o=Tm(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Nb(a)?(r.push(new Qa(o,yU(a))),i+=2):(r.push(new Qa(o,{})),i++)}return new at(r,{})}function cZ(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=JD(new at([],{}),0,r))}),e}function yU(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _U(n,e,t){return n==t.path&&_s(e,t.parameters)}var Em="imperative",Sn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Sn||{}),Hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},zl=class extends Hr{type=Sn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bs=class extends Hr{urlAfterRedirects;type=Sn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ir=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ir||{}),Sm=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Sm||{}),vs=class extends Hr{reason;code;type=Sn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yo=class extends Hr{reason;code;type=Sn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Jd=class extends Hr{error;target;type=Sn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cm=class extends Hr{urlAfterRedirects;state;type=Sn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lb=class extends Hr{urlAfterRedirects;state;type=Sn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fb=class extends Hr{urlAfterRedirects;state;shouldActivate;type=Sn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vb=class extends Hr{urlAfterRedirects;state;type=Sn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ub=class extends Hr{urlAfterRedirects;state;type=Sn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jb=class{route;type=Sn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bb=class{route;type=Sn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zb=class{snapshot;type=Sn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$b=class{snapshot;type=Sn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hb=class{snapshot;type=Sn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qb=class{snapshot;type=Sn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Dm=class{},Zd=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function lZ(n){return!(n instanceof Dm)&&!(n instanceof Zd)}function uZ(n,e){return n.providers&&!n._injector&&(n._injector=em(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Oi(n){return n.outlet||we}function dZ(n,e){let t=n.filter(r=>Oi(r)===e);return t.push(...n.filter(r=>Oi(r)!==e)),t}function nh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wb=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return nh(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new rh(this.rootInjector)}},rh=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wb(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ae(xt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gb=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ZD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ZD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=eA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return eA(e,this._root).map(t=>t.value)}};function ZD(n,e){if(n===e.value)return e;for(let t of e.children){let r=ZD(n,t);if(r)return r}return null}function eA(n,e){if(n===e.value)return[e];for(let t of e.children){let r=eA(n,t);if(r.length)return r.unshift(e),r}return[]}var $r=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qd(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Am=class extends Gb{snapshot;constructor(e,t){super(e),this.snapshot=t,oA(this,e)}toString(){return this.snapshot.toString()}};function UU(n){let e=hZ(n),t=new qt([new Qa("",{})]),r=new qt({}),i=new qt({}),s=new qt({}),o=new qt(""),a=new _o(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new Am(new $r(a,[]),e)}function hZ(n){let e={},t={},r={},s=new jl([],e,r,"",t,we,n,null,{});return new xm("",new $r(s,[]))}var _o=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[km]))??he(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Bl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Bl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kb(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&BU(i)&&(r.resolve[km]=i.title),r}var jl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[km]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},xm=class extends Gb{url;constructor(e,t){super(t),this.url=e,oA(this,t)}toString(){return jU(this._root)}};function oA(n,e){e.value._routerState=n,e.children.forEach(t=>oA(n,t))}function jU(n){let e=n.children.length>0?` { ${n.children.map(jU).join(", ")} } `:"";return`${n.value}${e}`}function WD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_s(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_s(e.params,t.params)||n.paramsSubject.next(t.params),UJ(e.url,t.url)||n.urlSubject.next(t.url),_s(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tA(n,e){let t=_s(n.params,e.params)&&$J(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||tA(n.parent,e.parent))}function BU(n){return typeof n.title=="string"||n.title===null}var zU=new J(""),Mm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new Bt;deactivateEvents=new Bt;attachEvents=new Bt;detachEvents=new Bt;routerOutletData=E2(void 0,{});parentContexts=N(rh);location=N($a);changeDetector=N(Hd);inputBinder=N(Jb,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nA(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[co]})}return n})(),nA=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===_o?this.route:e===rh?this.childContexts:e===zU?this.outletData:this.parent.get(e,t)}},Jb=new J("");var aA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Lt(0,"router-outlet")},dependencies:[Mm],encapsulation:2})}return n})();function cA(n){let e=n.children&&n.children.map(cA),t=e?Ve(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=aA),t}function fZ(n,e,t){let r=Rm(n,e._root,t?t._root:void 0);return new Am(r,e)}function Rm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=pZ(n,e,t);return new $r(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rm(n,a)),o}}let r=mZ(e.value),i=e.children.map(s=>Rm(n,s));return new $r(r,i)}}function pZ(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rm(n,r,i);return Rm(n,r)})}function mZ(n){return new _o(new qt(n.url),new qt(n.params),new qt(n.queryParams),new qt(n.fragment),new qt(n.data),n.outlet,n.component,n)}var eh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$U="ngNavigationCancelingError";function Qb(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Xa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HU(!1,ir.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HU(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$U]=!0,t.cancellationCode=e,t}function gZ(n){return qU(n)&&Xa(n.url)}function qU(n){return!!n&&n[$U]}var yZ=(n,e,t,r)=>de(i=>(new rA(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),rA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),WD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qd(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new qb(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $b(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(WD(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),WD(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Yb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xd=class{component;route;constructor(e,t){this.component=e,this.route=t}};function _Z(n,e,t){let r=n._root,i=e?e._root:null;return bm(r,i,t,[r.value])}function vZ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ih(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nS(n)?n:e.get(n):r}function bm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qd(e);return n.children.forEach(o=>{bZ(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Im(a,t.getContext(o),i)),i}function bZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=wZ(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Yb(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?bm(n,e,a?a.children:null,r,i):bm(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xd(a.outlet.component,o))}else o&&Im(e,a,i),i.canActivateChecks.push(new Yb(r)),s.component?bm(n,null,a?a.children:null,r,i):bm(n,null,t,r,i);return i}function wZ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ul(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ul(n.url,e.url)||!_s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tA(n,e)||!_s(n.queryParams,e.queryParams);case"paramsChange":default:return!tA(n,e)}}function Im(n,e,t){let r=Qd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Im(o,e.children.getContext(s),t):Im(o,null,t):Im(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Xd(e.outlet.component,i)):t.canDeactivateChecks.push(new Xd(null,i)):t.canDeactivateChecks.push(new Xd(null,i))}function Nm(n){return typeof n=="function"}function EZ(n){return typeof n=="boolean"}function IZ(n){return n&&Nm(n.canLoad)}function TZ(n){return n&&Nm(n.canActivate)}function SZ(n){return n&&Nm(n.canActivateChild)}function CZ(n){return n&&Nm(n.canDeactivate)}function DZ(n){return n&&Nm(n.canMatch)}function WU(n){return n instanceof cl||n?.name==="EmptyError"}var xb=Symbol("INITIAL_VALUE");function th(){return Zt(n=>R0(n.map(e=>e.pipe(pn(1),K_(xb)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===xb)return xb;if(t===!1||AZ(t))return t}return!0}),Jt(e=>e!==xb),pn(1)))}function AZ(n){return Xa(n)||n instanceof eh}function GU(n){return n.aborted?he(void 0).pipe(pn(1)):new ue(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function KU(n){return dl(GU(n))}function xZ(n,e){return Jn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?he(Ve(H({},t),{guardsResult:!0})):RZ(o,r,i,n).pipe(Jn(a=>a&&EZ(a)?kZ(r,s,n,e):he(a)),de(a=>Ve(H({},t),{guardsResult:a})))})}function RZ(n,e,t,r){return jt(n).pipe(Jn(i=>LZ(i.component,i.route,t,e,r)),to(i=>i!==!0,!0))}function kZ(n,e,t,r){return jt(e).pipe(gd(i=>md(MZ(i.route.parent,r),PZ(i.route,r),OZ(n,i.path,t),NZ(n,i.route,t))),to(i=>i!==!0,!0))}function PZ(n,e){return n!==null&&e&&e(new Hb(n)),he(!0)}function MZ(n,e){return n!==null&&e&&e(new zb(n)),he(!0)}function NZ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(s=>bp(()=>{let o=nh(e)??t,a=ih(s,o),c=TZ(a)?a.canActivate(e,n):Wt(o,()=>a(e,n));return $l(c).pipe(to())}));return he(i).pipe(th())}function OZ(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vZ(o)).filter(o=>o!==null).map(o=>bp(()=>{let a=o.guards.map(c=>{let l=nh(o.node)??t,u=ih(c,l),f=SZ(u)?u.canActivateChild(r,n):Wt(l,()=>u(r,n));return $l(f).pipe(to())});return he(a).pipe(th())}));return he(s).pipe(th())}function LZ(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return he(!0);let o=s.map(a=>{let c=nh(e)??i,l=ih(a,c),u=CZ(l)?l.canDeactivate(n,e,t,r):Wt(c,()=>l(n,e,t,r));return $l(u).pipe(to())});return he(o).pipe(th())}function FZ(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return he(!0);let o=s.map(a=>{let c=ih(a,n),l=IZ(c)?c.canLoad(e,t):Wt(n,()=>c(e,t)),u=$l(l);return i?u.pipe(KU(i)):u});return he(o).pipe(th(),QU(r))}function QU(n){return ol(mn(e=>{if(typeof e!="boolean")throw Qb(n,e)}),de(e=>e===!0))}function VZ(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return he(!0);let o=s.map(a=>{let c=ih(a,n),l=DZ(c)?c.canMatch(e,t):Wt(n,()=>c(e,t)),u=$l(l);return i?u.pipe(KU(i)):u});return he(o).pipe(th(),QU(r))}var Vl=class YU extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,YU.prototype)}},iA=class XU extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,XU.prototype)}};function UZ(n){throw new $(4e3,!1)}function jZ(n){throw HU(!1,ir.GuardRejected)}var BZ=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[we])throw UZ(`${e.redirectTo}`);i=i.children[we]}}async applyRedirectCommands(e,t,r,i,s){let o=await zZ(t,i,s);if(o instanceof Li)throw new iA(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new iA(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Li(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new at(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function zZ(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:f}=e;return Mb($l(Wt(t,()=>r({params:l,data:u,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:f}))))}var sA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $Z(n,e,t,r,i,s){let o=JU(n,e,t);return o.matched?(r=uZ(e,r),VZ(r,e,t,i,s).pipe(de(a=>a===!0?o:H({},sA)))):he(o)}function JU(n,e,t){if(e.path==="**")return HZ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},sA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EU)(t,n,e);if(!i)return H({},sA);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function HZ(n){return{matched:!0,parameters:n.length>0?TU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vU(n,e,t,r){return t.length>0&&GZ(n,t,r)?{segmentGroup:new at(e,WZ(r,new at(t,n.children))),slicedSegments:[]}:t.length===0&&KZ(n,t,r)?{segmentGroup:new at(n.segments,qZ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new at(n.segments,n.children),slicedSegments:t}}function qZ(n,e,t,r){let i={};for(let s of t)if(Zb(n,e,s)&&!r[Oi(s)]){let o=new at([],{});i[Oi(s)]=o}return H(H({},r),i)}function WZ(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&Oi(r)!==we){let i=new at([],{});t[Oi(r)]=i}return t}function GZ(n,e,t){return t.some(r=>Zb(n,e,r)&&Oi(r)!==we)}function KZ(n,e,t){return t.some(r=>Zb(n,e,r))}function Zb(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function QZ(n,e,t){return e.length===0&&!n.children[t]}var YZ=class{};async function XZ(n,e,t,r,i,s,o="emptyOnly",a){return new ZZ(n,e,t,r,i,o,s,a).recognize()}var JZ=31,ZZ=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new BZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vU(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new $r(r,t),s=new xm("",i),o=NU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new jl([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,we,t),rootSnapshot:t}}catch(r){if(r instanceof iA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vl?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof $r?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=r.children[c],u=dZ(t,c),f=await this.processSegmentGroup(e,u,l,c,i);o.push(...f)}let a=ZU(o);return eee(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(l){if(l instanceof Vl||WU(l))continue;throw l}if(QZ(r,i,s))return new YZ;throw new Vl(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Oi(r)!==o&&(o===we||!Zb(i,s,r)))throw new Vl(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new Vl(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=JU(t,i,s);if(!c)throw new Vl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>JZ&&(this.allowRedirects=!1));let m=new jl(s,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,bU(i),Oi(i),i.component??i._loadedComponent??null,i,wU(i)),E=Kb(m,a,this.paramsInheritanceStrategy);if(m.params=Object.freeze(E.params),m.data=Object.freeze(E.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let C=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f,m,e),S=await this.applyRedirects.lineralizeSegments(i,C);return this.processSegment(e,r,t,S.concat(p),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Mb($Z(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Vl(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:u,consumedSegments:f,remainingSegments:p}=a,m=new jl(f,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,bU(r),Oi(r),r.component??r._loadedComponent??null,r,wU(r)),E=Kb(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(E.params),m.data=Object.freeze(E.data);let{segmentGroup:C,slicedSegments:S}=vU(t,f,p,c);if(S.length===0&&C.hasChildren()){let F=await this.processChildren(l,c,C,m);return new $r(m,F)}if(c.length===0&&S.length===0)return new $r(m,[]);let P=Oi(r)===s,M=await this.processSegment(l,c,C,S,P?we:s,!0,m);return new $r(m,M instanceof $r?[M]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Mb(FZ(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw jZ(t)}return{routes:[],injector:e}}};function eee(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function tee(n){let e=n.value.routeConfig;return e&&e.path===""}function ZU(n){let e=[],t=new Set;for(let r of n){if(!tee(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ZU(r.children);e.push(new $r(r.value,i))}return e.filter(r=>!t.has(r))}function bU(n){return n.data||{}}function wU(n){return n.resolve||{}}var nee=new J("",{factory:()=>XZ});function ree(n,e,t,r,i,s,o){let a=n.get(nee);return Jn(c=>he(c).pipe(Zt(l=>a(n,e,t,r,l.extractedUrl,i,s,o)),de(({state:l,tree:u})=>Ve(H({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function iee(n,e){return Jn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return he(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of ej(c))o.add(l);let a=0;return jt(o).pipe(gd(c=>s.has(c)?see(c,r,n,e):(c.data=Kb(c,c.parent,n).resolve,he(void 0))),mn(()=>a++),G_(1),Jn(c=>a===o.size?he(t):jn))})}function ej(n){let e=n.children.map(t=>ej(t)).flat();return[n,...e]}function see(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!BU(i)&&(s[km]=i.title),bp(()=>(n.data=Kb(n,n.parent,t).resolve,oee(s,n,e,r).pipe(de(o=>(n._resolvedData=o,n.data=H(H({},n.data),o),null)))))}function oee(n,e,t,r){let i=QD(n);if(i.length===0)return he({});let s={};return jt(i).pipe(Jn(o=>aee(n[o],e,t,r).pipe(to(),mn(a=>{if(a instanceof eh)throw Qb(new Ya,a);s[o]=a}))),G_(1),de(()=>s),ll(o=>WU(o)?jn:vp(o)))}function aee(n,e,t,r){let i=nh(e)??r,s=ih(n,i),o=s.resolve?s.resolve(e,t):Wt(i,()=>s(e,t));return $l(o)}function GD(n){return Zt(e=>{let t=n(e);return t?jt(t).pipe(de(()=>e)):he(e)})}var lA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[km]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(tj),providedIn:"root"})}return n})(),tj=(()=>{class n extends lA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ae(hU))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sh=new J("",{factory:()=>({})}),Om=new J(""),nj=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(bD);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await SU(Wt(t,()=>r.loadComponent())),o=await sj(ij(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await rj(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function rj(n,e,t,r){let i=await SU(Wt(t,()=>n.loadChildren())),s=await sj(ij(i)),o;s instanceof Zv||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(Om,[],{optional:!0,self:!0}).flat()),{routes:c.map(cA),injector:a}}function cee(n){return n&&typeof n=="object"&&"default"in n}function ij(n){return cee(n)?n.default:n}async function sj(n){return n}var ew=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(lee),providedIn:"root"})}return n})(),lee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oj=new J("");var uee=()=>{},aj=new J(""),cj=(()=>{class n{currentNavigation=Di(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Di(null,{});events=new ut;transitionAbortWithErrorSubject=new ut;configLoader=N(nj);environmentInjector=N(xt);destroyRef=N(so);urlSerializer=N(Pm);rootContexts=N(rh);location=N(Wd);inputBindingEnabled=N(Jb,{optional:!0})!==null;titleStrategy=N(lA);options=N(sh,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(ew);createViewTransition=N(oj,{optional:!0});navigationErrorHandler=N(aj,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new jb(i)),r=i=>this.events.next(new Bb(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;fr(()=>{this.transitions?.next(Ve(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new qt(null),this.transitions.pipe(Jt(r=>r!==null),Zt(r=>{let i=!1,s=new AbortController;return he(r).pipe(Zt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ir.SupersededByNewNavigation),jn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?Ve(H({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new yo(o.id,this.urlSerializer.serialize(o.rawUrl),"",Sm.IgnoredSameUrlNavigation)),o.resolve(!1),jn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return he(o).pipe(Zt(u=>(this.events.next(new zl(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?jn:Promise.resolve(u))),ree(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),mn(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=u.urlAfterRedirects,p));let f=new Cm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:p,restoredState:m,extras:E}=o,C=new zl(u,this.urlSerializer.serialize(f),p,m);this.events.next(C);let S=UU(this.rootComponentType).snapshot;return this.currentTransition=r=Ve(H({},o),{targetSnapshot:S,urlAfterRedirects:f,extras:Ve(H({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=f,P)),he(r)}else return this.events.next(new yo(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Sm.IgnoredByUrlHandlingStrategy)),o.resolve(!1),jn}),mn(o=>{let a=new Lb(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),de(o=>(this.currentTransition=r=Ve(H({},o),{guards:_Z(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),xZ(this.environmentInjector,o=>this.events.next(o)),mn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Qb(this.urlSerializer,o.guardsResult);let a=new Fb(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Jt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ir.GuardRejected),!1)),GD(o=>{if(o.guards.canActivateChecks.length!==0)return he(o).pipe(mn(a=>{let c=new Vb(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Zt(a=>{let c=!1;return he(a).pipe(iee(this.paramsInheritanceStrategy,this.environmentInjector),mn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ir.NoDataFromResolver)}}))}),mn(a=>{let c=new Ub(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),GD(o=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let f=nh(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).then(p=>{l.component=p}))}for(let f of l.children)u.push(...a(f));return u},c=a(o.targetSnapshot.root);return c.length===0?he(o):jt(Promise.all(c).then(()=>o))}),GD(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?jt(c).pipe(de(()=>r)):he(r)}),de(o=>{let a=fZ(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ve(H({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),mn(()=>{this.events.next(new Dm)}),yZ(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),pn(1),dl(GU(s.signal).pipe(Jt(()=>!i&&!r.targetRouterState),mn(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",ir.Aborted)}))),mn({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=uee,a)),this.lastSuccessfulNavigation.set(fr(this.currentNavigation)),this.events.next(new bs(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),dl(this.transitionAbortWithErrorSubject.pipe(mn(o=>{throw o}))),ul(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",ir.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ll(o=>{if(this.destroyed)return r.resolve(!1),jn;if(i=!0,qU(o))this.events.next(new vs(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),gZ(o)?this.events.next(new Zd(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Jd(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Wt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof eh){let{message:l,cancellationCode:u}=Qb(this.urlSerializer,c);this.events.next(new vs(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Zd(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return jn}))}))}cancelNavigationTransition(t,r,i){let s=new vs(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=fr(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dee(n){return n!==Em}var lj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(hee),providedIn:"root"})}return n})(),Xb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},hee=(()=>{class n extends Xb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uA=(()=>{class n{urlSerializer=N(Pm);options=N(sh,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(Wd);urlHandlingStrategy=N(ew);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Li;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Li?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=UU(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>N(uj),providedIn:"root"})}return n})(),uj=(()=>{class n extends uA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof zl?this.updateStateMemento():t instanceof yo?this.commitTransition(r):t instanceof Cm?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Dm?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vs&&t.code!==ir.SupersededByNewNavigation&&t.code!==ir.Redirect?this.restoreHistory(r):t instanceof Jd?this.restoreHistory(r,!0):t instanceof bs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dA(n,e){n.events.pipe(Jt(t=>t instanceof bs||t instanceof vs||t instanceof Jd||t instanceof yo),de(t=>t instanceof bs||t instanceof yo?0:(t instanceof vs?t.code===ir.Redirect||t.code===ir.SupersededByNewNavigation:!1)?2:1),Jt(t=>t!==2),pn(1)).subscribe(()=>{e()})}var fee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(tb);stateManager=N(uA);options=N(sh,{optional:!0})||{};pendingTasks=N(oo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(cj);urlSerializer=N(Pm);location=N(Wd);urlHandlingStrategy=N(ew);injector=N(xt);_events=new ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(lj);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(Om,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(Jb,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=fr(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof vs&&r.code!==ir.Redirect&&r.code!==ir.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bs)this.navigated=!0;else if(r instanceof Zd){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dee(i.source)},o);this.scheduleNavigation(a,Em,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lZ(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Em,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(hr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return fr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=OU(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return LU(f,t,u,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Xa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Em,null,r)}navigate(t,r={skipLocationChange:!1}){return mee(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(os(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},fee):r===!1?i=H({},pee):i=r,Xa(t))return pU(this.currentUrlTree,t,i);let s=this.parseUrl(t);return pU(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,p)=>{a=f,c=p});let u=this.pendingTasks.add();return dA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mee(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var tw=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Di(null,{});get href(){return fr(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ut;applicationErrorHandler=N(hr);options=N(sh,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(N(new $d("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof bs&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Xa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ot(vo),Ot(_o),Kp("tabindex"),Ot(Rl),Ot(It),Ot(qd))};static \u0275dir=rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&si("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&rr("href",i.reactiveHref(),XC)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",zr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",zr],replaceUrl:[2,"replaceUrl","replaceUrl",zr],routerLink:"routerLink"},features:[co]})}return n})();var yee=new J("");function hA(n,...e){return In([{provide:Om,multi:!0,useValue:n},[],{provide:_o,useFactory:_ee},{provide:ib,multi:!0,useFactory:vee},e.map(t=>t.\u0275providers)])}function _ee(){return N(vo).routerState.root}function vee(){let n=N(yt);return e=>{let t=n.get(ii);if(e!==t.components[0])return;let r=n.get(vo),i=n.get(bee);n.get(wee)===1&&r.initialNavigation(),n.get(Eee,null,{optional:!0})?.setUpPreloading(),n.get(yee,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bee=new J("",{factory:()=>new ut}),wee=new J("",{factory:()=>1});var Eee=new J("");var Me=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Me||{}),Fi="*";function dj(n,e=null){return{type:Me.Sequence,steps:n,options:e}}function fA(n){return{type:Me.Style,styles:n,offset:null}}var bo=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},oh=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Lm="!";function hj(n){return new $(3e3,!1)}function Tee(){return new $(3100,!1)}function See(){return new $(3101,!1)}function Cee(n){return new $(3001,!1)}function Dee(n){return new $(3003,!1)}function Aee(n){return new $(3004,!1)}function pj(n,e){return new $(3005,!1)}function mj(){return new $(3006,!1)}function gj(){return new $(3007,!1)}function yj(n,e){return new $(3008,!1)}function _j(n){return new $(3002,!1)}function vj(n,e,t,r,i){return new $(3010,!1)}function bj(){return new $(3011,!1)}function wj(){return new $(3012,!1)}function Ej(){return new $(3200,!1)}function Ij(){return new $(3202,!1)}function Tj(){return new $(3013,!1)}function Sj(n){return new $(3014,!1)}function Cj(n){return new $(3015,!1)}function Dj(n){return new $(3016,!1)}function Aj(n,e){return new $(3404,!1)}function xee(n){return new $(3502,!1)}function xj(n){return new $(3503,!1)}function Rj(){return new $(3300,!1)}function kj(n){return new $(3504,!1)}function Pj(n){return new $(3301,!1)}function Mj(n,e){return new $(3302,!1)}function Nj(n){return new $(3303,!1)}function Oj(n,e){return new $(3400,!1)}function Lj(n){return new $(3401,!1)}function Fj(n){return new $(3402,!1)}function Vj(n,e){return new $(3505,!1)}function wo(n){switch(n.length){case 0:return new bo;case 1:return n[0];default:return new oh(n)}}function yA(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,f=u&&a||new Map;c.forEach((p,m)=>{let E=m,C=p;if(m!=="offset")switch(E=n.normalizePropertyName(E,i),C){case Lm:C=t.get(m);break;case Fi:C=r.get(m);break;default:C=n.normalizeStyleValue(m,E,C,i);break}f.set(E,C)}),u||s.push(f),a=f,o=l}),i.length)throw xee(i);return s}function nw(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&pA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&pA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&pA(t,"destroy",n)));break}}function pA(n,e,t){let r=t.totalTime,i=!!t.disabled,s=rw(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function rw(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function yr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function _A(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var Ree=typeof document>"u"?null:document.documentElement;function iw(n){let e=n.parentNode||n.host||null;return e===Ree?null:e}function kee(n){return n.substring(1,6)=="ebkit"}var Hl=null,fj=!1;function Uj(n){Hl||(Hl=Pee()||{},fj=Hl.style?"WebkitAppearance"in Hl.style:!1);let e=!0;return Hl.style&&!kee(n)&&(e=n in Hl.style,!e&&fj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hl.style)),e}function Pee(){return typeof document<"u"?document.body:null}function vA(n,e){for(;e;){if(e===n)return!0;e=iw(e)}return!1}function bA(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var Mee=1e3,wA="{{",Nee="}}",EA="ng-enter",sw="ng-leave",Fm="ng-trigger",Vm=".ng-trigger",IA="ng-animating",ow=".ng-animating";function ws(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mA(parseFloat(e[1]),e[2])}function mA(n,e){switch(e){case"s":return n*Mee;default:return n}}function Um(n,e,t){return n.hasOwnProperty("duration")?n:Lee(n,e,t)}var Oee=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Lee(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(Oee);if(o===null)return e.push(hj(n)),{duration:0,delay:0,easing:""};r=mA(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=mA(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(Tee()),o=!0),i<0&&(e.push(See()),o=!0),o&&e.splice(a,0,hj(n))}return{duration:r,delay:i,easing:s}}function jj(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Vi(n,e,t){e.forEach((r,i)=>{let s=aw(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Ja(n,e){e.forEach((t,r)=>{let i=aw(r);n.style[i]=""})}function ah(n){return Array.isArray(n)?n.length==1?n[0]:dj(n):n}function Bj(n,e,t){let r=e.params||{},i=TA(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(Cee(s))})}var gA=new RegExp(`${wA}\\s*(.+?)\\s*${Nee}`,"g");function TA(n){let e=[];if(typeof n=="string"){let t;for(;t=gA.exec(n);)e.push(t[1]);gA.lastIndex=0}return e}function ch(n,e,t){let r=`${n}`,i=r.replace(gA,(s,o)=>{let a=e[o];return a==null&&(t.push(Dee(o)),a=""),a.toString()});return i==r?n:i}var Fee=/-+([a-z0-9])/g;function aw(n){return n.replace(Fee,(...e)=>e[1].toUpperCase())}function zj(n,e){return n===0||e===0}function $j(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,cw(n,a)))}}return e}function _r(n,e,t){switch(e.type){case Me.Trigger:return n.visitTrigger(e,t);case Me.State:return n.visitState(e,t);case Me.Transition:return n.visitTransition(e,t);case Me.Sequence:return n.visitSequence(e,t);case Me.Group:return n.visitGroup(e,t);case Me.Animate:return n.visitAnimate(e,t);case Me.Keyframes:return n.visitKeyframes(e,t);case Me.Style:return n.visitStyle(e,t);case Me.Reference:return n.visitReference(e,t);case Me.AnimateChild:return n.visitAnimateChild(e,t);case Me.AnimateRef:return n.visitAnimateRef(e,t);case Me.Query:return n.visitQuery(e,t);case Me.Stagger:return n.visitStagger(e,t);default:throw Aee(e.type)}}function cw(n,e){return window.getComputedStyle(n)[e]}var BA=(()=>{class n{validateStyleProperty(t){return Uj(t)}containsElement(t,r){return vA(t,r)}getParentElement(t){return iw(t)}query(t,r,i){return bA(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new bo(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Wl=class{static NOOP=new BA},Gl=class{};var Vee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fw=class extends Gl{normalizePropertyName(e,t){return aw(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(Vee.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(pj(e,r))}return o+s}};var pw="*";function Uee(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>jee(r,t,e)):t.push(n),t}function jee(n,e,t){if(n[0]==":"){let c=Bee(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(Cj(n)),e;let i=r[1],s=r[2],o=r[3];e.push(Hj(i,o));let a=i==pw&&o==pw;s[0]=="<"&&!a&&e.push(Hj(o,i))}function Bee(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(Dj(n)),"* => *"}}var lw=new Set(["true","1"]),uw=new Set(["false","0"]);function Hj(n,e){let t=lw.has(n)||uw.has(n),r=lw.has(e)||uw.has(e);return(i,s)=>{let o=n==pw||n==i,a=e==pw||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?lw.has(n):uw.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?lw.has(e):uw.has(e)),o&&a}}var eB=":self",zee=new RegExp(`s*${eB}s*,?`,"g");function tB(n,e,t,r){return new RA(n).build(e,t,r)}var qj="",RA=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new kA(t);return this._resetContextStyleTimingState(i),_r(this,ah(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=qj,e.collectedStyles=new Map,e.collectedStyles.set(qj,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(mj()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Me.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==Me.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(gj())}),{type:Me.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{TA(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(yj(e.name,[...s.values()]))}return{type:Me.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=_r(this,ah(e.animation),t),i=Uee(e.expr,t.errors);return{type:Me.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ql(e.options)}}visitSequence(e,t){return{type:Me.Sequence,steps:e.steps.map(r=>_r(this,r,t)),options:ql(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=_r(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Me.Group,steps:s,options:ql(e.options)}}visitAnimate(e,t){let r=Wee(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:fA({});if(s.type==Me.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=fA(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Me.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Fi?r.push(a):t.errors.push(_j(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(wA)>=0){s=!0;break}}}),{type:Me.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),f=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(vj(c,u.startTime,u.endTime,s,i)),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:i}),t.options&&Bj(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Me.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(bj()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(P=>{let M=this._makeStyleAst(P,t),F=M.offset!=null?M.offset:qee(M.styles),j=0;return F!=null&&(s++,j=M.offset=F),c=c||j<0||j>1,a=a||j<l,l=j,o.push(j),M});c&&t.errors.push(wj()),a&&t.errors.push(Ej());let f=e.steps.length,p=0;s>0&&s<f?t.errors.push(Ij()):s==0&&(p=i/(f-1));let m=f-1,E=t.currentTime,C=t.currentAnimateTimings,S=C.duration;return u.forEach((P,M)=>{let F=p>0?M==m?1:p*M:o[M],j=F*S;t.currentTime=E+C.delay+j,C.duration=j,this._validateStyleAst(P,t),P.offset=F,r.styles.push(P)}),r}visitReference(e,t){return{type:Me.Reference,animation:_r(this,ah(e.animation),t),options:ql(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Me.AnimateChild,options:ql(e.options)}}visitAnimateRef(e,t){return{type:Me.AnimateRef,animation:this.visitReference(e.animation,t),options:ql(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=$ee(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,yr(t.collectedStyles,t.currentQuerySelector,new Map);let a=_r(this,ah(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Me.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ql(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Tj());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Um(e.timings,t.errors,!0);return{type:Me.Stagger,animation:_r(this,ah(e.animation),t),timings:r,options:null}}};function $ee(n){let e=!!n.split(/\s*,\s*/).find(t=>t==eB);return e&&(n=n.replace(zee,"")),n=n.replace(/@\*/g,Vm).replace(/@\w+/g,t=>Vm+"-"+t.slice(1)).replace(/:animating/g,ow),[n,e]}function Hee(n){return n?H({},n):null}var kA=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function qee(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Wee(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Um(n,e).duration;return SA(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=SA(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Um(t,e);return SA(i.duration,i.delay,i.easing)}function ql(n){return n?(n=H({},n),n.params&&(n.params=Hee(n.params))):n={},n}function SA(n,e,t){return{duration:n,delay:e,easing:t}}function zA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Bm=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Gee=1,Kee=":enter",Qee=new RegExp(Kee,"g"),Yee=":leave",Xee=new RegExp(Yee,"g");function nB(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new PA().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var PA=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new Bm;let f=new MA(e,t,l,i,s,u,[]);f.options=c;let p=c.delay?ws(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),_r(this,r,f);let m=f.timelines.filter(E=>E.containsAnimation());if(m.length&&a.size){let E;for(let C=m.length-1;C>=0;C--){let S=m[C];if(S.element===t){E=S;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,f.errors,c)}return m.length?m.map(E=>E.buildKeyframes()):[zA(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:ws(ch(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?ws(r.duration):null,a=r.delay!=null?ws(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),_r(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Me.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mw);let o=ws(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>_r(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?ws(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),_r(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?ch(r,t.params,t.errors):r;return Um(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Me.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ws(i.delay):0;s&&(t.previousNode.type===Me.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mw);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),_r(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let p=f.currentTimeline.currentTime;o=Math.max(o,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let f=u.currentTime;_r(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},mw={},MA=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=mw;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new gw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ws(r.duration)),r.delay!=null&&(i.delay=ws(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=ch(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=mw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new NA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(Qee,"."+this._enterClassName),e=e.replace(Xee,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(Sj(t)),a}},gw=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Gee,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Fi),this._currentKeyframe.set(t,Fi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=Jee(e,this._globalTimelineStyles);for(let[a,c]of o){let l=ch(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Fi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,f)=>{u===Lm?e.add(f):u===Fi&&t.add(f)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return zA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},NA=class extends gw{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",Wj(a)),s.push(l);let u=e.length-1;for(let f=1;f<=u;f++){let p=new Map(e[f]),m=p.get("offset"),E=t+m*r;p.set("offset",Wj(E/o)),s.push(p)}r=o,t=0,i="",e=s}return zA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function Wj(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Jee(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Fi)}else for(let[s,o]of i)t.set(s,o)}),t}function Gj(n,e,t,r,i,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}var CA={},yw=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return Zee(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let f=[],p=this.ast.options&&this.ast.options.params||CA,m=a&&a.params||CA,E=this.buildStyles(r,m,f),C=c&&c.params||CA,S=this.buildStyles(i,C,f),P=new Set,M=new Map,F=new Map,j=i==="void",z={params:rB(C,p),delay:this.ast.options?.delay},B=u?[]:nB(e,t,this.ast.animation,s,o,E,S,z,l,f),T=0;return B.forEach(_=>{T=Math.max(_.duration+_.delay,T)}),f.length?Gj(t,this._triggerName,r,i,j,E,S,[],[],M,F,T,f):(B.forEach(_=>{let b=_.element,A=yr(M,b,new Set);_.preStyleProps.forEach(x=>A.add(x));let D=yr(F,b,new Set);_.postStyleProps.forEach(x=>D.add(x)),b!==t&&P.add(b)}),Gj(t,this._triggerName,r,i,j,E,S,B,[...P.values()],M,F,T))}};function Zee(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function rB(n,e){let t=H({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var OA=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=rB(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=ch(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function ete(n,e,t){return new LA(n,e,t)}var LA=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new OA(i.style,s,r))}),Kj(this.states,"true","1"),Kj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new yw(e,i,this.states))}),this.fallbackTransition=tte(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function tte(n,e,t){let r=[(o,a)=>!0],i={type:Me.Sequence,steps:[],options:null},s={type:Me.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new yw(n,s,e)}function Kj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var nte=new Bm,FA=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=tB(this._driver,t,r,i);if(r.length)throw xj(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=yA(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=nB(this._driver,t,s,EA,sw,new Map,new Map,r,nte,i),o.forEach(u=>{let f=yr(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(i.push(Rj()),o=[]),i.length)throw kj(i);a.forEach((u,f)=>{u.forEach((p,m)=>{u.set(m,this._driver.computeStyle(f,m,Fi))})});let c=o.map(u=>{let f=a.get(u.element);return this._buildPlayer(u,new Map,f)}),l=wo(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Pj(e);return t}listen(e,t,r,i){let s=rw(t,"","","");return nw(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Qj="ng-animate-queued",rte=".ng-animate-queued",DA="ng-animate-disabled",ite=".ng-animate-disabled",ste="ng-star-inserted",ote=".ng-star-inserted",ate=[],iB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cte={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ui="__ng_removed",zm=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=ute(i),r){let s=e,{value:o}=s,a=od(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},jm="void",AA=new zm(jm),VA=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,li(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Mj(r,t);if(r==null||r.length==0)throw Nj(t);if(!dte(r))throw Oj(r,t);let s=yr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=yr(this._engine.statesByElement,e,new Map);return a.has(t)||(li(e,Fm),li(e,Fm+"-"+t),a.set(t,AA)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Lj(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new $m(this.id,t,e),a=this._engine.statesByElement.get(e);a||(li(e,Fm),li(e,Fm+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new zm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=AA),!(l.value===jm)&&c.value===l.value){if(!pte(c.params,l.params)){let C=[],S=s.matchStyles(c.value,c.params,C),P=s.matchStyles(l.value,l.params,C);C.length?this._engine.reportError(C):this._engine.afterFlush(()=>{Ja(e,S),Vi(e,P)})}return}let p=yr(this._engine.playersByElement,e,[]);p.forEach(C=>{C.namespaceId==this.id&&C.triggerName==t&&C.queued&&C.destroy()});let m=s.matchTransition(c.value,l.value,e,l.params),E=!1;if(!m){if(!i)return;m=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:c,toState:l,player:o,isFallbackTransition:E}),E||(li(e,Qj),o.onStart(()=>{lh(e,Qj)})),o.onDone(()=>{let C=this.players.indexOf(o);C>=0&&this.players.splice(C,1);let S=this._engine.playersByElement.get(e);if(S){let P=S.indexOf(o);P>=0&&S.splice(P,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Vm,!0);r.forEach(i=>{if(i[Ui])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,jm,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&wo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||AA,u=new zm(jm),f=new $m(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Ui];(!s||s===iB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){li(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=rw(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,nw(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},UA=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new VA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(dw(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!dw(t))return;let s=t[Ui];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),li(e,DA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),lh(e,DA))}removeNode(e,t,r){if(dw(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ui]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return dw(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Vm,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,ow,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return wo(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Ui];if(t&&t.setForRemoval){if(e[Ui]=iB,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(DA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ite,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];li(i,ste)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?wo(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw Fj(e)}_flushAnimations(e,t){let r=new Bm,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(Y=>{u.add(Y);let ee=this.driver.query(Y,rte,!0);for(let oe=0;oe<ee.length;oe++)u.add(ee[oe])});let f=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=Jj(p,this.collectedEnterElements),E=new Map,C=0;m.forEach((Y,ee)=>{let oe=EA+C++;E.set(ee,oe),Y.forEach(ge=>li(ge,oe))});let S=[],P=new Set,M=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let ee=this.collectedLeaveElements[Y],oe=ee[Ui];oe&&oe.setForRemoval&&(S.push(ee),P.add(ee),oe.hasAnimation?this.driver.query(ee,ote,!0).forEach(ge=>P.add(ge)):M.add(ee))}let F=new Map,j=Jj(p,Array.from(P));j.forEach((Y,ee)=>{let oe=sw+C++;F.set(ee,oe),Y.forEach(ge=>li(ge,oe))}),e.push(()=>{m.forEach((Y,ee)=>{let oe=E.get(ee);Y.forEach(ge=>lh(ge,oe))}),j.forEach((Y,ee)=>{let oe=F.get(ee);Y.forEach(ge=>lh(ge,oe))}),S.forEach(Y=>{this.processLeaveNode(Y)})});let z=[],B=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(t).forEach(oe=>{let ge=oe.player,lt=oe.element;if(z.push(ge),this.collectedEnterElements.length){let Et=lt[Ui];if(Et&&Et.setForMove){if(Et.previousTriggersValues&&Et.previousTriggersValues.has(oe.triggerName)){let Rr=Et.previousTriggersValues.get(oe.triggerName),Rn=this.statesByElement.get(oe.element);if(Rn&&Rn.has(oe.triggerName)){let Yr=Rn.get(oe.triggerName);Yr.value=Rr,Rn.set(oe.triggerName,Yr)}}ge.destroy();return}}let Xt=!f||!this.driver.containsElement(f,lt),et=F.get(lt),We=E.get(lt),Le=this._buildInstruction(oe,r,We,et,Xt);if(Le.errors&&Le.errors.length){B.push(Le);return}if(Xt){ge.onStart(()=>Ja(lt,Le.fromStyles)),ge.onDestroy(()=>Vi(lt,Le.toStyles)),i.push(ge);return}if(oe.isFallbackTransition){ge.onStart(()=>Ja(lt,Le.fromStyles)),ge.onDestroy(()=>Vi(lt,Le.toStyles)),i.push(ge);return}let bn=[];Le.timelines.forEach(Et=>{Et.stretchStartingKeyframe=!0,this.disabledNodes.has(Et.element)||bn.push(Et)}),Le.timelines=bn,r.append(lt,Le.timelines);let Xn={instruction:Le,player:ge,element:lt};o.push(Xn),Le.queriedElements.forEach(Et=>yr(a,Et,[]).push(ge)),Le.preStyleProps.forEach((Et,Rr)=>{if(Et.size){let Rn=c.get(Rr);Rn||c.set(Rr,Rn=new Set),Et.forEach((Yr,Xi)=>Rn.add(Xi))}}),Le.postStyleProps.forEach((Et,Rr)=>{let Rn=l.get(Rr);Rn||l.set(Rr,Rn=new Set),Et.forEach((Yr,Xi)=>Rn.add(Xi))})});if(B.length){let Y=[];B.forEach(ee=>{Y.push(Vj(ee.triggerName,ee.errors))}),z.forEach(ee=>ee.destroy()),this.reportError(Y)}let T=new Map,_=new Map;o.forEach(Y=>{let ee=Y.element;r.has(ee)&&(_.set(ee,ee),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,T))}),i.forEach(Y=>{let ee=Y.element;this._getPreviousPlayers(ee,!1,Y.namespaceId,Y.triggerName,null).forEach(ge=>{yr(T,ee,[]).push(ge),ge.destroy()})});let b=S.filter(Y=>Zj(Y,c,l)),A=new Map;Xj(A,this.driver,M,l,Fi).forEach(Y=>{Zj(Y,c,l)&&b.push(Y)});let x=new Map;m.forEach((Y,ee)=>{Xj(x,this.driver,new Set(Y),c,Lm)}),b.forEach(Y=>{let ee=A.get(Y),oe=x.get(Y);A.set(Y,new Map([...ee?.entries()??[],...oe?.entries()??[]]))});let I=[],Oe=[],ke={};o.forEach(Y=>{let{element:ee,player:oe,instruction:ge}=Y;if(r.has(ee)){if(u.has(ee)){oe.onDestroy(()=>Vi(ee,ge.toStyles)),oe.disabled=!0,oe.overrideTotalTime(ge.totalTime),i.push(oe);return}let lt=ke;if(_.size>1){let et=ee,We=[];for(;et=et.parentNode;){let Le=_.get(et);if(Le){lt=Le;break}We.push(et)}We.forEach(Le=>_.set(Le,lt))}let Xt=this._buildAnimation(oe.namespaceId,ge,T,s,x,A);if(oe.setRealPlayer(Xt),lt===ke)I.push(oe);else{let et=this.playersByElement.get(lt);et&&et.length&&(oe.parentPlayer=wo(et)),i.push(oe)}}else Ja(ee,ge.fromStyles),oe.onDestroy(()=>Vi(ee,ge.toStyles)),Oe.push(oe),u.has(ee)&&i.push(oe)}),Oe.forEach(Y=>{let ee=s.get(Y.element);if(ee&&ee.length){let oe=wo(ee);Y.setRealPlayer(oe)}}),i.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<S.length;Y++){let ee=S[Y],oe=ee[Ui];if(lh(ee,sw),oe&&oe.hasAnimation)continue;let ge=[];if(a.size){let Xt=a.get(ee);Xt&&Xt.length&&ge.push(...Xt);let et=this.driver.query(ee,ow,!0);for(let We=0;We<et.length;We++){let Le=a.get(et[We]);Le&&Le.length&&ge.push(...Le)}}let lt=ge.filter(Xt=>!Xt.destroyed);lt.length?hte(this,ee,lt):this.processLeaveNode(ee)}return S.length=0,I.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let ee=this.players.indexOf(Y);this.players.splice(ee,1)}),Y.play()}),I}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==jm;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,f=yr(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(m=>{let E=m.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),m.destroy(),f.push(m)})}Ja(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(E=>{let C=E.element;u.add(C);let S=C[Ui];if(S&&S.removedBeforeQueried)return new bo(E.duration,E.delay);let P=C!==c,M=fte((r.get(C)||ate).map(T=>T.getRealPlayer())).filter(T=>{let _=T;return _.element?_.element===C:!1}),F=s.get(C),j=o.get(C),z=yA(this._normalizer,E.keyframes,F,j),B=this._buildPlayer(E,z,M);if(E.subTimeline&&i&&f.add(C),P){let T=new $m(e,a,C);T.setRealPlayer(B),l.push(T)}return B});l.forEach(E=>{yr(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>lte(this.playersByQueriedElement,E.element,E))}),u.forEach(E=>li(E,IA));let m=wo(p);return m.onDestroy(()=>{u.forEach(E=>lh(E,IA)),Vi(c,t.toStyles)}),f.forEach(E=>{yr(i,E,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new bo(e.duration,e.delay)}},$m=class{namespaceId;triggerName;element;_player=new bo;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>nw(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){yr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function lte(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function ute(n){return n??null}function dw(n){return n&&n.nodeType===1}function dte(n){return n=="start"||n=="done"}function Yj(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Xj(n,e,t,r,i){let s=[];t.forEach(c=>s.push(Yj(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(f=>{let p=e.computeStyle(l,f,i);u.set(f,p),(!p||p.length==0)&&(l[Ui]=cte,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>Yj(c,s[a++])),o}function Jj(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function li(n,e){n.classList?.add(e)}function lh(n,e){n.classList?.remove(e)}function hte(n,e,t){wo(t).onDone(()=>n.processLeaveNode(e))}function fte(n){let e=[];return sB(n,e),e}function sB(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof oh?sB(r.players,e):e.push(r)}}function pte(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function Zj(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var uh=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new UA(e.body,t,r),this._timelineEngine=new FA(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=tB(this._driver,s,c,l);if(c.length)throw Aj(i,c);a=ete(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=_A(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=_A(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function mte(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=xA(e[0]),e.length>1&&(r=xA(e[e.length-1]))):e instanceof Map&&(t=xA(e)),t||r?new gte(n,t,r):null}var gte=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Vi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vi(this._element,this._initialStyles),this._endStyles&&(Vi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ja(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),Vi(this._element,this._initialStyles),this._state=3)}}return n})();function xA(n){let e=null;return n.forEach((t,r)=>{yte(r)&&(e=e||new Map,e.set(r,t))}),e}function yte(n){return n==="display"||n==="position"}var _w=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:cw(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},vw=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return vA(e,t)}getParentElement(e){return iw(e)}query(e,t,r){return bA(e,t,r)}computeStyle(e,t,r){return cw(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(m=>m instanceof _w);zj(r,i)&&u.forEach(m=>{m.currentSnapshot.forEach((E,C)=>l.set(C,E))});let f=jj(t).map(m=>new Map(m));f=$j(e,f,l);let p=mte(e,f);return new _w(e,f,c,p)}};var hw="@",oB="@.disabled",bw=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==hw&&t==oB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},jA=class extends bw{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==hw?t.charAt(1)=="."&&t==oB?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==hw){let s=_te(e),o=t.slice(1),a="";return o.charAt(0)!=hw&&([o,a]=vte(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,r,c)})}return this.delegate.listen(e,t,r,i)}};function _te(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function vte(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var ww=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let f=()=>l.delete(i);u=new bw("",i,this.engine,f),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new jA(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var wte=(()=>{class n extends uh{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(ae(Je),ae(Wl),ae(Gl))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function Ete(){return new fw}function Ite(){return new ww(N(mm),N(uh),N(Se))}var aB=[{provide:Gl,useFactory:Ete},{provide:uh,useClass:wte},{provide:Vr,useFactory:Ite}],zOe=[{provide:Wl,useClass:BA},{provide:Vd,useValue:"NoopAnimations"},...aB],Tte=[{provide:Wl,useFactory:()=>new vw},{provide:Vd,useFactory:()=>"BrowserAnimations"},...aB];function cB(){return Xp("NgEagerAnimations"),[...Tte]}var lB=()=>{};var hB=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ste=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ste(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new HA;let p=s<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},HA=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Cte=function(n){let e=hB(n);return Ew.encodeByteArray(e,!0)},qm=function(n){return Cte(n).replace(/\./g,"")},Iw=function(n){try{return Ew.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Dte=()=>WA().__FIREBASE_DEFAULTS__,Ate=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xte=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Iw(n[1]);return e&&JSON.parse(e)},Tw=()=>{try{return lB()||Dte()||Ate()||xte()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GA=n=>{var e,t;return(t=(e=Tw())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fB=n=>{let e=GA(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},KA=()=>{var n;return(n=Tw())===null||n===void 0?void 0:n.config},QA=n=>{var e;return(e=Tw())===null||e===void 0?void 0:e[`_${n}`]};var Kl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sw(n){return(await fetch(n,{credentials:"include"})).ok}function pB(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qm(JSON.stringify(t)),qm(JSON.stringify(o)),""].join(".")}var Hm={};function Rte(){let n={prod:[],emulator:[]};for(let e of Object.keys(Hm))Hm[e]?n.emulator.push(e):n.prod.push(e);return n}function kte(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var uB=!1;function Cw(n,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||Hm[n]===e||Hm[n]||uB)return;Hm[n]=e;function t(p){return`__firebase__banner__${p}`}let r="__firebase__banner",s=Rte().prod.length>0;function o(){let p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{uB=!0,o()},p}function u(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){let p=kte(r),m=t("text"),E=document.getElementById(m)||document.createElement("span"),C=t("learnmore"),S=document.getElementById(C)||document.createElement("a"),P=t("preprendIcon"),M=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let F=p.element;a(F),u(S,C);let j=l();c(M,P),F.append(M,E,S,j),document.body.appendChild(F)}s?(E.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function Pte(){var n;let e=(n=Tw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yB(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _B(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vB(){let n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bB(){return!Pte()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wm(){try{return typeof indexedDB=="object"}catch{return!1}}function wB(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Mte="FirebaseError",qr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Mte,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ji.prototype.create)}},ji=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Nte(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qr(i,a,r)}};function Nte(n,e){return n.replace(Ote,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Ote=/\{\$([^}]+)}/g;function EB(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Es(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(dB(s)&&dB(o)){if(!Es(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function dB(n){return n!==null&&typeof n=="object"}function dh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IB(n,e){let t=new qA(n,e);return t.subscribe.bind(t)}var qA=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Lte(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$A),i.error===void 0&&(i.error=$A),i.complete===void 0&&(i.complete=$A);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Lte(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $A(){}var WOe=14400*1e3;function vr(n){return n&&n._delegate?n._delegate:n}var sr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ql="[DEFAULT]";var YA=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Kl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vte(e))try{this.getOrInitializeService({instanceIdentifier:Ql})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ql){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ql){return this.instances.has(e)}getOptions(e=Ql){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fte(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ql){return this.component?this.component.multipleInstances?e:Ql:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fte(n){return n===Ql?void 0:n}function Vte(n){return n.instantiationMode==="EAGER"}var Dw=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new YA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Ute=[],Ue=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ue||{}),jte={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Bte=Ue.INFO,zte={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},$te=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zte[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Is=class{constructor(e){this.name=e,this._logLevel=Bte,this._logHandler=$te,this._userLogHandler=null,Ute.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jte[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var Hte=(n,e)=>e.some(t=>n instanceof t),TB,SB;function qte(){return TB||(TB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wte(){return SB||(SB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CB=new WeakMap,JA=new WeakMap,DB=new WeakMap,XA=new WeakMap,ex=new WeakMap;function Gte(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ts(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&CB.set(t,n)}).catch(()=>{}),ex.set(e,n),e}function Kte(n){if(JA.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});JA.set(n,e)}var ZA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return JA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DB.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AB(n){ZA=n(ZA)}function Qte(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Aw(this),e,...t);return DB.set(r,e.sort?e.sort():[e]),Ts(r)}:Wte().includes(n)?function(...e){return n.apply(Aw(this),e),Ts(CB.get(this))}:function(...e){return Ts(n.apply(Aw(this),e))}}function Yte(n){return typeof n=="function"?Qte(n):(n instanceof IDBTransaction&&Kte(n),Hte(n,qte())?new Proxy(n,ZA):n)}function Ts(n){if(n instanceof IDBRequest)return Gte(n);if(XA.has(n))return XA.get(n);let e=Yte(n);return e!==n&&(XA.set(n,e),ex.set(e,n)),e}var Aw=n=>ex.get(n);function xw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ts(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ts(o.result),c.oldVersion,c.newVersion,Ts(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Xte=["get","getKey","getAll","getAllKeys","count"],Jte=["put","add","delete","clear"],tx=new Map;function xB(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tx.get(e))return tx.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Jte.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Xte.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return tx.set(e,s),s}AB(n=>Ve(H({},n),{get:(e,t,r)=>xB(e,t)||n.get(e,t,r),has:(e,t)=>!!xB(e,t)||n.has(e,t)}));var rx=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Zte(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Zte(n){let e=n.getComponent();return e?.type==="VERSION"}var ix="@firebase/app",RB="0.13.2";var Eo=new Is("@firebase/app"),ene="@firebase/app-compat",tne="@firebase/analytics-compat",nne="@firebase/analytics",rne="@firebase/app-check-compat",ine="@firebase/app-check",sne="@firebase/auth",one="@firebase/auth-compat",ane="@firebase/database",cne="@firebase/data-connect",lne="@firebase/database-compat",une="@firebase/functions",dne="@firebase/functions-compat",hne="@firebase/installations",fne="@firebase/installations-compat",pne="@firebase/messaging",mne="@firebase/messaging-compat",gne="@firebase/performance",yne="@firebase/performance-compat",_ne="@firebase/remote-config",vne="@firebase/remote-config-compat",bne="@firebase/storage",wne="@firebase/storage-compat",Ene="@firebase/firestore",Ine="@firebase/ai",Tne="@firebase/firestore-compat",Sne="firebase",Cne="11.10.0";var sx="[DEFAULT]",Dne={[ix]:"fire-core",[ene]:"fire-core-compat",[nne]:"fire-analytics",[tne]:"fire-analytics-compat",[ine]:"fire-app-check",[rne]:"fire-app-check-compat",[sne]:"fire-auth",[one]:"fire-auth-compat",[ane]:"fire-rtdb",[cne]:"fire-data-connect",[lne]:"fire-rtdb-compat",[une]:"fire-fn",[dne]:"fire-fn-compat",[hne]:"fire-iid",[fne]:"fire-iid-compat",[pne]:"fire-fcm",[mne]:"fire-fcm-compat",[gne]:"fire-perf",[yne]:"fire-perf-compat",[_ne]:"fire-rc",[vne]:"fire-rc-compat",[bne]:"fire-gcs",[wne]:"fire-gcs-compat",[Ene]:"fire-fst",[Tne]:"fire-fst-compat",[Ine]:"fire-vertex","fire-js":"fire-js",[Sne]:"fire-js-all"};var Gm=new Map,Ane=new Map,ox=new Map;function kB(n,e){try{n.container.addComponent(e)}catch(t){Eo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bi(n){let e=n.name;if(ox.has(e))return Eo.debug(`There were multiple attempts to register component ${e}.`),!1;ox.set(e,n);for(let t of Gm.values())kB(t,n);for(let t of Ane.values())kB(t,n);return!0}function hh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wr(n){return n==null?!1:n.settings!==void 0}var xne={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ec=new ji("app","Firebase",xne);var ax=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ec.create("app-deleted",{appName:this._name})}};var tc=Cne;function ux(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:sx,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ec.create("bad-app-name",{appName:String(i)});if(t||(t=KA()),!t)throw ec.create("no-options");let s=Gm.get(i);if(s){if(Es(t,s.options)&&Es(r,s.config))return s;throw ec.create("duplicate-app",{appName:i})}let o=new Dw(i);for(let c of ox.values())o.addComponent(c);let a=new ax(t,r,o);return Gm.set(i,a),a}function Yl(n=sx){let e=Gm.get(n);if(!e&&n===sx&&KA())return ux();if(!e)throw ec.create("no-app",{appName:n});return e}function Rw(){return Array.from(Gm.values())}function Ft(n,e,t){var r;let i=(r=Dne[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eo.warn(a.join(" "));return}Bi(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Rne="firebase-heartbeat-database",kne=1,Km="firebase-heartbeat-store",nx=null;function OB(){return nx||(nx=xw(Rne,kne,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Km)}catch(t){console.warn(t)}}}}).catch(n=>{throw ec.create("idb-open",{originalErrorMessage:n.message})})),nx}async function Pne(n){try{let t=(await OB()).transaction(Km),r=await t.objectStore(Km).get(LB(n));return await t.done,r}catch(e){if(e instanceof qr)Eo.warn(e.message);else{let t=ec.create("idb-get",{originalErrorMessage:e?.message});Eo.warn(t.message)}}}async function PB(n,e){try{let r=(await OB()).transaction(Km,"readwrite");await r.objectStore(Km).put(e,LB(n)),await r.done}catch(t){if(t instanceof qr)Eo.warn(t.message);else{let r=ec.create("idb-set",{originalErrorMessage:t?.message});Eo.warn(r.message)}}}function LB(n){return`${n.name}!${n.options.appId}`}var Mne=1024,Nne=30,cx=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new lx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=MB();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Nne){let o=Lne(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=MB(),{heartbeatsToSend:r,unsentEntries:i}=One(this._heartbeatsCache.heartbeats),s=qm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Eo.warn(t),""}}};function MB(){return new Date().toISOString().substring(0,10)}function One(n,e=Mne){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),NB(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),NB(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var lx=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wm()?wB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Pne(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return PB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return PB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function NB(n){return qm(JSON.stringify({version:2,heartbeats:n})).length}function Lne(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Fne(n){Bi(new sr("platform-logger",e=>new rx(e),"PRIVATE")),Bi(new sr("heartbeat",e=>new cx(e),"PRIVATE")),Ft(ix,RB,n),Ft(ix,RB,"esm2017"),Ft("fire-js","")}Fne("");var Vne="firebase",Une="11.10.0";Ft(Vne,Une,"app");function FB(n){n===void 0&&(n=N(yt));let e=n.get(ja);return t=>new ue(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var nc=new fl("ANGULARFIRE2_VERSION");function Qm(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ph=(n,e)=>{let t=e?[e]:Rw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},fh=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(fh||{}),VB=om()&&typeof Zone<"u"?fh.WARN:fh.SILENT;var kw=class{zone;delegate;constructor(e,t=A0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},rc=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=N(Se);this.outsideAngular=t.runOutsideAngular(()=>new kw(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new kw(typeof Zone>"u"?void 0:Zone.current,_p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UB=!1;function jne(n,e){!UB&&(VB>fh.SILENT||om())&&(UB=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),VB>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Bne(n){let e=N(Se,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Xl(n){let e=N(Se,{optional:!0});return e?e.run(()=>n()):n()}var zne=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Wt(t,()=>Xl(()=>n.apply(void 0,r)))),br=(n,e,t)=>(t||=e?fh.WARN:fh.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=N(rc),o=N(ja),a=N(xt)}catch{return jne(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Xl(()=>o.add())),i[l]=zne(i[l],r,a));let c=Bne(()=>n.apply(this,i));return e?c instanceof ue?c.pipe(Aa(s.outsideAngular),Da(s.insideAngular),FB(a)):c instanceof Promise?Xl(()=>{let l=o.add();return new Promise((u,f)=>{c.then(p=>Wt(a,()=>Xl(()=>u(p))),p=>Wt(a,()=>Xl(()=>f(p)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Xl(()=>c):c instanceof ue?c.pipe(Aa(s.outsideAngular),Da(s.insideAngular)):Xl(()=>c)});var Io=class{constructor(e){return e}},Jl=class{constructor(){return Rw()}};function $ne(n){return n&&n.length===1?n[0]:new Io(Yl())}var dx=new J("angularfire2._apps"),Hne={provide:Io,useFactory:$ne,deps:[[new pr,dx]]},qne={provide:Jl,deps:[[new pr,dx]]};function Wne(n){return(e,t)=>{let r=t.get(lo);Ft("angularfire",nc.full,"core"),Ft("angularfire",nc.full,"app"),Ft("angular",eS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Io(i)}}function jB(n,...e){return In([Hne,qne,{provide:dx,useFactory:Wne(n),multi:!0,deps:[Se,yt,rc,...e]}])}var BB=br(ux,!0);var Gne=new Map,Kne={activated:!1,tokenObservers:[]},Qne={initialized:!1,enabled:!1};function zi(n){return Gne.get(n)||Object.assign({},Kne)}function qB(){return Qne}var Yne="https://content-firebaseappcheck.googleapis.com/v1";var Xne="exchangeDebugToken",zB={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},WLe=1440*60*1e3;var px=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Kl,this.pending.promise.catch(t=>{}),await Jne(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Kl,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Jne(n){return new Promise(e=>{setTimeout(e,n)})}var Zne={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ic=new ji("appCheck","AppCheck",Zne);function WB(n){if(!zi(n).activated)throw ic.create("use-before-activation",{appName:n.name})}async function GB({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(f){throw ic.create("fetch-network-error",{originalErrorMessage:f?.message})}if(o.status!==200)throw ic.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ic.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ic.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function KB(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Yne}/projects/${t}/apps/${r}:${Xne}?key=${i}`,body:{debug_token:e}}}var ere="firebase-app-check-database",tre=1,mx="firebase-app-check-store";var Pw=null;function nre(){return Pw||(Pw=new Promise((n,e)=>{try{let t=indexedDB.open(ere,tre);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ic.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mx,{keyPath:"compositeKey"})}}}catch(t){e(ic.create("storage-open",{originalErrorMessage:t?.message}))}}),Pw)}function rre(n,e){return ire(sre(n),e)}async function ire(n,e){let r=(await nre()).transaction(mx,"readwrite"),s=r.objectStore(mx).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(ic.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function sre(n){return`${n.options.appId}-${n.name}`}var Ym=new Is("@firebase/app-check");function hx(n,e){return Wm()?rre(n,e).catch(t=>{Ym.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QB(){return qB().enabled}async function YB(){let n=qB();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var ore={error:"UNKNOWN_ERROR"};function are(n){return Ew.encodeString(JSON.stringify(n),!1)}async function gx(n,e=!1,t=!1){let r=n.app;WB(r);let i=zi(r),s=i.token,o;if(s&&!Xm(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(Xm(l)?s=l:await hx(r,void 0))}if(!e&&s&&Xm(s))return{token:s.token};let a=!1;if(QB())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=GB(KB(r,await YB()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await hx(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ym.warn(l.message):t&&Ym.error(l),fx(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await zi(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ym.warn(l.message):t&&Ym.error(l),o=l}let c;return s?o?Xm(s)?c={token:s.token,internalError:o}:c=fx(o):(c={token:s.token},i.token=s,await hx(r,s)):c=fx(o),a&&dre(r,c),c}async function cre(n){let e=n.app;WB(e);let{provider:t}=zi(e);if(QB()){let r=await YB(),{token:i}=await GB(KB(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function lre(n,e,t,r){let{app:i}=n,s=zi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Xm(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),$B(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$B(n))}function XB(n,e){let t=zi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $B(n){let{app:e}=n,t=zi(e),r=t.tokenRefresher;r||(r=ure(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ure(n){let{app:e}=n;return new px(async()=>{let t=zi(e),r;if(t.token?r=await gx(n,!0):r=await gx(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=zi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},zB.RETRIAL_MIN_WAIT,zB.RETRIAL_MAX_WAIT)}function dre(n,e){let t=zi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xm(n){return n.expireTimeMillis-Date.now()>0}function fx(n){return{token:are(ore),error:n}}var yx=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=zi(this.app);for(let t of e)XB(this.app,t.next);return Promise.resolve()}};function hre(n,e){return new yx(n,e)}function fre(n){return{getToken:e=>gx(n,e),getLimitedUseToken:()=>cre(n),addTokenListener:e=>lre(n,"INTERNAL",e),removeTokenListener:e=>XB(n.app,e)}}var pre="@firebase/app-check",mre="0.10.1";var gre="app-check",HB="app-check-internal";function yre(){Bi(new sr(gre,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hre(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(HB).initialize()})),Bi(new sr(HB,n=>{let e=n.getProvider("app-check").getImmediate();return fre(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ft(pre,mre)}yre();var _re="app-check";var mh=class{constructor(){return ph(_re)}};var vre=["localhost","0.0.0.0","127.0.0.1"],iFe=typeof window<"u"&&vre.includes(window.location.hostname);var JB=()=>{};var ZB=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bre=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ez={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bre(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new vx;let p=s<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},vx=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},wre=function(n){let e=ZB(n);return ez.encodeByteArray(e,!0)},wx=function(n){return wre(n).replace(/\./g,"")},Mw=function(n){try{return ez.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ere=()=>tz().__FIREBASE_DEFAULTS__,Ire=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Tre=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mw(n[1]);return e&&JSON.parse(e)},nz=()=>{try{return JB()||Ere()||Ire()||Tre()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var rz=n=>nz()?.[`_${n}`];function Jm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function Sre(){let n=nz()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oz(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function az(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cz(){return!Sre()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ex(){try{return typeof indexedDB=="object"}catch{return!1}}function lz(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Cre="FirebaseError",ui=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cre,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}},To=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Dre(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ui(i,a,r)}};function Dre(n,e){return n.replace(Are,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Are=/\{\$([^}]+)}/g;function Ix(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uz(n,e){let t=new bx(n,e);return t.subscribe.bind(t)}var bx=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xre(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_x),i.error===void 0&&(i.error=_x),i.complete===void 0&&(i.complete=_x);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xre(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _x(){}var lFe=14400*1e3;function sc(n){return n&&n._delegate?n._delegate:n}var $i=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Rre=[],je=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(je||{}),kre={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},Pre=je.INFO,Mre={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Nre=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Mre[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},oc=class{constructor(e){this.name=e,this._logLevel=Pre,this._logHandler=Nre,this._userLogHandler=null,Rre.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}};var Sx=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ore(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Ore(n){return n.getComponent()?.type==="VERSION"}var Cx="@firebase/app",dz="0.14.6";var Co=new oc("@firebase/app"),Lre="@firebase/app-compat",Fre="@firebase/analytics-compat",Vre="@firebase/analytics",Ure="@firebase/app-check-compat",jre="@firebase/app-check",Bre="@firebase/auth",zre="@firebase/auth-compat",$re="@firebase/database",Hre="@firebase/data-connect",qre="@firebase/database-compat",Wre="@firebase/functions",Gre="@firebase/functions-compat",Kre="@firebase/installations",Qre="@firebase/installations-compat",Yre="@firebase/messaging",Xre="@firebase/messaging-compat",Jre="@firebase/performance",Zre="@firebase/performance-compat",eie="@firebase/remote-config",tie="@firebase/remote-config-compat",nie="@firebase/storage",rie="@firebase/storage-compat",iie="@firebase/firestore",sie="@firebase/ai",oie="@firebase/firestore-compat",aie="firebase",cie="12.6.0";var lie={[Cx]:"fire-core",[Lre]:"fire-core-compat",[Vre]:"fire-analytics",[Fre]:"fire-analytics-compat",[jre]:"fire-app-check",[Ure]:"fire-app-check-compat",[Bre]:"fire-auth",[zre]:"fire-auth-compat",[$re]:"fire-rtdb",[Hre]:"fire-data-connect",[qre]:"fire-rtdb-compat",[Wre]:"fire-fn",[Gre]:"fire-fn-compat",[Kre]:"fire-iid",[Qre]:"fire-iid-compat",[Yre]:"fire-fcm",[Xre]:"fire-fcm-compat",[Jre]:"fire-perf",[Zre]:"fire-perf-compat",[eie]:"fire-rc",[tie]:"fire-rc-compat",[nie]:"fire-gcs",[rie]:"fire-gcs-compat",[iie]:"fire-fst",[oie]:"fire-fst-compat",[sie]:"fire-vertex","fire-js":"fire-js",[aie]:"fire-js-all"};var uie=new Map,die=new Map,hz=new Map;function fz(n,e){try{n.container.addComponent(e)}catch(t){Co.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ac(n){let e=n.name;if(hz.has(e))return Co.debug(`There were multiple attempts to register component ${e}.`),!1;hz.set(e,n);for(let t of uie.values())fz(t,n);for(let t of die.values())fz(t,n);return!0}function Do(n){return n==null?!1:n.settings!==void 0}var hie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xx=new To("app","Firebase",hie);var gh=cie;function So(n,e,t){let r=lie[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Co.warn(o.join(" "));return}ac(new $i(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var fie="firebase-heartbeat-database",pie=1,Zm="firebase-heartbeat-store",Tx=null;function _z(){return Tx||(Tx=xw(fie,pie,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zm)}catch(t){console.warn(t)}}}}).catch(n=>{throw xx.create("idb-open",{originalErrorMessage:n.message})})),Tx}async function mie(n){try{let t=(await _z()).transaction(Zm),r=await t.objectStore(Zm).get(vz(n));return await t.done,r}catch(e){if(e instanceof ui)Co.warn(e.message);else{let t=xx.create("idb-get",{originalErrorMessage:e?.message});Co.warn(t.message)}}}async function pz(n,e){try{let r=(await _z()).transaction(Zm,"readwrite");await r.objectStore(Zm).put(e,vz(n)),await r.done}catch(t){if(t instanceof ui)Co.warn(t.message);else{let r=xx.create("idb-set",{originalErrorMessage:t?.message});Co.warn(r.message)}}}function vz(n){return`${n.name}!${n.options.appId}`}var gie=1024,yie=30,Dx=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ax(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mz();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>yie){let i=vie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Co.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=mz(),{heartbeatsToSend:t,unsentEntries:r}=_ie(this._heartbeatsCache.heartbeats),i=wx(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Co.warn(e),""}}};function mz(){return new Date().toISOString().substring(0,10)}function _ie(n,e=gie){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gz(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gz(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ax=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ex()?lz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await mie(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return pz(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return pz(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function gz(n){return wx(JSON.stringify({version:2,heartbeats:n})).length}function vie(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function bie(n){ac(new $i("platform-logger",e=>new Sx(e),"PRIVATE")),ac(new $i("heartbeat",e=>new Dx(e),"PRIVATE")),So(Cx,dz,n),So(Cx,dz,"esm2020"),So("fire-js","")}bie("");function Dz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Az=Dz,xz=new To("auth","Firebase",Dz());var Fw=new oc("@firebase/auth");function Sie(n,...e){Fw.logLevel<=je.WARN&&Fw.warn(`Auth (${gh}): ${n}`,...e)}function Ow(n,...e){Fw.logLevel<=je.ERROR&&Fw.error(`Auth (${gh}): ${n}`,...e)}function bz(n,...e){throw Bx(n,...e)}function jx(n,...e){return Bx(n,...e)}function Rz(n,e,t){let r=Ve(H({},Az()),{[e]:t});return new To("auth","Firebase",r).create(e,{appName:n.name})}function Lw(n){return Rz(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bx(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xz.create(n,...e)}function ct(n,e,...t){if(!n)throw Bx(e,...t)}function eg(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ow(e),new Error(e)}function Vw(n,e){n||eg(e)}function Cie(){return wz()==="http:"||wz()==="https:"}function wz(){return typeof self<"u"&&self.location?.protocol||null}function Die(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cie()||oz()||"connection"in navigator)?navigator.onLine:!0}function Aie(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var tu=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vw(t>e,"Short delay should be less than long delay!"),this.isMobile=iz()||az()}get(){return Die()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xie(n,e){Vw(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Uw=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Rie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pie=new tu(3e4,6e4);function kz(n,e){return n.tenantId&&!e.tenantId?Ve(H({},e),{tenantId:n.tenantId}):e}async function Hw(n,e,t,r,i={}){return Pz(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ix(H({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=H({method:e,headers:c},s);return sz()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Jm(n.emulatorConfig.host)&&(l.credentials="include"),Uw.fetch()(await Mz(n,n.config.apiHost,t,a),l)})}async function Pz(n,e,t){n._canInitEmulator=!1;let r=H(H({},Rie),e);try{let i=new Px(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Nw(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nw(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Nw(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Nw(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Rz(n,u,l);bz(n,u)}}catch(i){if(i instanceof ui)throw i;bz(n,"network-request-failed",{message:String(i)})}}async function Mz(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?xie(n.config,i):`${n.config.apiScheme}://${i}`;return kie.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Px=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jx(this.auth,"network-request-failed")),Pie.get())})}};function Nw(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=jx(n,e,r);return i.customData._tokenResponse=t,i}async function Mie(n,e){return Hw(n,"POST","/v1/accounts:delete",e)}async function jw(n,e){return Hw(n,"POST","/v1/accounts:lookup",e)}function tg(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nz(n,e=!1){let t=sc(n),r=await t.getIdToken(e),i=Oz(r);ct(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:tg(Rx(i.auth_time)),issuedAtTime:tg(Rx(i.iat)),expirationTime:tg(Rx(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Rx(n){return Number(n)*1e3}function Oz(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ow("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mw(t);return i?JSON.parse(i):(Ow("Failed to decode base64 JWT payload"),null)}catch(i){return Ow("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ez(n){let e=Oz(n);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mx(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ui&&Nie(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Nie({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Nx=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var rg=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tg(this.lastLoginAt),this.creationTime=tg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Bw(n){let e=n.auth,t=await n.getIdToken(),r=await Mx(n,jw(e,{idToken:t}));ct(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?Fz(i.providerUserInfo):[],o=Oie(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rg(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function Lz(n){let e=sc(n);await Bw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Oie(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fz(n){return n.map(r=>{var i=r,{providerId:e}=i,t=od(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function Lie(n,e){let t=await Pz(n,{},async()=>{let r=Ix({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Mz(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Jm(n.emulatorConfig.host)&&(c.credentials="include"),Uw.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Fie(n,e){return Hw(n,"POST","/v2/accounts:revokeToken",kz(n,e))}var ng=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ez(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ct(e.length!==0,"internal-error");let t=Ez(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Lie(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ct(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ct(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ct(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return eg("not implemented")}};function cc(n,e){ct(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Zl=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=od(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Mx(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Nz(this,e)}reload(){return Lz(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>H({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Ve(H({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Do(this.auth.app))return Promise.reject(Lw(this.auth));let e=await this.getIdToken();return await Mx(this,Mie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Ve(H({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>H({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:E,stsTokenManager:C}=t;ct(f&&C,e,"internal-error");let S=ng.fromJSON(this.name,C);ct(typeof f=="string",e,"internal-error"),cc(r,e.name),cc(i,e.name),ct(typeof p=="boolean",e,"internal-error"),ct(typeof m=="boolean",e,"internal-error"),cc(s,e.name),cc(o,e.name),cc(a,e.name),cc(c,e.name),cc(l,e.name),cc(u,e.name);let P=new n({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:S,createdAt:l,lastLoginAt:u});return E&&Array.isArray(E)&&(P.providerData=E.map(M=>H({},M))),c&&(P._redirectEventId=c),P}static async _fromIdTokenResponse(e,t,r=!1){let i=new ng;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bw(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ct(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Fz(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ng;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var Iz=new Map;function eu(n){Vw(n instanceof Function,"Expected a class definition");let e=Iz.get(n);return e?(Vw(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Iz.set(n,e),e)}var Vie=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ox=Vie;function kx(n,e,t){return`firebase:${n}:${e}:${t}`}var zw=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=kx(this.userKey,i.apiKey,s),this.fullPersistenceKey=kx("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await jw(this.auth,{idToken:e}).catch(()=>{});return t?Zl._fromGetAccountInfoResponse(this.auth,t,e):null}return Zl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(eu(Ox),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||eu(Ox),o=kx(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let f;if(typeof u=="string"){let p=await jw(e,{idToken:u}).catch(()=>{});if(!p)break;f=await Zl._fromGetAccountInfoResponse(e,p,u)}else f=Zl._fromJSON(e,u);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function Tz(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zie(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uie(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hie(e))return"Blackberry";if(qie(e))return"Webos";if(jie(e))return"Safari";if((e.includes("chrome/")||Bie(e))&&!e.includes("edge/"))return"Chrome";if($ie(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Uie(n=Gr()){return/firefox\//i.test(n)}function jie(n=Gr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bie(n=Gr()){return/crios\//i.test(n)}function zie(n=Gr()){return/iemobile/i.test(n)}function $ie(n=Gr()){return/android/i.test(n)}function Hie(n=Gr()){return/blackberry/i.test(n)}function qie(n=Gr()){return/webos/i.test(n)}function Vz(n,e=[]){let t;switch(n){case"Browser":t=Tz(Gr());break;case"Worker":t=`${Tz(Gr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gh}/${r}`}var Lx=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Wie(n,e={}){return Hw(n,"GET","/v2/passwordPolicy",kz(n,e))}var Gie=6,Fx=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Gie,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Vx=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $w(this),this.idTokenSubscription=new $w(this),this.beforeStateQueue=new Lx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eu(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zw.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await jw(this,{idToken:e}),r=await Zl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Do(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bw(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Aie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Do(this.app))return Promise.reject(Lw(this));let t=e?sc(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Do(this.app)?Promise.reject(Lw(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Do(this.app)?Promise.reject(Lw(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Wie(this),t=new Fx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Fie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&eu(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await zw.create(this,[eu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Do(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Sie(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Kie(n){return sc(n)}var $w=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uz(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Qie={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yie(n){Qie=n}function Xie(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Jie(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(eu);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function zx(n,e,t,r){return sc(n).onIdTokenChanged(e,t,r)}var VFe=Xie("rcb"),UFe=new tu(3e4,6e4);var jFe=new tu(2e3,1e4);var BFe=600*1e3;var zFe=new tu(3e4,6e4);var $Fe=new tu(5e3,15e3);var HFe=encodeURIComponent("fac");var Sz="@firebase/auth",Cz="1.11.1";var Ux=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Zie(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ese(n){ac(new $i("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vz(n)},l=new Vx(r,i,s,c);return Jie(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ac(new $i("auth-internal",e=>{let t=Kie(e.getProvider("auth").getImmediate());return(r=>new Ux(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),So(Sz,Cz,Zie(n)),So(Sz,Cz,"esm2020")}var tse=300,qFe=rz("authIdTokenMaxAge")||tse;function nse(){return document.getElementsByTagName("head")?.[0]??document}Yie({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=jx("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",nse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ese("Browser");function Uz(n){return new ue(function(e){var t=zx(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function e4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var t4=e4,n4=new ji("auth","Firebase",e4());var Yw=new Is("@firebase/auth");function sse(n,...e){Yw.logLevel<=Ue.WARN&&Yw.warn(`Auth (${tc}): ${n}`,...e)}function Ww(n,...e){Yw.logLevel<=Ue.ERROR&&Yw.error(`Auth (${tc}): ${n}`,...e)}function Cs(n,...e){throw oR(n,...e)}function Hi(n,...e){return oR(n,...e)}function sR(n,e,t){let r=Object.assign(Object.assign({},t4()),{[e]:t});return new ji("auth","Firebase",r).create(e,{appName:n.name})}function nu(n){return sR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ose(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cs(n,"argument-error"),sR(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oR(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return n4.create(n,...e)}function _e(n,e,...t){if(!n)throw oR(e,...t)}function Ao(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ww(e),new Error(e)}function Ro(n,e){n||Ao(e)}function qx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ase(){return jz()==="http:"||jz()==="https:"}function jz(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cse(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ase()||yB()||"connection"in navigator)?navigator.onLine:!0}function lse(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ru=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ro(t>e,"Short delay should be less than long delay!"),this.isMobile=mB()||_B()}get(){return cse()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function aR(n,e){Ro(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xw=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ao("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ao("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ao("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var use={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dse=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hse=new ru(3e4,6e4);function cR(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function _h(n,e,t,r,i={}){return r4(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=dh(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return gB()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Za(n.emulatorConfig.host)&&(l.credentials="include"),Xw.fetch()(await i4(n,n.config.apiHost,t,a),l)})}async function r4(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},use),e);try{let i=new Wx(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw qw(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qw(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qw(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw qw(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sR(n,u,l);Cs(n,u)}}catch(i){if(i instanceof qr)throw i;Cs(n,"network-request-failed",{message:String(i)})}}async function fse(n,e,t,r,i={}){let s=await _h(n,e,t,r,i);return"mfaPendingCredential"in s&&Cs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function i4(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?aR(n.config,i):`${n.config.apiScheme}://${i}`;return dse.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Wx=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hi(this.auth,"network-request-failed")),hse.get())})}};function qw(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Hi(n,e,r);return i.customData._tokenResponse=t,i}async function pse(n,e){return _h(n,"POST","/v1/accounts:delete",e)}async function Jw(n,e){return _h(n,"POST","/v1/accounts:lookup",e)}function ig(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lR(n,e=!1){let t=vr(n),r=await t.getIdToken(e),i=uR(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ig($x(i.auth_time)),issuedAtTime:ig($x(i.iat)),expirationTime:ig($x(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function $x(n){return Number(n)*1e3}function uR(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ww("JWT malformed, contained fewer than 3 sections"),null;try{let i=Iw(t);return i?JSON.parse(i):(Ww("Failed to decode base64 JWT payload"),null)}catch(i){return Ww("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Bz(n){let e=uR(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function og(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qr&&mse(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mse({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Gx=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ag=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ig(this.lastLoginAt),this.creationTime=ig(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Zw(n){var e;let t=n.auth,r=await n.getIdToken(),i=await og(n,Jw(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?s4(s.providerUserInfo):[],a=gse(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ag(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function dR(n){let e=vr(n);await Zw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gse(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function s4(n){return n.map(e=>{var{providerId:t}=e,r=k_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function yse(n,e){let t=await r4(n,{},async()=>{let r=dh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await i4(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Za(n.emulatorConfig.host)&&(c.credentials="include"),Xw.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _se(n,e){return _h(n,"POST","/v2/accounts:revokeToken",cR(n,e))}var sg=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=Bz(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await yse(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ao("not implemented")}};function lc(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var uc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=k_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ag(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await og(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lR(this,e)}reload(){return dR(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Zw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wr(this.auth.app))return Promise.reject(nu(this.auth));let e=await this.getIdToken();return await og(this,pse(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,C=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,M=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:F,emailVerified:j,isAnonymous:z,providerData:B,stsTokenManager:T}=t;_e(F&&T,e,"internal-error");let _=sg.fromJSON(this.name,T);_e(typeof F=="string",e,"internal-error"),lc(f,e.name),lc(p,e.name),_e(typeof j=="boolean",e,"internal-error"),_e(typeof z=="boolean",e,"internal-error"),lc(m,e.name),lc(E,e.name),lc(C,e.name),lc(S,e.name),lc(P,e.name),lc(M,e.name);let b=new n({uid:F,auth:e,email:p,emailVerified:j,displayName:f,isAnonymous:z,photoURL:E,phoneNumber:m,tenantId:C,stsTokenManager:_,createdAt:P,lastLoginAt:M});return B&&Array.isArray(B)&&(b.providerData=B.map(A=>Object.assign({},A))),S&&(b._redirectEventId=S),b}static async _fromIdTokenResponse(e,t,r=!1){let i=new sg;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zw(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?s4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new sg;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ag(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var zz=new Map;function xo(n){Ro(n instanceof Function,"Expected a class definition");let e=zz.get(n);return e?(Ro(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zz.set(n,e),e)}var vse=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Kx=vse;function Gw(n,e,t){return`firebase:${n}:${e}:${t}`}var eE=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Gw(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gw("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Jw(this.auth,{idToken:e}).catch(()=>{});return t?uc._fromGetAccountInfoResponse(this.auth,t,e):null}return uc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(xo(Kx),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||xo(Kx),o=Gw(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let f;if(typeof u=="string"){let p=await Jw(e,{idToken:u}).catch(()=>{});if(!p)break;f=await uc._fromGetAccountInfoResponse(e,p,u)}else f=uc._fromJSON(e,u);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function $z(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d4(e))return"Blackberry";if(h4(e))return"Webos";if(a4(e))return"Safari";if((e.includes("chrome/")||c4(e))&&!e.includes("edge/"))return"Chrome";if(u4(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function o4(n=Cn()){return/firefox\//i.test(n)}function a4(n=Cn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c4(n=Cn()){return/crios\//i.test(n)}function l4(n=Cn()){return/iemobile/i.test(n)}function u4(n=Cn()){return/android/i.test(n)}function d4(n=Cn()){return/blackberry/i.test(n)}function h4(n=Cn()){return/webos/i.test(n)}function hR(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bse(n=Cn()){var e;return hR(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wse(){return vB()&&document.documentMode===10}function f4(n=Cn()){return hR(n)||u4(n)||h4(n)||d4(n)||/windows phone/i.test(n)||l4(n)}function p4(n,e=[]){let t;switch(n){case"Browser":t=$z(Cn());break;case"Worker":t=`${$z(Cn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tc}/${r}`}var Qx=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Ese(n,e={}){return _h(n,"GET","/v2/passwordPolicy",cR(n,e))}var Ise=6,Yx=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Ise,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xx=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tE(this),this.idTokenSubscription=new tE(this),this.beforeStateQueue=new Qx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xo(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await eE.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Jw(this,{idToken:e}),r=await uc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zw(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lse()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wr(this.app))return Promise.reject(nu(this));let t=e?vr(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wr(this.app)?Promise.reject(nu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wr(this.app)?Promise.reject(nu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Ese(this),t=new Yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ji("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _se(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&xo(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await eE.create(this,[xo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&sse(`Error while retrieving App Check token: ${t.error}`),t?.token}};function lE(n){return vr(n)}var tE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IB(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tse(n){fR=n}function Sse(n){return fR.loadJS(n)}function Cse(){return fR.gapiScript}function m4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function pR(n,e){let t=hh(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Es(s,e??{}))return i;Cs(i,"already-initialized")}return t.initialize({options:e})}function Dse(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mR(n,e,t){let r=lE(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=g4(e),{host:o,port:a}=Ase(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Es(l,r.config.emulator)&&Es(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Za(o)?(Sw(`${s}//${o}${c}`),Cw("Auth",!0)):i||xse()}function g4(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ase(n){let e=g4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Hz(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Hz(o)}}}function Hz(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function xse(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var cg=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ao("not implemented")}_getIdTokenResponse(e){return Ao("not implemented")}_linkToIdToken(e,t){return Ao("not implemented")}_getReauthenticationResolver(e){return Ao("not implemented")}};async function yh(n,e){return fse(n,"POST","/v1/accounts:signInWithIdp",cR(n,e))}var Rse="http://localhost",nE=class n extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=k_(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return yh(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,yh(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,yh(e,t)}buildRequest(){let e={requestUri:Rse,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dh(t)}return e}};var lg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rE=class extends lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gR=(()=>{class n extends rE{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return nE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ug=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await uc._fromIdTokenResponse(e,r,i),o=qz(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=qz(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function qz(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Jx=class n extends qr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function y4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jx._fromErrorAndOperation(n,s,e,r):s})}async function kse(n,e,t=!1){let r=await og(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ug._forOperation(n,"link",r)}async function Pse(n,e,t=!1){let{auth:r}=n;if(Wr(r.app))return Promise.reject(nu(r));let i="reauthenticate";try{let s=await og(n,y4(r,i,e,n),t);_e(s.idToken,r,"internal-error");let o=uR(s.idToken);_e(o,r,"internal-error");let{sub:a}=o;return _e(n.uid===a,r,"user-mismatch"),ug._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Cs(r,"user-mismatch"),s}}async function Mse(n,e,t=!1){if(Wr(n.app))return Promise.reject(nu(n));let r="signIn",i=await y4(n,r,e),s=await ug._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function yR(n,e,t,r){return vr(n).onIdTokenChanged(e,t,r)}function _R(n,e,t){return vr(n).beforeAuthStateChanged(e,t)}function vR(n){return vr(n).signOut()}var iE="__sak";var sE=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(iE,"1"),this.storage.removeItem(iE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Nse=1e3,Ose=10,Lse=(()=>{class n extends sE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);wse()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Ose):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Nse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),_4=Lse;var Fse=(()=>{class n extends sE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),bR=Fse;function Vse(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Use=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async u=>u(r.origin,o)),l=await Vse(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Zx=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=wR("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let p=f;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ss(){return window}function jse(n){Ss().location.href=n}function v4(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function Bse(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zse(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $se(){return v4()?self:null}var b4="firebaseLocalStorageDb",Hse=1,oE="firebaseLocalStorage",w4="fbase_key",iu=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function uE(n,e){return n.transaction([oE],e?"readwrite":"readonly").objectStore(oE)}function qse(){let n=indexedDB.deleteDatabase(b4);return new iu(n).toPromise()}function eR(){let n=indexedDB.open(b4,Hse);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(oE,{keyPath:w4})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(oE)?e(r):(r.close(),await qse(),e(await eR()))})})}async function Wz(n,e,t){let r=uE(n,!0).put({[w4]:e,value:t});return new iu(r).toPromise()}async function Wse(n,e){let t=uE(n,!1).get(e),r=await new iu(t).toPromise();return r===void 0?null:r.value}function Gz(n,e){let t=uE(n,!0).delete(e);return new iu(t).toPromise()}var Gse=800,Kse=3,Qse=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eR(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>Kse)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Use._getInstance($se()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Bse(),!this.activeServiceWorker)return;this.sender=new Zx(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zse()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await eR();return await Wz(t,iE,"1"),await Gz(t,iE),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wz(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Wse(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gz(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=uE(s,!1).getAll();return new iu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),E4=Qse;var L2e=m4("rcb"),F2e=new ru(3e4,6e4);function I4(n,e){return e?xo(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dg=class extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yh(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Yse(n){return Mse(n.auth,new dg(n),n.bypassAuthState)}function Xse(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),Pse(t,new dg(n),n.bypassAuthState)}async function Jse(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),kse(t,new dg(n),n.bypassAuthState)}var aE=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yse;case"linkViaPopup":case"linkViaRedirect":return Jse;case"reauthViaPopup":case"reauthViaRedirect":return Xse;default:Cs(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Zse=new ru(2e3,1e4);async function ER(n,e,t){if(Wr(n.app))return Promise.reject(Hi(n,"operation-not-supported-in-this-environment"));let r=lE(n);ose(n,e,lg);let i=I4(r,t);return new eoe(r,"signInViaPopup",e,i).executeNotNull()}var eoe=(()=>{class n extends aE{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return _e(t,this.auth,"internal-error"),t}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");let t=wR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Zse.get())};t()}}n.currentPopupAction=null;return n})(),toe="pendingRedirect",Kw=new Map,tR=class extends aE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Kw.get(this.auth._key());if(!e){try{let r=await noe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Kw.set(this.auth._key(),e)}return this.bypassAuthState||Kw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function noe(n,e){let t=soe(e),r=ioe(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function roe(n,e){Kw.set(n._key(),e)}function ioe(n){return xo(n._redirectPersistence)}function soe(n){return Gw(toe,n.config.apiKey,n.name)}async function ooe(n,e,t=!1){if(Wr(n.app))return Promise.reject(nu(n));let r=lE(n),i=I4(r,e),o=await new tR(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var aoe=600*1e3,nR=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!coe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!T4(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aoe&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kz(e))}saveEventToCache(e){this.cachedEventUids.add(Kz(e)),this.lastProcessedEventTime=Date.now()}};function Kz(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function T4({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function coe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T4(n);default:return!1}}async function loe(n,e={}){return _h(n,"GET","/v1/projects",e)}var uoe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,doe=/^https?/;async function hoe(n){if(n.config.emulator)return;let{authorizedDomains:e}=await loe(n);for(let t of e)try{if(foe(t))return}catch{}Cs(n,"unauthorized-domain")}function foe(n){let e=qx(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!doe.test(t))return!1;if(uoe.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var poe=new ru(3e4,6e4);function Qz(){let n=Ss().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function moe(n){return new Promise((e,t)=>{var r,i,s;function o(){Qz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qz(),t(Hi(n,"network-request-failed"))},timeout:poe.get()})}if(!((i=(r=Ss().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ss().gapi)===null||s===void 0)&&s.load)o();else{let a=m4("iframefcb");return Ss()[a]=()=>{gapi.load?o():t(Hi(n,"network-request-failed"))},Sse(`${Cse()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Qw=null,e})}var Qw=null;function goe(n){return Qw=Qw||moe(n),Qw}var yoe=new ru(5e3,15e3),_oe="__/auth/iframe",voe="emulator/auth/iframe",boe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},woe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eoe(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?aR(e,voe):`https://${n.config.authDomain}/${_oe}`,r={apiKey:e.apiKey,appName:n.name,v:tc},i=woe.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${dh(r).slice(1)}`}async function Ioe(n){let e=await goe(n),t=Ss().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Eoe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:boe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Hi(n,"network-request-failed"),a=Ss().setTimeout(()=>{s(o)},yoe.get());function c(){Ss().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Toe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Soe=500,Coe=600,Doe="_blank",Aoe="http://localhost",cE=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xoe(n,e,t,r=Soe,i=Coe){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Toe),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Cn().toLowerCase();t&&(a=c4(l)?Doe:t),o4(l)&&(e=e||Aoe,c.scrollbars="yes");let u=Object.entries(c).reduce((p,[m,E])=>`${p}${m}=${E},`,"");if(bse(l)&&a!=="_self")return Roe(e||"",a),new cE(null);let f=window.open(e||"",a,u);_e(f,n,"popup-blocked");try{f.focus()}catch{}return new cE(f)}function Roe(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var koe="__/auth/handler",Poe="emulator/auth/handler",Moe=encodeURIComponent("fac");async function Yz(n,e,t,r,i,s){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:tc,eventId:i};if(e instanceof lg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",EB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,f]of Object.entries(s||{}))o[u]=f}if(e instanceof rE){let u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=await n._getAppCheckToken(),l=c?`#${Moe}=${encodeURIComponent(c)}`:"";return`${Noe(n)}?${dh(a).slice(1)}${l}`}function Noe({config:n}){return n.emulator?aR(n,Poe):`https://${n.authDomain}/${koe}`}var Hx="webStorageSupport",rR=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bR,this._completeRedirectFn=ooe,this._overrideRedirectResult=roe}async _openPopup(e,t,r,i){var s;Ro((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await Yz(e,t,r,qx(),i);return xoe(e,o,wR())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await Yz(e,t,r,qx(),i);return jse(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ro(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await Ioe(e),r=new nR(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hx,{type:Hx},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Hx];o!==void 0&&t(!!o),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hoe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return f4()||a4()||hR()}},S4=rR;var Xz="@firebase/auth",Jz="1.10.8";var iR=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Ooe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Loe(n){Bi(new sr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p4(n)},l=new Xx(r,i,s,c);return Dse(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bi(new sr("auth-internal",e=>{let t=lE(e.getProvider("auth").getImmediate());return(r=>new iR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(Xz,Jz,Ooe(n)),Ft(Xz,Jz,"esm2017")}var Foe=300,Voe=QA("authIdTokenMaxAge")||Foe,Zz=null,Uoe=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Voe)return;let i=t?.token;Zz!==i&&(Zz=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IR(n=Yl()){let e=hh(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pR(n,{popupRedirectResolver:S4,persistence:[E4,_4,bR]}),r=QA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Uoe(s.toString());_R(t,o,()=>o(t.currentUser)),yR(t,a=>o(a))}}let i=GA("auth");return i&&mR(t,`http://${i}`),t}function joe(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Tse({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Hi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",joe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Loe("Browser");var C4="auth",ko=class{constructor(e){return e}},hg=class{constructor(){return ph(C4)}};var TR=new J("angularfire2.auth-instances");function kae(n,e){let t=Qm(C4,n,e);return t&&new ko(t)}function Pae(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ko(r)}}var Mae={provide:hg,deps:[[new pr,TR]]},Nae={provide:ko,useFactory:kae,deps:[[new pr,TR],Io]};function D4(n,...e){return Ft("angularfire",nc.full,"auth"),In([Nae,Mae,{provide:TR,useFactory:Pae(n),multi:!0,deps:[Se,yt,rc,Jl,[new pr,mh],...e]}])}var dE=br(Uz,!0);var A4=br(IR,!0);var x4=br(ER,!0,2);var R4=br(vR,!0,2);var k4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P4={};var Po,SR;(function(){var n;function e(T,_){function b(){}b.prototype=_.prototype,T.F=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.D=function(A,D,x){for(var I=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)I[Oe-2]=arguments[Oe];return _.prototype[D].apply(A,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,b){b||(b=0);let A=Array(16);if(typeof _=="string")for(var D=0;D<16;++D)A[D]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(D=0;D<16;++D)A[D]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],D=T.g[2];let x=T.g[3],I;I=_+(x^b&(D^x))+A[0]+3614090360&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[1]+3905402710&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[2]+606105819&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[3]+3250441966&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[4]+4118548399&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[5]+1200080426&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[6]+2821735955&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[7]+4249261313&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[8]+1770035416&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[9]+2336552879&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[10]+4294925233&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[11]+2304563134&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[12]+1804603682&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[13]+4254626195&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[14]+2792965006&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[15]+1236535329&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(D^x&(b^D))+A[1]+4129170786&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[6]+3225465664&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[11]+643717713&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[0]+3921069994&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[5]+3593408605&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[10]+38016083&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[15]+3634488961&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[4]+3889429448&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[9]+568446438&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[14]+3275163606&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[3]+4107603335&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[8]+1163531501&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[13]+2850285829&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[2]+4243563512&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[7]+1735328473&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[12]+2368359562&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(b^D^x)+A[5]+4294588738&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[8]+2272392833&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[11]+1839030562&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[14]+4259657740&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[1]+2763975236&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[4]+1272893353&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[7]+4139469664&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[10]+3200236656&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[13]+681279174&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[0]+3936430074&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[3]+3572445317&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[6]+76029189&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[9]+3654602809&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[12]+3873151461&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[15]+530742520&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[2]+3299628645&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(D^(b|~x))+A[0]+4096336452&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[7]+1126891415&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[14]+2878612391&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[5]+4237533241&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[12]+1700485571&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[3]+2399980690&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[10]+4293915773&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[1]+2240044497&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[8]+1873313359&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[15]+4264355552&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[6]+2734768916&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[13]+1309151649&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[4]+4149444226&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[11]+3174756917&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[2]+718787259&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+x&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);let b=_-this.blockSize,A=this.C,D=this.h,x=0;for(;x<_;){if(D==0)for(;x<=b;)i(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<_;)if(A[D++]=T.charCodeAt(x++),D==this.blockSize){i(this,A),D=0;break}}else for(;x<_;)if(A[D++]=T[x++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var b=T.length-8;b<T.length;++b)T[b]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,b=0;b<4;++b)for(let A=0;A<32;A+=8)T[_++]=this.g[b]>>>A&255;return T};function s(T,_){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function o(T,_){this.h=_;let b=[],A=!0;for(let D=T.length-1;D>=0;D--){let x=T[D]|0;A&&x==_||(b[D]=x,A=!1)}this.g=b}var a={};function c(T){return-128<=T&&T<128?s(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return S(l(-T));let _=[],b=1;for(let A=0;T>=b;A++)_[A]=T/b|0,b*=4294967296;return new o(_,0)}function u(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(u(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let b=l(Math.pow(_,8)),A=f;for(let x=0;x<T.length;x+=8){var D=Math.min(8,T.length-x);let I=parseInt(T.substring(x,x+D),_);D<8?(D=l(Math.pow(_,D)),A=A.j(D).add(l(I))):(A=A.j(b),A=A.add(l(I)))}return A}var f=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(C(this))return-S(this).m();let T=0,_=1;for(let b=0;b<this.g.length;b++){let A=this.i(b);T+=(A>=0?A:4294967296+A)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(C(this))return"-"+S(this).toString(T);let _=l(Math.pow(T,6));var b=this;let A="";for(;;){let D=j(b,_).g;b=P(b,D.j(_));let x=((b.g.length>0?b.g[0]:b.h)>>>0).toString(T);if(b=D,E(b))return x+A;for(;x.length<6;)x="0"+x;A=x+A}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function C(T){return T.h==-1}n.l=function(T){return T=P(this,T),C(T)?-1:E(T)?0:1};function S(T){let _=T.g.length,b=[];for(let A=0;A<_;A++)b[A]=~T.g[A];return new o(b,~T.h).add(p)}n.abs=function(){return C(this)?S(this):this},n.add=function(T){let _=Math.max(this.g.length,T.g.length),b=[],A=0;for(let D=0;D<=_;D++){let x=A+(this.i(D)&65535)+(T.i(D)&65535),I=(x>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);A=I>>>16,x&=65535,I&=65535,b[D]=I<<16|x}return new o(b,b[b.length-1]&-2147483648?-1:0)};function P(T,_){return T.add(S(_))}n.j=function(T){if(E(this)||E(T))return f;if(C(this))return C(T)?S(this).j(S(T)):S(S(this).j(T));if(C(T))return S(this.j(S(T)));if(this.l(m)<0&&T.l(m)<0)return l(this.m()*T.m());let _=this.g.length+T.g.length,b=[];for(var A=0;A<2*_;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(let D=0;D<T.g.length;D++){let x=this.i(A)>>>16,I=this.i(A)&65535,Oe=T.i(D)>>>16,ke=T.i(D)&65535;b[2*A+2*D]+=I*ke,M(b,2*A+2*D),b[2*A+2*D+1]+=x*ke,M(b,2*A+2*D+1),b[2*A+2*D+1]+=I*Oe,M(b,2*A+2*D+1),b[2*A+2*D+2]+=x*Oe,M(b,2*A+2*D+2)}for(T=0;T<_;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=_;T<2*_;T++)b[T]=0;return new o(b,0)};function M(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function F(T,_){this.g=T,this.h=_}function j(T,_){if(E(_))throw Error("division by zero");if(E(T))return new F(f,f);if(C(T))return _=j(S(T),_),new F(S(_.g),S(_.h));if(C(_))return _=j(T,S(_)),new F(S(_.g),_.h);if(T.g.length>30){if(C(T)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=_;A.l(T)<=0;)b=z(b),A=z(A);var D=B(b,1),x=B(A,1);for(A=B(A,2),b=B(b,2);!E(A);){var I=x.add(A);I.l(T)<=0&&(D=D.add(b),x=I),A=B(A,1),b=B(b,1)}return _=P(T,D.j(_)),new F(D,_)}for(D=f;T.l(_)>=0;){for(b=Math.max(1,Math.floor(T.m()/_.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),x=l(b),I=x.j(_);C(I)||I.l(T)>0;)b-=A,x=l(b),I=x.j(_);E(x)&&(x=p),D=D.add(x),T=P(T,I)}return new F(D,T)}n.B=function(T){return j(this,T).h},n.and=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let A=0;A<_;A++)b[A]=this.i(A)&T.i(A);return new o(b,this.h&T.h)},n.or=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let A=0;A<_;A++)b[A]=this.i(A)|T.i(A);return new o(b,this.h|T.h)},n.xor=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let A=0;A<_;A++)b[A]=this.i(A)^T.i(A);return new o(b,this.h^T.h)};function z(T){let _=T.g.length+1,b=[];for(let A=0;A<_;A++)b[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(b,T.h)}function B(T,_){let b=_>>5;_%=32;let A=T.g.length-b,D=[];for(let x=0;x<A;x++)D[x]=_>0?T.i(x+b)>>>_|T.i(x+b+1)<<32-_:T.i(x+b);return new o(D,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SR=P4.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Po=P4.Integer=o}).apply(typeof k4<"u"?k4:typeof self<"u"?self:typeof window<"u"?window:{});var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mo={};var CR,Lae,vh,DR,fg,fE,AR,xR,RR;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof hE=="object"&&hE];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(h,y){if(y)e:{var w=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var O=h[k];if(!(O in w))break e;w=w[O]}h=h[h.length-1],k=w[h],y=y(k),y!=k&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(y){var w=[],k;for(k in y)Object.prototype.hasOwnProperty.call(y,k)&&w.push([k,y[k]]);return w}});var s=s||{},o=this||self;function a(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function c(h,y,w){return h.call.apply(h.bind,arguments)}function l(h,y,w){return l=c,l.apply(null,arguments)}function u(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function f(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(k,O,V){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return y.prototype[O].apply(k,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function m(h){let y=h.length;if(y>0){let w=Array(y);for(let k=0;k<y;k++)w[k]=h[k];return w}return[]}function E(h,y){for(let k=1;k<arguments.length;k++){let O=arguments[k];var w=typeof O;if(w=w!="object"?w:O?Array.isArray(O)?"array":w:"null",w=="array"||w=="object"&&typeof O.length=="number"){w=h.length||0;let V=O.length||0;h.length=w+V;for(let X=0;X<V;X++)h[w+X]=O[X]}else h.push(O)}}class C{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function S(h){o.setTimeout(()=>{throw h},0)}function P(){var h=T;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class M{constructor(){this.h=this.g=null}add(y,w){let k=F.get();k.set(y,w),this.h?this.h.next=k:this.g=k,this.h=k}}var F=new C(()=>new j,h=>h.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let z,B=!1,T=new M,_=()=>{let h=Promise.resolve(void 0);z=()=>{h.then(b)}};function b(){for(var h;h=P();){try{h.h.call(h.g)}catch(w){S(w)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}B=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let w=()=>{};o.addEventListener("test",w,y),o.removeEventListener("test",w,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Oe(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}f(Oe,D),Oe.prototype.init=function(h,y){let w=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);let h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ee(h,y,w,k,O){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!k,this.ha=O,this.key=++Y,this.da=this.fa=!1}function oe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h,y,w){for(let k in h)y.call(w,h[k],k,h)}function lt(h,y){for(let w in h)y.call(void 0,h[w],w,h)}function Xt(h){let y={};for(let w in h)y[w]=h[w];return y}let et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(h,y){let w,k;for(let O=1;O<arguments.length;O++){k=arguments[O];for(w in k)h[w]=k[w];for(let V=0;V<et.length;V++)w=et[V],Object.prototype.hasOwnProperty.call(k,w)&&(h[w]=k[w])}}function Le(h){this.src=h,this.g={},this.h=0}Le.prototype.add=function(h,y,w,k,O){let V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);let X=Xn(h,y,k,O);return X>-1?(y=h[X],w||(y.fa=!1)):(y=new ee(y,this.src,V,!!k,O),y.fa=w,h.push(y)),y};function bn(h,y){let w=y.type;if(w in h.g){var k=h.g[w],O=Array.prototype.indexOf.call(k,y,void 0),V;(V=O>=0)&&Array.prototype.splice.call(k,O,1),V&&(oe(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Xn(h,y,w,k){for(let O=0;O<h.length;++O){let V=h[O];if(!V.da&&V.listener==y&&V.capture==!!w&&V.ha==k)return O}return-1}var Et="closure_lm_"+(Math.random()*1e6|0),Rr={};function Rn(h,y,w,k,O){if(k&&k.once)return Lu(h,y,w,k,O);if(Array.isArray(y)){for(let V=0;V<y.length;V++)Rn(h,y[V],w,k,O);return null}return w=ju(w),h&&h[ke]?h.J(y,w,a(k)?!!k.capture:!!k,O):Yr(h,y,w,!1,k,O)}function Yr(h,y,w,k,O,V){if(!y)throw Error("Invalid event type");let X=a(O)?!!O.capture:!!O,ye=Uu(h);if(ye||(h[Et]=ye=new Le(h)),w=ye.add(y,w,k,X,V),w.proxy)return w;if(k=Xi(),w.proxy=k,k.src=h,k.listener=w,h.addEventListener)x||(O=X),O===void 0&&(O=!1),h.addEventListener(y.toString(),k,O);else if(h.attachEvent)h.attachEvent(Vu(y.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xi(){function h(w){return y.call(h.src,h.listener,w)}let y=Hy;return h}function Lu(h,y,w,k,O){if(Array.isArray(y)){for(let V=0;V<y.length;V++)Lu(h,y[V],w,k,O);return null}return w=ju(w),h&&h[ke]?h.K(y,w,a(k)?!!k.capture:!!k,O):Yr(h,y,w,!0,k,O)}function Fu(h,y,w,k,O){if(Array.isArray(y))for(var V=0;V<y.length;V++)Fu(h,y[V],w,k,O);else k=a(k)?!!k.capture:!!k,w=ju(w),h&&h[ke]?(h=h.i,V=String(y).toString(),V in h.g&&(y=h.g[V],w=Xn(y,w,k,O),w>-1&&(oe(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[V],h.h--)))):h&&(h=Uu(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Xn(y,w,k,O)),(w=h>-1?y[h]:null)&&jc(w))}function jc(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])bn(y.i,h);else{var w=h.type,k=h.proxy;y.removeEventListener?y.removeEventListener(w,k,h.capture):y.detachEvent?y.detachEvent(Vu(w),k):y.addListener&&y.removeListener&&y.removeListener(k),(w=Uu(y))?(bn(w,h),w.h==0&&(w.src=null,y[Et]=null)):oe(h)}}}function Vu(h){return h in Rr?Rr[h]:Rr[h]="on"+h}function Hy(h,y){if(h.da)h=!0;else{y=new Oe(y,this);let w=h.listener,k=h.ha||h.src;h.fa&&jc(h),h=w.call(k,y)}return h}function Uu(h){return h=h[Et],h instanceof Le?h:null}var Kf="__closure_events_fn_"+(Math.random()*1e9>>>0);function ju(h){return typeof h=="function"?h:(h[Kf]||(h[Kf]=function(y){return h.handleEvent(y)}),h[Kf])}function un(){A.call(this),this.i=new Le(this),this.M=this,this.G=null}f(un,A),un.prototype[ke]=!0,un.prototype.removeEventListener=function(h,y,w,k){Fu(this,h,y,w,k)};function dn(h,y){var w,k=h.G;if(k)for(w=[];k;k=k.G)w.push(k);if(h=h.M,k=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var O=y;y=new D(k,h),We(y,O)}O=!0;let V,X;if(w)for(X=w.length-1;X>=0;X--)V=y.g=w[X],O=Bc(V,k,!0,y)&&O;if(V=y.g=h,O=Bc(V,k,!0,y)&&O,O=Bc(V,k,!1,y)&&O,w)for(X=0;X<w.length;X++)V=y.g=w[X],O=Bc(V,k,!1,y)&&O}un.prototype.N=function(){if(un.Z.N.call(this),this.i){var h=this.i;for(let y in h.g){let w=h.g[y];for(let k=0;k<w.length;k++)oe(w[k]);delete h.g[y],h.h--}}this.G=null},un.prototype.J=function(h,y,w,k){return this.i.add(String(h),y,!1,w,k)},un.prototype.K=function(h,y,w,k){return this.i.add(String(h),y,!0,w,k)};function Bc(h,y,w,k){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let O=!0;for(let V=0;V<y.length;++V){let X=y[V];if(X&&!X.da&&X.capture==w){let ye=X.listener,d=X.ha||X.src;X.fa&&bn(h.i,X),O=ye.call(d,k)!==!1&&O}}return O&&!k.defaultPrevented}function c0(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=l(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(h,y||0)}function Bu(h){h.g=c0(()=>{h.g=null,h.i&&(h.i=!1,Bu(h))},h.l);let y=h.h;h.h=null,h.m.apply(null,y)}class Qf extends A{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Bu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(h){A.call(this),this.h=h,this.g={}}f(Gs,A);var hn=[];function wn(h){ge(h.g,function(y,w){this.g.hasOwnProperty(w)&&jc(y)},h),h.g={}}Gs.prototype.N=function(){Gs.Z.N.call(this),wn(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sa=o.JSON.stringify,qy=o.JSON.parse,Wy=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Gy(){}function oa(){}var aa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zu(){D.call(this,"d")}f(zu,D);function zc(){D.call(this,"c")}f(zc,D);var Ks={},Ky=null;function ca(){return Ky=Ky||new un}Ks.Ia="serverreachability";function Yf(h){D.call(this,Ks.Ia,h)}f(Yf,D);function la(h){let y=ca();dn(y,new Yf(y))}Ks.STAT_EVENT="statevent";function ua(h,y){D.call(this,Ks.STAT_EVENT,h),this.stat=y}f(ua,D);function fn(h){let y=ca();dn(y,new ua(y,h))}Ks.Ja="timingevent";function $u(h,y){D.call(this,Ks.Ja,h),this.size=y}f($u,D);function kr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},y)}function da(){this.g=!0}da.prototype.ua=function(){this.g=!1};function Hu(h,y,w,k,O,V){h.info(function(){if(h.g)if(V){var X="",ye=V.split("&");for(let g=0;g<ye.length;g++){var d=ye[g].split("=");if(d.length>1){let v=d[0];d=d[1];let R=v.split("_");X=R.length>=2&&R[1]=="type"?X+(v+"="+d+"&"):X+(v+"=redacted&")}}}else X=null;else X=V;return"XMLHTTP REQ ("+k+") [attempt "+O+"]: "+y+`
`+w+`
`+X})}function Qy(h,y,w,k,O,V,X){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+O+"]: "+y+`
`+w+`
`+V+" "+X})}function Xr(h,y,w,k){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+kn(h,w)+(k?" "+k:"")})}function Yy(h,y){h.info(function(){return"TIMEOUT: "+y})}da.prototype.info=function(){};function kn(h,y){if(!h.g)return y;if(!y)return null;try{let V=JSON.parse(y);if(V){for(h=0;h<V.length;h++)if(Array.isArray(V[h])){var w=V[h];if(!(w.length<2)){var k=w[1];if(Array.isArray(k)&&!(k.length<1)){var O=k[0];if(O!="noop"&&O!="stop"&&O!="close")for(let X=1;X<k.length;X++)k[X]=""}}}}return sa(V)}catch{return y}}var $c={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fa;function Xf(){}f(Xf,Gy),Xf.prototype.g=function(){return new XMLHttpRequest},fa=new Xf;function Hc(h){return encodeURIComponent(String(h))}function pa(h){var y=1;h=h.split(":");let w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Ji(h,y,w,k){this.j=h,this.i=y,this.l=w,this.S=k||1,this.V=new Gs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var qc={},qu={};function Wc(h,y,w){h.M=1,h.A=Yc(Pr(y)),h.u=w,h.R=!0,Gc(h,null)}function Gc(h,y){h.F=Date.now(),ma(h),h.B=Pr(h.A);var w=h.B,k=h.S;Array.isArray(k)||(k=[String(k)]),r_(w.i,"t",k),h.C=0,w=h.j.L,h.h=new Xy,h.g=id(h.j,w?y:null,!h.u),h.P>0&&(h.O=new Qf(l(h.Y,h,h.g),h.P)),y=h.V,w=h.g,k=h.ba;var O="readystatechange";Array.isArray(O)||(O&&(hn[0]=O.toString()),O=hn);for(let V=0;V<O.length;V++){let X=Rn(w,O[V],k||y.handleEvent,!1,y.h||y);if(!X)break;y.g[X.key]=X}y=h.J?Xt(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),la(),Hu(h.i,h.v,h.B,h.l,h.S,h.u)}Ji.prototype.ba=function(h){h=h.target;let y=this.O;y&&it(h)==3?y.j():this.Y(h)},Ji.prototype.Y=function(h){try{if(h==this.g)e:{let ye=it(this.g),d=this.g.ya(),g=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||u_(this.g)))){this.K||ye!=4||d==7||(d==8||g<=0?la(3):la(2)),Gu(this);var y=this.g.ca();this.X=y;var w=Zi(this);if(this.o=y==200,Qy(this.i,this.v,this.B,this.l,this.S,ye,y),this.o){if(this.U&&!this.L){t:{if(this.g){var k,O=this.g;if((k=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(k)){var V=k;break t}}V=null}if(h=V)Xr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ya(this,h);else{this.o=!1,this.m=3,fn(12),Qs(this),ga(this);break e}}if(this.R){h=!0;let v;for(;!this.K&&this.C<w.length;)if(v=Jy(this,w),v==qu){ye==4&&(this.m=4,fn(14),h=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(v==qc){this.m=4,fn(15),Xr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Xr(this.i,this.l,v,null),ya(this,v);if(Jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||w.length!=0||this.h.h||(this.m=1,fn(16),h=!1),this.o=this.o&&h,!h)Xr(this.i,this.l,w,"[Invalid Chunked Response]"),Qs(this),ga(this);else if(w.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),td(X),X.P=!0,fn(11))}}else Xr(this.i,this.l,w,null),ya(this,w);ye==4&&Qs(this),this.o&&!this.K&&(ye==4?dp(this.j,this):(this.o=!1,ma(this)))}else l0(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,fn(12)):(this.m=0,fn(13)),Qs(this),ga(this)}}}catch{}finally{}};function Zi(h){if(!Jf(h))return h.g.la();let y=u_(h.g);if(y==="")return"";let w="",k=y.length,O=it(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Qs(h),ga(h),"";h.h.i=new o.TextDecoder}for(let V=0;V<k;V++)h.h.h=!0,w+=h.h.i.decode(y[V],{stream:!(O&&V==k-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function Jf(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Jy(h,y){var w=h.C,k=y.indexOf(`
`,w);return k==-1?qu:(w=Number(y.substring(w,k)),isNaN(w)?qc:(k+=1,k+w>y.length?qu:(y=y.slice(k,k+w),h.C=k+w,y)))}Ji.prototype.cancel=function(){this.K=!0,Qs(this)};function ma(h){h.T=Date.now()+h.H,Wu(h,h.H)}function Wu(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=kr(l(h.aa,h),y)}function Gu(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Ji.prototype.aa=function(){this.D=null;let h=Date.now();h-this.T>=0?(Yy(this.i,this.B),this.M!=2&&(la(),fn(17)),Qs(this),this.m=2,ga(this)):Wu(this,this.T-h)};function ga(h){h.j.I==0||h.K||dp(h.j,h)}function Qs(h){Gu(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,wn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ya(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Kc(w.h,h))){if(!h.L&&Kc(w.h,h)&&w.I==3){try{var k=w.Ba.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var O=k;if(O[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)nd(w),Ys(w);else break e;Sa(w),fn(18)}}else w.xa=O[1],0<w.xa-w.K&&O[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=kr(l(w.Va,w),6e3));es(w.h)<=1&&w.ta&&(w.ta=void 0)}else ns(w,11)}else if((h.L||w.g==h)&&nd(w),!I(y))for(O=w.Ba.g.parse(y),y=0;y<O.length;y++){let g=O[y],v=g[0];if(!(v<=w.K))if(w.K=v,g=g[1],w.I==2)if(g[0]=="c"){w.M=g[1],w.ba=g[2];let R=g[3];R!=null&&(w.ka=R,w.j.info("VER="+w.ka));let L=g[4];L!=null&&(w.za=L,w.j.info("SVER="+w.za));let U=g[5];U!=null&&typeof U=="number"&&U>0&&(k=1.5*U,w.O=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;let K=h.g;if(K){let tt=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tt){var V=k.h;V.g||tt.indexOf("spdy")==-1&&tt.indexOf("quic")==-1&&tt.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zf(V,V.h),V.h=null))}if(k.G){let Ht=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Ht&&(k.wa=Ht,mt(k.J,k.G,Ht))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),k=w;var X=h;if(k.na=rd(k,k.L?k.ba:null,k.W),X.L){ep(k.h,X);var ye=X,d=k.O;d&&(ye.H=d),ye.D&&(Gu(ye),ma(ye)),k.g=X}else ed(k);w.i.length>0&&lr(w)}else g[0]!="stop"&&g[0]!="close"||ns(w,7);else w.I==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?ns(w,7):Zu(w):g[0]!="noop"&&w.l&&w.l.qa(g),w.A=0)}}la(4)}catch{}}var Zy=class{constructor(h,y){this.g=h,this.map=y}};function Ku(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function es(h){return h.h?1:h.g?h.g.size:0}function Kc(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Zf(h,y){h.g?h.g.add(y):h.h=y}function ep(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ku.prototype.cancel=function(){if(this.i=tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function tp(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(let w of h.g.values())y=y.concat(w.G);return y}return m(h.i)}var np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rp(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){let k=h[w].indexOf("="),O,V=null;k>=0?(O=h[w].substring(0,k),V=h[w].substring(k+1)):O=h[w],y(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Jr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Jr?(this.l=h.l,va(this,h.j),this.o=h.o,this.g=h.g,Qc(this,h.u),this.h=h.h,ip(this,i_(h.i)),this.m=h.m):h&&(y=String(h).match(np))?(this.l=!1,va(this,y[1]||"",!0),this.o=Xc(y[2]||""),this.g=Xc(y[3]||"",!0),Qc(this,y[4]),this.h=Xc(y[5]||"",!0),ip(this,y[6]||"",!0),this.m=Xc(y[7]||"")):(this.l=!1,this.i=new _i(null,this.l))}Jr.prototype.toString=function(){let h=[];var y=this.j;y&&h.push(Mr(y,Jc,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Mr(y,Jc,!0),"@"),h.push(Hc(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Mr(w,w.charAt(0)=="/"?e_:Qu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Mr(w,Yu)),h.join("")},Jr.prototype.resolve=function(h){let y=Pr(this),w=!!h.j;w?va(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var k=h.h;if(w)Qc(y,h.u);else if(w=!!h.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var O=y.h.lastIndexOf("/");O!=-1&&(k=y.h.slice(0,O+1)+k)}if(O=k,O==".."||O==".")k="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){k=O.lastIndexOf("/",0)==0,O=O.split("/");let V=[];for(let X=0;X<O.length;){let ye=O[X++];ye=="."?k&&X==O.length&&V.push(""):ye==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),k&&X==O.length&&V.push("")):(V.push(ye),k=!0)}k=V.join("/")}else k=O}return w?y.h=k:w=h.i.toString()!=="",w?ip(y,i_(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Pr(h){return new Jr(h)}function va(h,y,w){h.j=w?Xc(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Qc(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function ip(h,y,w){y instanceof _i?(h.i=y,Zc(h.i,h.l)):(w||(y=Mr(y,bt)),h.i=new _i(y,h.l))}function mt(h,y,w){h.i.set(y,w)}function Yc(h){return mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Xc(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mr(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,yi),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yi(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Jc=/[#\/\?@]/g,Qu=/[#\?:]/g,e_=/[#\?]/g,bt=/[#\?@]/g,Yu=/#/g;function _i(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Nr(h){h.g||(h.g=new Map,h.h=0,h.i&&rp(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=_i.prototype,n.add=function(h,y){Nr(this),this.i=null,h=ba(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function t_(h,y){Nr(h),y=ba(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function sp(h,y){return Nr(h),y=ba(h,y),h.g.has(y)}n.forEach=function(h,y){Nr(this),this.g.forEach(function(w,k){w.forEach(function(O){h.call(y,O,k,this)},this)},this)};function n_(h,y){Nr(h);let w=[];if(typeof y=="string")sp(h,y)&&(w=w.concat(h.g.get(ba(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}n.set=function(h,y){return Nr(this),this.i=null,h=ba(this,h),sp(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=n_(this,h),h.length>0?String(h[0]):y):y};function r_(h,y,w){t_(h,y),w.length>0&&(h.i=null,h.g.set(ba(h,y),m(w)),h.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],y=Array.from(this.g.keys());for(let k=0;k<y.length;k++){var w=y[k];let O=Hc(w);w=n_(this,w);for(let V=0;V<w.length;V++){let X=O;w[V]!==""&&(X+="="+Hc(w[V])),h.push(X)}}return this.i=h.join("&")};function i_(h){let y=new _i;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ba(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Zc(h,y){y&&!h.j&&(Nr(h),h.i=null,h.g.forEach(function(w,k){let O=k.toLowerCase();k!=O&&(t_(this,k),r_(this,O,w))},h)),h.j=y}function ts(h,y){let w=new da;if(o.Image){let k=new Image;k.onload=u(vi,w,"TestLoadImage: loaded",!0,y,k),k.onerror=u(vi,w,"TestLoadImage: error",!1,y,k),k.onabort=u(vi,w,"TestLoadImage: abort",!1,y,k),k.ontimeout=u(vi,w,"TestLoadImage: timeout",!1,y,k),o.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else y(!1)}function s_(h,y){let w=new da,k=new AbortController,O=setTimeout(()=>{k.abort(),vi(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:k.signal}).then(V=>{clearTimeout(O),V.ok?vi(w,"TestPingServer: ok",!0,y):vi(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(O),vi(w,"TestPingServer: error",!1,y)})}function vi(h,y,w,k,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),k(w)}catch{}}function o_(){this.g=new Wy}function bi(h){this.i=h.Sb||null,this.h=h.ab||!1}f(bi,Gy),bi.prototype.g=function(){return new Xu(this.i,this.h)};function Xu(h,y){un.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Xu,un),n=Xu.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,cr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;a_(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function a_(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?el(this):cr(this),this.readyState==3&&a_(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,el(this))},n.Na=function(h){this.g&&(this.response=h,el(this))},n.ga=function(){this.g&&el(this)};function el(h){h.readyState=4,h.l=null,h.j=null,h.B=null,cr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function c_(h){let y="";return ge(h,function(w,k){y+=k,y+=":",y+=w,y+=`\r
`}),y}function op(h,y,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=c_(w),typeof h=="string"?w!=null&&Hc(w):mt(h,y,w))}function gt(h){un.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(gt,un);var Ju=/^https?$/i,l_=["POST","PUT"];n=gt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fa.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(V){wa(this,V);return}if(h=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var O in k)w.set(O,k[O]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(let V of k.keys())w.set(V,k.get(V));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(V=>V.toLowerCase()=="content-type"),O=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(l_,y,void 0)>=0)||k||O||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,X]of w)this.g.setRequestHeader(V,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(V){wa(this,V)}};function wa(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ea(h),Ia(h)}function Ea(h){h.A||(h.A=!0,dn(h,"complete"),dn(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,dn(this,"complete"),dn(this,"abort"),Ia(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ap(this):this.Xa())},n.Xa=function(){ap(this)};function ap(h){if(h.h&&typeof s<"u"){if(h.v&&it(h)==4)setTimeout(h.Ca.bind(h),0);else if(dn(h,"readystatechange"),it(h)==4){h.h=!1;try{let V=h.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var k;if(k=V===0){let X=String(h.D).match(np)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),k=!Ju.test(X?X.toLowerCase():"")}w=k}if(w)dn(h,"complete"),dn(h,"success");else{h.o=6;try{var O=it(h)>2?h.g.statusText:""}catch{O=""}h.l=O+" ["+h.ca()+"]",Ea(h)}}finally{Ia(h)}}}}function Ia(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);let w=h.g;h.g=null,y||dn(h,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function it(h){return h.g?h.g.readyState:0}n.ca=function(){try{return it(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),qy(y)}};function u_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function l0(h){let y={};h=(h.g&&it(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(I(h[k]))continue;var w=pa(h[k]);let O=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let V=y[O]||[];y[O]=V,V.push(w)}lt(y,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function cp(h){this.za=0,this.i=[],this.j=new da,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ta("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ta("baseRetryDelayMs",5e3,h),this.Za=Ta("retryDelaySeedMs",1e4,h),this.Ta=Ta("forwardChannelMaxRetries",2,h),this.va=Ta("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ku(h&&h.concurrentRequestLimit),this.Ba=new o_,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=cp.prototype,n.ka=8,n.I=1,n.connect=function(h,y,w,k){fn(0),this.W=h,this.H=y||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.J=rd(this,null,this.W),lr(this)};function Zu(h){if(lp(h),h.I==3){var y=h.V++,w=Pr(h.J);if(mt(w,"SID",h.M),mt(w,"RID",y),mt(w,"TYPE","terminate"),wi(h,w),y=new Ji(h,h.j,y),y.M=2,y.A=Yc(Pr(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=y.A,w=!0),w||(y.g=id(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ma(y)}hp(h)}function Ys(h){h.g&&(td(h),h.g.cancel(),h.g=null)}function lp(h){Ys(h),h.v&&(o.clearTimeout(h.v),h.v=null),nd(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function lr(h){if(!_a(h.h)&&!h.m){h.m=!0;var y=h.Ea;z||_(),B||(z(),B=!0),T.add(y,h),h.D=0}}function d_(h,y){return es(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=kr(l(h.Ea,h,y),Ca(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;let O=new Ji(this,this.j,h),V=this.o;if(this.U&&(V?(V=Xt(V),We(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=up(this,O,y),w=Pr(this.J),mt(w,"RID",h),mt(w,"CVER",22),this.G&&mt(w,"X-HTTP-Session-Id",this.G),wi(this,w),V&&(this.R?y="headers="+Hc(c_(V))+"&"+y:this.u&&op(w,this.u,V)),Zf(this.h,O),this.Ra&&mt(w,"TYPE","init"),this.S?(mt(w,"$req",y),mt(w,"SID","null"),O.U=!0,Wc(O,w,null)):Wc(O,w,y),this.I=2}}else this.I==3&&(h?h_(this,h):this.i.length==0||_a(this.h)||h_(this))};function h_(h,y){var w;y?w=y.l:w=h.V++;let k=Pr(h.J);mt(k,"SID",h.M),mt(k,"RID",w),mt(k,"AID",h.K),wi(h,k),h.u&&h.o&&op(k,h.u,h.o),w=new Ji(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=up(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Zf(h.h,w),Wc(w,k,y)}function wi(h,y){h.H&&ge(h.H,function(w,k){mt(y,k,w)}),h.l&&ge({},function(w,k){mt(y,k,w)})}function up(h,y,w){w=Math.min(h.i.length,w);let k=h.l?l(h.l.Ka,h.l,h):null;e:{var O=h.i;let ye=-1;for(;;){let d=["count="+w];ye==-1?w>0?(ye=O[0].g,d.push("ofs="+ye)):ye=0:d.push("ofs="+ye);let g=!0;for(let v=0;v<w;v++){var V=O[v].g;let R=O[v].map;if(V-=ye,V<0)ye=Math.max(0,O[v].g-100),g=!1;else try{V="req"+V+"_"||"";try{var X=R instanceof Map?R:Object.entries(R);for(let[L,U]of X){let K=U;a(U)&&(K=sa(U)),d.push(V+L+"="+encodeURIComponent(K))}}catch(L){throw d.push(V+"type="+encodeURIComponent("_badmap")),L}}catch{k&&k(R)}}if(g){X=d.join("&");break e}}X=void 0}return h=h.i.splice(0,w),y.G=h,X}function ed(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;z||_(),B||(z(),B=!0),T.add(y,h),h.A=0}}function Sa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=kr(l(h.Da,h),Ca(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,tl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=kr(l(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fn(10),Ys(this),tl(this))};function td(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function tl(h){h.g=new Ji(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Pr(h.na);mt(y,"RID","rpc"),mt(y,"SID",h.M),mt(y,"AID",h.K),mt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&mt(y,"TO",h.ia),mt(y,"TYPE","xmlhttp"),wi(h,y),h.u&&h.o&&op(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Yc(Pr(y)),w.u=null,w.R=!0,Gc(w,h)}n.Va=function(){this.C!=null&&(this.C=null,Ys(this),Sa(this),fn(19))};function nd(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function dp(h,y){var w=null;if(h.g==y){nd(h),td(h),h.g=null;var k=2}else if(Kc(h.h,y))w=y.G,ep(h.h,y),k=1;else return;if(h.I!=0){if(y.o)if(k==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var O=h.D;k=ca(),dn(k,new $u(k,w)),lr(h)}else ed(h);else if(O=y.m,O==3||O==0&&y.X>0||!(k==1&&d_(h,y)||k==2&&Sa(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),O){case 1:ns(h,5);break;case 4:ns(h,10);break;case 3:ns(h,6);break;default:ns(h,2)}}}function Ca(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function ns(h,y){if(h.j.info("Error code "+y),y==2){var w=l(h.bb,h),k=h.Ua;let O=!k;k=new Jr(k||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||va(k,"https"),Yc(k),O?ts(k.toString(),w):s_(k.toString(),w)}else fn(2);h.I=0,h.l&&h.l.pa(y),hp(h),lp(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function hp(h){if(h.I=0,h.ja=[],h.l){let y=tp(h.h);(y.length!=0||h.i.length!=0)&&(E(h.ja,y),E(h.ja,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.oa()}}function rd(h,y,w){var k=w instanceof Jr?Pr(w):new Jr(w);if(k.g!="")y&&(k.g=y+"."+k.g),Qc(k,k.u);else{var O=o.location;k=O.protocol,y=y?y+"."+O.hostname:O.hostname,O=+O.port;let V=new Jr(null);k&&va(V,k),y&&(V.g=y),O&&Qc(V,O),w&&(V.h=w),k=V}return w=h.G,y=h.wa,w&&y&&mt(k,w,y),mt(k,"VER",h.ka),wi(h,k),k}function id(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new gt(new bi({ab:w})):new gt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fp(){}n=fp.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Xs(){}Xs.prototype.g=function(h,y){return new Ln(h,y)};function Ln(h,y){un.call(this),this.g=new cp(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Js(this)}f(Ln,un),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){Zu(this.g)},Ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=sa(h),h=w);y.i.push(new Zy(y.Ya++,h)),y.I==3&&lr(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,Ln.Z.N.call(this)};function pp(h){zu.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(let w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}f(pp,zu);function rs(){zc.call(this),this.status=1}f(rs,zc);function Js(h){this.g=h}f(Js,fp),Js.prototype.ra=function(){dn(this.g,"a")},Js.prototype.qa=function(h){dn(this.g,new pp(h))},Js.prototype.pa=function(h){dn(this.g,new rs)},Js.prototype.oa=function(){dn(this.g,"b")},Xs.prototype.createWebChannel=Xs.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,RR=Mo.createWebChannelTransport=function(){return new Xs},xR=Mo.getStatEventTarget=function(){return ca()},AR=Mo.Event=Ks,fE=Mo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,fg=Mo.ErrorCode=$c,ha.COMPLETE="complete",DR=Mo.EventType=ha,oa.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",un.prototype.listen=un.prototype.J,vh=Mo.WebChannel=oa,Lae=Mo.FetchXmlHttpFactory=bi,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,CR=Mo.XhrIo=gt}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var M4="@firebase/firestore",N4="4.9.2";var Wn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");var Hh="12.3.0";var uu=new oc("@firebase/firestore");function bh(){return uu.logLevel}function ie(n,...e){if(uu.logLevel<=je.DEBUG){let t=e.map(mP);uu.debug(`Firestore (${Hh}): ${n}`,...t)}}function Lo(n,...e){if(uu.logLevel<=je.ERROR){let t=e.map(mP);uu.error(`Firestore (${Hh}): ${n}`,...t)}}function bg(n,...e){if(uu.logLevel<=je.WARN){let t=e.map(mP);uu.warn(`Firestore (${Hh}): ${n}`,...t)}}function mP(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,E$(n,r,t)}function E$(n,e,t){let r=`FIRESTORE (${Hh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Lo(r),new Error(r)}function Vt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||E$(e,i,r)}function Qe(n,e){return n}var Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},le=class extends ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dc=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var VR=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},UR=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wn.UNAUTHENTICATED))}shutdown(){}};var jR=class{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Vt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new dc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dc,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dc)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new VR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}},BR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},zR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new BR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$R=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Do(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Vt(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Fae(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var bE=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Fae(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function qe(n,e){return n<e?-1:n>e?1:0}function HR(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return kR(i)===kR(s)?qe(i,s):kR(i)?1:-1}return qe(n.length,e.length)}var Vae=55296,Uae=57343;function kR(n){let e=n.charCodeAt(0);return e>=Vae&&e<=Uae}function Ph(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var O4="__name__",wE=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return qe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):HR(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}},yn=class n extends wE{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},jae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qi=class n extends wE{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return jae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O4}static keyField(){return new n([O4])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ve=class n{constructor(e){this.path=e}static fromPath(e){return new n(yn.fromString(e))}static fromName(e){return new n(yn.fromString(e).popFirst(5))}static empty(){return new n(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new yn(e.slice()))}};function Bae(n,e,t,r){if(e===!0&&r===!0)throw new le(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zae(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $ae(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function PR(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$ae(n);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ng(n,e){if(!zae(n))throw new le(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new le(Z.INVALID_ARGUMENT,t);return!0}var L4=-62135596800,F4=1e6,or=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*F4);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L4)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F4}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ng(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-L4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};or._jsonSchemaVersion="firestore/timestamp/1.0",or._jsonSchema={type:rn("string",or._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};var Ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new or(0,0))}static max(){return new n(new or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wg=-1,qR=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};qR.UNKNOWN_ID=-1;function Hae(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new or(t+1,0):new or(t,r));return new du(i,ve.empty(),e)}function qae(n){return new du(n.readTime,n.key,wg)}var du=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ae.min(),ve.empty(),wg)}static max(){return new n(Ae.max(),ve.empty(),wg)}};function Wae(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}var Gae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",WR=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function GE(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==Gae)throw n;ie("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Kae(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qh(n){return n.name==="IndexedDbTransactionError"}var gP=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Qae=-1;function KE(n){return n==null}function EE(n){return n===0&&1/n==-1/0}var I$="";function Yae(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=V4(e)),e=Xae(n.get(t),e);return V4(e)}function Xae(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case I$:t+="";break;default:t+=s}}return t}function V4(n){return n+I$+""}var Jae="remoteDocuments",T$="owner";var S$="mutationQueues";var C$="mutations";var D$="documentMutations",Zae="remoteDocumentsV14";var A$="remoteDocumentGlobal";var x$="targets";var R$="targetDocuments";var k$="targetGlobal",P$="collectionParents";var M$="clientMetadata";var N$="bundles";var O$="namedQueries";var ece="indexConfiguration";var tce="indexState";var nce="indexEntries";var L$="documentOverlays";var rce="globals";var ice=[S$,C$,D$,Jae,x$,T$,k$,R$,M$,A$,P$,N$,O$],BUe=[...ice,L$],sce=[S$,C$,D$,Zae,x$,T$,k$,R$,M$,A$,P$,N$,O$,L$],oce=sce,ace=[...oce,ece,tce,nce];var zUe=[...ace,rce];function U4(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Og(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cce(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Kt=class n{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}},Th=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ds=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}};Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1;Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dn=class n{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},IE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var su=class n{constructor(e){this.fields=e,e.sort(qi.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dn(qi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ph(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var TE=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TE("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gn.EMPTY_BYTE_STRING=new Gn("");var lce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(Vt(!!n,39018),typeof n=="string"){let e=0,t=lce.exec(n);if(Vt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vo(n){return typeof n=="string"?Gn.fromBase64String(n):Gn.fromUint8Array(n)}var F$="server_timestamp",V$="__type__",U$="__previous_value__",j$="__local_write_time__";function yP(n){return(n?.mapValue?.fields||{})[V$]?.stringValue===F$}function QE(n){let e=n.mapValue.fields[U$];return yP(e)?QE(e):e}function Eg(n){let e=Fo(n.mapValue.fields[j$].timestampValue);return new or(e.seconds,e.nanos)}var GR=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},KR="(default)",SE=class n{constructor(e,t){this.projectId=e,this.database=t||KR}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===KR}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var B$="__type__",z$="__max__",pE={mapValue:{fields:{__type__:{stringValue:z$}}}},$$="__vector__",Ig="value";function hc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yP(n)?4:q$(n)?9007199254740991:H$(n)?10:11:Ee(28295,{value:n})}function xs(n,e){if(n===e)return!0;let t=hc(n);if(t!==hc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eg(n).isEqual(Eg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Fo(i.timestampValue),a=Fo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Vo(i.bytesValue).isEqual(Vo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return kt(i.geoPointValue.latitude)===kt(s.geoPointValue.latitude)&&kt(i.geoPointValue.longitude)===kt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return kt(i.integerValue)===kt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=kt(i.doubleValue),a=kt(s.doubleValue);return o===a?EE(o)===EE(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Ph(n.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(U4(o)!==U4(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xs(o[c],a[c])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Tg(n,e){return(n.values||[]).find(t=>xs(t,e))!==void 0}function Mh(n,e){if(n===e)return 0;let t=hc(n),r=hc(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=kt(s.integerValue||s.doubleValue),c=kt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return j4(n.timestampValue,e.timestampValue);case 4:return j4(Eg(n),Eg(e));case 5:return HR(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Vo(s),c=Vo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=qe(a[l],c[l]);if(u!==0)return u}return qe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=qe(kt(s.latitude),kt(o.latitude));return a!==0?a:qe(kt(s.longitude),kt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return B4(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[Ig]?.arrayValue,u=c[Ig]?.arrayValue,f=qe(l?.values?.length||0,u?.values?.length||0);return f!==0?f:B4(l,u)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===pE.mapValue&&o===pE.mapValue)return 0;if(s===pE.mapValue)return 1;if(o===pE.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){let p=HR(c[f],u[f]);if(p!==0)return p;let m=Mh(a[c[f]],l[u[f]]);if(m!==0)return m}return qe(c.length,u.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function j4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);let t=Fo(n),r=Fo(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function B4(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Mh(t[i],r[i]);if(s)return s}return qe(t.length,r.length)}function Nh(n){return QR(n)}function QR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Fo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Vo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=QR(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${QR(t.fields[o])}`;return i+"}"})(n.mapValue):Ee(61005,{value:n})}function yE(n){switch(hc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=QE(n);return e?16+yE(e):16;case 5:return 2*n.stringValue.length;case 6:return Vo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+yE(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Og(r.fields,(s,o)=>{i+=s.length+yE(o)}),i})(n.mapValue);default:throw Ee(13486,{value:n})}}function YR(n){return!!n&&"integerValue"in n}function _P(n){return!!n&&"arrayValue"in n}function z4(n){return!!n&&"nullValue"in n}function $4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function MR(n){return!!n&&"mapValue"in n}function H$(n){return(n?.mapValue?.fields||{})[B$]?.stringValue===$$}function mg(n){if(n.geoPointValue)return{geoPointValue:H({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:H({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Og(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mg(n.arrayValue.values[t]);return e}return H({},n)}function q$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===z$}var HUe={mapValue:{fields:{[B$]:{stringValue:$$},[Ig]:{arrayValue:{}}}}};var No=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!MR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mg(t)}setAll(e){let t=qi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=mg(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());MR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];MR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Og(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(mg(this.value))}};var Wi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ae.min(),Ae.min(),Ae.min(),No.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ae.min(),Ae.min(),No.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ae.min(),Ae.min(),No.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=No.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=No.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Oh=class{constructor(e,t){this.position=e,this.inclusive=t}};function H4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),t.key):r=Mh(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function q4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xs(n.position[t],e.position[t]))return!1;return!0}var Lh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function uce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var CE=class{},_n=class n extends CE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JR(e,t,r):t==="array-contains"?new tk(e,r):t==="in"?new nk(e,r):t==="not-in"?new rk(e,r):t==="array-contains-any"?new ik(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ZR(e,r):new ek(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mh(t,this.value)):t!==null&&hc(this.value)===hc(t)&&this.matchesComparison(Mh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rs=class n extends CE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return W$(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function W$(n){return n.op==="and"}function G$(n){return dce(n)&&W$(n)}function dce(n){for(let e of n.filters)if(e instanceof Rs)return!1;return!0}function XR(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Nh(n.value);if(G$(n))return n.filters.map(e=>XR(e)).join(",");{let e=n.filters.map(t=>XR(t)).join(",");return`${n.op}(${e})`}}function K$(n,e){return n instanceof _n?(function(r,i){return i instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&xs(r.value,i.value)})(n,e):n instanceof Rs?(function(r,i){return i instanceof Rs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&K$(o,i.filters[a]),!0):!1})(n,e):void Ee(19439)}function Q$(n){return n instanceof _n?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nh(t.value)}`})(n):n instanceof Rs?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q$).join(" ,")+"}"})(n):"Filter"}var JR=class extends _n{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){let t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}},ZR=class extends _n{constructor(e,t){super(e,"in",t),this.keys=Y$("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ek=class extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Y$("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Y$(n,e){return(e.arrayValue?.values||[]).map(t=>ve.fromName(t.referenceValue))}var tk=class extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _P(t)&&Tg(t.arrayValue,this.value)}},nk=class extends _n{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tg(this.value.arrayValue,t)}},rk=class extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tg(this.value.arrayValue,t)}},ik=class extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_P(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tg(this.value.arrayValue,r))}};var sk=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function W4(n,e=null,t=[],r=[],i=null,s=null,o=null){return new sk(n,e,t,r,i,s,o)}function vP(n){let e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>XR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),KE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nh(r)).join(",")),e.Te=t}return e.Te}function bP(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!K$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!q4(n.startAt,e.startAt)&&q4(n.endAt,e.endAt)}function ok(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fh=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function hce(n,e,t,r,i,s,o,a){return new Fh(n,e,t,r,i,s,o,a)}function wP(n){return new Fh(n)}function G4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fce(n){return n.collectionGroup!==null}function gg(n){let e=Qe(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dn(qi.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Lh(s,r))}),t.has(qi.keyField().canonicalString())||e.Ie.push(new Lh(qi.keyField(),r))}return e.Ie}function As(n){let e=Qe(n);return e.Ee||(e.Ee=pce(e,gg(n))),e.Ee}function pce(n,e){if(n.limitType==="F")return W4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Lh(i.field,s)});let t=n.endAt?new Oh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Oh(n.startAt.position,n.startAt.inclusive):null;return W4(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ak(n,e,t){return new Fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function YE(n,e){return bP(As(n),As(e))&&n.limitType===e.limitType}function X$(n){return`${vP(As(n))}|lt:${n.limitType}`}function wh(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Q$(i)).join(", ")}]`),KE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Nh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Nh(i)).join(",")),`Target(${r})`})(As(n))}; limitType=${n.limitType})`}function XE(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of gg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=H4(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,gg(r),i)||r.endAt&&!(function(o,a,c){let l=H4(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,gg(r),i))})(n,e)}function mce(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J$(n){return(e,t)=>{let r=!1;for(let i of gg(n)){let s=gce(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gce(n,e,t){let r=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Mh(c,l):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}var Uo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Og(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return cce(this.inner)}size(){return this.innerSize}};var yce=new Kt(ve.comparator);function fc(){return yce}var Z$=new Kt(ve.comparator);function pg(...n){let e=Z$;for(let t of n)e=e.insert(t.key,t);return e}function _ce(n){let e=Z$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ou(){return yg()}function eH(){return yg()}function yg(){return new Uo(n=>n.toString(),(n,e)=>n.isEqual(e))}var qUe=new Kt(ve.comparator),vce=new Dn(ve.comparator);function Ze(...n){let e=vce;for(let t of n)e=e.add(t);return e}var bce=new Dn(qe);function wce(){return bce}function Ece(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:EE(e)?"-0":e}}function Ice(n){return{integerValue:""+n}}var Vh=class{constructor(){this._=void 0}};function Tce(n,e,t){return n instanceof Sg?(function(i,s){let o={fields:{[V$]:{stringValue:F$},[j$]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yP(s)&&(s=QE(s)),s&&(o.fields[U$]=s),{mapValue:o}})(t,e):n instanceof Uh?tH(n,e):n instanceof jh?nH(n,e):(function(i,s){let o=Cce(i,s),a=K4(o)+K4(i.Ae);return YR(o)&&YR(i.Ae)?Ice(a):Ece(i.serializer,a)})(n,e)}function Sce(n,e,t){return n instanceof Uh?tH(n,e):n instanceof jh?nH(n,e):t}function Cce(n,e){return n instanceof Cg?(function(r){return YR(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Sg=class extends Vh{},Uh=class extends Vh{constructor(e){super(),this.elements=e}};function tH(n,e){let t=rH(e);for(let r of n.elements)t.some(i=>xs(i,r))||t.push(r);return{arrayValue:{values:t}}}var jh=class extends Vh{constructor(e){super(),this.elements=e}};function nH(n,e){let t=rH(e);for(let r of n.elements)t=t.filter(i=>!xs(i,r));return{arrayValue:{values:t}}}var Cg=class extends Vh{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function K4(n){return kt(n.integerValue||n.doubleValue)}function rH(n){return _P(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Dce(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Uh&&i instanceof Uh||r instanceof jh&&i instanceof jh?Ph(r.elements,i.elements,xs):r instanceof Cg&&i instanceof Cg?xs(r.Ae,i.Ae):r instanceof Sg&&i instanceof Sg})(n.transform,e.transform)}var _g=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _E(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Dg=class{};function iH(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ck(n.key,_g.none()):new Ag(n.key,n.data,_g.none());{let t=n.data,r=No.empty(),i=new Dn(qi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bh(n.key,r,new su(i.toArray()),_g.none())}}function Ace(n,e,t){n instanceof Ag?(function(i,s,o){let a=i.value.clone(),c=Y4(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Bh?(function(i,s,o){if(!_E(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Y4(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(sH(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function vg(n,e,t,r){return n instanceof Ag?(function(s,o,a,c){if(!_E(s.precondition,o))return a;let l=s.value.clone(),u=X4(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bh?(function(s,o,a,c){if(!_E(s.precondition,o))return a;let l=X4(s.fieldTransforms,c,o),u=o.data;return u.setAll(sH(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return _E(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Q4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ph(r,i,(s,o)=>Dce(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ag=class extends Dg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bh=class extends Dg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function sH(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Y4(n,e,t){let r=new Map;Vt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Sce(o,a,t[i]))}return r}function X4(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Tce(s,o,e))}return r}var ck=class extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var lk=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Ace(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=vg(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=vg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eH();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=iH(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Ph(this.mutations,e.mutations,(t,r)=>Q4(t,r))&&Ph(this.baseMutations,e.baseMutations,(t,r)=>Q4(t,r))}};var uk=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dk=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,Ke;function oH(n){if(n===void 0)return Lo("GRPC error has no .code"),Z.UNKNOWN;switch(n){case tn.OK:return Z.OK;case tn.CANCELLED:return Z.CANCELLED;case tn.UNKNOWN:return Z.UNKNOWN;case tn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case tn.INTERNAL:return Z.INTERNAL;case tn.UNAVAILABLE:return Z.UNAVAILABLE;case tn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case tn.NOT_FOUND:return Z.NOT_FOUND;case tn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case tn.ABORTED:return Z.ABORTED;case tn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case tn.DATA_LOSS:return Z.DATA_LOSS;default:return Ee(39323,{code:n})}}(Ke=tn||(tn={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var xce=null;function Rce(){return new TextEncoder}var kce=new Po([4294967295,4294967295],0);function J4(n){let e=Rce().encode(n),t=new SR;return t.update(e),new Uint8Array(t.digest())}function Z4(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,s],0)]}var hk=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(r<0)throw new au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Po.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare(kce)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=J4(e),[r,i]=Z4(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=J4(e),[r,i]=Z4(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},au=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var DE=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ae.min(),i,new Kt(qe),fc(),Ze())}},xg=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ze(),Ze(),Ze())}};var Sh=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},AE=class{constructor(e,t){this.targetId=e,this.Ce=t}},xE=class{constructor(e,t,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},RE=class{constructor(){this.ve=0,this.Fe=e$(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),r=Ze();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee(38017,{changeType:s})}}),new xg(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=e$()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},fk=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=fc(),this.Je=mE(),this.He=mE(),this.Ye=new Kt(qe)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(ok(s))if(r===0){let o=new ve(s.path);this.et(t,o,Wi.newNoDocument(o,Ae.min()))}else Vt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}xce?.lt((function(u,f,p,m,E){let C={localCacheCount:u,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},S=f.unchangedNames;return S&&(C.bloomFilter={applied:E===0,hashCount:S?.hashCount??0,bitmapLength:S?.bits?.bitmap?.length??0,padding:S?.bits?.padding??0,mightContain:P=>m?.mightContain(P)??!1}),C})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Vo(r).toUint8Array()}catch(c){if(c instanceof TE)return bg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new hk(o,i,s)}catch(c){return bg(c instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&ok(a.target)){let c=new ve(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Wi.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Ze();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new DE(e,t,this.Ye,this.je,r);return this.je=fc(),this.Je=mE(),this.He=mE(),this.Ye=new Kt(qe),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new RE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Dn(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Dn(qe),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new RE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function mE(){return new Kt(ve.comparator)}function e$(){return new Kt(ve.comparator)}var Pce={asc:"ASCENDING",desc:"DESCENDING"},Mce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nce={and:"AND",or:"OR"},pk=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mk(n,e){return n.useProto3Json||KE(e)?e:{value:e}}function Oce(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lce(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ch(n){return Vt(!!n,49232),Ae.fromTimestamp((function(t){let r=Fo(t);return new or(r.seconds,r.nanos)})(n))}function Fce(n,e){return gk(n,e).canonicalString()}function gk(n,e){let t=(function(i){return new yn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aH(n){let e=yn.fromString(n);return Vt(hH(e),10190,{key:e.toString()}),e}function NR(n,e){let t=aH(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(lH(t))}function cH(n,e){return Fce(n.databaseId,e)}function Vce(n){let e=aH(n);return e.length===4?yn.emptyPath():lH(e)}function t$(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lH(n){return Vt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Uce(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Ee(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Vt(u===void 0||typeof u=="string",58123),Gn.fromBase64String(u||"")):(Vt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Gn.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?Z.UNKNOWN:oH(l.code);return new le(u,l.message||"")})(o);t=new xE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=NR(n,r.document.name),s=Ch(r.document.updateTime),o=r.document.createTime?Ch(r.document.createTime):Ae.min(),a=new No({mapValue:{fields:r.document.fields}}),c=Wi.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Sh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=NR(n,r.document),s=r.readTime?Ch(r.readTime):Ae.min(),o=Wi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Sh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=NR(n,r.document),s=r.removedTargetIds||[];t=new Sh([],s,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new dk(i,s),a=r.targetId;t=new AE(a,o)}}return t}function jce(n,e){return{documents:[cH(n,e.path)]}}function Bce(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cH(n,i);let s=(function(l){if(l.length!==0)return dH(Rs.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(p){return{field:Eh(p.field),direction:Hce(p.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=mk(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function zce(n){let e=Vce(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Vt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(f){let p=uH(f);return p instanceof Rs&&G$(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(p=>(function(E){return new Lh(Ih(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,KE(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(f){let p=!!f.before,m=f.values||[];return new Oh(m,p)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let p=!f.before,m=f.values||[];return new Oh(m,p)})(t.endAt)),hce(e,i,o,s,a,"F",c,l)}function $ce(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uH(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ih(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ih(t.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ih(t.unaryFilter.field);return _n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ih(t.unaryFilter.field);return _n.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _n.create(Ih(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Rs.create(t.compositeFilter.filters.map(r=>uH(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function Hce(n){return Pce[n]}function qce(n){return Mce[n]}function Wce(n){return Nce[n]}function Eh(n){return{fieldPath:n.canonicalString()}}function Ih(n){return qi.fromServerFormat(n.fieldPath)}function dH(n){return n instanceof _n?(function(t){if(t.op==="=="){if($4(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NAN"}};if(z4(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($4(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NOT_NAN"}};if(z4(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(t.field),op:qce(t.op),value:t.value}}})(n):n instanceof Rs?(function(t){let r=t.getFilters().map(i=>dH(i));return r.length===1?r[0]:{compositeFilter:{op:Wce(t.op),filters:r}}})(n):Ee(54877,{filter:n})}function hH(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rg=class n{constructor(e,t,r,i,s=Ae.min(),o=Ae.min(),a=Gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yk=class{constructor(e){this.yt=e}};function Gce(n){let e=zce({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ak(e,e.limit,"L"):e}var kE=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(kt(e.integerValue));else if("doubleValue"in e){let r=kt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),EE(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Fo(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Vo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?q$(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):H$(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ig,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(kt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ve.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};kE.Kt=new kE;var _k=class{constructor(){this.Cn=new vk}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(du.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(du.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},vk=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(yn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(yn.comparator)).toArray()}};var WUe=new Uint8Array(0);var n$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fH=41943040,di=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(fH,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);var kg=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var r$="LruGarbageCollector",Kce=1048576;function i$([n,e],[t,r]){let i=qe(n,t);return i===0?qe(e,r):i}var bk=class{constructor(e){this.Ir=e,this.buffer=new Dn(i$),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();i$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},wk=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(r$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qh(t)?ie(r$,"Ignoring IndexedDB error during garbage collection: ",t):await GE(t)}await this.Vr(3e5)})}},Ek=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(gP.ce);let r=new bk(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(n$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n$):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),bh()<=je.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function Qce(n,e){return new Ek(n,e)}var Ik=class{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tk=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sk=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&vg(r.mutation,i,su.empty(),or.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ze()){let i=ou();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=pg();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ou();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=fc(),o=yg(),a=(function(){return yg()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Bh)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),vg(u.mutation,l,u.mutation.getFieldMask(),or.now())):o.set(l.key,su.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>a.set(l,new Tk(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=yg(),i=new Kt((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||su.empty();u=a.applyToLocalView(l,u),r.set(c,u);let f=(i.get(a.batchId)||Ze()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,f=eH();u.forEach(p=>{if(!s.has(p)){let m=iH(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fce(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(ou()),a=wg,c=s;return o.next(l=>G.forEach(l,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ze())).next(u=>({batchId:a,changes:_ce(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let i=pg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=pg();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let l=(function(f,p){return new Fh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Wi.newInvalidDocument(u)))});let a=pg();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&vg(u.mutation,l,su.empty(),or.now()),XE(t,l)&&(a=a.insert(c,l))}),a})}};var Ck=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ch(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Gce(i.bundledQuery),readTime:Ch(i.readTime)}})(t)),G.resolve()}};var Dk=class{constructor(){this.overlays=new Kt(ve.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ou();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=ou(),s=t.length+1,o=new ve(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kt((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=ou(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=ou(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uk(t,r));let s=this.qr.get(t);s===void 0&&(s=Ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var Ak=class{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Pg=class{constructor(){this.Qr=new Dn(nn.$r),this.Ur=new Dn(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new nn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new nn(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ve(new yn([])),r=new nn(t,e),i=new nn(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ve(new yn([])),r=new nn(t,e),i=new nn(t,e+1),s=Ze();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},nn=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}};var xk=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Dn(nn.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lk(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new nn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Qae:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new nn(t,0),i=new nn(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(qe);return t.forEach(i=>{let s=new nn(i,0),o=new nn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ve.isDocumentKey(s)||(s=s.child(""));let o=new nn(new ve(s),0),a=new Dn(qe);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Vt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new nn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new nn(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Rk=class{constructor(e){this.ri=e,this.docs=(function(){return new Kt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Wi.newInvalidDocument(t))}getEntries(e,t){let r=fc();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wi.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=fc(),o=t.path,a=new ve(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Wae(qae(u),r)<=0||(i.has(u.key)||XE(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ee(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kk(this)}getSize(e){return G.resolve(this.size)}},kk=class extends Ik{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Pk=class{constructor(e){this.persistence=e,this.si=new Uo(t=>vP(t),bP),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=kg.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new kg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var PE=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new gP(0),this.li=!1,this.li=!0,this.hi=new Ak,this.referenceDelegate=e(this),this.Pi=new Pk(this),this.indexManager=new _k,this.remoteDocumentCache=(function(i){return new Rk(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new yk(t),this.Ii=new Ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new xk(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new Mk(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Mk=class extends WR{constructor(e){super(),this.currentSequenceNumber=e}},Nk=class n{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=ve.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Ae.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},ME=class n{constructor(e,t){this.persistence=e,this.pi=new Uo(r=>Yae(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Qce(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yE(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ok=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ze(),i=Ze();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Lk=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fk=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cz()?8:Kae(Gr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Lk;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(bh()<=je.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",wh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(bh()<=je.DEBUG&&ie("QueryEngine","Query:",wh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(bh()<=je.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",wh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,As(t))):G.resolve())}ys(e,t){if(G4(t))return G.resolve(null);let r=As(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ak(t,null,"F"),r=As(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ze(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,ak(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return G4(t)||i.isEqual(Ae.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(bh()<=je.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wh(t)),this.vs(e,o,t,Hae(i,wg)).next(a=>a))})}Ds(e,t){let r=new Dn(J$(e));return t.forEach((i,s)=>{XE(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return bh()<=je.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",wh(t)),this.ps.getDocumentsMatchingQuery(e,t,du.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var EP="LocalStore",Yce=3e8,Vk=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Kt(qe),this.xs=new Uo(s=>vP(s),bP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Xce(n,e,t,r){return new Vk(n,e,t,r)}async function pH(n,e){let t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ze();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function mH(n){let e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Jce(n,e){let t=Qe(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((u,f)=>{let p=i.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Gn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),(function(C,S,P){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Yce?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(p,m,u)&&a.push(t.Pi.updateTargetData(s,m))});let c=fc(),l=Ze();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Zce(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(Ae.min())){let u=t.Pi.getLastRemoteSnapshotVersion(s).next(f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=i,s))}function Zce(n,e,t){let r=Ze(),i=Ze();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=fc();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(EP,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function ele(n,e){let t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Rg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Uk(n,e,t){let r=Qe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!qh(o))throw o;ie(EP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function s$(n,e,t){let r=Qe(n),i=Ae.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let f=Qe(c),p=f.xs.get(u);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(l,u)})(r,o,As(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Ae.min(),t?s:Ze())).next(a=>(tle(r,mce(e),a),{documents:a,Qs:s})))}function tle(n,e,t){let r=n.Os.get(e)||Ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var NE=class{constructor(){this.activeTargetIds=wce()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var jk=class{constructor(){this.Mo=new NE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Bk=class{Oo(e){}shutdown(){}};var o$="ConnectivityMonitor",OE=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(o$,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ie(o$,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gE=null;function zk(){return gE===null?gE=(function(){return 268435456+Math.round(2147483648*Math.random())})():gE++,"0x"+gE.toString(16)}var OR="RestConnection",nle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},$k=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===KR?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=zk(),a=this.zo(e,t.toUriEncodedString());ie(OR,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:l}=new URL(a),u=Jm(l);return this.Jo(e,a,c,r,u).then(f=>(ie(OR,`Received RPC '${e}' ${o}: `,f),f),f=>{throw bg(OR,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=nle[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Hk=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var qn="WebChannelConnection",qk=class extends $k{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=zk();return new Promise((a,c)=>{let l=new CR;l.setWithCredentials(!0),l.listenOnce(DR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fg.NO_ERROR:let f=l.getResponseJson();ie(qn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case fg.TIMEOUT:ie(qn,`RPC '${e}' ${o} timed out`),c(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case fg.HTTP_ERROR:let p=l.getStatus();if(ie(qn,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let E=m?.error;if(E&&E.status&&E.message){let C=(function(P){let M=P.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(M)>=0?M:Z.UNKNOWN})(E.status);c(new le(C,E.message))}else c(new le(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new le(Z.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ie(qn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ie(qn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}T_(e,t,r){let i=zk(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RR(),a=xR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");ie(qn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=o.createWebChannel(u,c);this.I_(f);let p=!1,m=!1,E=new Hk({Yo:S=>{m?ie(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(ie(qn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ie(qn,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Zo:()=>f.close()}),C=(S,P,M)=>{S.listen(P,F=>{try{M(F)}catch(j){setTimeout(()=>{throw j},0)}})};return C(f,vh.EventType.OPEN,()=>{m||(ie(qn,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),C(f,vh.EventType.CLOSE,()=>{m||(m=!0,ie(qn,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(f))}),C(f,vh.EventType.ERROR,S=>{m||(m=!0,bg(qn,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new le(Z.UNAVAILABLE,"The operation could not be completed")))}),C(f,vh.EventType.MESSAGE,S=>{if(!m){let P=S.data[0];Vt(!!P,16349);let M=P,F=M?.error||M[0]?.error;if(F){ie(qn,`RPC '${e}' stream ${i} received error:`,F);let j=F.status,z=(function(_){let b=tn[_];if(b!==void 0)return oH(b)})(j),B=F.message;z===void 0&&(z=Z.INTERNAL,B="Unknown error status: "+j+" with message "+F.message),m=!0,E.a_(new le(z,B)),f.close()}else ie(qn,`RPC '${e}' stream ${i} received:`,P),E.u_(P)}}),C(a,AR.STAT_EVENT,S=>{S.stat===fE.PROXY?ie(qn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===fE.NOPROXY&&ie(qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function LR(){return typeof document<"u"?document:null}function gH(n){return new pk(n,!0)}var LE=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var a$="PersistentStream",Wk=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Lo(t.toString()),Lo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new le(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(a$,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ie(a$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gk=class extends Wk{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Uce(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?Ch(o.readTime):Ae.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=t$(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=ok(c)?{documents:jce(s,c)}:{query:Bce(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Lce(s,o.resumeToken);let l=mk(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=Oce(s,o.snapshotVersion.toTimestamp());let l=mk(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=$ce(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=t$(this.serializer),t.removeTarget=e,this.q_(t)}};var Kk=class{},Qk=class extends Kk{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,gk(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le(Z.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,gk(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Yk=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lo(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var zh="RemoteStore",Xk=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fg(this)&&(ie(zh,"Restarting streams for network reachability change."),await(async function(c){let l=Qe(c);l.Ea.add(4),await Lg(l),l.Ra.set("Unknown"),l.Ea.delete(4),await JE(l)})(this))})}),this.Ra=new Yk(r,i)}};async function JE(n){if(Fg(n))for(let e of n.da)await e(!0)}async function Lg(n){for(let e of n.da)await e(!1)}function yH(n,e){let t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),CP(t)?SP(t):Wh(t).O_()&&TP(t,e))}function IP(n,e){let t=Qe(n),r=Wh(t);t.Ia.delete(e),r.O_()&&_H(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fg(t)&&t.Ra.set("Unknown"))}function TP(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wh(n).Y_(e)}function _H(n,e){n.Va.Ue(e),Wh(n).Z_(e)}function SP(n){n.Va=new fk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wh(n).start(),n.Ra.ua()}function CP(n){return Fg(n)&&!Wh(n).x_()&&n.Ia.size>0}function Fg(n){return Qe(n).Ea.size===0}function vH(n){n.Va=void 0}async function rle(n){n.Ra.set("Online")}async function ile(n){n.Ia.forEach((e,t)=>{TP(n,e)})}async function sle(n,e){vH(n),CP(n)?(n.Ra.ha(e),SP(n)):n.Ra.set("Unknown")}async function ole(n,e,t){if(n.Ra.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ie(zh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await c$(n,r)}else if(e instanceof Sh?n.Va.Ze(e):e instanceof AE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ae.min()))try{let r=await mH(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(Gn.EMPTY_BYTE_STRING,u.snapshotVersion)),_H(s,c);let f=new Rg(u.target,c,l,u.sequenceNumber);TP(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ie(zh,"Failed to raise snapshot:",r),await c$(n,r)}}async function c$(n,e,t){if(!qh(e))throw e;n.Ea.add(1),await Lg(n),n.Ra.set("Offline"),t||(t=()=>mH(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie(zh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await JE(n)})}async function l$(n,e){let t=Qe(n);t.asyncQueue.verifyOperationInProgress(),ie(zh,"RemoteStore received new credentials");let r=Fg(t);t.Ea.add(3),await Lg(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await JE(t)}async function ale(n,e){let t=Qe(n);e?(t.Ea.delete(2),await JE(t)):e||(t.Ea.add(2),await Lg(t),t.Ra.set("Unknown"))}function Wh(n){return n.ma||(n.ma=(function(t,r,i){let s=Qe(t);return s.sa(),new Gk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:rle.bind(null,n),t_:ile.bind(null,n),r_:sle.bind(null,n),H_:ole.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),CP(n)?SP(n):n.Ra.set("Unknown")):(await n.ma.stop(),vH(n))})),n.ma}var Jk=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bH(n,e){if(Lo("AsyncQueue",`${e}: ${n}`),qh(n))return new le(Z.UNAVAILABLE,`${e}: ${n}`);throw n}var FE=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=pg(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var VE=class{constructor(){this.ga=new Kt(ve.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},$h=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,FE.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&YE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Zk=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},eP=class{constructor(){this.queries=u$(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Qe(t),s=i.queries;i.queries=u$(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new le(Z.ABORTED,"Firestore shutting down"))}};function u$(){return new Uo(n=>X$(n),YE)}async function cle(n,e){let t=Qe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Zk,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=bH(o,`Initialization of query '${wh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&DP(t)}async function lle(n,e){let t=Qe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ule(n,e){let t=Qe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&DP(t)}function dle(n,e,t){let r=Qe(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function DP(n){n.Ca.forEach(e=>{e.next()})}var tP,d$;(d$=tP||(tP={})).Ma="default",d$.Cache="cache";var nP=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $h(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tP.Cache}};var UE=class{constructor(e){this.key=e}},jE=class{constructor(e){this.key=e}},rP=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=J$(e),this.tu=new FE(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new VE,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{let p=i.get(u),m=XE(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),C=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),S=!1;p&&m?p.data.isEqual(m.data)?E!==C&&(r.track({type:3,doc:m}),S=!0):this.su(p,m)||(r.track({type:2,doc:m}),S=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(c||l)&&(a=!0)),S&&(m?(o=o.add(m),s=C?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((u,f)=>(function(m,E){let C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:S})}};return C(m)-C(E)})(u.type,f.type)||this.eu(u.doc,f.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new $h(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Ze(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new jE(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new UE(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $h.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},AP="SyncEngine",iP=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sP=class{constructor(e){this.key=e,this.hu=!1}},oP=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Uo(a=>X$(a),YE),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(ve.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=kg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function hle(n,e,t=!0){let r=SH(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await wH(r,e,t,!0),i}async function fle(n,e){let t=SH(n);await wH(t,e,!0,!1)}async function wH(n,e,t,r){let i=await ele(n.localStore,As(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await ple(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&yH(n.remoteStore,i),a}async function ple(n,e,t,r,i){n.pu=(f,p,m)=>(async function(C,S,P,M){let F=S.view.ru(P);F.Cs&&(F=await s$(C.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,F)));let j=M&&M.targetChanges.get(S.targetId),z=M&&M.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(F,C.isPrimaryClient,j,z);return f$(C,S.targetId,B.au),B.snapshot})(n,f,p,m);let s=await s$(n.localStore,e,!0),o=new rP(e,s.Qs),a=o.ru(s.documents),c=xg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);f$(n,t,l.au);let u=new iP(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function mle(n,e,t){let r=Qe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!YE(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uk(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&IP(r.remoteStore,i.targetId),aP(r,i.targetId)}).catch(GE)):(aP(r,i.targetId),await Uk(r.localStore,i.targetId,!0))}async function gle(n,e){let t=Qe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),IP(t.remoteStore,r.targetId))}async function EH(n,e){let t=Qe(n);try{let r=await Jce(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Vt(o.hu,14607):i.removedDocuments.size>0&&(Vt(o.hu,42227),o.hu=!1))}),await TH(t,r,e)}catch(r){await GE(r)}}function h$(n,e,t){let r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Qe(o);c.onlineState=a;let l=!1;c.queries.forEach((u,f)=>{for(let p of f.Sa)p.va(a)&&(l=!0)}),l&&DP(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yle(n,e,t){let r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Kt(ve.comparator);o=o.insert(s,Wi.newNoDocument(s,Ae.min()));let a=Ze().add(s),c=new DE(Ae.min(),new Map,new Kt(qe),o,a);await EH(r,c),r.du=r.du.remove(s),r.Au.delete(e),xP(r)}else await Uk(r.localStore,e,!1).then(()=>aP(r,e,t)).catch(GE)}function aP(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||IH(n,r)})}function IH(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(IP(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),xP(n))}function f$(n,e,t){for(let r of t)r instanceof UE?(n.Ru.addReference(r.key,e),_le(n,r)):r instanceof jE?(ie(AP,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||IH(n,r.key)):Ee(19791,{wu:r})}function _le(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(AP,"New document in limbo: "+t),n.Eu.add(r),xP(n))}function xP(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ve(yn.fromString(e)),r=n.fu.next();n.Au.set(r,new sP(t)),n.du=n.du.insert(t,r),yH(n.remoteStore,new Rg(As(wP(t.path)),r,"TargetPurposeLimboResolution",gP.ce))}}async function TH(n,e,t){let r=Qe(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let u=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){i.push(l);let u=Ok.As(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,l){let u=Qe(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(l,p=>G.forEach(p.Es,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>G.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!qh(f))throw f;ie(EP,"Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let m=u.Ms.get(p),E=m.snapshotVersion,C=m.withLastLimboFreeSnapshotVersion(E);u.Ms=u.Ms.insert(p,C)}}})(r.localStore,s))}async function vle(n,e){let t=Qe(n);if(!t.currentUser.isEqual(e)){ie(AP,"User change. New user:",e.toKey());let r=await pH(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new le(Z.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await TH(t,r.Ls)}}function ble(n,e){let t=Qe(n),r=t.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let i=Ze(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function SH(n){let e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ble.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yle.bind(null,e),e.Pu.H_=ule.bind(null,e.eventManager),e.Pu.yu=dle.bind(null,e.eventManager),e}var CH=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gH(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Xce(this.persistence,new Fk,t.initialUser,this.serializer)}Cu(t){return new PE(Nk.mi,this.serializer)}Du(t){return new jk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),cP=class extends CH{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Vt(this.persistence.referenceDelegate instanceof ME,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new wk(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new PE(r=>ME.mi(r,t),this.serializer)}};var wle=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>h$(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vle.bind(null,this.syncEngine),await ale(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new eP})()}createDatastore(t){let r=gH(t.databaseInfo.databaseId),i=(function(o){return new qk(o)})(t.databaseInfo);return(function(o,a,c,l){return new Qk(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new Xk(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>h$(this.syncEngine,r,0),(function(){return OE.v()?new OE:new Bk})())}createSyncEngine(t,r){return(function(s,o,a,c,l,u,f){let p=new oP(s,o,a,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Qe(r);ie(zh,"RemoteStore shutting down."),i.Ea.add(5),await Lg(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var lP=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var pc="FirestoreClient",uP=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wn.UNAUTHENTICATED,this.clientId=bE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie(pc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(pc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bH(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function FR(n,e){n.asyncQueue.verifyOperationInProgress(),ie(pc,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pH(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function p$(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Ele(n);ie(pc,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>l$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>l$(e.remoteStore,i)),n._onlineComponents=e}async function Ele(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(pc,"Using user provided OfflineComponentProvider");try{await FR(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bg("Error using user provided cache. Falling back to memory cache: "+t),await FR(n,new CH)}}else ie(pc,"Using default OfflineComponentProvider"),await FR(n,new cP(void 0));return n._offlineComponents}async function Ile(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(pc,"Using user provided OnlineComponentProvider"),await p$(n,n._uninitializedComponentsProvider._online)):(ie(pc,"Using default OnlineComponentProvider"),await p$(n,new wle))),n._onlineComponents}async function m$(n){let e=await Ile(n),t=e.eventManager;return t.onListen=hle.bind(null,e.syncEngine),t.onUnlisten=mle.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fle.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gle.bind(null,e.syncEngine),t}function DH(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var g$=new Map;var Tle="firestore.googleapis.com",y$=!0,BE=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tle,this.ssl=y$}else this.host=e.host,this.ssl=e.ssl??y$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fH;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kce)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DH(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},dP=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new UR;switch(r.type){case"firstParty":return new zR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=g$.get(t);r&&(ie("ComponentProvider","Removing Datastore"),g$.delete(t),r.terminate())})(this),Promise.resolve()}};var zE=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Oo=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hP(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ng(t,n._jsonSchema))return new n(e,r||null,new ve(yn.fromString(t.referencePath)))}};Oo._jsonSchemaVersion="firestore/documentReference/1.0",Oo._jsonSchema={type:rn("string",Oo._jsonSchemaVersion),referencePath:rn("string")};var hP=class n extends zE{constructor(e,t,r){super(e,t,wP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oo(this.firestore,null,new ve(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var _$="AsyncQueue",$E=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LE(this,"async_queue_retry"),this._c=()=>{let r=LR();r&&ie(_$,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=LR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=LR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new dc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qh(e))throw e;ie(_$,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Lo("INTERNAL UNHANDLED ERROR: ",v$(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Jk.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:v$(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function v$(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function b$(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Mg=class extends dP{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $E,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}};function Sle(n){if(n._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cle(n),n._firestoreClient}function Cle(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new GR(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,DH(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new uP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Dh=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gn.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ng(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Dh._jsonSchemaVersion="firestore/bytes/1.0",Dh._jsonSchema={type:rn("string",Dh._jsonSchemaVersion),bytes:rn("string")};var HE=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ah=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ng(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ah._jsonSchemaVersion="firestore/geoPoint/1.0",Ah._jsonSchema={type:rn("string",Ah._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};var xh=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ng(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new le(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};xh._jsonSchemaVersion="firestore/vectorValue/1.0",xh._jsonSchema={type:rn("string",xh._jsonSchemaVersion),vectorValues:rn("object")};var Dle=new RegExp("[~\\*/\\[\\]]");function Ale(n,e,t){if(e.search(Dle)>=0)throw w$(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new HE(...e.split("."))._internalPath}catch{throw w$(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function w$(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new le(Z.INVALID_ARGUMENT,a+n+c)}var qE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(AH("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},fP=class extends qE{data(){return super.data()}};function AH(n,e){return typeof e=="string"?Ale(n,e):e instanceof HE?e._internalPath:e._delegate._internalPath}function xle(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pP=class{convertValue(e,t="none"){switch(hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Og(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Ig].arrayValue?.values?.map(r=>kt(r.doubleValue));return new xh(t)}convertGeoPoint(e){return new Ah(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=QE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eg(e));default:return null}}convertTimestamp(e){let t=Fo(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=yn.fromString(e);Vt(hH(r),9688,{name:e});let i=new SE(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(t)||Lo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var cu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},lu=class n extends qE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(AH("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};lu._jsonSchemaVersion="firestore/documentSnapshot/1.0",lu._jsonSchema={type:rn("string",lu._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};var Rh=class extends lu{data(e={}){return super.data(e)}},kh=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rh(this._firestore,this._userDataWriter,r.key,r,new cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Rh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Rh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Rle(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Rle(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}kh._jsonSchemaVersion="firestore/querySnapshot/1.0",kh._jsonSchema={type:rn("string",kh._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};var WE=class extends pP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dh(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oo(this.firestore,null,t)}};function xH(n,...e){n=sc(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||b$(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(b$(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Oo)o=PR(n.firestore,Mg),a=wP(n._key.path),s={next:c=>{e[r]&&e[r](kle(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=PR(n,zE);o=PR(c.firestore,Mg),a=c._query;let l=new WE(o);s={next:u=>{e[r]&&e[r](new kh(o,l,c,u))},error:e[r+1],complete:e[r+2]},xle(n._query)}return(function(l,u,f,p){let m=new lP(p),E=new nP(u,m,f);return l.asyncQueue.enqueueAndForget(async()=>cle(await m$(l),E)),()=>{m.Nu(),l.asyncQueue.enqueueAndForget(async()=>lle(await m$(l),E))}})(Sle(o),a,i,s)}function kle(n,e,t){let r=t.docs.get(e._key),i=new WE(n);return new lu(n,i,e._key,r,new cu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Hh=i})(gh),ac(new $i("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Mg(new jR(r.getProvider("auth-internal")),new $R(o,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new SE(l.options.projectId,u)})(o,i),o);return s=H({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),So(M4,N4,e),So(M4,N4,"esm2020")})();var ZE=function(){return ZE=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ZE.apply(this,arguments)};var Ple={includeMetadataChanges:!1};function RH(n,e){return e===void 0&&(e=Ple),new ue(function(t){var r=xH(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function kH(n){return RH(n,{includeMetadataChanges:!0})}function PH(n,e){return e===void 0&&(e={}),kH(n).pipe(de(function(t){return MH(t,e)}))}function MH(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ZE(ZE({},r),(t={},t[e.idField]=n.id,t))}var NH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},OH={};var jo,RP;(function(){var n;function e(T,_){function b(){}b.prototype=_.prototype,T.D=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(A,D,x){for(var I=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)I[Oe-2]=arguments[Oe];return _.prototype[D].apply(A,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,b){b||(b=0);var A=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)A[D]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(D=0;16>D;++D)A[D]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],D=T.g[2];var x=T.g[3],I=_+(x^b&(D^x))+A[0]+3614090360&4294967295;_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[1]+3905402710&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[2]+606105819&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[3]+3250441966&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[4]+4118548399&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[5]+1200080426&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[6]+2821735955&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[7]+4249261313&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[8]+1770035416&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[9]+2336552879&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[10]+4294925233&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[11]+2304563134&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(x^b&(D^x))+A[12]+1804603682&4294967295,_=b+(I<<7&4294967295|I>>>25),I=x+(D^_&(b^D))+A[13]+4254626195&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(b^x&(_^b))+A[14]+2792965006&4294967295,D=x+(I<<17&4294967295|I>>>15),I=b+(_^D&(x^_))+A[15]+1236535329&4294967295,b=D+(I<<22&4294967295|I>>>10),I=_+(D^x&(b^D))+A[1]+4129170786&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[6]+3225465664&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[11]+643717713&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[0]+3921069994&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[5]+3593408605&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[10]+38016083&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[15]+3634488961&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[4]+3889429448&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[9]+568446438&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[14]+3275163606&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[3]+4107603335&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[8]+1163531501&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(b^D))+A[13]+2850285829&4294967295,_=b+(I<<5&4294967295|I>>>27),I=x+(b^D&(_^b))+A[2]+4243563512&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^b&(x^_))+A[7]+1735328473&4294967295,D=x+(I<<14&4294967295|I>>>18),I=b+(x^_&(D^x))+A[12]+2368359562&4294967295,b=D+(I<<20&4294967295|I>>>12),I=_+(b^D^x)+A[5]+4294588738&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[8]+2272392833&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[11]+1839030562&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[14]+4259657740&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[1]+2763975236&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[4]+1272893353&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[7]+4139469664&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[10]+3200236656&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[13]+681279174&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[0]+3936430074&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[3]+3572445317&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[6]+76029189&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(b^D^x)+A[9]+3654602809&4294967295,_=b+(I<<4&4294967295|I>>>28),I=x+(_^b^D)+A[12]+3873151461&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^b)+A[15]+530742520&4294967295,D=x+(I<<16&4294967295|I>>>16),I=b+(D^x^_)+A[2]+3299628645&4294967295,b=D+(I<<23&4294967295|I>>>9),I=_+(D^(b|~x))+A[0]+4096336452&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[7]+1126891415&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[14]+2878612391&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[5]+4237533241&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[12]+1700485571&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[3]+2399980690&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[10]+4293915773&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[1]+2240044497&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[8]+1873313359&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[15]+4264355552&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[6]+2734768916&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[13]+1309151649&4294967295,b=D+(I<<21&4294967295|I>>>11),I=_+(D^(b|~x))+A[4]+4149444226&4294967295,_=b+(I<<6&4294967295|I>>>26),I=x+(b^(_|~D))+A[11]+3174756917&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~b))+A[2]+718787259&4294967295,D=x+(I<<15&4294967295|I>>>17),I=b+(x^(D|~_))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+x&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var b=_-this.blockSize,A=this.B,D=this.h,x=0;x<_;){if(D==0)for(;x<=b;)i(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<_;)if(A[D++]=T.charCodeAt(x++),D==this.blockSize){i(this,A),D=0;break}}else for(;x<_;)if(A[D++]=T[x++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var b=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=b&255,b/=256;for(this.u(T),T=Array(16),_=b=0;4>_;++_)for(var A=0;32>A;A+=8)T[b++]=this.g[_]>>>A&255;return T};function s(T,_){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function o(T,_){this.h=_;for(var b=[],A=!0,D=T.length-1;0<=D;D--){var x=T[D]|0;A&&x==_||(b[D]=x,A=!1)}this.g=b}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return S(l(-T));for(var _=[],b=1,A=0;T>=b;A++)_[A]=T/b|0,b*=4294967296;return new o(_,0)}function u(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(u(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(_,8)),A=f,D=0;D<T.length;D+=8){var x=Math.min(8,T.length-D),I=parseInt(T.substring(D,D+x),_);8>x?(x=l(Math.pow(_,x)),A=A.j(x).add(l(I))):(A=A.j(b),A=A.add(l(I)))}return A}var f=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(C(this))return-S(this).m();for(var T=0,_=1,b=0;b<this.g.length;b++){var A=this.i(b);T+=(0<=A?A:4294967296+A)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(C(this))return"-"+S(this).toString(T);for(var _=l(Math.pow(T,6)),b=this,A="";;){var D=j(b,_).g;b=P(b,D.j(_));var x=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=D,E(b))return x+A;for(;6>x.length;)x="0"+x;A=x+A}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function C(T){return T.h==-1}n.l=function(T){return T=P(this,T),C(T)?-1:E(T)?0:1};function S(T){for(var _=T.g.length,b=[],A=0;A<_;A++)b[A]=~T.g[A];return new o(b,~T.h).add(p)}n.abs=function(){return C(this)?S(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0,D=0;D<=_;D++){var x=A+(this.i(D)&65535)+(T.i(D)&65535),I=(x>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);A=I>>>16,x&=65535,I&=65535,b[D]=I<<16|x}return new o(b,b[b.length-1]&-2147483648?-1:0)};function P(T,_){return T.add(S(_))}n.j=function(T){if(E(this)||E(T))return f;if(C(this))return C(T)?S(this).j(S(T)):S(S(this).j(T));if(C(T))return S(this.j(S(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,b=[],A=0;A<2*_;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<T.g.length;D++){var x=this.i(A)>>>16,I=this.i(A)&65535,Oe=T.i(D)>>>16,ke=T.i(D)&65535;b[2*A+2*D]+=I*ke,M(b,2*A+2*D),b[2*A+2*D+1]+=x*ke,M(b,2*A+2*D+1),b[2*A+2*D+1]+=I*Oe,M(b,2*A+2*D+1),b[2*A+2*D+2]+=x*Oe,M(b,2*A+2*D+2)}for(A=0;A<_;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=_;A<2*_;A++)b[A]=0;return new o(b,0)};function M(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function F(T,_){this.g=T,this.h=_}function j(T,_){if(E(_))throw Error("division by zero");if(E(T))return new F(f,f);if(C(T))return _=j(S(T),_),new F(S(_.g),S(_.h));if(C(_))return _=j(T,S(_)),new F(S(_.g),_.h);if(30<T.g.length){if(C(T)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=_;0>=A.l(T);)b=z(b),A=z(A);var D=B(b,1),x=B(A,1);for(A=B(A,2),b=B(b,2);!E(A);){var I=x.add(A);0>=I.l(T)&&(D=D.add(b),x=I),A=B(A,1),b=B(b,1)}return _=P(T,D.j(_)),new F(D,_)}for(D=f;0<=T.l(_);){for(b=Math.max(1,Math.floor(T.m()/_.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),x=l(b),I=x.j(_);C(I)||0<I.l(T);)b-=A,x=l(b),I=x.j(_);E(x)&&(x=p),D=D.add(x),T=P(T,I)}return new F(D,T)}n.A=function(T){return j(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)&T.i(A);return new o(b,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)|T.i(A);return new o(b,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)^T.i(A);return new o(b,this.h^T.h)};function z(T){for(var _=T.g.length+1,b=[],A=0;A<_;A++)b[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(b,T.h)}function B(T,_){var b=_>>5;_%=32;for(var A=T.g.length-b,D=[],x=0;x<A;x++)D[x]=0<_?T.i(x+b)>>>_|T.i(x+b+1)<<32-_:T.i(x+b);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RP=OH.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,jo=OH.Integer=o}).apply(typeof NH<"u"?NH:typeof self<"u"?self:typeof window<"u"?window:{});var eI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bo={};var kP,Mle,Gh,PP,Vg,tI,MP,NP,OP;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof eI=="object"&&eI];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var L=d[R];if(!(L in v))break e;v=v[L]}d=d[d.length-1],R=v[d],g=g(R),g!=R&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var v=0,R=!1,L={next:function(){if(!R&&v<d.length){var U=v++;return{value:g(U,d[U]),done:!1}}return R=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,v){return v})}});var o=o||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,v){return d.call.apply(d.bind,arguments)}function f(d,g,v){if(!d)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,R),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function p(d,g,v){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function E(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(R,L,U){for(var K=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)K[tt-2]=arguments[tt];return g.prototype[L].apply(R,K)}}function C(d){let g=d.length;if(0<g){let v=Array(g);for(let R=0;R<g;R++)v[R]=d[R];return v}return[]}function S(d,g){for(let v=1;v<arguments.length;v++){let R=arguments[v];if(c(R)){let L=d.length||0,U=R.length||0;d.length=L+U;for(let K=0;K<U;K++)d[L+K]=R[K]}else d.push(R)}}class P{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(d){return/^[\s\xa0]*$/.test(d)}function F(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function j(d){return j[" "](d),d}j[" "]=function(){};var z=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function B(d,g,v){for(let R in d)g.call(v,d[R],R,d)}function T(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function _(d){let g={};for(let v in d)g[v]=d[v];return g}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let v,R;for(let L=1;L<arguments.length;L++){R=arguments[L];for(v in R)d[v]=R[v];for(let U=0;U<b.length;U++)v=b[U],Object.prototype.hasOwnProperty.call(R,v)&&(d[v]=R[v])}}function D(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function x(d){a.setTimeout(()=>{throw d},0)}function I(){var d=ge;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,v){let R=ke.get();R.set(g,v),this.h?this.h.next=R:this.g=R,this.h=R}}var ke=new P(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,oe=!1,ge=new Oe,lt=()=>{let d=a.Promise.resolve(void 0);ee=()=>{d.then(Xt)}};var Xt=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(v){x(v)}var g=ke;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}oe=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d})();function bn(d,g){if(We.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(z){e:{try{j(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Xn[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&bn.aa.h.call(this)}}E(bn,We);var Xn={2:"touch",3:"pen",4:"mouse"};bn.prototype.h=function(){bn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),Rr=0;function Rn(d,g,v,R,L){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!R,this.ha=L,this.key=++Rr,this.da=this.fa=!1}function Yr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Xi(d){this.src=d,this.g={},this.h=0}Xi.prototype.add=function(d,g,v,R,L){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var K=Fu(d,g,R,L);return-1<K?(g=d[K],v||(g.fa=!1)):(g=new Rn(g,this.src,U,!!R,L),g.fa=v,d.push(g)),g};function Lu(d,g){var v=g.type;if(v in d.g){var R=d.g[v],L=Array.prototype.indexOf.call(R,g,void 0),U;(U=0<=L)&&Array.prototype.splice.call(R,L,1),U&&(Yr(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Fu(d,g,v,R){for(var L=0;L<d.length;++L){var U=d[L];if(!U.da&&U.listener==g&&U.capture==!!v&&U.ha==R)return L}return-1}var jc="closure_lm_"+(1e6*Math.random()|0),Vu={};function Hy(d,g,v,R,L){if(R&&R.once)return ju(d,g,v,R,L);if(Array.isArray(g)){for(var U=0;U<g.length;U++)Hy(d,g[U],v,R,L);return null}return v=Gs(v),d&&d[Et]?d.K(g,v,l(R)?!!R.capture:!!R,L):Uu(d,g,v,!1,R,L)}function Uu(d,g,v,R,L,U){if(!g)throw Error("Invalid event type");var K=l(L)?!!L.capture:!!L,tt=Bu(d);if(tt||(d[jc]=tt=new Xi(d)),v=tt.add(g,v,R,K,U),v.proxy)return v;if(R=Kf(),v.proxy=R,R.src=d,R.listener=v,d.addEventListener)Le||(L=K),L===void 0&&(L=!1),d.addEventListener(g.toString(),R,L);else if(d.attachEvent)d.attachEvent(Bc(g.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Kf(){function d(v){return g.call(d.src,d.listener,v)}let g=c0;return d}function ju(d,g,v,R,L){if(Array.isArray(g)){for(var U=0;U<g.length;U++)ju(d,g[U],v,R,L);return null}return v=Gs(v),d&&d[Et]?d.L(g,v,l(R)?!!R.capture:!!R,L):Uu(d,g,v,!0,R,L)}function un(d,g,v,R,L){if(Array.isArray(g))for(var U=0;U<g.length;U++)un(d,g[U],v,R,L);else R=l(R)?!!R.capture:!!R,v=Gs(v),d&&d[Et]?(d=d.i,g=String(g).toString(),g in d.g&&(U=d.g[g],v=Fu(U,v,R,L),-1<v&&(Yr(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete d.g[g],d.h--)))):d&&(d=Bu(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Fu(g,v,R,L)),(v=-1<d?g[d]:null)&&dn(v))}function dn(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Et])Lu(g.i,d);else{var v=d.type,R=d.proxy;g.removeEventListener?g.removeEventListener(v,R,d.capture):g.detachEvent?g.detachEvent(Bc(v),R):g.addListener&&g.removeListener&&g.removeListener(R),(v=Bu(g))?(Lu(v,d),v.h==0&&(v.src=null,g[jc]=null)):Yr(d)}}}function Bc(d){return d in Vu?Vu[d]:Vu[d]="on"+d}function c0(d,g){if(d.da)d=!0;else{g=new bn(g,this);var v=d.listener,R=d.ha||d.src;d.fa&&dn(d),d=v.call(R,g)}return d}function Bu(d){return d=d[jc],d instanceof Xi?d:null}var Qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(d){return typeof d=="function"?d:(d[Qf]||(d[Qf]=function(g){return d.handleEvent(g)}),d[Qf])}function hn(){et.call(this),this.i=new Xi(this),this.M=this,this.F=null}E(hn,et),hn.prototype[Et]=!0,hn.prototype.removeEventListener=function(d,g,v,R){un(this,d,g,v,R)};function wn(d,g){var v,R=d.F;if(R)for(v=[];R;R=R.F)v.push(R);if(d=d.M,R=g.type||g,typeof g=="string")g=new We(g,d);else if(g instanceof We)g.target=g.target||d;else{var L=g;g=new We(R,d),A(g,L)}if(L=!0,v)for(var U=v.length-1;0<=U;U--){var K=g.g=v[U];L=sa(K,R,!0,g)&&L}if(K=g.g=d,L=sa(K,R,!0,g)&&L,L=sa(K,R,!1,g)&&L,v)for(U=0;U<v.length;U++)K=g.g=v[U],L=sa(K,R,!1,g)&&L}hn.prototype.N=function(){if(hn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],R=0;R<v.length;R++)Yr(v[R]);delete d.g[g],d.h--}}this.F=null},hn.prototype.K=function(d,g,v,R){return this.i.add(String(d),g,!1,v,R)},hn.prototype.L=function(d,g,v,R){return this.i.add(String(d),g,!0,v,R)};function sa(d,g,v,R){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,U=0;U<g.length;++U){var K=g[U];if(K&&!K.da&&K.capture==v){var tt=K.listener,Ht=K.ha||K.src;K.fa&&Lu(d.i,K),L=tt.call(Ht,R)!==!1&&L}}return L&&!R.defaultPrevented}function qy(d,g,v){if(typeof d=="function")v&&(d=p(d,v));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function Wy(d){d.g=qy(()=>{d.g=null,d.i&&(d.i=!1,Wy(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Gy extends et{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(d){et.call(this),this.h=d,this.g={}}E(oa,et);var aa=[];function zu(d){B(d.g,function(g,v){this.g.hasOwnProperty(v)&&dn(g)},d),d.g={}}oa.prototype.N=function(){oa.aa.N.call(this),zu(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zc=a.JSON.stringify,Ks=a.JSON.parse,Ky=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function ca(){}ca.prototype.h=null;function Yf(d){return d.h||(d.h=d.i())}function la(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fn(){We.call(this,"d")}E(fn,We);function $u(){We.call(this,"c")}E($u,We);var kr={},da=null;function Hu(){return da=da||new hn}kr.La="serverreachability";function Qy(d){We.call(this,kr.La,d)}E(Qy,We);function Xr(d){let g=Hu();wn(g,new Qy(g))}kr.STAT_EVENT="statevent";function Yy(d,g){We.call(this,kr.STAT_EVENT,d),this.stat=g}E(Yy,We);function kn(d){let g=Hu();wn(g,new Yy(g,d))}kr.Ma="timingevent";function $c(d,g){We.call(this,kr.Ma,d),this.size=g}E($c,We);function ha(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function fa(){this.g=!0}fa.prototype.xa=function(){this.g=!1};function Xf(d,g,v,R,L,U){d.info(function(){if(d.g)if(U)for(var K="",tt=U.split("&"),Ht=0;Ht<tt.length;Ht++){var nt=tt[Ht].split("=");if(1<nt.length){var Fn=nt[0];nt=nt[1];var Vn=Fn.split("_");K=2<=Vn.length&&Vn[1]=="type"?K+(Fn+"="+nt+"&"):K+(Fn+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+R+") [attempt "+L+"]: "+g+`
`+v+`
`+K})}function Hc(d,g,v,R,L,U,K){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+L+"]: "+g+`
`+v+`
`+U+" "+K})}function pa(d,g,v,R){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xy(d,v)+(R?" "+R:"")})}function Ji(d,g){d.info(function(){return"TIMEOUT: "+g})}fa.prototype.info=function(){};function Xy(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var R=v[d];if(!(2>R.length)){var L=R[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return zc(v)}catch{return g}}var qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wc;function Gc(){}E(Gc,ca),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},Wc=new Gc;function Zi(d,g,v,R){this.j=d,this.i=g,this.l=v,this.R=R||1,this.U=new oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jf}function Jf(){this.i=null,this.g="",this.h=!1}var Jy={},ma={};function Wu(d,g,v){d.L=1,d.v=Yu(yi(g)),d.m=v,d.P=!0,Gu(d,null)}function Gu(d,g){d.F=Date.now(),ya(d),d.A=yi(d.v);var v=d.A,R=d.R;Array.isArray(R)||(R=[String(R)]),o_(v.i,"t",R),d.C=0,v=d.j.J,d.h=new Jf,d.g=y(d.j,v?g:null,!d.m),0<d.O&&(d.M=new Gy(p(d.Y,d,d.g),d.O)),g=d.U,v=d.g,R=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(aa[0]=L.toString()),L=aa);for(var U=0;U<L.length;U++){var K=Hy(v,L[U],R||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Xr(),Xf(d.i,d.u,d.A,d.l,d.R,d.m)}Zi.prototype.ca=function(d){d=d.target;let g=this.M;g&&lr(d)==3?g.j():this.Y(d)},Zi.prototype.Y=function(d){try{if(d==this.g)e:{let Vn=lr(this.g);var g=this.g.Ba();let sd=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||d_(this.g)))){this.J||Vn!=4||g==7||(g==8||0>=sd?Xr(3):Xr(2)),Ku(this);var v=this.g.Z();this.X=v;t:if(ga(this)){var R=d_(this.g);d="";var L=R.length,U=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),_a(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(R[g],{stream:!(U&&g==L-1)});R.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=v==200,Hc(this.i,this.u,this.A,this.l,this.R,Vn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ht=this.g;if((tt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(tt)){var nt=tt;break t}}nt=null}if(v=nt)pa(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kc(this,v);else{this.o=!1,this.s=3,kn(12),es(this),_a(this);break e}}if(this.P){v=!0;let Ei;for(;!this.J&&this.C<K.length;)if(Ei=Qs(this,K),Ei==ma){Vn==4&&(this.s=4,kn(14),v=!1),pa(this.i,this.l,null,"[Incomplete Response]");break}else if(Ei==Jy){this.s=4,kn(15),pa(this.i,this.l,K,"[Invalid Chunk]"),v=!1;break}else pa(this.i,this.l,Ei,null),Kc(this,Ei);if(ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||K.length!=0||this.h.h||(this.s=1,kn(16),v=!1),this.o=this.o&&v,!v)pa(this.i,this.l,K,"[Invalid Chunked Response]"),es(this),_a(this);else if(0<K.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),id(Fn),Fn.M=!0,kn(11))}}else pa(this.i,this.l,K,null),Kc(this,K);Vn==4&&es(this),this.o&&!this.J&&(Vn==4?Ln(this.j,this):(this.o=!1,ya(this)))}else h_(this.g),v==400&&0<K.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),es(this),_a(this)}}}catch{}finally{}};function ga(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Qs(d,g){var v=d.C,R=g.indexOf(`
`,v);return R==-1?ma:(v=Number(g.substring(v,R)),isNaN(v)?Jy:(R+=1,R+v>g.length?ma:(g=g.slice(R,R+v),d.C=R+v,g)))}Zi.prototype.cancel=function(){this.J=!0,es(this)};function ya(d){d.S=Date.now()+d.I,Zy(d,d.I)}function Zy(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ha(p(d.ba,d),g)}function Ku(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Zi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Ji(this.i,this.A),this.L!=2&&(Xr(),kn(17)),es(this),this.s=2,_a(this)):Zy(this,this.S-d)};function _a(d){d.j.G==0||d.J||Ln(d.j,d)}function es(d){Ku(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,zu(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Kc(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||rp(v.h,d))){if(!d.K&&rp(v.h,d)&&v.G==3){try{var R=v.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var L=R;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Xs(v),Sa(v);else break e;rd(v),kn(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=ha(p(v.Za,v),6e3));if(1>=np(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else rs(v,11)}else if((d.K||v.g==d)&&Xs(v),!M(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let nt=L[g];if(v.T=nt[0],nt=nt[1],v.G==2)if(nt[0]=="c"){v.K=nt[1],v.ia=nt[2];let Fn=nt[3];Fn!=null&&(v.la=Fn,v.j.info("VER="+v.la));let Vn=nt[4];Vn!=null&&(v.Aa=Vn,v.j.info("SVER="+v.Aa));let sd=nt[5];sd!=null&&typeof sd=="number"&&0<sd&&(R=1.5*sd,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;let Ei=d.g;if(Ei){let f_=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f_){var U=R.h;U.g||f_.indexOf("spdy")==-1&&f_.indexOf("quic")==-1&&f_.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Jr(U,U.h),U.h=null))}if(R.D){let u0=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;u0&&(R.ya=u0,bt(R.I,R.D,u0))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var K=d;if(R.qa=h(R,R.J?R.ia:null,R.W),K.K){Pr(R.h,K);var tt=K,Ht=R.L;Ht&&(tt.I=Ht),tt.B&&(Ku(tt),ya(tt)),R.g=K}else hp(R);0<v.i.length&&tl(v)}else nt[0]!="stop"&&nt[0]!="close"||rs(v,7);else v.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?rs(v,7):ed(v):nt[0]!="noop"&&v.l&&v.l.ta(nt),v.v=0)}}Xr(4)}catch{}}var Zf=class{constructor(d,g){this.g=d,this.map=g}};function ep(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tp(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function np(d){return d.h?1:d.g?d.g.size:0}function rp(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Jr(d,g){d.g?d.g.add(g):d.h=g}function Pr(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}ep.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function va(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return C(d.i)}function Qc(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,R=0;R<v;R++)g.push(d[R]);return g}g=[],v=0;for(R in d)g[v++]=d[R];return g}function ip(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let R in d)g[v++]=R;return g}}}function mt(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=ip(d),R=Qc(d),L=R.length,U=0;U<L;U++)g.call(void 0,R[U],v&&v[U],d)}var Yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xc(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var R=d[v].indexOf("="),L=null;if(0<=R){var U=d[v].substring(0,R);L=d[v].substring(R+1)}else U=d[v];g(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Mr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Mr){this.h=d.h,Jc(this,d.j),this.o=d.o,this.g=d.g,Qu(this,d.s),this.l=d.l;var g=d.i,v=new Zc;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),e_(this,v),this.m=d.m}else d&&(g=String(d).match(Yc))?(this.h=!1,Jc(this,g[1]||"",!0),this.o=_i(g[2]||""),this.g=_i(g[3]||"",!0),Qu(this,g[4]),this.l=_i(g[5]||"",!0),e_(this,g[6]||"",!0),this.m=_i(g[7]||"")):(this.h=!1,this.i=new Zc(null,this.h))}Mr.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Nr(g,sp,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Nr(g,sp,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Nr(v,v.charAt(0)=="/"?r_:n_,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Nr(v,ba)),d.join("")};function yi(d){return new Mr(d)}function Jc(d,g,v){d.j=v?_i(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Qu(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function e_(d,g,v){g instanceof Zc?(d.i=g,Xu(d.i,d.h)):(v||(g=Nr(g,i_)),d.i=new Zc(g,d.h))}function bt(d,g,v){d.i.set(g,v)}function Yu(d){return bt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function _i(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Nr(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,t_),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function t_(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var sp=/[#\/\?@]/g,n_=/[#\?:]/g,r_=/[#\?]/g,i_=/[#\?@]/g,ba=/#/g;function Zc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function ts(d){d.g||(d.g=new Map,d.h=0,d.i&&Xc(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Zc.prototype,n.add=function(d,g){ts(this),this.i=null,d=bi(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function s_(d,g){ts(d),g=bi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function vi(d,g){return ts(d),g=bi(d,g),d.g.has(g)}n.forEach=function(d,g){ts(this),this.g.forEach(function(v,R){v.forEach(function(L){d.call(g,L,R,this)},this)},this)},n.na=function(){ts(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let R=0;R<g.length;R++){let L=d[R];for(let U=0;U<L.length;U++)v.push(g[R])}return v},n.V=function(d){ts(this);let g=[];if(typeof d=="string")vi(this,d)&&(g=g.concat(this.g.get(bi(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return ts(this),this.i=null,d=bi(this,d),vi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function o_(d,g,v){s_(d,g),0<v.length&&(d.i=null,d.g.set(bi(d,g),C(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var R=g[v];let U=encodeURIComponent(String(R)),K=this.V(R);for(R=0;R<K.length;R++){var L=U;K[R]!==""&&(L+="="+encodeURIComponent(String(K[R]))),d.push(L)}}return this.i=d.join("&")};function bi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Xu(d,g){g&&!d.j&&(ts(d),d.i=null,d.g.forEach(function(v,R){var L=R.toLowerCase();R!=L&&(s_(this,R),o_(this,L,v))},d)),d.j=g}function a_(d,g){let v=new fa;if(a.Image){let R=new Image;R.onload=m(cr,v,"TestLoadImage: loaded",!0,g,R),R.onerror=m(cr,v,"TestLoadImage: error",!1,g,R),R.onabort=m(cr,v,"TestLoadImage: abort",!1,g,R),R.ontimeout=m(cr,v,"TestLoadImage: timeout",!1,g,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else g(!1)}function el(d,g){let v=new fa,R=new AbortController,L=setTimeout(()=>{R.abort(),cr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:R.signal}).then(U=>{clearTimeout(L),U.ok?cr(v,"TestPingServer: ok",!0,g):cr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),cr(v,"TestPingServer: error",!1,g)})}function cr(d,g,v,R,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),R(v)}catch{}}function c_(){this.g=new Ky}function op(d,g,v){let R=v||"";try{mt(d,function(L,U){let K=L;l(L)&&(K=zc(L)),g.push(R+U+"="+encodeURIComponent(K))})}catch(L){throw g.push(R+"type="+encodeURIComponent("_badmap")),L}}function gt(d){this.l=d.Ub||null,this.j=d.eb||!1}E(gt,ca),gt.prototype.g=function(){return new Ju(this.l,this.j)},gt.prototype.i=(function(d){return function(){return d}})({});function Ju(d,g){hn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Ju,hn),n=Ju.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Ea(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;l_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function l_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?wa(this):Ea(this),this.readyState==3&&l_(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,wa(this))},n.Qa=function(d){this.g&&(this.response=d,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ea(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Ea(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ap(d){let g="";return B(d,function(v,R){g+=R,g+=":",g+=v,g+=`\r
`}),g}function Ia(d,g,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=ap(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):bt(d,g,v))}function it(d){hn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(it,hn);var u_=/^https?$/i,l0=["POST","PUT"];n=it.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wc.g(),this.v=this.o?Yf(this.o):Yf(Wc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Ta(this,U);return}if(d=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var L in R)v.set(L,R[L]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(let U of R.keys())v.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(l0,g,void 0))||R||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,K]of v)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lp(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){Ta(this,U)}};function Ta(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,cp(d),Ys(d)}function cp(d){d.A||(d.A=!0,wn(d,"complete"),wn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wn(this,"complete"),wn(this,"abort"),Ys(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zu(this):this.bb())},n.bb=function(){Zu(this)};function Zu(d){if(d.h&&typeof o<"u"&&(!d.v[1]||lr(d)!=4||d.Z()!=2)){if(d.u&&lr(d)==4)qy(d.Ea,0,d);else if(wn(d,"readystatechange"),lr(d)==4){d.h=!1;try{let K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var R;if(R=K===0){var L=String(d.D).match(Yc)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),R=!u_.test(L?L.toLowerCase():"")}v=R}if(v)wn(d,"complete"),wn(d,"success");else{d.m=6;try{var U=2<lr(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",cp(d)}}finally{Ys(d)}}}}function Ys(d,g){if(d.g){lp(d);let v=d.g,R=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||wn(d,"ready");try{v.onreadystatechange=R}catch{}}}function lp(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function lr(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ks(g)}};function d_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function h_(d){let g={};d=(d.g&&2<=lr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(M(d[R]))continue;var v=D(d[R]);let L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let U=g[L]||[];g[L]=U,U.push(v)}T(g,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function up(d){this.Aa=0,this.i=[],this.j=new fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,d),this.cb=wi("retryDelaySeedMs",1e4,d),this.Wa=wi("forwardChannelMaxRetries",2,d),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ep(d&&d.concurrentRequestLimit),this.Da=new c_,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=up.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,R){kn(0),this.W=d,this.H=g||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=h(this,null,this.W),tl(this)};function ed(d){if(td(d),d.G==3){var g=d.U++,v=yi(d.I);if(bt(v,"SID",d.K),bt(v,"RID",g),bt(v,"TYPE","terminate"),Ca(d,v),g=new Zi(d,d.j,g),g.L=2,g.v=Yu(yi(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=y(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ya(g)}Js(d)}function Sa(d){d.g&&(id(d),d.g.cancel(),d.g=null)}function td(d){Sa(d),d.u&&(a.clearTimeout(d.u),d.u=null),Xs(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function tl(d){if(!tp(d.h)&&!d.s){d.s=!0;var g=d.Ga;ee||lt(),oe||(ee(),oe=!0),ge.add(g,d),d.B=0}}function nd(d,g){return np(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ha(p(d.Ga,d,g),pp(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let L=new Zi(this,this.j,d),U=this.o;if(this.S&&(U?(U=_(U),A(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ns(this,L,g),v=yi(this.I),bt(v,"RID",d),bt(v,"CVER",22),this.D&&bt(v,"X-HTTP-Session-Id",this.D),Ca(this,v),U&&(this.O?g="headers="+encodeURIComponent(String(ap(U)))+"&"+g:this.m&&Ia(v,this.m,U)),Jr(this.h,L),this.Ua&&bt(v,"TYPE","init"),this.P?(bt(v,"$req",g),bt(v,"SID","null"),L.T=!0,Wu(L,v,null)):Wu(L,v,g),this.G=2}}else this.G==3&&(d?dp(this,d):this.i.length==0||tp(this.h)||dp(this))};function dp(d,g){var v;g?v=g.l:v=d.U++;let R=yi(d.I);bt(R,"SID",d.K),bt(R,"RID",v),bt(R,"AID",d.T),Ca(d,R),d.m&&d.o&&Ia(R,d.m,d.o),v=new Zi(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ns(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Jr(d.h,v),Wu(v,R,g)}function Ca(d,g){d.H&&B(d.H,function(v,R){bt(g,R,v)}),d.l&&mt({},function(v,R){bt(g,R,v)})}function ns(d,g,v){v=Math.min(d.i.length,v);var R=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let U=-1;for(;;){let K=["count="+v];U==-1?0<v?(U=L[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let tt=!0;for(let Ht=0;Ht<v;Ht++){let nt=L[Ht].g,Fn=L[Ht].map;if(nt-=U,0>nt)U=Math.max(0,L[Ht].g-100),tt=!1;else try{op(Fn,K,"req"+nt+"_")}catch{R&&R(Fn)}}if(tt){R=K.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,R}function hp(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ee||lt(),oe||(ee(),oe=!0),ge.add(g,d),d.v=0}}function rd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ha(p(d.Fa,d),pp(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ha(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),Sa(this),fp(this))};function id(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function fp(d){d.g=new Zi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=yi(d.qa);bt(g,"RID","rpc"),bt(g,"SID",d.K),bt(g,"AID",d.T),bt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&bt(g,"TO",d.ja),bt(g,"TYPE","xmlhttp"),Ca(d,g),d.m&&d.o&&Ia(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Yu(yi(g)),v.m=null,v.P=!0,Gu(v,d)}n.Za=function(){this.C!=null&&(this.C=null,Sa(this),rd(this),kn(19))};function Xs(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Ln(d,g){var v=null;if(d.g==g){Xs(d),id(d),d.g=null;var R=2}else if(rp(d.h,g))v=g.D,Pr(d.h,g),R=1;else return;if(d.G!=0){if(g.o)if(R==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;R=Hu(),wn(R,new $c(R,v)),tl(d)}else hp(d);else if(L=g.s,L==3||L==0&&0<g.X||!(R==1&&nd(d,g)||R==2&&rd(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),L){case 1:rs(d,5);break;case 4:rs(d,10);break;case 3:rs(d,6);break;default:rs(d,2)}}}function pp(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function rs(d,g){if(d.j.info("Error code "+g),g==2){var v=p(d.fb,d),R=d.Xa;let L=!R;R=new Mr(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(R,"https"),Yu(R),L?a_(R.toString(),v):el(R.toString(),v)}else kn(2);d.G=0,d.l&&d.l.sa(g),Js(d),td(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))};function Js(d){if(d.G=0,d.ka=[],d.l){let g=va(d.h);(g.length!=0||d.i.length!=0)&&(S(d.ka,g),S(d.ka,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.ra()}}function h(d,g,v){var R=v instanceof Mr?yi(v):new Mr(v);if(R.g!="")g&&(R.g=g+"."+R.g),Qu(R,R.s);else{var L=a.location;R=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var U=new Mr(null);R&&Jc(U,R),g&&(U.g=g),L&&Qu(U,L),v&&(U.l=v),R=U}return v=d.D,g=d.ya,v&&g&&bt(R,v,g),bt(R,"VER",d.la),Ca(d,R),R}function y(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new it(new gt({eb:v})):new it(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function w(){}n=w.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function k(){}k.prototype.g=function(d,g){return new O(d,g)};function O(d,g){hn.call(this),this.g=new up(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!M(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!M(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ye(this)}E(O,hn),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){ed(this.g)},O.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=zc(d),d=v);g.i.push(new Zf(g.Ya++,d)),g.G==3&&tl(g)},O.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,O.aa.N.call(this)};function V(d){fn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}E(V,fn);function X(){$u.call(this),this.status=1}E(X,$u);function ye(d){this.g=d}E(ye,w),ye.prototype.ua=function(){wn(this.g,"a")},ye.prototype.ta=function(d){wn(this.g,new V(d))},ye.prototype.sa=function(d){wn(this.g,new X)},ye.prototype.ra=function(){wn(this.g,"b")},k.prototype.createWebChannel=k.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,OP=Bo.createWebChannelTransport=function(){return new k},NP=Bo.getStatEventTarget=function(){return Hu()},MP=Bo.Event=kr,tI=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,Vg=Bo.ErrorCode=qc,qu.COMPLETE="complete",PP=Bo.EventType=qu,la.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",hn.prototype.listen=hn.prototype.K,Gh=Bo.WebChannel=la,Mle=Bo.FetchXmlHttpFactory=gt,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,kP=Bo.XhrIo=it}).apply(typeof eI<"u"?eI:typeof self<"u"?self:typeof window<"u"?window:{});var LH="@firebase/firestore",FH="4.8.0";var An=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");var pf="11.10.0";var yu=new Is("@firebase/firestore");function Kh(){return yu.logLevel}function re(n,...e){if(yu.logLevel<=Ue.DEBUG){let t=e.map(IN);yu.debug(`Firestore (${pf}): ${n}`,...t)}}function zo(n,...e){if(yu.logLevel<=Ue.ERROR){let t=e.map(IN);yu.error(`Firestore (${pf}): ${n}`,...t)}}function _c(n,...e){if(yu.logLevel<=Ue.WARN){let t=e.map(IN);yu.warn(`Firestore (${pf}): ${n}`,...t)}}function IN(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,T6(n,r,t)}function T6(n,e,t){let r=`FIRESTORE (${pf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zo(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||T6(e,i,r)}function Ie(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ce=class extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ps=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var cI=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jP=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(An.UNAUTHENTICATED))}shutdown(){}},BP=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zP=class{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ps,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ps)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new cI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new An(e)}},$P=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},HP=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $P(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qP=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lI(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Nle(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function S6(){return new TextEncoder}var qg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Nle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ne(n,e){return n<e?-1:n>e?1:0}function WP(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ne(r,i);{let s=S6(),o=Ole(s.encode(VH(n,t)),s.encode(VH(e,t)));return o!==0?o:Ne(r,i)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function VH(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ole(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function tf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var UH="__name__",uI=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):WP(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jo.fromString(e.substring(4,e.length-2))}},Qt=class n extends uI{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ce(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Lle=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kr=class n extends uI{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Lle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UH}static keyField(){return new n([UH])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ce(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ce(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ce(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qt.fromString(e))}static fromName(e){return new n(Qt.fromString(e).popFirst(5))}static empty(){return new n(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qt(e.slice()))}};function Fle(n,e,t){if(!t)throw new ce(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Vle(n,e,t,r){if(e===!0&&r===!0)throw new ce(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jH(n){if(!pe.isDocumentKey(n))throw new ce(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function C6(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function TN(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fe(12329,{type:typeof n})}function Wg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=TN(n);throw new ce(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function an(n,e){let t={typeString:n};return e&&(t.value=e),t}function sy(n,e){if(!C6(n))throw new ce(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ce(q.INVALID_ARGUMENT,t);return!0}var BH=-62135596800,zH=1e6,cn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*zH);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<BH)throw new ce(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zH}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sy(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-BH;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};cn._jsonSchemaVersion="firestore/timestamp/1.0",cn._jsonSchema={type:an("string",cn._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new cn(0,0))}static max(){return new n(new cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gg=-1,GP=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};GP.UNKNOWN_ID=-1;function Ule(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new cn(t+1,0):new cn(t,r));return new _u(i,pe.empty(),e)}function jle(n){return new _u(n.readTime,n.key,Gg)}var _u=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),pe.empty(),Gg)}static max(){return new n(De.max(),pe.empty(),Gg)}};function Ble(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}var zle="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",KP=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function mf(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==zle)throw n;re("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function $le(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gf(n){return n.name==="IndexedDbTransactionError"}var SN=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),CN=-1;function UI(n){return n==null}function Kg(n){return n===0&&1/n==-1/0}function Hle(n){return typeof n=="number"&&Number.isInteger(n)&&!Kg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var D6="";function qle(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$H(e)),e=Wle(n.get(t),e);return $H(e)}function Wle(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case D6:t+="";break;default:t+=s}}return t}function $H(n){return n+D6+""}var Gle="remoteDocuments",A6="owner";var x6="mutationQueues";var R6="mutations";var k6="documentMutations",Kle="remoteDocumentsV14";var P6="remoteDocumentGlobal";var M6="targets";var N6="targetDocuments";var O6="targetGlobal",L6="collectionParents";var F6="clientMetadata";var V6="bundles";var U6="namedQueries";var Qle="indexConfiguration";var Yle="indexState";var Xle="indexEntries";var j6="documentOverlays";var Jle="globals";var Zle=[x6,R6,k6,Gle,M6,A6,O6,N6,F6,P6,L6,V6,U6],gje=[...Zle,j6],eue=[x6,R6,k6,Kle,M6,A6,O6,N6,F6,P6,L6,V6,U6,j6],tue=eue,nue=[...tue,Qle,Yle,Xle];var yje=[...nue,Jle];function HH(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Iu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B6(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $t=class n{constructor(e,t){this.comparator=e,this.root=t||Ms.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}},Jh=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ms=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}};Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1;Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ms(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xn=class n{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dI(this.data.getIterator())}getIteratorFrom(e){return new dI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dI=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ks=class n{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new n([])}unionWith(e){let t=new xn(Kr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tf(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hI=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hI("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qn.EMPTY_BYTE_STRING=new Qn("");var rue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(ft(!!n,39018),typeof n=="string"){let e=0,t=rue.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ho(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}var z6="server_timestamp",$6="__type__",H6="__previous_value__",q6="__local_write_time__";function DN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$6])===null||t===void 0?void 0:t.stringValue)===z6}function jI(n){let e=n.mapValue.fields[H6];return DN(e)?jI(e):e}function Qg(n){let e=$o(n.mapValue.fields[q6].timestampValue);return new cn(e.seconds,e.nanos)}var QP=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},fI="(default)",pI=class n{constructor(e,t){this.projectId=e,this.database=t||fI}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===fI}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var AN="__type__",W6="__max__",nI={mapValue:{fields:{__type__:{stringValue:W6}}}},xN="__vector__",nf="value";function vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DN(n)?4:K6(n)?9007199254740991:G6(n)?10:11:fe(28295,{value:n})}function Ls(n,e){if(n===e)return!0;let t=vc(n);if(t!==vc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qg(n).isEqual(Qg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=$o(i.timestampValue),a=$o(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ho(i.bytesValue).isEqual(Ho(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Pt(i.geoPointValue.latitude)===Pt(s.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Pt(i.integerValue)===Pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Pt(i.doubleValue),a=Pt(s.doubleValue);return o===a?Kg(o)===Kg(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return tf(n.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HH(o)!==HH(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ls(o[c],a[c])))return!1;return!0})(n,e);default:return fe(52216,{left:n})}}function Yg(n,e){return(n.values||[]).find(t=>Ls(t,e))!==void 0}function rf(n,e){if(n===e)return 0;let t=vc(n),r=vc(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Pt(s.integerValue||s.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return qH(n.timestampValue,e.timestampValue);case 4:return qH(Qg(n),Qg(e));case 5:return WP(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ho(s),c=Ho(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Ne(a[l],c[l]);if(u!==0)return u}return Ne(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ne(Pt(s.latitude),Pt(o.latitude));return a!==0?a:Ne(Pt(s.longitude),Pt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WH(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,u;let f=s.fields||{},p=o.fields||{},m=(a=f[nf])===null||a===void 0?void 0:a.arrayValue,E=(c=p[nf])===null||c===void 0?void 0:c.arrayValue,C=Ne(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((u=E?.values)===null||u===void 0?void 0:u.length)||0);return C!==0?C:WH(m,E)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===nI.mapValue&&o===nI.mapValue)return 0;if(s===nI.mapValue)return 1;if(o===nI.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){let p=WP(c[f],u[f]);if(p!==0)return p;let m=rf(a[c[f]],l[u[f]]);if(m!==0)return m}return Ne(c.length,u.length)})(n.mapValue,e.mapValue);default:throw fe(23264,{le:t})}}function qH(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);let t=$o(n),r=$o(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function WH(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=rf(t[i],r[i]);if(s)return s}return Ne(t.length,r.length)}function sf(n){return YP(n)}function YP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=$o(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ho(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=YP(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${YP(t.fields[o])}`;return i+"}"})(n.mapValue):fe(61005,{value:n})}function sI(n){switch(vc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=jI(n);return e?16+sI(e):16;case 5:return 2*n.stringValue.length;case 6:return Ho(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+sI(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Iu(r.fields,(s,o)=>{i+=s.length+sI(o)}),i})(n.mapValue);default:throw fe(13486,{value:n})}}function XP(n){return!!n&&"integerValue"in n}function RN(n){return!!n&&"arrayValue"in n}function GH(n){return!!n&&"nullValue"in n}function KH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oI(n){return!!n&&"mapValue"in n}function G6(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[AN])===null||t===void 0?void 0:t.stringValue)===xN}function jg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Iu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===W6}var vje={mapValue:{fields:{[AN]:{stringValue:xN},[nf]:{arrayValue:{}}}}};var Gi=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jg(t)}setAll(e){let t=Kr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=jg(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());oI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Iu(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(jg(this.value))}};function Q6(n){let e=[];return Iu(n.fields,(t,r)=>{let i=new Kr([t]);if(oI(r)){let s=Q6(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ks(e)}var Ki=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),Gi.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var of=class{constructor(e,t){this.position=e,this.inclusive=t}};function QH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),t.key):r=rf(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YH(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ls(n.position[t],e.position[t]))return!1;return!0}var af=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var mI=class{},vn=class n extends mI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZP(e,t,r):t==="array-contains"?new nM(e,r):t==="in"?new rM(e,r):t==="not-in"?new iM(e,r):t==="array-contains-any"?new sM(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eM(e,r):new tM(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(rf(t,this.value)):t!==null&&vc(this.value)===vc(t)&&this.matchesComparison(rf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fs=class n extends mI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Y6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Y6(n){return n.op==="and"}function X6(n){return sue(n)&&Y6(n)}function sue(n){for(let e of n.filters)if(e instanceof Fs)return!1;return!0}function JP(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+sf(n.value);if(X6(n))return n.filters.map(e=>JP(e)).join(",");{let e=n.filters.map(t=>JP(t)).join(",");return`${n.op}(${e})`}}function J6(n,e){return n instanceof vn?(function(r,i){return i instanceof vn&&r.op===i.op&&r.field.isEqual(i.field)&&Ls(r.value,i.value)})(n,e):n instanceof Fs?(function(r,i){return i instanceof Fs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&J6(o,i.filters[a]),!0):!1})(n,e):void fe(19439)}function Z6(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${sf(t.value)}`})(n):n instanceof Fs?(function(t){return t.op.toString()+" {"+t.getFilters().map(Z6).join(" ,")+"}"})(n):"Filter"}var ZP=class extends vn{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},eM=class extends vn{constructor(e,t){super(e,"in",t),this.keys=e3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tM=class extends vn{constructor(e,t){super(e,"not-in",t),this.keys=e3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function e3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var nM=class extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return RN(t)&&Yg(t.arrayValue,this.value)}},rM=class extends vn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Yg(this.value.arrayValue,t)}},iM=class extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yg(this.value.arrayValue,t)}},sM=class extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!RN(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yg(this.value.arrayValue,r))}};var oM=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function XH(n,e=null,t=[],r=[],i=null,s=null,o=null){return new oM(n,e,t,r,i,s,o)}function kN(n){let e=Ie(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>JP(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),UI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sf(r)).join(",")),e.Pe=t}return e.Pe}function PN(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!J6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YH(n.startAt,e.startAt)&&YH(n.endAt,e.endAt)}function aM(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var cf=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function oue(n,e,t,r,i,s,o,a){return new cf(n,e,t,r,i,s,o,a)}function MN(n){return new cf(n)}function JH(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aue(n){return n.collectionGroup!==null}function Bg(n){let e=Ie(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xn(Kr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new af(s,r))}),t.has(Kr.keyField().canonicalString())||e.Te.push(new af(Kr.keyField(),r))}return e.Te}function Ns(n){let e=Ie(n);return e.Ie||(e.Ie=cue(e,Bg(n))),e.Ie}function cue(n,e){if(n.limitType==="F")return XH(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new af(i.field,s)});let t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return XH(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cM(n,e,t){return new cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function BI(n,e){return PN(Ns(n),Ns(e))&&n.limitType===e.limitType}function t3(n){return`${kN(Ns(n))}|lt:${n.limitType}`}function Qh(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Z6(i)).join(", ")}]`),UI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sf(i)).join(",")),`Target(${r})`})(Ns(n))}; limitType=${n.limitType})`}function zI(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Bg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=QH(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Bg(r),i)||r.endAt&&!(function(o,a,c){let l=QH(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Bg(r),i))})(n,e)}function lue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function n3(n){return(e,t)=>{let r=!1;for(let i of Bg(n)){let s=uue(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uue(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?rf(c,l):fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:n.dir})}}var qo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return B6(this.inner)}size(){return this.innerSize}};var due=new $t(pe.comparator);function Wo(){return due}var r3=new $t(pe.comparator);function Ug(...n){let e=r3;for(let t of n)e=e.insert(t.key,t);return e}function i3(n){let e=r3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hu(){return zg()}function s3(){return zg()}function zg(){return new qo(n=>n.toString(),(n,e)=>n.isEqual(e))}var hue=new $t(pe.comparator),fue=new xn(pe.comparator);function $e(...n){let e=fue;for(let t of n)e=e.add(t);return e}var pue=new xn(Ne);function mue(){return pue}function NN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kg(e)?"-0":e}}function o3(n){return{integerValue:""+n}}function gue(n,e){return Hle(e)?o3(e):NN(n,e)}var lf=class{constructor(){this._=void 0}};function yue(n,e,t){return n instanceof uf?(function(i,s){let o={fields:{[$6]:{stringValue:z6},[q6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&DN(s)&&(s=jI(s)),s&&(o.fields[H6]=s),{mapValue:o}})(t,e):n instanceof vu?c3(n,e):n instanceof bu?l3(n,e):(function(i,s){let o=a3(i,s),a=ZH(o)+ZH(i.Ee);return XP(o)&&XP(i.Ee)?o3(a):NN(i.serializer,a)})(n,e)}function _ue(n,e,t){return n instanceof vu?c3(n,e):n instanceof bu?l3(n,e):t}function a3(n,e){return n instanceof df?(function(r){return XP(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var uf=class extends lf{},vu=class extends lf{constructor(e){super(),this.elements=e}};function c3(n,e){let t=u3(e);for(let r of n.elements)t.some(i=>Ls(i,r))||t.push(r);return{arrayValue:{values:t}}}var bu=class extends lf{constructor(e){super(),this.elements=e}};function l3(n,e){let t=u3(e);for(let r of n.elements)t=t.filter(i=>!Ls(i,r));return{arrayValue:{values:t}}}var df=class extends lf{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function ZH(n){return Pt(n.integerValue||n.doubleValue)}function u3(n){return RN(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vue(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof vu&&i instanceof vu||r instanceof bu&&i instanceof bu?tf(r.elements,i.elements,Ls):r instanceof df&&i instanceof df?Ls(r.Ee,i.Ee):r instanceof uf&&i instanceof uf})(n.transform,e.transform)}var lM=class{constructor(e,t){this.version=e,this.transformResults=t}},mu=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function aI(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var hf=class{};function d3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gI(n.key,mu.none()):new wu(n.key,n.data,mu.none());{let t=n.data,r=Gi.empty(),i=new xn(Kr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Go(n.key,r,new ks(i.toArray()),mu.none())}}function bue(n,e,t){n instanceof wu?(function(i,s,o){let a=i.value.clone(),c=t6(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Go?(function(i,s,o){if(!aI(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=t6(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(h3(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function $g(n,e,t,r){return n instanceof wu?(function(s,o,a,c){if(!aI(s.precondition,o))return a;let l=s.value.clone(),u=n6(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Go?(function(s,o,a,c){if(!aI(s.precondition,o))return a;let l=n6(s.fieldTransforms,c,o),u=o.data;return u.setAll(h3(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return aI(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function wue(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=a3(r.transform,i||null);s!=null&&(t===null&&(t=Gi.empty()),t.set(r.field,s))}return t||null}function e6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tf(r,i,(s,o)=>vue(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wu=class extends hf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Go=class extends hf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function h3(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function t6(n,e,t){let r=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_ue(o,a,t[i]))}return r}function n6(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,yue(s,o,e))}return r}var gI=class extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uM=class extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dM=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&bue(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$g(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$g(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=s3();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=d3(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&tf(this.mutations,e.mutations,(t,r)=>e6(t,r))&&tf(this.baseMutations,e.baseMutations,(t,r)=>e6(t,r))}},hM=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return hue})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var fM=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var pM=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var sn,Ye;function Eue(n){switch(n){case q.OK:return fe(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return fe(15467,{code:n})}}function f3(n){if(n===void 0)return zo("GRPC error has no .code"),q.UNKNOWN;switch(n){case sn.OK:return q.OK;case sn.CANCELLED:return q.CANCELLED;case sn.UNKNOWN:return q.UNKNOWN;case sn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case sn.INTERNAL:return q.INTERNAL;case sn.UNAVAILABLE:return q.UNAVAILABLE;case sn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case sn.NOT_FOUND:return q.NOT_FOUND;case sn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case sn.ABORTED:return q.ABORTED;case sn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case sn.DATA_LOSS:return q.DATA_LOSS;default:return fe(39323,{code:n})}}(Ye=sn||(sn={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var r6=null;var Iue=new jo([4294967295,4294967295],0);function i6(n){let e=S6().encode(n),t=new RP;return t.update(e),new Uint8Array(t.digest())}function s6(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jo([t,r],0),new jo([i,s],0)]}var mM=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(r<0)throw new fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=jo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(jo.fromNumber(r)));return i.compare(Iue)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=i6(e),[r,i]=s6(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=i6(e),[r,i]=s6(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yI=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Xg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new $t(Ne),Wo(),$e())}},Xg=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var Zh=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},_I=class{constructor(e,t){this.targetId=e,this.De=t}},vI=class{constructor(e,t,r=Qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bI=class{constructor(){this.ve=0,this.Ce=o6(),this.Fe=Qn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=$e(),t=$e(),r=$e();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new Xg(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=o6()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},gM=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wo(),this.je=rI(),this.Je=rI(),this.He=new $t(Ne)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(aM(s))if(r===0){let o=new pe(s.path);this.Xe(t,o,Ki.newNoDocument(o,De.min()))}else ft(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}r6?.ct((function(u,f,p,m,E){var C,S,P,M,F,j;let z={localCacheCount:u,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},B=f.unchangedNames;return B&&(z.bloomFilter={applied:E===0,hashCount:(C=B?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(M=(P=(S=B?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&M!==void 0?M:0,padding:(j=(F=B?.bits)===null||F===void 0?void 0:F.padding)!==null&&j!==void 0?j:0,mightContain:T=>{var _;return(_=m?.mightContain(T))!==null&&_!==void 0&&_}}),z})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ho(r).toUint8Array()}catch(c){if(c instanceof hI)return _c("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mM(o,i,s)}catch(c){return _c(c instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&aM(a.target)){let c=new pe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Ki.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=$e();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new yI(e,t,this.He,this.ze,r);return this.ze=Wo(),this.je=rI(),this.Je=rI(),this.He=new $t(Ne),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new bI,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new xn(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new xn(Ne),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new bI),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function rI(){return new $t(pe.comparator)}function o6(){return new $t(pe.comparator)}var Tue={asc:"ASCENDING",desc:"DESCENDING"},Sue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cue={and:"AND",or:"OR"},yM=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _M(n,e){return n.useProto3Json||UI(e)?e:{value:e}}function wI(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Due(n,e){return wI(n,e.toTimestamp())}function Os(n){return ft(!!n,49232),De.fromTimestamp((function(t){let r=$o(t);return new cn(r.seconds,r.nanos)})(n))}function ON(n,e){return vM(n,e).canonicalString()}function vM(n,e){let t=(function(i){return new Qt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function m3(n){let e=Qt.fromString(n);return ft(b3(e),10190,{key:e.toString()}),e}function bM(n,e){return ON(n.databaseId,e.path)}function LP(n,e){let t=m3(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(y3(t))}function g3(n,e){return ON(n.databaseId,e)}function Aue(n){let e=m3(n);return e.length===4?Qt.emptyPath():y3(e)}function wM(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y3(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function a6(n,e,t){return{name:bM(n,e),fields:t.value.mapValue.fields}}function xue(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:fe(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(ft(u===void 0||typeof u=="string",58123),Qn.fromBase64String(u||"")):(ft(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Qn.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?q.UNKNOWN:f3(l.code);return new ce(u,l.message||"")})(o);t=new vI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=LP(n,r.document.name),s=Os(r.document.updateTime),o=r.document.createTime?Os(r.document.createTime):De.min(),a=new Gi({mapValue:{fields:r.document.fields}}),c=Ki.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Zh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=LP(n,r.document),s=r.readTime?Os(r.readTime):De.min(),o=Ki.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Zh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=LP(n,r.document),s=r.removedTargetIds||[];t=new Zh([],s,i,null)}else{if(!("filter"in e))return fe(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new pM(i,s),a=r.targetId;t=new _I(a,o)}}return t}function Rue(n,e){let t;if(e instanceof wu)t={update:a6(n,e.key,e.value)};else if(e instanceof gI)t={delete:bM(n,e.key)};else if(e instanceof Go)t={update:a6(n,e.key,e.data),updateMask:Uue(e.fieldMask)};else{if(!(e instanceof uM))return fe(16599,{Rt:e.type});t={verify:bM(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof uf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof df)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw fe(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:Due(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)})(n,e.precondition)),t}function kue(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Os(i.updateTime):Os(s);return o.isEqual(De.min())&&(o=Os(s)),new lM(o,i.transformResults||[])})(t,e))):[]}function Pue(n,e){return{documents:[g3(n,e.path)]}}function Mue(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=g3(n,i);let s=(function(l){if(l.length!==0)return v3(Fs.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(p){return{field:Yh(p.field),direction:Lue(p.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=_M(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Nue(n){let e=Aue(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ft(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(f){let p=_3(f);return p instanceof Fs&&X6(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(p=>(function(E){return new af(Xh(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,UI(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(f){let p=!!f.before,m=f.values||[];return new of(m,p)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let p=!f.before,m=f.values||[];return new of(m,p)})(t.endAt)),oue(e,i,o,s,a,"F",c,l)}function Oue(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xh(t.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xh(t.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Xh(t.unaryFilter.field);return vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Xh(t.unaryFilter.field);return vn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(Xh(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fs.create(t.compositeFilter.filters.map(r=>_3(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(t.compositeFilter.op))})(n):fe(30097,{filter:n})}function Lue(n){return Tue[n]}function Fue(n){return Sue[n]}function Vue(n){return Cue[n]}function Yh(n){return{fieldPath:n.canonicalString()}}function Xh(n){return Kr.fromServerFormat(n.fieldPath)}function v3(n){return n instanceof vn?(function(t){if(t.op==="=="){if(KH(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NAN"}};if(GH(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KH(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NOT_NAN"}};if(GH(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(t.field),op:Fue(t.op),value:t.value}}})(n):n instanceof Fs?(function(t){let r=t.getFilters().map(i=>v3(i));return r.length===1?r[0]:{compositeFilter:{op:Vue(t.op),filters:r}}})(n):fe(54877,{filter:n})}function Uue(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function b3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Jg=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=Qn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var EM=class{constructor(e){this.gt=e}};function jue(n){let e=Nue({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cM(e,e.limit,"L"):e}var EI=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Pt(e.integerValue));else if("doubleValue"in e){let r=Pt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Kg(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=$o(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ho(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?K6(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):G6(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):fe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=nf,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Pt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};EI.Ut=new EI;var IM=class{constructor(){this.Dn=new TM}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(_u.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(_u.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},TM=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(Qt.comparator)).toArray()}};var bje=new Uint8Array(0);var c6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w3=41943040,hi=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(w3,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);var Zg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var l6="LruGarbageCollector",Bue=1048576;function u6([n,e],[t,r]){let i=Ne(n,t);return i===0?Ne(e,r):i}var SM=class{constructor(e){this.Tr=e,this.buffer=new xn(u6),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();u6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},CM=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){re(l6,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gf(t)?re(l6,"Ignoring IndexedDB error during garbage collection: ",t):await mf(t)}await this.Rr(3e5)})}},DM=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(SN.ue);let r=new SM(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(c6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c6):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Kh()<=Ue.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function zue(n,e){return new DM(n,e)}var AM=class{constructor(){this.changes=new qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ki.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xM=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var RM=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$g(r.mutation,i,ks.empty(),cn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=hu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ug();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=hu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Wo(),o=zg(),a=(function(){return zg()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Go)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),$g(u.mutation,l,u.mutation.getFieldMask(),cn.now())):o.set(l.key,ks.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var f;return a.set(l,new xM(u,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=zg(),i=new $t((o,a)=>o-a),s=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||ks.empty();u=a.applyToLocalView(l,u),r.set(c,u);let f=(i.get(a.batchId)||$e()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,f=s3();u.forEach(p=>{if(!s.has(p)){let m=d3(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aue(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(hu()),a=Gg,c=s;return o.next(l=>W.forEach(l,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?W.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,$e())).next(u=>({batchId:a,changes:i3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=Ug();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ug();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let l=(function(f,p){return new cf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Ki.newInvalidDocument(u)))});let a=Ug();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&$g(u.mutation,l,ks.empty(),cn.now()),zI(t,l)&&(a=a.insert(c,l))}),a})}};var kM=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Os(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:jue(i.bundledQuery),readTime:Os(i.readTime)}})(t)),W.resolve()}};var PM=class{constructor(){this.overlays=new $t(pe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hu();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=hu(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new $t((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=hu(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=hu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fM(t,r));let s=this.kr.get(t);s===void 0&&(s=$e(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var MM=class{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var ey=class{constructor(){this.qr=new xn(on.Qr),this.$r=new xn(on.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new on(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new on(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new pe(new Qt([])),r=new on(t,e),i=new on(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new pe(new Qt([])),r=new on(t,e),i=new on(t,e+1),s=$e();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new on(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},on=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}};var NM=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new xn(on.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dM(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new on(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?CN:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new on(t,0),i=new on(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Ne);return t.forEach(i=>{let s=new on(i,0),o=new on(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;pe.isDocumentKey(s)||(s=s.child(""));let o=new on(new pe(s),0),a=new xn(Ne);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new on(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new on(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var OM=class{constructor(e){this.ni=e,this.docs=(function(){return new $t(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Ki.newInvalidDocument(t))}getEntries(e,t){let r=Wo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ki.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Wo(),o=t.path,a=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Ble(jle(u),r)<=0||(i.has(u.key)||zI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){fe(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LM(this)}getSize(e){return W.resolve(this.size)}},LM=class extends AM{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var FM=class{constructor(e){this.persistence=e,this.ii=new qo(t=>kN(t),PN),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new ey,this.targetCount=0,this._i=Zg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Zg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var II=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new SN(0),this.ci=!1,this.ci=!0,this.li=new MM,this.referenceDelegate=e(this),this.hi=new FM(this),this.indexManager=new IM,this.remoteDocumentCache=(function(i){return new OM(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new EM(t),this.Ti=new kM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new NM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new VM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},VM=class extends KP{constructor(e){super(),this.currentSequenceNumber=e}},UM=class n{constructor(e){this.persistence=e,this.Ai=new ey,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw fe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=pe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},TI=class n{constructor(e,t){this.persistence=e,this.gi=new qo(r=>qle(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zue(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sI(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var jM=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=$e(),i=$e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var BM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zM=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return bB()?8:$le(Cn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new BM;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Kh()<=Ue.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Qh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Kh()<=Ue.DEBUG&&re("QueryEngine","Query:",Qh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Kh()<=Ue.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Qh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):W.resolve())}ps(e,t){if(JH(t))return W.resolve(null);let r=Ns(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cM(t,null,"F"),r=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=$e(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,cM(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return JH(t)||i.isEqual(De.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Kh()<=Ue.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qh(t)),this.vs(e,o,t,Ule(i,Gg)).next(a=>a))})}bs(e,t){let r=new xn(n3(e));return t.forEach((i,s)=>{zI(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Kh()<=Ue.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Qh(t)),this.gs.getDocumentsMatchingQuery(e,t,_u.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var LN="LocalStore",$ue=3e8,$M=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new $t(Ne),this.Ms=new qo(s=>kN(s),PN),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RM(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Hue(n,e,t,r){return new $M(n,e,t,r)}async function E3(n,e){let t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=$e();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function que(n,e){let t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let f=l.batch,p=f.keys(),m=W.resolve();return p.forEach(E=>{m=m.next(()=>u.getEntry(c,E)).next(C=>{let S=l.docVersions.get(E);ft(S!==null,48541),C.version.compareTo(S)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),u.addEntry(C)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=$e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function I3(n){let e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Wue(n,e){let t=Ie(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,f)=>{let p=i.get(f);if(!p)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Qn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),(function(C,S,P){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=$ue?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(p,m,u)&&a.push(t.hi.updateTargetData(s,m))});let c=Wo(),l=$e();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Gue(s,o,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(De.min())){let u=t.hi.getLastRemoteSnapshotVersion(s).next(f=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=i,s))}function Gue(n,e,t){let r=$e(),i=$e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Wo();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(LN,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function Kue(n,e){let t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=CN),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Que(n,e){let t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Jg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function HM(n,e,t){let r=Ie(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gf(o))throw o;re(LN,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function d6(n,e,t){let r=Ie(n),i=De.min(),s=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let f=Ie(c),p=f.Ms.get(u);return p!==void 0?W.resolve(f.Fs.get(p)):f.hi.getTargetData(l,u)})(r,o,Ns(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:$e())).next(a=>(Yue(r,lue(e),a),{documents:a,qs:s})))}function Yue(n,e,t){let r=n.xs.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var SI=class{constructor(){this.activeTargetIds=mue()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qM=class{constructor(){this.Fo=new SI,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new SI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var WM=class{xo(e){}shutdown(){}};var h6="ConnectivityMonitor",CI=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){re(h6,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){re(h6,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var iI=null;function GM(){return iI===null?iI=(function(){return 268435456+Math.round(2147483648*Math.random())})():iI++,"0x"+iI.toString(16)}var FP="RestConnection",Xue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},KM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===fI?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=GM(),a=this.Go(e,t.toUriEncodedString());re(FP,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:l}=new URL(a),u=Za(l);return this.jo(e,a,c,r,u).then(f=>(re(FP,`Received RPC '${e}' ${o}: `,f),f),f=>{throw _c(FP,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=Xue[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var QM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Kn="WebChannelConnection",YM=class extends KM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=GM();return new Promise((a,c)=>{let l=new kP;l.setWithCredentials(!0),l.listenOnce(PP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vg.NO_ERROR:let f=l.getResponseJson();re(Kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Vg.TIMEOUT:re(Kn,`RPC '${e}' ${o} timed out`),c(new ce(q.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:let p=l.getStatus();if(re(Kn,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let E=m?.error;if(E&&E.status&&E.message){let C=(function(P){let M=P.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(M)>=0?M:q.UNKNOWN})(E.status);c(new ce(C,E.message))}else c(new ce(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ce(q.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{re(Kn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);re(Kn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=GM(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OP(),a=NP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");re(Kn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=o.createWebChannel(u,c);this.T_(f);let p=!1,m=!1,E=new QM({Ho:S=>{m?re(Kn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(re(Kn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),re(Kn,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Yo:()=>f.close()}),C=(S,P,M)=>{S.listen(P,F=>{try{M(F)}catch(j){setTimeout(()=>{throw j},0)}})};return C(f,Gh.EventType.OPEN,()=>{m||(re(Kn,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),C(f,Gh.EventType.CLOSE,()=>{m||(m=!0,re(Kn,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(f))}),C(f,Gh.EventType.ERROR,S=>{m||(m=!0,_c(Kn,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.__(new ce(q.UNAVAILABLE,"The operation could not be completed")))}),C(f,Gh.EventType.MESSAGE,S=>{var P;if(!m){let M=S.data[0];ft(!!M,16349);let F=M,j=F?.error||((P=F[0])===null||P===void 0?void 0:P.error);if(j){re(Kn,`RPC '${e}' stream ${i} received error:`,j);let z=j.status,B=(function(b){let A=sn[b];if(A!==void 0)return f3(A)})(z),T=j.message;B===void 0&&(B=q.INTERNAL,T="Unknown error status: "+z+" with message "+j.message),m=!0,E.__(new ce(B,T)),f.close()}else re(Kn,`RPC '${e}' stream ${i} received:`,M),E.a_(M)}}),C(a,MP.STAT_EVENT,S=>{S.stat===tI.PROXY?re(Kn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===tI.NOPROXY&&re(Kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function VP(){return typeof document<"u"?document:null}function $I(n){return new yM(n,!0)}var DI=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var f6="PersistentStream",AI=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new DI(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ce(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return re(f6,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(re(f6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XM=class extends AI{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=xue(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Os(o.readTime):De.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=wM(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=aM(c)?{documents:Pue(s,c)}:{query:Mue(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=p3(s,o.resumeToken);let l=_M(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=wI(s,o.snapshotVersion.toTimestamp());let l=_M(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Oue(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=wM(this.serializer),t.removeTarget=e,this.k_(t)}},JM=class extends AI{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=kue(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=wM(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Rue(this.serializer,r))};this.k_(t)}};var ZM=class{},eN=class extends ZM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ce(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,vM(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,vM(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},tN=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zo(t),this._a=!1):re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Eu="RemoteStore",nN=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Tu(this)&&(re(Eu,"Restarting streams for network reachability change."),await(async function(c){let l=Ie(c);l.Ia.add(4),await oy(l),l.Aa.set("Unknown"),l.Ia.delete(4),await HI(l)})(this))})}),this.Aa=new tN(r,i)}};async function HI(n){if(Tu(n))for(let e of n.da)await e(!0)}async function oy(n){for(let e of n.da)await e(!1)}function T3(n,e){let t=Ie(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),jN(t)?UN(t):yf(t).x_()&&VN(t,e))}function FN(n,e){let t=Ie(n),r=yf(t);t.Ta.delete(e),r.x_()&&S3(t,e),t.Ta.size===0&&(r.x_()?r.B_():Tu(t)&&t.Aa.set("Unknown"))}function VN(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yf(n).H_(e)}function S3(n,e){n.Ra.$e(e),yf(n).Y_(e)}function UN(n){n.Ra=new gM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),yf(n).start(),n.Aa.aa()}function jN(n){return Tu(n)&&!yf(n).M_()&&n.Ta.size>0}function Tu(n){return Ie(n).Ia.size===0}function C3(n){n.Ra=void 0}async function Jue(n){n.Aa.set("Online")}async function Zue(n){n.Ta.forEach((e,t)=>{VN(n,e)})}async function ede(n,e){C3(n),jN(n)?(n.Aa.la(e),UN(n)):n.Aa.set("Unknown")}async function tde(n,e,t){if(n.Aa.set("Online"),e instanceof vI&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){re(Eu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xI(n,r)}else if(e instanceof Zh?n.Ra.Ye(e):e instanceof _I?n.Ra.it(e):n.Ra.et(e),!t.isEqual(De.min()))try{let r=await I3(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ta.get(l);u&&s.Ta.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ta.get(c);if(!u)return;s.Ta.set(c,u.withResumeToken(Qn.EMPTY_BYTE_STRING,u.snapshotVersion)),S3(s,c);let f=new Jg(u.target,c,l,u.sequenceNumber);VN(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){re(Eu,"Failed to raise snapshot:",r),await xI(n,r)}}async function xI(n,e,t){if(!gf(e))throw e;n.Ia.add(1),await oy(n),n.Aa.set("Offline"),t||(t=()=>I3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(Eu,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await HI(n)})}function D3(n,e){return e().catch(t=>xI(n,t,e))}async function qI(n){let e=Ie(n),t=bc(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:CN;for(;nde(e);)try{let i=await Kue(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,rde(e,i)}catch(i){await xI(e,i)}A3(e)&&x3(e)}function nde(n){return Tu(n)&&n.Pa.length<10}function rde(n,e){n.Pa.push(e);let t=bc(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function A3(n){return Tu(n)&&!bc(n).M_()&&n.Pa.length>0}function x3(n){bc(n).start()}async function ide(n){bc(n).na()}async function sde(n){let e=bc(n);for(let t of n.Pa)e.X_(t.mutations)}async function ode(n,e,t){let r=n.Pa.shift(),i=hM.from(r,e,t);await D3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await qI(n)}async function ade(n,e){e&&bc(n).Z_&&await(async function(r,i){if((function(o){return Eue(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();bc(r).N_(),await D3(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qI(r)}})(n,e),A3(n)&&x3(n)}async function p6(n,e){let t=Ie(n);t.asyncQueue.verifyOperationInProgress(),re(Eu,"RemoteStore received new credentials");let r=Tu(t);t.Ia.add(3),await oy(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await HI(t)}async function cde(n,e){let t=Ie(n);e?(t.Ia.delete(2),await HI(t)):e||(t.Ia.add(2),await oy(t),t.Aa.set("Unknown"))}function yf(n){return n.Va||(n.Va=(function(t,r,i){let s=Ie(t);return s.ia(),new XM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Jue.bind(null,n),e_:Zue.bind(null,n),n_:ede.bind(null,n),J_:tde.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),jN(n)?UN(n):n.Aa.set("Unknown")):(await n.Va.stop(),C3(n))})),n.Va}function bc(n){return n.ma||(n.ma=(function(t,r,i){let s=Ie(t);return s.ia(),new JM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:ide.bind(null,n),n_:ade.bind(null,n),ea:sde.bind(null,n),ta:ode.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await qI(n)):(await n.ma.stop(),n.Pa.length>0&&(re(Eu,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var rN=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function BN(n,e){if(zo("AsyncQueue",`${e}: ${n}`),gf(n))return new ce(q.UNAVAILABLE,`${e}: ${n}`);throw n}var RI=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Ug(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var kI=class{constructor(){this.fa=new $t(pe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):fe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ff=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,RI.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&BI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var iN=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},sN=class{constructor(){this.queries=m6(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Ie(t),s=i.queries;i.queries=m6(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ce(q.ABORTED,"Firestore shutting down"))}};function m6(){return new qo(n=>t3(n),BI)}async function lde(n,e){let t=Ie(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new iN,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=BN(o,`Initialization of query '${Qh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&zN(t)}async function ude(n,e){let t=Ie(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dde(n,e){let t=Ie(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&zN(t)}function hde(n,e,t){let r=Ie(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function zN(n){n.Da.forEach(e=>{e.next()})}var oN,g6;(g6=oN||(oN={})).Fa="default",g6.Cache="cache";var aN=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ff(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ff.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==oN.Cache}};var PI=class{constructor(e){this.key=e}},MI=class{constructor(e){this.key=e}},cN=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=$e(),this.mutatedKeys=$e(),this.Xa=n3(e),this.eu=new RI(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new kI,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{let p=i.get(u),m=zI(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),C=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),S=!1;p&&m?p.data.isEqual(m.data)?E!==C&&(r.track({type:3,doc:m}),S=!0):this.iu(p,m)||(r.track({type:2,doc:m}),S=!0,(c&&this.Xa(m,c)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(c||l)&&(a=!0)),S&&(m?(o=o.add(m),s=C?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((u,f)=>(function(m,E){let C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{At:S})}};return C(m)-C(E)})(u.type,f.type)||this.Xa(u.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new ff(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new kI,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=$e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new MI(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new PI(r))}),t}uu(e){this.Ha=e.qs,this.Za=$e();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ff.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},$N="SyncEngine",lN=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},uN=class{constructor(e){this.key=e,this.lu=!1}},dN=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new qo(a=>t3(a),BI),this.Tu=new Map,this.Iu=new Set,this.du=new $t(pe.comparator),this.Eu=new Map,this.Au=new ey,this.Ru={},this.Vu=new Map,this.mu=Zg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function fde(n,e,t=!0){let r=O3(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await R3(r,e,t,!0),i}async function pde(n,e){let t=O3(n);await R3(t,e,!0,!1)}async function R3(n,e,t,r){let i=await Que(n.localStore,Ns(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await mde(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&T3(n.remoteStore,i),a}async function mde(n,e,t,r,i){n.gu=(f,p,m)=>(async function(C,S,P,M){let F=S.view.nu(P);F.Ds&&(F=await d6(C.localStore,S.query,!1).then(({documents:T})=>S.view.nu(T,F)));let j=M&&M.targetChanges.get(S.targetId),z=M&&M.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(F,C.isPrimaryClient,j,z);return _6(C,S.targetId,B._u),B.snapshot})(n,f,p,m);let s=await d6(n.localStore,e,!0),o=new cN(e,s.qs),a=o.nu(s.documents),c=Xg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);_6(n,t,l._u);let u=new lN(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function gde(n,e,t){let r=Ie(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!BI(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HM(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&FN(r.remoteStore,i.targetId),hN(r,i.targetId)}).catch(mf)):(hN(r,i.targetId),await HM(r.localStore,i.targetId,!0))}async function yde(n,e){let t=Ie(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),FN(t.remoteStore,r.targetId))}async function _de(n,e,t){let r=Sde(n);try{let i=await(function(o,a){let c=Ie(o),l=cn.now(),u=a.reduce((m,E)=>m.add(E.key),$e()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Wo(),C=$e();return c.Os.getEntries(m,u).next(S=>{E=S,E.forEach((P,M)=>{M.isValidDocument()||(C=C.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,E)).next(S=>{f=S;let P=[];for(let M of a){let F=wue(M,f.get(M.key).overlayedDocument);F!=null&&P.push(new Go(M.key,F,Q6(F.value.mapValue),mu.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,P,a)}).next(S=>{p=S;let P=S.applyToLocalDocumentSet(f,C);return c.documentOverlayCache.saveOverlays(m,S.batchId,P)})}).then(()=>({batchId:p.batchId,changes:i3(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new $t(Ne)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,t),await ay(r,i.changes),await qI(r.remoteStore)}catch(i){let s=BN(i,"Failed to persist write");t.reject(s)}}async function k3(n,e){let t=Ie(n);try{let r=await Wue(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ft(o.lu,14607):i.removedDocuments.size>0&&(ft(o.lu,42227),o.lu=!1))}),await ay(t,r,e)}catch(r){await mf(r)}}function y6(n,e,t){let r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ie(o);c.onlineState=a;let l=!1;c.queries.forEach((u,f)=>{for(let p of f.wa)p.va(a)&&(l=!0)}),l&&zN(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vde(n,e,t){let r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new $t(pe.comparator);o=o.insert(s,Ki.newNoDocument(s,De.min()));let a=$e().add(s),c=new yI(De.min(),new Map,new $t(Ne),o,a);await k3(r,c),r.du=r.du.remove(s),r.Eu.delete(e),HN(r)}else await HM(r.localStore,e,!1).then(()=>hN(r,e,t)).catch(mf)}async function bde(n,e){let t=Ie(n),r=e.batch.batchId;try{let i=await que(t.localStore,e);M3(t,r,null),P3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ay(t,i)}catch(i){await mf(i)}}async function wde(n,e,t){let r=Ie(n);try{let i=await(function(o,a){let c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ft(f!==null,37113),u=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);M3(r,e,t),P3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ay(r,i)}catch(i){await mf(i)}}function P3(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function M3(n,e,t){let r=Ie(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function hN(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||N3(n,r)})}function N3(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(FN(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),HN(n))}function _6(n,e,t){for(let r of t)r instanceof PI?(n.Au.addReference(r.key,e),Ede(n,r)):r instanceof MI?(re($N,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||N3(n,r.key)):fe(19791,{yu:r})}function Ede(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(re($N,"New document in limbo: "+t),n.Iu.add(r),HN(n))}function HN(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new pe(Qt.fromString(e)),r=n.mu.next();n.Eu.set(r,new uN(t)),n.du=n.du.insert(t,r),T3(n.remoteStore,new Jg(Ns(MN(t.path)),r,"TargetPurposeLimboResolution",SN.ue))}}async function ay(n,e,t){let r=Ie(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=jM.Es(c.targetId,l);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,l){let u=Ie(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>W.forEach(l,p=>W.forEach(p.Is,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>W.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!gf(f))throw f;re(LN,"Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let m=u.Fs.get(p),E=m.snapshotVersion,C=m.withLastLimboFreeSnapshotVersion(E);u.Fs=u.Fs.insert(p,C)}}})(r.localStore,s))}async function Ide(n,e){let t=Ie(n);if(!t.currentUser.isEqual(e)){re($N,"User change. New user:",e.toKey());let r=await E3(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ce(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ay(t,r.Bs)}}function Tde(n,e){let t=Ie(n),r=t.Eu.get(e);if(r&&r.lu)return $e().add(r.key);{let i=$e(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function O3(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=k3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vde.bind(null,e),e.hu.J_=dde.bind(null,e.eventManager),e.hu.pu=hde.bind(null,e.eventManager),e}function Sde(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wde.bind(null,e),e}var L3=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$I(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Hue(this.persistence,new zM,t.initialUser,this.serializer)}Du(t){return new II(UM.Vi,this.serializer)}bu(t){return new qM}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),fN=class extends L3{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof TI,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new CM(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new II(r=>TI.Vi(r,t),this.serializer)}};var Cde=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>y6(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ide.bind(null,this.syncEngine),await cde(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new sN})()}createDatastore(t){let r=$I(t.databaseInfo.databaseId),i=(function(o){return new YM(o)})(t.databaseInfo);return(function(o,a,c,l){return new eN(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new nN(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>y6(this.syncEngine,r,0),(function(){return CI.C()?new CI:new WM})())}createSyncEngine(t,r){return(function(s,o,a,c,l,u,f){let p=new dN(s,o,a,c,l,u);return f&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Ie(s);re(Eu,"RemoteStore shutting down."),o.Ia.add(5),await oy(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var pN=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wc="FirestoreClient",mN=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=An.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(wc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(wc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=BN(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function UP(n,e){n.asyncQueue.verifyOperationInProgress(),re(wc,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await E3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{_c("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{_c("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function v6(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Dde(n);re(wc,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>p6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>p6(e.remoteStore,i)),n._onlineComponents=e}async function Dde(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(wc,"Using user provided OfflineComponentProvider");try{await UP(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;_c("Error using user provided cache. Falling back to memory cache: "+t),await UP(n,new L3)}}else re(wc,"Using default OfflineComponentProvider"),await UP(n,new fN(void 0));return n._offlineComponents}async function F3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(wc,"Using user provided OnlineComponentProvider"),await v6(n,n._uninitializedComponentsProvider._online)):(re(wc,"Using default OnlineComponentProvider"),await v6(n,new Cde))),n._onlineComponents}function Ade(n){return F3(n).then(e=>e.syncEngine)}async function xde(n){let e=await F3(n),t=e.eventManager;return t.onListen=fde.bind(null,e.syncEngine),t.onUnlisten=gde.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yde.bind(null,e.syncEngine),t}function Rde(n,e,t={}){let r=new Ps;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new pN({next:p=>{u.Ou(),o.enqueueAndForget(()=>ude(s,f));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new ce(q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new ce(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new aN(MN(a.path),u,{includeMetadataChanges:!0,ka:!0});return lde(s,f)})(await xde(n),n.asyncQueue,e,t,r)),r.promise}function V3(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var b6=new Map;var U3="firestore.googleapis.com",w6=!0,NI=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U3,this.ssl=w6}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:w6;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bue)throw new ce(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vle("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ty=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jP;switch(r.type){case"firstParty":return new HP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=b6.get(t);r&&(re("ComponentProvider","Removing Datastore"),b6.delete(t),r.terminate())})(this),Promise.resolve()}};function j3(n,e,t,r={}){var i;n=Wg(n,ty);let s=Za(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Sw(`https://${c}`),Cw("Firestore",!0)),o.host!==U3&&o.host!==c&&_c("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Es(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=An.MOCK_USER;else{u=pB(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ce(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new An(p)}n._authCredentials=new BP(new cI(u,f))}}var gN=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ar=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ny(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sy(t,n._jsonSchema))return new n(e,r||null,new pe(Qt.fromString(t.referencePath)))}};ar._jsonSchemaVersion="firestore/documentReference/1.0",ar._jsonSchema={type:an("string",ar._jsonSchemaVersion),referencePath:an("string")};var ny=class n extends gN{constructor(e,t,r){super(e,t,MN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function B3(n,e,...t){if(n=vr(n),arguments.length===1&&(e=qg.newId()),Fle("doc","path",e),n instanceof ty){let r=Qt.fromString(e,...t);return jH(r),new ar(n,null,new pe(r))}{if(!(n instanceof ar||n instanceof ny))throw new ce(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qt.fromString(e,...t));return jH(r),new ar(n.firestore,n instanceof ny?n.converter:null,new pe(r))}}var E6="AsyncQueue",OI=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new DI(this,"async_queue_retry"),this.oc=()=>{let r=VP();r&&re(E6,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=VP();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=VP();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ps;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!gf(e))throw e;re(E6,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,zo("INTERNAL UNHANDLED ERROR: ",I6(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=rN.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&fe(47125,{hc:I6(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function I6(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var ry=class extends ty{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OI,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new OI(e),this._firestoreClient=void 0,await e}}};function z3(n,e){let t=typeof n=="object"?n:Yl(),r=typeof n=="string"?n:e||fI,i=hh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=fB("firestore");s&&j3(i,...s)}return i}function $3(n){if(n._terminated)throw new ce(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kde(n),n._firestoreClient}function kde(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,l,u){return new QP(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,V3(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new mN(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var mc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qn.fromBase64String(e))}catch(t){throw new ce(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sy(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};mc._jsonSchemaVersion="firestore/bytes/1.0",mc._jsonSchema={type:an("string",mc._jsonSchemaVersion),bytes:an("string")};var iy=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var LI=class{constructor(e){this._methodName=e}};var gc=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(sy(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};gc._jsonSchemaVersion="firestore/geoPoint/1.0",gc._jsonSchema={type:an("string",gc._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};var yc=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sy(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ce(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};yc._jsonSchemaVersion="firestore/vectorValue/1.0",yc._jsonSchema={type:an("string",yc._jsonSchemaVersion),vectorValues:an("object")};var Pde=/^__.*__$/,yN=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}};function H3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ec:n})}}var _N=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return FI(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(H3(this.Ec)&&Pde.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},vN=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$I(e)}Dc(e,t,r,i=!1){return new _N({Ec:e,methodName:t,bc:r,path:Kr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mde(n){let e=n._freezeSettings(),t=$I(n._databaseId);return new vN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nde(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);K3("Data must be an object, but it was:",o,r);let a=W3(r,o),c,l;if(s.merge)c=new ks(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let f of s.mergeFields){let p=Ode(e,f,t);if(!o.contains(p))throw new ce(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Fde(u,p)||u.push(p)}c=new ks(u),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new yN(new Gi(a),c,l)}function q3(n,e){if(G3(n=vr(n)))return K3("Unsupported field value:",e,n),W3(n,e);if(n instanceof LI)return(function(r,i){if(!H3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=q3(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gue(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=cn.fromDate(r);return{timestampValue:wI(i.serializer,s)}}if(r instanceof cn){let s=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wI(i.serializer,s)}}if(r instanceof gc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mc)return{bytesValue:p3(i.serializer,r._byteString)};if(r instanceof ar){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ON(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yc)return(function(o,a){return{mapValue:{fields:{[AN]:{stringValue:xN},[nf]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return NN(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${TN(r)}`)})(n,e)}function W3(n,e){let t={};return B6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Iu(n,(r,i)=>{let s=q3(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function G3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cn||n instanceof gc||n instanceof mc||n instanceof ar||n instanceof LI||n instanceof yc)}function K3(n,e,t){if(!G3(t)||!C6(t)){let r=TN(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Ode(n,e,t){if((e=vr(e))instanceof iy)return e._internalPath;if(typeof e=="string")return Q3(n,e);throw FI("Field path arguments must be of type string or ",n,!1,void 0,t)}var Lde=new RegExp("[~\\*/\\[\\]]");function Q3(n,e,t){if(e.search(Lde)>=0)throw FI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iy(...e.split("."))._internalPath}catch{throw FI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FI(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ce(q.INVALID_ARGUMENT,a+n+c)}function Fde(n,e){return n.some(t=>t.isEqual(e))}var VI=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Y3("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},bN=class extends VI{data(){return super.data()}};function Y3(n,e){return typeof e=="string"?Q3(n,e):e instanceof iy?e._internalPath:e._delegate._internalPath}var wN=class{convertValue(e,t="none"){switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Iu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[nf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Pt(o.doubleValue));return new yc(s)}convertGeoPoint(e){return new gc(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qg(e));default:return null}}convertTimestamp(e){let t=$o(e);return new cn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Qt.fromString(e);ft(b3(r),9688,{name:e});let i=new pI(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(t)||zo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Vde(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gu=class n extends VI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Y3("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gu._jsonSchemaVersion="firestore/documentSnapshot/1.0",gu._jsonSchema={type:an("string",gu._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};var ef=class extends gu{data(e={}){return super.data(e)}},Hg=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ef(this._firestore,this._userDataWriter,r.key,r,new pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Ude(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Ude(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:n})}}function X3(n){n=Wg(n,ar);let e=Wg(n.firestore,ry);return Rde($3(e),n._key).then(t=>Bde(e,n,t))}Hg._jsonSchemaVersion="firestore/querySnapshot/1.0",Hg._jsonSchema={type:an("string",Hg._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};var EN=class extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}};function J3(n,e,t){n=Wg(n,ar);let r=Wg(n.firestore,ry),i=Vde(n.converter,e,t);return jde(r,[Nde(Mde(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mu.none())])}function jde(n,e){return(function(r,i){let s=new Ps;return r.asyncQueue.enqueueAndForget(async()=>_de(await Ade(r),i,s)),s.promise})($3(n),e)}function Bde(n,e,t){let r=t.docs.get(e._key),i=new EN(n);return new gu(n,i,e._key,r,new pu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){pf=i})(tc),Bi(new sr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ry(new zP(r.getProvider("auth-internal")),new qP(o,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ce(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pI(l.options.projectId,u)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ft(LH,FH,e),Ft(LH,FH,"esm2017")})();var Su=class{constructor(e){return e}},Z3="firestore",qN=class{constructor(){return ph(Z3)}};var WN=new J("angularfire2.firestore-instances");function zde(n,e){let t=Qm(Z3,n,e);return t&&new Su(t)}function $de(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Su(r)}}var Hde={provide:qN,deps:[[new pr,WN]]},qde={provide:Su,useFactory:zde,deps:[[new pr,WN],Io]};function e5(n,...e){return Ft("angularfire",nc.full,"fst"),In([qde,Hde,{provide:WN,useFactory:$de(n),multi:!0,deps:[Se,yt,rc,Jl,[new pr,hg],[new pr,mh],...e]}])}var t5=br(PH,!0);var GN=br(B3,!0,2);var n5=br(X3,!0);var r5=br(z3,!0);var i5=br(J3,!0,2);var s5={production:!1,firebase:{apiKey:"AIzaSyAa3aCpidnJ3MB3D2FlpkCHGuVcRyhfmb8",authDomain:"vvskchaitanya-1.firebaseapp.com",projectId:"vvskchaitanya-1",storageBucket:"vvskchaitanya-1.appspot.com",messagingSenderId:"683857452414",appId:"1:683857452414:web:41b3da4368a3df73d5272f",measurementId:"G-BCJ69CN9L7"},githubToken:""};function cy(n){return n.buttons===0||n.detail===0}function ly(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var KN;function o5(){if(KN==null){let n=typeof document<"u"?document.head:null;KN=!!(n&&(n.createShadowRoot||n.attachShadow))}return KN}function QN(n){if(o5()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Qi(n){return n.composedPath?n.composedPath()[0]:n.target}var YN;try{YN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{YN=!1}var Qr=(()=>{class n{_platformId=N(lo);isBrowser=this._platformId?Q2(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||YN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uy;function a5(){if(uy==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uy=!0}))}finally{uy=uy||!1}return uy}function _f(n){return a5()?n:!!n.capture}function dy(n,e=0){return c5(n)?Number(n):arguments.length===2?e:0}function c5(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Vs(n){return n instanceof It?n.nativeElement:n}var l5=new J("cdk-input-modality-detector-options"),u5={ignoreKeys:[18,17,224,91,16]},d5=650,XN={passive:!0,capture:!0},h5=(()=>{class n{_platform=N(Qr);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new qt(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qi(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<d5||(this._modality.next(cy(t)?"keyboard":"mouse"),this._mostRecentTarget=Qi(t))};_onTouchstart=t=>{if(ly(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qi(t)};constructor(){let t=N(Se),r=N(Je),i=N(l5,{optional:!0});if(this._options=H(H({},u5),i),this.modalityDetected=this._modality.pipe(F0(1)),this.modalityChanged=this.modalityDetected.pipe(yd()),this._platform.isBrowser){let s=N(Vr).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(r,"keydown",this._onKeydown,XN),s.listen(r,"mousedown",this._onMousedown,XN),s.listen(r,"touchstart",this._onTouchstart,XN)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hy=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(hy||{}),f5=new J("cdk-focus-monitor-default-options"),WI=_f({passive:!0,capture:!0}),JN=(()=>{class n{_ngZone=N(Se);_platform=N(Qr);_inputModalityDetector=N(h5);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=N(Je);_stopInputModalityDetector=new ut;constructor(){let t=N(f5,{optional:!0});this._detectionMode=t?.detectionMode||hy.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let r=Qi(t);for(let i=r;i;i=i.parentElement)t.type==="focus"?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){let i=Vs(t);if(!this._platform.isBrowser||i.nodeType!==1)return he();let s=QN(i)||this._document,o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;let a={checkChildren:r,subject:new ut,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let r=Vs(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){let s=Vs(t),o=this._document.activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===hy.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===hy.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?d5:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,r){let i=this._elementInfo.get(r),s=Qi(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){let i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,WI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,WI)}),this._rootNodeFocusListenerCount.set(r,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,WI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,WI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var GI=new WeakMap,Cu=(()=>{class n{_appRef;_injector=N(yt);_environmentInjector=N(xt);load(t){let r=this._appRef=this._appRef||this._injector.get(ii),i=GI.get(r);i||(i={loaders:new Set,refs:[]},GI.set(r,i),r.onDestroy(()=>{GI.get(r)?.refs.forEach(s=>s.destroy()),GI.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(S2(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p5=new Set,Du,ZN=(()=>{class n{_platform=N(Qr);_nonce=N(Ud,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Gde}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Wde(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wde(n,e){if(!p5.has(n))try{Du||(Du=document.createElement("style"),e&&Du.setAttribute("nonce",e),Du.setAttribute("type","text/css"),document.head.appendChild(Du)),Du.sheet&&(Du.sheet.insertRule(`@media ${n} {body{ }}`,0),p5.add(n))}catch(t){console.error(t)}}function Gde(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}function Kde(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var m5=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qde=(()=>{class n{_mutationObserverFactory=N(m5);_observedElements=new Map;_ngZone=N(Se);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){let r=Vs(t);return new ue(i=>{let o=this._observeElement(r).pipe(de(a=>a.filter(c=>!Kde(c))),Jt(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{i.next(a)})});return()=>{o.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let r=new ut,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),g5=(()=>{class n{_contentObserver=N(Qde);_elementRef=N(It);event=new Bt;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=dy(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(M0(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",zr],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),y5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({providers:[m5]})}return n})();var KI;function Yde(){if(KI===void 0&&(KI=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(KI=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return KI}function vf(n){return Yde()?.createHTML(n)||n}var Jde=new J("MATERIAL_ANIMATIONS"),_5=null;function Zde(){return N(Jde,{optional:!0})?.animationsDisabled||N(Vd,{optional:!0})==="NoopAnimations"?"di-disabled":(_5??=N(ZN).matchMedia("(prefers-reduced-motion)").matches,_5?"reduced-motion":"enabled")}function bf(){return Zde()!=="enabled"}function Ko(n){return n!=null&&`${n}`!="false"}var fi=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(fi||{}),e1=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=fi.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},v5=_f({passive:!0,capture:!0}),t1=class{_events=new Map;addHandler(e,t,r,i){let s=this._events.get(t);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,v5)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let s=i.get(t);s&&(s.delete(r),s.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,v5)))}_delegateEventHandler=e=>{let t=Qi(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}},fy={enterDuration:225,exitDuration:150},ehe=800,b5=_f({passive:!0,capture:!0}),w5=["mousedown","touchstart"],E5=["mouseup","mouseleave","touchend","touchcancel"],the=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),wf=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new t1;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Vs(r)),s&&s.get(Cu).load(the)}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=H(H({},fy),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let o=r.radius||nhe(e,t,i),a=e-i.left,c=t-i.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let f=window.getComputedStyle(u),p=f.transitionProperty,m=f.transitionDuration,E=p==="none"||m==="0s"||m==="0s, 0s"||i.width===0&&i.height===0,C=new e1(this,u,r,E);u.style.transform="scale3d(1, 1, 1)",C.state=fi.FADING_IN,r.persistent||(this._mostRecentTransientRipple=C);let S=null;return!E&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let P=()=>{S&&(S.fallbackTimer=null),clearTimeout(F),this._finishRippleTransition(C)},M=()=>this._destroyRipple(C),F=setTimeout(M,l+100);u.addEventListener("transitionend",P),u.addEventListener("transitioncancel",M),S={onTransitionEnd:P,onTransitionCancel:M,fallbackTimer:F}}),this._activeRipples.set(C,S),(E||!l)&&this._finishRippleTransition(C),C}fadeOutRipple(e){if(e.state===fi.FADING_OUT||e.state===fi.HIDDEN)return;let t=e.element,r=H(H({},fy),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=fi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Vs(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,w5.forEach(r=>{n._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{E5.forEach(t=>{this._triggerElement.addEventListener(t,this,b5)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===fi.FADING_IN?this._startFadeOutTransition(e):e.state===fi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=fi.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=fi.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=cy(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+ehe;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ly(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===fi.VISIBLE||e.config.terminateOnPointerUp&&e.state===fi.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(w5.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(E5.forEach(t=>e.removeEventListener(t,this,b5)),this._pointerUpEventsRegistered=!1))}};function nhe(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var QI=new J("mat-ripple-global-options");var rhe={capture:!0},ihe=["focus","mousedown","mouseenter","touchstart"],n1="mat-ripple-loader-uninitialized",r1="mat-ripple-loader-class-name",I5="mat-ripple-loader-centered",YI="mat-ripple-loader-disabled",T5=(()=>{class n{_document=N(Je);_animationsDisabled=bf();_globalRippleOptions=N(QI,{optional:!0});_platform=N(Qr);_ngZone=N(Se);_injector=N(yt);_eventCleanups;_hosts=new Map;constructor(){let t=N(Vr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>ihe.map(r=>t.listen(this._document,r,this._onInteraction,rhe)))}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);this._eventCleanups.forEach(r=>r())}configureRipple(t,r){t.setAttribute(n1,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(r1))&&t.setAttribute(r1,r.className||""),r.centered&&t.setAttribute(I5,""),r.disabled&&t.setAttribute(YI,"")}setDisabled(t,r){let i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(YI,""):t.removeAttribute(YI)}_onInteraction=t=>{let r=Qi(t);if(r instanceof HTMLElement){let i=r.closest(`[${n1}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(r1)),t.append(r);let i=this._globalRippleOptions,s=this._animationsDisabled?0:i?.animation?.enterDuration??fy.enterDuration,o=this._animationsDisabled?0:i?.animation?.exitDuration??fy.exitDuration,a={rippleDisabled:this._animationsDisabled||i?.disabled||t.hasAttribute(YI),rippleConfig:{centered:t.hasAttribute(I5),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:o}}},c=new wf(a,this._ngZone,r,this._platform,this._injector),l=!a.rippleDisabled;l&&c.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:c,hasSetUpEvents:l}),t.removeAttribute(n1)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(r,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var she=new J("MAT_BUTTON_CONFIG");function S5(n){return n==null?void 0:T2(n)}var C5=(()=>{class n{_elementRef=N(It);_ngZone=N(Se);_animationsDisabled=bf();_config=N(she,{optional:!0});_focusMonitor=N(JN);_cleanupClick;_renderer=N(Rl);_rippleLoader=N(T5);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){N(Cu).load(XI);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(r,i){r&2&&(rr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Pl(i.color?"mat-"+i.color:""),gn("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",zr],disabled:[2,"disabled","disabled",zr],ariaDisabled:[2,"aria-disabled","ariaDisabled",zr],disabledInteractive:[2,"disabledInteractive","disabledInteractive",zr],tabIndex:[2,"tabIndex","tabIndex",S5],_tabindex:[2,"tabindex","_tabindex",S5]}})}return n})();var Yn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({})}return n})();var JI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();var ohe=["matButton",""],ahe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],che=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var D5=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Ef=(()=>{class n extends C5{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=lhe(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let r=this._elementRef.nativeElement.classList,i=this._appearance?D5.get(this._appearance):null,s=D5.get(t);i&&r.remove(...i),r.add(...s),this._appearance=t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[ps],attrs:ohe,ngContentSelectors:che,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(mr(ahe),Bd(0,"span",0),Rt(1),Ur(2,"span",1),Rt(3,1),jr(),Rt(4,2),Bd(5,"span",2)(6,"span",3)),r&2&&gn("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function lhe(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var Ec=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[JI,Yn]})}return n})();var uhe=["*"];var dhe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],hhe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],fhe=new J("MAT_CARD_CONFIG"),If=(()=>{class n{appearance;constructor(){let t=N(fhe,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(r,i){r&2&&gn("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")("mat-mdc-card-filled",i.appearance==="filled")("mdc-card--filled",i.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:uhe,decls:1,vars:0,template:function(r,i){r&1&&(mr(),Rt(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),ZI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var Tf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),A5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var eT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:hhe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,i){r&1&&(mr(dhe),Rt(0),Ur(1,"div",0),Rt(2,1),jr(),Rt(3,2))},encapsulation:2,changeDetection:0})}return n})();var Ic=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();function x5(n){return Error(`Unable to find icon with the name "${n}"`)}function phe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function R5(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function k5(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Qo=class{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}},M5=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Qo(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){let o=this._sanitizer.sanitize(Mn.HTML,i);if(!o)throw k5(i);let a=vf(o);return this._addSvgIconConfig(t,r,new Qo("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Qo(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){let s=this._sanitizer.sanitize(Mn.HTML,r);if(!s)throw k5(r);let o=vf(s);return this._addSvgIconSetConfig(t,new Qo("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(Mn.RESOURCE_URL,t);if(!r)throw R5(t);let i=this._cachedIconsByUrl.get(r);return i?he(tT(i)):this._loadSvgIconFromConfig(new Qo(t,null)).pipe(mn(s=>this._cachedIconsByUrl.set(r,s)),de(s=>tT(s)))}getNamedSvgIcon(t,r=""){let i=P5(r,t),s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):vp(x5(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?he(tT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(de(r=>tT(r)))}_getSvgFromIconSetConfigs(t,r){let i=this._extractIconWithNameFromAnySet(t,r);if(i)return he(i);let s=r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(ll(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Mn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),he(null)})));return k0(s).pipe(de(()=>{let o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw x5(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){let s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(mn(r=>t.svgText=r),de(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?he(null):this._fetchIcon(t).pipe(mn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){let s=t.querySelector(`[id="${r}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,i);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),i);let a=this._svgElementFromString(vf("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let r=this._svgElementFromString(vf("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){let{name:o,value:a}=i[s];o!=="id"&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw phe();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let o=this._sanitizer.sanitize(Mn.RESOURCE_URL,r);if(!o)throw R5(r);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(de(l=>vf(l)),ul(()=>this._inProgressUrlFetches.delete(o)),L0());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(P5(t,r),i),this}_addSvgIconSetConfig(t,r){let i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){let s=this._resolvers[i](r,t);if(s)return mhe(s)?new Qo(s.url,null,s.options):new Qo(s,null)}}static \u0275fac=function(r){return new(r||n)(ae(zD,8),ae($D),ae(Je,8),ae(Lr))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tT(n){return n.cloneNode(!0)}function P5(n,e){return n+":"+e}function mhe(n){return!!(n.url&&n.options)}var ghe=["*"],yhe=new J("MAT_ICON_DEFAULT_OPTIONS"),_he=new J("mat-icon-location",{providedIn:"root",factory:()=>{let n=N(Je),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),N5=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vhe=N5.map(n=>`[${n}]`).join(", "),bhe=/^url\(['"]?#(.*?)['"]?\)$/,Us=(()=>{class n{_elementRef=N(It);_iconRegistry=N(M5);_location=N(_he);_errorHandler=N(Lr);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Mt.EMPTY;constructor(){let t=N(new $d("aria-hidden"),{optional:!0}),r=N(yhe,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=t.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(vhe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)N5.forEach(o=>{let a=r[s],c=a.getAttribute(o),l=c?c.match(bhe):null;if(l){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(pn(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${r}:${i}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(rr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Pl(i.color?"mat-"+i.color:""),gn("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",zr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:ghe,decls:1,vars:0,template:function(r,i){r&1&&(mr(),Rt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),js=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();var wr=class n{auth=N(ko);router=N(vo);user$=dE(this.auth);constructor(){}async loginWithGoogle(){let e=new gR;try{await x4(this.auth,e),this.router.navigate(["/dashboard"])}catch(t){console.error("Login failed",t)}}async logout(){await R4(this.auth),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var nT=class n{authService=N(wr);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-home"]],decls:52,vars:0,consts:[[1,"home-container"],[1,"hero-section"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"cta-container"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"],[1,"hero-note"],[1,"value-prop-section"],[1,"features-grid"],[1,"feature-item"],[1,"icon-wrapper"],["color","primary"],["color","accent"],["color","warn"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),se(4,"Unlock Your Full Potential"),ne(),te(5,"p",4),se(6," Lifestyle Adapter is your personal growth companion. We combine data analytics with behavioral science to help you build lasting habits and optimize your daily life. "),ne(),te(7,"div",5)(8,"button",6),si("click",function(){return r.authService.loginWithGoogle()}),Lt(9,"div",7),te(10,"div",8)(11,"div",9),Fp(),te(12,"svg",10),Lt(13,"path",11)(14,"path",12)(15,"path",13)(16,"path",14)(17,"path",15),ne()(),Vp(),te(18,"span",16),se(19,"Sign in with Google"),ne(),te(20,"span",17),se(21,"Sign in with Google"),ne()()()(),te(22,"p",18),se(23,"Join thousands of users optimizing their lifestyle today."),ne()()(),te(24,"div",19)(25,"h2"),se(26,"Why Lifestyle Adapter?"),ne(),te(27,"div",20)(28,"div",21)(29,"div",22)(30,"mat-icon",23),se(31,"insights"),ne()(),te(32,"h3"),se(33,"Data-Driven Growth"),ne(),te(34,"p"),se(35,"Stop guessing. Use real data to understand what works for you and what doesn't."),ne()(),te(36,"div",21)(37,"div",22)(38,"mat-icon",24),se(39,"schedule"),ne()(),te(40,"h3"),se(41,"Habit Formation"),ne(),te(42,"p"),se(43,"Build streaks and track consistency to turn positive actions into automatic behaviors."),ne()(),te(44,"div",21)(45,"div",22)(46,"mat-icon",25),se(47,"trending_up"),ne()(),te(48,"h3"),se(49,"Measurable Progress"),ne(),te(50,"p"),se(51,"Watch your LA Score rise as you improve your sleep, activity, and focus."),ne()()()()())},dependencies:[Ec,Ic,js,Us],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a237e,#283593);color:#fff;padding:100px 20px;text-align:center;display:flex;justify-content:center;align-items:center}.hero-content[_ngcontent-%COMP%]{max-width:800px}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:24px;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300;margin-bottom:48px;opacity:.9;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto}.cta-container[_ngcontent-%COMP%]{margin-bottom:24px;display:flex;justify-content:center}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}.hero-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7;margin-top:16px}.value-prop-section[_ngcontent-%COMP%]{padding:80px 20px;background-color:#f5f5f5;text-align:center}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:60px}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:40px;max-width:1200px;margin:0 auto}.feature-item[_ngcontent-%COMP%]{background:#fff;padding:40px 30px;border-radius:16px;box-shadow:0 4px 20px #0000000d;transition:transform .3s ease}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.icon-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;width:64px;height:64px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 auto 24px}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:16px;color:#333}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}@media(max-width:768px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem}}"]})};var rT=class n{authService=N(wr);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-login"]],decls:12,vars:0,consts:[[1,"login-container"],[1,"login-card"],["mat-flat-button","","color","primary",1,"google-signin-btn",3,"click"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),se(4,"Welcome Back"),ne(),te(5,"mat-card-subtitle"),se(6,"Sign in to continue"),ne()(),te(7,"mat-card-content")(8,"button",2),si("click",function(){return r.authService.loginWithGoogle()}),te(9,"mat-icon"),se(10,"login"),ne(),se(11," Sign in with Google "),ne()()()())},dependencies:[Ec,Ef,Ic,If,Tf,eT,A5,ZI,js,Us],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh}.login-card[_ngcontent-%COMP%]{padding:30px;text-align:center;max-width:400px;width:100%}.google-signin-btn[_ngcontent-%COMP%]{width:100%;padding:8px 16px;margin-top:20px}"]})};var iT=class n{authService=N(wr);ngOnInit(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,r){t&1&&(Ur(0,"p"),se(1,"Logging out..."),jr())},encapsulation:2})};function yy(n){return n+.5|0}var Tc=(n,e,t)=>Math.max(Math.min(n,t),e);function my(n){return Tc(yy(n*2.55),0,255)}function Sc(n){return Tc(yy(n*255),0,255)}function Yo(n){return Tc(yy(n/2.55)/100,0,1)}function O5(n){return Tc(yy(n*100),0,100)}var pi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a1=[..."0123456789ABCDEF"],whe=n=>a1[n&15],Ehe=n=>a1[(n&240)>>4]+a1[n&15],sT=n=>(n&240)>>4===(n&15),Ihe=n=>sT(n.r)&&sT(n.g)&&sT(n.b)&&sT(n.a);function The(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&pi[n[1]]*17,g:255&pi[n[2]]*17,b:255&pi[n[3]]*17,a:e===5?pi[n[4]]*17:255}:(e===7||e===9)&&(t={r:pi[n[1]]<<4|pi[n[2]],g:pi[n[3]]<<4|pi[n[4]],b:pi[n[5]]<<4|pi[n[6]],a:e===9?pi[n[7]]<<4|pi[n[8]]:255})),t}var She=(n,e)=>n<255?e(n):"";function Che(n){var e=Ihe(n)?whe:Ehe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+She(n.a,e):void 0}var Dhe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U5(n,e,t){let r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Ahe(n,e,t){let r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function xhe(n,e,t){let r=U5(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Rhe(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function c1(n){let t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=Rhe(t,r,i,u,s),c=c*60+.5),[c|0,l||0,a]}function l1(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Sc)}function u1(n,e,t){return l1(U5,n,e,t)}function khe(n,e,t){return l1(xhe,n,e,t)}function Phe(n,e,t){return l1(Ahe,n,e,t)}function j5(n){return(n%360+360)%360}function Mhe(n){let e=Dhe.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?my(+e[5]):Sc(+e[5]));let i=j5(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=khe(i,s,o):e[1]==="hsv"?r=Phe(i,s,o):r=u1(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function Nhe(n,e){var t=c1(n);t[0]=j5(t[0]+e),t=u1(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Ohe(n){if(!n)return;let e=c1(n),t=e[0],r=O5(e[1]),i=O5(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Yo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var L5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lhe(){let n={},e=Object.keys(F5),t=Object.keys(L5),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,L5[s]);s=parseInt(F5[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var oT;function Fhe(n){oT||(oT=Lhe(),oT.transparent=[0,0,0,0]);let e=oT[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Vhe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Uhe(n){let e=Vhe.exec(n),t=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];t=e[8]?my(o):Tc(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?my(r):Tc(r,0,255)),i=255&(e[4]?my(i):Tc(i,0,255)),s=255&(e[6]?my(s):Tc(s,0,255)),{r,g:i,b:s,a:t}}}function jhe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Yo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var o1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Sf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Bhe(n,e,t){let r=Sf(Yo(n.r)),i=Sf(Yo(n.g)),s=Sf(Yo(n.b));return{r:Sc(o1(r+t*(Sf(Yo(e.r))-r))),g:Sc(o1(i+t*(Sf(Yo(e.g))-i))),b:Sc(o1(s+t*(Sf(Yo(e.b))-s))),a:n.a+t*(e.a-n.a)}}function aT(n,e,t){if(n){let r=c1(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=u1(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function B5(n,e){return n&&Object.assign(e||{},n)}function V5(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Sc(n[3]))):(e=B5(n,{r:0,g:0,b:0,a:1}),e.a=Sc(e.a)),e}function zhe(n){return n.charAt(0)==="r"?Uhe(n):Mhe(n)}var gy=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=V5(e):t==="string"&&(r=The(e)||Fhe(e)||zhe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=B5(this._rgb);return e&&(e.a=Yo(e.a)),e}set rgb(e){this._rgb=V5(e)}rgbString(){return this._valid?jhe(this._rgb):void 0}hexString(){return this._valid?Che(this._rgb):void 0}hslString(){return this._valid?Ohe(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Bhe(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Sc(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=yy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return aT(this._rgb,2,e),this}darken(e){return aT(this._rgb,2,-e),this}saturate(e){return aT(this._rgb,1,e),this}desaturate(e){return aT(this._rgb,1,-e),this}rotate(e){return Nhe(this._rgb,e),this}};function zs(){}var J5=(()=>{let n=0;return()=>n++})();function Xe(n){return n==null}function St(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function He(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ut(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Cr(n,e){return Ut(n)?n:e}function Re(n,e){return typeof n>"u"?e:n}var Z5=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function wt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function pt(n,e,t,r){let i,s,o;if(St(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(He(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function by(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function dT(n){if(St(n))return n.map(dT);if(He(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=dT(n[t[i]]);return e}return n}function eq(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $he(n,e,t,r){if(!eq(n))return;let i=e[n],s=t[n];He(i)&&He(s)?Df(i,s,r):e[n]=dT(s)}function Df(n,e,t){let r=St(e)?e:[e],i=r.length;if(!He(n))return n;t=t||{};let s=t.merger||$he,o;for(let a=0;a<i;++a){if(o=r[a],!He(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function xf(n,e){return Df(n,e,{merger:Hhe})}function Hhe(n,e,t){if(!eq(n))return;let r=e[n],i=t[n];He(r)&&He(i)?xf(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=dT(i))}var z5={"":n=>n,x:n=>n.x,y:n=>n.y};function qhe(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function Whe(n){let e=qhe(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function ku(n,e){return(z5[e]||(z5[e]=Whe(e)))(n)}function mT(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Rf=n=>typeof n<"u",Xo=n=>typeof n=="function",p1=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function tq(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Yt=Math.PI,Tr=2*Yt,Ghe=Tr+Yt,hT=Number.POSITIVE_INFINITY,Khe=Yt/180,Ir=Yt/2,Au=Yt/4,$5=Yt*2/3,Jo=Math.log10,Yi=Math.sign;function kf(n,e,t){return Math.abs(n-e)<t}function m1(n){let e=Math.round(n);n=kf(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Jo(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function nq(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function Qhe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Pf(n){return!Qhe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function rq(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function g1(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Zo(n){return n*(Yt/180)}function gT(n){return n*(180/Yt)}function y1(n){if(!Ut(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function iq(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t);return s<-.5*Yt&&(s+=Tr),{angle:s,distance:i}}function fT(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Yhe(n,e){return(n-e+Ghe)%Tr-Yt}function Er(n){return(n%Tr+Tr)%Tr}function _1(n,e,t,r){let i=Er(n),s=Er(e),o=Er(t),a=Er(s-i),c=Er(o-i),l=Er(i-s),u=Er(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function Sr(n,e,t){return Math.max(e,Math.min(t,n))}function sq(n){return Sr(n,-32768,32767)}function ea(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function yT(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}var Dc=(n,e,t,r)=>yT(n,t,r?i=>{let s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),oq=(n,e,t)=>yT(n,t,r=>n[r][e]>=t);function aq(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var cq=["push","pop","shift","splice","unshift"];function lq(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cq.forEach(t=>{let r="_onData"+mT(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function v1(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(cq.forEach(s=>{delete n[s]}),delete n._chartjs)}function b1(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var w1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function E1(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,w1.call(window,()=>{r=!1,n.apply(e,t)}))}}function uq(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var _T=n=>n==="start"?"left":n==="end"?"right":"center",Nn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,dq=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function hq(n,e,t){let r=e.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:E}=o.getUserBounds();if(m){if(i=Math.min(Dc(c,u,f).lo,t?r:Dc(e,u,o.getPixelForValue(f)).lo),l){let C=c.slice(0,i+1).reverse().findIndex(S=>!Xe(S[a.axis]));i-=Math.max(0,C)}i=Sr(i,0,r-1)}if(E){let C=Math.max(Dc(c,o.axis,p,!0).hi+1,t?0:Dc(e,u,o.getPixelForValue(p),!0).hi+1);if(l){let S=c.slice(C-1).findIndex(P=>!Xe(P[a.axis]));C+=Math.max(0,S)}s=Sr(C,i,r)-i}else s=r-i}return{start:i,count:s}}function fq(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}var cT=n=>n===0||n===1,H5=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Tr/t)),q5=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Tr/t)+1,Cf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ir)+1,easeOutSine:n=>Math.sin(n*Ir),easeInOutSine:n=>-.5*(Math.cos(Yt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cT(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cT(n)?n:H5(n,.075,.3),easeOutElastic:n=>cT(n)?n:q5(n,.075,.3),easeInOutElastic(n){return cT(n)?n:n<.5?.5*H5(n*2,.1125,.45):.5+.5*q5(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Cf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Cf.easeInBounce(n*2)*.5:Cf.easeOutBounce(n*2-1)*.5+.5};function I1(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function T1(n){return I1(n)?n:new gy(n)}function d1(n){return I1(n)?n:new gy(n).saturate(.5).darken(.1).hexString()}var Xhe=["x","y","borderWidth","radius","tension"],Jhe=["color","borderColor","backgroundColor"];function Zhe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Jhe},numbers:{type:"number",properties:Xhe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function efe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var W5=new Map;function tfe(n,e){e=e||{};let t=n+JSON.stringify(e),r=W5.get(t);return r||(r=new Intl.NumberFormat(n,e),W5.set(t,r)),r}function vT(n,e,t){return tfe(e,t).format(n)}var pq={values(n){return St(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=nfe(n,t)}let o=Jo(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),vT(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(Jo(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?pq.numeric.call(this,n,e,t):""}};function nfe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var wy={formatters:pq};function rfe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var xc=Object.create(null),bT=Object.create(null);function _y(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function h1(n,e,t){return typeof e=="string"?Df(_y(n,e),t):Df(_y(n,""),e)}var f1=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>d1(i.backgroundColor),this.hoverBorderColor=(r,i)=>d1(i.borderColor),this.hoverColor=(r,i)=>d1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return h1(this,e,t)}get(e){return _y(this,e)}describe(e,t){return h1(bT,e,t)}override(e,t){return h1(xc,e,t)}route(e,t,r,i){let s=_y(this,e),o=_y(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[i];return He(c)?Object.assign({},l,c):Re(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Dt=new f1({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zhe,efe,rfe]);function ife(n){return!n||Xe(n.size)||Xe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function vy(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function mq(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,f,p;for(c=0;c<a;c++)if(f=t[c],f!=null&&!St(f))o=vy(n,i,s,o,f);else if(St(f))for(l=0,u=f.length;l<u;l++)p=f[l],p!=null&&!St(p)&&(o=vy(n,i,s,o,p));n.restore();let m=s.length/2;if(m>t.length){for(c=0;c<m;c++)delete i[s[c]];s.splice(0,m)}return o}function Rc(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function S1(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function wT(n,e,t,r){C1(n,e,t,r,null)}function C1(n,e,t,r,i){let s,o,a,c,l,u,f,p,m=e.pointStyle,E=e.rotation,C=e.radius,S=(E||0)*Khe;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(S),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(C)||C<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,r,i/2,C,0,0,Tr):n.arc(t,r,C,0,Tr),n.closePath();break;case"triangle":u=i?i/2:C,n.moveTo(t+Math.sin(S)*u,r-Math.cos(S)*C),S+=$5,n.lineTo(t+Math.sin(S)*u,r-Math.cos(S)*C),S+=$5,n.lineTo(t+Math.sin(S)*u,r-Math.cos(S)*C),n.closePath();break;case"rectRounded":l=C*.516,c=C-l,o=Math.cos(S+Au)*c,f=Math.cos(S+Au)*(i?i/2-l:c),a=Math.sin(S+Au)*c,p=Math.sin(S+Au)*(i?i/2-l:c),n.arc(t-f,r-a,l,S-Yt,S-Ir),n.arc(t+p,r-o,l,S-Ir,S),n.arc(t+f,r+a,l,S,S+Ir),n.arc(t-p,r+o,l,S+Ir,S+Yt),n.closePath();break;case"rect":if(!E){c=Math.SQRT1_2*C,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}S+=Au;case"rectRot":f=Math.cos(S)*(i?i/2:C),o=Math.cos(S)*C,a=Math.sin(S)*C,p=Math.sin(S)*(i?i/2:C),n.moveTo(t-f,r-a),n.lineTo(t+p,r-o),n.lineTo(t+f,r+a),n.lineTo(t-p,r+o),n.closePath();break;case"crossRot":S+=Au;case"cross":f=Math.cos(S)*(i?i/2:C),o=Math.cos(S)*C,a=Math.sin(S)*C,p=Math.sin(S)*(i?i/2:C),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o);break;case"star":f=Math.cos(S)*(i?i/2:C),o=Math.cos(S)*C,a=Math.sin(S)*C,p=Math.sin(S)*(i?i/2:C),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o),S+=Au,f=Math.cos(S)*(i?i/2:C),o=Math.cos(S)*C,a=Math.sin(S)*C,p=Math.sin(S)*(i?i/2:C),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o);break;case"line":o=i?i/2:Math.cos(S)*C,a=Math.sin(S)*C,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(S)*(i?i/2:C),r+Math.sin(S)*C);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Bs(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Ey(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Iy(n){n.restore()}function gq(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function yq(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function sfe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Xe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function ofe(n,e,t,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function afe(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function kc(n,e,t,r,i,s={}){let o=St(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=i.string,sfe(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&afe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Xe(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,r,s.maxWidth)),n.fillText(l,t,r,s.maxWidth),ofe(n,t,r,l,s),r+=Number(i.lineHeight);n.restore()}function Mf(n,e){let{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Yt,Yt,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Yt,Ir,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ir,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Ir,!0),n.lineTo(t+o.topLeft,r)}var cfe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lfe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ufe(n,e){let t=(""+n).match(cfe);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var dfe=n=>+n||0;function D1(n,e){let t={},r=He(e),i=r?Object.keys(e):e,s=He(n)?r?o=>Re(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of i)t[o]=dfe(s(o));return t}function A1(n){return D1(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Pc(n){return D1(n,["topLeft","topRight","bottomLeft","bottomRight"])}function On(n){let e=A1(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ln(n,e){n=n||{},e=e||Dt.font;let t=Re(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Re(n.style,e.style);r&&!(""+r).match(lfe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Re(n.family,e.family),lineHeight:ufe(Re(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Re(n.weight,e.weight),string:""};return i.string=ife(i),i}function Ty(n,e,t,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&St(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function _q(n,e,t){let{min:r,max:i}=n,s=Z5(e,(i-r)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function ta(n,e){return Object.assign(Object.create(n),e)}function ET(n,e=[""],t,r,i=()=>n[0]){let s=t||n;typeof r>"u"&&(r=wq("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>ET([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return vq(a,c,()=>vfe(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return K5(a).includes(c)},ownKeys(a){return K5(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Ru(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:x1(n,r),setContext:s=>Ru(n,s,t,r),override:s=>Ru(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return vq(s,o,()=>ffe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function x1(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Xo(t)?t:()=>t,isIndexable:Xo(r)?r:()=>r}}var hfe=(n,e)=>n?n+mT(e):e,R1=(n,e)=>He(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function vq(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function ffe(n,e,t){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[e];return Xo(a)&&o.isScriptable(e)&&(a=pfe(e,a,n,t)),St(a)&&a.length&&(a=mfe(e,a,n,o.isIndexable)),R1(e,a)&&(a=Ru(a,i,s&&s[e],o)),a}function pfe(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||r);return a.delete(n),R1(n,c)&&(c=k1(i._scopes,i,n,c)),c}function mfe(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(He(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let f=k1(l,i,n,u);e.push(Ru(f,s,o&&o[n],a))}}return e}function bq(n,e,t){return Xo(n)?n(e,t):n}var gfe=(n,e)=>n===!0?e:typeof n=="string"?ku(e,n):void 0;function yfe(n,e,t,r,i){for(let s of e){let o=gfe(t,s);if(o){n.add(o);let a=bq(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function k1(n,e,t,r){let i=e._rootScopes,s=bq(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let c=G5(a,o,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=G5(a,o,s,c,r),c===null)?!1:ET(Array.from(a),[""],i,s,()=>_fe(e,t,r))}function G5(n,e,t,r,i){for(;t;)t=yfe(n,e,t,r,i);return t}function _fe(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return St(i)&&He(t)?t:i||{}}function vfe(n,e,t,r){let i;for(let s of e)if(i=wq(hfe(s,n),t),typeof i<"u")return R1(n,i)?k1(t,r,n,i):i}function wq(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function K5(n){let e=n._keys;return e||(e=n._keys=bfe(n._scopes)),e}function bfe(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}var wfe=Number.EPSILON||1e-14,Af=(n,e)=>e<n.length&&!n[e].skip&&n[e],Eq=n=>n==="x"?"y":"x";function Efe(n,e,t,r){let i=n.skip?e:n,s=e,o=t.skip?e:t,a=fT(s,i),c=fT(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let f=r*l,p=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function Ife(n,e,t){let r=n.length,i,s,o,a,c,l=Af(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Af(n,u+1),!(!c||!l)){if(kf(e[u],0,wfe)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function Tfe(n,e,t="x"){let r=Eq(t),i=n.length,s,o,a,c=Af(n,0);for(let l=0;l<i;++l){if(o=a,a=c,c=Af(n,l+1),!a)continue;let u=a[t],f=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=f-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=f+s*e[l])}}function Sfe(n,e="x"){let t=Eq(e),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,c,l=Af(n,0);for(o=0;o<r;++o)if(a=c,c=l,l=Af(n,o+1),!!c){if(l){let u=l[e]-c[e];i[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?Yi(i[o-1])!==Yi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Ife(n,i,s),Tfe(n,s,e)}function lT(n,e,t){return Math.max(Math.min(n,t),e)}function Cfe(n,e){let t,r,i,s,o,a=Bs(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&Bs(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=lT(i.cp1x,e.left,e.right),i.cp1y=lT(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=lT(i.cp2x,e.left,e.right),i.cp2y=lT(i.cp2y,e.top,e.bottom)))}function Iq(n,e,t,r,i){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Sfe(n,i);else{let l=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=Efe(l,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&Cfe(n,t)}function IT(){return typeof window<"u"&&typeof document<"u"}function TT(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function pT(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var ST=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Dfe(n,e){return ST(n).getPropertyValue(e)}var Afe=["top","right","bottom","left"];function xu(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let s=Afe[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var xfe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Rfe(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,c;if(xfe(i,s,n.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Mc(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=ST(t),s=i.boxSizing==="border-box",o=xu(i,"padding"),a=xu(i,"border","width"),{x:c,y:l,box:u}=Rfe(n,t),f=o.left+(u&&a.left),p=o.top+(u&&a.top),{width:m,height:E}=e;return s&&(m-=o.width+a.width,E-=o.height+a.height),{x:Math.round((c-f)/m*t.width/r),y:Math.round((l-p)/E*t.height/r)}}function kfe(n,e,t){let r,i;if(e===void 0||t===void 0){let s=n&&TT(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=ST(s),c=xu(a,"border","width"),l=xu(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,r=pT(a.maxWidth,s,"clientWidth"),i=pT(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||hT,maxHeight:i||hT}}var Ac=n=>Math.round(n*10)/10;function Tq(n,e,t,r){let i=ST(n),s=xu(i,"margin"),o=pT(i.maxWidth,n,"clientWidth")||hT,a=pT(i.maxHeight,n,"clientHeight")||hT,c=kfe(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let p=xu(i,"border","width"),m=xu(i,"padding");l-=m.width+p.width,u-=m.height+p.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=Ac(Math.min(l,o,c.maxWidth)),u=Ac(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Ac(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=Ac(Math.floor(u*r))),{width:l,height:u}}function P1(n,e,t){let r=e||1,i=Ac(n.height*r),s=Ac(n.width*r);n.height=Ac(n.height),n.width=Ac(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var Sq=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};IT()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function M1(n,e){let t=Dfe(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Cc(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Cq(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Dq(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Cc(n,i,t),a=Cc(i,s,t),c=Cc(s,e,t),l=Cc(o,a,t),u=Cc(a,c,t);return Cc(l,u,t)}var Pfe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Mfe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Pu(n,e,t){return n?Pfe(e,t):Mfe()}function N1(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function O1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Aq(n){return n==="angle"?{between:_1,compare:Yhe,normalize:Er}:{between:ea,compare:(e,t)=>e-t,normalize:e=>e}}function Q5({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Nfe(n,e,t){let{property:r,start:i,end:s}=t,{between:o,normalize:a}=Aq(r),c=e.length,{start:l,end:u,loop:f}=n,p,m;if(f){for(l+=c,u+=c,p=0,m=c;p<m&&o(a(e[l%c][r]),i,s);++p)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:f,style:n.style}}function L1(n,e,t){if(!t)return[n];let{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=Aq(r),{start:u,end:f,loop:p,style:m}=Nfe(n,e,t),E=[],C=!1,S=null,P,M,F,j=()=>c(i,F,P)&&a(i,F)!==0,z=()=>a(s,P)===0||c(s,F,P),B=()=>C||j(),T=()=>!C||z();for(let _=u,b=u;_<=f;++_)M=e[_%o],!M.skip&&(P=l(M[r]),P!==F&&(C=c(P,i,s),S===null&&B()&&(S=a(P,i)===0?_:b),S!==null&&T()&&(E.push(Q5({start:S,end:_,loop:p,count:o,style:m})),S=null),b=_,F=P));return S!==null&&E.push(Q5({start:S,end:f,loop:p,count:o,style:m})),E}function F1(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let s=L1(r[i],n.points,e);s.length&&t.push(...s)}return t}function Ofe(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Lfe(n,e,t,r){let i=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function xq(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=Ofe(t,i,s,r);if(r===!0)return Y5(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+i:a,l=!!n._fullLoop&&o===0&&a===i-1;return Y5(n,Lfe(t,o,c,l),t,e)}function Y5(n,e,t,r){return!r||!r.setContext||!t?e:Ffe(n,e,t,r)}function Ffe(n,e,t,r){let i=n._chart.getContext(),s=X5(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,f=e[0].start,p=f;function m(E,C,S,P){let M=a?-1:1;if(E!==C){for(E+=c;t[E%c].skip;)E-=M;for(;t[C%c].skip;)C+=M;E%c!==C%c&&(l.push({start:E%c,end:C%c,loop:S,style:P}),u=P,f=C%c)}}for(let E of e){f=a?f:E.start;let C=t[f%c],S;for(p=f+1;p<=E.end;p++){let P=t[p%c];S=X5(r.setContext(ta(i,{type:"segment",p0:C,p1:P,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),Vfe(S,u)&&m(f,p-1,E.loop,u),C=P,u=S}f<p-1&&m(f,p-1,E.loop,u)}return l}function X5(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Vfe(n,e){if(!e)return!1;let t=[],r=function(i,s){return I1(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function uT(n,e,t){return n.options.clip?n[t]:e[t]}function Ufe(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:uT(t,e,"left"),right:uT(t,e,"right"),top:uT(r,e,"top"),bottom:uT(r,e,"bottom")}:e}function V1(n,e){let t=e._clip;if(t.disabled)return!1;let r=Ufe(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var Y1=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=w1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},na=new Y1,Rq="transparent",jfe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=T1(n||Rq),i=r.valid&&T1(e||Rq);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},X1=class{constructor(e,t,r,i){let s=t[r];i=Ty([e.to,i,s,e.from]);let o=Ty([e.from,s,i]);this._active=!0,this._fn=e.fn||jfe[e.type||typeof o],this._easing=Cf[e.easing]||Cf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ty([e.to,t,i,e.from]),this._from=Ty([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},MT=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!He(e))return;let t=Object.keys(Dt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!He(s))return;let o={};for(let a of t)o[a]=s[a];(St(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){let r=t.options,i=zfe(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&Bfe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],f=s[l],p=r.get(l);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[l]=u;continue}s[l]=f=new X1(p,e,l,u),i.push(f)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return na.add(this._chart,r),!0}};function Bfe(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function zfe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function kq(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function $fe(n,e,t){if(t===!1)return!1;let r=kq(n,t),i=kq(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Hfe(n){let e,t,r,i;return He(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function k9(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function Pq(n,e,t,r={}){let i=n.keys,s=r.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===t){if(u=!0,r.all)continue;break}l=n.values[c],Ut(l)&&(s||e===0||Yi(e)===Yi(l))&&(e+=l)}return!u&&!r.all?0:e}function qfe(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[i]:u,[s]:n[u]};return a}function U1(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Wfe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Gfe(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function Kfe(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function Mq(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function Nq(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=Wfe(s,o,r),f=e.length,p;for(let m=0;m<f;++m){let E=e[m],{[c]:C,[l]:S}=E,P=E._stacks||(E._stacks={});p=P[l]=Kfe(i,u,C),p[a]=S,p._top=Mq(p,o,!0,r.type),p._bottom=Mq(p,o,!1,r.type);let M=p._visualValues||(p._visualValues={});M[a]=S}}function j1(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Qfe(n,e){return ta(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Yfe(n,e,t){return ta(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Sy(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}var B1=n=>n==="reset"||n==="none",Oq=(n,e)=>e?n:Object.assign({},n),Xfe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:k9(t,!0),values:null},lO=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=U1(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Sy(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(p,m,E,C)=>p==="x"?m:p==="r"?C:E,o=r.xAxisID=Re(i.xAxisID,j1(t,"x")),a=r.yAxisID=Re(i.yAxisID,j1(t,"y")),c=r.rAxisID=Re(i.rAxisID,j1(t,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),f=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&v1(this._data,this),t._stacked&&Sy(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(He(r)){let s=this._cachedMeta;this._data=qfe(r,s)}else if(i!==r){if(i){v1(i,this);let s=this._cachedMeta;Sy(s),s._parsed=[]}r&&Object.isExtensible(r)&&lq(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=U1(r.vScale,r),r.stack!==i.stack&&(s=!0,Sy(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(Nq(this,r._parsed),r._stacked=U1(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=t===0&&r===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],f,p,m;if(this._parsing===!1)i._parsed=s,i._sorted=!0,m=s;else{St(s[t])?m=this.parseArrayData(i,s,t,r):He(s[t])?m=this.parseObjectData(i,s,t,r):m=this.parsePrimitiveData(i,s,t,r);let E=()=>p[c]===null||u&&p[c]<u[c];for(f=0;f<r;++f)i._parsed[f+t]=p=m[f],l&&(E()&&(l=!1),u=p);i._sorted=l}a&&Nq(this,m)}parsePrimitiveData(t,r,i,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),f=o===a,p=new Array(s),m,E,C;for(m=0,E=s;m<E;++m)C=m+i,p[m]={[c]:f||o.parse(u[C],C),[l]:a.parse(r[C],C)};return p}parseArrayData(t,r,i,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,f,p;for(l=0,u=s;l<u;++l)f=l+i,p=r[f],c[l]={x:o.parse(p[0],f),y:a.parse(p[1],f)};return c}parseObjectData(t,r,i,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),f,p,m,E;for(f=0,p=s;f<p;++f)m=f+i,E=r[m],u[f]={x:o.parse(ku(E,c),m),y:a.parse(ku(E,l),m)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let s=this.chart,o=this._cachedMeta,a=r[t.axis],c={keys:k9(s,!0),values:r._stacks[t.axis]._visualValues};return Pq(c,a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=Pq(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),l=Xfe(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=Gfe(c),m,E;function C(){E=s[m];let S=E[c.axis];return!Ut(E[t.axis])||f>S||p<S}for(m=0;m<a&&!(!C()&&(this.updateRangeFromParsed(u,t,E,l),o));++m);if(o){for(m=a-1;m>=0;--m)if(!C()){this.updateRangeFromParsed(u,t,E,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],Ut(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=Hfe(Re(this.options.clip,$fe(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,f;for(i.dataset&&i.dataset.draw(t,o,c,l),f=c;f<c+l;++f){let p=s[f];p.hidden||(p.active&&u?a.push(p):p.draw(t,o))}for(f=0;f<a.length;++f)a[f].draw(t,o)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=Yfe(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Qfe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=t+"-"+r,c=o[a],l=this.enableOptionSharing&&Rf(i);if(c)return Oq(c,l);let u=this.chart.config,f=u.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],m=u.getOptionScopes(this.getDataset(),f),E=Object.keys(Dt.elements[t]),C=()=>this.getContext(i,s,r),S=u.resolveNamedOptions(m,E,C,p);return S.$shared&&(S.$shared=l,o[a]=Object.freeze(Oq(S,l))),S}_resolveAnimations(t,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,r),m=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(m,this.getContext(t,i,r))}let u=new MT(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||B1(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){B1(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!B1(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){let s=this._cachedMeta,o=s.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,r);i._stacked&&Sy(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Jfe(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=b1(r.sort((i,s)=>i-s))}return n._cache.$bar}function Zfe(n){let e=n.iScale,t=Jfe(e,n.type),r=e._length,i,s,o,a,c=()=>{o===32767||o===-32768||(Rf(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function epe(n,e,t,r){let i=t.barThickness,s,o;return Xe(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function tpe(n,e,t,r){let i=e.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:t.barPercentage,start:l}}function npe(n,e,t,r){let i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function P9(n,e,t,r){return St(n)?npe(n,e,t,r):e[t.axis]=t.parse(n,r),e}function Lq(n,e,t,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,c=[],l,u,f,p;for(l=t,u=t+r;l<u;++l)p=e[l],f={},f[i.axis]=a||i.parse(o[l],l),c.push(P9(p,f,s,l));return c}function z1(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function rpe(n,e,t){return n!==0?Yi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function ipe(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function spe(n,e,t,r){let i=e.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=ipe(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(s[Fq(u,o,a,c)]=!0,i=l)),s[Fq(i,o,a,c)]=!0,n.borderSkipped=s}function Fq(n,e,t,r){return r?(n=ope(n,e,t),n=Vq(n,t,e)):n=Vq(n,e,t),n}function ope(n,e,t){return n===e?t:n===t?e:n}function Vq(n,e,t){return n==="start"?e:n==="end"?t:n}function ape(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var M9=(()=>{class n extends lO{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return Lq(t,r,i,s)}parseArrayData(t,r,i,s){return Lq(t,r,i,s)}parseObjectData(t,r,i,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,f=a.axis==="x"?c:l,p=[],m,E,C,S;for(m=i,E=i+s;m<E;++m)S=r[m],C={},C[o.axis]=o.parse(ku(S,u),m),p.push(P9(ku(S,f),C,a,m));return p}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,c=z1(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(r,s);for(let E=r;E<r+i;E++){let C=this.getParsed(E),S=o||Xe(C[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(E),P=this._calculateBarIndexPixels(E,f),M=(C._stacks||{})[c.axis],F={horizontal:u,base:S.base,enableBorderRadius:!M||z1(C._custom)||a===M._top||a===M._bottom,x:u?S.head:P.center,y:u?P.center:S.head,height:u?P.size:Math.abs(S.size),width:u?Math.abs(S.size):P.size};m&&(F.options=p||this.resolveDataElementOptions(E,t[E].active?"active":s));let j=F.options||t[E].options;spe(F,j,M,a),ape(F,j,f.ratio),this.updateElement(t[E],E,F,s)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=f=>{let p=f._parsed.find(E=>E[i.axis]===l),m=p&&p[f.vScale.axis];if(Xe(m)||isNaN(m))return!0};for(let f of s)if(!(r!==void 0&&u(f))&&((o===!1||a.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&a.push(f.stack),f.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[Re(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let s=this._getStacks(t,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let c=t.barThickness;return{min:c||Zfe(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,f=z1(u),p=l[r.axis],m=0,E=i?this.applyStack(r,l,i):p,C,S;E!==p&&(m=E-p,E=p),f&&(p=u.barStart,E=u.barEnd-u.barStart,p!==0&&Yi(p)!==Yi(u.barEnd)&&(m=0),m+=p);let P=!Xe(o)&&!f?o:m,M=r.getPixelForValue(P);if(this.chart.getDataVisibility(t)?C=r.getPixelForValue(m+E):C=M,S=C-M,Math.abs(S)<a){S=rpe(S,r,c)*a,p===c&&(M-=S/2);let F=r.getPixelForDecimal(0),j=r.getPixelForDecimal(1),z=Math.min(F,j),B=Math.max(F,j);M=Math.max(Math.min(M,B),z),C=M+S,i&&!f&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(C)-r.getValueForPixel(M))}if(M===r.getPixelForValue(c)){let F=Yi(S)*r.getLineWidthForValue(c)/2;M+=F,S-=F}return{size:S,base:M,head:C,center:C+S/2}}_calculateBarIndexPixels(t,r){let i=r.scale,s=this.options,o=s.skipNull,a=Re(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(r.grouped){let f=o?this._getStackCount(t):r.stackCount,p=s.barThickness==="flex"?tpe(t,r,s,f*u):epe(t,r,s,f*u),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(Re(m,this.getFirstScaleIdForIndexAxis())),C=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+E;c=p.start+p.chunk*C+p.chunk/2,l=Math.min(a,p.chunk*p.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})();var N9=(()=>{class n extends lO{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:c,count:l}=hq(r,s,a);this._drawStart=c,this._drawCount=l,fq(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,s),m=a.axis,E=c.axis,{spanGaps:C,segment:S}=this.options,P=Pf(C)?C:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none",F=r+i,j=t.length,z=r>0&&this.getParsed(r-1);for(let B=0;B<j;++B){let T=t[B],_=M?T:{};if(B<r||B>=F){_.skip=!0;continue}let b=this.getParsed(B),A=Xe(b[E]),D=_[m]=a.getPixelForValue(b[m],B),x=_[E]=o||A?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,b,l):b[E],B);_.skip=isNaN(D)||isNaN(x)||A,_.stop=B>0&&Math.abs(b[m]-z[m])>P,S&&(_.parsed=b,_.raw=u.data[B]),p&&(_.options=f||this.resolveDataElementOptions(B,T.active?"active":s)),M||this.updateElement(T,B,_,s),z=b}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function Mu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var J1=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Mu()}parse(){return Mu()}format(){return Mu()}add(){return Mu()}diff(){return Mu()}startOf(){return Mu()}endOf(){return Mu()}},cpe={_date:J1};function lpe(n,e,t,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?oq:Dc;if(r){if(i._sharedOptions){let u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){let p=l(s,e,t-f),m=l(s,e,t+f);return{lo:p.lo,hi:m.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:f}=i._cachedMeta,{_parsed:p}=n,m=p.slice(0,u.lo+1).reverse().findIndex(C=>!Xe(C[f.axis]));u.lo-=Math.max(0,m);let E=p.slice(u.hi).findIndex(C=>!Xe(C[f.axis]));u.hi+=Math.max(0,E)}return u}}return{lo:0,hi:s.length-1}}function Ny(n,e,t,r,i){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:f,hi:p}=lpe(s[a],e,o,i);for(let m=f;m<=p;++m){let E=u[m];E.skip||r(E,l,m)}}}function upe(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function $1(n,e,t,r,i){let s=[];return!i&&!n.isPointInArea(e)||Ny(n,t,e,function(a,c,l){!i&&!Bs(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function dpe(n,e,t,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=iq(o,{x:e.x,y:e.y});_1(f,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return Ny(n,t,e,s),i}function hpe(n,e,t,r,i,s){let o=[],a=upe(t),c=Number.POSITIVE_INFINITY;function l(u,f,p){let m=u.inRange(e.x,e.y,i);if(r&&!m)return;let E=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(E))&&!m)return;let S=a(e,E);S<c?(o=[{element:u,datasetIndex:f,index:p}],c=S):S===c&&o.push({element:u,datasetIndex:f,index:p})}return Ny(n,t,e,l),o}function H1(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?dpe(n,e,t,i):hpe(n,e,t,r,i,s)}function Uq(n,e,t,r,i){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return Ny(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var fpe={evaluateInteractionItems:Ny,modes:{index(n,e,t,r){let i=Mc(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?$1(n,i,s,r,o):H1(n,i,s,!1,r,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,f=l.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=Mc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?$1(n,i,s,r,o):H1(n,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=Mc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return $1(n,i,s,r,o)},nearest(n,e,t,r){let i=Mc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return H1(n,i,s,t.intersect,r,o)},x(n,e,t,r){let i=Mc(e,n);return Uq(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=Mc(e,n);return Uq(n,i,"y",t.intersect,r)}}},O9=["left","top","right","bottom"];function Cy(n,e){return n.filter(t=>t.pos===e)}function jq(n,e){return n.filter(t=>O9.indexOf(t.pos)===-1&&t.box.axis===e)}function Dy(n,e){return n.sort((t,r)=>{let i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function ppe(n){let e=[],t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function mpe(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:s}=t;if(!r||!O9.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function gpe(n,e){let t=mpe(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function ype(n){let e=ppe(n),t=Dy(e.filter(l=>l.box.fullSize),!0),r=Dy(Cy(e,"left"),!0),i=Dy(Cy(e,"right")),s=Dy(Cy(e,"top"),!0),o=Dy(Cy(e,"bottom")),a=jq(e,"x"),c=jq(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Cy(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function Bq(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function L9(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function _pe(n,e,t,r){let{pos:i,box:s}=t,o=n.maxPadding;if(!He(i)){t.size&&(n[i]-=t.size);let f=r[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[i]+=t.size}s.getPadding&&L9(o,s.getPadding());let a=Math.max(0,e.outerWidth-Bq(o,n,"left","right")),c=Math.max(0,e.outerHeight-Bq(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function vpe(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function bpe(n,e){let t=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Ry(n,e,t,r){let i=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,bpe(a.horizontal,e));let{same:f,other:p}=_pe(e,t,a,r);l|=f&&i.length,u=u||p,c.fullSize||i.push(a)}return l&&Ry(i,e,t,r)||u}function CT(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function zq(n,e,t,r){let i=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let f=e.w*u,p=l.size||c.height;Rf(l.start)&&(o=l.start),c.fullSize?CT(c,i.left,o,t.outerWidth-i.right-i.left,p):CT(c,e.left+l.placed,o,f,p),l.start=o,l.placed+=f,o=c.bottom}else{let f=e.h*u,p=l.size||c.width;Rf(l.start)&&(s=l.start),c.fullSize?CT(c,s,i.top,p,t.outerHeight-i.bottom-i.top):CT(c,s,e.top+l.placed,p,f),l.start=s,l.placed+=f,s=c.right}}e.x=s,e.y=o}var mi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=On(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=ype(n.boxes),c=a.vertical,l=a.horizontal;pt(n.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});let u=c.reduce((C,S)=>S.box.options&&S.box.options.display===!1?C:C+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);L9(p,On(r));let m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),E=gpe(c.concat(l),f);Ry(a.fullSize,m,f,E),Ry(c,m,f,E),Ry(l,m,f,E)&&Ry(c,m,f,E),vpe(m),zq(a.leftAndTop,m,f,E),m.x+=m.w,m.y+=m.h,zq(a.rightAndBottom,m,f,E),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},pt(a.chartArea,C=>{let S=C.box;Object.assign(S,n.chartArea),S.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},NT=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},Z1=class extends NT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},kT="$chartjs",wpe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$q=n=>n===null||n==="";function Epe(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[kT]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",$q(i)){let s=M1(n,"width");s!==void 0&&(n.width=s)}if($q(r))if(n.style.height==="")n.height=n.width/(e||2);else{let s=M1(n,"height");s!==void 0&&(n.height=s)}return n}var F9=Sq?{passive:!0}:!1;function Ipe(n,e,t){n&&n.addEventListener(e,t,F9)}function Tpe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,F9)}function Spe(n,e){let t=wpe[n.type]||n.type,{x:r,y:i}=Mc(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function OT(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Cpe(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||OT(a.addedNodes,r),o=o&&!OT(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Dpe(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||OT(a.removedNodes,r),o=o&&!OT(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var Py=new Map,Hq=0;function V9(){let n=window.devicePixelRatio;n!==Hq&&(Hq=n,Py.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Ape(n,e){Py.size||window.addEventListener("resize",V9),Py.set(n,e)}function xpe(n){Py.delete(n),Py.size||window.removeEventListener("resize",V9)}function Rpe(n,e,t){let r=n.canvas,i=r&&TT(r);if(!i)return;let s=E1((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(i),Ape(n,s),o}function q1(n,e,t){t&&t.disconnect(),e==="resize"&&xpe(n)}function kpe(n,e,t){let r=n.canvas,i=E1(s=>{n.ctx!==null&&t(Spe(s,n))},n);return Ipe(r,e,i),i}var eO=class extends NT{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Epe(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[kT])return!1;let r=t[kT].initial;["height","width"].forEach(s=>{let o=r[s];Xe(o)?t.removeAttribute(s):t.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[kT],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),o={attach:Cpe,detach:Dpe,resize:Rpe}[t]||kpe;i[t]=o(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:q1,detach:q1,resize:q1}[t]||Tpe)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return Tq(e,t,r,i)}isAttached(e){let t=e&&TT(e);return!!(t&&t.isConnected)}};function Ppe(n){return!IT()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Z1:eO}var qs=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Pf(this.x)&&Pf(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Mpe(n,e){let t=n.options.ticks,r=Npe(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Lpe(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return Fpe(e,l,s,o/i),l;let u=Ope(s,e,i);if(o>0){let f,p,m=o>1?Math.round((c-a)/(o-1)):null;for(DT(e,l,u,Xe(m)?0:a-m,a),f=0,p=o-1;f<p;f++)DT(e,l,u,s[f],s[f+1]);return DT(e,l,u,c,Xe(m)?e.length:c+m),l}return DT(e,l,u),l}function Npe(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Ope(n,e,t){let r=Vpe(n),i=e.length/t;if(!r)return Math.max(i,1);let s=nq(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function Lpe(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Fpe(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function DT(n,e,t,r,i){let s=Re(r,0),o=Math.min(Re(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function Vpe(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var Upe=n=>n==="left"?"right":n==="right"?"left":n,qq=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Wq=(n,e)=>Math.min(e||n,n);function Gq(n,e){let t=[],r=n.length/e,i=n.length,s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function jpe(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function Bpe(n,e){pt(n,t=>{let r=t.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function Ay(n){return n.drawTicks?n.tickLength:0}function Kq(n,e){if(!n.display)return 0;let t=ln(n.font,e),r=On(n.padding);return(St(n.text)?n.text.length:1)*t.lineHeight+r.height}function zpe(n,e){return ta(n,{scale:e,type:"scale"})}function $pe(n,e,t){return ta(n,{tick:t,index:e,type:"tick"})}function Hpe(n,e,t){let r=_T(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Upe(r)),r}function qpe(n,e,t,r){let{top:i,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,f=0,p,m,E,C=o-i,S=a-s;if(n.isHorizontal()){if(m=Nn(r,s,a),He(t)){let P=Object.keys(t)[0],M=t[P];E=u[P].getPixelForValue(M)+C-e}else t==="center"?E=(l.bottom+l.top)/2+C-e:E=qq(n,t,e);p=a-s}else{if(He(t)){let P=Object.keys(t)[0],M=t[P];m=u[P].getPixelForValue(M)-S+e}else t==="center"?m=(l.left+l.right)/2-S+e:m=qq(n,t,e);E=Nn(r,o,i),f=t==="left"?-Ir:Ir}return{titleX:m,titleY:E,maxWidth:p,rotation:f}}var Ou=class n extends qs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Cr(e,Number.POSITIVE_INFINITY),t=Cr(t,Number.NEGATIVE_INFINITY),r=Cr(r,Number.POSITIVE_INFINITY),i=Cr(i,Number.NEGATIVE_INFINITY),{min:Cr(e,r),max:Cr(t,i),minDefined:Ut(e),maxDefined:Ut(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Cr(t,Cr(r,t)),max:Cr(r,Cr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_q(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?Gq(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Mpe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wt(this.options.afterUpdate,[this])}beforeSetDimensions(){wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=wt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=Wq(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation,o=i,a,c,l;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=Sr(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),c=this.maxHeight-Ay(e.grid)-t.padding-Kq(e.title,this.chart.options.font),l=Math.sqrt(f*f+p*p),o=gT(Math.min(Math.asin(Sr((u.highest.height+6)/a,-1,1)),Math.asin(Sr(c/l,-1,1))-Math.asin(Sr(p/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=Kq(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Ay(s)+c):(e.height=this.maxHeight,e.width=Ay(s)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,E=Zo(this.labelRotation),C=Math.cos(E),S=Math.sin(E);if(a){let P=r.mirror?0:S*f.width+C*p.height;e.height=Math.min(this.maxHeight,e.height+P+m)}else{let P=r.mirror?0:C*f.width+S*p.height;e.width=Math.min(this.maxWidth,e.width+P+m)}this._calculatePadding(l,u,S,C)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),p=0,m=0;c?l?(p=i*e.width,m=r*t.height):(p=r*e.height,m=i*t.width):s==="start"?m=t.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=t.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=t.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=t.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Xe(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=Gq(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/Wq(t,r)),l=0,u=0,f,p,m,E,C,S,P,M,F,j,z;for(f=0;f<t;f+=c){if(E=e[f].label,C=this._resolveTickFontOptions(f),i.font=S=C.string,P=s[S]=s[S]||{data:{},gc:[]},M=C.lineHeight,F=j=0,!Xe(E)&&!St(E))F=vy(i,P.data,P.gc,F,E),j=M;else if(St(E))for(p=0,m=E.length;p<m;++p)z=E[p],!Xe(z)&&!St(z)&&(F=vy(i,P.data,P.gc,F,z),j+=M);o.push(F),a.push(j),l=Math.max(F,l),u=Math.max(j,u)}Bpe(s,t);let B=o.indexOf(l),T=a.indexOf(u),_=b=>({width:o[b]||0,height:a[b]||0});return{first:_(0),last:_(t-1),widest:_(B),highest:_(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return sq(this._alignToPixels?Rc(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=$pe(this.getContext(),e,r))}return this.$context||(this.$context=zpe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Zo(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=Ay(s),m=[],E=a.setContext(this.getContext()),C=E.display?E.width:0,S=C/2,P=function(Y){return Rc(r,Y,C)},M,F,j,z,B,T,_,b,A,D,x,I;if(o==="top")M=P(this.bottom),T=this.bottom-p,b=M-S,D=P(e.top)+S,I=e.bottom;else if(o==="bottom")M=P(this.top),D=e.top,I=P(e.bottom)-S,T=M+S,b=this.top+p;else if(o==="left")M=P(this.right),B=this.right-p,_=M-S,A=P(e.left)+S,x=e.right;else if(o==="right")M=P(this.left),A=e.left,x=P(e.right)-S,B=M+S,_=this.left+p;else if(t==="x"){if(o==="center")M=P((e.top+e.bottom)/2+.5);else if(He(o)){let Y=Object.keys(o)[0],ee=o[Y];M=P(this.chart.scales[Y].getPixelForValue(ee))}D=e.top,I=e.bottom,T=M+S,b=T+p}else if(t==="y"){if(o==="center")M=P((e.left+e.right)/2);else if(He(o)){let Y=Object.keys(o)[0],ee=o[Y];M=P(this.chart.scales[Y].getPixelForValue(ee))}B=M-S,_=B-p,A=e.left,x=e.right}let Oe=Re(i.ticks.maxTicksLimit,f),ke=Math.max(1,Math.ceil(f/Oe));for(F=0;F<f;F+=ke){let Y=this.getContext(F),ee=s.setContext(Y),oe=a.setContext(Y),ge=ee.lineWidth,lt=ee.color,Xt=oe.dash||[],et=oe.dashOffset,We=ee.tickWidth,Le=ee.tickColor,bn=ee.tickBorderDash||[],Xn=ee.tickBorderDashOffset;j=jpe(this,F,c),j!==void 0&&(z=Rc(r,j,ge),l?B=_=A=x=z:T=b=D=I=z,m.push({tx1:B,ty1:T,tx2:_,ty2:b,x1:A,y1:D,x2:x,y2:I,width:ge,color:lt,borderDash:Xt,borderDashOffset:et,tickWidth:We,tickColor:Le,tickBorderDash:bn,tickBorderDashOffset:Xn}))}return this._ticksLength=f,this._borderValue=M,m}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:f}=s,p=Ay(r.grid),m=p+u,E=f?-u:m,C=-Zo(this.labelRotation),S=[],P,M,F,j,z,B,T,_,b,A,D,x,I="middle";if(i==="top")B=this.bottom-E,T=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+E,T=this._getXAxisLabelAlignment();else if(i==="left"){let ke=this._getYAxisLabelAlignment(p);T=ke.textAlign,z=ke.x}else if(i==="right"){let ke=this._getYAxisLabelAlignment(p);T=ke.textAlign,z=ke.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+m;else if(He(i)){let ke=Object.keys(i)[0],Y=i[ke];B=this.chart.scales[ke].getPixelForValue(Y)+m}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")z=(e.left+e.right)/2-m;else if(He(i)){let ke=Object.keys(i)[0],Y=i[ke];z=this.chart.scales[ke].getPixelForValue(Y)}T=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));let Oe=this._getLabelSizes();for(P=0,M=a.length;P<M;++P){F=a[P],j=F.label;let ke=s.setContext(this.getContext(P));_=this.getPixelForTick(P)+s.labelOffset,b=this._resolveTickFontOptions(P),A=b.lineHeight,D=St(j)?j.length:1;let Y=D/2,ee=ke.color,oe=ke.textStrokeColor,ge=ke.textStrokeWidth,lt=T;o?(z=_,T==="inner"&&(P===M-1?lt=this.options.reverse?"left":"right":P===0?lt=this.options.reverse?"right":"left":lt="center"),i==="top"?l==="near"||C!==0?x=-D*A+A/2:l==="center"?x=-Oe.highest.height/2-Y*A+A:x=-Oe.highest.height+A/2:l==="near"||C!==0?x=A/2:l==="center"?x=Oe.highest.height/2-Y*A:x=Oe.highest.height-D*A,f&&(x*=-1),C!==0&&!ke.showLabelBackdrop&&(z+=A/2*Math.sin(C))):(B=_,x=(1-D)*A/2);let Xt;if(ke.showLabelBackdrop){let et=On(ke.backdropPadding),We=Oe.heights[P],Le=Oe.widths[P],bn=x-et.top,Xn=0-et.left;switch(I){case"middle":bn-=We/2;break;case"bottom":bn-=We;break}switch(T){case"center":Xn-=Le/2;break;case"right":Xn-=Le;break;case"inner":P===M-1?Xn-=Le:P>0&&(Xn-=Le/2);break}Xt={left:Xn,top:bn,width:Le+et.width,height:We+et.height,color:ke.backdropColor}}S.push({label:j,font:b,textOffset:x,options:{rotation:C,color:ee,strokeColor:oe,strokeWidth:ge,textAlign:lt,textBaseline:I,translation:[z,B],backdrop:Xt}})}return S}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Zo(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?i?(u=this.right+s,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){let c=i[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,f,p;this.isHorizontal()?(l=Rc(e,this.left,o)-o/2,u=Rc(e,this.right,a)+a/2,f=p=c):(f=Rc(e,this.top,o)-o/2,p=Rc(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,f),t.lineTo(u,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&Ey(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;kc(r,l,0,u,c,a)}i&&Iy(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let s=ln(r.font),o=On(r.padding),a=r.align,c=s.lineHeight/2;t==="bottom"||t==="center"||He(t)?(c+=o.bottom,St(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:f,rotation:p}=qpe(this,c,t,a);kc(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:Hpe(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=Re(e.grid&&e.grid.z,-1),i=Re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return ln(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Nf=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;Kpe(t)&&(r=this.register(t));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Wpe(e,o,r),this.override&&Dt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Dt[i]&&(delete Dt[i][r],this.override&&delete xc[r])}};function Wpe(n,e,t){let r=Df(Object.create(null),[t?Dt.get(t):{},Dt.get(e),n.defaults]);Dt.set(e,r),n.defaultRoutes&&Gpe(e,n.defaultRoutes),n.descriptors&&Dt.describe(e,n.descriptors)}function Gpe(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");Dt.route(s,i,c,a)})}function Kpe(n){return"id"in n&&"defaults"in n}var tO=class{constructor(){this.controllers=new Nf(lO,"datasets",!0),this.elements=new Nf(qs,"elements"),this.plugins=new Nf(Object,"plugins"),this.scales=new Nf(Ou,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):pt(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){let i=mT(e);wt(r["before"+i],[],r),t[e](r),wt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Hs=new tO,nO=class{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[t,i,s.options];if(wt(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=Re(r.options&&r.options.plugins,{}),s=Qpe(r);return i===!1&&!t?[]:Xpe(e,s,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function Qpe(n){let e={},t=[],r=Object.keys(Hs.plugins.items);for(let s=0;s<r.length;s++)t.push(Hs.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Ype(n,e){return!e&&n===!1?null:n===!0?{}:n}function Xpe(n,{plugins:e,localIds:t},r,i){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=Ype(r[c],i);l!==null&&s.push({plugin:a,options:Jpe(n.config,{plugin:a,local:t[c]},l,o)})}return s}function Jpe(n,{plugin:e,local:t},r,i){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rO(n,e){let t=Dt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Zpe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function eme(n,e){return n===e?"_index_":"_value_"}function Qq(n){if(n==="x"||n==="y"||n==="r")return n}function tme(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function iO(n,...e){if(Qq(n))return n;for(let t of e){let r=t.axis||tme(t.position)||n.length>1&&Qq(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Yq(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function nme(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Yq(n,"x",t[0])||Yq(n,"y",t[0])}return{}}function rme(n,e){let t=xc[n.type]||{scales:{}},r=e.scales||{},i=rO(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!He(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=iO(o,a,nme(o,n),Dt.scales[a.type]),l=eme(c,i),u=t.scales||{};s[o]=xf(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||rO(a,e),u=(xc[a]||{}).scales||{};Object.keys(u).forEach(f=>{let p=Zpe(f,c),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),xf(s[m],[{axis:p},r[m],u[f]])})}),Object.keys(s).forEach(o=>{let a=s[o];xf(a,[Dt.scales[a.type],Dt.scale])}),s}function U9(n){let e=n.options||(n.options={});e.plugins=Re(e.plugins,{}),e.scales=rme(n,e)}function j9(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function ime(n){return n=n||{},n.data=j9(n.data),U9(n),n}var Xq=new Map,B9=new Set;function AT(n,e){let t=Xq.get(n);return t||(t=e(),Xq.set(n,t),B9.add(t)),t}var xy=(n,e,t)=>{let r=ku(e,t);r!==void 0&&n.add(r)},sO=class{constructor(e){this._config=ime(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=j9(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),U9(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return AT(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return AT(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return AT(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return AT(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(f=>xy(c,e,f))),u.forEach(f=>xy(c,i,f)),u.forEach(f=>xy(c,xc[s]||{},f)),u.forEach(f=>xy(c,Dt,f)),u.forEach(f=>xy(c,bT,f))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),B9.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,xc[t]||{},Dt.datasets[t]||{},{type:t},Dt,bT]}resolveNamedOptions(e,t,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=Jq(this._resolverCache,e,i),c=o;if(ome(o,t)){s.$shared=!1,r=Xo(r)?r():r;let l=this.createResolver(e,r,a);c=Ru(o,r,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,r=[""],i){let{resolver:s}=Jq(this._resolverCache,e,r);return He(t)?Ru(s,t,void 0,i):s}};function Jq(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),s=r.get(i);return s||(s={resolver:ET(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var sme=n=>He(n)&&Object.getOwnPropertyNames(n).some(e=>Xo(n[e]));function ome(n,e){let{isScriptable:t,isIndexable:r}=x1(n);for(let i of e){let s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Xo(a)||sme(a))||o&&St(a))return!0}return!1}var ame="4.5.1",cme=["top","bottom","left","right","chartArea"];function Zq(n,e){return n==="top"||n==="bottom"||cme.indexOf(n)===-1&&e==="x"}function e9(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function t9(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),wt(t&&t.onComplete,[n],e)}function lme(n){let e=n.chart,t=e.options.animation;wt(t&&t.onProgress,[n],e)}function z9(n){return IT()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var PT={},n9=n=>{let e=z9(n);return Object.values(PT).filter(t=>t.canvas===e).pop()};function ume(n,e,t){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=e){let o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function dme(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var Lf=(()=>{class n{static defaults=Dt;static instances=PT;static overrides=xc;static registry=Hs;static version=ame;static getChart=n9;static register(...t){Hs.add(...t),r9()}static unregister(...t){Hs.remove(...t),r9()}constructor(t,r){let i=this.config=new sO(r),s=z9(t),o=n9(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Ppe(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,f=l&&l.width;if(this.id=J5(),this.ctx=c,this.canvas=l,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uq(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],PT[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}na.listen(this,"complete",t9),na.listen(this,"progress",lme),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return Xe(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Hs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():P1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return S1(this.canvas,this.ctx),this}stop(){return na.stop(this),this}resize(t,r){na.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,P1(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),wt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};pt(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=iO(a,c),u=l==="r",f=l==="x";return{options:c,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),pt(o,a=>{let c=a.options,l=c.id,u=iO(l,c),f=Re(c.type,a.dtype);(c.position===void 0||Zq(c.position,u)!==Zq(a.dposition))&&(c.position=a.dposition),s[l]=!0;let p=null;if(l in i&&i[l].type===f)p=i[l];else{let m=Hs.getScale(f);p=new m({id:l,type:f,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(c,t)}),pt(s,(a,c)=>{a||delete i[c]}),pt(i,a=>{mi.configure(this,a,a.options),mi.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(e9("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||rO(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Hs.getController(c),{datasetElementType:u,dataElementType:f}=Dt.datasets[c];Object.assign(l,{dataElementType:Hs.getElement(f),datasetElementType:u&&Hs.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){pt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){let{controller:p}=this.getDatasetMeta(u),m=!s&&o.indexOf(p)===-1;p.buildOrUpdateElements(m),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||pt(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(e9("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){pt(this.scales,t=>{mi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!p1(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;ume(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!p1(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mi.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],pt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Xo(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(na.has(this)?this.attached&&!na.running(this)&&na.start(this):(this.draw(),t9({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=V1(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Ey(r,s),t.controller.draw(),s&&Iy(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Bs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){let o=fpe.modes[r];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ta(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Rf(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),na.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),S1(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete PT[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};pt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){pt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},pt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!by(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let s=this.options.hover,o=(l,u)=>l.filter(f=>!u.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),a=o(r,t),c=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(t,s,i,a),l=tq(t),u=dme(t,this._lastEvent,i,l);i&&(this._lastEvent=null,wt(o.onHover,[t,c,this],this),l&&wt(o.onClick,[t,c,this],this));let f=!by(c,s);return(f||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,f}_getActiveElements(t,r,i,s){if(t.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function r9(){return pt(Lf.instances,n=>n._plugins.invalidate())}function $9(n,e,t=e){n.lineCap=Re(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Re(t.borderDash,e.borderDash)),n.lineDashOffset=Re(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Re(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Re(t.borderWidth,e.borderWidth),n.strokeStyle=Re(t.borderColor,e.borderColor)}function hme(n,e,t){n.lineTo(t.x,t.y)}function fme(n){return n.stepped?gq:n.tension||n.cubicInterpolationMode==="monotone"?yq:hme}function H9(n,e,t={}){let r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function pme(n,e,t,r){let{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=H9(i,t,r),u=fme(s),{move:f=!0,reverse:p}=r||{},m,E,C;for(m=0;m<=l;++m)E=i[(a+(p?l-m:m))%o],!E.skip&&(f?(n.moveTo(E.x,E.y),f=!1):u(n,C,E,p,s.stepped),C=E);return c&&(E=i[(a+(p?l:0))%o],u(n,C,E,p,s.stepped)),!!c}function mme(n,e,t,r){let i=e.points,{count:s,start:o,ilen:a}=H9(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,f=0,p,m,E,C,S,P,M=j=>(o+(l?a-j:j))%s,F=()=>{C!==S&&(n.lineTo(u,S),n.lineTo(u,C),n.lineTo(u,P))};for(c&&(m=i[M(0)],n.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[M(p)],m.skip)continue;let j=m.x,z=m.y,B=j|0;B===E?(z<C?C=z:z>S&&(S=z),u=(f*u+j)/++f):(F(),n.lineTo(j,z),E=B,f=0,C=S=z),P=z}F()}function oO(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?mme:pme}function gme(n){return n.stepped?Cq:n.tension||n.cubicInterpolationMode==="monotone"?Dq:Cc}function yme(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),$9(n,e.options),n.stroke(i)}function _me(n,e,t,r){let{segments:i,options:s}=e,o=oO(e);for(let a of i)$9(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var vme=typeof Path2D=="function";function bme(n,e,t,r){vme&&!e.options.segment?yme(n,e,t,r):_me(n,e,t,r)}var Oy=(()=>{class n extends qs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;Iq(this._points,i,t,s,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xq(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,s=t[r],o=this.points,a=F1(this,{property:r,start:s,end:s});if(!a.length)return;let c=[],l=gme(i),u,f;for(u=0,f=a.length;u<f;++u){let{start:p,end:m}=a[u],E=o[p],C=o[m];if(E===C){c.push(E);continue}let S=Math.abs((s-E[r])/(C[r]-E[r])),P=l(E,C,S,i.stepped);P[r]=t[r],c.push(P)}return c.length===1?c[0]:c}pathSegment(t,r,i){return oO(this)(t,this,r,i)}path(t,r,i){let s=this.segments,o=oO(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of s)a&=o(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),bme(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function i9(n,e,t,r){let i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}var q9=(()=>{class n extends qs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return i9(this,t,"x",r)}inYRange(t,r){return i9(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!Bs(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,wT(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function W9(n,e){let{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,f;return n.horizontal?(f=o/2,a=Math.min(t,i),c=Math.max(t,i),l=r-f,u=r+f):(f=s/2,a=t-f,c=t+f,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function Nc(n,e,t,r){return n?0:Sr(e,t,r)}function wme(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,s=A1(r);return{t:Nc(i.top,s.top,0,t),r:Nc(i.right,s.right,0,e),b:Nc(i.bottom,s.bottom,0,t),l:Nc(i.left,s.left,0,e)}}function Eme(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Pc(i),o=Math.min(e,t),a=n.borderSkipped,c=r||He(i);return{topLeft:Nc(!c||a.top||a.left,s.topLeft,0,o),topRight:Nc(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Nc(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Nc(!c||a.bottom||a.right,s.bottomRight,0,o)}}function Ime(n){let e=W9(n),t=e.right-e.left,r=e.bottom-e.top,i=wme(n,t/2,r/2),s=Eme(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function W1(n,e,t,r){let i=e===null,s=t===null,a=n&&!(i&&s)&&W9(n,r);return a&&(i||ea(e,a.left,a.right))&&(s||ea(t,a.top,a.bottom))}function Tme(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Sme(n,e){n.rect(e.x,e.y,e.w,e.h)}function G1(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var LT=class extends qs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Ime(this),a=Tme(o.radius)?Mf:Sme;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,G1(o,t,s)),e.clip(),a(e,G1(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,G1(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return W1(this,e,t,r)}inXRange(e,t){return W1(this,e,null,t)}inYRange(e,t){return W1(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};function Cme(n,e,t){let r=n.segments,i=n.points,s=e.points,o=[];for(let a of r){let{start:c,end:l}=a;l=BT(c,l,i);let u=aO(t,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}let f=F1(e,u);for(let p of f){let m=aO(t,s[p.start],s[p.end],p.loop),E=L1(a,i,m);for(let C of E)o.push({source:C,target:p,start:{[t]:s9(u,m,"start",Math.max)},end:{[t]:s9(u,m,"end",Math.min)}})}}return o}function aO(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=Er(i),s=Er(s)),{property:n,start:i,end:s}}function Dme(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=BT(o,a,i);let c=i[o],l=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function BT(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function s9(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function G9(n,e){let t=[],r=!1;return St(n)?(r=!0,t=n):t=Dme(n,e),t.length?new Oy({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function o9(n){return n&&n.fill!==!1}function Ame(n,e,t){let i=n[e].fill,s=[e],o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ut(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function xme(n,e,t){let r=Mme(n);if(He(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ut(i)&&Math.floor(i)===i?Rme(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Rme(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function kme(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:He(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Pme(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:He(n)?r=n.value:r=e.getBaseValue(),r}function Mme(n){let e=n.options,t=e.fill,r=Re(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Nme(n){let{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=Ome(e,t);a.push(G9({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)Lme(i,o[u],a)}return new Oy({points:i,options:{}})}function Ome(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Lme(n,e,t){let r=[];for(let i=0;i<t.length;i++){let s=t[i],{first:o,last:a,point:c}=Fme(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function Fme(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],f=o[u.start][t],p=o[u.end][t];if(ea(i,f,p)){a=i===f,c=i===p;break}}return{first:a,last:c,point:r}}var FT=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:s,radius:o}=this;return t=t||{start:0,end:Tr},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function Vme(n){let{chart:e,fill:t,line:r}=n;if(Ut(t))return Ume(e,t);if(t==="stack")return Nme(n);if(t==="shape")return!0;let i=jme(n);return i instanceof FT?i:G9(i,r)}function Ume(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function jme(n){return(n.scale||{}).getPointPositionForValue?zme(n):Bme(n)}function Bme(n){let{scale:e={},fill:t}=n,r=kme(t,e);if(Ut(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function zme(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Pme(t,e,s),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,s);return new FT({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function K1(n,e,t){let r=Vme(e),{chart:i,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,f=l.backgroundColor,{above:p=f,below:m=f}=u||{},E=i.getDatasetMeta(s),C=V1(i,E);r&&o.points.length&&(Ey(n,t),$me(n,{line:o,target:r,above:p,below:m,area:t,scale:a,axis:c,clip:C}),Iy(n))}function $me(n,e){let{line:t,target:r,above:i,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==i&&(l==="x"?(a9(n,r,o.top),Q1(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),a9(n,r,o.bottom)):l==="y"&&(c9(n,r,o.left),Q1(n,{line:t,target:r,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),c9(n,r,o.right),u=i)),Q1(n,{line:t,target:r,color:u,scale:a,property:l,clip:c}),n.restore()}function a9(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],f=i[BT(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function c9(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],f=i[BT(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Q1(n,e){let{line:t,target:r,property:i,color:s,scale:o,clip:a}=e,c=Cme(t,r,i);for(let{source:l,target:u,start:f,end:p}of c){let{style:{backgroundColor:m=s}={}}=l,E=r!==!0;n.save(),n.fillStyle=m,Hme(n,o,a,E&&aO(i,f,p)),n.beginPath();let C=!!t.pathSegment(n,l),S;if(E){C?n.closePath():l9(n,r,p,i);let P=!!r.pathSegment(n,u,{move:C,reverse:!0});S=C&&P,S||l9(n,r,f,i)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function Hme(n,e,t,r){let i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let c,l,u,f;s==="x"?(c=o,l=i.top,u=a,f=i.bottom):(c=i.left,l=o,u=i.right,f=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),f=Math.min(f,t.bottom)),n.rect(c,l,u-c,f-l),n.clip()}}function l9(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var K9={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],s,o,a,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof Oy&&(c={visible:n.isDatasetVisible(o),index:o,fill:xme(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=Ame(i,o,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&K1(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;o9(s)&&K1(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!o9(r)||t.drawTime!=="beforeDatasetDraw"||K1(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},u9=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},qme=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,VT=class extends qs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=wt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=ln(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=u9(r,s),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((E,C)=>{let S=r+t/2+s.measureText(E.text).width;(C===0||l[l.length-1]+S+2*a>o)&&(f+=u,l[l.length-(C>0?0:1)]=0,m+=u,p++),c[C]={left:0,top:m,row:p,width:S,height:i},l[l.length-1]+=S+a}),f}_fitCols(e,t,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,f=a,p=0,m=0,E=0,C=0;return this.legendItems.forEach((S,P)=>{let{itemWidth:M,itemHeight:F}=Wme(r,t,s,S,i);P>0&&m+F+2*a>u&&(f+=p+a,l.push({width:p,height:m}),E+=p+a,C++,p=m=0),c[P]={left:E,top:m,col:C,width:M,height:F},p=Math.max(p,M),m+=F+a}),f+=p,l.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Pu(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Nn(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Nn(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=Nn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Nn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Ey(e,this),this._draw(),Iy(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Dt.color,c=Pu(e.rtl,this.left,this.width),l=ln(o.font),{padding:u}=o,f=l.size,p=f/2,m;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:E,boxHeight:C,itemHeight:S}=u9(o,f),P=function(B,T,_){if(isNaN(E)||E<=0||isNaN(C)||C<0)return;i.save();let b=Re(_.lineWidth,1);if(i.fillStyle=Re(_.fillStyle,a),i.lineCap=Re(_.lineCap,"butt"),i.lineDashOffset=Re(_.lineDashOffset,0),i.lineJoin=Re(_.lineJoin,"miter"),i.lineWidth=b,i.strokeStyle=Re(_.strokeStyle,a),i.setLineDash(Re(_.lineDash,[])),o.usePointStyle){let A={radius:C*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:b},D=c.xPlus(B,E/2),x=T+p;C1(i,A,D,x,o.pointStyleWidth&&E)}else{let A=T+Math.max((f-C)/2,0),D=c.leftForLtr(B,E),x=Pc(_.borderRadius);i.beginPath(),Object.values(x).some(I=>I!==0)?Mf(i,{x:D,y:A,w:E,h:C,radius:x}):i.rect(D,A,E,C),i.fill(),b!==0&&i.stroke()}i.restore()},M=function(B,T,_){kc(i,_.text,B,T+S/2,l,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},F=this.isHorizontal(),j=this._computeTitleHeight();F?m={x:Nn(s,this.left+u,this.right-r[0]),y:this.top+u+j,line:0}:m={x:this.left+u,y:Nn(s,this.top+j+u,this.bottom-t[0].height),line:0},N1(this.ctx,e.textDirection);let z=S+u;this.legendItems.forEach((B,T)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;let _=i.measureText(B.text).width,b=c.textAlign(B.textAlign||(B.textAlign=o.textAlign)),A=E+p+_,D=m.x,x=m.y;c.setWidth(this.width),F?T>0&&D+A+u>this.right&&(x=m.y+=z,m.line++,D=m.x=Nn(s,this.left+u,this.right-r[m.line])):T>0&&x+z>this.bottom&&(D=m.x=D+t[m.line].width+u,m.line++,x=m.y=Nn(s,this.top+j+u,this.bottom-t[m.line].height));let I=c.x(D);if(P(I,x,B),D=dq(b,D+E+p,F?D+A:this.right,e.rtl),M(c.x(D),x,B),F)m.x+=A+u;else if(typeof B.text!="string"){let Oe=l.lineHeight;m.y+=Q9(B,Oe)+u}else m.y+=z}),O1(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=ln(t.font),i=On(t.padding);if(!t.display)return;let s=Pu(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+l,f=Nn(e.align,f,this.right-p);else{let E=this.columnSizes.reduce((C,S)=>Math.max(C,S.height),0);u=l+Nn(e.align,this.top,this.bottom-E-e.labels.padding-this._computeTitleHeight())}let m=Nn(a,f,f+p);o.textAlign=s.textAlign(_T(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,kc(o,t.text,m,u,r)}_computeTitleHeight(){let e=this.options.title,t=ln(e.font),r=On(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(ea(e,this.left,this.right)&&ea(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ea(e,i.left,i.left+i.width)&&ea(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!Qme(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=qme(i,r);i&&!s&&wt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&wt(t.onHover,[e,r,this],this)}else r&&wt(t.onClick,[e,r,this],this)}};function Wme(n,e,t,r,i){let s=Gme(r,n,e,t),o=Kme(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Gme(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function Kme(n,e,t){let r=n;return typeof e.text!="string"&&(r=Q9(e,t)),r}function Q9(n,e){let t=n.text?n.text.length:0;return e*t}function Qme(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Y9={id:"legend",_element:VT,start(n,e,t){let r=n.legend=new VT({ctx:n.ctx,options:t,chart:n});mi.configure(n,r,t),mi.addBox(n,r)},stop(n){mi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;mi.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=On(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},UT=class extends qs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=St(r.text)?r.text.length:1;this._padding=On(r.padding);let s=i*ln(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align,c=0,l,u,f;return this.isHorizontal()?(u=Nn(a,r,s),f=t+e,l=s-r):(o.position==="left"?(u=r+e,f=Nn(a,i,t),c=Yt*-.5):(u=s-e,f=Nn(a,t,i),c=Yt*.5),l=i-t),{titleX:u,titleY:f,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=ln(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);kc(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:_T(t.align),textBaseline:"middle",translation:[o,a]})}};function Yme(n,e){let t=new UT({ctx:n.ctx,options:e,chart:n});mi.configure(n,t,e),mi.addBox(n,t),n.titleBlock=t}var X9={id:"title",_element:UT,start(n,e,t){Yme(n,t)},stop(n){let e=n.titleBlock;mi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;mi.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var ky={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=fT(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function $s(n,e){return e&&(St(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ra(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Xme(n,e){let{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function d9(n,e){let t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=ln(e.bodyFont),l=ln(e.titleFont),u=ln(e.footerFont),f=s.length,p=i.length,m=r.length,E=On(e.padding),C=E.height,S=0,P=r.reduce((j,z)=>j+z.before.length+z.lines.length+z.after.length,0);if(P+=n.beforeBody.length+n.afterBody.length,f&&(C+=f*l.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),P){let j=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;C+=m*j+(P-m)*c.lineHeight+(P-1)*e.bodySpacing}p&&(C+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let M=0,F=function(j){S=Math.max(S,t.measureText(j).width+M)};return t.save(),t.font=l.string,pt(n.title,F),t.font=c.string,pt(n.beforeBody.concat(n.afterBody),F),M=e.displayColors?o+2+e.boxPadding:0,pt(r,j=>{pt(j.before,F),pt(j.lines,F),pt(j.after,F)}),M=0,t.font=u.string,pt(n.footer,F),t.restore(),S+=E.width,{width:S,height:C}}function Jme(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Zme(n,e,t,r){let{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function ege(n,e,t,r){let{x:i,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),Zme(l,n,e,t)&&(l="center"),l}function h9(n,e,t){let r=t.yAlign||e.yAlign||Jme(n,t);return{xAlign:t.xAlign||e.xAlign||ege(n,e,t,r),yAlign:r}}function tge(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function nge(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function f9(n,e,t,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=i+s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=Pc(o),E=tge(e,a),C=nge(e,c,l);return c==="center"?a==="left"?E+=l:a==="right"&&(E-=l):a==="left"?E-=Math.max(u,p)+i:a==="right"&&(E+=Math.max(f,m)+i),{x:Sr(E,0,r.width-e.width),y:Sr(C,0,r.height-e.height)}}function xT(n,e,t){let r=On(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function p9(n){return $s([],ra(n))}function rge(n,e,t){return ta(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function m9(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var J9={beforeTitle:zs,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:zs,beforeBody:zs,beforeLabel:zs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Xe(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:zs,afterBody:zs,beforeFooter:zs,footer:zs,afterFooter:zs};function Dr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?J9[e].call(t,r):i}var g9=(()=>{class n extends qs{static positioners=ky;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new MT(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=rge(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,s=Dr(i,"beforeTitle",this,t),o=Dr(i,"title",this,t),a=Dr(i,"afterTitle",this,t),c=[];return c=$s(c,ra(s)),c=$s(c,ra(o)),c=$s(c,ra(a)),c}getBeforeBody(t,r){return p9(Dr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,s=[];return pt(t,o=>{let a={before:[],lines:[],after:[]},c=m9(i,o);$s(a.before,ra(Dr(c,"beforeLabel",this,o))),$s(a.lines,Dr(c,"label",this,o)),$s(a.after,ra(Dr(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return p9(Dr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,s=Dr(i,"beforeFooter",this,t),o=Dr(i,"footer",this,t),a=Dr(i,"afterFooter",this,t),c=[];return c=$s(c,ra(s)),c=$s(c,ra(o)),c=$s(c,ra(a)),c}_createItems(t){let r=this._active,i=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(Xme(this.chart,r[l]));return t.filter&&(c=c.filter((f,p,m)=>t.filter(f,p,m,i))),t.itemSort&&(c=c.sort((f,p)=>t.itemSort(f,p,i))),pt(c,f=>{let p=m9(t.callbacks,f);s.push(Dr(p,"labelColor",this,f)),o.push(Dr(p,"labelPointStyle",this,f)),a.push(Dr(p,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=ky[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=d9(this,i),u=Object.assign({},c,l),f=h9(this.chart,i,u),p=f9(i,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){let o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:f,bottomRight:p}=Pc(c),{x:m,y:E}=t,{width:C,height:S}=r,P,M,F,j,z,B;return o==="center"?(z=E+S/2,s==="left"?(P=m,M=P-a,j=z+a,B=z-a):(P=m+C,M=P+a,j=z-a,B=z+a),F=P):(s==="left"?M=m+Math.max(l,f)+a:s==="right"?M=m+C-Math.max(u,p)-a:M=this.caretX,o==="top"?(j=E,z=j-a,P=M-a,F=M+a):(j=E+S,z=j+a,P=M+a,F=M-a),B=j),{x1:P,x2:M,x3:F,y1:j,y2:z,y3:B}}drawTitle(t,r,i){let s=this.title,o=s.length,a,c,l;if(o){let u=Pu(i.rtl,this.x,this.width);for(t.x=xT(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=ln(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,s,o){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,f=ln(o.bodyFont),p=xT(this,"left",o),m=s.x(p),E=l<f.lineHeight?(f.lineHeight-l)/2:0,C=r.y+E;if(o.usePointStyle){let S={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},P=s.leftForLtr(m,u)+u/2,M=C+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,wT(t,S,P,M),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,wT(t,S,P,M)}else{t.lineWidth=He(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let S=s.leftForLtr(m,u),P=s.leftForLtr(s.xPlus(m,1),u-2),M=Pc(a.borderRadius);Object.values(M).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Mf(t,{x:S,y:C,w:u,h:l,radius:M}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Mf(t,{x:P,y:C+1,w:u-2,h:l-2,radius:M}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(S,C,u,l),t.strokeRect(S,C,u,l),t.fillStyle=a.backgroundColor,t.fillRect(P,C+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:f}=i,p=ln(i.bodyFont),m=p.lineHeight,E=0,C=Pu(i.rtl,this.x,this.width),S=function(b){r.fillText(b,C.x(t.x+E),t.y+m/2),t.y+=m+o},P=C.textAlign(a),M,F,j,z,B,T,_;for(r.textAlign=a,r.textBaseline="middle",r.font=p.string,t.x=xT(this,P,i),r.fillStyle=i.bodyColor,pt(this.beforeBody,S),E=c&&P!=="right"?a==="center"?u/2+f:u+2+f:0,z=0,T=s.length;z<T;++z){for(M=s[z],F=this.labelTextColors[z],r.fillStyle=F,pt(M.before,S),j=M.lines,c&&j.length&&(this._drawColorBox(r,t,z,C,i),m=Math.max(p.lineHeight,l)),B=0,_=j.length;B<_;++B)S(j[B]),m=p.lineHeight;pt(M.after,S)}E=0,m=p.lineHeight,pt(this.afterBody,S),t.y-=o}drawFooter(t,r,i){let s=this.footer,o=s.length,a,c;if(o){let l=Pu(i.rtl,this.x,this.width);for(t.x=xT(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=ln(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:f}=i,{topLeft:p,topRight:m,bottomLeft:E,bottomRight:C}=Pc(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+p,l),a==="top"&&this.drawCaret(t,r,i,s),r.lineTo(c+u-m,l),r.quadraticCurveTo(c+u,l,c+u,l+m),a==="center"&&o==="right"&&this.drawCaret(t,r,i,s),r.lineTo(c+u,l+f-C),r.quadraticCurveTo(c+u,l+f,c+u-C,l+f),a==="bottom"&&this.drawCaret(t,r,i,s),r.lineTo(c+E,l+f),r.quadraticCurveTo(c,l+f,c,l+f-E),a==="center"&&o==="left"&&this.drawCaret(t,r,i,s),r.lineTo(c,l+p),r.quadraticCurveTo(c,l,c+p,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=ky[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=d9(this,t),l=Object.assign({},a,this._size),u=h9(r,t,l),f=f9(t,l,u,r);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=On(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),N1(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),O1(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!by(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),c=this._positionChanged(a,t),l=r||!by(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:s,options:o}=this,a=ky[o.position].call(this,t,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),Z9={id:"tooltip",_element:g9,positioners:ky,afterInit(n,e,t){t&&(n.tooltip=new g9({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Ve(H({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:J9},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var ige=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function sge(n,e,t,r){let i=n.indexOf(e);if(i===-1)return ige(n,e,t,r);let s=n.lastIndexOf(e);return i!==s?t:i}var oge=(n,e)=>n===null?null:Sr(Math.round(n),0,e);function y9(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var e8=(()=>{class n extends Ou{static id="category";static defaults={ticks:{callback:y9}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Xe(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:sge(i,t,Re(r,t),this._addedLabels),oge(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=t===0&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return y9.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function age(n,e){let t=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:f,includeBounds:p}=n,m=s||1,E=u-1,{min:C,max:S}=e,P=!Xe(o),M=!Xe(a),F=!Xe(l),j=(S-C)/(f+1),z=m1((S-C)/E/m)*m,B,T,_,b;if(z<1e-14&&!P&&!M)return[{value:C},{value:S}];b=Math.ceil(S/z)-Math.floor(C/z),b>E&&(z=m1(b*z/E/m)*m),Xe(c)||(B=Math.pow(10,c),z=Math.ceil(z*B)/B),i==="ticks"?(T=Math.floor(C/z)*z,_=Math.ceil(S/z)*z):(T=C,_=S),P&&M&&s&&rq((a-o)/s,z/1e3)?(b=Math.round(Math.min((a-o)/z,u)),z=(a-o)/b,T=o,_=a):F?(T=P?o:T,_=M?a:_,b=l-1,z=(_-T)/b):(b=(_-T)/z,kf(b,Math.round(b),z/1e3)?b=Math.round(b):b=Math.ceil(b));let A=Math.max(y1(z),y1(T));B=Math.pow(10,Xe(c)?A:c),T=Math.round(T*B)/B,_=Math.round(_*B)/B;let D=0;for(P&&(p&&T!==o?(t.push({value:o}),T<o&&D++,kf(Math.round((T+D*z)*B)/B,o,_9(o,j,n))&&D++):T<o&&D++);D<b;++D){let x=Math.round((T+D*z)*B)/B;if(M&&x>a)break;t.push({value:x})}return M&&p&&_!==a?t.length&&kf(t[t.length-1].value,a,_9(a,j,n))?t[t.length-1].value=a:t.push({value:a}):(!M||_===a)&&t.push({value:_}),t}function _9(n,e,{horizontal:t,minRotation:r}){let i=Zo(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Of=class extends Ou{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=t?i:c,a=c=>s=r?s:c;if(e){let c=Yi(i),l=Yi(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=age(i,s);return e.bounds==="ticks"&&g1(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return vT(e,this.chart.options.locale,this.options.ticks.format)}},jT=class extends Of{static id="linear";static defaults={ticks:{callback:wy.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ut(e)?e:0,this.max=Ut(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Zo(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},My=n=>Math.floor(Jo(n)),Nu=(n,e)=>Math.pow(10,My(n)+e);function v9(n){return n/Math.pow(10,My(n))===1}function b9(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function cge(n,e){let t=e-n,r=My(t);for(;b9(n,e,r)>10;)r++;for(;b9(n,e,r)<10;)r--;return Math.min(r,My(n))}function lge(n,{min:e,max:t}){e=Cr(n.min,e);let r=[],i=My(e),s=cge(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,f=Math.floor((l-u)/Math.pow(10,s)),p=Cr(n.min,Math.round((c+u+f*Math.pow(10,s))*o)/o);for(;p<t;)r.push({value:p,major:v9(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),p=Math.round((c+u+f*Math.pow(10,s))*o)/o;let m=Cr(n.max,p);return r.push({value:m,major:v9(m),significand:f}),r}var w9=class extends Ou{static id="logarithmic";static defaults={ticks:{callback:wy.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Of.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Ut(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ut(e)?Math.max(0,e):null,this.max=Ut(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ut(this._userMin)&&(this.min=e===Nu(this.min,0)?Nu(this.min,-1):Nu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Nu(r,-1)),o(Nu(i,1)))),r<=0&&s(Nu(i,-1)),i<=0&&o(Nu(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=lge(t,this);return e.bounds==="ticks"&&g1(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":vT(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Jo(e),this._valueRange=Jo(this.max)-Jo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Jo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function cO(n){let e=n.ticks;if(e.display&&n.display){let t=On(e.backdropPadding);return Re(e.font&&e.font.size,Dt.font.size)+t.height}return 0}function uge(n,e,t){return t=St(t)?t:[t],{w:mq(n,e.string,t),h:t.length*e.lineHeight}}function E9(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function dge(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Yt/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),f=ln(l.font),p=uge(n.ctx,f,n._pointLabels[c]);r[c]=p;let m=Er(n.getIndexAngle(c)+a),E=Math.round(gT(m)),C=E9(E,u.x,p.w,0,180),S=E9(E,u.y,p.h,90,270);hge(t,e,m,C,S)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=mge(n,r,i)}function hge(n,e,t,r,i){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function fge(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,r+i+o,s),l=Math.round(gT(Er(c.angle+Ir))),u=_ge(c.y,a.h,l),f=gge(l),p=yge(c.x,a.w,f);return{visible:!0,x:c.x,y:u,textAlign:f,left:p,top:u,right:p+a.w,bottom:u+a.h}}function pge(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:s}=n;return!(Bs({x:t,y:r},e)||Bs({x:t,y:s},e)||Bs({x:i,y:r},e)||Bs({x:i,y:s},e))}function mge(n,e,t){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:cO(s)/2,additionalAngle:o?Yt/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let f=fge(n,u,c);r.push(f),a==="auto"&&(f.visible=pge(f,l),f.visible&&(l=f))}return r}function gge(n){return n===0||n===180?"center":n<180?"left":"right"}function yge(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function _ge(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function vge(n,e,t){let{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Xe(a)){let c=Pc(e.borderRadius),l=On(e.backdropPadding);n.fillStyle=a;let u=r-l.left,f=i-l.top,p=s-r+l.width,m=o-i+l.height;Object.values(c).some(E=>E!==0)?(n.beginPath(),Mf(n,{x:u,y:f,w:p,h:m,radius:c}),n.fill()):n.fillRect(u,f,p,m)}}function bge(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));vge(t,o,s);let a=ln(o.font),{x:c,y:l,textAlign:u}=s;kc(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function t8(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Tr);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function wge(n,e,t,r,i){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),t8(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function Ege(n,e,t){return ta(n,{label:t,index:e,type:"pointLabel"})}var I9=class extends Of{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=On(cO(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ut(e)&&!isNaN(e)?e:0,this.max=Ut(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/cO(this.options))}generateTickLabels(e){Of.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=wt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?dge(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Tr/(this._pointLabels.length||1),r=this.options.startAngle||0;return Er(e*t+Zo(r))}getDistanceFromCenterForValue(e){if(Xe(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Xe(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return Ege(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-Ir+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),t8(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&bge(this,o),i.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let p=this.getContext(f),m=i.setContext(p),E=s.setContext(p);wge(this,m,c,o,E)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:p}=u;!p||!f||(e.lineWidth=p,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=ln(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let f=On(l.backdropPadding);e.fillRect(-o/2-f.left,-s-u.size/2-f.top,o+f.width,u.size+f.height)}kc(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},zT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ar=Object.keys(zT);function T9(n,e){return n-e}function S9(n,e){if(Xe(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),Ut(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Pf(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function C9(n,e,t,r){let i=Ar.length;for(let s=Ar.indexOf(n);s<i-1;++s){let o=zT[Ar[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return Ar[s]}return Ar[i-1]}function Ige(n,e,t,r,i){for(let s=Ar.length-1;s>=Ar.indexOf(t);s--){let o=Ar[s];if(zT[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Ar[t?Ar.indexOf(t):0]}function Tge(n){for(let e=Ar.indexOf(n)+1,t=Ar.length;e<t;++e)if(zT[Ar[e]].common)return Ar[e]}function D9(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=yT(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function Sge(n,e,t,r){let i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function A9(n,e,t){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:Sge(n,r,i,t)}var x9=(()=>{class n extends Ou{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),s=this._adapter=new cpe._date(t.adapters.date);s.init(r),xf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:S9(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ut(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=Ut(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=aq(s,o,a);return this._unit=r.unit||(i.autoSkip?C9(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):Ige(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Tge(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),A9(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?r=1-s:r=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=Sr(r,0,a),i=Sr(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||C9(o.minUnit,r,i,this._getLabelCapacity(r)),c=Re(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Pf(l)||l===!0,f={},p=r,m,E;if(u&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let C=s.ticks.source==="data"&&this.getDataTimestamps();for(m=p,E=0;m<i;m=+t.add(m,c,a),E++)D9(f,m,C);return(m===i||s.bounds==="ticks"||E===1)&&D9(f,m,C),Object.keys(f).sort(T9).map(S=>+S)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return wt(a,[t,r,i],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,f=l&&c[l],p=u&&c[u],m=i[r],E=u&&p&&m&&m.major;return this._adapter.format(t,s||(E?p:f))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,s=Zo(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,A9(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(S9(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return b1(t.sort(T9))}}return n})();function RT(n,e,t){let r=0,i=n.length-1,s,o,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Dc(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Dc(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:c}=n[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var R9=class extends x9{static id="timeseries";static defaults=x9.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=RT(t,this.min),this._tableRange=RT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(RT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return RT(this._table,r*this._tableRange+this._minPos,!0)}};var Cge=typeof global=="object"&&global&&global.Object===Object&&global,$T=Cge;var Dge=typeof self=="object"&&self&&self.Object===Object&&self,Age=$T||Dge||Function("return this")(),gi=Age;var xge=gi.Symbol,Ff=xge;var n8=Object.prototype,Rge=n8.hasOwnProperty,kge=n8.toString,Ly=Ff?Ff.toStringTag:void 0;function Pge(n){var e=Rge.call(n,Ly),t=n[Ly];try{n[Ly]=void 0;var r=!0}catch{}var i=kge.call(n);return r&&(e?n[Ly]=t:delete n[Ly]),i}var r8=Pge;var Mge=Object.prototype,Nge=Mge.toString;function Oge(n){return Nge.call(n)}var i8=Oge;var Lge="[object Null]",Fge="[object Undefined]",s8=Ff?Ff.toStringTag:void 0;function Vge(n){return n==null?n===void 0?Fge:Lge:s8&&s8 in Object(n)?r8(n):i8(n)}var Oc=Vge;function Uge(n){return n!=null&&typeof n=="object"}var Ws=Uge;var jge=Array.isArray,Fy=jge;function Bge(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var xr=Bge;function zge(n){return n}var HT=zge;var $ge="[object AsyncFunction]",Hge="[object Function]",qge="[object GeneratorFunction]",Wge="[object Proxy]";function Gge(n){if(!xr(n))return!1;var e=Oc(n);return e==Hge||e==qge||e==$ge||e==Wge}var Vf=Gge;var Kge=gi["__core-js_shared__"],qT=Kge;var o8=(function(){var n=/[^.]+$/.exec(qT&&qT.keys&&qT.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function Qge(n){return!!o8&&o8 in n}var a8=Qge;var Yge=Function.prototype,Xge=Yge.toString;function Jge(n){if(n!=null){try{return Xge.call(n)}catch{}try{return n+""}catch{}}return""}var c8=Jge;var Zge=/[\\^$.*+?()[\]{}|]/g,eye=/^\[object .+?Constructor\]$/,tye=Function.prototype,nye=Object.prototype,rye=tye.toString,iye=nye.hasOwnProperty,sye=RegExp("^"+rye.call(iye).replace(Zge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oye(n){if(!xr(n)||a8(n))return!1;var e=Vf(n)?sye:eye;return e.test(c8(n))}var l8=oye;function aye(n,e){return n?.[e]}var u8=aye;function cye(n,e){var t=u8(n,e);return l8(t)?t:void 0}var Uf=cye;var d8=Object.create,lye=(function(){function n(){}return function(e){if(!xr(e))return{};if(d8)return d8(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})(),h8=lye;function uye(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var f8=uye;function dye(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var p8=dye;var hye=800,fye=16,pye=Date.now;function mye(n){var e=0,t=0;return function(){var r=pye(),i=fye-(r-t);if(t=r,i>0){if(++e>=hye)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var m8=mye;function gye(n){return function(){return n}}var g8=gye;var yye=(function(){try{var n=Uf(Object,"defineProperty");return n({},"",{}),n}catch{}})(),jf=yye;var _ye=jf?function(n,e){return jf(n,"toString",{configurable:!0,enumerable:!1,value:g8(e),writable:!0})}:HT,y8=_ye;var vye=m8(y8),_8=vye;var bye=9007199254740991,wye=/^(?:0|[1-9]\d*)$/;function Eye(n,e){var t=typeof n;return e=e??bye,!!e&&(t=="number"||t!="symbol"&&wye.test(n))&&n>-1&&n%1==0&&n<e}var WT=Eye;function Iye(n,e,t){e=="__proto__"&&jf?jf(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Bf=Iye;function Tye(n,e){return n===e||n!==n&&e!==e}var Lc=Tye;var Sye=Object.prototype,Cye=Sye.hasOwnProperty;function Dye(n,e,t){var r=n[e];(!(Cye.call(n,e)&&Lc(r,t))||t===void 0&&!(e in n))&&Bf(n,e,t)}var v8=Dye;function Aye(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),i?Bf(t,a,c):v8(t,a,c)}return t}var b8=Aye;var w8=Math.max;function xye(n,e,t){return e=w8(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=w8(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),f8(n,this,a)}}var E8=xye;function Rye(n,e){return _8(E8(n,e,HT),n+"")}var I8=Rye;var kye=9007199254740991;function Pye(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=kye}var GT=Pye;function Mye(n){return n!=null&&GT(n.length)&&!Vf(n)}var zf=Mye;function Nye(n,e,t){if(!xr(t))return!1;var r=typeof e;return(r=="number"?zf(t)&&WT(e,t.length):r=="string"&&e in t)?Lc(t[e],n):!1}var T8=Nye;function Oye(n){return I8(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&T8(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var S8=Oye;var Lye=Object.prototype;function Fye(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Lye;return n===t}var KT=Fye;function Vye(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var C8=Vye;var Uye="[object Arguments]";function jye(n){return Ws(n)&&Oc(n)==Uye}var uO=jye;var D8=Object.prototype,Bye=D8.hasOwnProperty,zye=D8.propertyIsEnumerable,$ye=uO((function(){return arguments})())?uO:function(n){return Ws(n)&&Bye.call(n,"callee")&&!zye.call(n,"callee")},Vy=$ye;function Hye(){return!1}var A8=Hye;var k8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x8=k8&&typeof module=="object"&&module&&!module.nodeType&&module,qye=x8&&x8.exports===k8,R8=qye?gi.Buffer:void 0,Wye=R8?R8.isBuffer:void 0,Gye=Wye||A8,QT=Gye;var Kye="[object Arguments]",Qye="[object Array]",Yye="[object Boolean]",Xye="[object Date]",Jye="[object Error]",Zye="[object Function]",e_e="[object Map]",t_e="[object Number]",n_e="[object Object]",r_e="[object RegExp]",i_e="[object Set]",s_e="[object String]",o_e="[object WeakMap]",a_e="[object ArrayBuffer]",c_e="[object DataView]",l_e="[object Float32Array]",u_e="[object Float64Array]",d_e="[object Int8Array]",h_e="[object Int16Array]",f_e="[object Int32Array]",p_e="[object Uint8Array]",m_e="[object Uint8ClampedArray]",g_e="[object Uint16Array]",y_e="[object Uint32Array]",At={};At[l_e]=At[u_e]=At[d_e]=At[h_e]=At[f_e]=At[p_e]=At[m_e]=At[g_e]=At[y_e]=!0;At[Kye]=At[Qye]=At[a_e]=At[Yye]=At[c_e]=At[Xye]=At[Jye]=At[Zye]=At[e_e]=At[t_e]=At[n_e]=At[r_e]=At[i_e]=At[s_e]=At[o_e]=!1;function __e(n){return Ws(n)&&GT(n.length)&&!!At[Oc(n)]}var P8=__e;function v_e(n){return function(e){return n(e)}}var M8=v_e;var N8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Uy=N8&&typeof module=="object"&&module&&!module.nodeType&&module,b_e=Uy&&Uy.exports===N8,dO=b_e&&$T.process,w_e=(function(){try{var n=Uy&&Uy.require&&Uy.require("util").types;return n||dO&&dO.binding&&dO.binding("util")}catch{}})(),hO=w_e;var O8=hO&&hO.isTypedArray,E_e=O8?M8(O8):P8,YT=E_e;var I_e=Object.prototype,T_e=I_e.hasOwnProperty;function S_e(n,e){var t=Fy(n),r=!t&&Vy(n),i=!t&&!r&&QT(n),s=!t&&!r&&!i&&YT(n),o=t||r||i||s,a=o?C8(n.length,String):[],c=a.length;for(var l in n)(e||T_e.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||WT(l,c)))&&a.push(l);return a}var L8=S_e;function C_e(n,e){return function(t){return n(e(t))}}var F8=C_e;function D_e(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var V8=D_e;var A_e=Object.prototype,x_e=A_e.hasOwnProperty;function R_e(n){if(!xr(n))return V8(n);var e=KT(n),t=[];for(var r in n)r=="constructor"&&(e||!x_e.call(n,r))||t.push(r);return t}var U8=R_e;function k_e(n){return zf(n)?L8(n,!0):U8(n)}var XT=k_e;var P_e=Uf(Object,"create"),ia=P_e;function M_e(){this.__data__=ia?ia(null):{},this.size=0}var j8=M_e;function N_e(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var B8=N_e;var O_e="__lodash_hash_undefined__",L_e=Object.prototype,F_e=L_e.hasOwnProperty;function V_e(n){var e=this.__data__;if(ia){var t=e[n];return t===O_e?void 0:t}return F_e.call(e,n)?e[n]:void 0}var z8=V_e;var U_e=Object.prototype,j_e=U_e.hasOwnProperty;function B_e(n){var e=this.__data__;return ia?e[n]!==void 0:j_e.call(e,n)}var $8=B_e;var z_e="__lodash_hash_undefined__";function $_e(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ia&&e===void 0?z_e:e,this}var H8=$_e;function $f(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}$f.prototype.clear=j8;$f.prototype.delete=B8;$f.prototype.get=z8;$f.prototype.has=$8;$f.prototype.set=H8;var fO=$f;function H_e(){this.__data__=[],this.size=0}var q8=H_e;function q_e(n,e){for(var t=n.length;t--;)if(Lc(n[t][0],e))return t;return-1}var Fc=q_e;var W_e=Array.prototype,G_e=W_e.splice;function K_e(n){var e=this.__data__,t=Fc(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():G_e.call(e,t,1),--this.size,!0}var W8=K_e;function Q_e(n){var e=this.__data__,t=Fc(e,n);return t<0?void 0:e[t][1]}var G8=Q_e;function Y_e(n){return Fc(this.__data__,n)>-1}var K8=Y_e;function X_e(n,e){var t=this.__data__,r=Fc(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var Q8=X_e;function Hf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Hf.prototype.clear=q8;Hf.prototype.delete=W8;Hf.prototype.get=G8;Hf.prototype.has=K8;Hf.prototype.set=Q8;var Vc=Hf;var J_e=Uf(gi,"Map"),JT=J_e;function Z_e(){this.size=0,this.__data__={hash:new fO,map:new(JT||Vc),string:new fO}}var Y8=Z_e;function eve(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var X8=eve;function tve(n,e){var t=n.__data__;return X8(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Uc=tve;function nve(n){var e=Uc(this,n).delete(n);return this.size-=e?1:0,e}var J8=nve;function rve(n){return Uc(this,n).get(n)}var Z8=rve;function ive(n){return Uc(this,n).has(n)}var eW=ive;function sve(n,e){var t=Uc(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var tW=sve;function qf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}qf.prototype.clear=Y8;qf.prototype.delete=J8;qf.prototype.get=Z8;qf.prototype.has=eW;qf.prototype.set=tW;var nW=qf;var ove=F8(Object.getPrototypeOf,Object),ZT=ove;var ave="[object Object]",cve=Function.prototype,lve=Object.prototype,rW=cve.toString,uve=lve.hasOwnProperty,dve=rW.call(Object);function hve(n){if(!Ws(n)||Oc(n)!=ave)return!1;var e=ZT(n);if(e===null)return!0;var t=uve.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&rW.call(t)==dve}var iW=hve;function fve(){this.__data__=new Vc,this.size=0}var sW=fve;function pve(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var oW=pve;function mve(n){return this.__data__.get(n)}var aW=mve;function gve(n){return this.__data__.has(n)}var cW=gve;var yve=200;function _ve(n,e){var t=this.__data__;if(t instanceof Vc){var r=t.__data__;if(!JT||r.length<yve-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new nW(r)}return t.set(n,e),this.size=t.size,this}var lW=_ve;function Wf(n){var e=this.__data__=new Vc(n);this.size=e.size}Wf.prototype.clear=sW;Wf.prototype.delete=oW;Wf.prototype.get=aW;Wf.prototype.has=cW;Wf.prototype.set=lW;var uW=Wf;var pW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dW=pW&&typeof module=="object"&&module&&!module.nodeType&&module,vve=dW&&dW.exports===pW,hW=vve?gi.Buffer:void 0,fW=hW?hW.allocUnsafe:void 0;function bve(n,e){if(e)return n.slice();var t=n.length,r=fW?fW(t):new n.constructor(t);return n.copy(r),r}var mW=bve;var wve=gi.Uint8Array,pO=wve;function Eve(n){var e=new n.constructor(n.byteLength);return new pO(e).set(new pO(n)),e}var gW=Eve;function Ive(n,e){var t=e?gW(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var yW=Ive;function Tve(n){return typeof n.constructor=="function"&&!KT(n)?h8(ZT(n)):{}}var _W=Tve;function Sve(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[n?a:++i];if(t(s[c],c,s)===!1)break}return e}}var vW=Sve;var Cve=vW(),bW=Cve;function Dve(n,e,t){(t!==void 0&&!Lc(n[e],t)||t===void 0&&!(e in n))&&Bf(n,e,t)}var jy=Dve;function Ave(n){return Ws(n)&&zf(n)}var wW=Ave;function xve(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var By=xve;function Rve(n){return b8(n,XT(n))}var EW=Rve;function kve(n,e,t,r,i,s,o){var a=By(n,t),c=By(e,t),l=o.get(c);if(l){jy(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,f=u===void 0;if(f){var p=Fy(c),m=!p&&QT(c),E=!p&&!m&&YT(c);u=c,p||m||E?Fy(a)?u=a:wW(a)?u=p8(a):m?(f=!1,u=mW(c,!0)):E?(f=!1,u=yW(c,!0)):u=[]:iW(c)||Vy(c)?(u=a,Vy(a)?u=EW(a):(!xr(a)||Vf(a))&&(u=_W(c))):f=!1}f&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),jy(n,t,u)}var IW=kve;function TW(n,e,t,r,i){n!==e&&bW(e,function(s,o){if(i||(i=new uW),xr(s))IW(n,e,o,t,TW,r,i);else{var a=r?r(By(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),jy(n,o,a)}},XT)}var SW=TW;var Pve=S8(function(n,e,t){SW(n,e,t)}),mO=Pve;var Mve=new J("Configuration for ngCharts");var Nve=(()=>{class n{constructor(){this.colorschemesOptions=new qt(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CW=(()=>{class n{constructor(t,r,i,s){this.zone=r,this.themeService=i,this.type="bar",this.plugins=[],this.chartClick=new Bt,this.chartHover=new Bt,this.subs=[],this.themeOverrides={},s?.registerables&&Lf.register(...s.registerables),s?.defaults&&Dt.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(yd()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let r=["type"],i=Object.getOwnPropertyNames(t);if(i.some(s=>r.includes(s))||i.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Lf(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,r){this.chart&&(this.chart.getDatasetMeta(t).hidden=r,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return mO({onHover:(t,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:r}))},onClick:(t,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(r){return new(r||n)(Ot(It),Ot(Se),Ot(Nve),Ot(Mve,8))}}static{this.\u0275dir=rt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[co]})}}return n})();var e0=class n{firestore=N(Su);constructor(){}getUserData(e){let t=GN(this.firestore,`users/${e}`);return t5(t)}async initUserData(e){let t=GN(this.firestore,`users/${e}`);(await n5(t)).exists()||await i5(t,{laScore:0})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ove(n,e){if(n&1&&(te(0,"div",1)(1,"div",2)(2,"h1"),se(3),ne(),te(4,"p",3),se(5,"Here's your lifestyle overview for today."),ne()(),te(6,"div",4)(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title"),se(10,"LA Score"),ne(),te(11,"mat-icon",6),se(12,"speed"),ne()(),te(13,"mat-card-content")(14,"div",7),se(15),ne(),te(16,"div",8),Lt(17,"canvas",9),ne()()(),te(18,"mat-card",10)(19,"mat-card-header")(20,"mat-card-title"),se(21,"Streak"),ne(),te(22,"mat-icon",11),se(23,"local_fire_department"),ne()(),te(24,"mat-card-content")(25,"div",12),se(26,"5 Days"),ne(),te(27,"p",13),se(28,"Keep it up!"),ne()()(),te(29,"mat-card",10)(30,"mat-card-header")(31,"mat-card-title"),se(32,"Habits"),ne(),te(33,"mat-icon",14),se(34,"check_circle"),ne()(),te(35,"mat-card-content")(36,"div",12),se(37,"8/10"),ne(),te(38,"p",13),se(39,"Completed today"),ne()()()(),te(40,"div",15)(41,"mat-card",16)(42,"mat-card-header")(43,"mat-card-title"),se(44,"Weekly Progress"),ne()(),te(45,"mat-card-content")(46,"div",17),Lt(47,"canvas",9),ne()()()()()),n&2){let t,r=e.ngIf,i=zd();$n(3),rm("Welcome back, ",(r.displayName==null||(t=r.displayName.split(" "))==null?null:t[0])||"User","!"),$n(12),ys(i.laScore),$n(2),Mi("data",i.barChartData)("options",i.barChartOptions)("type",i.barChartType),$n(30),Mi("data",i.lineChartData)("options",i.lineChartOptions)("type",i.lineChartType)}}Lf.register(M9,LT,N9,Oy,q9,K9,e8,jT,X9,Z9,Y9);var t0=class n{authService=N(wr);firestoreService=N(e0);laScore=0;user$=this.authService.user$;barChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#333"}}};barChartType="bar";barChartData={labels:["LA Score"],datasets:[{data:[0],label:"Score",backgroundColor:["#3f51b5"],borderRadius:5}]};lineChartOptions={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}},scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!0,position:"bottom"}}};lineChartType="line";lineChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{data:[65,59,80,81,56,55,40],label:"Weekly Progress",backgroundColor:"rgba(63, 81, 181, 0.2)",borderColor:"#3f51b5",pointBackgroundColor:"#fff",pointBorderColor:"#3f51b5",fill:"origin"}]};ngOnInit(){this.authService.user$.pipe(Zt(e=>e?(this.firestoreService.initUserData(e.uid),this.firestoreService.getUserData(e.uid)):he(null))).subscribe(e=>{e&&e.laScore!==void 0&&(this.laScore=e.laScore,this.updateChart(this.laScore))})}updateChart(e){this.barChartData={labels:["Current Score"],datasets:[{data:[e],label:"LA Score",backgroundColor:["#3f51b5"],borderRadius:5}]};let t=[e-10,e-5,e+2,e-2,e+5,e,e];this.lineChartData=Ve(H({},this.lineChartData),{datasets:[Ve(H({},this.lineChartData.datasets[0]),{data:t.map(r=>Math.max(0,Math.min(100,r)))})]})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[1,"welcome-section"],[1,"subtitle"],[1,"stats-grid"],[1,"stat-card","main-score-card"],["color","primary",1,"card-icon"],[1,"score-value"],[1,"chart-wrapper","small-chart"],["baseChart","",3,"data","options","type"],[1,"stat-card"],["color","accent",1,"card-icon"],[1,"stat-value"],[1,"stat-desc"],["color","warn",1,"card-icon"],[1,"charts-section"],[1,"chart-card"],[1,"chart-wrapper","main-chart"]],template:function(t,r){t&1&&(ms(0,Ove,48,8,"div",0),Ha(1,"async")),t&2&&Mi("ngIf",Ml(1,1,r.user$))},dependencies:[Ga,Nl,CW,Ic,If,Tf,eT,ZI,js,Us,Ol],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:1.1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.card-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.score-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3f51b5;line-height:1;margin-bottom:16px}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;margin-bottom:4px}.stat-desc[_ngcontent-%COMP%]{color:#666;margin:0}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.small-chart[_ngcontent-%COMP%]{height:100px}.main-chart[_ngcontent-%COMP%]{height:300px}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px}@media(max-width:600px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.score-value[_ngcontent-%COMP%]{font-size:2.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}}"]})};var gO=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=Ko(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=Ko(t)}_inset=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){r&2&&(rr("aria-orientation",i.vertical?"vertical":"horizontal"),gn("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,i){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return n})(),n0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();var DW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();var Lve=["*"],Fve=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,Vve=["unscopedContent"],Uve=["text"],jve=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Bve=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var zve=new J("ListOption"),_O=(()=>{class n{_elementRef=N(It);constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),vO=(()=>{class n{_elementRef=N(It);constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),$ve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),AW=(()=>{class n{_listOption=N(zve,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,hostVars:4,hostBindings:function(r,i){r&2&&gn("mdc-list-item__start",i._isAlignedAtStart())("mdc-list-item__end",!i._isAlignedAtStart())}})}return n})(),Hve=(()=>{class n extends AW{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[ps]})}return n})(),bO=(()=>{class n extends AW{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[ps]})}return n})(),qve=new J("MAT_LIST_CONFIG"),yO=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ko(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(Ko(t))}_disabled=Di(!1);_defaultOptions=N(qve,{optional:!0});static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,hostVars:1,hostBindings:function(r,i){r&2&&rr("aria-disabled",i.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),Wve=(()=>{class n{_elementRef=N(It);_ngZone=N(Se);_listBase=N(yO,{optional:!0});_platform=N(Qr);_hostElement;_isButtonElement;_noopAnimations=bf();_avatars;_icons;set lines(t){this._explicitLines=dy(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=Ko(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(Ko(t))}_disabled=Di(!1);_subscriptions=new Mt;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){N(Cu).load(XI);let t=N(QI,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new wf(this,this._ngZone,this._hostElement,this._platform,N(yt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(P0(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),i=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&r===1;i.classList.toggle("mdc-list-item__primary-text",s),i.classList.toggle("mdc-list-item__secondary-text",!s)}else i.classList.remove("mdc-list-item__primary-text"),i.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,contentQueries:function(r,i,s){if(r&1&&(gs(s,Hve,4),gs(s,bO,4)),r&2){let o;oi(o=ai())&&(i._avatars=o),oi(o=ai())&&(i._icons=o)}},hostVars:4,hostBindings:function(r,i){r&2&&(rr("aria-disabled",i.disabled)("disabled",i._isButtonElement&&i.disabled||null),gn("mdc-list-item--disabled",i.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var xW=(()=>{class n extends yO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[ub([{provide:yO,useExisting:n}]),ps],ngContentSelectors:Lve,decls:1,vars:0,template:function(r,i){r&1&&(mr(),Rt(0))},styles:[Fve],encapsulation:2,changeDetection:0})}return n})(),RW=(()=>{class n extends Wve{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=Ko(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fs(n)))(i||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,i,s){if(r&1&&(gs(s,vO,5),gs(s,_O,5),gs(s,$ve,5)),r&2){let o;oi(o=ai())&&(i._lines=o),oi(o=ai())&&(i._titles=o),oi(o=ai())&&(i._meta=o)}},viewQuery:function(r,i){if(r&1&&(ab(Vve,5),ab(Uve,5)),r&2){let s;oi(s=ai())&&(i._unscopedContent=s.first),oi(s=ai())&&(i._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(r,i){r&2&&(rr("aria-current",i._getAriaCurrent()),gn("mdc-list-item--activated",i.activated)("mdc-list-item--with-leading-avatar",i._avatars.length!==0)("mdc-list-item--with-leading-icon",i._icons.length!==0)("mdc-list-item--with-trailing-meta",i._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",i._hasBothLeadingAndTrailing())("_mat-animation-noopable",i._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[ps],ngContentSelectors:Bve,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(r,i){if(r&1){let s=tm();mr(jve),Rt(0),te(1,"span",1),Rt(2,1),Rt(3,2),te(4,"span",2,0),si("cdkObserveContent",function(){return Dd(s),Ad(i._updateItemLines(!0))}),Rt(6,3),ne()(),Rt(7,4),Rt(8,5),Lt(9,"div",3)}},dependencies:[g5],encapsulation:2,changeDetection:0})}return n})();var kW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return n})();var PW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[y5,JI,DW,Yn,n0]})}return n})();function Kve(n,e){if(n&1){let t=tm();te(0,"div",1)(1,"mat-card",2),Lt(2,"div",3),te(3,"div",4),Lt(4,"div",5),te(5,"div",6)(6,"h2",7),se(7),ne(),te(8,"p",8),se(9),ne()()(),Lt(10,"mat-divider"),te(11,"mat-card-content")(12,"mat-list")(13,"h3",9),se(14,"Account Details"),ne(),te(15,"mat-list-item")(16,"mat-icon",10),se(17,"fingerprint"),ne(),te(18,"div",11),se(19,"User ID"),ne(),te(20,"div",12),se(21),ne()(),te(22,"mat-list-item")(23,"mat-icon",10),se(24,"verified_user"),ne(),te(25,"div",11),se(26,"Email Verified"),ne(),te(27,"div",13),se(28),ne()(),te(29,"mat-list-item")(30,"mat-icon",10),se(31,"calendar_today"),ne(),te(32,"div",11),se(33,"Last Sign In"),ne(),te(34,"div",13),se(35),Ha(36,"date"),ne()()(),Lt(37,"mat-divider"),te(38,"div",14)(39,"button",15),si("click",function(){Dd(t);let i=zd();return Ad(i.authService.logout())}),te(40,"mat-icon"),se(41,"logout"),ne(),se(42," Sign Out "),ne()()()()()}if(n&2){let t=e.ngIf;$n(4),lb("background-image","url("+(t.photoURL||"")+")"),$n(3),ys(t.displayName),$n(2),ys(t.email),$n(12),ys(t.uid),$n(7),ys(t.emailVerified?"Yes":"No"),$n(7),ys(vD(36,7,t.metadata.lastSignInTime,"medium"))}}var r0=class n{authService=N(wr);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-card"],[1,"profile-cover"],[1,"profile-header"],[1,"profile-avatar"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["mat-subheader",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"uid-text"],["matListItemLine",""],[1,"profile-actions"],["mat-stroked-button","","color","warn",3,"click"]],template:function(t,r){t&1&&(ms(0,Kve,43,10,"div",0),Ha(1,"async")),t&2&&Mi("ngIf",Ml(1,1,r.user$))},dependencies:[Ga,Nl,Ic,If,Tf,Ec,Ef,js,Us,PW,xW,RW,bO,kW,gO,vO,_O,n0,Ol,xD],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 20px;min-height:calc(100vh - 144px);background-color:#f5f5f5}.profile-card[_ngcontent-%COMP%]{width:100%;max-width:500px;overflow:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014}.profile-cover[_ngcontent-%COMP%]{height:120px;background:linear-gradient(135deg,#3f51b5,#5c6bc0)}.profile-header[_ngcontent-%COMP%]{position:relative;padding:0 24px 24px;text-align:center;margin-top:-60px}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background-size:cover;background-position:center;background-color:#e0e0e0;border:4px solid white;box-shadow:0 2px 10px #0000001a;margin:0 auto 16px}.profile-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.5rem;font-weight:500;color:#333}.profile-email[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem}.uid-text[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;color:#666}.profile-actions[_ngcontent-%COMP%]{padding:24px 16px 8px;display:flex;justify-content:center}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:8px}  .mat-mdc-list-item-icon{color:#757575}"]})};var wO=de(n=>!!n),Qve=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>wO);return dE(this.auth).pipe(pn(1),i(t,r),de(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(ae(vo),ae(ko))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),zy=n=>({canActivate:[Qve],data:{authGuardPipe:n}});var MW=n=>ol(wO,de(e=>e||n)),NW=n=>ol(wO,de(e=>e&&n||!0));var OW=()=>MW(["login"]),LW=()=>NW(["dashboard"]),FW=[H({path:"",component:nT},zy(LW)),H({path:"login",component:rT},zy(LW)),{path:"logout",component:iT},H({path:"dashboard",component:t0},zy(OW)),H({path:"profile",component:r0},zy(OW)),{path:"**",redirectTo:""}];var EO="Service workers are disabled or not supported by this browser",Gf=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new ue(r=>r.error(new $(5601,!1)));else{let r=null,i=new ut;this.worker=new ue(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let s=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(Zt(()=>e.getRegistration().then(l=>{if(!l)throw new $(5601,!1);return l})));let o=new ut;this.events=o.asObservable();let a=l=>{let{data:u}=l;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(ii,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(pn(1)).subscribe(i=>{i.postMessage(H({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Jt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(pn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Jt(i=>i.nonce===e),pn(1),de(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},Yve=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ut;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=eo,this.notificationClicks=eo,this.notificationCloses=eo,this.pushSubscriptionChanges=eo,this.subscription=eo;return}this.messages=this.sw.eventsOfType("PUSH").pipe(de(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(de(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(de(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(de(i=>i.data)),this.pushManager=this.sw.registration.pipe(de(i=>i.pushManager));let r=this.pushManager.pipe(Zt(i=>i.getSubscription()));this.subscription=new ue(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(EO));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(Zt(c=>c.subscribe(r)),pn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(EO));let t=r=>{if(r===null)throw new $(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new $(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(pn(1),Zt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ae(Gf))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Xve=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=eo,this.unrecoverable=eo;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(EO));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new $(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ae(Gf))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),UW=new J("");function Jve(){let n=N($y);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=N(UW),t=N(Se),r=N(ii);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=VW(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),VW(+a[0])]);break;default:throw new $(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(os(5604,!1)))})})}function VW(n){return new Promise(e=>setTimeout(e,n))}function Zve(){let n=N($y),e=N(yt),t=!0;return new Gf(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var $y=class{enabled;updateViaCache;type;scope;registrationStrategy};function jW(n,e={}){return In([Yve,Xve,{provide:UW,useValue:n},{provide:$y,useValue:e},{provide:Gf,useFactory:Zve},rb(Jve)])}var BW={providers:[QS(),hA(FW),cB(),jB(()=>BB(s5.firebase)),D4(()=>A4()),e5(()=>r5()),jW("ngsw-worker.js",{enabled:!om(),registrationStrategy:"registerWhenStable:30000"})]};var ebe=["*",[["mat-toolbar-row"]]],tbe=["*","mat-toolbar-row"],nbe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),zW=(()=>{class n{_elementRef=N(It);_platform=N(Qr);_document=N(Je);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(r&1&&gs(s,nbe,5),r&2){let o;oi(o=ai())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){r&2&&(Pl(i.color?"mat-"+i.color:""),gn("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",i._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:tbe,decls:2,vars:0,template:function(r,i){r&1&&(mr(ebe),Rt(0),Rt(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return n})();var i0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=st({imports:[Yn]})}return n})();function ibe(n,e){n&1&&(sb(0),te(1,"a",6)(2,"mat-icon"),se(3,"dashboard"),ne(),se(4," Dashboard "),ne(),te(5,"a",7)(6,"mat-icon"),se(7,"person"),ne(),se(8," Profile "),ne(),ob())}function sbe(n,e){}var s0=class n{authService=N(wr);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-header"]],decls:12,vars:4,consts:[["loginTemplate",""],["color","primary",1,"app-header"],["routerLink","/",1,"logo"],[1,"spacer"],["mat-button","","href","https://la.vvsk.in","target","_blank"],[4,"ngIf","ngIfElse"],["mat-button","","routerLink","/dashboard"],["mat-button","","routerLink","/profile"]],template:function(t,r){if(t&1&&(te(0,"mat-toolbar",1)(1,"span",2),se(2,"Lifestyle Adapter"),ne(),Lt(3,"span",3),te(4,"a",4)(5,"mat-icon"),se(6,"library_books"),ne(),se(7," LA Framework 1.0 "),ne(),ms(8,ibe,9,0,"ng-container",5),Ha(9,"async"),ms(10,sbe,0,0,"ng-template",null,0,db),ne()),t&2){let i=cb(11);$n(8),Mi("ngIf",Ml(9,2,r.user$))("ngIfElse",i)}},dependencies:[i0,zW,Ec,Ef,tw,Ga,Nl,js,Us,Ol],styles:[".app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;font-size:1.2rem;letter-spacing:.5px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})};var o0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["href","#"]],template:function(t,r){t&1&&(Ur(0,"footer",0)(1,"div",1)(2,"p"),se(3,"\xA9 2026 Lifestyle Adapter. All rights reserved."),jr(),Ur(4,"div",2)(5,"a",3),se(6,"Privacy Policy"),jr(),Ur(7,"a",3),se(8,"Terms of Service"),jr()()()())},dependencies:[i0],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:20px 0;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;margin-left:20px;font-size:.9rem;transition:color .3s}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px}}"]})};var a0=class n{title="lifestyle-adapter";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"content"]],template:function(t,r){t&1&&(Lt(0,"app-header"),te(1,"main",0),Lt(2,"router-outlet"),ne(),Lt(3,"app-footer"))},dependencies:[Mm,s0,o0],styles:[".content[_ngcontent-%COMP%]{min-height:calc(100vh - 128px);padding:20px}"]})};FD(a0,BW).catch(n=>console.error(n));
