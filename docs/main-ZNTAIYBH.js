var _W=Object.defineProperty,vW=Object.defineProperties;var bW=Object.getOwnPropertyDescriptors;var Ly=Object.getOwnPropertySymbols;var DO=Object.prototype.hasOwnProperty,AO=Object.prototype.propertyIsEnumerable;var SO=(n,e,t)=>e in n?_W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})DO.call(e,t)&&SO(n,t,e[t]);if(Ly)for(var t of Ly(e))AO.call(e,t)&&SO(n,t,e[t]);return n},Fe=(n,e)=>vW(n,bW(e));var $u=(n,e)=>{var t={};for(var r in n)DO.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Ly)for(var r of Ly(n))e.indexOf(r)<0&&AO.call(n,r)&&(t[r]=n[r]);return t};var Pn=null,Fy=!1,CT=1,EW=null,Br=Symbol("SIGNAL");function Re(n){let e=Pn;return Pn=n,e}function Vy(){return Pn}var Uy={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jy(n){if(Fy)throw new Error("");if(Pn===null)return;Pn.consumerOnSignalRead(n);let e=Pn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Pn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Pn.producers,t!==void 0&&t.producer===n)){Pn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Pn&&(!r||IW(i,Pn)))return;let s=Hu(Pn),o={producer:n,consumer:Pn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Pn.producersTail=o,e!==void 0?e.nextProducer=o:Pn.producers=o,s&&NO(n,o)}function CO(){CT++}function RO(n){if(!(Hu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===CT)){if(!n.producerMustRecompute(n)&&!zy(n)){AT(n);return}n.producerRecomputeValue(n),AT(n)}}function RT(n){if(n.consumers===void 0)return;let e=Fy;Fy=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||wW(r)}}finally{Fy=e}}function xT(){return Pn?.consumerAllowSignalWrites!==!1}function wW(n){n.dirty=!0,RT(n),n.consumerMarkedDirty?.(n)}function AT(n){n.dirty=!1,n.lastCleanEpoch=CT}function By(n){return n&&xO(n),Re(n)}function xO(n){n.producersTail=void 0,n.recomputing=!0}function PT(n,e){Re(e),n&&PO(n)}function PO(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Hu(n))do t=NT(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function zy(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(RO(t),r!==t.version))return!0}return!1}function Gf(n){if(Hu(n)){let e=n.producers;for(;e!==void 0;)e=NT(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function NO(n,e){let t=n.consumersTail,r=Hu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)NO(i.producer,i)}function NT(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Hu(e)){let s=e.producers;for(;s!==void 0;)s=NT(s)}return t}function Hu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function MO(n){EW?.(n)}function IW(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function kO(n,e){return Object.is(n,e)}function TW(){throw new Error}var OO=TW;function LO(n){OO(n)}function MT(n){OO=n}var SW=null;function kT(n,e){let t=Object.create($y);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FO(t);return r[Br]=t,MO(t),[r,o=>Kf(t,o),o=>VO(t,o)]}function FO(n){return jy(n),n.value}function Kf(n,e){xT()||LO(n),n.equal(n.value,e)||(n.value=e,DW(n))}function VO(n,e){xT()||LO(n),Kf(n,e(n.value))}var $y=Fe($({},Uy),{equal:kO,value:void 0,kind:"signal"});function DW(n){n.version++,CO(),RT(n),SW?.(n)}function OT(n){let e=Re(null);try{return n()}finally{Re(e)}}function Te(n){return typeof n=="function"}function qu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hy=qu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function jc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var kt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof Hy?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{UO(s)}catch(o){e=e??[],o instanceof Hy?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hy(e)}}add(e){var t;if(e&&e!==this)if(this.closed)UO(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&jc(t,e)}remove(e){let{_finalizers:t}=this;t&&jc(t,e),e instanceof n&&e._removeParent(this)}};kt.EMPTY=(()=>{let n=new kt;return n.closed=!0,n})();var LT=kt.EMPTY;function qy(n){return n instanceof kt||n&&"closed"in n&&Te(n.remove)&&Te(n.add)&&Te(n.unsubscribe)}function UO(n){Te(n)?n():n.unsubscribe()}var ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wu={setTimeout(n,e,...t){let{delegate:r}=Wu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Wu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wy(n){Wu.setTimeout(()=>{let{onUnhandledError:e}=ai;if(e)e(n);else throw n})}function Bc(){}var jO=FT("C",void 0,void 0);function BO(n){return FT("E",void 0,n)}function zO(n){return FT("N",n,void 0)}function FT(n,e,t){return{kind:n,value:e,error:t}}var zc=null;function Gu(n){if(ai.useDeprecatedSynchronousErrorHandling){let e=!zc;if(e&&(zc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=zc;if(zc=null,t)throw r}}else n()}function $O(n){ai.useDeprecatedSynchronousErrorHandling&&zc&&(zc.errorThrown=!0,zc.error=n)}var $c=class extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qy(e)&&e.add(this)):this.destination=RW}static create(e,t,r){return new Rs(e,t,r)}next(e){this.isStopped?UT(zO(e),this):this._next(e)}error(e){this.isStopped?UT(BO(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?UT(jO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AW=Function.prototype.bind;function VT(n,e){return AW.call(n,e)}var jT=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gy(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gy(r)}else Gy(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gy(t)}}},Rs=class extends $c{constructor(e,t,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ai.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&VT(e.next,s),error:e.error&&VT(e.error,s),complete:e.complete&&VT(e.complete,s)}):i=e}this.destination=new jT(i)}};function Gy(n){ai.useDeprecatedSynchronousErrorHandling?$O(n):Wy(n)}function CW(n){throw n}function UT(n,e){let{onStoppedNotification:t}=ai;t&&Wu.setTimeout(()=>t(n,e))}var RW={closed:!0,next:Bc,error:CW,complete:Bc};var Ku=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tr(n){return n}function Hc(...n){return BT(n)}function BT(n){return n.length===0?Tr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=PW(t)?t:new Rs(t,r,i);return Gu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HO(r),new r((i,s)=>{let o=new Rs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ku](){return this}pipe(...t){return BT(t)(this)}toPromise(t){return t=HO(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function HO(n){var e;return(e=n??ai.Promise)!==null&&e!==void 0?e:Promise}function xW(n){return n&&Te(n.next)&&Te(n.error)&&Te(n.complete)}function PW(n){return n&&n instanceof $c||xW(n)&&qy(n)}function NW(n){return Te(n?.lift)}function He(n){return e=>{if(NW(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(n,e,t,r,i){return new zT(n,e,t,r,i)}var zT=class extends $c{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var qO=qu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var mt=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ky(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qO}next(t){Gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Gu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?LT:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,jc(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new Ky(e,t),n})(),Ky=class extends mt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:LT}};var Ot=class extends mt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $T={now(){return($T.delegate||Date).now()},delegate:void 0};var Qy=class extends kt{constructor(e,t){super()}schedule(e,t=0){return this}};var Qf={setInterval(n,e,...t){let{delegate:r}=Qf;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Qf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qu=class extends Qy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Qf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Qf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,jc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Yu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Yu.now=$T.now;var Xu=class extends Yu{constructor(e,t=Yu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var HT=new Xu(Qu);var Yy=class extends Qu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Xy=class extends Xu{};var qT=new Xy(Yy);var Zn=new ue(n=>n.complete());function WO(n){return n&&Te(n.schedule)}function GO(n){return n[n.length-1]}function Jy(n){return Te(GO(n))?n.pop():void 0}function na(n){return WO(GO(n))?n.pop():void 0}function Zy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function QO(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function KO(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qc(n){return this instanceof qc?(this.v=n,this):new qc(n)}function YO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(I){return Promise.resolve(I).then(m,f)}}function a(m,I){r[m]&&(i[m]=function(D){return new Promise(function(S,N){s.push([m,D,S,N])>1||c(m,D)})},I&&(i[m]=I(i[m])))}function c(m,I){try{l(r[m](I))}catch(D){p(s[0][3],D)}}function l(m){m.value instanceof qc?Promise.resolve(m.value.v).then(u,f):p(s[0][2],m)}function u(m){c("next",m)}function f(m){c("throw",m)}function p(m,I){m(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function XO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof KO=="function"?KO(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var e_=n=>n&&typeof n.length=="number"&&typeof n!="function";function t_(n){return Te(n?.then)}function n_(n){return Te(n[Ku])}function r_(n){return Symbol.asyncIterator&&Te(n?.[Symbol.asyncIterator])}function i_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MW(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var s_=MW();function o_(n){return Te(n?.[s_])}function a_(n){return YO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield qc(t.read());if(i)return yield qc(void 0);yield yield qc(r)}}finally{t.releaseLock()}})}function c_(n){return Te(n?.getReader)}function St(n){if(n instanceof ue)return n;if(n!=null){if(n_(n))return kW(n);if(e_(n))return OW(n);if(t_(n))return LW(n);if(r_(n))return JO(n);if(o_(n))return FW(n);if(c_(n))return VW(n)}throw i_(n)}function kW(n){return new ue(e=>{let t=n[Ku]();if(Te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OW(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LW(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Wy)})}function FW(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function JO(n){return new ue(e=>{UW(n,e).catch(t=>e.error(t))})}function VW(n){return JO(a_(n))}function UW(n,e){var t,r,i,s;return QO(this,void 0,void 0,function*(){try{for(t=XO(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function er(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ra(n,e=0){return He((t,r)=>{t.subscribe(nt(r,i=>er(r,n,()=>r.next(i),e),()=>er(r,n,()=>r.complete(),e),i=>er(r,n,()=>r.error(i),e)))})}function ia(n,e=0){return He((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ZO(n,e){return St(n).pipe(ia(e),ra(e))}function e1(n,e){return St(n).pipe(ia(e),ra(e))}function t1(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function n1(n,e){return new ue(t=>{let r;return er(t,e,()=>{r=n[s_](),er(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function l_(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{er(t,e,()=>{let r=n[Symbol.asyncIterator]();er(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function r1(n,e){return l_(a_(n),e)}function i1(n,e){if(n!=null){if(n_(n))return ZO(n,e);if(e_(n))return t1(n,e);if(t_(n))return e1(n,e);if(r_(n))return l_(n,e);if(o_(n))return n1(n,e);if(c_(n))return r1(n,e)}throw i_(n)}function $t(n,e){return e?i1(n,e):St(n)}function de(...n){let e=na(n);return $t(n,e)}function Yf(n,e){let t=Te(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function u_(n){return!!n&&(n instanceof ue||Te(n.lift)&&Te(n.subscribe))}var Wc=qu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(n,e){return He((t,r)=>{let i=0;t.subscribe(nt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:jW}=Array;function BW(n,e){return jW(e)?n(...e):n(e)}function d_(n){return pe(e=>BW(n,e))}var{isArray:zW}=Array,{getPrototypeOf:$W,prototype:HW,keys:qW}=Object;function h_(n){if(n.length===1){let e=n[0];if(zW(e))return{args:e,keys:null};if(WW(e)){let t=qW(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function WW(n){return n&&typeof n=="object"&&$W(n)===HW}function f_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function WT(...n){let e=na(n),t=Jy(n),{args:r,keys:i}=h_(n);if(r.length===0)return $t([],e);let s=new ue(GW(r,e,i?o=>f_(i,o):Tr));return t?s.pipe(d_(t)):s}function GW(n,e,t=Tr){return r=>{s1(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)s1(e,()=>{let l=$t(n[c],e),u=!1;l.subscribe(nt(r,f=>{s[c]=f,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function s1(n,e,t){n?er(t,n,e):e()}function o1(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},m=D=>l<r?I(D):c.push(D),I=D=>{s&&e.next(D),l++;let S=!1;St(t(D,u++)).subscribe(nt(e,N=>{i?.(N),s?m(N):e.next(N)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let N=c.shift();o?er(e,o,()=>I(N)):I(N)}p()}catch(N){e.error(N)}}))};return n.subscribe(nt(e,m,()=>{f=!0,p()})),()=>{a?.()}}function Un(n,e,t=1/0){return Te(e)?Un((r,i)=>pe((s,o)=>e(r,s,i,o))(St(n(r,i))),t):(typeof e=="number"&&(t=e),He((r,i)=>o1(r,i,n,t)))}function a1(n=1/0){return Un(Tr,n)}function c1(){return a1(1)}function Ju(...n){return c1()($t(n,na(n)))}function Xf(n){return new ue(e=>{St(n()).subscribe(e)})}function GT(...n){let e=Jy(n),{args:t,keys:r}=h_(n),i=new ue(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let f=!1;St(t[u]).subscribe(nt(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?f_(r,a):a),s.complete())}))}});return e?i.pipe(d_(e)):i}var xs=new ue(Bc);function fn(n,e){return He((t,r)=>{let i=0;t.subscribe(nt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Gc(n){return He((e,t)=>{let r=null,i=!1,s;r=e.subscribe(nt(t,void 0,void 0,o=>{s=St(n(o,Gc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Zu(n,e){return Te(e)?Un(n,e,1):Un(n,1)}function KT(n){return He((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sn(n){return n<=0?()=>Zn:He((e,t)=>{let r=0;e.subscribe(nt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ed(n,e=Tr){return n=n??KW,He((t,r)=>{let i,s=!0;t.subscribe(nt(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function KW(n,e){return n===e}function l1(n=QW){return He((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QW(){return new Wc}function Kc(n){return He((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ps(n,e){let t=arguments.length>=2;return r=>r.pipe(n?fn((i,s)=>n(i,s,r)):Tr,sn(1),t?KT(e):l1(()=>new Wc))}function p_(n){return n<=0?()=>Zn:He((e,t)=>{let r=[];e.subscribe(nt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function YT(n={}){let{connector:e=()=>new mt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,u=f=!1},I=()=>{let D=o;m(),D?.unsubscribe()};return He((D,S)=>{l++,!f&&!u&&p();let N=c=c??e();S.add(()=>{l--,l===0&&!f&&!u&&(a=QT(I,i))}),N.subscribe(S),!o&&l>0&&(o=new Rs({next:M=>N.next(M),error:M=>{f=!0,p(),a=QT(m,t,M),N.error(M)},complete:()=>{u=!0,p(),a=QT(m,r),N.complete()}}),St(D).subscribe(o))})(s)}}function QT(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Rs({next:()=>{r.unsubscribe(),n()}});return St(e(...t)).subscribe(r)}function XT(n){return fn((e,t)=>n<=t)}function m_(...n){let e=na(n);return He((t,r)=>{(e?Ju(n,t,e):Ju(n,t)).subscribe(r)})}function Ht(n,e){return He((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(nt(r,c=>{i?.unsubscribe();let l=0,u=s++;St(n(c,u)).subscribe(i=nt(r,f=>r.next(e?e(c,f,u,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Qc(n){return He((e,t)=>{St(n).subscribe(nt(t,()=>t.complete(),Bc)),!t.closed&&e.subscribe(t)})}function on(n,e,t){let r=Te(n)||e||t?{next:n,error:e,complete:t}:n;return r?He((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(nt(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tr}var JT;function g_(){return JT}function Bi(n){let e=JT;return JT=n,e}var u1=Symbol("NotFound");function td(n){return n===u1||n?.name==="\u0275NotFound"}var Xc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pS=new Xc("21.0.1");var w_="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(zi(e,t)),this.code=e}};function ZW(n){return`NG0${Math.abs(n)}`}function zi(n,e){return`${ZW(n)}${e?": "+e:""}`}var aa=globalThis;function ct(n){for(let e in n)if(n[e]===ct)return e;throw Error("")}function m1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ms(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ms).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function I_(n,e){return n?e?`${n} ${e}`:n:e||""}var eG=ct({__forward_ref__:ct});function T_(n){return n.__forward_ref__=T_,n.toString=function(){return Ms(this())},n}function tr(n){return mS(n)?n():n}function mS(n){return typeof n=="function"&&n.hasOwnProperty(eG)&&n.__forward_ref__===T_}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function rp(n){return tG(n,S_)}function gS(n){return rp(n)!==null}function tG(n,e){return n.hasOwnProperty(e)&&n[e]||null}function nG(n){let e=n?.[S_]??null;return e||null}function eS(n){return n&&n.hasOwnProperty(__)?n[__]:null}var S_=ct({\u0275prov:ct}),__=ct({\u0275inj:ct}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yS(n){return n&&!!n.\u0275providers}var _S=ct({\u0275cmp:ct}),vS=ct({\u0275dir:ct}),bS=ct({\u0275pipe:ct}),ES=ct({\u0275mod:ct}),Zf=ct({\u0275fac:ct}),tl=ct({__NG_ELEMENT_ID__:ct}),d1=ct({__NG_ENV_ID__:ct});function ip(n){return typeof n=="string"?n:n==null?"":String(n)}function g1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ip(n)}var y1=ct({ngErrorCode:ct}),rG=ct({ngErrorMessage:ct}),iG=ct({ngTokenPath:ct});function wS(n,e){return _1("",-200,e)}function D_(n,e){throw new H(-201,!1)}function _1(n,e,t){let r=new H(e,n);return r[y1]=e,r[rG]=n,t&&(r[iG]=t),r}function sG(n){return n[y1]}var tS;function v1(){return tS}function jn(n){let e=tS;return tS=n,e}function IS(n,e,t){let r=rp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;D_(n,"Injector")}var oG={},Yc=oG,nS="__NG_DI_FLAG__",rS=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Jc(t)||0;try{return this.injector.get(e,r&8?null:Yc,r)}catch(i){if(td(i))return i;throw i}}};function aG(n,e=0){let t=g_();if(t===void 0)throw new H(-203,!1);if(t===null)return IS(n,void 0,e);{let r=cG(e),i=t.retrieve(n,r);if(td(i)){if(r.optional)return null;throw i}return i}}function ie(n,e=0){return(v1()||aG)(tr(n),e)}function O(n,e){return ie(n,Jc(e))}function Jc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cG(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function iS(n){let e=[];for(let t=0;t<n.length;t++){let r=tr(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=lG(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ie(i,s))}else e.push(ie(r))}return e}function b1(n,e){return n[nS]=e,n.prototype[nS]=e,n}function lG(n){return n[nS]}function sa(n,e){let t=n.hasOwnProperty(Zf);return t?n[Zf]:null}function E1(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function w1(n){return n.flat(Number.POSITIVE_INFINITY)}function A_(n,e){n.forEach(t=>Array.isArray(t)?A_(t,e):e(t))}function TS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function I1(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function T1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function C_(n,e,t){let r=rd(n,e);return r>=0?n[r|1]=t:(r=~r,T1(n,r,e,t)),r}function R_(n,e){let t=rd(n,e);if(t>=0)return n[t|1]}function rd(n,e){return uG(n,e,1)}function uG(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ca={},Bn=[],la=new J(""),SS=new J("",-1),DS=new J(""),ep=class{get(e,t=Yc){if(t===Yc){let i=_1("",-201);throw i.name="\u0275NotFound",i}return t}};function AS(n){return n[ES]||null}function ks(n){return n[_S]||null}function CS(n){return n[vS]||null}function S1(n){return n[bS]||null}function mn(n){return{\u0275providers:n}}function D1(n){return mn([{provide:la,multi:!0,useValue:n}])}function A1(...n){return{\u0275providers:RS(!0,n),\u0275fromNgModule:!0}}function RS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return A_(e,o=>{let a=o;v_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&C1(i,s),t}function C1(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xS(i,s=>{e(s,r)})}}function v_(n,e,t,r){if(n=tr(n),!n)return!1;let i=null,s=eS(n),o=!s&&ks(n);if(!s&&!o){let c=n.ngModule;if(s=eS(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)v_(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{A_(s.imports,u=>{v_(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&C1(l,e)}if(!a){let l=sa(i)||(()=>new i);e({provide:i,useFactory:l,deps:Bn},i),e({provide:DS,useValue:i,multi:!0},i),e({provide:la,useValue:()=>ie(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;xS(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function xS(n,e){for(let t of n)yS(t)&&(t=t.\u0275providers),Array.isArray(t)?xS(t,e):e(t)}var dG=ct({provide:String,useValue:ct});function R1(n){return n!==null&&typeof n=="object"&&dG in n}function hG(n){return!!(n&&n.useExisting)}function fG(n){return!!(n&&n.useFactory)}function b_(n){return typeof n=="function"}var op=new J(""),y_={},h1={},ZT;function id(){return ZT===void 0&&(ZT=new ep),ZT}var wt=class{},Zc=class extends wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,oS(e,o=>this.processProvider(o)),this.records.set(SS,nd(void 0,this)),i.has("environment")&&this.records.set(wt,nd(void 0,this));let s=this.records.get(op);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(DS,Bn,{self:!0}))}retrieve(e,t){let r=Jc(t)||0;try{return this.get(e,Yc,r)}catch(i){if(td(i))return i;throw i}}destroy(){Jf(this),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return Jf(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Jf(this);let t=Bi(this),r=jn(void 0),i;try{return e()}finally{Bi(t),jn(r)}}get(e,t=Yc,r){if(Jf(this),e.hasOwnProperty(d1))return e[d1](this);let i=Jc(r),s,o=Bi(this),a=jn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=_G(e)&&rp(e);u&&this.injectableDefInScope(u)?l=nd(sS(e),y_):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?id():this.parent;return t=i&8&&t===Yc?null:t,c.get(e,t)}catch(c){let l=sG(c);throw l===-200||l===-201?new H(l,null):c}finally{jn(a),Bi(o)}}resolveInjectorInitializers(){let e=Re(null),t=Bi(this),r=jn(void 0),i;try{let s=this.get(la,Bn,{self:!0});for(let o of s)o()}finally{Bi(t),jn(r),Re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ms(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tr(e);let t=b_(e)?e:tr(e&&e.provide),r=mG(e);if(!b_(e)&&e.multi===!0){let i=this.records.get(t);i||(i=nd(void 0,y_,!0),i.factory=()=>iS(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Re(null);try{if(t.value===h1)throw wS(Ms(e));return t.value===y_&&(t.value=h1,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&yG(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=tr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sS(n){let e=rp(n),t=e!==null?e.factory:sa(n);if(t!==null)return t;if(n instanceof J)throw new H(204,!1);if(n instanceof Function)return pG(n);throw new H(204,!1)}function pG(n){if(n.length>0)throw new H(204,!1);let t=nG(n);return t!==null?()=>t.factory(n):()=>new n}function mG(n){if(R1(n))return nd(void 0,n.useValue);{let e=x1(n);return nd(e,y_)}}function x1(n,e,t){let r;if(b_(n)){let i=tr(n);return sa(i)||sS(i)}else if(R1(n))r=()=>tr(n.useValue);else if(fG(n))r=()=>n.useFactory(...iS(n.deps||[]));else if(hG(n))r=(i,s)=>ie(tr(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=tr(n&&(n.useClass||n.provide));if(gG(n))r=()=>new i(...iS(n.deps));else return sa(i)||sS(i)}return r}function Jf(n){if(n.destroyed)throw new H(205,!1)}function nd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gG(n){return!!n.deps}function yG(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _G(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function oS(n,e){for(let t of n)Array.isArray(t)?oS(t,e):t&&yS(t)?oS(t.\u0275providers,e):e(t)}function Lt(n,e){let t;n instanceof Zc?(Jf(n),t=n):t=new rS(n);let r,i=Bi(t),s=jn(void 0);try{return e()}finally{Bi(i),jn(s)}}function P1(){return v1()!==void 0||g_()!=null}var ci=0,me=1,be=2,pn=3,zr=4,zn=5,sd=6,od=7,Nn=8,ua=9,$i=10,At=11,ad=12,PS=13,nl=14,nr=15,da=16,rl=17,Hi=18,ap=19,NS=20,Ns=21,x_=22,cp=23,Dr=24,P_=25,lp=26,Ft=27,N1=1;var ha=7,up=8,il=9,$n=10;function qi(n){return Array.isArray(n)&&typeof n[N1]=="object"}function li(n){return Array.isArray(n)&&n[N1]===!0}function MS(n){return(n.flags&4)!==0}function fa(n){return n.componentOffset>-1}function cd(n){return(n.flags&1)===1}function Os(n){return!!n.template}function ld(n){return(n[be]&512)!==0}function sl(n){return(n[be]&256)===256}var M1="svg",k1="math";function $r(n){for(;Array.isArray(n);)n=n[ci];return n}function kS(n,e){return $r(e[n])}function ui(n,e){return $r(e[n.index])}function N_(n,e){return n.data[e]}function OS(n,e){return n[e]}function LS(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Hr(n,e){let t=e[n];return qi(t)?t:t[ci]}function O1(n){return(n[be]&4)===4}function M_(n){return(n[be]&128)===128}function L1(n){return li(n[pn])}function pa(n,e){return e==null?null:n[e]}function FS(n){n[rl]=0}function VS(n){n[be]&1024||(n[be]|=1024,M_(n)&&hp(n))}function F1(n,e){for(;n>0;)e=e[nl],n--;return e}function dp(n){return!!(n[be]&9216||n[Dr]?.dirty)}function k_(n){n[$i].changeDetectionScheduler?.notify(8),n[be]&64&&(n[be]|=1024),dp(n)&&hp(n)}function hp(n){n[$i].changeDetectionScheduler?.notify(0);let e=oa(n);for(;e!==null&&!(e[be]&8192||(e[be]|=8192,!M_(e)));)e=oa(e)}function US(n,e){if(sl(n))throw new H(911,!1);n[Ns]===null&&(n[Ns]=[]),n[Ns].push(e)}function V1(n,e){if(n[Ns]===null)return;let t=n[Ns].indexOf(e);t!==-1&&n[Ns].splice(t,1)}function oa(n){let e=n[pn];return li(e)?e[pn]:e}function jS(n){return n[od]??=[]}function BS(n){return n.cleanup??=[]}function U1(n,e,t,r){let i=jS(e);i.push(t),n.firstCreatePass&&BS(n).push(r,i.length-1)}var xe={lFrame:X1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var aS=!1;function j1(){return xe.lFrame.elementDepthCount}function B1(){xe.lFrame.elementDepthCount++}function zS(){xe.lFrame.elementDepthCount--}function O_(){return xe.bindingsEnabled}function $S(){return xe.skipHydrationRootTNode!==null}function HS(n){return xe.skipHydrationRootTNode===n}function qS(){xe.skipHydrationRootTNode=null}function Ye(){return xe.lFrame.lView}function Hn(){return xe.lFrame.tView}function L_(n){return xe.lFrame.contextLView=n,n[Nn]}function F_(n){return xe.lFrame.contextLView=null,n}function qn(){let n=WS();for(;n!==null&&n.type===64;)n=n.parent;return n}function WS(){return xe.lFrame.currentTNode}function z1(){let n=xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ud(n,e){let t=xe.lFrame;t.currentTNode=n,t.isParent=e}function GS(){return xe.lFrame.isParent}function KS(){xe.lFrame.isParent=!1}function $1(){return xe.lFrame.contextLView}function QS(){return aS}function YS(n){let e=aS;return aS=n,e}function H1(){let n=xe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function q1(n){return xe.lFrame.bindingIndex=n}function V_(){return xe.lFrame.bindingIndex++}function XS(n){let e=xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function W1(){return xe.lFrame.inI18n}function G1(n,e){let t=xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,U_(e)}function K1(){return xe.lFrame.currentDirectiveIndex}function U_(n){xe.lFrame.currentDirectiveIndex=n}function Q1(n){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function JS(){return xe.lFrame.currentQueryIndex}function j_(n){xe.lFrame.currentQueryIndex=n}function vG(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[zn]:null}function ZS(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=vG(s),i===null||(s=s[nl],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=xe.lFrame=Y1();return r.currentTNode=e,r.lView=n,!0}function B_(n){let e=Y1(),t=n[me];xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Y1(){let n=xe.lFrame,e=n===null?null:n.child;return e===null?X1(n):e}function X1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function J1(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var e0=J1;function z_(){let n=J1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Z1(n){return(xe.lFrame.contextLView=F1(n,xe.lFrame.contextLView))[Nn]}function ma(){return xe.lFrame.selectedIndex}function ga(n){xe.lFrame.selectedIndex=n}function t0(){let n=xe.lFrame;return N_(n.tView,n.selectedIndex)}function eL(){return xe.lFrame.currentNamespace}var tL=!0;function $_(){return tL}function fp(n){tL=n}function cS(n,e=null,t=null,r){let i=n0(n,e,t,r);return i.resolveInjectorInitializers(),i}function n0(n,e=null,t=null,r,i=new Set){let s=[t||Bn,A1(n)];return r=r||(typeof n=="object"?void 0:Ms(n)),new Zc(s,e||id(),r||null,i)}var _t=class n{static THROW_IF_NOT_FOUND=Yc;static NULL=new ep;static create(e,t){if(Array.isArray(e))return cS({name:""},t,e,"");{let r=e.name??"";return cS({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>ie(SS)});static __NG_ELEMENT_ID__=-1},Xe=new J(""),Ls=(()=>{class n{static __NG_ELEMENT_ID__=bG;static __NG_ENV_ID__=t=>t}return n})(),lS=class extends Ls{_lView;constructor(e){super(),this._lView=e}get destroyed(){return sl(this._lView)}onDestroy(e){let t=this._lView;return US(t,e),()=>V1(t,e)}};function bG(){return new lS(Ye())}var nL=!1,Fs=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ot(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ue(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),uS=class extends mt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,P1()&&(this.destroyRef=O(Ls,{optional:!0})??void 0,this.pendingTasks=O(Fs,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},an=uS;function E_(...n){}function r0(n){let e,t;function r(){n=E_;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function i0(n){return queueMicrotask(()=>n()),()=>{n=E_}}var s0="isAngularZone",tp=s0+"_ID",EG=0,Pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new an(!1);onMicrotaskEmpty=new an(!1);onStable=new an(!1);onError=new an(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=nL}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,TG(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(s0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,wG,E_,E_);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},wG={};function o0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){r0(()=>{n.callbackScheduled=!1,dS(n),n.isCheckStableRunning=!0,o0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dS(n)}function TG(n){let e=()=>{IG(n)},t=EG++;n._inner=n._inner.fork({name:"angular",properties:{[s0]:!0,[tp]:t,[tp+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(SG(c))return r.invokeTask(s,o,a,c);try{return f1(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),p1(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return f1(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!DG(c)&&e(),p1(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,dS(n),o0(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function dS(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function f1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function p1(n){n._nesting--,o0(n)}var np=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new an;onMicrotaskEmpty=new an;onStable=new an;onError=new an;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function SG(n){return rL(n,"__ignore_ng_zone__")}function DG(n){return rL(n,"__scheduler_tick__")}function rL(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Sr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rr=new J("",{factory:()=>{let n=O(Pe),e=O(wt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Sr),t.handleError(r))})}}}),iL={provide:la,useValue:()=>{let n=O(Sr,{optional:!0})},multi:!0},AG=new J("",{factory:()=>{let n=O(Xe).defaultView;if(!n)return;let e=O(rr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),O(Ls).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function a0(){return mn([D1(()=>void O(AG))])}function ya(n,e){let[t,r,i]=kT(n,e?.equal),s=t,o=s[Br];return s.set=r,s.update=i,s.asReadonly=sL.bind(s),s}function sL(){let n=this[Br];if(n.readonlyFn===void 0){let e=()=>this();e[Br]=n,n.readonlyFn=e}return n.readonlyFn}var el=class{},pp=new J("",{factory:()=>!0});var c0=new J(""),_a=(()=>{class n{internalPendingTasks=O(Fs);scheduler=O(el);errorHandler=O(rr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),l0=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new hS})}return n})(),hS=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},fS=class{[Br];constructor(e){this[Br]=e}destroy(){this[Br].destroy()}};function ir(n){return OT(n)}function yd(n){return{toString:n}.toString()}var H_="__parameters__";function LG(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function FG(n,e,t){return yd(()=>{let r=LG(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let f=c.hasOwnProperty(H_)?c[H_]:Object.defineProperty(c,H_,{value:[]})[H_];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var sr=b1(FG("Optional"),8);function VG(n){return typeof n=="function"}function kL(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Z_=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},ba=(()=>{let n=()=>OL;return n.ngInherit=!0,n})();function OL(n){return n.type.prototype.ngOnChanges&&(n.setInput=jG),UG}function UG(){let n=FL(this),e=n?.current;if(e){let t=n.previous;if(t===ca)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jG(n,e,t,r,i){let s=this.declaredInputs[r],o=FL(n)||BG(n,{previous:ca,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Z_(l&&l.currentValue,t,c===ca),kL(n,e,i,t)}var LL="__ngSimpleChanges__";function FL(n){return n[LL]||null}function BG(n,e){return n[LL]=e}var oL=[];var ft=function(n,e=null,t){for(let r=0;r<oL.length;r++){let i=oL[r];i(n,e,t)}},it=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(it||{});function zG(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=OL(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function VL(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Q_(n,e,t){UL(n,e,3,t)}function Y_(n,e,t,r){(n[be]&3)===t&&UL(n,e,t,r)}function u0(n,e){let t=n[be];(t&3)===e&&(t&=16383,t+=1,n[be]=t)}function UL(n,e,t,r){let i=r!==void 0?n[rl]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[rl]+=65536),(a<s||s==-1)&&($G(n,t,e,c),n[rl]=(n[rl]&4294901760)+c+2),c++}function aL(n,e){ft(it.LifecycleHookStart,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),ft(it.LifecycleHookEnd,n,e)}}function $G(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[be]>>14<n[rl]>>16&&(n[be]&3)===e&&(n[be]+=16384,aL(a,s)):aL(a,s)}var hd=-1,yp=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function HG(n){return(n.flags&8)!==0}function qG(n){return(n.flags&16)!==0}function WG(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];GG(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function jL(n){return n===3||n===4||n===6}function GG(n){return n.charCodeAt(0)===64}function fd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cL(n,t,i,null,e[++r]):cL(n,t,i,null,null))}}return n}function cL(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function BL(n){return n!==hd}function ev(n){return n&32767}function KG(n){return n>>16}function tv(n,e){let t=KG(n),r=e;for(;t>0;)r=r[nl],t--;return r}var _0=!0;function nv(n){let e=_0;return _0=n,e}var QG=256,zL=QG-1,$L=5,YG=0,Wi={};function XG(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(tl)&&(r=t[tl]),r==null&&(r=t[tl]=YG++);let i=r&zL,s=1<<i;e.data[n+(i>>$L)]|=s}function HL(n,e){let t=qL(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,d0(r.data,n),d0(e,null),d0(r.blueprint,null));let i=K0(n,e),s=n.injectorIndex;if(BL(i)){let o=ev(i),a=tv(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function d0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qL(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function K0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=YL(i),r===null)return hd;if(t++,i=i[nl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hd}function JG(n,e,t){XG(n,e,t)}function ZG(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(jL(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function WL(n,e,t){if(t&8||n!==void 0)return n;D_(e,"NodeInjector")}function GL(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ua],s=jn(void 0);try{return i?i.get(e,r,t&8):IS(e,r,t&8)}finally{jn(s)}}return WL(r,e,t)}function KL(n,e,t,r=0,i){if(n!==null){if(e[be]&2048&&!(r&2)){let o=r8(n,e,t,r,Wi);if(o!==Wi)return o}let s=QL(n,e,t,r,Wi);if(s!==Wi)return s}return GL(e,t,r,i)}function QL(n,e,t,r,i){let s=t8(t);if(typeof s=="function"){if(!ZS(e,n,r))return r&1?WL(i,t,r):GL(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))D_(t);else return o}finally{e0()}}else if(typeof s=="number"){let o=null,a=qL(n,e),c=hd,l=r&1?e[nr][zn]:null;for((a===-1||r&4)&&(c=a===-1?K0(n,e):e[a+8],c===hd||!uL(r,!1)?a=-1:(o=e[me],a=ev(c),e=tv(c,e)));a!==-1;){let u=e[me];if(lL(s,a,u.data)){let f=e8(a,e,t,o,r,l);if(f!==Wi)return f}c=e[a+8],c!==hd&&uL(r,e[me].data[a+8]===l)&&lL(s,a,e)?(o=u,a=ev(c),e=tv(c,e)):a=-1}}return i}function e8(n,e,t,r,i,s){let o=e[me],a=o.data[n+8],c=r==null?fa(a)&&_0:r!=o&&(a.type&3)!==0,l=i&1&&s===a,u=X_(a,o,t,c,l);return u!==null?rv(e,o,u,a,i):Wi}function X_(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,f=r?a:a+u,p=i?a+u:l;for(let m=f;m<p;m++){let I=o[m];if(m<c&&t===I||m>=c&&I.type===t)return m}if(i){let m=o[c];if(m&&Os(m)&&m.type===t)return c}return null}function rv(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof yp){let a=s;if(a.resolving){let m=g1(o[t]);throw wS(m)}let c=nv(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],u,f=a.injectImpl?jn(a.injectImpl):null,p=ZS(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&zG(t,o[t],e)}finally{f!==null&&jn(f),nv(c),a.resolving=!1,e0()}}return s}function t8(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(tl)?n[tl]:void 0;return typeof e=="number"?e>=0?e&zL:n8:e}function lL(n,e,t){let r=1<<n;return!!(t[e+(n>>$L)]&r)}function uL(n,e){return!(n&2)&&!(n&1&&e)}var ol=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KL(this._tNode,this._lView,e,Jc(r),t)}};function n8(){return new ol(qn(),Ye())}function Ep(n){return yd(()=>{let e=n.prototype.constructor,t=e[Zf]||v0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Zf]||v0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function v0(n){return mS(n)?()=>{let e=v0(tr(n));return e&&e()}:sa(n)}function r8(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[be]&2048&&!ld(o);){let a=QL(s,o,t,r|2,Wi);if(a!==Wi)return a;let c=s.parent;if(!c){let l=o[NS];if(l){let u=l.get(t,Wi,r);if(u!==Wi)return u}c=YL(o),o=o[nl]}s=c}return i}function YL(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[zn]:null}function wp(n){return ZG(qn(),n)}function i8(){return _d(qn(),Ye())}function _d(n,e){return new qt(ui(n,e))}var qt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=i8}return n})();function s8(n){return n instanceof qt?n.nativeElement:n}function o8(){return this._results[Symbol.iterator]()}var iv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new mt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=w1(e);(this._changesDetected=!E1(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=o8};function XL(n){return(n.flags&128)===128}var Q0=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Q0||{}),JL=new Map,a8=0;function c8(){return a8++}function l8(n){JL.set(n[ap],n)}function b0(n){JL.delete(n[ap])}var dL="__ngContext__";function pd(n,e){qi(e)?(n[dL]=e[ap],l8(e)):n[dL]=e}function ZL(n){return tF(n[ad])}function eF(n){return tF(n[zr])}function tF(n){for(;n!==null&&!li(n);)n=n[zr];return n}var u8;function Y0(n){u8=n}var fv=new J("",{factory:()=>d8}),d8="ng";var pv=new J(""),Us=new J("",{providedIn:"platform",factory:()=>"unknown"}),vd=new J(""),bd=new J("",{factory:()=>O(Xe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nF=!1,rF=new J("",{factory:()=>nF});var h8=(n,e,t,r)=>{};function f8(n,e,t,r){h8(n,e,t,r)}function mv(n){return(n.flags&32)===32}var p8=()=>null;function iF(n,e,t=!1){return p8(n,e,t)}function sF(n,e){let t=n.contentQueries;if(t!==null){let r=Re(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];j_(s),a.contentQueries(2,e[o],o)}}}finally{Re(r)}}}function E0(n,e,t){j_(0);let r=Re(null);try{e(n,t)}finally{Re(r)}}function X0(n,e,t){if(MS(e)){let r=Re(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Re(r)}}}var fi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(fi||{}),q_;function m8(){if(q_===void 0&&(q_=null,aa.trustedTypes))try{q_=aa.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return q_}function gv(n){return m8()?.createHTML(n)||n}var W_;function g8(){if(W_===void 0&&(W_=null,aa.trustedTypes))try{W_=aa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return W_}function hL(n){return g8()?.createScriptURL(n)||n}var Vs=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${w_})`}},w0=class extends Vs{getTypeName(){return"HTML"}},I0=class extends Vs{getTypeName(){return"Style"}},T0=class extends Vs{getTypeName(){return"Script"}},S0=class extends Vs{getTypeName(){return"URL"}},D0=class extends Vs{getTypeName(){return"ResourceURL"}};function pi(n){return n instanceof Vs?n.changingThisBreaksApplicationSecurity:n}function js(n,e){let t=oF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${w_})`)}return t===e}function oF(n){return n instanceof Vs&&n.getTypeName()||null}function J0(n){return new w0(n)}function Z0(n){return new I0(n)}function eD(n){return new T0(n)}function tD(n){return new S0(n)}function nD(n){return new D0(n)}function y8(n){let e=new C0(n);return _8()?new A0(e):e}var A0=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(gv(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},C0=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=gv(e),t}};function _8(){try{return!!new window.DOMParser().parseFromString(gv(""),"text/html")}catch{return!1}}var v8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ip(n){return n=String(n),n.match(v8)?n:"unsafe:"+n}function Bs(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Tp(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var aF=Bs("area,br,col,hr,img,wbr"),cF=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lF=Bs("rp,rt"),b8=Tp(lF,cF),E8=Tp(cF,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),w8=Tp(lF,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fL=Tp(aF,E8,w8,b8),uF=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),I8=Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),T8=Bs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),S8=Tp(uF,I8,T8),D8=Bs("script,style,template"),R0=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=R8(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=C8(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=pL(e).toLowerCase();if(!fL.hasOwnProperty(t))return this.sanitizedSomething=!0,!D8.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!S8.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;uF[a]&&(c=Ip(c)),this.buf.push(" ",o,'="',mL(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=pL(e).toLowerCase();fL.hasOwnProperty(t)&&!aF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(mL(e))}};function A8(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function C8(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw dF(e);return e}function R8(n){let e=n.firstChild;if(e&&A8(n,e))throw dF(e);return e}function pL(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function dF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var x8=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P8=/([^\#-~ |!])/g;function mL(n){return n.replace(/&/g,"&amp;").replace(x8,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(P8,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var G_;function rD(n,e){let t=null;try{G_=G_||y8(n);let r=e?String(e):"";t=G_.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=G_.getInertBodyElement(r)}while(r!==s);let a=new R0().sanitizeChildren(gL(t)||t);return gv(a)}finally{if(t){let r=gL(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function gL(n){return"content"in n&&N8(n)?n.content:null}function N8(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Tn=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Tn||{});function hF(n){let e=pF();return e?e.sanitize(Tn.URL,n)||"":js(n,"URL")?pi(n):Ip(ip(n))}function fF(n){let e=pF();if(e)return hL(e.sanitize(Tn.RESOURCE_URL,n)||"");if(js(n,"ResourceURL"))return hL(pi(n));throw new H(904,!1)}function M8(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fF:hF}function iD(n,e,t){return M8(e,t)(n)}function pF(){let n=Ye();return n&&n[$i].sanitizer}var k8=/^>|^->|<!--|-->|--!>|<!-$/g,O8=/(<|>)/g,L8="\u200B$1\u200B";function F8(n){return n.replace(k8,e=>e.replace(O8,L8))}function mF(n){return n instanceof Function?n():n}function V8(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var gF="ng-template";function U8(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&V8(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(sD(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function sD(n){return n.type===4&&n.value!==gF}function j8(n,e,t){let r=n.type===4&&!t?gF:n.value;return e===r}function B8(n,e,t){let r=4,i=n.attrs,s=i!==null?H8(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!di(r)&&!di(c))return!1;if(o&&di(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!j8(n,c,t)||c===""&&e.length===1){if(di(r))return!1;o=!0}}else if(r&8){if(i===null||!U8(n,i,c,t)){if(di(r))return!1;o=!0}}else{let l=e[++a],u=z8(c,i,sD(n),t);if(u===-1){if(di(r))return!1;o=!0;continue}if(l!==""){let f;if(u>s?f="":f=i[u+1].toLowerCase(),r&2&&l!==f){if(di(r))return!1;o=!0}}}}return di(r)||o}function di(n){return(n&1)===0}function z8(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return q8(e,n)}function yF(n,e,t=!1){for(let r=0;r<e.length;r++)if(B8(n,e[r],t))return!0;return!1}function $8(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function H8(n){for(let e=0;e<n.length;e++){let t=n[e];if(jL(t))return e}return n.length}function q8(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function W8(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function yL(n,e){return n?":not("+e.trim()+")":e}function G8(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!di(o)&&(e+=yL(s,i),i=""),r=o,s=s||!di(r);t++}return i!==""&&(e+=yL(s,i)),e}function K8(n){return n.map(G8).join(",")}function Q8(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!di(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var mi={};function Y8(n,e){return n.createText(e)}function X8(n,e,t){n.setValue(e,t)}function J8(n,e){return n.createComment(F8(e))}function _F(n,e,t){return n.createElement(e,t)}function sv(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vF(n,e,t){n.appendChild(e,t)}function _L(n,e,t,r,i){r!==null?sv(n,e,t,r,i):vF(n,e,t)}function Z8(n,e,t,r){n.removeChild(null,e,t,r)}function eK(n,e,t){n.setAttribute(e,"style",t)}function tK(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bF(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&WG(n,e,r),i!==null&&tK(n,e,i),s!==null&&eK(n,e,s)}function oD(n,e,t,r,i,s,o,a,c,l,u){let f=Ft+r,p=f+i,m=nK(f,p),I=typeof l=="function"?l():l;return m[me]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:u}}function nK(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mi);return t}function rK(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function aD(n,e,t,r,i,s,o,a,c,l,u){let f=e.blueprint.slice();return f[ci]=i,f[be]=r|4|128|8|64|1024,(l!==null||n&&n[be]&2048)&&(f[be]|=2048),FS(f),f[pn]=f[nl]=n,f[Nn]=t,f[$i]=o||n&&n[$i],f[At]=a||n&&n[At],f[ua]=c||n&&n[ua]||null,f[zn]=s,f[ap]=c8(),f[sd]=u,f[NS]=l,f[nr]=e.type==2?n[nr]:f,f}function iK(n,e,t){let r=ui(e,n),i=rK(t),s=n[$i].rendererFactory,o=cD(n,aD(n,i,null,EF(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function EF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function wF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cD(n,e){return n[ad]?n[PS][zr]=e:n[ad]=e,n[PS]=e,e}function Cr(n=1){IF(Hn(),Ye(),ma()+n,!1)}function IF(n,e,t,r){if(!r)if((e[be]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Q_(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Y_(e,s,0,t)}ga(t)}var yv=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(yv||{});function x0(n,e,t,r){let i=Re(null);try{let[s,o,a]=n.inputs[t],c=null;(o&yv.SignalBased)!==0&&(c=e[s][Br]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):kL(e,c,s,r)}finally{Re(i)}}var Gi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Gi||{}),sK;function lD(n,e){return sK(n,e)}var md=new Set,uD=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(uD||{}),dl=new J(""),vL=new Set;function Sp(n){vL.has(n)||(vL.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var TF=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var oK=new J("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function SF(n,e,t){let r=n.get(oK);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function aK(n,e){for(let[t,r]of e)SF(n,r.animateFns)}function bL(n,e,t,r){let i=n?.[lp]?.enter;e!==null&&i&&i.has(t.index)&&aK(r,i)}function dd(n,e,t,r,i,s,o,a){if(i!=null){let c,l=!1;li(i)?c=i:qi(i)&&(l=!0,i=i[ci]);let u=$r(i);n===0&&r!==null?(bL(a,r,s,t),o==null?vF(e,r,u):sv(e,r,u,o||null,!0)):n===1&&r!==null?(bL(a,r,s,t),sv(e,r,u,o||null,!0)):n===2?EL(a,s,t,f=>{Z8(e,u,l,f)}):n===3&&EL(a,s,t,()=>{e.destroyNode(u)}),c!=null&&_K(e,n,t,c,s,r,o)}}function cK(n,e){DF(n,e),e[ci]=null,e[zn]=null}function lK(n,e,t,r,i,s){r[ci]=i,r[zn]=e,_v(n,r,t,1,i,s)}function DF(n,e){e[$i].changeDetectionScheduler?.notify(9),_v(n,e,e[At],2,null,null)}function uK(n){let e=n[ad];if(!e)return h0(n[me],n);for(;e;){let t=null;if(qi(e))t=e[ad];else{let r=e[$n];r&&(t=r)}if(!t){for(;e&&!e[zr]&&e!==n;)qi(e)&&h0(e[me],e),e=e[pn];e===null&&(e=n),qi(e)&&h0(e[me],e),t=e&&e[zr]}e=t}}function dD(n,e){let t=n[il],r=t.indexOf(e);t.splice(r,1)}function AF(n,e){if(sl(e))return;let t=e[At];t.destroyNode&&_v(n,e,t,3,null,null),uK(e)}function h0(n,e){if(sl(e))return;let t=Re(null);try{e[be]&=-129,e[be]|=256,e[Dr]&&Gf(e[Dr]),fK(n,e),hK(n,e),e[me].type===1&&e[At].destroy();let r=e[da];if(r!==null&&li(e[pn])){r!==e[pn]&&dD(r,e);let i=e[Hi];i!==null&&i.detachView(n)}b0(e)}finally{Re(t)}}function EL(n,e,t,r){let i=n?.[lp];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&md.add(n),SF(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),dK(n,r)}else n&&md.delete(n),r(!1)},i)}function dK(n,e){let t=n[lp]?.running;if(t){t.then(()=>{n[lp].running=void 0,md.delete(n),e(!0)});return}e(!1)}function hK(n,e){let t=n.cleanup,r=e[od];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[od]=null);let i=e[Ns];if(i!==null){e[Ns]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[cp];if(s!==null){e[cp]=null;for(let o of s)o.destroy()}}function fK(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof yp)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ft(it.LifecycleHookStart,a,c);try{c.call(a)}finally{ft(it.LifecycleHookEnd,a,c)}}else{ft(it.LifecycleHookStart,i,s);try{s.call(i)}finally{ft(it.LifecycleHookEnd,i,s)}}}}}function CF(n,e,t){return pK(n,e.parent,t)}function pK(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ci];if(fa(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===fi.None||i===fi.Emulated)return null}return ui(r,t)}function RF(n,e,t){return gK(n,e,t)}function mK(n,e,t){return n.type&40?ui(n,t):null}var gK=mK,wL;function hD(n,e,t,r){let i=CF(n,r,e),s=e[At],o=r.parent||e[zn],a=RF(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)_L(s,i,t[c],a,!1);else _L(s,i,t,a,!1);wL!==void 0&&wL(s,r,e,t,i)}function mp(n,e){if(e!==null){let t=e.type;if(t&3)return ui(e,n);if(t&4)return P0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mp(n,r);{let i=n[e.index];return li(i)?P0(-1,i):$r(i)}}else{if(t&128)return mp(n,e.next);if(t&32)return lD(e,n)()||$r(n[e.index]);{let r=xF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oa(n[nr]);return mp(i,r)}else return mp(n,e.next)}}}return null}function xF(n,e){if(e!==null){let r=n[nr][zn],i=e.projection;return r.projection[i]}return null}function P0(n,e){let t=$n+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return mp(r,i)}return e[ha]}function fD(n,e,t,r,i,s,o){for(;t!=null;){let a=r[ua];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(o&&e===0&&(c&&pd($r(c),r),t.flags|=2),!mv(t))if(l&8)fD(n,e,t.child,r,i,s,!1),dd(e,n,a,i,c,t,s,r);else if(l&32){let u=lD(t,r),f;for(;f=u();)dd(e,n,a,i,f,t,s,r);dd(e,n,a,i,c,t,s,r)}else l&16?PF(n,e,r,t,i,s):dd(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function _v(n,e,t,r,i,s){fD(t,r,n.firstChild,e,i,s,!1)}function yK(n,e,t){let r=e[At],i=CF(n,t,e),s=t.parent||e[zn],o=RF(s,t,e);PF(r,0,e,t,i,o)}function PF(n,e,t,r,i,s){let o=t[nr],c=o[zn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];dd(e,n,t[ua],i,u,r,s,t)}else{let l=c,u=o[pn];XL(r)&&(l.flags|=128),fD(n,e,l,u,i,s,!0)}}function _K(n,e,t,r,i,s,o){let a=r[ha],c=$r(r);a!==c&&dd(e,n,t,s,a,i,o);for(let l=$n;l<r.length;l++){let u=r[l];_v(u[me],u,n,e,s,a)}}function vK(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Gi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Gi.Important),n.setStyle(t,r,i,s))}}function NF(n,e,t,r,i){let s=ma(),o=r&2;try{ga(-1),o&&e.length>Ft&&IF(n,e,Ft,!1);let a=o?it.TemplateUpdateStart:it.TemplateCreateStart;ft(a,i,t),t(r,i)}finally{ga(s);let a=o?it.TemplateUpdateEnd:it.TemplateCreateEnd;ft(a,i,t)}}function vv(n,e,t){AK(n,e,t),(t.flags&64)===64&&CK(n,e,t)}function Dp(n,e,t=ui){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function bK(n,e,t,r){let s=r.get(rF,nF)||t===fi.ShadowDom||t===fi.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return EK(o),o}function EK(n){wK(n)}var wK=()=>null;function IK(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function TK(n,e,t,r,i,s){let o=e[me];if(yD(n,o,e,t,r)){fa(n)&&DK(e,n.index);return}n.type&3&&(t=IK(t)),SK(n,e,t,r,i,s)}function SK(n,e,t,r,i,s){if(n.type&3){let o=ui(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function DK(n,e){let t=Hr(e,n);t[be]&16||(t[be]|=64)}function AK(n,e,t){let r=t.directiveStart,i=t.directiveEnd;fa(t)&&iK(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||HL(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=rv(e,n,o,t);if(pd(c,e),s!==null&&NK(e,o-r,c,a,t,s),Os(a)){let l=Hr(t.index,e);l[Nn]=rv(e,n,o,t)}}}function CK(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=K1();try{ga(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];U_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&RK(c,l)}}finally{ga(-1),U_(o)}}function RK(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function pD(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];yF(e,s.selectors,!1)&&(r??=[],Os(s)?r.unshift(s):r.push(s))}return r}function xK(n,e,t,r,i,s){let o=ui(n,e);PK(e[At],o,s,n.value,t,r,i)}function PK(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ip(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function NK(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];x0(r,t,c,l)}}function mD(n,e,t,r,i){let s=Ft+t,o=e[me],a=i(o,e,n,r,t);e[s]=a,ud(n,!0);let c=n.type===2;return c?(bF(e[At],a,n),(j1()===0||cd(n))&&pd(a,e),B1()):pd(a,e),$_()&&(!c||!mv(n))&&hD(o,e,a,n),n}function gD(n){let e=n;return GS()?KS():(e=e.parent,ud(e,!1)),e}function MK(n,e){let t=n[ua];if(!t)return;let r;try{r=t.get(rr,null)}catch{r=null}r?.(e)}function yD(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],f=e.data[l];x0(f,t[l],u,i),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];x0(u,l,r,i),a=!0}return a}function kK(n,e){let t=Hr(e,n),r=t[me];OK(r,t);let i=t[ci];i!==null&&t[sd]===null&&(t[sd]=iF(i,t[ua])),ft(it.ComponentStart);try{_D(r,t,t[Nn])}finally{ft(it.ComponentEnd,t[Nn])}}function OK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function _D(n,e,t){B_(e);try{let r=n.viewQuery;r!==null&&E0(1,r,t);let i=n.template;i!==null&&NF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Hi]?.finishViewCreation(n),n.staticContentQueries&&sF(n,e),n.staticViewQueries&&E0(2,n.viewQuery,t);let s=n.components;s!==null&&LK(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[be]&=-5,z_()}}function LK(n,e){for(let t=0;t<e.length;t++)kK(n,e[t])}function MF(n,e,t,r){let i=Re(null);try{let s=e.tView,a=n[be]&4096?4096:16,c=aD(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[da]=l;let u=n[Hi];return u!==null&&(c[Hi]=u.createEmbeddedView(s)),_D(s,c,t),c}finally{Re(i)}}function N0(n,e){return!e||e.firstChild===null||XL(n)}function _p(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push($r(s)),li(s)&&kF(s,r);let o=t.type;if(o&8)_p(n,e,t.child,r);else if(o&32){let a=lD(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=xF(e,t);if(Array.isArray(a))r.push(...a);else{let c=oa(e[nr]);_p(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kF(n,e){for(let t=$n;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&_p(r[me],r,i,e)}n[ha]!==n[ci]&&e.push(n[ha])}function OF(n){if(n[P_]!==null){for(let e of n[P_])e.impl.addSequence(e);n[P_].length=0}}var LF=[];function FK(n){return n[Dr]??VK(n)}function VK(n){let e=LF.pop()??Object.create(jK);return e.lView=n,e}function UK(n){n.lView[Dr]!==n&&(n.lView=null,LF.push(n))}var jK=Fe($({},Uy),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hp(n.lView)},consumerOnSignalRead(){this.lView[Dr]=this}});function BK(n){let e=n[Dr]??Object.create(zK);return e.lView=n,e}var zK=Fe($({},Uy),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=oa(n.lView);for(;e&&!FF(e[me]);)e=oa(e);e&&VS(e)},consumerOnSignalRead(){this.lView[Dr]=this}});function FF(n){return n.type!==2}function VF(n){if(n[cp]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[cp])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[be]&8192)}}var $K=100;function UF(n,e=0){let r=n[$i].rendererFactory,i=!1;i||r.begin?.();try{HK(n,e)}finally{i||r.end?.()}}function HK(n,e){let t=QS();try{YS(!0),M0(n,e);let r=0;for(;dp(n);){if(r===$K)throw new H(103,!1);r++,M0(n,1)}}finally{YS(t)}}function qK(n,e,t,r){if(sl(e))return;let i=e[be],s=!1,o=!1;B_(e);let a=!0,c=null,l=null;s||(FF(n)?(l=FK(e),c=By(l)):Vy()===null?(a=!1,l=BK(e),c=By(l)):e[Dr]&&(Gf(e[Dr]),e[Dr]=null));try{FS(e),q1(n.bindingStartIndex),t!==null&&NF(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let m=n.preOrderCheckHooks;m!==null&&Q_(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Y_(e,m,0,null),u0(e,0)}if(o||WK(e),VF(e),jF(e,0),n.contentQueries!==null&&sF(n,e),!s)if(u){let m=n.contentCheckHooks;m!==null&&Q_(e,m)}else{let m=n.contentHooks;m!==null&&Y_(e,m,1),u0(e,1)}KK(n,e);let f=n.components;f!==null&&zF(e,f,0);let p=n.viewQuery;if(p!==null&&E0(2,p,r),!s)if(u){let m=n.viewCheckHooks;m!==null&&Q_(e,m)}else{let m=n.viewHooks;m!==null&&Y_(e,m,2),u0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[x_]){for(let m of e[x_])m();e[x_]=null}s||(OF(e),e[be]&=-73)}catch(u){throw s||hp(e),u}finally{l!==null&&(PT(l,c),a&&UK(l)),z_()}}function jF(n,e){for(let t=ZL(n);t!==null;t=eF(t))for(let r=$n;r<t.length;r++){let i=t[r];BF(i,e)}}function WK(n){for(let e=ZL(n);e!==null;e=eF(e)){if(!(e[be]&2))continue;let t=e[il];for(let r=0;r<t.length;r++){let i=t[r];VS(i)}}}function GK(n,e,t){ft(it.ComponentStart);let r=Hr(e,n);try{BF(r,t)}finally{ft(it.ComponentEnd,r[Nn])}}function BF(n,e){M_(n)&&M0(n,e)}function M0(n,e){let r=n[me],i=n[be],s=n[Dr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zy(s)),o||=!1,s&&(s.dirty=!1),n[be]&=-9217,o)qK(r,n,r.template,n[Nn]);else if(i&8192){let a=Re(null);try{VF(n),jF(n,1);let c=r.components;c!==null&&zF(n,c,1),OF(n)}finally{Re(a)}}}function zF(n,e,t){for(let r=0;r<e.length;r++)GK(n,e[r],t)}function KK(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ga(~i);else{let s=i,o=t[++r],a=t[++r];G1(o,s);let c=e[s];ft(it.HostBindingsUpdateStart,c);try{a(2,c)}finally{ft(it.HostBindingsUpdateEnd,c)}}}}finally{ga(-1)}}function vD(n,e){let t=QS()?64:1088;for(n[$i].changeDetectionScheduler?.notify(e);n;){n[be]|=t;let r=oa(n);if(ld(n)&&!r)return n;n=r}return null}function $F(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HF(n,e,t,r=!0){let i=e[me];if(QK(i,e,n,t),r){let o=P0(t,n),a=e[At],c=a.parentNode(n[ha]);c!==null&&lK(i,n[zn],a,e,c,o)}let s=e[sd];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function k0(n,e){if(n.length<=$n)return;let t=$n+e,r=n[t];if(r){let i=r[da];i!==null&&i!==n&&dD(i,r),e>0&&(n[t-1][zr]=r[zr]);let s=sp(n,$n+e);cK(r[me],r);let o=s[Hi];o!==null&&o.detachView(s[me]),r[pn]=null,r[zr]=null,r[be]&=-129}return r}function QK(n,e,t,r){let i=$n+r,s=t.length;r>0&&(t[i-1][zr]=e),r<s-$n?(e[zr]=t[i],TS(t,$n+r,e)):(t.push(e),e[zr]=null),e[pn]=t;let o=e[da];o!==null&&t!==o&&qF(o,e);let a=e[Hi];a!==null&&a.insertView(n),k_(e),e[be]|=128}function qF(n,e){let t=n[il],r=e[pn];if(qi(r))n[be]|=2;else{let i=r[pn][nr];e[nr]!==i&&(n[be]|=2)}t===null?n[il]=[e]:t.push(e)}var va=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return _p(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return sl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pn];if(li(e)){let t=e[up],r=t?t.indexOf(this):-1;r>-1&&(k0(e,r),sp(t,r))}this._attachedToViewContainer=!1}AF(this._lView[me],this._lView)}onDestroy(e){US(this._lView,e)}markForCheck(){vD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[be]&=-129}reattach(){k_(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,UF(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ld(this._lView),t=this._lView[da];t!==null&&!e&&dD(t,this._lView),DF(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=ld(this._lView),r=this._lView[da];r!==null&&!t&&qF(r,this._lView),k_(this._lView)}};var al=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=YK;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=MF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new va(s)}}return n})();function YK(){return bv(qn(),Ye())}function bv(n,e){return n.type&4?new al(e,n,_d(n,e)):null}function Ed(n,e,t,r,i){let s=n.data[e];if(s===null)s=XK(n,e,t,r,i),W1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=z1();s.injectorIndex=o===null?-1:o.injectorIndex}return ud(s,!0),s}function XK(n,e,t,r,i){let s=WS(),o=GS(),a=o?s:s&&s.parent,c=n.data[e]=ZK(n,a,t,e,r,i);return JK(n,c,s,o),c}function JK(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function ZK(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return $S()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var e7=()=>null;function O0(n,e){return e7(n,e)}var WF=class{},Ev=class{},L0=class{resolveComponentFactory(e){throw new H(917,!1)}},Ap=class{static NULL=new L0},Ar=class{},wd=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>t7()}return n})();function t7(){let n=Ye(),e=qn(),t=Hr(e.index,n);return(qi(t)?t:n)[At]}var GF=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var J_={},F0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,J_,r);return i!==J_||t===J_?i:this.parentInjector.get(e,t,r)}};function ov(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=I_(i,a);else if(s==2){let c=a,l=e[++o];r=I_(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function gn(n,e=0){let t=Ye();if(t===null)return ie(n,e);let r=qn();return KL(r,t,tr(n),e)}function KF(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}i7(n,e,t,a,s,c,l)}s!==null&&r!==null&&n7(t,r,s)}function n7(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}function r7(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function i7(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let p=0;p<a;p++){let m=r[p];!c&&Os(m)&&(c=!0,r7(n,t,p)),JG(HL(t,e),n,m.type)}u7(t,n.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let l=!1,u=!1,f=wF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(t.mergedAttrs=fd(t.mergedAttrs,m.hostAttrs),o7(n,t,e,f,m),l7(f,m,i),o!==null&&o.has(m)){let[D,S]=o.get(m);t.directiveToIndex.set(m.type,[f,D+t.directiveStart,S+t.directiveStart])}else(s===null||!s.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let I=m.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),f++}s7(n,t,s)}function s7(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))IL(0,e,i,r),IL(1,e,i,r),SL(e,r,!1);else{let s=t.get(i);TL(0,e,s,r),TL(1,e,s,r),SL(e,r,!0)}}}function IL(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),QF(e,s)}}function TL(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),QF(e,o)}}function QF(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function SL(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||sD(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function o7(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=sa(i.type,!0)),o=new yp(s,Os(i),gn,null);n.blueprint[r]=o,t[r]=o,a7(n,e,r,wF(n,t,i.hostVars,mi),i)}function a7(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;c7(o)!=a&&o.push(a),o.push(t,r,s)}}function c7(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function l7(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Os(e)&&(t[""]=n)}}function u7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function bD(n,e,t,r,i,s,o,a){let c=e[me],l=c.consts,u=pa(l,o),f=Ed(c,n,t,r,u);return s&&KF(c,e,f,pa(l,a),i),f.mergedAttrs=fd(f.mergedAttrs,f.attrs),f.attrs!==null&&ov(f,f.attrs,!1),f.mergedAttrs!==null&&ov(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function ED(n,e){VL(n,e),MS(e)&&n.queries.elementEnd(e)}function d7(n,e,t,r,i,s){let o=e.consts,a=pa(o,i),c=Ed(e,n,t,r,a);if(c.mergedAttrs=fd(c.mergedAttrs,c.attrs),s!=null){let l=pa(o,s);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&ov(c,c.attrs,!1),c.mergedAttrs!==null&&ov(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function h7(n,e,t){return n[e]=t}function Id(n,e,t){if(t===mi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function f0(n,e,t){return function r(i){let s=fa(n)?Hr(n.index,e):e;vD(s,5);let o=e[Nn],a=DL(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=DL(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function DL(n,e,t,r){let i=Re(null);try{return ft(it.OutputStart,e,t),t(r)!==!1}catch(s){return MK(n,s),!1}finally{ft(it.OutputEnd,e,t),Re(i)}}function f7(n,e,t,r,i,s,o,a){let c=cd(n),l=!1,u=null;if(!r&&c&&(u=m7(e,t,s,n.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let f=ui(n,t),p=r?r(f):f;f8(t,p,s,a);let m=i.listen(p,s,a);if(!p7(s)){let I=r?D=>r($r(D[n.index])):n.index;YF(I,e,t,s,a,m,!1)}}return l}function p7(n){return n.startsWith("animation")||n.startsWith("transition")}function m7(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[od],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function YF(n,e,t,r,i,s,o){let a=e.firstCreatePass?BS(e):null,c=jS(t),l=c.length;c.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function AL(n,e,t,r,i,s){let o=e[t],a=e[me],l=a.data[t].outputs[r],f=o[l].subscribe(s);YF(n.index,a,e,i,s,f,!0)}var V0=Symbol("BINDING");var av=class extends Ap{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ks(e);return new cl(t,this.ngModule)}};function g7(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&yv.SignalBased)!==0};return i&&(s.transform=i),s})}function y7(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _7(n,e,t){let r=e instanceof wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new F0(t,r):t}function v7(n){let e=n.get(Ar,null);if(e===null)throw new H(407,!1);let t=n.get(GF,null),r=n.get(el,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function b7(n,e){let t=XF(n);return _F(e,t,t==="svg"?M1:t==="math"?k1:null)}function XF(n){return(n.selectors[0][0]||"div").toLowerCase()}var cl=class extends Ev{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=g7(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=y7(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=K8(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ft(it.DynamicComponentStart);let a=Re(null);try{let c=this.componentDef,l=E7(r,c,o,s),u=_7(c,i||this.ngModule,e),f=v7(u),p=f.rendererFactory.createRenderer(null,c),m=r?bK(p,r,c.encapsulation,u):b7(c,p),I=o?.some(CL)||s?.some(N=>typeof N!="function"&&N.bindings.some(CL)),D=aD(null,l,null,512|EF(c),null,null,f,p,u,null,iF(m,u,!0));D[Ft]=m,B_(D);let S=null;try{let N=bD(Ft,D,2,"#host",()=>l.directiveRegistry,!0,0);bF(p,m,N),pd(m,D),vv(l,D,N),X0(l,N,D),ED(l,N),t!==void 0&&I7(N,this.ngContentSelectors,t),S=Hr(N.index,D),D[Nn]=S[Nn],_D(l,D,null)}catch(N){throw S!==null&&b0(S),b0(D),N}finally{ft(it.DynamicComponentEnd),z_()}return new cv(this.componentType,D,!!I)}finally{Re(a)}}};function E7(n,e,t,r){let i=n?["ng-version","21.0.1"]:Q8(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[V0].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[V0].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(s??=[]).push(p)),p.update&&(p.targetIdx=m,(o??=[]).push(p))}}let c=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=CS(f);c.push(p)}return oD(0,null,w7(s,o),1,a,c,null,null,null,[i],null)}function w7(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function CL(n){let e=n[V0].kind;return e==="input"||e==="twoWay"}var cv=class extends WF{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=N_(t[me],Ft),this.location=_d(this._tNode,t),this.instance=Hr(this._tNode.index,t)[Nn],this.hostView=this.changeDetectorRef=new va(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=yD(r,i[me],i,e,t);this.previousInputValues.set(e,t);let o=Hr(r.index,i);vD(o,1)}get injector(){return new ol(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function I7(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ea=(()=>{class n{static __NG_ELEMENT_ID__=T7}return n})();function T7(){let n=qn();return ZF(n,Ye())}var S7=Ea,JF=class extends S7{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return _d(this._hostTNode,this._hostLView)}get injector(){return new ol(this._hostTNode,this._hostLView)}get parentInjector(){let e=K0(this._hostTNode,this._hostLView);if(BL(e)){let t=tv(e,this._hostLView),r=ev(e),i=t[me].data[r+8];return new ol(i,t)}else return new ol(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RL(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=O0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,N0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!VG(e),l;if(c)l=t;else{let S=t||{};l=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef,o=S.directives,a=S.bindings}let u=c?e:new cl(ks(e)),f=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(c?f:this.parentInjector).get(wt,null);N&&(s=N)}let p=ks(u.componentType??{}),m=O0(this._lContainer,p?.id??null),I=m?.firstChild??null,D=u.create(f,i,I,s,o,a);return this.insertImpl(D.hostView,l,N0(this._hostTNode,m)),D}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(L1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pn],l=new JF(c,c[zn],c[pn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return HF(o,i,s,r),e.attachToViewContainerRef(),TS(p0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RL(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=k0(this._lContainer,t);r&&(sp(p0(this._lContainer),t),AF(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=k0(this._lContainer,t);return r&&sp(p0(this._lContainer),t)!=null?new va(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RL(n){return n[up]}function p0(n){return n[up]||(n[up]=[])}function ZF(n,e){let t,r=e[n.index];return li(r)?t=r:(t=$F(r,e,null,n),e[n.index]=t,cD(e,t)),A7(t,e,n,r),new JF(t,n,e)}function D7(n,e){let t=n[At],r=t.createComment(""),i=ui(e,n),s=t.parentNode(i);return sv(t,s,r,t.nextSibling(i),!1),r}var A7=x7,C7=()=>!1;function R7(n,e,t){return C7(n,e,t)}function x7(n,e,t,r){if(n[ha])return;let i;t.type&8?i=$r(r):i=D7(e,t),n[ha]=i}var U0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},j0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)wD(e,t).matches!==null&&this.queries[t].setDirty()}},B0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=V7(e):this.predicate=e}},z0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,P7(t,s)),this.matchTNodeWithReadOption(e,t,X_(t,e,s,!1,!1))}else r===al?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,X_(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===qt||i===Ea||i===al&&t.type&4)this.addMatch(t.index,-2);else{let s=X_(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function P7(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function N7(n,e){return n.type&11?_d(n,e):n.type&4?bv(n,e):null}function M7(n,e,t,r){return t===-1?N7(e,n):t===-2?k7(n,e,r):rv(n,n[me],t,e)}function k7(n,e,t){if(t===qt)return _d(e,n);if(t===al)return bv(e,n);if(t===Ea)return ZF(e,n)}function eV(n,e,t,r){let i=e[Hi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(M7(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function H0(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=eV(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let f=$n;f<u.length;f++){let p=u[f];p[da]===p[pn]&&H0(p[me],p,l,r)}if(u[il]!==null){let f=u[il];for(let p=0;p<f.length;p++){let m=f[p];H0(m[me],m,l,r)}}}}}return r}function O7(n,e){return n[Hi].queries[e].queryList}function L7(n,e,t){let r=new iv((t&4)===4);return U1(n,e,r,r.destroy),(e[Hi]??=new j0).queries.push(new U0(r))-1}function F7(n,e,t,r){let i=Hn();if(i.firstCreatePass){let s=qn();U7(i,new B0(e,t,r),s.index),j7(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return L7(i,Ye(),t)}function V7(n){return n.split(",").map(e=>e.trim())}function U7(n,e,t){n.queries===null&&(n.queries=new z0),n.queries.track(new $0(e,t))}function j7(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function wD(n,e){return n.queries.getByIndex(e)}function B7(n,e){let t=n[me],r=wD(t,e);return r.crossesNgTemplate?H0(t,n,e,[]):eV(t,n,r,e)}var ll=class{},wv=class{};var lv=class extends ll{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new av(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=AS(e);this._bootstrapComponents=mF(s.bootstrap),this._r3Injector=n0(e,t,[{provide:ll,useValue:this},{provide:Ap,useValue:this.componentFactoryResolver},...r],Ms(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},uv=class extends wv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new lv(this.moduleType,e,[])}};var vp=class extends ll{injector;componentFactoryResolver=new av(this);instance=null;constructor(e){super();let t=new Zc([...e.providers,{provide:ll,useValue:this},{provide:Ap,useValue:this.componentFactoryResolver}],e.parent||id(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cp(n,e,t=null){return new vp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var z7=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=RS(!1,t.type),i=r.length>0?Cp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ie(wt))})}return n})();function qe(n){return yd(()=>{let e=tV(n),t=Fe($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Q0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(z7).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fi.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Sp("NgStandalone"),nV(t);let r=n.dependencies;return t.directiveDefs=xL(r,$7),t.pipeDefs=xL(r,S1),t.id=W7(t),t})}function $7(n){return ks(n)||CS(n)}function Pt(n){return yd(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function H7(n,e){if(n==null)return ca;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=yv.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function q7(n){if(n==null)return ca;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Vt(n){return yd(()=>{let e=tV(n);return nV(e),e})}function ID(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function tV(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ca,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:H7(n.inputs,e),outputs:q7(n.outputs),debugInfo:null}}function nV(n){n.features?.forEach(e=>e(n))}function xL(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function W7(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function G7(n){return Object.getPrototypeOf(n.prototype).constructor}function Td(n){let e=G7(n.type),t=!0,r=[n];for(;e;){let i;if(Os(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=m0(n.inputs),o.declaredInputs=m0(n.declaredInputs),o.outputs=m0(n.outputs);let a=i.hostBindings;a&&J7(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Y7(n,c),l&&X7(n,l),K7(n,i),m1(n.outputs,i.outputs),Os(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Td&&(t=!1)}}e=Object.getPrototypeOf(e)}Q7(r)}function K7(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Q7(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fd(i.hostAttrs,t=fd(t,i.hostAttrs))}}function m0(n){return n===ca?{}:n===Bn?[]:n}function Y7(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function X7(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function J7(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function rV(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=fd(n.mergedAttrs,n.attrs);let u=n.tView=oD(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ud(n,!1);let c=tQ(t,e,n,r);$_()&&hD(t,e,c,n),pd(c,e);let l=$F(c,e,c,n);e[r+Ft]=l,cD(e,l),R7(l,n,e)}function Z7(n,e,t,r,i,s,o,a,c,l,u){let f=t+Ft,p;return e.firstCreatePass?(p=Ed(e,f,4,o||null,a||null),O_()&&KF(e,n,p,pa(e.consts,l),pD),VL(e,p)):p=e.data[f],rV(p,n,e,t,r,i,s,c),cd(p)&&vv(e,n,p),l!=null&&Dp(n,p,u),p}function eQ(n,e,t,r,i,s,o,a,c,l,u){let f=t+Ft,p;if(e.firstCreatePass){if(p=Ed(e,f,4,o||null,a||null),l!=null){let m=pa(e.consts,l);p.localNames=[];for(let I=0;I<m.length;I+=2)p.localNames.push(m[I],-1)}}else p=e.data[f];return rV(p,n,e,t,r,i,s,c),l!=null&&Dp(n,p,u),p}function zs(n,e,t,r,i,s,o,a){let c=Ye(),l=Hn(),u=pa(l.consts,s);return Z7(c,l,n,e,t,r,i,u,void 0,o,a),zs}var tQ=nQ;function nQ(n,e,t,r){return fp(!0),e[At].createComment("")}var Iv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var TD=new J("");function hl(n){return!!n&&typeof n.then=="function"}function Tv(n){return!!n&&typeof n.subscribe=="function"}var SD=new J("");function Sv(n){return mn([{provide:SD,multi:!0,useValue:n}])}var DD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(SD,{optional:!0})??[];injector=O(_t);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Lt(this.injector,i);if(hl(s))t.push(s);else if(Tv(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dv=new J("");function iV(){MT(()=>{let n="";throw new H(600,n)})}function sV(n){return n.isBoundToModule}var rQ=10;var qr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(rr);afterRenderManager=O(TF);zonelessEnabled=O(pp);rootEffectScheduler=O(l0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new mt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(Fs);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(t=>!t))}constructor(){O(dl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=_t.NULL){return this._injector.get(Pe).run(()=>{ft(it.BootstrapComponentStart);let o=t instanceof Ev;if(!this._injector.get(DD).done){let I="";throw new H(405,I)}let c;o?c=t:c=this._injector.get(Ap).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=sV(c)?void 0:this._injector.get(ll),u=r||c.selector,f=c.create(i,[],u,l),p=f.location.nativeElement,m=f.injector.get(TD,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),gp(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),ft(it.BootstrapComponentEnd,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ft(it.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(uD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ft(it.ChangeDetectionEnd),new H(101,!1);let t=Re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Re(t),this.afterTick.next(),ft(it.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ar,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<rQ;){ft(it.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ft(it.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!dp(i))continue;let s=r&&!this.zonelessEnabled?0:1;UF(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>dp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Dv,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $s(n,e,t,r){let i=Ye(),s=V_();if(Id(i,s,e)){let o=Hn(),a=t0();xK(a,i,n,e,t,r)}return $s}var QSe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ki(n,e,t){let r=Ye(),i=V_();if(Id(r,i,e)){let s=Hn(),o=t0();TK(o,r,n,e,r[At],t)}return Ki}function q0(n,e,t,r,i){yD(e,n,t,i?"class":"style",r)}function oe(n,e,t,r){let i=Ye(),s=i[me],o=n+Ft,a=s.firstCreatePass?bD(o,i,2,e,pD,O_(),t,r):s.data[o];if(mD(a,i,n,e,oV),cd(a)){let c=i[me];vv(c,i,a),X0(c,a,i)}return r!=null&&Dp(i,a),oe}function ce(){let n=Hn(),e=qn(),t=gD(e);return n.firstCreatePass&&ED(n,t),HS(t)&&qS(),zS(),t.classesWithoutHost!=null&&HG(t)&&q0(n,t,Ye(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&qG(t)&&q0(n,t,Ye(),t.stylesWithoutHost,!1),ce}function Wn(n,e,t,r){return oe(n,e,t,r),ce(),Wn}function Rr(n,e,t,r){let i=Ye(),s=i[me],o=n+Ft,a=s.firstCreatePass?d7(o,s,2,e,t,r):s.data[o];return mD(a,i,n,e,oV),r!=null&&Dp(i,a),Rr}function xr(){let n=qn(),e=gD(n);return HS(e)&&qS(),zS(),xr}function wa(n,e,t,r){return Rr(n,e,t,r),xr(),wa}var oV=(n,e,t,r,i)=>(fp(!0),_F(e[At],r,eL()));function Av(n,e,t){let r=Ye(),i=r[me],s=n+Ft,o=i.firstCreatePass?bD(s,r,8,"ng-container",pD,O_(),e,t):i.data[s];if(mD(o,r,n,"ng-container",iQ),cd(o)){let a=r[me];vv(a,r,o),X0(a,o,r)}return t!=null&&Dp(r,o),Av}function Cv(){let n=Hn(),e=qn(),t=gD(e);return n.firstCreatePass&&ED(n,t),Cv}var iQ=(n,e,t,r,i)=>(fp(!0),J8(e[At],""));function AD(){return Ye()}var Rp="en-US";var sQ=Rp;function aV(n){typeof n=="string"&&(sQ=n.toLowerCase().replace(/_/g,"-"))}function Qi(n,e,t){let r=Ye(),i=Hn(),s=qn();return oQ(i,r,r[At],s,n,e,t),Qi}function oQ(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=f0(r,e,s),f7(r,n,e,o,t,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],m=u[f+1];c??=f0(r,e,s),AL(r,e,p,m,i,c)}if(l&&l.length)for(let f of l)c??=f0(r,e,s),AL(r,e,f,i,i,c)}}function xp(n=1){return Z1(n)}function aQ(n,e){let t=null,r=$8(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?yF(n,s,!0):W8(r,s))return i}return t}function Wr(n){let e=Ye()[nr][zn];if(!e.projection){let t=n?n.length:1,r=e.projection=I1(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?aQ(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Sn(n,e=0,t,r,i,s){let o=Ye(),a=Hn(),c=r?n+1:null;c!==null&&eQ(o,a,c,r,i,s,null,t);let l=Ed(a,Ft+n,16,null,t||null);l.projection===null&&(l.projection=e),KS();let f=!o[sd]||$S();o[nr][zn].projection[l.projection]===null&&c!==null?cQ(o,a,c):f&&!mv(l)&&yK(a,o,l)}function cQ(n,e,t){let r=Ft+t,i=e.data[r],s=n[r],o=O0(s,i.tView.ssrId),a=MF(n,i,void 0,{dehydratedView:o});HF(s,a,0,N0(i,o))}function Rv(n,e,t,r){F7(n,e,t,r)}function xv(n){let e=Ye(),t=Hn(),r=JS();j_(r+1);let i=wD(t,r);if(n.dirty&&O1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=B7(e,r);n.reset(s,s8),n.notifyOnChanges()}return!0}return!1}function Pv(){return O7(Ye(),JS())}function CD(n){let e=$1();return OS(e,Ft+n)}function K_(n,e){return n<<17|e<<2}function ul(n){return n>>17&32767}function lQ(n){return(n&2)==2}function uQ(n,e){return n&131071|e<<17}function W0(n){return n|2}function gd(n){return(n&131068)>>2}function g0(n,e){return n&-131069|e<<2}function dQ(n){return(n&1)===1}function G0(n){return n|1}function hQ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ul(o),c=gd(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let f=t;u=f[1],(u===null||rd(f,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let p=ul(n[a+1]);n[r+1]=K_(p,a),p!==0&&(n[p+1]=g0(n[p+1],r)),n[a+1]=uQ(n[a+1],r)}else n[r+1]=K_(a,0),a!==0&&(n[a+1]=g0(n[a+1],r)),a=r;else n[r+1]=K_(c,0),a===0?a=r:n[c+1]=g0(n[c+1],r),c=r;l&&(n[r+1]=W0(n[r+1])),PL(n,u,r,!0),PL(n,u,r,!1),fQ(e,u,n,r,s),o=K_(a,c),s?e.classBindings=o:e.styleBindings=o}function fQ(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&rd(s,e)>=0&&(t[r+1]=G0(t[r+1]))}function PL(n,e,t,r){let i=n[t+1],s=e===null,o=r?ul(i):gd(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];pQ(c,e)&&(a=!0,n[o+1]=r?G0(l):W0(l)),o=r?ul(l):gd(l)}a&&(n[t+1]=r?W0(i):G0(i))}function pQ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?rd(n,e)>=0:!1}var hi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mQ(n){return n.substring(hi.key,hi.keyEnd)}function gQ(n){return yQ(n),cV(n,lV(n,0,hi.textEnd))}function cV(n,e){let t=hi.textEnd;return t===e?-1:(e=hi.keyEnd=_Q(n,hi.key=e,t),lV(n,e,t))}function yQ(n){hi.key=0,hi.keyEnd=0,hi.value=0,hi.valueEnd=0,hi.textEnd=n.length}function lV(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function _Q(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Nv(n,e,t){return uV(n,e,t,!1),Nv}function Pr(n,e){return uV(n,e,null,!0),Pr}function fl(n){bQ(DQ,vQ,n,!0)}function vQ(n,e){for(let t=gQ(e);t>=0;t=cV(e,t))C_(n,mQ(e),!0)}function uV(n,e,t,r){let i=Ye(),s=Hn(),o=XS(2);if(s.firstUpdatePass&&hV(s,n,o,r),e!==mi&&Id(i,o,e)){let a=s.data[ma()];fV(s,a,i,i[At],n,i[o+1]=CQ(e,t),r,o)}}function bQ(n,e,t,r){let i=Hn(),s=XS(2);i.firstUpdatePass&&hV(i,null,s,r);let o=Ye();if(t!==mi&&Id(o,s,t)){let a=i.data[ma()];if(pV(a,r)&&!dV(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=I_(c,t||"")),q0(i,a,o,t,r)}else AQ(i,a,o,o[At],o[s+1],o[s+1]=SQ(n,e,t),r,s)}}function dV(n,e){return e>=n.expandoStartIndex}function hV(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ma()],o=dV(n,t);pV(s,r)&&e===null&&!o&&(e=!1),e=EQ(i,s,e,r),hQ(i,s,e,t,o,r)}}function EQ(n,e,t,r){let i=Q1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=y0(null,n,e,t,r),t=bp(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=y0(i,n,e,t,r),s===null){let c=wQ(n,e,r);c!==void 0&&Array.isArray(c)&&(c=y0(null,n,e,c[1],r),c=bp(c,e.attrs,r),IQ(n,e,r,c))}else s=TQ(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function wQ(n,e,t){let r=t?e.classBindings:e.styleBindings;if(gd(r)!==0)return n[ul(r)]}function IQ(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ul(i)]=r}function TQ(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=bp(r,o,t)}return bp(r,e.attrs,t)}function y0(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=bp(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function bp(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),C_(n,o,t?!0:e[++s]))}return n===void 0?null:n}function SQ(n,e,t){if(t==null||t==="")return Bn;let r=[],i=pi(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function DQ(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&C_(n,r,t)}function AQ(n,e,t,r,i,s,o,a){i===mi&&(i=Bn);let c=0,l=0,u=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;u!==null||f!==null;){let p=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,I=null,D;u===f?(c+=2,l+=2,p!==m&&(I=f,D=m)):f===null||u!==null&&u<f?(c+=2,I=u):(l+=2,I=f,D=m),I!==null&&fV(n,e,t,r,I,D,o,a),u=c<i.length?i[c]:null,f=l<s.length?s[l]:null}}function fV(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=dQ(l)?NL(c,e,t,i,gd(l),o):void 0;if(!dv(u)){dv(s)||lQ(l)&&(s=NL(c,null,t,i,a,o));let f=kS(ma(),t);vK(r,o,f,i,s)}}function NL(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,p=t[i+1];p===mi&&(p=f?Bn:void 0);let m=f?R_(p,r):u===r?p:void 0;if(l&&!dv(m)&&(m=R_(c,r)),dv(m)&&(a=m,o))return a;let I=n[i+1];i=o?ul(I):gd(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=R_(c,r))}return a}function dv(n){return n!==void 0}function CQ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ms(pi(n)))),n}function pV(n,e){return(n.flags&(e?8:16))!==0}function le(n,e=""){let t=Ye(),r=Hn(),i=n+Ft,s=r.firstCreatePass?Ed(r,i,1,e,null):r.data[i],o=RQ(r,t,s,e,n);t[i]=o,$_()&&hD(r,t,o,s),ud(s,!1)}var RQ=(n,e,t,r,i)=>(fp(!0),Y8(e[At],r));function xQ(n,e,t,r=""){return Id(n,V_(),t)?e+ip(t)+r:mi}function pl(n){return ml("",n),pl}function ml(n,e,t){let r=Ye(),i=xQ(r,n,e,t);return i!==mi&&PQ(r,ma(),i),ml}function PQ(n,e,t){let r=kS(e,n);X8(n[At],r,t)}function NQ(n,e){let t=n[e];return t===mi?void 0:t}function MQ(n,e,t,r,i,s){let o=e+t;return Id(n,o,i)?h7(n,o+1,s?r.call(s,i):r(i)):NQ(n,o+1)}function gl(n,e){let t=Hn(),r,i=n+Ft;t.firstCreatePass?(r=kQ(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=sa(r.type,!0)),o,a=jn(gn);try{let c=nv(!1),l=s();return nv(c),LS(t,Ye(),i,l),l}finally{jn(a)}}function kQ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function yl(n,e,t){let r=n+Ft,i=Ye(),s=OS(i,r);return OQ(i,r)?MQ(i,H1(),e,s.transform,t,s):s.transform(t)}function OQ(n,e){return n[me].data[e].pure}function RD(n,e){return bv(n,e)}var hv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xD=(()=>{class n{compileModuleSync(t){return new uv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=AS(t),s=mF(i.declarations).reduce((o,a)=>{let c=ks(a);return c&&o.push(new cl(c)),o},[]);return new hv(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mV=(()=>{class n{applicationErrorHandler=O(rr);appRef=O(qr);taskService=O(Fs);ngZone=O(Pe);zonelessEnabled=O(pp);tracing=O(dl,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(tp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(c0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?i0:r0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(tp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,i0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gV(){return[{provide:el,useExisting:mV},{provide:Pe,useClass:np},{provide:pp,useValue:!0}]}function LQ(){return typeof $localize<"u"&&$localize.locale||Rp}var Mv=new J("",{factory:()=>O(Mv,{optional:!0,skipSelf:!0})||LQ()});var vV=Symbol("InputSignalNode#UNSET"),JQ=Fe($({},$y),{transformFn:void 0,applyValueToInputSignal(n,e){Kf(n,e)}});function bV(n,e){let t=Object.create(JQ);t.value=n,t.transformFn=e?.transform;function r(){if(jy(t),t.value===vV){let i=null;throw new H(-950,i)}return t.value}return r[Br]=t,r}var Sd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>wp(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function yV(n,e){return bV(n,e)}function ZQ(n){return bV(vV,n)}var EV=(yV.required=ZQ,yV);var PD=new J(""),eY=new J("");function Pp(n){return!n.moduleRef}function tY(n){let e=Pp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pe);return t.run(()=>{Pp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(rr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pp(n)){let s=()=>e.destroy(),o=n.platformInjector.get(PD);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(PD);o.add(s),n.moduleRef.onDestroy(()=>{gp(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return rY(r,t,()=>{let s=e.get(Fs),o=s.add(),a=e.get(DD);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Mv,Rp);if(aV(c||Rp),!e.get(eY,!0))return Pp(n)?e.get(qr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pp(n)){let u=e.get(qr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return nY?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var nY;function rY(n,e,t){try{let r=t();return hl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kv=null;function iY(n=[],e){return _t.create({name:e,providers:[{provide:op,useValue:"platform"},{provide:PD,useValue:new Set([()=>kv=null])},...n]})}function sY(n=[]){if(kv)return kv;let e=iY(n);return kv=e,iV(),oY(e),e}function oY(n){let e=n.get(pv,null);Lt(n,()=>{e?.forEach(t=>t())})}function Np(){return!1}var Mp=(()=>{class n{static __NG_ELEMENT_ID__=aY}return n})();function aY(n){return cY(qn(),Ye(),(n&16)===16)}function cY(n,e,t){if(fa(n)&&!t){let r=Hr(n.index,e);return new va(r,r)}else if(n.type&175){let r=e[nr];return new va(r,e)}return null}function wV(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ft(it.BootstrapApplicationStart);try{let s=i?.injector??sY(r),o=[gV(),iL,...t||[]],a=new vp({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return tY({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ft(it.BootstrapApplicationEnd)}}function gi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function IV(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function TV(n,e){let t=ks(n),r=e.elementInjector||id();return new cl(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var AV=null;function Hs(){return AV}function ND(n){AV??=n}var kp=class{},MD=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(CV),providedIn:"platform"})}return n})();var CV=(()=>{class n extends MD{_location;_history;_doc=O(Xe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hs().getBaseHref(this._doc)}onPopState(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function RV(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function SV(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ta(n){return n&&n[0]!=="?"?`?${n}`:n}var Dd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(PV),providedIn:"root"})}return n})(),xV=new J(""),PV=(()=>{class n extends Dd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return RV(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ta(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ta(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ta(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(MD),ie(xV,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ad=(()=>{class n{_subject=new mt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=dY(SV(DV(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ta(r))}normalize(t){return n.stripTrailingSlash(uY(this._basePath,DV(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ta(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ta(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ta;static joinWithSlash=RV;static stripTrailingSlash=SV;static \u0275fac=function(r){return new(r||n)(ie(Dd))};static \u0275prov=Q({token:n,factory:()=>lY(),providedIn:"root"})}return n})();function lY(){return new Ad(ie(Dd))}function uY(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function DV(n){return n.replace(/\/index.html$/,"")}function dY(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var _l=(()=>{class n{_viewContainer;_context=new Ov;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){NV(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){NV(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(gn(Ea),gn(al))};static \u0275dir=Vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ov=class{$implicit=null;ngIf=null};function NV(n,e){if(n&&!n.createEmbeddedView)throw new H(2020,!1)}function hY(n,e){return new H(2100,!1)}var kD=class{createSubscription(e,t,r){return ir(()=>e.subscribe({next:t,error:r}))}dispose(e){ir(()=>e.unsubscribe())}},OD=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},fY=new OD,pY=new kD,vl=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=O(rr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(hl(t))return fY;if(Tv(t))return pY;throw hY(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(gn(Mp,16))};static \u0275pipe=ID({name:"async",type:n,pure:!1})}return n})();var Sa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({})}return n})();function Lv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var bl=class{};var LD="browser";function MV(n){return n===LD}var Op=class{_doc;constructor(e){this._doc=e}manager},Vv=(()=>{class n extends Op{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ie(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Bv=new J(""),jD=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Vv));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Vv);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ie(Bv),ie(Pe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),FD="ng-app-id";function kV(n){for(let e of n)e.remove()}function OV(n,e){let t=e.createElement("style");return t.textContent=n,t}function gY(n,e,t,r){let i=n.head?.querySelectorAll(`style[${FD}="${e}"],link[${FD}="${e}"]`);if(i)for(let s of i)s.removeAttribute(FD),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function UD(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var BD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,gY(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,OV);r?.forEach(i=>this.addUsage(i,this.external,UD))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(kV(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])kV(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,OV(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,UD(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ie(Xe),ie(fv),ie(bd,8),ie(Us))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),VD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zD=/%COMP%/g;var FV="%COMP%",yY=`_nghost-${FV}`,_Y=`_ngcontent-${FV}`,vY=!0,bY=new J("",{factory:()=>vY});function EY(n){return _Y.replace(zD,n)}function wY(n){return yY.replace(zD,n)}function VV(n,e){return e.map(t=>t.replace(zD,n))}var Vp=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Lp(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof jv?i.applyToHost(t):i instanceof Fp&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case fi.Emulated:s=new jv(c,l,r,this.appId,u,o,a,f,p);break;case fi.ShadowDom:return new Uv(c,t,r,o,a,this.nonce,f,p,l);case fi.ExperimentalIsolatedShadowDom:return new Uv(c,t,r,o,a,this.nonce,f,p);default:s=new Fp(c,l,r,u,o,a,f,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ie(jD),ie(BD),ie(fv),ie(bY),ie(Xe),ie(Pe),ie(bd),ie(dl,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Lp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(VD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LV(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LV(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=VD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=VD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gi.DashCase|Gi.Important)?e.style.setProperty(t,r,i&Gi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hs().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function LV(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Uv=class extends Lp{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=VV(r.id,u);for(let p of u){let m=document.createElement("style");o&&m.setAttribute("nonce",o),m.textContent=p,this.shadowRoot.appendChild(m)}let f=r.getExternalStyles?.();if(f)for(let p of f){let m=UD(p,i);o&&m.setAttribute("nonce",o),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Fp=class extends Lp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?VV(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&md.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jv=class extends Fp{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,l,u),this.contentAttr=EY(u),this.hostAttr=wY(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var zv=class n extends kp{supportsDOMEvents=!0;static makeCurrent(){ND(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IY();return t==null?null:TY(t)}resetBaseElement(){Up=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lv(document.cookie,e)}},Up=null;function IY(){return Up=Up||document.head.querySelector("base"),Up?Up.getAttribute("href"):null}function TY(n){return new URL(n,document.baseURI).pathname}var SY=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),UV=["alt","control","meta","shift"],DY={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jV=(()=>{class n extends Op{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hs().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),UV.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=DY[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),UV.forEach(o=>{if(o!==i){let a=AY[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ie(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function $D(n,e,t){let r=$({rootComponent:n,platformRef:t?.platformRef},CY(e));return wV(r)}function CY(n){return{appProviders:[...MY,...n?.providers??[]],platformProviders:NY}}function RY(){zv.makeCurrent()}function xY(){return new Sr}function PY(){return Y0(document),document}var NY=[{provide:Us,useValue:LD},{provide:pv,useValue:RY,multi:!0},{provide:Xe,useFactory:PY}];var MY=[{provide:op,useValue:"root"},{provide:Sr,useFactory:xY},{provide:Bv,useClass:Vv,multi:!0},{provide:Bv,useClass:jV,multi:!0},Vp,BD,jD,{provide:Ar,useExisting:Vp},{provide:bl,useClass:SY},[]];var Da=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var qD=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},WD=class{encodeKey(e){return BV(e)}encodeValue(e){return BV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function kY(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var OY=/%(\d[a-f0-9])/gi,LY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BV(n){return encodeURIComponent(n).replace(OY,(e,t)=>LY[t]??e)}function $v(n){return`${n}`}var qs=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new WD,e.fromString){if(e.fromObject)throw new H(2805,!1);this.map=kY(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map($v):[$v(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push($v(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf($v(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function FY(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function zV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $V(n){return typeof Blob<"u"&&n instanceof Blob}function HV(n){return typeof FormData<"u"&&n instanceof FormData}function VY(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var qV="Content-Type",WV="Accept",GV="text/plain",KV="application/json",UY=`${KV}, ${GV}, */*`,Cd=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(FY(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new H(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Da,this.context??=new qD,!this.params)this.params=new qs,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||zV(this.body)||$V(this.body)||HV(this.body)||VY(this.body)?this.body:this.body instanceof qs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||HV(this.body)?null:$V(this.body)?this.body.type||null:zV(this.body)?null:typeof this.body=="string"?GV:this.body instanceof qs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KV:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,f=e.referrer||this.referrer,p=e.integrity||this.integrity,m=e.referrerPolicy||this.referrerPolicy,I=e.transferCache??this.transferCache,D=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,N=e.withCredentials??this.withCredentials,M=e.reportProgress??this.reportProgress,F=e.headers||this.headers,j=e.params||this.params,z=e.context??this.context;return e.setHeaders!==void 0&&(F=Object.keys(e.setHeaders).reduce((B,T)=>B.set(T,e.setHeaders[T]),F)),e.setParams&&(j=Object.keys(e.setParams).reduce((B,T)=>B.set(T,e.setParams[T]),j)),new n(t,r,S,{params:j,headers:F,context:z,reportProgress:M,responseType:i,withCredentials:N,transferCache:I,keepalive:s,cache:a,priority:o,timeout:D,mode:c,redirect:l,credentials:u,referrer:f,integrity:p,referrerPolicy:m})}},El=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(El||{}),jp=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new Da,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},GD=class n extends jp{constructor(e={}){super(e)}type=El.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Bp=class n extends jp{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=El.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Rd=class extends jp{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},jY=200,BY=204;var zY=/^\)\]\}',?\n/;var $Y=(()=>{class n{xhrFactory;tracingService=O(dl,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new H(-2800,!1);let r=this.xhrFactory;return de(null).pipe(Ht(()=>new ue(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((S,N)=>o.setRequestHeader(S,N.join(","))),t.headers.has(WV)||o.setRequestHeader(WV,UY),!t.headers.has(qV)){let S=t.detectContentTypeHeader();S!==null&&o.setRequestHeader(qV,S)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let S=t.responseType.toLowerCase();o.responseType=S!=="json"?S:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let S=o.statusText||"OK",N=new Da(o.getAllResponseHeaders()),M=o.responseURL||t.url;return c=new GD({headers:N,status:o.status,statusText:S,url:M}),c},u=this.maybePropagateTrace(()=>{let{headers:S,status:N,statusText:M,url:F}=l(),j=null;N!==BY&&(j=typeof o.response>"u"?o.responseText:o.response),N===0&&(N=j?jY:0);let z=N>=200&&N<300;if(t.responseType==="json"&&typeof j=="string"){let B=j;j=j.replace(zY,"");try{j=j!==""?JSON.parse(j):null}catch(T){j=B,z&&(z=!1,j={error:T,text:j})}}z?(s.next(new Bp({body:j,headers:S,status:N,statusText:M,url:F||void 0})),s.complete()):s.error(new Rd({error:j,headers:S,status:N,statusText:M,url:F||void 0}))}),f=this.maybePropagateTrace(S=>{let{url:N}=l(),M=new Rd({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:N||void 0});s.error(M)}),p=f;t.timeout&&(p=this.maybePropagateTrace(S=>{let{url:N}=l(),M=new Rd({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:N||void 0});s.error(M)}));let m=!1,I=this.maybePropagateTrace(S=>{m||(s.next(l()),m=!0);let N={type:El.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(N.total=S.total),t.responseType==="text"&&o.responseText&&(N.partialText=o.responseText),s.next(N)}),D=this.maybePropagateTrace(S=>{let N={type:El.UploadProgress,loaded:S.loaded};S.lengthComputable&&(N.total=S.total),s.next(N)});return o.addEventListener("load",u),o.addEventListener("error",f),o.addEventListener("timeout",p),o.addEventListener("abort",f),t.reportProgress&&(o.addEventListener("progress",I),a!==null&&o.upload&&o.upload.addEventListener("progress",D)),o.send(a),s.next({type:El.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",u),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",I),a!==null&&o.upload&&o.upload.removeEventListener("progress",D)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(ie(bl))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HY(n,e){return e(n)}function qY(n,e,t){return(r,i)=>Lt(t,()=>e(r,s=>n(s,i)))}var WY=new J("",{factory:()=>[]}),QV=new J(""),GY=new J("",{providedIn:"root",factory:()=>!0});var KY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ie($Y),i},providedIn:"root"})}return n})();var QY=(()=>{class n{backend;injector;chain=null;pendingTasks=O(_a);contributeToStability=O(GY);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(WY),...this.injector.get(QV,[])]));this.chain=r.reduceRight((i,s)=>qY(i,s,this.injector),HY)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Kc(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ie(KY),ie(wt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ie(QY),i},providedIn:"root"})}return n})();function HD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var KD=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Cd)s=t;else{let c;i.headers instanceof Da?c=i.headers:c=new Da(i.headers);let l;i.params&&(i.params instanceof qs?l=i.params:l=new qs({fromObject:i.params})),s=new Cd(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let o=de(s).pipe(Zu(c=>this.handler.handle(c)));if(t instanceof Cd||i.observe==="events")return o;let a=o.pipe(fn(c=>c instanceof Bp));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new H(2806,!1);return c.body}));case"blob":return a.pipe(pe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new H(2807,!1);return c.body}));case"text":return a.pipe(pe(c=>{if(c.body!==null&&typeof c.body!="string")throw new H(2808,!1);return c.body}));case"json":default:return a.pipe(pe(c=>c.body))}case"response":return a;default:throw new H(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new qs().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,HD(i,r))}post(t,r,i={}){return this.request("POST",t,HD(i,r))}put(t,r,i={}){return this.request("PUT",t,HD(i,r))}static \u0275fac=function(r){return new(r||n)(ie(YY))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YV=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ie(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ie(JY),i},providedIn:"root"})}return n})(),JY=(()=>{class n extends QD{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Tn.NONE:return r;case Tn.HTML:return js(r,"HTML")?pi(r):rD(this._doc,String(r)).toString();case Tn.STYLE:return js(r,"Style")?pi(r):r;case Tn.SCRIPT:if(js(r,"Script"))return pi(r);throw new H(5200,!1);case Tn.URL:return js(r,"URL")?pi(r):Ip(String(r));case Tn.RESOURCE_URL:if(js(r,"ResourceURL"))return pi(r);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(t){return J0(t)}bypassSecurityTrustStyle(t){return Z0(t)}bypassSecurityTrustScript(t){return eD(t)}bypassSecurityTrustUrl(t){return tD(t)}bypassSecurityTrustResourceUrl(t){return nD(t)}static \u0275fac=function(r){return new(r||n)(ie(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ee="primary",em=Symbol("RouteTitle"),eA=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sl(n){return new eA(n)}function o2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qv(n){return new Promise((e,t)=>{n.pipe(Ps()).subscribe({next:r=>e(r),error:r=>t(r)})})}function eX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yi(n[t],e[t]))return!1;return!0}function Yi(n,e){let t=n?tA(n):void 0,r=e?tA(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!a2(n[i],e[i]))return!1;return!0}function tA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function a2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function c2(n){return n.length>0?n[n.length-1]:null}function Al(n){return u_(n)?n:hl(n)?$t(Promise.resolve(n)):de(n)}function l2(n){return u_(n)?Qv(n):Promise.resolve(n)}var tX={exact:d2,subset:h2},u2={exact:nX,subset:rX,ignored:()=>!0};function JV(n,e,t){return tX[t.paths](n.root,e.root,t.matrixParams)&&u2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function nX(n,e){return Yi(n,e)}function d2(n,e,t){if(!Il(n.segments,e.segments)||!Wv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!d2(n.children[r],e.children[r],t))return!1;return!0}function rX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>a2(n[t],e[t]))}function h2(n,e,t){return f2(n,e,e.segments,t)}function f2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Il(i,t)||e.hasChildren()||!Wv(i,t,r))}else if(n.segments.length===t.length){if(!Il(n.segments,t)||!Wv(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!h2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Il(n.segments,i)||!Wv(n.segments,i,r)||!n.children[Ee]?!1:f2(n.children[Ee],e,s,r)}}function Wv(n,e,t){return e.every((r,i)=>u2[t](n[i].parameters,r.parameters))}var _i=class{root;queryParams;fragment;_queryParamMap;constructor(e=new st([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Sl(this.queryParams),this._queryParamMap}toString(){return oX.serialize(this)}},st=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gv(this)}},Aa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sl(this.parameters),this._parameterMap}toString(){return m2(this)}};function iX(n,e){return Il(n,e)&&n.every((t,r)=>Yi(t.parameters,e[r].parameters))}function Il(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sX(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var tm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new Ca,providedIn:"root"})}return n})(),Ca=class{parse(e){let t=new rA(e);return new _i(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${zp(e.root,!0)}`,r=lX(e.queryParams),i=typeof e.fragment=="string"?`#${aX(e.fragment)}`:"";return`${t}${r}${i}`}},oX=new Ca;function Gv(n){return n.segments.map(e=>m2(e)).join("/")}function zp(n,e){if(!n.hasChildren())return Gv(n);if(e){let t=n.children[Ee]?zp(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ee&&r.push(`${i}:${zp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sX(n,(r,i)=>i===Ee?[zp(n.children[Ee],!1)]:[`${i}:${zp(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${Gv(n)}/${t[0]}`:`${Gv(n)}/(${t.join("//")})`}}function p2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hv(n){return p2(n).replace(/%3B/gi,";")}function aX(n){return encodeURI(n)}function nA(n){return p2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kv(n){return decodeURIComponent(n)}function ZV(n){return Kv(n.replace(/\+/g,"%20"))}function m2(n){return`${nA(n.path)}${cX(n.parameters)}`}function cX(n){return Object.entries(n).map(([e,t])=>`;${nA(e)}=${nA(t)}`).join("")}function lX(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hv(t)}=${Hv(i)}`).join("&"):`${Hv(t)}=${Hv(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uX=/^[^\/()?;#]+/;function YD(n){let e=n.match(uX);return e?e[0]:""}var dX=/^[^\/()?;=#]+/;function hX(n){let e=n.match(dX);return e?e[0]:""}var fX=/^[^=?&#]+/;function pX(n){let e=n.match(fX);return e?e[0]:""}var mX=/^[^&#]+/;function gX(n){let e=n.match(mX);return e?e[0]:""}var rA=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new st(e,t)),r}parseSegment(){let e=YD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Aa(Kv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hX(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=YD(this.remaining);i&&(r=i,this.capture(r))}e[Kv(t)]=Kv(r)}parseQueryParam(e){let t=pX(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=gX(this.remaining);o&&(r=o,this.capture(r))}let i=ZV(t),s=ZV(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=YD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ee);let o=this.parseChildren();t[s??Ee]=Object.keys(o).length===1&&o[Ee]?o[Ee]:new st([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function g2(n){return n.segments.length>0?new st([],{[Ee]:n}):n}function y2(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=y2(i);if(r===Ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new st(n.segments,e);return yX(t)}function yX(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new st(n.segments.concat(e.segments),e.children)}return n}function Ra(n){return n instanceof _i}function _2(n,e,t=null,r=null,i=new Ca){let s=v2(n);return b2(s,e,t,r,i)}function v2(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new st(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=g2(r);return e??i}function b2(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return XD(s,s,s,t,r,i);let o=_X(e);if(o.toRoot())return XD(s,s,new st([],{}),t,r,i);let a=vX(o,s,n),c=a.processChildren?Hp(a.segmentGroup,a.index,o.commands):w2(a.segmentGroup,a.index,o.commands);return XD(s,a.segmentGroup,c,t,r,i)}function Yv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gp(n){return typeof n=="object"&&n!=null&&n.outlets}function e2(n,e,t){n||="\u0275";let r=new _i;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function XD(n,e,t,r,i,s){let o={};for(let[l,u]of Object.entries(r??{}))o[l]=Array.isArray(u)?u.map(f=>e2(l,f,s)):e2(l,u,s);let a;n===e?a=t:a=E2(n,e,t);let c=g2(y2(a));return new _i(c,o,i)}function E2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=E2(s,e,t)}),new st(n.segments,r)}var Xv=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yv(r[0]))throw new H(4003,!1);let i=r.find(Gp);if(i&&i!==c2(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _X(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xv(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Xv(t,e,r)}var Pd=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vX(n,e,t){if(n.isAbsolute)return new Pd(e,!0,0);if(!t)return new Pd(e,!1,NaN);if(t.parent===null)return new Pd(t,!0,0);let r=Yv(n.commands[0])?0:1,i=t.segments.length-1+r;return bX(t,i,n.numberOfDoubleDots)}function bX(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Pd(r,!1,i-s)}function EX(n){return Gp(n[0])?n[0].outlets:{[Ee]:n}}function w2(n,e,t){if(n??=new st([],{}),n.segments.length===0&&n.hasChildren())return Hp(n,e,t);let r=wX(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new st(n.segments.slice(0,r.pathIndex),{});return s.children[Ee]=new st(n.segments.slice(r.pathIndex),n.children),Hp(s,0,i)}else return r.match&&i.length===0?new st(n.segments,{}):r.match&&!n.hasChildren()?iA(n,e,t):r.match?Hp(n,0,i):iA(n,e,t)}function Hp(n,e,t){if(t.length===0)return new st(n.segments,{});{let r=EX(t),i={};if(Object.keys(r).some(s=>s!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let s=Hp(n.children[Ee],e,t);return new st(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=w2(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new st(n.segments,i)}}function wX(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Gp(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!n2(c,l,o))return s;r+=2}else{if(!n2(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function iA(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Gp(s)){let c=IX(s.outlets);return new st(r,c)}if(i===0&&Yv(t[0])){let c=n.segments[e];r.push(new Aa(c.path,t2(t[0]))),i++;continue}let o=Gp(s)?s.outlets[Ee]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Yv(a)?(r.push(new Aa(o,t2(a))),i+=2):(r.push(new Aa(o,{})),i++)}return new st(r,{})}function IX(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=iA(new st([],{}),0,r))}),e}function t2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function n2(n,e,t){return n==t.path&&Yi(e,t.parameters)}var qp="imperative",yn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(yn||{}),Mr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Dl=class extends Mr{type=yn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ji=class extends Mr{urlAfterRedirects;type=yn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Gn||{}),Kp=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Kp||{}),Xi=class extends Mr{reason;code;type=yn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ws=class extends Mr{reason;code;type=yn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Md=class extends Mr{error;target;type=yn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qp=class extends Mr{urlAfterRedirects;state;type=yn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jv=class extends Mr{urlAfterRedirects;state;type=yn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zv=class extends Mr{urlAfterRedirects;state;shouldActivate;type=yn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eb=class extends Mr{urlAfterRedirects;state;type=yn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tb=class extends Mr{urlAfterRedirects;state;type=yn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nb=class{route;type=yn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rb=class{route;type=yn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ib=class{snapshot;type=yn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sb=class{snapshot;type=yn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ob=class{snapshot;type=yn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ab=class{snapshot;type=yn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yp=class{},kd=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TX(n){return!(n instanceof Yp)&&!(n instanceof kd)}function SX(n,e){return n.providers&&!n._injector&&(n._injector=Cp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yi(n){return n.outlet||Ee}function DX(n,e){let t=n.filter(r=>yi(r)===e);return t.push(...n.filter(r=>yi(r)!==e)),t}function Fd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var cb=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fd(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vd(this.rootInjector)}},Vd=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cb(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ie(wt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lb=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=sA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=sA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=oA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return oA(e,this._root).map(t=>t.value)}};function sA(n,e){if(n===e.value)return e;for(let t of e.children){let r=sA(n,t);if(r)return r}return null}function oA(n,e){if(n===e.value)return[e];for(let t of e.children){let r=oA(n,t);if(r.length)return r.unshift(e),r}return[]}var Nr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xd(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xp=class extends lb{snapshot;constructor(e,t){super(e),this.snapshot=t,hA(this,e)}toString(){return this.snapshot.toString()}};function I2(n){let e=AX(n),t=new Ot([new Aa("",{})]),r=new Ot({}),i=new Ot({}),s=new Ot({}),o=new Ot(""),a=new Gs(t,r,s,o,i,Ee,n,e.root);return a.snapshot=e.root,new Xp(new Nr(a,[]),e)}function AX(n){let e={},t={},r={},s=new Tl([],e,r,"",t,Ee,n,null,{});return new Jp("",new Nr(s,[]))}var Gs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(pe(l=>l[em]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Sl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Sl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ub(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&S2(i)&&(r.resolve[em]=i.title),r}var Tl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[em]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jp=class extends lb{url;constructor(e,t){super(t),this.url=e,hA(this,t)}toString(){return T2(this._root)}};function hA(n,e){e.value._routerState=n,e.children.forEach(t=>hA(n,t))}function T2(n){let e=n.children.length>0?` { ${n.children.map(T2).join(", ")} } `:"";return`${n.value}${e}`}function JD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Yi(e.params,t.params)||n.paramsSubject.next(t.params),eX(e.url,t.url)||n.urlSubject.next(t.url),Yi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function aA(n,e){let t=Yi(n.params,e.params)&&iX(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||aA(n.parent,e.parent))}function S2(n){return typeof n.title=="string"||n.title===null}var D2=new J(""),nm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new an;deactivateEvents=new an;attachEvents=new an;detachEvents=new an;routerOutletData=EV(void 0,{});parentContexts=O(Vd);location=O(Ea);changeDetector=O(Mp);inputBinder=O(pb,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cA(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ba]})}return n})(),cA=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Gs?this.route:e===Vd?this.childContexts:e===D2?this.outletData:this.parent.get(e,t)}},pb=new J("");var fA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Wn(0,"router-outlet")},dependencies:[nm],encapsulation:2})}return n})();function pA(n){let e=n.children&&n.children.map(pA),t=e?Fe($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=fA),t}function CX(n,e,t){let r=Zp(n,e._root,t?t._root:void 0);return new Xp(r,e)}function Zp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=RX(n,e,t);return new Nr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zp(n,a)),o}}let r=xX(e.value),i=e.children.map(s=>Zp(n,s));return new Nr(r,i)}}function RX(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zp(n,r,i);return Zp(n,r)})}function xX(n){return new Gs(new Ot(n.url),new Ot(n.params),new Ot(n.queryParams),new Ot(n.fragment),new Ot(n.data),n.outlet,n.component,n)}var Od=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},A2="ngNavigationCancelingError";function db(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=C2(!1,Gn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function C2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[A2]=!0,t.cancellationCode=e,t}function PX(n){return R2(n)&&Ra(n.url)}function R2(n){return!!n&&n[A2]}var NX=(n,e,t,r)=>pe(i=>(new lA(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),lA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),JD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xd(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ab(s.value.snapshot))}),e.children.length&&this.forwardEvent(new sb(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(JD(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),JD(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},hb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Nd=class{component;route;constructor(e,t){this.component=e,this.route=t}};function MX(n,e,t){let r=n._root,i=e?e._root:null;return $p(r,i,t,[r.value])}function kX(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ud(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gS(n)?n:e.get(n):r}function $p(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=xd(e);return n.children.forEach(o=>{OX(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wp(a,t.getContext(o),i)),i}function OX(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=LX(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new hb(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?$p(n,e,a?a.children:null,r,i):$p(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Nd(a.outlet.component,o))}else o&&Wp(e,a,i),i.canActivateChecks.push(new hb(r)),s.component?$p(n,null,a?a.children:null,r,i):$p(n,null,t,r,i);return i}function LX(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Il(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Il(n.url,e.url)||!Yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aA(n,e)||!Yi(n.queryParams,e.queryParams);case"paramsChange":default:return!aA(n,e)}}function Wp(n,e,t){let r=xd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Wp(o,e.children.getContext(s),t):Wp(o,null,t):Wp(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Nd(e.outlet.component,i)):t.canDeactivateChecks.push(new Nd(null,i)):t.canDeactivateChecks.push(new Nd(null,i))}function rm(n){return typeof n=="function"}function FX(n){return typeof n=="boolean"}function VX(n){return n&&rm(n.canLoad)}function UX(n){return n&&rm(n.canActivate)}function jX(n){return n&&rm(n.canActivateChild)}function BX(n){return n&&rm(n.canDeactivate)}function zX(n){return n&&rm(n.canMatch)}function x2(n){return n instanceof Wc||n?.name==="EmptyError"}var qv=Symbol("INITIAL_VALUE");function Ld(){return Ht(n=>WT(n.map(e=>e.pipe(sn(1),m_(qv)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===qv)return qv;if(t===!1||$X(t))return t}return!0}),fn(e=>e!==qv),sn(1)))}function $X(n){return Ra(n)||n instanceof Od}function P2(n){return n.aborted?de(void 0).pipe(sn(1)):new ue(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function N2(n){return Qc(P2(n))}function HX(n,e){return Un(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?de(Fe($({},t),{guardsResult:!0})):qX(o,r,i,n).pipe(Un(a=>a&&FX(a)?WX(r,s,n,e):de(a)),pe(a=>Fe($({},t),{guardsResult:a})))})}function qX(n,e,t,r){return $t(n).pipe(Un(i=>XX(i.component,i.route,t,e,r)),Ps(i=>i!==!0,!0))}function WX(n,e,t,r){return $t(e).pipe(Zu(i=>Ju(KX(i.route.parent,r),GX(i.route,r),YX(n,i.path,t),QX(n,i.route,t))),Ps(i=>i!==!0,!0))}function GX(n,e){return n!==null&&e&&e(new ob(n)),de(!0)}function KX(n,e){return n!==null&&e&&e(new ib(n)),de(!0)}function QX(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>Xf(()=>{let o=Fd(e)??t,a=Ud(s,o),c=UX(a)?a.canActivate(e,n):Lt(o,()=>a(e,n));return Al(c).pipe(Ps())}));return de(i).pipe(Ld())}function YX(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>kX(o)).filter(o=>o!==null).map(o=>Xf(()=>{let a=o.guards.map(c=>{let l=Fd(o.node)??t,u=Ud(c,l),f=jX(u)?u.canActivateChild(r,n):Lt(l,()=>u(r,n));return Al(f).pipe(Ps())});return de(a).pipe(Ld())}));return de(s).pipe(Ld())}function XX(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Fd(e)??i,l=Ud(a,c),u=BX(l)?l.canDeactivate(n,e,t,r):Lt(c,()=>l(n,e,t,r));return Al(u).pipe(Ps())});return de(o).pipe(Ld())}function JX(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return de(!0);let o=s.map(a=>{let c=Ud(a,n),l=VX(c)?c.canLoad(e,t):Lt(n,()=>c(e,t)),u=Al(l);return i?u.pipe(N2(i)):u});return de(o).pipe(Ld(),M2(r))}function M2(n){return Hc(on(e=>{if(typeof e!="boolean")throw db(n,e)}),pe(e=>e===!0))}function ZX(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Ud(a,n),l=zX(c)?c.canMatch(e,t):Lt(n,()=>c(e,t)),u=Al(l);return i?u.pipe(N2(i)):u});return de(o).pipe(Ld(),M2(r))}var wl=class k2 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,k2.prototype)}},uA=class O2 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,O2.prototype)}};function eJ(n){throw new H(4e3,!1)}function tJ(n){throw C2(!1,Gn.GuardRejected)}var nJ=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ee])throw eJ(`${e.redirectTo}`);i=i.children[Ee]}}async applyRedirectCommands(e,t,r,i,s){let o=await rJ(t,i,s);if(o instanceof _i)throw new uA(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new uA(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new _i(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new st(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function rJ(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:f}=e;return Qv(Al(Lt(t,()=>r({params:l,data:u,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:f}))))}var dA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iJ(n,e,t,r,i,s){let o=L2(n,e,t);return o.matched?(r=SX(e,r),ZX(r,e,t,i,s).pipe(pe(a=>a===!0?o:$({},dA)))):de(o)}function L2(n,e,t){if(e.path==="**")return sJ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},dA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||o2)(t,n,e);if(!i)return $({},dA);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function sJ(n){return{matched:!0,parameters:n.length>0?c2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function r2(n,e,t,r){return t.length>0&&cJ(n,t,r)?{segmentGroup:new st(e,aJ(r,new st(t,n.children))),slicedSegments:[]}:t.length===0&&lJ(n,t,r)?{segmentGroup:new st(n.segments,oJ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new st(n.segments,n.children),slicedSegments:t}}function oJ(n,e,t,r){let i={};for(let s of t)if(mb(n,e,s)&&!r[yi(s)]){let o=new st([],{});i[yi(s)]=o}return $($({},r),i)}function aJ(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&yi(r)!==Ee){let i=new st([],{});t[yi(r)]=i}return t}function cJ(n,e,t){return t.some(r=>mb(n,e,r)&&yi(r)!==Ee)}function lJ(n,e,t){return t.some(r=>mb(n,e,r))}function mb(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uJ(n,e,t){return e.length===0&&!n.children[t]}var dJ=class{};async function hJ(n,e,t,r,i,s,o="emptyOnly",a){return new pJ(n,e,t,r,i,o,s,a).recognize()}var fJ=31,pJ=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new nJ(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}async recognize(){let e=r2(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Nr(r,t),s=new Jp("",i),o=_2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Tl([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ee,t),rootSnapshot:t}}catch(r){if(r instanceof uA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wl?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Nr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=r.children[c],u=DX(t,c),f=await this.processSegmentGroup(e,u,l,c,i);o.push(...f)}let a=F2(o);return mJ(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(l){if(l instanceof wl||x2(l))continue;throw l}if(uJ(r,i,s))return new dJ;throw new wl(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(yi(r)!==o&&(o===Ee||!mb(i,s,r)))throw new wl(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new wl(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=L2(t,i,s);if(!c)throw new wl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fJ&&(this.allowRedirects=!1));let m=new Tl(s,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,i2(i),yi(i),i.component??i._loadedComponent??null,i,s2(i)),I=ub(m,a,this.paramsInheritanceStrategy);if(m.params=Object.freeze(I.params),m.data=Object.freeze(I.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let D=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f,m,e),S=await this.applyRedirects.lineralizeSegments(i,D);return this.processSegment(e,r,t,S.concat(p),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Qv(iJ(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new wl(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:u,consumedSegments:f,remainingSegments:p}=a,m=new Tl(f,u,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,i2(r),yi(r),r.component??r._loadedComponent??null,r,s2(r)),I=ub(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(I.params),m.data=Object.freeze(I.data);let{segmentGroup:D,slicedSegments:S}=r2(t,f,p,c);if(S.length===0&&D.hasChildren()){let F=await this.processChildren(l,c,D,m);return new Nr(m,F)}if(c.length===0&&S.length===0)return new Nr(m,[]);let N=yi(r)===s,M=await this.processSegment(l,c,D,S,N?Ee:s,!0,m);return new Nr(m,M instanceof Nr?[M]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Qv(JX(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw tJ(t)}return{routes:[],injector:e}}};function mJ(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function gJ(n){let e=n.value.routeConfig;return e&&e.path===""}function F2(n){let e=[],t=new Set;for(let r of n){if(!gJ(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=F2(r.children);e.push(new Nr(r.value,i))}return e.filter(r=>!t.has(r))}function i2(n){return n.data||{}}function s2(n){return n.resolve||{}}var yJ=new J("",{factory:()=>hJ});function _J(n,e,t,r,i,s,o){let a=n.get(yJ);return Un(c=>de(c).pipe(Ht(l=>a(n,e,t,r,l.extractedUrl,i,s,o)),pe(({state:l,tree:u})=>Fe($({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function vJ(n,e){return Un(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of V2(c))o.add(l);let a=0;return $t(o).pipe(Zu(c=>s.has(c)?bJ(c,r,n,e):(c.data=ub(c,c.parent,n).resolve,de(void 0))),on(()=>a++),p_(1),Un(c=>a===o.size?de(t):Zn))})}function V2(n){let e=n.children.map(t=>V2(t)).flat();return[n,...e]}function bJ(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!S2(i)&&(s[em]=i.title),Xf(()=>(n.data=ub(n,n.parent,t).resolve,EJ(s,n,e,r).pipe(pe(o=>(n._resolvedData=o,n.data=$($({},n.data),o),null)))))}function EJ(n,e,t,r){let i=tA(n);if(i.length===0)return de({});let s={};return $t(i).pipe(Un(o=>wJ(n[o],e,t,r).pipe(Ps(),on(a=>{if(a instanceof Od)throw db(new Ca,a);s[o]=a}))),p_(1),pe(()=>s),Gc(o=>x2(o)?Zn:Yf(o)))}function wJ(n,e,t,r){let i=Fd(e)??r,s=Ud(n,i),o=s.resolve?s.resolve(e,t):Lt(i,()=>s(e,t));return Al(o)}function ZD(n){return Ht(e=>{let t=n(e);return t?$t(t).pipe(pe(()=>e)):de(e)})}var mA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[em]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(U2),providedIn:"root"})}return n})(),U2=(()=>{class n extends mA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ie(YV))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jd=new J("",{factory:()=>({})}),im=new J(""),j2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(xD);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await l2(Lt(t,()=>r.loadComponent())),o=await $2(z2(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await B2(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function B2(n,e,t,r){let i=await l2(Lt(t,()=>n.loadChildren())),s=await $2(z2(i)),o;s instanceof wv||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(im,[],{optional:!0,self:!0}).flat()),{routes:c.map(pA),injector:a}}function IJ(n){return n&&typeof n=="object"&&"default"in n}function z2(n){return IJ(n)?n.default:n}async function $2(n){return n}var gb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(TJ),providedIn:"root"})}return n})(),TJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H2=new J("");var SJ=()=>{},q2=new J(""),W2=(()=>{class n{currentNavigation=ya(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ya(null,{});events=new mt;transitionAbortWithErrorSubject=new mt;configLoader=O(j2);environmentInjector=O(wt);destroyRef=O(Ls);urlSerializer=O(tm);rootContexts=O(Vd);location=O(Ad);inputBindingEnabled=O(pb,{optional:!0})!==null;titleStrategy=O(mA);options=O(jd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(gb);createViewTransition=O(H2,{optional:!0});navigationErrorHandler=O(q2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new nb(i)),r=i=>this.events.next(new rb(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ir(()=>{this.transitions?.next(Fe($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Ot(null),this.transitions.pipe(fn(r=>r!==null),Ht(r=>{let i=!1,s=new AbortController;return de(r).pipe(Ht(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gn.SupersededByNewNavigation),Zn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?Fe($({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Ws(o.id,this.urlSerializer.serialize(o.rawUrl),"",Kp.IgnoredSameUrlNavigation)),o.resolve(!1),Zn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return de(o).pipe(Ht(u=>(this.events.next(new Dl(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Zn:Promise.resolve(u))),_J(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),on(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=u.urlAfterRedirects,p));let f=new Qp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:p,restoredState:m,extras:I}=o,D=new Dl(u,this.urlSerializer.serialize(f),p,m);this.events.next(D);let S=I2(this.rootComponentType).snapshot;return this.currentTransition=r=Fe($({},o),{targetSnapshot:S,urlAfterRedirects:f,extras:Fe($({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=f,N)),de(r)}else return this.events.next(new Ws(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Kp.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Zn}),on(o=>{let a=new Jv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),pe(o=>(this.currentTransition=r=Fe($({},o),{guards:MX(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),HX(this.environmentInjector,o=>this.events.next(o)),on(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw db(this.urlSerializer,o.guardsResult);let a=new Zv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),fn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Gn.GuardRejected),!1)),ZD(o=>{if(o.guards.canActivateChecks.length!==0)return de(o).pipe(on(a=>{let c=new eb(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Ht(a=>{let c=!1;return de(a).pipe(vJ(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Gn.NoDataFromResolver)}}))}),on(a=>{let c=new tb(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),ZD(o=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let f=Fd(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).then(p=>{l.component=p}))}for(let f of l.children)u.push(...a(f));return u},c=a(o.targetSnapshot.root);return c.length===0?de(o):$t(Promise.all(c).then(()=>o))}),ZD(()=>this.afterPreactivation()),Ht(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?$t(c).pipe(pe(()=>r)):de(r)}),pe(o=>{let a=CX(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Fe($({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),on(()=>{this.events.next(new Yp)}),NX(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),sn(1),Qc(P2(s.signal).pipe(fn(()=>!i&&!r.targetRouterState),on(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Gn.Aborted)}))),on({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=SJ,a)),this.lastSuccessfulNavigation.set(ir(this.currentNavigation)),this.events.next(new Ji(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Qc(this.transitionAbortWithErrorSubject.pipe(on(o=>{throw o}))),Kc(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Gn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gc(o=>{if(this.destroyed)return r.resolve(!1),Zn;if(i=!0,R2(o))this.events.next(new Xi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),PX(o)?this.events.next(new kd(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Md(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Lt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Od){let{message:l,cancellationCode:u}=db(this.urlSerializer,c);this.events.next(new Xi(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new kd(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Zn}))}))}cancelNavigationTransition(t,r,i){let s=new Xi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ir(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DJ(n){return n!==qp}var G2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(AJ),providedIn:"root"})}return n})(),fb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},AJ=(()=>{class n extends fb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ep(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gA=(()=>{class n{urlSerializer=O(tm);options=O(jd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Ad);urlHandlingStrategy=O(gb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _i;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof _i?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=I2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>O(K2),providedIn:"root"})}return n})(),K2=(()=>{class n extends gA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Dl?this.updateStateMemento():t instanceof Ws?this.commitTransition(r):t instanceof Qp?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yp?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Xi&&t.code!==Gn.SupersededByNewNavigation&&t.code!==Gn.Redirect?this.restoreHistory(r):t instanceof Md?this.restoreHistory(r,!0):t instanceof Ji&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=$($({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ep(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yA(n,e){n.events.pipe(fn(t=>t instanceof Ji||t instanceof Xi||t instanceof Md||t instanceof Ws),pe(t=>t instanceof Ji||t instanceof Ws?0:(t instanceof Xi?t.code===Gn.Redirect||t.code===Gn.SupersededByNewNavigation:!1)?2:1),fn(t=>t!==2),sn(1)).subscribe(()=>{e()})}var CJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ks=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Iv);stateManager=O(gA);options=O(jd,{optional:!0})||{};pendingTasks=O(Fs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(W2);urlSerializer=O(tm);location=O(Ad);urlHandlingStrategy=O(gb);injector=O(wt);_events=new mt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(G2);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(im,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(pb,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new kt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=ir(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Xi&&r.code!==Gn.Redirect&&r.code!==Gn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ji)this.navigated=!0;else if(r instanceof kd){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DJ(i.source)},o);this.scheduleNavigation(a,qp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}TX(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(rr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ir(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=v2(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return b2(f,t,u,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ra(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,qp,null,r)}navigate(t,r={skipLocationChange:!1}){return xJ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(zi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},CJ):r===!1?i=$({},RJ):i=r,Ra(t))return JV(this.currentUrlTree,t,i);let s=this.parseUrl(t);return JV(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,p)=>{a=f,c=p});let u=this.pendingTasks.add();return yA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xJ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var yb=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ya(null,{});get href(){return ir(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new mt;applicationErrorHandler=O(rr);options=O(jd,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(O(new Sd("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ji&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ra(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Ra(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(gn(Ks),gn(Gs),wp("tabindex"),gn(wd),gn(qt),gn(Dd))};static \u0275dir=Vt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Qi("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&$s("href",i.reactiveHref(),iD)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",gi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",gi],replaceUrl:[2,"replaceUrl","replaceUrl",gi],routerLink:"routerLink"},features:[ba]})}return n})();var NJ=new J("");function _A(n,...e){return mn([{provide:im,multi:!0,useValue:n},[],{provide:Gs,useFactory:MJ},{provide:Dv,multi:!0,useFactory:kJ},e.map(t=>t.\u0275providers)])}function MJ(){return O(Ks).routerState.root}function kJ(){let n=O(_t);return e=>{let t=n.get(qr);if(e!==t.components[0])return;let r=n.get(Ks),i=n.get(OJ);n.get(LJ)===1&&r.initialNavigation(),n.get(FJ,null,{optional:!0})?.setUpPreloading(),n.get(NJ,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var OJ=new J("",{factory:()=>new mt}),LJ=new J("",{factory:()=>1});var FJ=new J("");var Me=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Me||{}),vi="*";function Q2(n,e=null){return{type:Me.Sequence,steps:n,options:e}}function vA(n){return{type:Me.Style,styles:n,offset:null}}var Qs=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Bd=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},sm="!";function Y2(n){return new H(3e3,!1)}function UJ(){return new H(3100,!1)}function jJ(){return new H(3101,!1)}function BJ(n){return new H(3001,!1)}function zJ(n){return new H(3003,!1)}function $J(n){return new H(3004,!1)}function J2(n,e){return new H(3005,!1)}function Z2(){return new H(3006,!1)}function eU(){return new H(3007,!1)}function tU(n,e){return new H(3008,!1)}function nU(n){return new H(3002,!1)}function rU(n,e,t,r,i){return new H(3010,!1)}function iU(){return new H(3011,!1)}function sU(){return new H(3012,!1)}function oU(){return new H(3200,!1)}function aU(){return new H(3202,!1)}function cU(){return new H(3013,!1)}function lU(n){return new H(3014,!1)}function uU(n){return new H(3015,!1)}function dU(n){return new H(3016,!1)}function hU(n,e){return new H(3404,!1)}function HJ(n){return new H(3502,!1)}function fU(n){return new H(3503,!1)}function pU(){return new H(3300,!1)}function mU(n){return new H(3504,!1)}function gU(n){return new H(3301,!1)}function yU(n,e){return new H(3302,!1)}function _U(n){return new H(3303,!1)}function vU(n,e){return new H(3400,!1)}function bU(n){return new H(3401,!1)}function EU(n){return new H(3402,!1)}function wU(n,e){return new H(3505,!1)}function Ys(n){switch(n.length){case 0:return new Qs;case 1:return n[0];default:return new Bd(n)}}function IA(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,f=u&&a||new Map;c.forEach((p,m)=>{let I=m,D=p;if(m!=="offset")switch(I=n.normalizePropertyName(I,i),D){case sm:D=t.get(m);break;case vi:D=r.get(m);break;default:D=n.normalizeStyleValue(m,I,D,i);break}f.set(I,D)}),u||s.push(f),a=f,o=l}),i.length)throw HJ(i);return s}function _b(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&bA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&bA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&bA(t,"destroy",n)));break}}function bA(n,e,t){let r=t.totalTime,i=!!t.disabled,s=vb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function vb(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function or(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function TA(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var qJ=typeof document>"u"?null:document.documentElement;function bb(n){let e=n.parentNode||n.host||null;return e===qJ?null:e}function WJ(n){return n.substring(1,6)=="ebkit"}var Cl=null,X2=!1;function IU(n){Cl||(Cl=GJ()||{},X2=Cl.style?"WebkitAppearance"in Cl.style:!1);let e=!0;return Cl.style&&!WJ(n)&&(e=n in Cl.style,!e&&X2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Cl.style)),e}function GJ(){return typeof document<"u"?document.body:null}function SA(n,e){for(;e;){if(e===n)return!0;e=bb(e)}return!1}function DA(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var KJ=1e3,AA="{{",QJ="}}",CA="ng-enter",Eb="ng-leave",om="ng-trigger",am=".ng-trigger",RA="ng-animating",wb=".ng-animating";function Zi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EA(parseFloat(e[1]),e[2])}function EA(n,e){switch(e){case"s":return n*KJ;default:return n}}function cm(n,e,t){return n.hasOwnProperty("duration")?n:XJ(n,e,t)}var YJ=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function XJ(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(YJ);if(o===null)return e.push(Y2(n)),{duration:0,delay:0,easing:""};r=EA(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=EA(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(UJ()),o=!0),i<0&&(e.push(jJ()),o=!0),o&&e.splice(a,0,Y2(n))}return{duration:r,delay:i,easing:s}}function TU(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function bi(n,e,t){e.forEach((r,i)=>{let s=Ib(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function xa(n,e){e.forEach((t,r)=>{let i=Ib(r);n.style[i]=""})}function zd(n){return Array.isArray(n)?n.length==1?n[0]:Q2(n):n}function SU(n,e,t){let r=e.params||{},i=xA(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(BJ(s))})}var wA=new RegExp(`${AA}\\s*(.+?)\\s*${QJ}`,"g");function xA(n){let e=[];if(typeof n=="string"){let t;for(;t=wA.exec(n);)e.push(t[1]);wA.lastIndex=0}return e}function $d(n,e,t){let r=`${n}`,i=r.replace(wA,(s,o)=>{let a=e[o];return a==null&&(t.push(zJ(o)),a=""),a.toString()});return i==r?n:i}var JJ=/-+([a-z0-9])/g;function Ib(n){return n.replace(JJ,(...e)=>e[1].toUpperCase())}function DU(n,e){return n===0||e===0}function AU(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Tb(n,a)))}}return e}function ar(n,e,t){switch(e.type){case Me.Trigger:return n.visitTrigger(e,t);case Me.State:return n.visitState(e,t);case Me.Transition:return n.visitTransition(e,t);case Me.Sequence:return n.visitSequence(e,t);case Me.Group:return n.visitGroup(e,t);case Me.Animate:return n.visitAnimate(e,t);case Me.Keyframes:return n.visitKeyframes(e,t);case Me.Style:return n.visitStyle(e,t);case Me.Reference:return n.visitReference(e,t);case Me.AnimateChild:return n.visitAnimateChild(e,t);case Me.AnimateRef:return n.visitAnimateRef(e,t);case Me.Query:return n.visitQuery(e,t);case Me.Stagger:return n.visitStagger(e,t);default:throw $J(e.type)}}function Tb(n,e){return window.getComputedStyle(n)[e]}var GA=(()=>{class n{validateStyleProperty(t){return IU(t)}containsElement(t,r){return SA(t,r)}getParentElement(t){return bb(t)}query(t,r,i){return DA(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Qs(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),xl=class{static NOOP=new GA},Pl=class{};var ZJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Rb=class extends Pl{normalizePropertyName(e,t){return Ib(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(ZJ.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(J2(e,r))}return o+s}};var xb="*";function eZ(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>tZ(r,t,e)):t.push(n),t}function tZ(n,e,t){if(n[0]==":"){let c=nZ(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(uU(n)),e;let i=r[1],s=r[2],o=r[3];e.push(CU(i,o));let a=i==xb&&o==xb;s[0]=="<"&&!a&&e.push(CU(o,i))}function nZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(dU(n)),"* => *"}}var Sb=new Set(["true","1"]),Db=new Set(["false","0"]);function CU(n,e){let t=Sb.has(n)||Db.has(n),r=Sb.has(e)||Db.has(e);return(i,s)=>{let o=n==xb||n==i,a=e==xb||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Sb.has(n):Db.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Sb.has(e):Db.has(e)),o&&a}}var VU=":self",rZ=new RegExp(`s*${VU}s*,?`,"g");function UU(n,e,t,r){return new LA(n).build(e,t,r)}var RU="",LA=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new FA(t);return this._resetContextStyleTimingState(i),ar(this,zd(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=RU,e.collectedStyles=new Map,e.collectedStyles.set(RU,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Z2()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Me.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==Me.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(eU())}),{type:Me.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{xA(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(tU(e.name,[...s.values()]))}return{type:Me.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=ar(this,zd(e.animation),t),i=eZ(e.expr,t.errors);return{type:Me.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Rl(e.options)}}visitSequence(e,t){return{type:Me.Sequence,steps:e.steps.map(r=>ar(this,r,t)),options:Rl(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=ar(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Me.Group,steps:s,options:Rl(e.options)}}visitAnimate(e,t){let r=aZ(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:vA({});if(s.type==Me.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=vA(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Me.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===vi?r.push(a):t.errors.push(nU(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(AA)>=0){s=!0;break}}}),{type:Me.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),f=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(rU(c,u.startTime,u.endTime,s,i)),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:i}),t.options&&SU(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Me.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(iU()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(N=>{let M=this._makeStyleAst(N,t),F=M.offset!=null?M.offset:oZ(M.styles),j=0;return F!=null&&(s++,j=M.offset=F),c=c||j<0||j>1,a=a||j<l,l=j,o.push(j),M});c&&t.errors.push(sU()),a&&t.errors.push(oU());let f=e.steps.length,p=0;s>0&&s<f?t.errors.push(aU()):s==0&&(p=i/(f-1));let m=f-1,I=t.currentTime,D=t.currentAnimateTimings,S=D.duration;return u.forEach((N,M)=>{let F=p>0?M==m?1:p*M:o[M],j=F*S;t.currentTime=I+D.delay+j,D.duration=j,this._validateStyleAst(N,t),N.offset=F,r.styles.push(N)}),r}visitReference(e,t){return{type:Me.Reference,animation:ar(this,zd(e.animation),t),options:Rl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Me.AnimateChild,options:Rl(e.options)}}visitAnimateRef(e,t){return{type:Me.AnimateRef,animation:this.visitReference(e.animation,t),options:Rl(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=iZ(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,or(t.collectedStyles,t.currentQuerySelector,new Map);let a=ar(this,zd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Me.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Rl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(cU());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:cm(e.timings,t.errors,!0);return{type:Me.Stagger,animation:ar(this,zd(e.animation),t),timings:r,options:null}}};function iZ(n){let e=!!n.split(/\s*,\s*/).find(t=>t==VU);return e&&(n=n.replace(rZ,"")),n=n.replace(/@\*/g,am).replace(/@\w+/g,t=>am+"-"+t.slice(1)).replace(/:animating/g,wb),[n,e]}function sZ(n){return n?$({},n):null}var FA=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function oZ(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function aZ(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=cm(n,e).duration;return PA(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=PA(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=cm(t,e);return PA(i.duration,i.delay,i.easing)}function Rl(n){return n?(n=$({},n),n.params&&(n.params=sZ(n.params))):n={},n}function PA(n,e,t){return{duration:n,delay:e,easing:t}}function KA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var um=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},cZ=1,lZ=":enter",uZ=new RegExp(lZ,"g"),dZ=":leave",hZ=new RegExp(dZ,"g");function jU(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new VA().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var VA=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new um;let f=new UA(e,t,l,i,s,u,[]);f.options=c;let p=c.delay?Zi(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),ar(this,r,f);let m=f.timelines.filter(I=>I.containsAnimation());if(m.length&&a.size){let I;for(let D=m.length-1;D>=0;D--){let S=m[D];if(S.element===t){I=S;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,f.errors,c)}return m.length?m.map(I=>I.buildKeyframes()):[KA(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Zi($d(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Zi(r.duration):null,a=r.delay!=null?Zi(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ar(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Me.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Pb);let o=Zi(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ar(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Zi(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),ar(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?$d(r,t.params,t.errors):r;return cm(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Me.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Zi(i.delay):0;s&&(t.previousNode.type===Me.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Pb);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),ar(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let p=f.currentTimeline.currentTime;o=Math.max(o,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let f=u.currentTime;ar(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Pb={},UA=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Pb;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new Nb(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Zi(r.duration)),r.delay!=null&&(i.delay=Zi(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=$d(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Pb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new jA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(uZ,"."+this._enterClassName),e=e.replace(hZ,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(lU(t)),a}},Nb=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=cZ,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||vi),this._currentKeyframe.set(t,vi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=fZ(e,this._globalTimelineStyles);for(let[a,c]of o){let l=$d(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??vi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,f)=>{u===sm?e.add(f):u===vi&&t.add(f)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return KA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},jA=class extends Nb{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",xU(a)),s.push(l);let u=e.length-1;for(let f=1;f<=u;f++){let p=new Map(e[f]),m=p.get("offset"),I=t+m*r;p.set("offset",xU(I/o)),s.push(p)}r=o,t=0,i="",e=s}return KA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function xU(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function fZ(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,vi)}else for(let[s,o]of i)t.set(s,o)}),t}function PU(n,e,t,r,i,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}var NA={},Mb=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return pZ(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let f=[],p=this.ast.options&&this.ast.options.params||NA,m=a&&a.params||NA,I=this.buildStyles(r,m,f),D=c&&c.params||NA,S=this.buildStyles(i,D,f),N=new Set,M=new Map,F=new Map,j=i==="void",z={params:BU(D,p),delay:this.ast.options?.delay},B=u?[]:jU(e,t,this.ast.animation,s,o,I,S,z,l,f),T=0;return B.forEach(_=>{T=Math.max(_.duration+_.delay,T)}),f.length?PU(t,this._triggerName,r,i,j,I,S,[],[],M,F,T,f):(B.forEach(_=>{let b=_.element,C=or(M,b,new Set);_.preStyleProps.forEach(R=>C.add(R));let A=or(F,b,new Set);_.postStyleProps.forEach(R=>A.add(R)),b!==t&&N.add(b)}),PU(t,this._triggerName,r,i,j,I,S,B,[...N.values()],M,F,T))}};function pZ(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function BU(n,e){let t=$({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var BA=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=BU(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=$d(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function mZ(n,e,t){return new zA(n,e,t)}var zA=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new BA(i.style,s,r))}),NU(this.states,"true","1"),NU(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Mb(e,i,this.states))}),this.fallbackTransition=gZ(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function gZ(n,e,t){let r=[(o,a)=>!0],i={type:Me.Sequence,steps:[],options:null},s={type:Me.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Mb(n,s,e)}function NU(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var yZ=new um,$A=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=UU(this._driver,t,r,i);if(r.length)throw fU(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=IA(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=jU(this._driver,t,s,CA,Eb,new Map,new Map,r,yZ,i),o.forEach(u=>{let f=or(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(i.push(pU()),o=[]),i.length)throw mU(i);a.forEach((u,f)=>{u.forEach((p,m)=>{u.set(m,this._driver.computeStyle(f,m,vi))})});let c=o.map(u=>{let f=a.get(u.element);return this._buildPlayer(u,new Map,f)}),l=Ys(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw gU(e);return t}listen(e,t,r,i){let s=vb(t,"","","");return _b(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},MU="ng-animate-queued",_Z=".ng-animate-queued",MA="ng-animate-disabled",vZ=".ng-animate-disabled",bZ="ng-star-inserted",EZ=".ng-star-inserted",wZ=[],zU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},IZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed",dm=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=SZ(i),r){let s=e,{value:o}=s,a=$u(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},lm="void",kA=new dm(lm),HA=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Gr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw yU(r,t);if(r==null||r.length==0)throw _U(t);if(!DZ(r))throw vU(r,t);let s=or(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=or(this._engine.statesByElement,e,new Map);return a.has(t)||(Gr(e,om),Gr(e,om+"-"+t),a.set(t,kA)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw bU(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new hm(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Gr(e,om),Gr(e,om+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new dm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=kA),!(l.value===lm)&&c.value===l.value){if(!RZ(c.params,l.params)){let D=[],S=s.matchStyles(c.value,c.params,D),N=s.matchStyles(l.value,l.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{xa(e,S),bi(e,N)})}return}let p=or(this._engine.playersByElement,e,[]);p.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let m=s.matchTransition(c.value,l.value,e,l.params),I=!1;if(!m){if(!i)return;m=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:c,toState:l,player:o,isFallbackTransition:I}),I||(Gr(e,MU),o.onStart(()=>{Hd(e,MU)})),o.onDone(()=>{let D=this.players.indexOf(o);D>=0&&this.players.splice(D,1);let S=this._engine.playersByElement.get(e);if(S){let N=S.indexOf(o);N>=0&&S.splice(N,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,am,!0);r.forEach(i=>{if(i[Ei])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,lm,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ys(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||kA,u=new dm(lm),f=new hm(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Ei];(!s||s===zU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Gr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=vb(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,_b(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},qA=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new HA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Ab(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Ab(t))return;let s=t[Ei];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gr(e,MA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hd(e,MA))}removeNode(e,t,r){if(Ab(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ei]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Ab(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,am,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,wb,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ys(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Ei];if(t&&t.setForRemoval){if(e[Ei]=zU,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(MA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,vZ,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Gr(i,bZ)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ys(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw EU(e)}_flushAnimations(e,t){let r=new um,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(Y=>{u.add(Y);let ee=this.driver.query(Y,_Z,!0);for(let re=0;re<ee.length;re++)u.add(ee[re])});let f=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=LU(p,this.collectedEnterElements),I=new Map,D=0;m.forEach((Y,ee)=>{let re=CA+D++;I.set(ee,re),Y.forEach(ge=>Gr(ge,re))});let S=[],N=new Set,M=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let ee=this.collectedLeaveElements[Y],re=ee[Ei];re&&re.setForRemoval&&(S.push(ee),N.add(ee),re.hasAnimation?this.driver.query(ee,EZ,!0).forEach(ge=>N.add(ge)):M.add(ee))}let F=new Map,j=LU(p,Array.from(N));j.forEach((Y,ee)=>{let re=Eb+D++;F.set(ee,re),Y.forEach(ge=>Gr(ge,re))}),e.push(()=>{m.forEach((Y,ee)=>{let re=I.get(ee);Y.forEach(ge=>Hd(ge,re))}),j.forEach((Y,ee)=>{let re=F.get(ee);Y.forEach(ge=>Hd(ge,re))}),S.forEach(Y=>{this.processLeaveNode(Y)})});let z=[],B=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(t).forEach(re=>{let ge=re.player,at=re.element;if(z.push(ge),this.collectedEnterElements.length){let yt=at[Ei];if(yt&&yt.setForMove){if(yt.previousTriggersValues&&yt.previousTriggersValues.has(re.triggerName)){let vr=yt.previousTriggersValues.get(re.triggerName),wn=this.statesByElement.get(re.element);if(wn&&wn.has(re.triggerName)){let Vr=wn.get(re.triggerName);Vr.value=vr,wn.set(re.triggerName,Vr)}}ge.destroy();return}}let zt=!f||!this.driver.containsElement(f,at),Ze=F.get(at),$e=I.get(at),Le=this._buildInstruction(re,r,$e,Ze,zt);if(Le.errors&&Le.errors.length){B.push(Le);return}if(zt){ge.onStart(()=>xa(at,Le.fromStyles)),ge.onDestroy(()=>bi(at,Le.toStyles)),i.push(ge);return}if(re.isFallbackTransition){ge.onStart(()=>xa(at,Le.fromStyles)),ge.onDestroy(()=>bi(at,Le.toStyles)),i.push(ge);return}let dn=[];Le.timelines.forEach(yt=>{yt.stretchStartingKeyframe=!0,this.disabledNodes.has(yt.element)||dn.push(yt)}),Le.timelines=dn,r.append(at,Le.timelines);let Vn={instruction:Le,player:ge,element:at};o.push(Vn),Le.queriedElements.forEach(yt=>or(a,yt,[]).push(ge)),Le.preStyleProps.forEach((yt,vr)=>{if(yt.size){let wn=c.get(vr);wn||c.set(vr,wn=new Set),yt.forEach((Vr,ki)=>wn.add(ki))}}),Le.postStyleProps.forEach((yt,vr)=>{let wn=l.get(vr);wn||l.set(vr,wn=new Set),yt.forEach((Vr,ki)=>wn.add(ki))})});if(B.length){let Y=[];B.forEach(ee=>{Y.push(wU(ee.triggerName,ee.errors))}),z.forEach(ee=>ee.destroy()),this.reportError(Y)}let T=new Map,_=new Map;o.forEach(Y=>{let ee=Y.element;r.has(ee)&&(_.set(ee,ee),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,T))}),i.forEach(Y=>{let ee=Y.element;this._getPreviousPlayers(ee,!1,Y.namespaceId,Y.triggerName,null).forEach(ge=>{or(T,ee,[]).push(ge),ge.destroy()})});let b=S.filter(Y=>FU(Y,c,l)),C=new Map;OU(C,this.driver,M,l,vi).forEach(Y=>{FU(Y,c,l)&&b.push(Y)});let R=new Map;m.forEach((Y,ee)=>{OU(R,this.driver,new Set(Y),c,sm)}),b.forEach(Y=>{let ee=C.get(Y),re=R.get(Y);C.set(Y,new Map([...ee?.entries()??[],...re?.entries()??[]]))});let w=[],Oe=[],Ce={};o.forEach(Y=>{let{element:ee,player:re,instruction:ge}=Y;if(r.has(ee)){if(u.has(ee)){re.onDestroy(()=>bi(ee,ge.toStyles)),re.disabled=!0,re.overrideTotalTime(ge.totalTime),i.push(re);return}let at=Ce;if(_.size>1){let Ze=ee,$e=[];for(;Ze=Ze.parentNode;){let Le=_.get(Ze);if(Le){at=Le;break}$e.push(Ze)}$e.forEach(Le=>_.set(Le,at))}let zt=this._buildAnimation(re.namespaceId,ge,T,s,R,C);if(re.setRealPlayer(zt),at===Ce)w.push(re);else{let Ze=this.playersByElement.get(at);Ze&&Ze.length&&(re.parentPlayer=Ys(Ze)),i.push(re)}}else xa(ee,ge.fromStyles),re.onDestroy(()=>bi(ee,ge.toStyles)),Oe.push(re),u.has(ee)&&i.push(re)}),Oe.forEach(Y=>{let ee=s.get(Y.element);if(ee&&ee.length){let re=Ys(ee);Y.setRealPlayer(re)}}),i.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<S.length;Y++){let ee=S[Y],re=ee[Ei];if(Hd(ee,Eb),re&&re.hasAnimation)continue;let ge=[];if(a.size){let zt=a.get(ee);zt&&zt.length&&ge.push(...zt);let Ze=this.driver.query(ee,wb,!0);for(let $e=0;$e<Ze.length;$e++){let Le=a.get(Ze[$e]);Le&&Le.length&&ge.push(...Le)}}let at=ge.filter(zt=>!zt.destroyed);at.length?AZ(this,ee,at):this.processLeaveNode(ee)}return S.length=0,w.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let ee=this.players.indexOf(Y);this.players.splice(ee,1)}),Y.play()}),w}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==lm;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,f=or(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(m=>{let I=m.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),m.destroy(),f.push(m)})}xa(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(I=>{let D=I.element;u.add(D);let S=D[Ei];if(S&&S.removedBeforeQueried)return new Qs(I.duration,I.delay);let N=D!==c,M=CZ((r.get(D)||wZ).map(T=>T.getRealPlayer())).filter(T=>{let _=T;return _.element?_.element===D:!1}),F=s.get(D),j=o.get(D),z=IA(this._normalizer,I.keyframes,F,j),B=this._buildPlayer(I,z,M);if(I.subTimeline&&i&&f.add(D),N){let T=new hm(e,a,D);T.setRealPlayer(B),l.push(T)}return B});l.forEach(I=>{or(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>TZ(this.playersByQueriedElement,I.element,I))}),u.forEach(I=>Gr(I,RA));let m=Ys(p);return m.onDestroy(()=>{u.forEach(I=>Hd(I,RA)),bi(c,t.toStyles)}),f.forEach(I=>{or(i,I,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Qs(e.duration,e.delay)}},hm=class{namespaceId;triggerName;element;_player=new Qs;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>_b(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){or(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function TZ(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function SZ(n){return n??null}function Ab(n){return n&&n.nodeType===1}function DZ(n){return n=="start"||n=="done"}function kU(n,e){let t=n.style.display;return n.style.display=e??"none",t}function OU(n,e,t,r,i){let s=[];t.forEach(c=>s.push(kU(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(f=>{let p=e.computeStyle(l,f,i);u.set(f,p),(!p||p.length==0)&&(l[Ei]=IZ,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>kU(c,s[a++])),o}function LU(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Gr(n,e){n.classList?.add(e)}function Hd(n,e){n.classList?.remove(e)}function AZ(n,e,t){Ys(t).onDone(()=>n.processLeaveNode(e))}function CZ(n){let e=[];return $U(n,e),e}function $U(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Bd?$U(r.players,e):e.push(r)}}function RZ(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function FU(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var qd=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new qA(e.body,t,r),this._timelineEngine=new $A(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=UU(this._driver,s,c,l);if(c.length)throw hU(i,c);a=mZ(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=TA(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=TA(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function xZ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=OA(e[0]),e.length>1&&(r=OA(e[e.length-1]))):e instanceof Map&&(t=OA(e)),t||r?new PZ(n,t,r):null}var PZ=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&bi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bi(this._element,this._initialStyles),this._endStyles&&(bi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(xa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xa(this._element,this._endStyles),this._endStyles=null),bi(this._element,this._initialStyles),this._state=3)}}return n})();function OA(n){let e=null;return n.forEach((t,r)=>{NZ(r)&&(e=e||new Map,e.set(r,t))}),e}function NZ(n){return n==="display"||n==="position"}var kb=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Tb(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ob=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return SA(e,t)}getParentElement(e){return bb(e)}query(e,t,r){return DA(e,t,r)}computeStyle(e,t,r){return Tb(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(m=>m instanceof kb);DU(r,i)&&u.forEach(m=>{m.currentSnapshot.forEach((I,D)=>l.set(D,I))});let f=TU(t).map(m=>new Map(m));f=AU(e,f,l);let p=xZ(e,f);return new kb(e,f,c,p)}};var Cb="@",HU="@.disabled",Lb=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Cb&&t==HU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},WA=class extends Lb{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Cb?t.charAt(1)=="."&&t==HU?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Cb){let s=MZ(e),o=t.slice(1),a="";return o.charAt(0)!=Cb&&([o,a]=kZ(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,r,c)})}return this.delegate.listen(e,t,r,i)}};function MZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function kZ(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Fb=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let f=()=>l.delete(i);u=new Lb("",i,this.engine,f),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new WA(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var LZ=(()=>{class n extends qd{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(ie(Xe),ie(xl),ie(Pl))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function FZ(){return new Rb}function VZ(){return new Fb(O(Vp),O(qd),O(Pe))}var qU=[{provide:Pl,useFactory:FZ},{provide:qd,useClass:LZ},{provide:Ar,useFactory:VZ}],nOe=[{provide:xl,useClass:GA},{provide:vd,useValue:"NoopAnimations"},...qU],UZ=[{provide:xl,useFactory:()=>new Ob},{provide:vd,useFactory:()=>"BrowserAnimations"},...qU];function WU(){return Sp("NgEagerAnimations"),[...UZ]}var GU=()=>{};var YU=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},jZ=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):jZ(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new YA;let p=s<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let I=l<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},YA=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BZ=function(n){let e=YU(n);return Vb.encodeByteArray(e,!0)},pm=function(n){return BZ(n).replace(/\./g,"")},Ub=function(n){try{return Vb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zZ=()=>JA().__FIREBASE_DEFAULTS__,$Z=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HZ=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ub(n[1]);return e&&JSON.parse(e)},jb=()=>{try{return GU()||zZ()||$Z()||HZ()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZA=n=>{var e,t;return(t=(e=jb())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},XU=n=>{let e=ZA(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eC=()=>{var n;return(n=jb())===null||n===void 0?void 0:n.config},tC=n=>{var e;return(e=jb())===null||e===void 0?void 0:e[`_${n}`]};var Nl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Pa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bb(n){return(await fetch(n,{credentials:"include"})).ok}function JU(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pm(JSON.stringify(t)),pm(JSON.stringify(o)),""].join(".")}var fm={};function qZ(){let n={prod:[],emulator:[]};for(let e of Object.keys(fm))fm[e]?n.emulator.push(e):n.prod.push(e);return n}function WZ(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var KU=!1;function zb(n,e){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||fm[n]===e||fm[n]||KU)return;fm[n]=e;function t(p){return`__firebase__banner__${p}`}let r="__firebase__banner",s=qZ().prod.length>0;function o(){let p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{KU=!0,o()},p}function u(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){let p=WZ(r),m=t("text"),I=document.getElementById(m)||document.createElement("span"),D=t("learnmore"),S=document.getElementById(D)||document.createElement("a"),N=t("preprendIcon"),M=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let F=p.element;a(F),u(S,D);let j=l();c(M,N),F.append(M,I,S,j),document.body.appendChild(F)}s?(I.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function GZ(){var n;let e=(n=jb())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ej(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tj(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rj(){let n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ij(){return!GZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mm(){try{return typeof indexedDB=="object"}catch{return!1}}function sj(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var KZ="FirebaseError",kr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KZ,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wi.prototype.create)}},wi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QZ(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kr(i,a,r)}};function QZ(n,e){return n.replace(YZ,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var YZ=/\{\$([^}]+)}/g;function oj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function es(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(QU(s)&&QU(o)){if(!es(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function QU(n){return n!==null&&typeof n=="object"}function Wd(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aj(n,e){let t=new XA(n,e);return t.subscribe.bind(t)}var XA=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XZ(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=QA),i.error===void 0&&(i.error=QA),i.complete===void 0&&(i.complete=QA);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function XZ(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function QA(){}var oOe=14400*1e3;function cr(n){return n&&n._delegate?n._delegate:n}var Kn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ml="[DEFAULT]";var nC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Nl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZZ(e))try{this.getOrInitializeService({instanceIdentifier:Ml})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ml){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ml){return this.instances.has(e)}getOptions(e=Ml){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JZ(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ml){return this.component?this.component.multipleInstances?e:Ml:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JZ(n){return n===Ml?void 0:n}function ZZ(n){return n.instantiationMode==="EAGER"}var $b=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new nC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var eee=[],Ve=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ve||{}),tee={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},nee=Ve.INFO,ree={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},iee=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ree[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ts=class{constructor(e){this.name=e,this._logLevel=nee,this._logHandler=iee,this._userLogHandler=null,eee.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}};var see=(n,e)=>e.some(t=>n instanceof t),cj,lj;function oee(){return cj||(cj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aee(){return lj||(lj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var uj=new WeakMap,iC=new WeakMap,dj=new WeakMap,rC=new WeakMap,oC=new WeakMap;function cee(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ns(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&uj.set(t,n)}).catch(()=>{}),oC.set(e,n),e}function lee(n){if(iC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});iC.set(n,e)}var sC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return iC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dj.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hj(n){sC=n(sC)}function uee(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Hb(this),e,...t);return dj.set(r,e.sort?e.sort():[e]),ns(r)}:aee().includes(n)?function(...e){return n.apply(Hb(this),e),ns(uj.get(this))}:function(...e){return ns(n.apply(Hb(this),e))}}function dee(n){return typeof n=="function"?uee(n):(n instanceof IDBTransaction&&lee(n),see(n,oee())?new Proxy(n,sC):n)}function ns(n){if(n instanceof IDBRequest)return cee(n);if(rC.has(n))return rC.get(n);let e=dee(n);return e!==n&&(rC.set(n,e),oC.set(e,n)),e}var Hb=n=>oC.get(n);function qb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=ns(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ns(o.result),c.oldVersion,c.newVersion,ns(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var hee=["get","getKey","getAll","getAllKeys","count"],fee=["put","add","delete","clear"],aC=new Map;function fj(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(aC.get(e))return aC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=fee.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hee.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return aC.set(e,s),s}hj(n=>Fe($({},n),{get:(e,t,r)=>fj(e,t)||n.get(e,t,r),has:(e,t)=>!!fj(e,t)||n.has(e,t)}));var lC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pee(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function pee(n){let e=n.getComponent();return e?.type==="VERSION"}var uC="@firebase/app",pj="0.13.2";var Xs=new ts("@firebase/app"),mee="@firebase/app-compat",gee="@firebase/analytics-compat",yee="@firebase/analytics",_ee="@firebase/app-check-compat",vee="@firebase/app-check",bee="@firebase/auth",Eee="@firebase/auth-compat",wee="@firebase/database",Iee="@firebase/data-connect",Tee="@firebase/database-compat",See="@firebase/functions",Dee="@firebase/functions-compat",Aee="@firebase/installations",Cee="@firebase/installations-compat",Ree="@firebase/messaging",xee="@firebase/messaging-compat",Pee="@firebase/performance",Nee="@firebase/performance-compat",Mee="@firebase/remote-config",kee="@firebase/remote-config-compat",Oee="@firebase/storage",Lee="@firebase/storage-compat",Fee="@firebase/firestore",Vee="@firebase/ai",Uee="@firebase/firestore-compat",jee="firebase",Bee="11.10.0";var dC="[DEFAULT]",zee={[uC]:"fire-core",[mee]:"fire-core-compat",[yee]:"fire-analytics",[gee]:"fire-analytics-compat",[vee]:"fire-app-check",[_ee]:"fire-app-check-compat",[bee]:"fire-auth",[Eee]:"fire-auth-compat",[wee]:"fire-rtdb",[Iee]:"fire-data-connect",[Tee]:"fire-rtdb-compat",[See]:"fire-fn",[Dee]:"fire-fn-compat",[Aee]:"fire-iid",[Cee]:"fire-iid-compat",[Ree]:"fire-fcm",[xee]:"fire-fcm-compat",[Pee]:"fire-perf",[Nee]:"fire-perf-compat",[Mee]:"fire-rc",[kee]:"fire-rc-compat",[Oee]:"fire-gcs",[Lee]:"fire-gcs-compat",[Fee]:"fire-fst",[Uee]:"fire-fst-compat",[Vee]:"fire-vertex","fire-js":"fire-js",[jee]:"fire-js-all"};var gm=new Map,$ee=new Map,hC=new Map;function mj(n,e){try{n.container.addComponent(e)}catch(t){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ii(n){let e=n.name;if(hC.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;hC.set(e,n);for(let t of gm.values())mj(t,n);for(let t of $ee.values())mj(t,n);return!0}function Gd(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Or(n){return n==null?!1:n.settings!==void 0}var Hee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Na=new wi("app","Firebase",Hee);var fC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Na.create("app-deleted",{appName:this._name})}};var Ma=Bee;function gC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:dC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Na.create("bad-app-name",{appName:String(i)});if(t||(t=eC()),!t)throw Na.create("no-options");let s=gm.get(i);if(s){if(es(t,s.options)&&es(r,s.config))return s;throw Na.create("duplicate-app",{appName:i})}let o=new $b(i);for(let c of hC.values())o.addComponent(c);let a=new fC(t,r,o);return gm.set(i,a),a}function kl(n=dC){let e=gm.get(n);if(!e&&n===dC&&eC())return gC();if(!e)throw Na.create("no-app",{appName:n});return e}function Wb(){return Array.from(gm.values())}function Ct(n,e,t){var r;let i=(r=zee[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Ii(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qee="firebase-heartbeat-database",Wee=1,ym="firebase-heartbeat-store",cC=null;function vj(){return cC||(cC=qb(qee,Wee,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ym)}catch(t){console.warn(t)}}}}).catch(n=>{throw Na.create("idb-open",{originalErrorMessage:n.message})})),cC}async function Gee(n){try{let t=(await vj()).transaction(ym),r=await t.objectStore(ym).get(bj(n));return await t.done,r}catch(e){if(e instanceof kr)Xs.warn(e.message);else{let t=Na.create("idb-get",{originalErrorMessage:e?.message});Xs.warn(t.message)}}}async function gj(n,e){try{let r=(await vj()).transaction(ym,"readwrite");await r.objectStore(ym).put(e,bj(n)),await r.done}catch(t){if(t instanceof kr)Xs.warn(t.message);else{let r=Na.create("idb-set",{originalErrorMessage:t?.message});Xs.warn(r.message)}}}function bj(n){return`${n.name}!${n.options.appId}`}var Kee=1024,Qee=30,pC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new mC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yj();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Qee){let o=Xee(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=yj(),{heartbeatsToSend:r,unsentEntries:i}=Yee(this._heartbeatsCache.heartbeats),s=pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xs.warn(t),""}}};function yj(){return new Date().toISOString().substring(0,10)}function Yee(n,e=Kee){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_j(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_j(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var mC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mm()?sj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Gee(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return gj(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return gj(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function _j(n){return pm(JSON.stringify({version:2,heartbeats:n})).length}function Xee(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Jee(n){Ii(new Kn("platform-logger",e=>new lC(e),"PRIVATE")),Ii(new Kn("heartbeat",e=>new pC(e),"PRIVATE")),Ct(uC,pj,n),Ct(uC,pj,"esm2017"),Ct("fire-js","")}Jee("");var Zee="firebase",ete="11.10.0";Ct(Zee,ete,"app");function Ej(n){n===void 0&&(n=O(_t));let e=n.get(_a);return t=>new ue(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ka=new Xc("ANGULARFIRE2_VERSION");function _m(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Qd=(n,e)=>{let t=e?[e]:Wb(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Kd=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Kd||{}),wj=Np()&&typeof Zone<"u"?Kd.WARN:Kd.SILENT;var Gb=class{zone;delegate;constructor(e,t=qT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Oa=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=O(Pe);this.outsideAngular=t.runOutsideAngular(()=>new Gb(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Gb(typeof Zone>"u"?void 0:Zone.current,HT))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ij=!1;function tte(n,e){!Ij&&(wj>Kd.SILENT||Np())&&(Ij=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),wj>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function nte(n){let e=O(Pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ol(n){let e=O(Pe,{optional:!0});return e?e.run(()=>n()):n()}var rte=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Lt(t,()=>Ol(()=>n.apply(void 0,r)))),lr=(n,e,t)=>(t||=e?Kd.WARN:Kd.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=O(Oa),o=O(_a),a=O(wt)}catch{return tte(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ol(()=>o.add())),i[l]=rte(i[l],r,a));let c=nte(()=>n.apply(this,i));return e?c instanceof ue?c.pipe(ia(s.outsideAngular),ra(s.insideAngular),Ej(a)):c instanceof Promise?Ol(()=>{let l=o.add();return new Promise((u,f)=>{c.then(p=>Lt(a,()=>Ol(()=>u(p))),p=>Lt(a,()=>Ol(()=>f(p)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ol(()=>c):c instanceof ue?c.pipe(ia(s.outsideAngular),ra(s.insideAngular)):Ol(()=>c)});var Js=class{constructor(e){return e}},Ll=class{constructor(){return Wb()}};function ite(n){return n&&n.length===1?n[0]:new Js(kl())}var yC=new J("angularfire2._apps"),ste={provide:Js,useFactory:ite,deps:[[new sr,yC]]},ote={provide:Ll,deps:[[new sr,yC]]};function ate(n){return(e,t)=>{let r=t.get(Us);Ct("angularfire",ka.full,"core"),Ct("angularfire",ka.full,"app"),Ct("angular",pS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Js(i)}}function Tj(n,...e){return mn([ste,ote,{provide:yC,useFactory:ate(n),multi:!0,deps:[Pe,_t,Oa,...e]}])}var Sj=lr(gC,!0);var cte=new Map,lte={activated:!1,tokenObservers:[]},ute={initialized:!1,enabled:!1};function Ti(n){return cte.get(n)||Object.assign({},lte)}function Rj(){return ute}var dte="https://content-firebaseappcheck.googleapis.com/v1";var hte="exchangeDebugToken",Dj={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},o1e=1440*60*1e3;var bC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Nl,this.pending.promise.catch(t=>{}),await fte(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Nl,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function fte(n){return new Promise(e=>{setTimeout(e,n)})}var pte={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},La=new wi("appCheck","AppCheck",pte);function xj(n){if(!Ti(n).activated)throw La.create("use-before-activation",{appName:n.name})}async function Pj({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(f){throw La.create("fetch-network-error",{originalErrorMessage:f?.message})}if(o.status!==200)throw La.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw La.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw La.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function Nj(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dte}/projects/${t}/apps/${r}:${hte}?key=${i}`,body:{debug_token:e}}}var mte="firebase-app-check-database",gte=1,EC="firebase-app-check-store";var Kb=null;function yte(){return Kb||(Kb=new Promise((n,e)=>{try{let t=indexedDB.open(mte,gte);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(La.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(EC,{keyPath:"compositeKey"})}}}catch(t){e(La.create("storage-open",{originalErrorMessage:t?.message}))}}),Kb)}function _te(n,e){return vte(bte(n),e)}async function vte(n,e){let r=(await yte()).transaction(EC,"readwrite"),s=r.objectStore(EC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(La.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function bte(n){return`${n.options.appId}-${n.name}`}var vm=new ts("@firebase/app-check");function _C(n,e){return mm()?_te(n,e).catch(t=>{vm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Mj(){return Rj().enabled}async function kj(){let n=Rj();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Ete={error:"UNKNOWN_ERROR"};function wte(n){return Vb.encodeString(JSON.stringify(n),!1)}async function wC(n,e=!1,t=!1){let r=n.app;xj(r);let i=Ti(r),s=i.token,o;if(s&&!bm(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(bm(l)?s=l:await _C(r,void 0))}if(!e&&s&&bm(s))return{token:s.token};let a=!1;if(Mj())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Pj(Nj(r,await kj()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await _C(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vm.warn(l.message):t&&vm.error(l),vC(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Ti(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vm.warn(l.message):t&&vm.error(l),o=l}let c;return s?o?bm(s)?c={token:s.token,internalError:o}:c=vC(o):(c={token:s.token},i.token=s,await _C(r,s)):c=vC(o),a&&Dte(r,c),c}async function Ite(n){let e=n.app;xj(e);let{provider:t}=Ti(e);if(Mj()){let r=await kj(),{token:i}=await Pj(Nj(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Tte(n,e,t,r){let{app:i}=n,s=Ti(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bm(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),Aj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Aj(n))}function Oj(n,e){let t=Ti(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Aj(n){let{app:e}=n,t=Ti(e),r=t.tokenRefresher;r||(r=Ste(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ste(n){let{app:e}=n;return new bC(async()=>{let t=Ti(e),r;if(t.token?r=await wC(n,!0):r=await wC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Dj.RETRIAL_MIN_WAIT,Dj.RETRIAL_MAX_WAIT)}function Dte(n,e){let t=Ti(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bm(n){return n.expireTimeMillis-Date.now()>0}function vC(n){return{token:wte(Ete),error:n}}var IC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ti(this.app);for(let t of e)Oj(this.app,t.next);return Promise.resolve()}};function Ate(n,e){return new IC(n,e)}function Cte(n){return{getToken:e=>wC(n,e),getLimitedUseToken:()=>Ite(n),addTokenListener:e=>Tte(n,"INTERNAL",e),removeTokenListener:e=>Oj(n.app,e)}}var Rte="@firebase/app-check",xte="0.10.1";var Pte="app-check",Cj="app-check-internal";function Nte(){Ii(new Kn(Pte,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Ate(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Cj).initialize()})),Ii(new Kn(Cj,n=>{let e=n.getProvider("app-check").getImmediate();return Cte(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ct(Rte,xte)}Nte();var Mte="app-check";var Yd=class{constructor(){return Qd(Mte)}};var kte=["localhost","0.0.0.0","127.0.0.1"],_1e=typeof window<"u"&&kte.includes(window.location.hostname);var Lj=()=>{};var Fj=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ote=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fj(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ote(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new SC;let p=s<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let I=l<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},SC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Lte=function(n){let e=Fj(n);return Vj.encodeByteArray(e,!0)},AC=function(n){return Lte(n).replace(/\./g,"")},Qb=function(n){try{return Vj.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Fte=()=>Uj().__FIREBASE_DEFAULTS__,Vte=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ute=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Qb(n[1]);return e&&JSON.parse(e)},jj=()=>{try{return Lj()||Fte()||Vte()||Ute()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var Bj=n=>jj()?.[`_${n}`];function Em(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function jte(){let n=jj()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $j(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hj(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wj(){return!jte()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CC(){try{return typeof indexedDB=="object"}catch{return!1}}function Gj(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Bte="FirebaseError",Kr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Bte,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}},Zs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zte(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kr(i,a,r)}};function zte(n,e){return n.replace($te,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $te=/\{\$([^}]+)}/g;function RC(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kj(n,e){let t=new DC(n,e);return t.subscribe.bind(t)}var DC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Hte(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=TC),i.error===void 0&&(i.error=TC),i.complete===void 0&&(i.complete=TC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Hte(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function TC(){}var I1e=14400*1e3;function Fa(n){return n&&n._delegate?n._delegate:n}var Si=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qte=[],Ue=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ue||{}),Wte={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Gte=Ue.INFO,Kte={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Qte=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Kte[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Va=class{constructor(e){this.name=e,this._logLevel=Gte,this._logHandler=Qte,this._userLogHandler=null,qte.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wte[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}};var PC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yte(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Yte(n){return n.getComponent()?.type==="VERSION"}var NC="@firebase/app",Qj="0.14.6";var to=new Va("@firebase/app"),Xte="@firebase/app-compat",Jte="@firebase/analytics-compat",Zte="@firebase/analytics",ene="@firebase/app-check-compat",tne="@firebase/app-check",nne="@firebase/auth",rne="@firebase/auth-compat",ine="@firebase/database",sne="@firebase/data-connect",one="@firebase/database-compat",ane="@firebase/functions",cne="@firebase/functions-compat",lne="@firebase/installations",une="@firebase/installations-compat",dne="@firebase/messaging",hne="@firebase/messaging-compat",fne="@firebase/performance",pne="@firebase/performance-compat",mne="@firebase/remote-config",gne="@firebase/remote-config-compat",yne="@firebase/storage",_ne="@firebase/storage-compat",vne="@firebase/firestore",bne="@firebase/ai",Ene="@firebase/firestore-compat",wne="firebase",Ine="12.6.0";var Tne={[NC]:"fire-core",[Xte]:"fire-core-compat",[Zte]:"fire-analytics",[Jte]:"fire-analytics-compat",[tne]:"fire-app-check",[ene]:"fire-app-check-compat",[nne]:"fire-auth",[rne]:"fire-auth-compat",[ine]:"fire-rtdb",[sne]:"fire-data-connect",[one]:"fire-rtdb-compat",[ane]:"fire-fn",[cne]:"fire-fn-compat",[lne]:"fire-iid",[une]:"fire-iid-compat",[dne]:"fire-fcm",[hne]:"fire-fcm-compat",[fne]:"fire-perf",[pne]:"fire-perf-compat",[mne]:"fire-rc",[gne]:"fire-rc-compat",[yne]:"fire-gcs",[_ne]:"fire-gcs-compat",[vne]:"fire-fst",[Ene]:"fire-fst-compat",[bne]:"fire-vertex","fire-js":"fire-js",[wne]:"fire-js-all"};var Sne=new Map,Dne=new Map,Yj=new Map;function Xj(n,e){try{n.container.addComponent(e)}catch(t){to.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ua(n){let e=n.name;if(Yj.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;Yj.set(e,n);for(let t of Sne.values())Xj(t,n);for(let t of Dne.values())Xj(t,n);return!0}function no(n){return n==null?!1:n.settings!==void 0}var Ane={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},OC=new Zs("app","Firebase",Ane);var Xd=Ine;function eo(n,e,t){let r=Tne[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(o.join(" "));return}Ua(new Si(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Cne="firebase-heartbeat-database",Rne=1,wm="firebase-heartbeat-store",xC=null;function nB(){return xC||(xC=qb(Cne,Rne,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wm)}catch(t){console.warn(t)}}}}).catch(n=>{throw OC.create("idb-open",{originalErrorMessage:n.message})})),xC}async function xne(n){try{let t=(await nB()).transaction(wm),r=await t.objectStore(wm).get(rB(n));return await t.done,r}catch(e){if(e instanceof Kr)to.warn(e.message);else{let t=OC.create("idb-get",{originalErrorMessage:e?.message});to.warn(t.message)}}}async function Jj(n,e){try{let r=(await nB()).transaction(wm,"readwrite");await r.objectStore(wm).put(e,rB(n)),await r.done}catch(t){if(t instanceof Kr)to.warn(t.message);else{let r=OC.create("idb-set",{originalErrorMessage:t?.message});to.warn(r.message)}}}function rB(n){return`${n.name}!${n.options.appId}`}var Pne=1024,Nne=30,MC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new kC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zj();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Nne){let i=kne(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){to.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Zj(),{heartbeatsToSend:t,unsentEntries:r}=Mne(this._heartbeatsCache.heartbeats),i=AC(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return to.warn(e),""}}};function Zj(){return new Date().toISOString().substring(0,10)}function Mne(n,e=Pne){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eB(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eB(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var kC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CC()?Gj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await xne(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Jj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Jj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function eB(n){return AC(JSON.stringify({version:2,heartbeats:n})).length}function kne(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function One(n){Ua(new Si("platform-logger",e=>new PC(e),"PRIVATE")),Ua(new Si("heartbeat",e=>new MC(e),"PRIVATE")),eo(NC,Qj,n),eo(NC,Qj,"esm2020"),eo("fire-js","")}One("");function dB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hB=dB,fB=new Zs("auth","Firebase",dB());var Zb=new Va("@firebase/auth");function jne(n,...e){Zb.logLevel<=Ue.WARN&&Zb.warn(`Auth (${Xd}): ${n}`,...e)}function Xb(n,...e){Zb.logLevel<=Ue.ERROR&&Zb.error(`Auth (${Xd}): ${n}`,...e)}function iB(n,...e){throw GC(n,...e)}function WC(n,...e){return GC(n,...e)}function pB(n,e,t){let r=Fe($({},hB()),{[e]:t});return new Zs("auth","Firebase",r).create(e,{appName:n.name})}function Jb(n){return pB(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fB.create(n,...e)}function ot(n,e,...t){if(!n)throw GC(e,...t)}function Im(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xb(e),new Error(e)}function eE(n,e){n||Im(e)}function Bne(){return sB()==="http:"||sB()==="https:"}function sB(){return typeof self<"u"&&self.location?.protocol||null}function zne(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bne()||Hj()||"connection"in navigator)?navigator.onLine:!0}function $ne(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ul=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,eE(t>e,"Short delay should be less than long delay!"),this.isMobile=zj()||qj()}get(){return zne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hne(n,e){eE(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var tE=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Im("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Im("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Im("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Wne=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gne=new Ul(3e4,6e4);function mB(n,e){return n.tenantId&&!e.tenantId?Fe($({},e),{tenantId:n.tenantId}):e}async function oE(n,e,t,r,i={}){return gB(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=RC($({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=$({method:e,headers:c},s);return $j()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Em(n.emulatorConfig.host)&&(l.credentials="include"),tE.fetch()(await yB(n,n.config.apiHost,t,a),l)})}async function gB(n,e,t){n._canInitEmulator=!1;let r=$($({},qne),e);try{let i=new VC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Yb(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yb(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yb(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yb(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw pB(n,u,l);iB(n,u)}}catch(i){if(i instanceof Kr)throw i;iB(n,"network-request-failed",{message:String(i)})}}async function yB(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Hne(n.config,i):`${n.config.apiScheme}://${i}`;return Wne.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var VC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(WC(this.auth,"network-request-failed")),Gne.get())})}};function Yb(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=WC(n,e,r);return i.customData._tokenResponse=t,i}async function Kne(n,e){return oE(n,"POST","/v1/accounts:delete",e)}async function nE(n,e){return oE(n,"POST","/v1/accounts:lookup",e)}function Tm(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _B(n,e=!1){let t=Fa(n),r=await t.getIdToken(e),i=vB(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Tm(LC(i.auth_time)),issuedAtTime:Tm(LC(i.iat)),expirationTime:Tm(LC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function LC(n){return Number(n)*1e3}function vB(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xb("JWT malformed, contained fewer than 3 sections"),null;try{let i=Qb(t);return i?JSON.parse(i):(Xb("Failed to decode base64 JWT payload"),null)}catch(i){return Xb("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oB(n){let e=vB(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function UC(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kr&&Qne(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Qne({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var jC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Dm=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tm(this.lastLoginAt),this.creationTime=Tm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function rE(n){let e=n.auth,t=await n.getIdToken(),r=await UC(n,nE(e,{idToken:t}));ot(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?EB(i.providerUserInfo):[],o=Yne(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dm(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function bB(n){let e=Fa(n);await rE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yne(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EB(n){return n.map(r=>{var i=r,{providerId:e}=i,t=$u(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function Xne(n,e){let t=await gB(n,{},async()=>{let r=RC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await yB(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Em(n.emulatorConfig.host)&&(c.credentials="include"),tE.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jne(n,e){return oE(n,"POST","/v2/accounts:revokeToken",mB(n,e))}var Sm=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");let t=oB(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Xne(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ot(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ot(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Im("not implemented")}};function ja(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Fl=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=$u(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await UC(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _B(this,e)}reload(){return bB(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Fe($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rE(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(no(this.auth.app))return Promise.reject(Jb(this.auth));let e=await this.getIdToken();return await UC(this,Kne(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Fe($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:I,stsTokenManager:D}=t;ot(f&&D,e,"internal-error");let S=Sm.fromJSON(this.name,D);ot(typeof f=="string",e,"internal-error"),ja(r,e.name),ja(i,e.name),ot(typeof p=="boolean",e,"internal-error"),ot(typeof m=="boolean",e,"internal-error"),ja(s,e.name),ja(o,e.name),ja(a,e.name),ja(c,e.name),ja(l,e.name),ja(u,e.name);let N=new n({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:S,createdAt:l,lastLoginAt:u});return I&&Array.isArray(I)&&(N.providerData=I.map(M=>$({},M))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,t,r=!1){let i=new Sm;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rE(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ot(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?EB(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Sm;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Dm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var aB=new Map;function Vl(n){eE(n instanceof Function,"Expected a class definition");let e=aB.get(n);return e?(eE(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aB.set(n,e),e)}var Zne=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),BC=Zne;function FC(n,e,t){return`firebase:${n}:${e}:${t}`}var iE=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=FC(this.userKey,i.apiKey,s),this.fullPersistenceKey=FC("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await nE(this.auth,{idToken:e}).catch(()=>{});return t?Fl._fromGetAccountInfoResponse(this.auth,t,e):null}return Fl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Vl(BC),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||Vl(BC),o=FC(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let f;if(typeof u=="string"){let p=await nE(e,{idToken:u}).catch(()=>{});if(!p)break;f=await Fl._fromGetAccountInfoResponse(e,p,u)}else f=Fl._fromJSON(e,u);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function cB(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rre(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ere(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sre(e))return"Blackberry";if(ore(e))return"Webos";if(tre(e))return"Safari";if((e.includes("chrome/")||nre(e))&&!e.includes("edge/"))return"Chrome";if(ire(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ere(n=Lr()){return/firefox\//i.test(n)}function tre(n=Lr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nre(n=Lr()){return/crios\//i.test(n)}function rre(n=Lr()){return/iemobile/i.test(n)}function ire(n=Lr()){return/android/i.test(n)}function sre(n=Lr()){return/blackberry/i.test(n)}function ore(n=Lr()){return/webos/i.test(n)}function wB(n,e=[]){let t;switch(n){case"Browser":t=cB(Lr());break;case"Worker":t=`${cB(Lr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xd}/${r}`}var zC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function are(n,e={}){return oE(n,"GET","/v2/passwordPolicy",mB(n,e))}var cre=6,$C=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??cre,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var HC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sE(this),this.idTokenSubscription=new sE(this),this.beforeStateQueue=new zC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await iE.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await nE(this,{idToken:e}),r=await Fl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(no(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rE(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$ne()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(no(this.app))return Promise.reject(Jb(this));let t=e?Fa(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return no(this.app)?Promise.reject(Jb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return no(this.app)?Promise.reject(Jb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await are(this),t=new $C(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jne(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Vl(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await iE.create(this,[Vl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(no(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&jne(`Error while retrieving App Check token: ${e.error}`),e?.token}};function lre(n){return Fa(n)}var sE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kj(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ure={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dre(n){ure=n}function hre(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function fre(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function KC(n,e,t,r){return Fa(n).onIdTokenChanged(e,t,r)}var J1e=hre("rcb"),Z1e=new Ul(3e4,6e4);var eLe=new Ul(2e3,1e4);var tLe=600*1e3;var nLe=new Ul(3e4,6e4);var rLe=new Ul(5e3,15e3);var iLe=encodeURIComponent("fac");var lB="@firebase/auth",uB="1.11.1";var qC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pre(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mre(n){Ua(new Si("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ot(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wB(n)},l=new HC(r,i,s,c);return fre(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ua(new Si("auth-internal",e=>{let t=lre(e.getProvider("auth").getImmediate());return(r=>new qC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),eo(lB,uB,pre(n)),eo(lB,uB,"esm2020")}var gre=300,sLe=Bj("authIdTokenMaxAge")||gre;function yre(){return document.getElementsByTagName("head")?.[0]??document}dre({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=WC("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",yre().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mre("Browser");function IB(n){return new ue(function(e){var t=KC(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function VB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var UB=VB,jB=new wi("auth","Firebase",VB());var hE=new ts("@firebase/auth");function bre(n,...e){hE.logLevel<=Ve.WARN&&hE.warn(`Auth (${Ma}): ${n}`,...e)}function cE(n,...e){hE.logLevel<=Ve.ERROR&&hE.error(`Auth (${Ma}): ${n}`,...e)}function is(n,...e){throw hR(n,...e)}function Di(n,...e){return hR(n,...e)}function dR(n,e,t){let r=Object.assign(Object.assign({},UB()),{[e]:t});return new wi("auth","Firebase",r).create(e,{appName:n.name})}function jl(n){return dR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ere(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&is(n,"argument-error"),dR(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hR(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jB.create(n,...e)}function _e(n,e,...t){if(!n)throw hR(e,...t)}function ro(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cE(e),new Error(e)}function so(n,e){n||ro(e)}function XC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wre(){return TB()==="http:"||TB()==="https:"}function TB(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Ire(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wre()||tj()||"connection"in navigator)?navigator.onLine:!0}function Tre(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Bl=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,so(t>e,"Short delay should be less than long delay!"),this.isMobile=ZU()||nj()}get(){return Ire()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fR(n,e){so(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fE=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Sre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Dre=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Are=new Bl(3e4,6e4);function pR(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Zd(n,e,t,r,i={}){return BB(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Wd(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return ej()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Pa(n.emulatorConfig.host)&&(l.credentials="include"),fE.fetch()(await zB(n,n.config.apiHost,t,a),l)})}async function BB(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Sre),e);try{let i=new JC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw aE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw aE(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw aE(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw aE(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dR(n,u,l);is(n,u)}}catch(i){if(i instanceof kr)throw i;is(n,"network-request-failed",{message:String(i)})}}async function Cre(n,e,t,r,i={}){let s=await Zd(n,e,t,r,i);return"mfaPendingCredential"in s&&is(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function zB(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?fR(n.config,i):`${n.config.apiScheme}://${i}`;return Dre.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var JC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),Are.get())})}};function aE(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Di(n,e,r);return i.customData._tokenResponse=t,i}async function Rre(n,e){return Zd(n,"POST","/v1/accounts:delete",e)}async function pE(n,e){return Zd(n,"POST","/v1/accounts:lookup",e)}function Am(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mR(n,e=!1){let t=cr(n),r=await t.getIdToken(e),i=gR(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Am(QC(i.auth_time)),issuedAtTime:Am(QC(i.iat)),expirationTime:Am(QC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function QC(n){return Number(n)*1e3}function gR(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cE("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ub(t);return i?JSON.parse(i):(cE("Failed to decode base64 JWT payload"),null)}catch(i){return cE("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SB(n){let e=gR(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Rm(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof kr&&xre(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xre({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ZC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var xm=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Am(this.lastLoginAt),this.creationTime=Am(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function mE(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Rm(n,pE(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$B(s.providerUserInfo):[],a=Pre(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function yR(n){let e=cr(n);await mE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pre(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $B(n){return n.map(e=>{var{providerId:t}=e,r=Zy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Nre(n,e){let t=await BB(n,{},async()=>{let r=Wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await zB(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Pa(n.emulatorConfig.host)&&(c.credentials="include"),fE.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Mre(n,e){return Zd(n,"POST","/v2/accounts:revokeToken",pR(n,e))}var Cm=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=SB(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Nre(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ro("not implemented")}};function Ba(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var za=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Zy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Rm(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mR(this,e)}reload(){return yR(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mE(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(jl(this.auth));let e=await this.getIdToken();return await Rm(this,Rre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=t.photoURL)!==null&&o!==void 0?o:void 0,D=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,N=(l=t.createdAt)!==null&&l!==void 0?l:void 0,M=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:F,emailVerified:j,isAnonymous:z,providerData:B,stsTokenManager:T}=t;_e(F&&T,e,"internal-error");let _=Cm.fromJSON(this.name,T);_e(typeof F=="string",e,"internal-error"),Ba(f,e.name),Ba(p,e.name),_e(typeof j=="boolean",e,"internal-error"),_e(typeof z=="boolean",e,"internal-error"),Ba(m,e.name),Ba(I,e.name),Ba(D,e.name),Ba(S,e.name),Ba(N,e.name),Ba(M,e.name);let b=new n({uid:F,auth:e,email:p,emailVerified:j,displayName:f,isAnonymous:z,photoURL:I,phoneNumber:m,tenantId:D,stsTokenManager:_,createdAt:N,lastLoginAt:M});return B&&Array.isArray(B)&&(b.providerData=B.map(C=>Object.assign({},C))),S&&(b._redirectEventId=S),b}static async _fromIdTokenResponse(e,t,r=!1){let i=new Cm;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mE(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?$B(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Cm;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var DB=new Map;function io(n){so(n instanceof Function,"Expected a class definition");let e=DB.get(n);return e?(so(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DB.set(n,e),e)}var kre=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),eR=kre;function lE(n,e,t){return`firebase:${n}:${e}:${t}`}var gE=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=lE(this.userKey,i.apiKey,s),this.fullPersistenceKey=lE("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await pE(this.auth,{idToken:e}).catch(()=>{});return t?za._fromGetAccountInfoResponse(this.auth,t,e):null}return za._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(io(eR),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||io(eR),o=lE(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let f;if(typeof u=="string"){let p=await pE(e,{idToken:u}).catch(()=>{});if(!p)break;f=await za._fromGetAccountInfoResponse(e,p,u)}else f=za._fromJSON(e,u);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function AB(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QB(e))return"Blackberry";if(YB(e))return"Webos";if(qB(e))return"Safari";if((e.includes("chrome/")||WB(e))&&!e.includes("edge/"))return"Chrome";if(KB(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HB(n=_n()){return/firefox\//i.test(n)}function qB(n=_n()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WB(n=_n()){return/crios\//i.test(n)}function GB(n=_n()){return/iemobile/i.test(n)}function KB(n=_n()){return/android/i.test(n)}function QB(n=_n()){return/blackberry/i.test(n)}function YB(n=_n()){return/webos/i.test(n)}function _R(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ore(n=_n()){var e;return _R(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lre(){return rj()&&document.documentMode===10}function XB(n=_n()){return _R(n)||KB(n)||YB(n)||QB(n)||/windows phone/i.test(n)||GB(n)}function JB(n,e=[]){let t;switch(n){case"Browser":t=AB(_n());break;case"Worker":t=`${AB(_n())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ma}/${r}`}var tR=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Fre(n,e={}){return Zd(n,"GET","/v2/passwordPolicy",pR(n,e))}var Vre=6,nR=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Vre,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rR=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yE(this),this.idTokenSubscription=new yE(this),this.beforeStateQueue=new tR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=io(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await gE.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await pE(this,{idToken:e}),r=await za._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Or(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mE(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Tre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(jl(this));let t=e?cr(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(jl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(jl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(io(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Fre(this),t=new nR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mre(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&io(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await gE.create(this,[io(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&bre(`Error while retrieving App Check token: ${t.error}`),t?.token}};function SE(n){return cr(n)}var yE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aj(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ure(n){vR=n}function jre(n){return vR.loadJS(n)}function Bre(){return vR.gapiScript}function ZB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function bR(n,e){let t=Gd(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(es(s,e??{}))return i;is(i,"already-initialized")}return t.initialize({options:e})}function zre(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(io);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ER(n,e,t){let r=SE(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=ez(e),{host:o,port:a}=$re(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(es(l,r.config.emulator)&&es(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Pa(o)?(Bb(`${s}//${o}${c}`),zb("Auth",!0)):i||Hre()}function ez(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $re(n){let e=ez(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:CB(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:CB(o)}}}function CB(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Hre(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Pm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ro("not implemented")}_getIdTokenResponse(e){return ro("not implemented")}_linkToIdToken(e,t){return ro("not implemented")}_getReauthenticationResolver(e){return ro("not implemented")}};async function Jd(n,e){return Cre(n,"POST","/v1/accounts:signInWithIdp",pR(n,e))}var qre="http://localhost",_E=class n extends Pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Zy(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Jd(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Jd(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Jd(e,t)}buildRequest(){let e={requestUri:qre,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wd(t)}return e}};var Nm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vE=class extends Nm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var wR=(()=>{class n extends vE{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return _E._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Mm=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await za._fromIdTokenResponse(e,r,i),o=RB(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=RB(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function RB(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var iR=class n extends kr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function tz(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?iR._fromErrorAndOperation(n,s,e,r):s})}async function Wre(n,e,t=!1){let r=await Rm(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mm._forOperation(n,"link",r)}async function Gre(n,e,t=!1){let{auth:r}=n;if(Or(r.app))return Promise.reject(jl(r));let i="reauthenticate";try{let s=await Rm(n,tz(r,i,e,n),t);_e(s.idToken,r,"internal-error");let o=gR(s.idToken);_e(o,r,"internal-error");let{sub:a}=o;return _e(n.uid===a,r,"user-mismatch"),Mm._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&is(r,"user-mismatch"),s}}async function Kre(n,e,t=!1){if(Or(n.app))return Promise.reject(jl(n));let r="signIn",i=await tz(n,r,e),s=await Mm._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function IR(n,e,t,r){return cr(n).onIdTokenChanged(e,t,r)}function TR(n,e,t){return cr(n).beforeAuthStateChanged(e,t)}function SR(n){return cr(n).signOut()}var bE="__sak";var EE=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bE,"1"),this.storage.removeItem(bE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Qre=1e3,Yre=10,Xre=(()=>{class n extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XB(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Lre()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Yre):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Qre)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),nz=Xre;var Jre=(()=>{class n extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),DR=Jre;function Zre(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var eie=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async u=>u(r.origin,o)),l=await Zre(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function AR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sR=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=AR("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let p=f;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function rs(){return window}function tie(n){rs().location.href=n}function rz(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function nie(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rie(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iie(){return rz()?self:null}var iz="firebaseLocalStorageDb",sie=1,wE="firebaseLocalStorage",sz="fbase_key",zl=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function DE(n,e){return n.transaction([wE],e?"readwrite":"readonly").objectStore(wE)}function oie(){let n=indexedDB.deleteDatabase(iz);return new zl(n).toPromise()}function oR(){let n=indexedDB.open(iz,sie);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(wE,{keyPath:sz})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(wE)?e(r):(r.close(),await oie(),e(await oR()))})})}async function xB(n,e,t){let r=DE(n,!0).put({[sz]:e,value:t});return new zl(r).toPromise()}async function aie(n,e){let t=DE(n,!1).get(e),r=await new zl(t).toPromise();return r===void 0?null:r.value}function PB(n,e){let t=DE(n,!0).delete(e);return new zl(t).toPromise()}var cie=800,lie=3,uie=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oR(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>lie)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eie._getInstance(iie()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await nie(),!this.activeServiceWorker)return;this.sender=new sR(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||rie()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await oR();return await xB(t,bE,"1"),await PB(t,bE),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>xB(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>aie(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>PB(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=DE(s,!1).getAll();return new zl(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),oz=uie;var YFe=ZB("rcb"),XFe=new Bl(3e4,6e4);function az(n,e){return e?io(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var km=class extends Pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function die(n){return Kre(n.auth,new km(n),n.bypassAuthState)}function hie(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),Gre(t,new km(n),n.bypassAuthState)}async function fie(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),Wre(t,new km(n),n.bypassAuthState)}var IE=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return die;case"linkViaPopup":case"linkViaRedirect":return fie;case"reauthViaPopup":case"reauthViaRedirect":return hie;default:is(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pie=new Bl(2e3,1e4);async function CR(n,e,t){if(Or(n.app))return Promise.reject(Di(n,"operation-not-supported-in-this-environment"));let r=SE(n);Ere(n,e,Nm);let i=az(r,t);return new mie(r,"signInViaPopup",e,i).executeNotNull()}var mie=(()=>{class n extends IE{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return _e(t,this.auth,"internal-error"),t}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");let t=AR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,pie.get())};t()}}n.currentPopupAction=null;return n})(),gie="pendingRedirect",uE=new Map,aR=class extends IE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=uE.get(this.auth._key());if(!e){try{let r=await yie(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}uE.set(this.auth._key(),e)}return this.bypassAuthState||uE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function yie(n,e){let t=bie(e),r=vie(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function _ie(n,e){uE.set(n._key(),e)}function vie(n){return io(n._redirectPersistence)}function bie(n){return lE(gie,n.config.apiKey,n.name)}async function Eie(n,e,t=!1){if(Or(n.app))return Promise.reject(jl(n));let r=SE(n),i=az(r,e),o=await new aR(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var wie=600*1e3,cR=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Iie(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!cz(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wie&&this.cachedEventUids.clear(),this.cachedEventUids.has(NB(e))}saveEventToCache(e){this.cachedEventUids.add(NB(e)),this.lastProcessedEventTime=Date.now()}};function NB(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cz({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Iie(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cz(n);default:return!1}}async function Tie(n,e={}){return Zd(n,"GET","/v1/projects",e)}var Sie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Die=/^https?/;async function Aie(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Tie(n);for(let t of e)try{if(Cie(t))return}catch{}is(n,"unauthorized-domain")}function Cie(n){let e=XC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Die.test(t))return!1;if(Sie.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Rie=new Bl(3e4,6e4);function MB(){let n=rs().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xie(n){return new Promise((e,t)=>{var r,i,s;function o(){MB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MB(),t(Di(n,"network-request-failed"))},timeout:Rie.get()})}if(!((i=(r=rs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rs().gapi)===null||s===void 0)&&s.load)o();else{let a=ZB("iframefcb");return rs()[a]=()=>{gapi.load?o():t(Di(n,"network-request-failed"))},jre(`${Bre()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw dE=null,e})}var dE=null;function Pie(n){return dE=dE||xie(n),dE}var Nie=new Bl(5e3,15e3),Mie="__/auth/iframe",kie="emulator/auth/iframe",Oie={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lie=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fie(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?fR(e,kie):`https://${n.config.authDomain}/${Mie}`,r={apiKey:e.apiKey,appName:n.name,v:Ma},i=Lie.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Wd(r).slice(1)}`}async function Vie(n){let e=await Pie(n),t=rs().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Fie(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oie,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Di(n,"network-request-failed"),a=rs().setTimeout(()=>{s(o)},Nie.get());function c(){rs().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Uie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jie=500,Bie=600,zie="_blank",$ie="http://localhost",TE=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Hie(n,e,t,r=jie,i=Bie){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Uie),{width:r.toString(),height:i.toString(),top:s,left:o}),l=_n().toLowerCase();t&&(a=WB(l)?zie:t),HB(l)&&(e=e||$ie,c.scrollbars="yes");let u=Object.entries(c).reduce((p,[m,I])=>`${p}${m}=${I},`,"");if(Ore(l)&&a!=="_self")return qie(e||"",a),new TE(null);let f=window.open(e||"",a,u);_e(f,n,"popup-blocked");try{f.focus()}catch{}return new TE(f)}function qie(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Wie="__/auth/handler",Gie="emulator/auth/handler",Kie=encodeURIComponent("fac");async function kB(n,e,t,r,i,s){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ma,eventId:i};if(e instanceof Nm){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",oj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,f]of Object.entries(s||{}))o[u]=f}if(e instanceof vE){let u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=await n._getAppCheckToken(),l=c?`#${Kie}=${encodeURIComponent(c)}`:"";return`${Qie(n)}?${Wd(a).slice(1)}${l}`}function Qie({config:n}){return n.emulator?fR(n,Gie):`https://${n.authDomain}/${Wie}`}var YC="webStorageSupport",lR=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DR,this._completeRedirectFn=Eie,this._overrideRedirectResult=_ie}async _openPopup(e,t,r,i){var s;so((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await kB(e,t,r,XC(),i);return Hie(e,o,AR())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await kB(e,t,r,XC(),i);return tie(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(so(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await Vie(e),r=new cR(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(YC,{type:YC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[YC];o!==void 0&&t(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Aie(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XB()||qB()||_R()}},lz=lR;var OB="@firebase/auth",LB="1.10.8";var uR=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Yie(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xie(n){Ii(new Kn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JB(n)},l=new rR(r,i,s,c);return zre(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new Kn("auth-internal",e=>{let t=SE(e.getProvider("auth").getImmediate());return(r=>new uR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(OB,LB,Yie(n)),Ct(OB,LB,"esm2017")}var Jie=300,Zie=tC("authIdTokenMaxAge")||Jie,FB=null,ese=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zie)return;let i=t?.token;FB!==i&&(FB=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function RR(n=kl()){let e=Gd(n,"auth");if(e.isInitialized())return e.getImmediate();let t=bR(n,{popupRedirectResolver:lz,persistence:[oz,nz,DR]}),r=tC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=ese(s.toString());TR(t,o,()=>o(t.currentUser)),IR(t,a=>o(a))}}let i=ZA("auth");return i&&ER(t,`http://${i}`),t}function tse(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Ure({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Di("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",tse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xie("Browser");var uz="auth",oo=class{constructor(e){return e}},Om=class{constructor(){return Qd(uz)}};var xR=new J("angularfire2.auth-instances");function Wse(n,e){let t=_m(uz,n,e);return t&&new oo(t)}function Gse(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var Kse={provide:Om,deps:[[new sr,xR]]},Qse={provide:oo,useFactory:Wse,deps:[[new sr,xR],Js]};function dz(n,...e){return Ct("angularfire",ka.full,"auth"),mn([Qse,Kse,{provide:xR,useFactory:Gse(n),multi:!0,deps:[Pe,_t,Oa,Ll,[new sr,Yd],...e]}])}var AE=lr(IB,!0);var hz=lr(RR,!0);var fz=lr(CR,!0,2);var pz=lr(SR,!0,2);var mz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gz={};var ao,PR;(function(){var n;function e(T,_){function b(){}b.prototype=_.prototype,T.F=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.D=function(C,A,R){for(var w=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)w[Oe-2]=arguments[Oe];return _.prototype[A].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,b){b||(b=0);let C=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)C[A]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(A=0;A<16;++A)C[A]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],A=T.g[2];let R=T.g[3],w;w=_+(R^b&(A^R))+C[0]+3614090360&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[1]+3905402710&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[2]+606105819&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[3]+3250441966&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[4]+4118548399&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[5]+1200080426&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[6]+2821735955&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[7]+4249261313&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[8]+1770035416&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[9]+2336552879&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[10]+4294925233&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[11]+2304563134&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[12]+1804603682&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[13]+4254626195&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[14]+2792965006&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[15]+1236535329&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(A^R&(b^A))+C[1]+4129170786&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[6]+3225465664&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[11]+643717713&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[0]+3921069994&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[5]+3593408605&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[10]+38016083&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[15]+3634488961&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[4]+3889429448&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[9]+568446438&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[14]+3275163606&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[3]+4107603335&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[8]+1163531501&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[13]+2850285829&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[2]+4243563512&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[7]+1735328473&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[12]+2368359562&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(b^A^R)+C[5]+4294588738&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[8]+2272392833&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[11]+1839030562&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[14]+4259657740&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[1]+2763975236&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[4]+1272893353&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[7]+4139469664&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[10]+3200236656&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[13]+681279174&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[0]+3936430074&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[3]+3572445317&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[6]+76029189&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[9]+3654602809&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[12]+3873151461&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[15]+530742520&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[2]+3299628645&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(A^(b|~R))+C[0]+4096336452&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[7]+1126891415&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[14]+2878612391&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[5]+4237533241&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[12]+1700485571&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[3]+2399980690&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[10]+4293915773&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[1]+2240044497&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[8]+1873313359&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[15]+4264355552&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[6]+2734768916&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[13]+1309151649&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[4]+4149444226&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[11]+3174756917&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[2]+718787259&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);let b=_-this.blockSize,C=this.C,A=this.h,R=0;for(;R<_;){if(A==0)for(;R<=b;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(C[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,C),A=0;break}}else for(;R<_;)if(C[A++]=T[R++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var b=T.length-8;b<T.length;++b)T[b]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,b=0;b<4;++b)for(let C=0;C<32;C+=8)T[_++]=this.g[b]>>>C&255;return T};function s(T,_){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function o(T,_){this.h=_;let b=[],C=!0;for(let A=T.length-1;A>=0;A--){let R=T[A]|0;C&&R==_||(b[A]=R,C=!1)}this.g=b}var a={};function c(T){return-128<=T&&T<128?s(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return S(l(-T));let _=[],b=1;for(let C=0;T>=b;C++)_[C]=T/b|0,b*=4294967296;return new o(_,0)}function u(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(u(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let b=l(Math.pow(_,8)),C=f;for(let R=0;R<T.length;R+=8){var A=Math.min(8,T.length-R);let w=parseInt(T.substring(R,R+A),_);A<8?(A=l(Math.pow(_,A)),C=C.j(A).add(l(w))):(C=C.j(b),C=C.add(l(w)))}return C}var f=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-S(this).m();let T=0,_=1;for(let b=0;b<this.g.length;b++){let C=this.i(b);T+=(C>=0?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(D(this))return"-"+S(this).toString(T);let _=l(Math.pow(T,6));var b=this;let C="";for(;;){let A=j(b,_).g;b=N(b,A.j(_));let R=((b.g.length>0?b.g[0]:b.h)>>>0).toString(T);if(b=A,I(b))return R+C;for(;R.length<6;)R="0"+R;C=R+C}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function D(T){return T.h==-1}n.l=function(T){return T=N(this,T),D(T)?-1:I(T)?0:1};function S(T){let _=T.g.length,b=[];for(let C=0;C<_;C++)b[C]=~T.g[C];return new o(b,~T.h).add(p)}n.abs=function(){return D(this)?S(this):this},n.add=function(T){let _=Math.max(this.g.length,T.g.length),b=[],C=0;for(let A=0;A<=_;A++){let R=C+(this.i(A)&65535)+(T.i(A)&65535),w=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=w>>>16,R&=65535,w&=65535,b[A]=w<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function N(T,_){return T.add(S(_))}n.j=function(T){if(I(this)||I(T))return f;if(D(this))return D(T)?S(this).j(S(T)):S(S(this).j(T));if(D(T))return S(this.j(S(T)));if(this.l(m)<0&&T.l(m)<0)return l(this.m()*T.m());let _=this.g.length+T.g.length,b=[];for(var C=0;C<2*_;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<T.g.length;A++){let R=this.i(C)>>>16,w=this.i(C)&65535,Oe=T.i(A)>>>16,Ce=T.i(A)&65535;b[2*C+2*A]+=w*Ce,M(b,2*C+2*A),b[2*C+2*A+1]+=R*Ce,M(b,2*C+2*A+1),b[2*C+2*A+1]+=w*Oe,M(b,2*C+2*A+1),b[2*C+2*A+2]+=R*Oe,M(b,2*C+2*A+2)}for(T=0;T<_;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=_;T<2*_;T++)b[T]=0;return new o(b,0)};function M(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function F(T,_){this.g=T,this.h=_}function j(T,_){if(I(_))throw Error("division by zero");if(I(T))return new F(f,f);if(D(T))return _=j(S(T),_),new F(S(_.g),S(_.h));if(D(_))return _=j(T,S(_)),new F(S(_.g),_.h);if(T.g.length>30){if(D(T)||D(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,C=_;C.l(T)<=0;)b=z(b),C=z(C);var A=B(b,1),R=B(C,1);for(C=B(C,2),b=B(b,2);!I(C);){var w=R.add(C);w.l(T)<=0&&(A=A.add(b),R=w),C=B(C,1),b=B(b,1)}return _=N(T,A.j(_)),new F(A,_)}for(A=f;T.l(_)>=0;){for(b=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),R=l(b),w=R.j(_);D(w)||w.l(T)>0;)b-=C,R=l(b),w=R.j(_);I(R)&&(R=p),A=A.add(R),T=N(T,w)}return new F(A,T)}n.B=function(T){return j(this,T).h},n.and=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<_;C++)b[C]=this.i(C)&T.i(C);return new o(b,this.h&T.h)},n.or=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<_;C++)b[C]=this.i(C)|T.i(C);return new o(b,this.h|T.h)},n.xor=function(T){let _=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<_;C++)b[C]=this.i(C)^T.i(C);return new o(b,this.h^T.h)};function z(T){let _=T.g.length+1,b=[];for(let C=0;C<_;C++)b[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(b,T.h)}function B(T,_){let b=_>>5;_%=32;let C=T.g.length-b,A=[];for(let R=0;R<C;R++)A[R]=_>0?T.i(R+b)>>>_|T.i(R+b+1)<<32-_:T.i(R+b);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PR=gz.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,ao=gz.Integer=o}).apply(typeof mz<"u"?mz:typeof self<"u"?self:typeof window<"u"?window:{});var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},co={};var NR,Xse,eh,MR,Lm,RE,kR,OR,LR;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof CE=="object"&&CE];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(h,y){if(y)e:{var E=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var k=h[P];if(!(k in E))break e;E=E[k]}h=h[h.length-1],P=E[h],y=y(P),y!=P&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(y){var E=[],P;for(P in y)Object.prototype.hasOwnProperty.call(y,P)&&E.push([P,y[P]]);return E}});var s=s||{},o=this||self;function a(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function c(h,y,E){return h.call.apply(h.bind,arguments)}function l(h,y,E){return l=c,l.apply(null,arguments)}function u(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function f(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(P,k,V){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return y.prototype[k].apply(P,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function m(h){let y=h.length;if(y>0){let E=Array(y);for(let P=0;P<y;P++)E[P]=h[P];return E}return[]}function I(h,y){for(let P=1;P<arguments.length;P++){let k=arguments[P];var E=typeof k;if(E=E!="object"?E:k?Array.isArray(k)?"array":E:"null",E=="array"||E=="object"&&typeof k.length=="number"){E=h.length||0;let V=k.length||0;h.length=E+V;for(let X=0;X<V;X++)h[E+X]=k[X]}else h.push(k)}}class D{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function S(h){o.setTimeout(()=>{throw h},0)}function N(){var h=T;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class M{constructor(){this.h=this.g=null}add(y,E){let P=F.get();P.set(y,E),this.h?this.h.next=P:this.g=P,this.h=P}}var F=new D(()=>new j,h=>h.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let z,B=!1,T=new M,_=()=>{let h=Promise.resolve(void 0);z=()=>{h.then(b)}};function b(){for(var h;h=N();){try{h.h.call(h.g)}catch(E){S(E)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}B=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let E=()=>{};o.addEventListener("test",E,y),o.removeEventListener("test",E,y)}catch{}return h})();function w(h){return/^[\s\xa0]*$/.test(h)}function Oe(h,y){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}f(Oe,A),Oe.prototype.init=function(h,y){let E=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);let h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ee(h,y,E,P,k){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!P,this.ha=k,this.key=++Y,this.da=this.fa=!1}function re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h,y,E){for(let P in h)y.call(E,h[P],P,h)}function at(h,y){for(let E in h)y.call(void 0,h[E],E,h)}function zt(h){let y={};for(let E in h)y[E]=h[E];return y}let Ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(h,y){let E,P;for(let k=1;k<arguments.length;k++){P=arguments[k];for(E in P)h[E]=P[E];for(let V=0;V<Ze.length;V++)E=Ze[V],Object.prototype.hasOwnProperty.call(P,E)&&(h[E]=P[E])}}function Le(h){this.src=h,this.g={},this.h=0}Le.prototype.add=function(h,y,E,P,k){let V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);let X=Vn(h,y,P,k);return X>-1?(y=h[X],E||(y.fa=!1)):(y=new ee(y,this.src,V,!!P,k),y.fa=E,h.push(y)),y};function dn(h,y){let E=y.type;if(E in h.g){var P=h.g[E],k=Array.prototype.indexOf.call(P,y,void 0),V;(V=k>=0)&&Array.prototype.splice.call(P,k,1),V&&(re(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Vn(h,y,E,P){for(let k=0;k<h.length;++k){let V=h[k];if(!V.da&&V.listener==y&&V.capture==!!E&&V.ha==P)return k}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),vr={};function wn(h,y,E,P,k){if(P&&P.once)return vu(h,y,E,P,k);if(Array.isArray(y)){for(let V=0;V<y.length;V++)wn(h,y[V],E,P,k);return null}return E=Iu(E),h&&h[Ce]?h.J(y,E,a(P)?!!P.capture:!!P,k):Vr(h,y,E,!1,P,k)}function Vr(h,y,E,P,k,V){if(!y)throw Error("Invalid event type");let X=a(k)?!!k.capture:!!k,ye=wu(h);if(ye||(h[yt]=ye=new Le(h)),E=ye.add(y,E,P,X,V),E.proxy)return E;if(P=ki(),E.proxy=P,P.src=h,P.listener=E,h.addEventListener)R||(k=X),k===void 0&&(k=!1),h.addEventListener(y.toString(),P,k);else if(h.attachEvent)h.attachEvent(Eu(y.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ki(){function h(E){return y.call(h.src,h.listener,E)}let y=hy;return h}function vu(h,y,E,P,k){if(Array.isArray(y)){for(let V=0;V<y.length;V++)vu(h,y[V],E,P,k);return null}return E=Iu(E),h&&h[Ce]?h.K(y,E,a(P)?!!P.capture:!!P,k):Vr(h,y,E,!0,P,k)}function bu(h,y,E,P,k){if(Array.isArray(y))for(var V=0;V<y.length;V++)bu(h,y[V],E,P,k);else P=a(P)?!!P.capture:!!P,E=Iu(E),h&&h[Ce]?(h=h.i,V=String(y).toString(),V in h.g&&(y=h.g[V],E=Vn(y,E,P,k),E>-1&&(re(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[V],h.h--)))):h&&(h=wu(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Vn(y,E,P,k)),(E=h>-1?y[h]:null)&&Tc(E))}function Tc(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ce])dn(y.i,h);else{var E=h.type,P=h.proxy;y.removeEventListener?y.removeEventListener(E,P,h.capture):y.detachEvent?y.detachEvent(Eu(E),P):y.addListener&&y.removeListener&&y.removeListener(P),(E=wu(y))?(dn(E,h),E.h==0&&(E.src=null,y[yt]=null)):re(h)}}}function Eu(h){return h in vr?vr[h]:vr[h]="on"+h}function hy(h,y){if(h.da)h=!0;else{y=new Oe(y,this);let E=h.listener,P=h.ha||h.src;h.fa&&Tc(h),h=E.call(P,y)}return h}function wu(h){return h=h[yt],h instanceof Le?h:null}var Df="__closure_events_fn_"+(Math.random()*1e9>>>0);function Iu(h){return typeof h=="function"?h:(h[Df]||(h[Df]=function(y){return h.handleEvent(y)}),h[Df])}function en(){C.call(this),this.i=new Le(this),this.M=this,this.G=null}f(en,C),en.prototype[Ce]=!0,en.prototype.removeEventListener=function(h,y,E,P){bu(this,h,y,E,P)};function tn(h,y){var E,P=h.G;if(P)for(E=[];P;P=P.G)E.push(P);if(h=h.M,P=y.type||y,typeof y=="string")y=new A(y,h);else if(y instanceof A)y.target=y.target||h;else{var k=y;y=new A(P,h),$e(y,k)}k=!0;let V,X;if(E)for(X=E.length-1;X>=0;X--)V=y.g=E[X],k=Sc(V,P,!0,y)&&k;if(V=y.g=h,k=Sc(V,P,!0,y)&&k,k=Sc(V,P,!1,y)&&k,E)for(X=0;X<E.length;X++)V=y.g=E[X],k=Sc(V,P,!1,y)&&k}en.prototype.N=function(){if(en.Z.N.call(this),this.i){var h=this.i;for(let y in h.g){let E=h.g[y];for(let P=0;P<E.length;P++)re(E[P]);delete h.g[y],h.h--}}this.G=null},en.prototype.J=function(h,y,E,P){return this.i.add(String(h),y,!1,E,P)},en.prototype.K=function(h,y,E,P){return this.i.add(String(h),y,!0,E,P)};function Sc(h,y,E,P){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let k=!0;for(let V=0;V<y.length;++V){let X=y[V];if(X&&!X.da&&X.capture==E){let ye=X.listener,d=X.ha||X.src;X.fa&&dn(h.i,X),k=ye.call(d,P)!==!1&&k}}return k&&!P.defaultPrevented}function TT(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=l(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(h,y||0)}function Tu(h){h.g=TT(()=>{h.g=null,h.i&&(h.i=!1,Tu(h))},h.l);let y=h.h;h.h=null,h.m.apply(null,y)}class Af extends C{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(h){C.call(this),this.h=h,this.g={}}f(Is,C);var nn=[];function hn(h){ge(h.g,function(y,E){this.g.hasOwnProperty(E)&&Tc(y)},h),h.g={}}Is.prototype.N=function(){Is.Z.N.call(this),hn(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=o.JSON.stringify,fy=o.JSON.parse,py=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function my(){}function Oo(){}var Lo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Su(){A.call(this,"d")}f(Su,A);function Dc(){A.call(this,"c")}f(Dc,A);var Ts={},gy=null;function Fo(){return gy=gy||new en}Ts.Ia="serverreachability";function Cf(h){A.call(this,Ts.Ia,h)}f(Cf,A);function Vo(h){let y=Fo();tn(y,new Cf(y))}Ts.STAT_EVENT="statevent";function Uo(h,y){A.call(this,Ts.STAT_EVENT,h),this.stat=y}f(Uo,A);function rn(h){let y=Fo();tn(y,new Uo(y,h))}Ts.Ja="timingevent";function Du(h,y){A.call(this,Ts.Ja,h),this.size=y}f(Du,A);function br(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},y)}function jo(){this.g=!0}jo.prototype.ua=function(){this.g=!1};function Au(h,y,E,P,k,V){h.info(function(){if(h.g)if(V){var X="",ye=V.split("&");for(let g=0;g<ye.length;g++){var d=ye[g].split("=");if(d.length>1){let v=d[0];d=d[1];let x=v.split("_");X=x.length>=2&&x[1]=="type"?X+(v+"="+d+"&"):X+(v+"=redacted&")}}}else X=null;else X=V;return"XMLHTTP REQ ("+P+") [attempt "+k+"]: "+y+`
`+E+`
`+X})}function yy(h,y,E,P,k,V,X){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+k+"]: "+y+`
`+E+`
`+V+" "+X})}function Ur(h,y,E,P){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+In(h,E)+(P?" "+P:"")})}function _y(h,y){h.info(function(){return"TIMEOUT: "+y})}jo.prototype.info=function(){};function In(h,y){if(!h.g)return y;if(!y)return null;try{let V=JSON.parse(y);if(V){for(h=0;h<V.length;h++)if(Array.isArray(V[h])){var E=V[h];if(!(E.length<2)){var P=E[1];if(Array.isArray(P)&&!(P.length<1)){var k=P[0];if(k!="noop"&&k!="stop"&&k!="close")for(let X=1;X<P.length;X++)P[X]=""}}}}return ko(V)}catch{return y}}var Ac={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zo;function Rf(){}f(Rf,my),Rf.prototype.g=function(){return new XMLHttpRequest},zo=new Rf;function Cc(h){return encodeURIComponent(String(h))}function $o(h){var y=1;h=h.split(":");let E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function Oi(h,y,E,P){this.j=h,this.i=y,this.l=E,this.S=P||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vy}function vy(){this.i=null,this.g="",this.h=!1}var Rc={},Cu={};function xc(h,y,E){h.M=1,h.A=kc(Er(y)),h.u=E,h.R=!0,Pc(h,null)}function Pc(h,y){h.F=Date.now(),Ho(h),h.B=Er(h.A);var E=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),Sy(E.i,"t",P),h.C=0,E=h.j.L,h.h=new vy,h.g=Bu(h.j,E?y:null,!h.u),h.P>0&&(h.O=new Af(l(h.Y,h,h.g),h.P)),y=h.V,E=h.g,P=h.ba;var k="readystatechange";Array.isArray(k)||(k&&(nn[0]=k.toString()),k=nn);for(let V=0;V<k.length;V++){let X=wn(E,k[V],P||y.handleEvent,!1,y.h||y);if(!X)break;y.g[X.key]=X}y=h.J?zt(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Vo(),Au(h.i,h.v,h.B,h.l,h.S,h.u)}Oi.prototype.ba=function(h){h=h.target;let y=this.O;y&&rt(h)==3?y.j():this.Y(h)},Oi.prototype.Y=function(h){try{if(h==this.g)e:{let ye=rt(this.g),d=this.g.ya(),g=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Ny(this.g)))){this.K||ye!=4||d==7||(d==8||g<=0?Vo(3):Vo(2)),xu(this);var y=this.g.ca();this.X=y;var E=Li(this);if(this.o=y==200,yy(this.i,this.v,this.B,this.l,this.S,ye,y),this.o){if(this.U&&!this.L){t:{if(this.g){var P,k=this.g;if((P=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(P)){var V=P;break t}}V=null}if(h=V)Ur(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wo(this,h);else{this.o=!1,this.m=3,rn(12),Ss(this),qo(this);break e}}if(this.R){h=!0;let v;for(;!this.K&&this.C<E.length;)if(v=by(this,E),v==Cu){ye==4&&(this.m=4,rn(14),h=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(v==Rc){this.m=4,rn(15),Ur(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Ur(this.i,this.l,v,null),Wo(this,v);if(xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||E.length!=0||this.h.h||(this.m=1,rn(16),h=!1),this.o=this.o&&h,!h)Ur(this.i,this.l,E,"[Invalid Chunked Response]"),Ss(this),qo(this);else if(E.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Vu(X),X.P=!0,rn(11))}}else Ur(this.i,this.l,E,null),Wo(this,E);ye==4&&Ss(this),this.o&&!this.K&&(ye==4?$f(this.j,this):(this.o=!1,Ho(this)))}else ST(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Ss(this),qo(this)}}}catch{}finally{}};function Li(h){if(!xf(h))return h.g.la();let y=Ny(h.g);if(y==="")return"";let E="",P=y.length,k=rt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ss(h),qo(h),"";h.h.i=new o.TextDecoder}for(let V=0;V<P;V++)h.h.h=!0,E+=h.h.i.decode(y[V],{stream:!(k&&V==P-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function xf(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function by(h,y){var E=h.C,P=y.indexOf(`
`,E);return P==-1?Cu:(E=Number(y.substring(E,P)),isNaN(E)?Rc:(P+=1,P+E>y.length?Cu:(y=y.slice(P,P+E),h.C=P+E,y)))}Oi.prototype.cancel=function(){this.K=!0,Ss(this)};function Ho(h){h.T=Date.now()+h.H,Ru(h,h.H)}function Ru(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=br(l(h.aa,h),y)}function xu(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Oi.prototype.aa=function(){this.D=null;let h=Date.now();h-this.T>=0?(_y(this.i,this.B),this.M!=2&&(Vo(),rn(17)),Ss(this),this.m=2,qo(this)):Ru(this,this.T-h)};function qo(h){h.j.I==0||h.K||$f(h.j,h)}function Ss(h){xu(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,hn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Wo(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Nc(E.h,h))){if(!h.L&&Nc(E.h,h)&&E.I==3){try{var P=E.Ba.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var k=P;if(k[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Uu(E),Ds(E);else break e;ea(E),rn(18)}}else E.xa=k[1],0<E.xa-E.K&&k[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=br(l(E.Va,E),6e3));Fi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ui(E,11)}else if((h.L||E.g==h)&&Uu(E),!w(y))for(k=E.Ba.g.parse(y),y=0;y<k.length;y++){let g=k[y],v=g[0];if(!(v<=E.K))if(E.K=v,g=g[1],E.I==2)if(g[0]=="c"){E.M=g[1],E.ba=g[2];let x=g[3];x!=null&&(E.ka=x,E.j.info("VER="+E.ka));let L=g[4];L!=null&&(E.za=L,E.j.info("SVER="+E.za));let U=g[5];U!=null&&typeof U=="number"&&U>0&&(P=1.5*U,E.O=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;let K=h.g;if(K){let et=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(et){var V=P.h;V.g||et.indexOf("spdy")==-1&&et.indexOf("quic")==-1&&et.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Pf(V,V.h),V.h=null))}if(P.G){let Mt=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Mt&&(P.wa=Mt,dt(P.J,P.G,Mt))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),P=E;var X=h;if(P.na=ju(P,P.L?P.ba:null,P.W),X.L){Nf(P.h,X);var ye=X,d=P.O;d&&(ye.H=d),ye.D&&(xu(ye),Ho(ye)),P.g=X}else Fu(P);E.i.length>0&&Jn(E)}else g[0]!="stop"&&g[0]!="close"||Ui(E,7);else E.I==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?Ui(E,7):Lu(E):g[0]!="noop"&&E.l&&E.l.qa(g),E.A=0)}}Vo(4)}catch{}}var Ey=class{constructor(h,y){this.g=h,this.map=y}};function Pu(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Go(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Fi(h){return h.h?1:h.g?h.g.size:0}function Nc(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Pf(h,y){h.g?h.g.add(y):h.h=y}function Nf(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Pu.prototype.cancel=function(){if(this.i=Mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function Mf(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(let E of h.g.values())y=y.concat(E.G);return y}return m(h.i)}var kf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Of(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){let P=h[E].indexOf("="),k,V=null;P>=0?(k=h[E].substring(0,P),V=h[E].substring(P+1)):k=h[E],y(k,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function jr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof jr?(this.l=h.l,Ko(this,h.j),this.o=h.o,this.g=h.g,Mc(this,h.u),this.h=h.h,Lf(this,Dy(h.i)),this.m=h.m):h&&(y=String(h).match(kf))?(this.l=!1,Ko(this,y[1]||"",!0),this.o=Oc(y[2]||""),this.g=Oc(y[3]||"",!0),Mc(this,y[4]),this.h=Oc(y[5]||"",!0),Lf(this,y[6]||"",!0),this.m=Oc(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}jr.prototype.toString=function(){let h=[];var y=this.j;y&&h.push(wr(y,Lc,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(wr(y,Lc,!0),"@"),h.push(Cc(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(wr(E,E.charAt(0)=="/"?wy:Nu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",wr(E,Mu)),h.join("")},jr.prototype.resolve=function(h){let y=Er(this),E=!!h.j;E?Ko(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var P=h.h;if(E)Mc(y,h.u);else if(E=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var k=y.h.lastIndexOf("/");k!=-1&&(P=y.h.slice(0,k+1)+P)}if(k=P,k==".."||k==".")P="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){P=k.lastIndexOf("/",0)==0,k=k.split("/");let V=[];for(let X=0;X<k.length;){let ye=k[X++];ye=="."?P&&X==k.length&&V.push(""):ye==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),P&&X==k.length&&V.push("")):(V.push(ye),P=!0)}P=V.join("/")}else P=k}return E?y.h=P:E=h.i.toString()!=="",E?Lf(y,Dy(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Er(h){return new jr(h)}function Ko(h,y,E){h.j=E?Oc(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mc(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Lf(h,y,E){y instanceof ni?(h.i=y,Fc(h.i,h.l)):(E||(y=wr(y,pt)),h.i=new ni(y,h.l))}function dt(h,y,E){h.i.set(y,E)}function kc(h){return dt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Oc(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function wr(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,ti),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ti(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Lc=/[#\/\?@]/g,Nu=/[#\?:]/g,wy=/[#\?]/g,pt=/[#\?@]/g,Mu=/#/g;function ni(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Ir(h){h.g||(h.g=new Map,h.h=0,h.i&&Of(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=ni.prototype,n.add=function(h,y){Ir(this),this.i=null,h=Qo(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Iy(h,y){Ir(h),y=Qo(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ff(h,y){return Ir(h),y=Qo(h,y),h.g.has(y)}n.forEach=function(h,y){Ir(this),this.g.forEach(function(E,P){E.forEach(function(k){h.call(y,k,P,this)},this)},this)};function Ty(h,y){Ir(h);let E=[];if(typeof y=="string")Ff(h,y)&&(E=E.concat(h.g.get(Qo(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}n.set=function(h,y){return Ir(this),this.i=null,h=Qo(this,h),Ff(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Ty(this,h),h.length>0?String(h[0]):y):y};function Sy(h,y,E){Iy(h,y),E.length>0&&(h.i=null,h.g.set(Qo(h,y),m(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],y=Array.from(this.g.keys());for(let P=0;P<y.length;P++){var E=y[P];let k=Cc(E);E=Ty(this,E);for(let V=0;V<E.length;V++){let X=k;E[V]!==""&&(X+="="+Cc(E[V])),h.push(X)}}return this.i=h.join("&")};function Dy(h){let y=new ni;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Qo(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Fc(h,y){y&&!h.j&&(Ir(h),h.i=null,h.g.forEach(function(E,P){let k=P.toLowerCase();P!=k&&(Iy(this,P),Sy(this,k,E))},h)),h.j=y}function Vi(h,y){let E=new jo;if(o.Image){let P=new Image;P.onload=u(ri,E,"TestLoadImage: loaded",!0,y,P),P.onerror=u(ri,E,"TestLoadImage: error",!1,y,P),P.onabort=u(ri,E,"TestLoadImage: abort",!1,y,P),P.ontimeout=u(ri,E,"TestLoadImage: timeout",!1,y,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else y(!1)}function Ay(h,y){let E=new jo,P=new AbortController,k=setTimeout(()=>{P.abort(),ri(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:P.signal}).then(V=>{clearTimeout(k),V.ok?ri(E,"TestPingServer: ok",!0,y):ri(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(k),ri(E,"TestPingServer: error",!1,y)})}function ri(h,y,E,P,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),P(E)}catch{}}function Cy(){this.g=new py}function ii(h){this.i=h.Sb||null,this.h=h.ab||!1}f(ii,my),ii.prototype.g=function(){return new ku(this.i,this.h)};function ku(h,y){en.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(ku,en),n=ku.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Xn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vc(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ry(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ry(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Vc(this):Xn(this),this.readyState==3&&Ry(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Vc(this))},n.Na=function(h){this.g&&(this.response=h,Vc(this))},n.ga=function(){this.g&&Vc(this)};function Vc(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Xn(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Xn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ku.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xy(h){let y="";return ge(h,function(E,P){y+=P,y+=":",y+=E,y+=`\r
`}),y}function Vf(h,y,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=xy(E),typeof h=="string"?E!=null&&Cc(E):dt(h,y,E))}function ht(h){en.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ht,en);var Ou=/^https?$/i,Py=["POST","PUT"];n=ht.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zo.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(V){Yo(this,V);return}if(h=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var k in P)E.set(k,P[k]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(let V of P.keys())E.set(V,P.get(V));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(V=>V.toLowerCase()=="content-type"),k=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Py,y,void 0)>=0)||P||k||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,X]of E)this.g.setRequestHeader(V,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(V){Yo(this,V)}};function Yo(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Xo(h),Jo(h)}function Xo(h){h.A||(h.A=!0,tn(h,"complete"),tn(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,tn(this,"complete"),tn(this,"abort"),Jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Uf(this):this.Xa())},n.Xa=function(){Uf(this)};function Uf(h){if(h.h&&typeof s<"u"){if(h.v&&rt(h)==4)setTimeout(h.Ca.bind(h),0);else if(tn(h,"readystatechange"),rt(h)==4){h.h=!1;try{let V=h.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var P;if(P=V===0){let X=String(h.D).match(kf)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),P=!Ou.test(X?X.toLowerCase():"")}E=P}if(E)tn(h,"complete"),tn(h,"success");else{h.o=6;try{var k=rt(h)>2?h.g.statusText:""}catch{k=""}h.l=k+" ["+h.ca()+"]",Xo(h)}}finally{Jo(h)}}}}function Jo(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);let E=h.g;h.g=null,y||tn(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rt(h){return h.g?h.g.readyState:0}n.ca=function(){try{return rt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),fy(y)}};function Ny(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ST(h){let y={};h=(h.g&&rt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(w(h[P]))continue;var E=$o(h[P]);let k=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();let V=y[k]||[];y[k]=V,V.push(E)}at(y,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zo(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function jf(h){this.za=0,this.i=[],this.j=new jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zo("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zo("baseRetryDelayMs",5e3,h),this.Za=Zo("retryDelaySeedMs",1e4,h),this.Ta=Zo("forwardChannelMaxRetries",2,h),this.va=Zo("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Pu(h&&h.concurrentRequestLimit),this.Ba=new Cy,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=jf.prototype,n.ka=8,n.I=1,n.connect=function(h,y,E,P){rn(0),this.W=h,this.H=y||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.J=ju(this,null,this.W),Jn(this)};function Lu(h){if(Bf(h),h.I==3){var y=h.V++,E=Er(h.J);if(dt(E,"SID",h.M),dt(E,"RID",y),dt(E,"TYPE","terminate"),si(h,E),y=new Oi(h,h.j,y),y.M=2,y.A=kc(Er(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=y.A,E=!0),E||(y.g=Bu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ho(y)}Hf(h)}function Ds(h){h.g&&(Vu(h),h.g.cancel(),h.g=null)}function Bf(h){Ds(h),h.v&&(o.clearTimeout(h.v),h.v=null),Uu(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Jn(h){if(!Go(h.h)&&!h.m){h.m=!0;var y=h.Ea;z||_(),B||(z(),B=!0),T.add(y,h),h.D=0}}function My(h,y){return Fi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=br(l(h.Ea,h,y),ta(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;let k=new Oi(this,this.j,h),V=this.o;if(this.U&&(V?(V=zt(V),$e(V,this.U)):V=this.U),this.u!==null||this.R||(k.J=V,V=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=zf(this,k,y),E=Er(this.J),dt(E,"RID",h),dt(E,"CVER",22),this.G&&dt(E,"X-HTTP-Session-Id",this.G),si(this,E),V&&(this.R?y="headers="+Cc(xy(V))+"&"+y:this.u&&Vf(E,this.u,V)),Pf(this.h,k),this.Ra&&dt(E,"TYPE","init"),this.S?(dt(E,"$req",y),dt(E,"SID","null"),k.U=!0,xc(k,E,null)):xc(k,E,y),this.I=2}}else this.I==3&&(h?ky(this,h):this.i.length==0||Go(this.h)||ky(this))};function ky(h,y){var E;y?E=y.l:E=h.V++;let P=Er(h.J);dt(P,"SID",h.M),dt(P,"RID",E),dt(P,"AID",h.K),si(h,P),h.u&&h.o&&Vf(P,h.u,h.o),E=new Oi(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=zf(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Pf(h.h,E),xc(E,P,y)}function si(h,y){h.H&&ge(h.H,function(E,P){dt(y,P,E)}),h.l&&ge({},function(E,P){dt(y,P,E)})}function zf(h,y,E){E=Math.min(h.i.length,E);let P=h.l?l(h.l.Ka,h.l,h):null;e:{var k=h.i;let ye=-1;for(;;){let d=["count="+E];ye==-1?E>0?(ye=k[0].g,d.push("ofs="+ye)):ye=0:d.push("ofs="+ye);let g=!0;for(let v=0;v<E;v++){var V=k[v].g;let x=k[v].map;if(V-=ye,V<0)ye=Math.max(0,k[v].g-100),g=!1;else try{V="req"+V+"_"||"";try{var X=x instanceof Map?x:Object.entries(x);for(let[L,U]of X){let K=U;a(U)&&(K=ko(U)),d.push(V+L+"="+encodeURIComponent(K))}}catch(L){throw d.push(V+"type="+encodeURIComponent("_badmap")),L}}catch{P&&P(x)}}if(g){X=d.join("&");break e}}X=void 0}return h=h.i.splice(0,E),y.G=h,X}function Fu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;z||_(),B||(z(),B=!0),T.add(y,h),h.A=0}}function ea(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=br(l(h.Da,h),ta(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=br(l(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Ds(this),Uc(this))};function Vu(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function Uc(h){h.g=new Oi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Er(h.na);dt(y,"RID","rpc"),dt(y,"SID",h.M),dt(y,"AID",h.K),dt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&dt(y,"TO",h.ia),dt(y,"TYPE","xmlhttp"),si(h,y),h.u&&h.o&&Vf(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=kc(Er(y)),E.u=null,E.R=!0,Pc(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Ds(this),ea(this),rn(19))};function Uu(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function $f(h,y){var E=null;if(h.g==y){Uu(h),Vu(h),h.g=null;var P=2}else if(Nc(h.h,y))E=y.G,Nf(h.h,y),P=1;else return;if(h.I!=0){if(y.o)if(P==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var k=h.D;P=Fo(),tn(P,new Du(P,E)),Jn(h)}else Fu(h);else if(k=y.m,k==3||k==0&&y.X>0||!(P==1&&My(h,y)||P==2&&ea(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),k){case 1:Ui(h,5);break;case 4:Ui(h,10);break;case 3:Ui(h,6);break;default:Ui(h,2)}}}function ta(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Ui(h,y){if(h.j.info("Error code "+y),y==2){var E=l(h.bb,h),P=h.Ua;let k=!P;P=new jr(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ko(P,"https"),kc(P),k?Vi(P.toString(),E):Ay(P.toString(),E)}else rn(2);h.I=0,h.l&&h.l.pa(y),Hf(h),Bf(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Hf(h){if(h.I=0,h.ja=[],h.l){let y=Mf(h.h);(y.length!=0||h.i.length!=0)&&(I(h.ja,y),I(h.ja,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.oa()}}function ju(h,y,E){var P=E instanceof jr?Er(E):new jr(E);if(P.g!="")y&&(P.g=y+"."+P.g),Mc(P,P.u);else{var k=o.location;P=k.protocol,y=y?y+"."+k.hostname:k.hostname,k=+k.port;let V=new jr(null);P&&Ko(V,P),y&&(V.g=y),k&&Mc(V,k),E&&(V.h=E),P=V}return E=h.G,y=h.wa,E&&y&&dt(P,E,y),dt(P,"VER",h.ka),si(h,P),P}function Bu(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ht(new ii({ab:E})):new ht(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qf(){}n=qf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(h,y){return new Cn(h,y)};function Cn(h,y){en.call(this),this.g=new jf(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!w(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Cs(this)}f(Cn,en),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Lu(this.g)},Cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=ko(h),h=E);y.i.push(new Ey(y.Ya++,h)),y.I==3&&Jn(y)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Lu(this.g),delete this.g,Cn.Z.N.call(this)};function Wf(h){Su.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(let E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}f(Wf,Su);function ji(){Dc.call(this),this.status=1}f(ji,Dc);function Cs(h){this.g=h}f(Cs,qf),Cs.prototype.ra=function(){tn(this.g,"a")},Cs.prototype.qa=function(h){tn(this.g,new Wf(h))},Cs.prototype.pa=function(h){tn(this.g,new ji)},Cs.prototype.oa=function(){tn(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,LR=co.createWebChannelTransport=function(){return new As},OR=co.getStatEventTarget=function(){return Fo()},kR=co.Event=Ts,RE=co.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,Lm=co.ErrorCode=Ac,Bo.COMPLETE="complete",MR=co.EventType=Bo,Oo.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",en.prototype.listen=en.prototype.J,eh=co.WebChannel=Oo,Xse=co.FetchXmlHttpFactory=ii,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,NR=co.XhrIo=ht}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var yz="@firebase/firestore",_z="4.9.2";var kn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");var Sh="12.3.0";var Kl=new Va("@firebase/firestore");function th(){return Kl.logLevel}function ne(n,...e){if(Kl.logLevel<=Ue.DEBUG){let t=e.map(EP);Kl.debug(`Firestore (${Sh}): ${n}`,...t)}}function ho(n,...e){if(Kl.logLevel<=Ue.ERROR){let t=e.map(EP);Kl.error(`Firestore (${Sh}): ${n}`,...t)}}function $m(n,...e){if(Kl.logLevel<=Ue.WARN){let t=e.map(EP);Kl.warn(`Firestore (${Sh}): ${n}`,...t)}}function EP(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,o$(n,r,t)}function o$(n,e,t){let r=`FIRESTORE (${Sh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ho(r),new Error(r)}function Rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||o$(e,i,r)}function Ge(n,e){return n}var Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ae=class extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $a=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var HR=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qR=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}};var WR=class{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new $a;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $a,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $a)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new HR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new kn(e)}},GR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},KR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},OE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QR=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,no(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Rt(this.o===void 0,3512);let r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new OE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new OE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Jse(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var LE=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Jse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ze(n,e){return n<e?-1:n>e?1:0}function YR(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return FR(i)===FR(s)?ze(i,s):FR(i)?1:-1}return ze(n.length,e.length)}var Zse=55296,eoe=57343;function FR(n){let e=n.charCodeAt(0);return e>=Zse&&e<=eoe}function fh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var vz="__name__",FE=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ze(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):YR(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}},cn=class n extends FE{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},toe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ai=class n extends FE{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return toe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vz}static keyField(){return new n([vz])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ve=class n{constructor(e){this.path=e}static fromPath(e){return new n(cn.fromString(e))}static fromName(e){return new n(cn.fromString(e).popFirst(5))}static empty(){return new n(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new cn(e.slice()))}};function noe(n,e,t,r){if(e===!0&&r===!0)throw new ae(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function roe(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ioe(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function VR(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ioe(n);throw new ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Kt(n,e){let t={typeString:n};return e&&(t.value=e),t}function rg(n,e){if(!roe(n))throw new ae(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ae(Z.INVALID_ARGUMENT,t);return!0}var bz=-62135596800,Ez=1e6,Qn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ez);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bz)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ez}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rg(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-bz;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qn._jsonSchemaVersion="firestore/timestamp/1.0",Qn._jsonSchema={type:Kt("string",Qn._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qn(0,0))}static max(){return new n(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hm=-1,XR=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};XR.UNKNOWN_ID=-1;function soe(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Qn(t+1,0):new Qn(t,r));return new Ql(i,ve.empty(),e)}function ooe(n){return new Ql(n.readTime,n.key,Hm)}var Ql=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),ve.empty(),Hm)}static max(){return new n(De.max(),ve.empty(),Hm)}};function aoe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}var coe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",JR=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function lw(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==coe)throw n;ne("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function loe(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dh(n){return n.name==="IndexedDbTransactionError"}var wP=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),uoe=-1;function uw(n){return n==null}function VE(n){return n===0&&1/n==-1/0}var a$="";function doe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wz(e)),e=hoe(n.get(t),e);return wz(e)}function hoe(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case a$:t+="";break;default:t+=s}}return t}function wz(n){return n+a$+""}var foe="remoteDocuments",c$="owner";var l$="mutationQueues";var u$="mutations";var d$="documentMutations",poe="remoteDocumentsV14";var h$="remoteDocumentGlobal";var f$="targets";var p$="targetDocuments";var m$="targetGlobal",g$="collectionParents";var y$="clientMetadata";var _$="bundles";var v$="namedQueries";var moe="indexConfiguration";var goe="indexState";var yoe="indexEntries";var b$="documentOverlays";var _oe="globals";var voe=[l$,u$,d$,foe,f$,c$,m$,p$,y$,h$,g$,_$,v$],t2e=[...voe,b$],boe=[l$,u$,d$,poe,f$,c$,m$,p$,y$,h$,g$,_$,v$,b$],Eoe=boe,woe=[...Eoe,moe,goe,yoe];var n2e=[...woe,_oe];function Iz(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ig(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ioe(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ut=class n{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}},sh=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ss=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vn=class n{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UE(this.data.getIterator())}getIteratorFrom(e){return new UE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},UE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $l=class n{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new n([])}unionWith(e){let t=new vn(Ai.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fh(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var jE=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var On=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jE("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};On.EMPTY_BYTE_STRING=new On("");var Toe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(n){if(Rt(!!n,39018),typeof n=="string"){let e=0,t=Toe.exec(n);if(Rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function po(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}var E$="server_timestamp",w$="__type__",I$="__previous_value__",T$="__local_write_time__";function IP(n){return(n?.mapValue?.fields||{})[w$]?.stringValue===E$}function dw(n){let e=n.mapValue.fields[I$];return IP(e)?dw(e):e}function qm(n){let e=fo(n.mapValue.fields[T$].timestampValue);return new Qn(e.seconds,e.nanos)}var ZR=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},ex="(default)",BE=class n{constructor(e,t){this.projectId=e,this.database=t||ex}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ex}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var S$="__type__",D$="__max__",xE={mapValue:{fields:{__type__:{stringValue:D$}}}},A$="__vector__",Wm="value";function Ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?IP(n)?4:R$(n)?9007199254740991:C$(n)?10:11:we(28295,{value:n})}function as(n,e){if(n===e)return!0;let t=Ha(n);if(t!==Ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qm(n).isEqual(qm(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=fo(i.timestampValue),a=fo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return po(i.bytesValue).isEqual(po(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=It(i.doubleValue),a=It(s.doubleValue);return o===a?VE(o)===VE(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return fh(n.arrayValue.values||[],e.arrayValue.values||[],as);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Iz(o)!==Iz(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!as(o[c],a[c])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Gm(n,e){return(n.values||[]).find(t=>as(t,e))!==void 0}function ph(n,e){if(n===e)return 0;let t=Ha(n),r=Ha(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=It(s.integerValue||s.doubleValue),c=It(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Tz(n.timestampValue,e.timestampValue);case 4:return Tz(qm(n),qm(e));case 5:return YR(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=po(s),c=po(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ze(a[l],c[l]);if(u!==0)return u}return ze(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ze(It(s.latitude),It(o.latitude));return a!==0?a:ze(It(s.longitude),It(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sz(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[Wm]?.arrayValue,u=c[Wm]?.arrayValue,f=ze(l?.values?.length||0,u?.values?.length||0);return f!==0?f:Sz(l,u)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===xE.mapValue&&o===xE.mapValue)return 0;if(s===xE.mapValue)return 1;if(o===xE.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){let p=YR(c[f],u[f]);if(p!==0)return p;let m=ph(a[c[f]],l[u[f]]);if(m!==0)return m}return ze(c.length,u.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function Tz(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);let t=fo(n),r=fo(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function Sz(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ph(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function mh(n){return tx(n)}function tx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=fo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return po(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=tx(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${tx(t.fields[o])}`;return i+"}"})(n.mapValue):we(61005,{value:n})}function ME(n){switch(Ha(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=dw(n);return e?16+ME(e):16;case 5:return 2*n.stringValue.length;case 6:return po(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+ME(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ig(r.fields,(s,o)=>{i+=s.length+ME(o)}),i})(n.mapValue);default:throw we(13486,{value:n})}}function nx(n){return!!n&&"integerValue"in n}function TP(n){return!!n&&"arrayValue"in n}function Dz(n){return!!n&&"nullValue"in n}function Az(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function UR(n){return!!n&&"mapValue"in n}function C$(n){return(n?.mapValue?.fields||{})[S$]?.stringValue===A$}function Vm(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ig(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vm(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vm(n.arrayValue.values[t]);return e}return $({},n)}function R$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===D$}var i2e={mapValue:{fields:{[S$]:{stringValue:A$},[Wm]:{arrayValue:{}}}}};var lo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!UR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vm(t)}setAll(e){let t=Ai.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Vm(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());UR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];UR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ig(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Vm(this.value))}};var Ci=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),lo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),lo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),lo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gh=class{constructor(e,t){this.position=e,this.inclusive=t}};function Cz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),t.key):r=ph(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rz(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!as(n.position[t],e.position[t]))return!1;return!0}var yh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Soe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zE=class{},ln=class n extends zE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ix(e,t,r):t==="array-contains"?new ax(e,r):t==="in"?new cx(e,r):t==="not-in"?new lx(e,r):t==="array-contains-any"?new ux(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sx(e,r):new ox(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ph(t,this.value)):t!==null&&Ha(this.value)===Ha(t)&&this.matchesComparison(ph(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cs=class n extends zE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return x$(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function x$(n){return n.op==="and"}function P$(n){return Doe(n)&&x$(n)}function Doe(n){for(let e of n.filters)if(e instanceof cs)return!1;return!0}function rx(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+mh(n.value);if(P$(n))return n.filters.map(e=>rx(e)).join(",");{let e=n.filters.map(t=>rx(t)).join(",");return`${n.op}(${e})`}}function N$(n,e){return n instanceof ln?(function(r,i){return i instanceof ln&&r.op===i.op&&r.field.isEqual(i.field)&&as(r.value,i.value)})(n,e):n instanceof cs?(function(r,i){return i instanceof cs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&N$(o,i.filters[a]),!0):!1})(n,e):void we(19439)}function M$(n){return n instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${mh(t.value)}`})(n):n instanceof cs?(function(t){return t.op.toString()+" {"+t.getFilters().map(M$).join(" ,")+"}"})(n):"Filter"}var ix=class extends ln{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){let t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}},sx=class extends ln{constructor(e,t){super(e,"in",t),this.keys=k$("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ox=class extends ln{constructor(e,t){super(e,"not-in",t),this.keys=k$("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function k$(n,e){return(e.arrayValue?.values||[]).map(t=>ve.fromName(t.referenceValue))}var ax=class extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return TP(t)&&Gm(t.arrayValue,this.value)}},cx=class extends ln{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Gm(this.value.arrayValue,t)}},lx=class extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gm(this.value.arrayValue,t)}},ux=class extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!TP(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gm(this.value.arrayValue,r))}};var dx=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function xz(n,e=null,t=[],r=[],i=null,s=null,o=null){return new dx(n,e,t,r,i,s,o)}function SP(n){let e=Ge(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),uw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mh(r)).join(",")),e.Te=t}return e.Te}function DP(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Soe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!N$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rz(n.startAt,e.startAt)&&Rz(n.endAt,e.endAt)}function hx(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var _h=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Aoe(n,e,t,r,i,s,o,a){return new _h(n,e,t,r,i,s,o,a)}function AP(n){return new _h(n)}function Pz(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Coe(n){return n.collectionGroup!==null}function Um(n){let e=Ge(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vn(Ai.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new yh(s,r))}),t.has(Ai.keyField().canonicalString())||e.Ie.push(new yh(Ai.keyField(),r))}return e.Ie}function os(n){let e=Ge(n);return e.Ee||(e.Ee=Roe(e,Um(n))),e.Ee}function Roe(n,e){if(n.limitType==="F")return xz(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new yh(i.field,s)});let t=n.endAt?new gh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gh(n.startAt.position,n.startAt.inclusive):null;return xz(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fx(n,e,t){return new _h(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hw(n,e){return DP(os(n),os(e))&&n.limitType===e.limitType}function O$(n){return`${SP(os(n))}|lt:${n.limitType}`}function nh(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>M$(i)).join(", ")}]`),uw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>mh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>mh(i)).join(",")),`Target(${r})`})(os(n))}; limitType=${n.limitType})`}function fw(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Um(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=Cz(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Um(r),i)||r.endAt&&!(function(o,a,c){let l=Cz(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Um(r),i))})(n,e)}function xoe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L$(n){return(e,t)=>{let r=!1;for(let i of Um(n)){let s=Poe(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Poe(n,e,t){let r=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ph(c,l):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var mo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ig(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Ioe(this.inner)}size(){return this.innerSize}};var Noe=new Ut(ve.comparator);function qa(){return Noe}var F$=new Ut(ve.comparator);function Fm(...n){let e=F$;for(let t of n)e=e.insert(t.key,t);return e}function Moe(n){let e=F$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hl(){return jm()}function V$(){return jm()}function jm(){return new mo(n=>n.toString(),(n,e)=>n.isEqual(e))}var s2e=new Ut(ve.comparator),koe=new vn(ve.comparator);function Je(...n){let e=koe;for(let t of n)e=e.add(t);return e}var Ooe=new vn(ze);function Loe(){return Ooe}function Foe(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:VE(e)?"-0":e}}function Voe(n){return{integerValue:""+n}}var vh=class{constructor(){this._=void 0}};function Uoe(n,e,t){return n instanceof Km?(function(i,s){let o={fields:{[w$]:{stringValue:E$},[T$]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&IP(s)&&(s=dw(s)),s&&(o.fields[I$]=s),{mapValue:o}})(t,e):n instanceof bh?U$(n,e):n instanceof Eh?j$(n,e):(function(i,s){let o=Boe(i,s),a=Nz(o)+Nz(i.Ae);return nx(o)&&nx(i.Ae)?Voe(a):Foe(i.serializer,a)})(n,e)}function joe(n,e,t){return n instanceof bh?U$(n,e):n instanceof Eh?j$(n,e):t}function Boe(n,e){return n instanceof Qm?(function(r){return nx(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Km=class extends vh{},bh=class extends vh{constructor(e){super(),this.elements=e}};function U$(n,e){let t=B$(e);for(let r of n.elements)t.some(i=>as(i,r))||t.push(r);return{arrayValue:{values:t}}}var Eh=class extends vh{constructor(e){super(),this.elements=e}};function j$(n,e){let t=B$(e);for(let r of n.elements)t=t.filter(i=>!as(i,r));return{arrayValue:{values:t}}}var Qm=class extends vh{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Nz(n){return It(n.integerValue||n.doubleValue)}function B$(n){return TP(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zoe(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bh&&i instanceof bh||r instanceof Eh&&i instanceof Eh?fh(r.elements,i.elements,as):r instanceof Qm&&i instanceof Qm?as(r.Ae,i.Ae):r instanceof Km&&i instanceof Km})(n.transform,e.transform)}var Bm=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kE(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ym=class{};function z$(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new px(n.key,Bm.none()):new Xm(n.key,n.data,Bm.none());{let t=n.data,r=lo.empty(),i=new vn(Ai.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wh(n.key,r,new $l(i.toArray()),Bm.none())}}function $oe(n,e,t){n instanceof Xm?(function(i,s,o){let a=i.value.clone(),c=kz(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof wh?(function(i,s,o){if(!kE(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=kz(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($$(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function zm(n,e,t,r){return n instanceof Xm?(function(s,o,a,c){if(!kE(s.precondition,o))return a;let l=s.value.clone(),u=Oz(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof wh?(function(s,o,a,c){if(!kE(s.precondition,o))return a;let l=Oz(s.fieldTransforms,c,o),u=o.data;return u.setAll($$(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return kE(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Mz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fh(r,i,(s,o)=>zoe(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xm=class extends Ym{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wh=class extends Ym{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function $$(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function kz(n,e,t){let r=new Map;Rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,joe(o,a,t[i]))}return r}function Oz(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Uoe(s,o,e))}return r}var px=class extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var mx=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&$oe(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=zm(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=zm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=V$();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=z$(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Je())}isEqual(e){return this.batchId===e.batchId&&fh(this.mutations,e.mutations,(t,r)=>Mz(t,r))&&fh(this.baseMutations,e.baseMutations,(t,r)=>Mz(t,r))}};var gx=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yx=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Wt,We;function H$(n){if(n===void 0)return ho("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Wt.OK:return Z.OK;case Wt.CANCELLED:return Z.CANCELLED;case Wt.UNKNOWN:return Z.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return Z.INTERNAL;case Wt.UNAVAILABLE:return Z.UNAVAILABLE;case Wt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Wt.NOT_FOUND:return Z.NOT_FOUND;case Wt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Wt.ABORTED:return Z.ABORTED;case Wt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Wt.DATA_LOSS:return Z.DATA_LOSS;default:return we(39323,{code:n})}}(We=Wt||(Wt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var Hoe=null;function qoe(){return new TextEncoder}var Woe=new ao([4294967295,4294967295],0);function Lz(n){let e=qoe().encode(n),t=new PR;return t.update(e),new Uint8Array(t.digest())}function Fz(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ao([t,r],0),new ao([i,s],0)]}var _x=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ql(`Invalid padding: ${t}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ql(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ao.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ao.fromNumber(r)));return i.compare(Woe)===1&&(i=new ao([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Lz(e),[r,i]=Fz(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=Lz(e),[r,i]=Fz(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ql=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $E=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Jm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new Ut(ze),qa(),Je())}},Jm=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Je(),Je(),Je())}};var oh=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},HE=class{constructor(e,t){this.targetId=e,this.Ce=t}},qE=class{constructor(e,t,r=On.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},WE=class{constructor(){this.ve=0,this.Fe=Vz(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}}),new Jm(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Vz()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},vx=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=qa(),this.Je=PE(),this.He=PE(),this.Ye=new Ut(ze)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(hx(s))if(r===0){let o=new ve(s.path);this.et(t,o,Ci.newNoDocument(o,De.min()))}else Rt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}Hoe?.lt((function(u,f,p,m,I){let D={localCacheCount:u,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},S=f.unchangedNames;return S&&(D.bloomFilter={applied:I===0,hashCount:S?.hashCount??0,bitmapLength:S?.bits?.bitmap?.length??0,padding:S?.bits?.padding??0,mightContain:N=>m?.mightContain(N)??!1}),D})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=po(r).toUint8Array()}catch(c){if(c instanceof jE)return $m("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new _x(o,i,s)}catch(c){return $m(c instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&hx(a.target)){let c=new ve(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ci.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Je();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new $E(e,t,this.Ye,this.je,r);return this.je=qa(),this.Je=PE(),this.He=PE(),this.Ye=new Ut(ze),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new WE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vn(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vn(ze),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function PE(){return new Ut(ve.comparator)}function Vz(){return new Ut(ve.comparator)}var Goe={asc:"ASCENDING",desc:"DESCENDING"},Koe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qoe={and:"AND",or:"OR"},bx=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ex(n,e){return n.useProto3Json||uw(e)?e:{value:e}}function Yoe(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xoe(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ah(n){return Rt(!!n,49232),De.fromTimestamp((function(t){let r=fo(t);return new Qn(r.seconds,r.nanos)})(n))}function Joe(n,e){return wx(n,e).canonicalString()}function wx(n,e){let t=(function(i){return new cn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function q$(n){let e=cn.fromString(n);return Rt(Y$(e),10190,{key:e.toString()}),e}function jR(n,e){let t=q$(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(G$(t))}function W$(n,e){return Joe(n.databaseId,e)}function Zoe(n){let e=q$(n);return e.length===4?cn.emptyPath():G$(e)}function Uz(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function G$(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function eae(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:we(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Rt(u===void 0||typeof u=="string",58123),On.fromBase64String(u||"")):(Rt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),On.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?Z.UNKNOWN:H$(l.code);return new ae(u,l.message||"")})(o);t=new qE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jR(n,r.document.name),s=ah(r.document.updateTime),o=r.document.createTime?ah(r.document.createTime):De.min(),a=new lo({mapValue:{fields:r.document.fields}}),c=Ci.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new oh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jR(n,r.document),s=r.readTime?ah(r.readTime):De.min(),o=Ci.newNoDocument(i,s),a=r.removedTargetIds||[];t=new oh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jR(n,r.document),s=r.removedTargetIds||[];t=new oh([],s,i,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new yx(i,s),a=r.targetId;t=new HE(a,o)}}return t}function tae(n,e){return{documents:[W$(n,e.path)]}}function nae(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=W$(n,i);let s=(function(l){if(l.length!==0)return Q$(cs.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(p){return{field:rh(p.field),direction:sae(p.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Ex(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function rae(n){let e=Zoe(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Rt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(f){let p=K$(f);return p instanceof cs&&P$(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(p=>(function(I){return new yh(ih(I.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,uw(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(f){let p=!!f.before,m=f.values||[];return new gh(m,p)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let p=!f.before,m=f.values||[];return new gh(m,p)})(t.endAt)),Aoe(e,i,o,s,a,"F",c,l)}function iae(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K$(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ih(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ih(t.unaryFilter.field);return ln.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ih(t.unaryFilter.field);return ln.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ih(t.unaryFilter.field);return ln.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ln.create(ih(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return cs.create(t.compositeFilter.filters.map(r=>K$(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function sae(n){return Goe[n]}function oae(n){return Koe[n]}function aae(n){return Qoe[n]}function rh(n){return{fieldPath:n.canonicalString()}}function ih(n){return Ai.fromServerFormat(n.fieldPath)}function Q$(n){return n instanceof ln?(function(t){if(t.op==="=="){if(Az(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NAN"}};if(Dz(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Az(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NOT_NAN"}};if(Dz(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(t.field),op:oae(t.op),value:t.value}}})(n):n instanceof cs?(function(t){let r=t.getFilters().map(i=>Q$(i));return r.length===1?r[0]:{compositeFilter:{op:aae(t.op),filters:r}}})(n):we(54877,{filter:n})}function Y$(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Zm=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=On.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ix=class{constructor(e){this.yt=e}};function cae(n){let e=rae({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fx(e,e.limit,"L"):e}var GE=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),VE(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=fo(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(po(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?R$(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):C$(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):we(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Wm,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ve.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};GE.Kt=new GE;var Tx=class{constructor(){this.Cn=new Sx}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ql.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ql.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},Sx=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(cn.comparator)).toArray()}};var o2e=new Uint8Array(0);var jz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X$=41943040,Qr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(X$,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);var eg=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var Bz="LruGarbageCollector",lae=1048576;function zz([n,e],[t,r]){let i=ze(n,t);return i===0?ze(e,r):i}var Dx=class{constructor(e){this.Ir=e,this.buffer=new vn(zz),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();zz(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ax=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Bz,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dh(t)?ne(Bz,"Ignoring IndexedDB error during garbage collection: ",t):await lw(t)}await this.Vr(3e5)})}},Cx=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(wP.ce);let r=new Dx(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(jz)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jz):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),th()<=Ue.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function uae(n,e){return new Cx(n,e)}var Rx=class{constructor(){this.changes=new mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xx=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Px=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zm(r.mutation,i,$l.empty(),Qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Je()){let i=Hl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Fm();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Je()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=qa(),o=jm(),a=(function(){return jm()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof wh)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),zm(u.mutation,l,u.mutation.getFieldMask(),Qn.now())):o.set(l.key,$l.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>a.set(l,new xx(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=jm(),i=new Ut((o,a)=>o-a),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||$l.empty();u=a.applyToLocalView(l,u),r.set(c,u);let f=(i.get(a.batchId)||Je()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,f=V$();u.forEach(p=>{if(!s.has(p)){let m=z$(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Coe(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(Hl()),a=Hm,c=s;return o.next(l=>G.forEach(l,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Je())).next(u=>({batchId:a,changes:Moe(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let i=Fm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Fm();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let l=(function(f,p){return new _h(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Ci.newInvalidDocument(u)))});let a=Fm();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&zm(u.mutation,l,$l.empty(),Qn.now()),fw(t,l)&&(a=a.insert(c,l))}),a})}};var Nx=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ah(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:cae(i.bundledQuery),readTime:ah(i.readTime)}})(t)),G.resolve()}};var Mx=class{constructor(){this.overlays=new Ut(ve.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hl();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Hl(),s=t.length+1,o=new ve(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ut((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Hl(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Hl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gx(t,r));let s=this.qr.get(t);s===void 0&&(s=Je(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var kx=class{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var tg=class{constructor(){this.Qr=new vn(Gt.$r),this.Ur=new vn(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Gt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ve(new cn([])),r=new Gt(t,e),i=new Gt(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ve(new cn([])),r=new Gt(t,e),i=new Gt(t,e+1),s=Je();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Gt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Gt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}};var Ox=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vn(Gt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new mx(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?uoe:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(ze);return t.forEach(i=>{let s=new Gt(i,0),o=new Gt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ve.isDocumentKey(s)||(s=s.child(""));let o=new Gt(new ve(s),0),a=new vn(ze);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Gt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Gt(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Lx=class{constructor(e){this.ri=e,this.docs=(function(){return new Ut(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Ci.newInvalidDocument(t))}getEntries(e,t){let r=qa();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ci.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qa(),o=t.path,a=new ve(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||aoe(ooe(u),r)<=0||(i.has(u.key)||fw(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Fx(this)}getSize(e){return G.resolve(this.size)}},Fx=class extends Rx{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Vx=class{constructor(e){this.persistence=e,this.si=new mo(t=>SP(t),DP),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new tg,this.targetCount=0,this.ai=eg.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new eg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var KE=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new wP(0),this.li=!1,this.li=!0,this.hi=new kx,this.referenceDelegate=e(this),this.Pi=new Vx(this),this.indexManager=new Tx,this.remoteDocumentCache=(function(i){return new Lx(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Ix(t),this.Ii=new Nx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Ox(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);let i=new Ux(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Ux=class extends JR{constructor(e){super(),this.currentSequenceNumber=e}},jx=class n{constructor(e){this.persistence=e,this.Ri=new tg,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=ve.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},QE=class n{constructor(e,t){this.persistence=e,this.pi=new mo(r=>doe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uae(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ME(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Bx=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Je(),i=Je();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var zx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $x=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Wj()?8:loe(Lr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new zx;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(th()<=Ue.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",nh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(th()<=Ue.DEBUG&&ne("QueryEngine","Query:",nh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(th()<=Ue.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",nh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(t))):G.resolve())}ys(e,t){if(Pz(t))return G.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fx(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Je(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,fx(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return Pz(t)||i.isEqual(De.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(th()<=Ue.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nh(t)),this.vs(e,o,t,soe(i,Hm)).next(a=>a))})}Ds(e,t){let r=new vn(L$(e));return t.forEach((i,s)=>{fw(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return th()<=Ue.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",nh(t)),this.ps.getDocumentsMatchingQuery(e,t,Ql.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var CP="LocalStore",dae=3e8,Hx=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ut(ze),this.xs=new mo(s=>SP(s),DP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Px(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function hae(n,e,t,r){return new Hx(n,e,t,r)}async function J$(n,e){let t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Je();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function Z$(n){let e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function fae(n,e){let t=Ge(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((u,f)=>{let p=i.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(On.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),(function(D,S,N){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=dae?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,u)&&a.push(t.Pi.updateTargetData(s,m))});let c=qa(),l=Je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(pae(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(De.min())){let u=t.Pi.getLastRemoteSnapshotVersion(s).next(f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=i,s))}function pae(n,e,t){let r=Je(),i=Je();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=qa();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ne(CP,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function mae(n,e){let t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Zm(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function qx(n,e,t){let r=Ge(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Dh(o))throw o;ne(CP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $z(n,e,t){let r=Ge(n),i=De.min(),s=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let f=Ge(c),p=f.xs.get(u);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(l,u)})(r,o,os(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:Je())).next(a=>(gae(r,xoe(e),a),{documents:a,Qs:s})))}function gae(n,e,t){let r=n.Os.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var YE=class{constructor(){this.activeTargetIds=Loe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Wx=class{constructor(){this.Mo=new YE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gx=class{Oo(e){}shutdown(){}};var Hz="ConnectivityMonitor",XE=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Hz,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ne(Hz,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var NE=null;function Kx(){return NE===null?NE=(function(){return 268435456+Math.round(2147483648*Math.random())})():NE++,"0x"+NE.toString(16)}var BR="RestConnection",yae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Qx=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ex?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=Kx(),a=this.zo(e,t.toUriEncodedString());ne(BR,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:l}=new URL(a),u=Em(l);return this.Jo(e,a,c,r,u).then(f=>(ne(BR,`Received RPC '${e}' ${o}: `,f),f),f=>{throw $m(BR,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=yae[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Yx=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Mn="WebChannelConnection",Xx=class extends Qx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=Kx();return new Promise((a,c)=>{let l=new NR;l.setWithCredentials(!0),l.listenOnce(MR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lm.NO_ERROR:let f=l.getResponseJson();ne(Mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Lm.TIMEOUT:ne(Mn,`RPC '${e}' ${o} timed out`),c(new ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:let p=l.getStatus();if(ne(Mn,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let D=(function(N){let M=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(M)>=0?M:Z.UNKNOWN})(I.status);c(new ae(D,I.message))}else c(new ae(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ae(Z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ne(Mn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ne(Mn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}T_(e,t,r){let i=Kx(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LR(),a=OR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");ne(Mn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=o.createWebChannel(u,c);this.I_(f);let p=!1,m=!1,I=new Yx({Yo:S=>{m?ne(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(ne(Mn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ne(Mn,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Zo:()=>f.close()}),D=(S,N,M)=>{S.listen(N,F=>{try{M(F)}catch(j){setTimeout(()=>{throw j},0)}})};return D(f,eh.EventType.OPEN,()=>{m||(ne(Mn,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),D(f,eh.EventType.CLOSE,()=>{m||(m=!0,ne(Mn,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(f))}),D(f,eh.EventType.ERROR,S=>{m||(m=!0,$m(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),I.a_(new ae(Z.UNAVAILABLE,"The operation could not be completed")))}),D(f,eh.EventType.MESSAGE,S=>{if(!m){let N=S.data[0];Rt(!!N,16349);let M=N,F=M?.error||M[0]?.error;if(F){ne(Mn,`RPC '${e}' stream ${i} received error:`,F);let j=F.status,z=(function(_){let b=Wt[_];if(b!==void 0)return H$(b)})(j),B=F.message;z===void 0&&(z=Z.INTERNAL,B="Unknown error status: "+j+" with message "+F.message),m=!0,I.a_(new ae(z,B)),f.close()}else ne(Mn,`RPC '${e}' stream ${i} received:`,N),I.u_(N)}}),D(a,kR.STAT_EVENT,S=>{S.stat===RE.PROXY?ne(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===RE.NOPROXY&&ne(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function zR(){return typeof document<"u"?document:null}function e4(n){return new bx(n,!0)}var JE=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var qz="PersistentStream",Jx=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(ho(t.toString()),ho("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(qz,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ne(qz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Zx=class extends Jx{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=eae(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?ah(o.readTime):De.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Uz(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=hx(c)?{documents:tae(s,c)}:{query:nae(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Xoe(s,o.resumeToken);let l=Ex(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Yoe(s,o.snapshotVersion.toTimestamp());let l=Ex(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=iae(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Uz(this.serializer),t.removeTarget=e,this.q_(t)}};var eP=class{},tP=class extends eP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,wx(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(Z.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,wx(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(Z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},nP=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ho(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ih="RemoteStore",rP=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{og(this)&&(ne(Ih,"Restarting streams for network reachability change."),await(async function(c){let l=Ge(c);l.Ea.add(4),await sg(l),l.Ra.set("Unknown"),l.Ea.delete(4),await pw(l)})(this))})}),this.Ra=new nP(r,i)}};async function pw(n){if(og(n))for(let e of n.da)await e(!0)}async function sg(n){for(let e of n.da)await e(!1)}function t4(n,e){let t=Ge(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),NP(t)?PP(t):Ah(t).O_()&&xP(t,e))}function RP(n,e){let t=Ge(n),r=Ah(t);t.Ia.delete(e),r.O_()&&n4(t,e),t.Ia.size===0&&(r.O_()?r.L_():og(t)&&t.Ra.set("Unknown"))}function xP(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ah(n).Y_(e)}function n4(n,e){n.Va.Ue(e),Ah(n).Z_(e)}function PP(n){n.Va=new vx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ah(n).start(),n.Ra.ua()}function NP(n){return og(n)&&!Ah(n).x_()&&n.Ia.size>0}function og(n){return Ge(n).Ea.size===0}function r4(n){n.Va=void 0}async function _ae(n){n.Ra.set("Online")}async function vae(n){n.Ia.forEach((e,t)=>{xP(n,e)})}async function bae(n,e){r4(n),NP(n)?(n.Ra.ha(e),PP(n)):n.Ra.set("Unknown")}async function Eae(n,e,t){if(n.Ra.set("Online"),e instanceof qE&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ne(Ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wz(n,r)}else if(e instanceof oh?n.Va.Ze(e):e instanceof HE?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{let r=await Z$(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(On.EMPTY_BYTE_STRING,u.snapshotVersion)),n4(s,c);let f=new Zm(u.target,c,l,u.sequenceNumber);xP(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ne(Ih,"Failed to raise snapshot:",r),await Wz(n,r)}}async function Wz(n,e,t){if(!Dh(e))throw e;n.Ea.add(1),await sg(n),n.Ra.set("Offline"),t||(t=()=>Z$(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ne(Ih,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pw(n)})}async function Gz(n,e){let t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ne(Ih,"RemoteStore received new credentials");let r=og(t);t.Ea.add(3),await sg(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pw(t)}async function wae(n,e){let t=Ge(n);e?(t.Ea.delete(2),await pw(t)):e||(t.Ea.add(2),await sg(t),t.Ra.set("Unknown"))}function Ah(n){return n.ma||(n.ma=(function(t,r,i){let s=Ge(t);return s.sa(),new Zx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:_ae.bind(null,n),t_:vae.bind(null,n),r_:bae.bind(null,n),H_:Eae.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),NP(n)?PP(n):n.Ra.set("Unknown")):(await n.ma.stop(),r4(n))})),n.ma}var iP=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function i4(n,e){if(ho("AsyncQueue",`${e}: ${n}`),Dh(n))return new ae(Z.UNAVAILABLE,`${e}: ${n}`);throw n}var ZE=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=Fm(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ew=class{constructor(){this.ga=new Ut(ve.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Th=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,ZE.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var sP=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},oP=class{constructor(){this.queries=Kz(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ge(t),s=i.queries;i.queries=Kz(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ae(Z.ABORTED,"Firestore shutting down"))}};function Kz(){return new mo(n=>O$(n),hw)}async function Iae(n,e){let t=Ge(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new sP,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=i4(o,`Initialization of query '${nh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&MP(t)}async function Tae(n,e){let t=Ge(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Sae(n,e){let t=Ge(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&MP(t)}function Dae(n,e,t){let r=Ge(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function MP(n){n.Ca.forEach(e=>{e.next()})}var aP,Qz;(Qz=aP||(aP={})).Ma="default",Qz.Cache="cache";var cP=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Th(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==aP.Cache}};var tw=class{constructor(e){this.key=e}},nw=class{constructor(e){this.key=e}},lP=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=L$(e),this.tu=new ZE(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new ew,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{let p=i.get(u),m=fw(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),S=!1;p&&m?p.data.isEqual(m.data)?I!==D&&(r.track({type:3,doc:m}),S=!0):this.su(p,m)||(r.track({type:2,doc:m}),S=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(c||l)&&(a=!0)),S&&(m?(o=o.add(m),s=D?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((u,f)=>(function(m,I){let D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:S})}};return D(m)-D(I)})(u.type,f.type)||this.eu(u.doc,f.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new Th(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ew,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Je(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new nw(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new tw(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Je();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Th.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},kP="SyncEngine",uP=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dP=class{constructor(e){this.key=e,this.hu=!1}},hP=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new mo(a=>O$(a),hw),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(ve.comparator),this.Au=new Map,this.Ru=new tg,this.Vu={},this.mu=new Map,this.fu=eg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function Aae(n,e,t=!0){let r=l4(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await s4(r,e,t,!0),i}async function Cae(n,e){let t=l4(n);await s4(t,e,!0,!1)}async function s4(n,e,t,r){let i=await mae(n.localStore,os(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await Rae(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&t4(n.remoteStore,i),a}async function Rae(n,e,t,r,i){n.pu=(f,p,m)=>(async function(D,S,N,M){let F=S.view.ru(N);F.Cs&&(F=await $z(D.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,F)));let j=M&&M.targetChanges.get(S.targetId),z=M&&M.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(F,D.isPrimaryClient,j,z);return Xz(D,S.targetId,B.au),B.snapshot})(n,f,p,m);let s=await $z(n.localStore,e,!0),o=new lP(e,s.Qs),a=o.ru(s.documents),c=Jm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);Xz(n,t,l.au);let u=new uP(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function xae(n,e,t){let r=Ge(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!hw(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&RP(r.remoteStore,i.targetId),fP(r,i.targetId)}).catch(lw)):(fP(r,i.targetId),await qx(r.localStore,i.targetId,!0))}async function Pae(n,e){let t=Ge(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),RP(t.remoteStore,r.targetId))}async function o4(n,e){let t=Ge(n);try{let r=await fae(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Rt(o.hu,14607):i.removedDocuments.size>0&&(Rt(o.hu,42227),o.hu=!1))}),await c4(t,r,e)}catch(r){await lw(r)}}function Yz(n,e,t){let r=Ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ge(o);c.onlineState=a;let l=!1;c.queries.forEach((u,f)=>{for(let p of f.Sa)p.va(a)&&(l=!0)}),l&&MP(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Nae(n,e,t){let r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ut(ve.comparator);o=o.insert(s,Ci.newNoDocument(s,De.min()));let a=Je().add(s),c=new $E(De.min(),new Map,new Ut(ze),o,a);await o4(r,c),r.du=r.du.remove(s),r.Au.delete(e),OP(r)}else await qx(r.localStore,e,!1).then(()=>fP(r,e,t)).catch(lw)}function fP(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||a4(n,r)})}function a4(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(RP(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),OP(n))}function Xz(n,e,t){for(let r of t)r instanceof tw?(n.Ru.addReference(r.key,e),Mae(n,r)):r instanceof nw?(ne(kP,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||a4(n,r.key)):we(19791,{wu:r})}function Mae(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ne(kP,"New document in limbo: "+t),n.Eu.add(r),OP(n))}function OP(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ve(cn.fromString(e)),r=n.fu.next();n.Au.set(r,new dP(t)),n.du=n.du.insert(t,r),t4(n.remoteStore,new Zm(os(AP(t.path)),r,"TargetPurposeLimboResolution",wP.ce))}}async function c4(n,e,t){let r=Ge(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let u=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){i.push(l);let u=Bx.As(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,l){let u=Ge(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(l,p=>G.forEach(p.Es,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>G.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Dh(f))throw f;ne(CP,"Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let m=u.Ms.get(p),I=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(I);u.Ms=u.Ms.insert(p,D)}}})(r.localStore,s))}async function kae(n,e){let t=Ge(n);if(!t.currentUser.isEqual(e)){ne(kP,"User change. New user:",e.toKey());let r=await J$(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ae(Z.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await c4(t,r.Ls)}}function Oae(n,e){let t=Ge(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function l4(n){let e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nae.bind(null,e),e.Pu.H_=Sae.bind(null,e.eventManager),e.Pu.yu=Dae.bind(null,e.eventManager),e}var u4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=e4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return hae(this.persistence,new $x,t.initialUser,this.serializer)}Cu(t){return new KE(jx.mi,this.serializer)}Du(t){return new Wx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),pP=class extends u4{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Rt(this.persistence.referenceDelegate instanceof QE,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Ax(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new KE(r=>QE.mi(r,t),this.serializer)}};var Lae=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yz(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kae.bind(null,this.syncEngine),await wae(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new oP})()}createDatastore(t){let r=e4(t.databaseInfo.databaseId),i=(function(o){return new Xx(o)})(t.databaseInfo);return(function(o,a,c,l){return new tP(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new rP(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>Yz(this.syncEngine,r,0),(function(){return XE.v()?new XE:new Gx})())}createSyncEngine(t,r){return(function(s,o,a,c,l,u,f){let p=new hP(s,o,a,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ge(r);ne(Ih,"RemoteStore shutting down."),i.Ea.add(5),await sg(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var mP=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ho("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Wa="FirestoreClient",gP=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kn.UNAUTHENTICATED,this.clientId=LE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne(Wa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(Wa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=i4(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function $R(n,e){n.asyncQueue.verifyOperationInProgress(),ne(Wa,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await J$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Jz(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Fae(n);ne(Wa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Gz(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Gz(e.remoteStore,i)),n._onlineComponents=e}async function Fae(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(Wa,"Using user provided OfflineComponentProvider");try{await $R(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;$m("Error using user provided cache. Falling back to memory cache: "+t),await $R(n,new u4)}}else ne(Wa,"Using default OfflineComponentProvider"),await $R(n,new pP(void 0));return n._offlineComponents}async function Vae(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(Wa,"Using user provided OnlineComponentProvider"),await Jz(n,n._uninitializedComponentsProvider._online)):(ne(Wa,"Using default OnlineComponentProvider"),await Jz(n,new Lae))),n._onlineComponents}async function Zz(n){let e=await Vae(n),t=e.eventManager;return t.onListen=Aae.bind(null,e.syncEngine),t.onUnlisten=xae.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Cae.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Pae.bind(null,e.syncEngine),t}function d4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var e$=new Map;var Uae="firestore.googleapis.com",t$=!0,rw=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uae,this.ssl=t$}else this.host=e.host,this.ssl=e.ssl??t$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X$;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lae)throw new ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}noe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yP=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new KR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=e$.get(t);r&&(ne("ComponentProvider","Removing Datastore"),e$.delete(t),r.terminate())})(this),Promise.resolve()}};var iw=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},uo=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _P(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(rg(t,n._jsonSchema))return new n(e,r||null,new ve(cn.fromString(t.referencePath)))}};uo._jsonSchemaVersion="firestore/documentReference/1.0",uo._jsonSchema={type:Kt("string",uo._jsonSchemaVersion),referencePath:Kt("string")};var _P=class n extends iw{constructor(e,t,r){super(e,t,AP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new uo(this.firestore,null,new ve(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var n$="AsyncQueue",sw=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JE(this,"async_queue_retry"),this._c=()=>{let r=zR();r&&ne(n$,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=zR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=zR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new $a;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dh(e))throw e;ne(n$,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ho("INTERNAL UNHANDLED ERROR: ",r$(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=iP.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&we(47125,{Pc:r$(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function r$(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function i$(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var ng=class extends yP{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,await e}}};function jae(n){if(n._terminated)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Bae(n),n._firestoreClient}function Bae(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new ZR(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,d4(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var ch=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(On.fromBase64String(e))}catch(t){throw new ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rg(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ch._jsonSchemaVersion="firestore/bytes/1.0",ch._jsonSchema={type:Kt("string",ch._jsonSchemaVersion),bytes:Kt("string")};var ow=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lh=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(rg(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};lh._jsonSchemaVersion="firestore/geoPoint/1.0",lh._jsonSchema={type:Kt("string",lh._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};var uh=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rg(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ae(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};uh._jsonSchemaVersion="firestore/vectorValue/1.0",uh._jsonSchema={type:Kt("string",uh._jsonSchemaVersion),vectorValues:Kt("object")};var zae=new RegExp("[~\\*/\\[\\]]");function $ae(n,e,t){if(e.search(zae)>=0)throw s$(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ow(...e.split("."))._internalPath}catch{throw s$(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function s$(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ae(Z.INVALID_ARGUMENT,a+n+c)}var aw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new uo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(h4("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},vP=class extends aw{data(){return super.data()}};function h4(n,e){return typeof e=="string"?$ae(n,e):e instanceof ow?e._internalPath:e._delegate._internalPath}function Hae(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bP=class{convertValue(e,t="none"){switch(Ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ig(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Wm].arrayValue?.values?.map(r=>It(r.doubleValue));return new uh(t)}convertGeoPoint(e){return new lh(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=dw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qm(e));default:return null}}convertTimestamp(e){let t=fo(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=cn.fromString(e);Rt(Y$(r),9688,{name:e});let i=new BE(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(t)||ho(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Wl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Gl=class n extends aw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(h4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gl._jsonSchema={type:Kt("string",Gl._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};var dh=class extends Gl{data(e={}){return super.data(e)}},hh=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dh(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new dh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new dh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:qae(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=LE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function qae(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}hh._jsonSchemaVersion="firestore/querySnapshot/1.0",hh._jsonSchema={type:Kt("string",hh._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};var cw=class extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ch(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,t)}};function f4(n,...e){n=Fa(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||i$(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(i$(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof uo)o=VR(n.firestore,ng),a=AP(n._key.path),s={next:c=>{e[r]&&e[r](Wae(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=VR(n,iw);o=VR(c.firestore,ng),a=c._query;let l=new cw(o);s={next:u=>{e[r]&&e[r](new hh(o,l,c,u))},error:e[r+1],complete:e[r+2]},Hae(n._query)}return(function(l,u,f,p){let m=new mP(p),I=new cP(u,m,f);return l.asyncQueue.enqueueAndForget(async()=>Iae(await Zz(l),I)),()=>{m.Nu(),l.asyncQueue.enqueueAndForget(async()=>Tae(await Zz(l),I))}})(jae(o),a,i,s)}function Wae(n,e,t){let r=t.docs.get(e._key),i=new cw(n);return new Gl(n,i,e._key,r,new Wl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Sh=i})(Xd),Ua(new Si("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ng(new WR(r.getProvider("auth-internal")),new QR(o,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BE(l.options.projectId,u)})(o,i),o);return s=$({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),eo(yz,_z,e),eo(yz,_z,"esm2020")})();var mw=function(){return mw=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},mw.apply(this,arguments)};var Gae={includeMetadataChanges:!1};function p4(n,e){return e===void 0&&(e=Gae),new ue(function(t){var r=f4(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function m4(n){return p4(n,{includeMetadataChanges:!0})}function g4(n,e){return e===void 0&&(e={}),m4(n).pipe(pe(function(t){return y4(t,e)}))}function y4(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:mw(mw({},r),(t={},t[e.idField]=n.id,t))}var _4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v4={};var go,LP;(function(){var n;function e(T,_){function b(){}b.prototype=_.prototype,T.D=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(C,A,R){for(var w=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)w[Oe-2]=arguments[Oe];return _.prototype[A].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,b){b||(b=0);var C=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)C[A]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(A=0;16>A;++A)C[A]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],A=T.g[2];var R=T.g[3],w=_+(R^b&(A^R))+C[0]+3614090360&4294967295;_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[1]+3905402710&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[2]+606105819&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[3]+3250441966&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[4]+4118548399&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[5]+1200080426&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[6]+2821735955&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[7]+4249261313&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[8]+1770035416&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[9]+2336552879&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[10]+4294925233&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[11]+2304563134&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(R^b&(A^R))+C[12]+1804603682&4294967295,_=b+(w<<7&4294967295|w>>>25),w=R+(A^_&(b^A))+C[13]+4254626195&4294967295,R=_+(w<<12&4294967295|w>>>20),w=A+(b^R&(_^b))+C[14]+2792965006&4294967295,A=R+(w<<17&4294967295|w>>>15),w=b+(_^A&(R^_))+C[15]+1236535329&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(A^R&(b^A))+C[1]+4129170786&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[6]+3225465664&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[11]+643717713&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[0]+3921069994&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[5]+3593408605&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[10]+38016083&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[15]+3634488961&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[4]+3889429448&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[9]+568446438&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[14]+3275163606&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[3]+4107603335&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[8]+1163531501&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^R&(b^A))+C[13]+2850285829&4294967295,_=b+(w<<5&4294967295|w>>>27),w=R+(b^A&(_^b))+C[2]+4243563512&4294967295,R=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(R^_))+C[7]+1735328473&4294967295,A=R+(w<<14&4294967295|w>>>18),w=b+(R^_&(A^R))+C[12]+2368359562&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(b^A^R)+C[5]+4294588738&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[8]+2272392833&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[11]+1839030562&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[14]+4259657740&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[1]+2763975236&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[4]+1272893353&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[7]+4139469664&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[10]+3200236656&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[13]+681279174&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[0]+3936430074&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[3]+3572445317&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[6]+76029189&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^R)+C[9]+3654602809&4294967295,_=b+(w<<4&4294967295|w>>>28),w=R+(_^b^A)+C[12]+3873151461&4294967295,R=_+(w<<11&4294967295|w>>>21),w=A+(R^_^b)+C[15]+530742520&4294967295,A=R+(w<<16&4294967295|w>>>16),w=b+(A^R^_)+C[2]+3299628645&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(A^(b|~R))+C[0]+4096336452&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[7]+1126891415&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[14]+2878612391&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[5]+4237533241&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[12]+1700485571&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[3]+2399980690&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[10]+4293915773&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[1]+2240044497&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[8]+1873313359&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[15]+4264355552&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[6]+2734768916&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[13]+1309151649&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~R))+C[4]+4149444226&4294967295,_=b+(w<<6&4294967295|w>>>26),w=R+(b^(_|~A))+C[11]+3174756917&4294967295,R=_+(w<<10&4294967295|w>>>22),w=A+(_^(R|~b))+C[2]+718787259&4294967295,A=R+(w<<15&4294967295|w>>>17),w=b+(R^(A|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var b=_-this.blockSize,C=this.B,A=this.h,R=0;R<_;){if(A==0)for(;R<=b;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(C[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,C),A=0;break}}else for(;R<_;)if(C[A++]=T[R++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var b=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=b&255,b/=256;for(this.u(T),T=Array(16),_=b=0;4>_;++_)for(var C=0;32>C;C+=8)T[b++]=this.g[_]>>>C&255;return T};function s(T,_){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function o(T,_){this.h=_;for(var b=[],C=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;C&&R==_||(b[A]=R,C=!1)}this.g=b}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return S(l(-T));for(var _=[],b=1,C=0;T>=b;C++)_[C]=T/b|0,b*=4294967296;return new o(_,0)}function u(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(u(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(_,8)),C=f,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),w=parseInt(T.substring(A,A+R),_);8>R?(R=l(Math.pow(_,R)),C=C.j(R).add(l(w))):(C=C.j(b),C=C.add(l(w)))}return C}var f=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-S(this).m();for(var T=0,_=1,b=0;b<this.g.length;b++){var C=this.i(b);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(D(this))return"-"+S(this).toString(T);for(var _=l(Math.pow(T,6)),b=this,C="";;){var A=j(b,_).g;b=N(b,A.j(_));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=A,I(b))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function D(T){return T.h==-1}n.l=function(T){return T=N(this,T),D(T)?-1:I(T)?0:1};function S(T){for(var _=T.g.length,b=[],C=0;C<_;C++)b[C]=~T.g[C];return new o(b,~T.h).add(p)}n.abs=function(){return D(this)?S(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],C=0,A=0;A<=_;A++){var R=C+(this.i(A)&65535)+(T.i(A)&65535),w=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=w>>>16,R&=65535,w&=65535,b[A]=w<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function N(T,_){return T.add(S(_))}n.j=function(T){if(I(this)||I(T))return f;if(D(this))return D(T)?S(this).j(S(T)):S(S(this).j(T));if(D(T))return S(this.j(S(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,b=[],C=0;C<2*_;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<T.g.length;A++){var R=this.i(C)>>>16,w=this.i(C)&65535,Oe=T.i(A)>>>16,Ce=T.i(A)&65535;b[2*C+2*A]+=w*Ce,M(b,2*C+2*A),b[2*C+2*A+1]+=R*Ce,M(b,2*C+2*A+1),b[2*C+2*A+1]+=w*Oe,M(b,2*C+2*A+1),b[2*C+2*A+2]+=R*Oe,M(b,2*C+2*A+2)}for(C=0;C<_;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=_;C<2*_;C++)b[C]=0;return new o(b,0)};function M(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function F(T,_){this.g=T,this.h=_}function j(T,_){if(I(_))throw Error("division by zero");if(I(T))return new F(f,f);if(D(T))return _=j(S(T),_),new F(S(_.g),S(_.h));if(D(_))return _=j(T,S(_)),new F(S(_.g),_.h);if(30<T.g.length){if(D(T)||D(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,C=_;0>=C.l(T);)b=z(b),C=z(C);var A=B(b,1),R=B(C,1);for(C=B(C,2),b=B(b,2);!I(C);){var w=R.add(C);0>=w.l(T)&&(A=A.add(b),R=w),C=B(C,1),b=B(b,1)}return _=N(T,A.j(_)),new F(A,_)}for(A=f;0<=T.l(_);){for(b=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=l(b),w=R.j(_);D(w)||0<w.l(T);)b-=C,R=l(b),w=R.j(_);I(R)&&(R=p),A=A.add(R),T=N(T,w)}return new F(A,T)}n.A=function(T){return j(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],C=0;C<_;C++)b[C]=this.i(C)&T.i(C);return new o(b,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],C=0;C<_;C++)b[C]=this.i(C)|T.i(C);return new o(b,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],C=0;C<_;C++)b[C]=this.i(C)^T.i(C);return new o(b,this.h^T.h)};function z(T){for(var _=T.g.length+1,b=[],C=0;C<_;C++)b[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(b,T.h)}function B(T,_){var b=_>>5;_%=32;for(var C=T.g.length-b,A=[],R=0;R<C;R++)A[R]=0<_?T.i(R+b)>>>_|T.i(R+b+1)<<32-_:T.i(R+b);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LP=v4.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,go=v4.Integer=o}).apply(typeof _4<"u"?_4:typeof self<"u"?self:typeof window<"u"?window:{});var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yo={};var FP,Kae,Ch,VP,ag,yw,UP,jP,BP;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof gw=="object"&&gw];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var x=0;x<d.length-1;x++){var L=d[x];if(!(L in v))break e;v=v[L]}d=d[d.length-1],x=v[d],g=g(x),g!=x&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var v=0,x=!1,L={next:function(){if(!x&&v<d.length){var U=v++;return{value:g(U,d[U]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,v){return v})}});var o=o||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,v){return d.call.apply(d.bind,arguments)}function f(d,g,v){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function p(d,g,v){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function I(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(x,L,U){for(var K=Array(arguments.length-2),et=2;et<arguments.length;et++)K[et-2]=arguments[et];return g.prototype[L].apply(x,K)}}function D(d){let g=d.length;if(0<g){let v=Array(g);for(let x=0;x<g;x++)v[x]=d[x];return v}return[]}function S(d,g){for(let v=1;v<arguments.length;v++){let x=arguments[v];if(c(x)){let L=d.length||0,U=x.length||0;d.length=L+U;for(let K=0;K<U;K++)d[L+K]=x[K]}else d.push(x)}}class N{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(d){return/^[\s\xa0]*$/.test(d)}function F(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function j(d){return j[" "](d),d}j[" "]=function(){};var z=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function B(d,g,v){for(let x in d)g.call(v,d[x],x,d)}function T(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function _(d){let g={};for(let v in d)g[v]=d[v];return g}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,g){let v,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(v in x)d[v]=x[v];for(let U=0;U<b.length;U++)v=b[U],Object.prototype.hasOwnProperty.call(x,v)&&(d[v]=x[v])}}function A(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function R(d){a.setTimeout(()=>{throw d},0)}function w(){var d=ge;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,v){let x=Ce.get();x.set(g,v),this.h?this.h.next=x:this.g=x,this.h=x}}var Ce=new N(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,re=!1,ge=new Oe,at=()=>{let d=a.Promise.resolve(void 0);ee=()=>{d.then(zt)}};var zt=()=>{for(var d;d=w();){try{d.h.call(d.g)}catch(v){R(v)}var g=Ce;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}re=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d})();function dn(d,g){if($e.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(z){e:{try{j(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Vn[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&dn.aa.h.call(this)}}I(dn,$e);var Vn={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),vr=0;function wn(d,g,v,x,L){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!x,this.ha=L,this.key=++vr,this.da=this.fa=!1}function Vr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ki(d){this.src=d,this.g={},this.h=0}ki.prototype.add=function(d,g,v,x,L){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var K=bu(d,g,x,L);return-1<K?(g=d[K],v||(g.fa=!1)):(g=new wn(g,this.src,U,!!x,L),g.fa=v,d.push(g)),g};function vu(d,g){var v=g.type;if(v in d.g){var x=d.g[v],L=Array.prototype.indexOf.call(x,g,void 0),U;(U=0<=L)&&Array.prototype.splice.call(x,L,1),U&&(Vr(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function bu(d,g,v,x){for(var L=0;L<d.length;++L){var U=d[L];if(!U.da&&U.listener==g&&U.capture==!!v&&U.ha==x)return L}return-1}var Tc="closure_lm_"+(1e6*Math.random()|0),Eu={};function hy(d,g,v,x,L){if(x&&x.once)return Iu(d,g,v,x,L);if(Array.isArray(g)){for(var U=0;U<g.length;U++)hy(d,g[U],v,x,L);return null}return v=Is(v),d&&d[yt]?d.K(g,v,l(x)?!!x.capture:!!x,L):wu(d,g,v,!1,x,L)}function wu(d,g,v,x,L,U){if(!g)throw Error("Invalid event type");var K=l(L)?!!L.capture:!!L,et=Tu(d);if(et||(d[Tc]=et=new ki(d)),v=et.add(g,v,x,K,U),v.proxy)return v;if(x=Df(),v.proxy=x,x.src=d,x.listener=v,d.addEventListener)Le||(L=K),L===void 0&&(L=!1),d.addEventListener(g.toString(),x,L);else if(d.attachEvent)d.attachEvent(Sc(g.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Df(){function d(v){return g.call(d.src,d.listener,v)}let g=TT;return d}function Iu(d,g,v,x,L){if(Array.isArray(g)){for(var U=0;U<g.length;U++)Iu(d,g[U],v,x,L);return null}return v=Is(v),d&&d[yt]?d.L(g,v,l(x)?!!x.capture:!!x,L):wu(d,g,v,!0,x,L)}function en(d,g,v,x,L){if(Array.isArray(g))for(var U=0;U<g.length;U++)en(d,g[U],v,x,L);else x=l(x)?!!x.capture:!!x,v=Is(v),d&&d[yt]?(d=d.i,g=String(g).toString(),g in d.g&&(U=d.g[g],v=bu(U,v,x,L),-1<v&&(Vr(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete d.g[g],d.h--)))):d&&(d=Tu(d))&&(g=d.g[g.toString()],d=-1,g&&(d=bu(g,v,x,L)),(v=-1<d?g[d]:null)&&tn(v))}function tn(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[yt])vu(g.i,d);else{var v=d.type,x=d.proxy;g.removeEventListener?g.removeEventListener(v,x,d.capture):g.detachEvent?g.detachEvent(Sc(v),x):g.addListener&&g.removeListener&&g.removeListener(x),(v=Tu(g))?(vu(v,d),v.h==0&&(v.src=null,g[Tc]=null)):Vr(d)}}}function Sc(d){return d in Eu?Eu[d]:Eu[d]="on"+d}function TT(d,g){if(d.da)d=!0;else{g=new dn(g,this);var v=d.listener,x=d.ha||d.src;d.fa&&tn(d),d=v.call(x,g)}return d}function Tu(d){return d=d[Tc],d instanceof ki?d:null}var Af="__closure_events_fn_"+(1e9*Math.random()>>>0);function Is(d){return typeof d=="function"?d:(d[Af]||(d[Af]=function(g){return d.handleEvent(g)}),d[Af])}function nn(){Ze.call(this),this.i=new ki(this),this.M=this,this.F=null}I(nn,Ze),nn.prototype[yt]=!0,nn.prototype.removeEventListener=function(d,g,v,x){en(this,d,g,v,x)};function hn(d,g){var v,x=d.F;if(x)for(v=[];x;x=x.F)v.push(x);if(d=d.M,x=g.type||g,typeof g=="string")g=new $e(g,d);else if(g instanceof $e)g.target=g.target||d;else{var L=g;g=new $e(x,d),C(g,L)}if(L=!0,v)for(var U=v.length-1;0<=U;U--){var K=g.g=v[U];L=ko(K,x,!0,g)&&L}if(K=g.g=d,L=ko(K,x,!0,g)&&L,L=ko(K,x,!1,g)&&L,v)for(U=0;U<v.length;U++)K=g.g=v[U],L=ko(K,x,!1,g)&&L}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],x=0;x<v.length;x++)Vr(v[x]);delete d.g[g],d.h--}}this.F=null},nn.prototype.K=function(d,g,v,x){return this.i.add(String(d),g,!1,v,x)},nn.prototype.L=function(d,g,v,x){return this.i.add(String(d),g,!0,v,x)};function ko(d,g,v,x){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,U=0;U<g.length;++U){var K=g[U];if(K&&!K.da&&K.capture==v){var et=K.listener,Mt=K.ha||K.src;K.fa&&vu(d.i,K),L=et.call(Mt,x)!==!1&&L}}return L&&!x.defaultPrevented}function fy(d,g,v){if(typeof d=="function")v&&(d=p(d,v));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function py(d){d.g=fy(()=>{d.g=null,d.i&&(d.i=!1,py(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class my extends Ze{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:py(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oo(d){Ze.call(this),this.h=d,this.g={}}I(Oo,Ze);var Lo=[];function Su(d){B(d.g,function(g,v){this.g.hasOwnProperty(v)&&tn(g)},d),d.g={}}Oo.prototype.N=function(){Oo.aa.N.call(this),Su(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dc=a.JSON.stringify,Ts=a.JSON.parse,gy=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Fo(){}Fo.prototype.h=null;function Cf(d){return d.h||(d.h=d.i())}function Vo(){}var Uo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rn(){$e.call(this,"d")}I(rn,$e);function Du(){$e.call(this,"c")}I(Du,$e);var br={},jo=null;function Au(){return jo=jo||new nn}br.La="serverreachability";function yy(d){$e.call(this,br.La,d)}I(yy,$e);function Ur(d){let g=Au();hn(g,new yy(g))}br.STAT_EVENT="statevent";function _y(d,g){$e.call(this,br.STAT_EVENT,d),this.stat=g}I(_y,$e);function In(d){let g=Au();hn(g,new _y(g,d))}br.Ma="timingevent";function Ac(d,g){$e.call(this,br.Ma,d),this.size=g}I(Ac,$e);function Bo(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function zo(){this.g=!0}zo.prototype.xa=function(){this.g=!1};function Rf(d,g,v,x,L,U){d.info(function(){if(d.g)if(U)for(var K="",et=U.split("&"),Mt=0;Mt<et.length;Mt++){var tt=et[Mt].split("=");if(1<tt.length){var Rn=tt[0];tt=tt[1];var xn=Rn.split("_");K=2<=xn.length&&xn[1]=="type"?K+(Rn+"="+tt+"&"):K+(Rn+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+g+`
`+v+`
`+K})}function Cc(d,g,v,x,L,U,K){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+g+`
`+v+`
`+U+" "+K})}function $o(d,g,v,x){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+vy(d,v)+(x?" "+x:"")})}function Oi(d,g){d.info(function(){return"TIMEOUT: "+g})}zo.prototype.info=function(){};function vy(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var x=v[d];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Dc(v)}catch{return g}}var Rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xc;function Pc(){}I(Pc,Fo),Pc.prototype.g=function(){return new XMLHttpRequest},Pc.prototype.i=function(){return{}},xc=new Pc;function Li(d,g,v,x){this.j=d,this.i=g,this.l=v,this.R=x||1,this.U=new Oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xf}function xf(){this.i=null,this.g="",this.h=!1}var by={},Ho={};function Ru(d,g,v){d.L=1,d.v=Mu(ti(g)),d.m=v,d.P=!0,xu(d,null)}function xu(d,g){d.F=Date.now(),Wo(d),d.A=ti(d.v);var v=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),Cy(v.i,"t",x),d.C=0,v=d.j.J,d.h=new xf,d.g=y(d.j,v?g:null,!d.m),0<d.O&&(d.M=new my(p(d.Y,d,d.g),d.O)),g=d.U,v=d.g,x=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(Lo[0]=L.toString()),L=Lo);for(var U=0;U<L.length;U++){var K=hy(v,L[U],x||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Ur(),Rf(d.i,d.u,d.A,d.l,d.R,d.m)}Li.prototype.ca=function(d){d=d.target;let g=this.M;g&&Jn(d)==3?g.j():this.Y(d)},Li.prototype.Y=function(d){try{if(d==this.g)e:{let xn=Jn(this.g);var g=this.g.Ba();let zu=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||My(this.g)))){this.J||xn!=4||g==7||(g==8||0>=zu?Ur(3):Ur(2)),Pu(this);var v=this.g.Z();this.X=v;t:if(qo(this)){var x=My(this.g);d="";var L=x.length,U=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),Go(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(x[g],{stream:!(U&&g==L-1)});x.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=v==200,Cc(this.i,this.u,this.A,this.l,this.R,xn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Mt=this.g;if((et=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(et)){var tt=et;break t}}tt=null}if(v=tt)$o(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nc(this,v);else{this.o=!1,this.s=3,In(12),Fi(this),Go(this);break e}}if(this.P){v=!0;let oi;for(;!this.J&&this.C<K.length;)if(oi=Ss(this,K),oi==Ho){xn==4&&(this.s=4,In(14),v=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(oi==by){this.s=4,In(15),$o(this.i,this.l,K,"[Invalid Chunk]"),v=!1;break}else $o(this.i,this.l,oi,null),Nc(this,oi);if(qo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||K.length!=0||this.h.h||(this.s=1,In(16),v=!1),this.o=this.o&&v,!v)$o(this.i,this.l,K,"[Invalid Chunked Response]"),Fi(this),Go(this);else if(0<K.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Bu(Rn),Rn.M=!0,In(11))}}else $o(this.i,this.l,K,null),Nc(this,K);xn==4&&Fi(this),this.o&&!this.J&&(xn==4?Cn(this.j,this):(this.o=!1,Wo(this)))}else ky(this.g),v==400&&0<K.indexOf("Unknown SID")?(this.s=3,In(12)):(this.s=0,In(13)),Fi(this),Go(this)}}}catch{}finally{}};function qo(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Ss(d,g){var v=d.C,x=g.indexOf(`
`,v);return x==-1?Ho:(v=Number(g.substring(v,x)),isNaN(v)?by:(x+=1,x+v>g.length?Ho:(g=g.slice(x,x+v),d.C=x+v,g)))}Li.prototype.cancel=function(){this.J=!0,Fi(this)};function Wo(d){d.S=Date.now()+d.I,Ey(d,d.I)}function Ey(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Bo(p(d.ba,d),g)}function Pu(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Li.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Oi(this.i,this.A),this.L!=2&&(Ur(),In(17)),Fi(this),this.s=2,Go(this)):Ey(this,this.S-d)};function Go(d){d.j.G==0||d.J||Cn(d.j,d)}function Fi(d){Pu(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Su(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Nc(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||Of(v.h,d))){if(!d.K&&Of(v.h,d)&&v.G==3){try{var x=v.Da.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)As(v),ea(v);else break e;ju(v),In(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Bo(p(v.Za,v),6e3));if(1>=kf(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ji(v,11)}else if((d.K||v.g==d)&&As(v),!M(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let tt=L[g];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];let Rn=tt[3];Rn!=null&&(v.la=Rn,v.j.info("VER="+v.la));let xn=tt[4];xn!=null&&(v.Aa=xn,v.j.info("SVER="+v.Aa));let zu=tt[5];zu!=null&&typeof zu=="number"&&0<zu&&(x=1.5*zu,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;let oi=d.g;if(oi){let Oy=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oy){var U=x.h;U.g||Oy.indexOf("spdy")==-1&&Oy.indexOf("quic")==-1&&Oy.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(jr(U,U.h),U.h=null))}if(x.D){let DT=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;DT&&(x.ya=DT,pt(x.I,x.D,DT))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var K=d;if(x.qa=h(x,x.J?x.ia:null,x.W),K.K){Er(x.h,K);var et=K,Mt=x.L;Mt&&(et.I=Mt),et.B&&(Pu(et),Wo(et)),x.g=K}else Hf(x);0<v.i.length&&Uc(v)}else tt[0]!="stop"&&tt[0]!="close"||ji(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ji(v,7):Fu(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}Ur(4)}catch{}}var Pf=class{constructor(d,g){this.g=d,this.map=g}};function Nf(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mf(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function kf(d){return d.h?1:d.g?d.g.size:0}function Of(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function jr(d,g){d.g?d.g.add(g):d.h=g}function Er(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Nf.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ko(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return D(d.i)}function Mc(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,x=0;x<v;x++)g.push(d[x]);return g}g=[],v=0;for(x in d)g[v++]=d[x];return g}function Lf(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let x in d)g[v++]=x;return g}}}function dt(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=Lf(d),x=Mc(d),L=x.length,U=0;U<L;U++)g.call(void 0,x[U],v&&v[U],d)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var x=d[v].indexOf("="),L=null;if(0<=x){var U=d[v].substring(0,x);L=d[v].substring(x+1)}else U=d[v];g(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function wr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof wr){this.h=d.h,Lc(this,d.j),this.o=d.o,this.g=d.g,Nu(this,d.s),this.l=d.l;var g=d.i,v=new Fc;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),wy(this,v),this.m=d.m}else d&&(g=String(d).match(kc))?(this.h=!1,Lc(this,g[1]||"",!0),this.o=ni(g[2]||""),this.g=ni(g[3]||"",!0),Nu(this,g[4]),this.l=ni(g[5]||"",!0),wy(this,g[6]||"",!0),this.m=ni(g[7]||"")):(this.h=!1,this.i=new Fc(null,this.h))}wr.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Ir(g,Ff,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Ir(g,Ff,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Ir(v,v.charAt(0)=="/"?Sy:Ty,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Ir(v,Qo)),d.join("")};function ti(d){return new wr(d)}function Lc(d,g,v){d.j=v?ni(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Nu(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function wy(d,g,v){g instanceof Fc?(d.i=g,ku(d.i,d.h)):(v||(g=Ir(g,Dy)),d.i=new Fc(g,d.h))}function pt(d,g,v){d.i.set(g,v)}function Mu(d){return pt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ni(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ir(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,Iy),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Iy(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ff=/[#\/\?@]/g,Ty=/[#\?:]/g,Sy=/[#\?]/g,Dy=/[#\?@]/g,Qo=/#/g;function Fc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Vi(d){d.g||(d.g=new Map,d.h=0,d.i&&Oc(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Fc.prototype,n.add=function(d,g){Vi(this),this.i=null,d=ii(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function Ay(d,g){Vi(d),g=ii(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ri(d,g){return Vi(d),g=ii(d,g),d.g.has(g)}n.forEach=function(d,g){Vi(this),this.g.forEach(function(v,x){v.forEach(function(L){d.call(g,L,x,this)},this)},this)},n.na=function(){Vi(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let x=0;x<g.length;x++){let L=d[x];for(let U=0;U<L.length;U++)v.push(g[x])}return v},n.V=function(d){Vi(this);let g=[];if(typeof d=="string")ri(this,d)&&(g=g.concat(this.g.get(ii(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return Vi(this),this.i=null,d=ii(this,d),ri(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Cy(d,g,v){Ay(d,g),0<v.length&&(d.i=null,d.g.set(ii(d,g),D(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var x=g[v];let U=encodeURIComponent(String(x)),K=this.V(x);for(x=0;x<K.length;x++){var L=U;K[x]!==""&&(L+="="+encodeURIComponent(String(K[x]))),d.push(L)}}return this.i=d.join("&")};function ii(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function ku(d,g){g&&!d.j&&(Vi(d),d.i=null,d.g.forEach(function(v,x){var L=x.toLowerCase();x!=L&&(Ay(this,x),Cy(this,L,v))},d)),d.j=g}function Ry(d,g){let v=new zo;if(a.Image){let x=new Image;x.onload=m(Xn,v,"TestLoadImage: loaded",!0,g,x),x.onerror=m(Xn,v,"TestLoadImage: error",!1,g,x),x.onabort=m(Xn,v,"TestLoadImage: abort",!1,g,x),x.ontimeout=m(Xn,v,"TestLoadImage: timeout",!1,g,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else g(!1)}function Vc(d,g){let v=new zo,x=new AbortController,L=setTimeout(()=>{x.abort(),Xn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:x.signal}).then(U=>{clearTimeout(L),U.ok?Xn(v,"TestPingServer: ok",!0,g):Xn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Xn(v,"TestPingServer: error",!1,g)})}function Xn(d,g,v,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(v)}catch{}}function xy(){this.g=new gy}function Vf(d,g,v){let x=v||"";try{dt(d,function(L,U){let K=L;l(L)&&(K=Dc(L)),g.push(x+U+"="+encodeURIComponent(K))})}catch(L){throw g.push(x+"type="+encodeURIComponent("_badmap")),L}}function ht(d){this.l=d.Ub||null,this.j=d.eb||!1}I(ht,Fo),ht.prototype.g=function(){return new Ou(this.l,this.j)},ht.prototype.i=(function(d){return function(){return d}})({});function Ou(d,g){nn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ou,nn),n=Ou.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Xo(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Py(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Py(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Yo(this):Xo(this),this.readyState==3&&Py(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Yo(this))},n.Qa=function(d){this.g&&(this.response=d,Yo(this))},n.ga=function(){this.g&&Yo(this)};function Yo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Xo(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Xo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Uf(d){let g="";return B(d,function(v,x){g+=x,g+=":",g+=v,g+=`\r
`}),g}function Jo(d,g,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=Uf(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):pt(d,g,v))}function rt(d){nn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(rt,nn);var Ny=/^https?$/i,ST=["POST","PUT"];n=rt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xc.g(),this.v=this.o?Cf(this.o):Cf(xc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Zo(this,U);return}if(d=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)v.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let U of x.keys())v.set(U,x.get(U));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ST,g,void 0))||x||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,K]of v)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bf(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){Zo(this,U)}};function Zo(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,jf(d),Ds(d)}function jf(d){d.A||(d.A=!0,hn(d,"complete"),hn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,hn(this,"complete"),hn(this,"abort"),Ds(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lu(this):this.bb())},n.bb=function(){Lu(this)};function Lu(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Jn(d)!=4||d.Z()!=2)){if(d.u&&Jn(d)==4)fy(d.Ea,0,d);else if(hn(d,"readystatechange"),Jn(d)==4){d.h=!1;try{let K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var x;if(x=K===0){var L=String(d.D).match(kc)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),x=!Ny.test(L?L.toLowerCase():"")}v=x}if(v)hn(d,"complete"),hn(d,"success");else{d.m=6;try{var U=2<Jn(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",jf(d)}}finally{Ds(d)}}}}function Ds(d,g){if(d.g){Bf(d);let v=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||hn(d,"ready");try{v.onreadystatechange=x}catch{}}}function Bf(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Jn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ts(g)}};function My(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ky(d){let g={};d=(d.g&&2<=Jn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(M(d[x]))continue;var v=A(d[x]);let L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let U=g[L]||[];g[L]=U,U.push(v)}T(g,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function zf(d){this.Aa=0,this.i=[],this.j=new zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=si("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=si("baseRetryDelayMs",5e3,d),this.cb=si("retryDelaySeedMs",1e4,d),this.Wa=si("forwardChannelMaxRetries",2,d),this.wa=si("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Nf(d&&d.concurrentRequestLimit),this.Da=new xy,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zf.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,x){In(0),this.W=d,this.H=g||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=h(this,null,this.W),Uc(this)};function Fu(d){if(Vu(d),d.G==3){var g=d.U++,v=ti(d.I);if(pt(v,"SID",d.K),pt(v,"RID",g),pt(v,"TYPE","terminate"),ta(d,v),g=new Li(d,d.j,g),g.L=2,g.v=Mu(ti(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=y(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Wo(g)}Cs(d)}function ea(d){d.g&&(Bu(d),d.g.cancel(),d.g=null)}function Vu(d){ea(d),d.u&&(a.clearTimeout(d.u),d.u=null),As(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Uc(d){if(!Mf(d.h)&&!d.s){d.s=!0;var g=d.Ga;ee||at(),re||(ee(),re=!0),ge.add(g,d),d.B=0}}function Uu(d,g){return kf(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Bo(p(d.Ga,d,g),Wf(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let L=new Li(this,this.j,d),U=this.o;if(this.S&&(U?(U=_(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(g+=x,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ui(this,L,g),v=ti(this.I),pt(v,"RID",d),pt(v,"CVER",22),this.D&&pt(v,"X-HTTP-Session-Id",this.D),ta(this,v),U&&(this.O?g="headers="+encodeURIComponent(String(Uf(U)))+"&"+g:this.m&&Jo(v,this.m,U)),jr(this.h,L),this.Ua&&pt(v,"TYPE","init"),this.P?(pt(v,"$req",g),pt(v,"SID","null"),L.T=!0,Ru(L,v,null)):Ru(L,v,g),this.G=2}}else this.G==3&&(d?$f(this,d):this.i.length==0||Mf(this.h)||$f(this))};function $f(d,g){var v;g?v=g.l:v=d.U++;let x=ti(d.I);pt(x,"SID",d.K),pt(x,"RID",v),pt(x,"AID",d.T),ta(d,x),d.m&&d.o&&Jo(x,d.m,d.o),v=new Li(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Ui(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),jr(d.h,v),Ru(v,x,g)}function ta(d,g){d.H&&B(d.H,function(v,x){pt(g,x,v)}),d.l&&dt({},function(v,x){pt(g,x,v)})}function Ui(d,g,v){v=Math.min(d.i.length,v);var x=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let U=-1;for(;;){let K=["count="+v];U==-1?0<v?(U=L[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let et=!0;for(let Mt=0;Mt<v;Mt++){let tt=L[Mt].g,Rn=L[Mt].map;if(tt-=U,0>tt)U=Math.max(0,L[Mt].g-100),et=!1;else try{Vf(Rn,K,"req"+tt+"_")}catch{x&&x(Rn)}}if(et){x=K.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,x}function Hf(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ee||at(),re||(ee(),re=!0),ge.add(g,d),d.v=0}}function ju(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Bo(p(d.Fa,d),Wf(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,qf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Bo(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,In(10),ea(this),qf(this))};function Bu(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function qf(d){d.g=new Li(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=ti(d.qa);pt(g,"RID","rpc"),pt(g,"SID",d.K),pt(g,"AID",d.T),pt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&pt(g,"TO",d.ja),pt(g,"TYPE","xmlhttp"),ta(d,g),d.m&&d.o&&Jo(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Mu(ti(g)),v.m=null,v.P=!0,xu(v,d)}n.Za=function(){this.C!=null&&(this.C=null,ea(this),ju(this),In(19))};function As(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Cn(d,g){var v=null;if(d.g==g){As(d),Bu(d),d.g=null;var x=2}else if(Of(d.h,g))v=g.D,Er(d.h,g),x=1;else return;if(d.G!=0){if(g.o)if(x==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;x=Au(),hn(x,new Ac(x,v)),Uc(d)}else Hf(d);else if(L=g.s,L==3||L==0&&0<g.X||!(x==1&&Uu(d,g)||x==2&&ju(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),L){case 1:ji(d,5);break;case 4:ji(d,10);break;case 3:ji(d,6);break;default:ji(d,2)}}}function Wf(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function ji(d,g){if(d.j.info("Error code "+g),g==2){var v=p(d.fb,d),x=d.Xa;let L=!x;x=new wr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lc(x,"https"),Mu(x),L?Ry(x.toString(),v):Vc(x.toString(),v)}else In(2);d.G=0,d.l&&d.l.sa(g),Cs(d),Vu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function Cs(d){if(d.G=0,d.ka=[],d.l){let g=Ko(d.h);(g.length!=0||d.i.length!=0)&&(S(d.ka,g),S(d.ka,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.ra()}}function h(d,g,v){var x=v instanceof wr?ti(v):new wr(v);if(x.g!="")g&&(x.g=g+"."+x.g),Nu(x,x.s);else{var L=a.location;x=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var U=new wr(null);x&&Lc(U,x),g&&(U.g=g),L&&Nu(U,L),v&&(U.l=v),x=U}return v=d.D,g=d.ya,v&&g&&pt(x,v,g),pt(x,"VER",d.la),ta(d,x),x}function y(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new rt(new ht({eb:v})):new rt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function E(){}n=E.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function P(){}P.prototype.g=function(d,g){return new k(d,g)};function k(d,g){nn.call(this),this.g=new zf(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!M(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!M(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ye(this)}I(k,nn),k.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},k.prototype.close=function(){Fu(this.g)},k.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=Dc(d),d=v);g.i.push(new Pf(g.Ya++,d)),g.G==3&&Uc(g)},k.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,k.aa.N.call(this)};function V(d){rn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}I(V,rn);function X(){Du.call(this),this.status=1}I(X,Du);function ye(d){this.g=d}I(ye,E),ye.prototype.ua=function(){hn(this.g,"a")},ye.prototype.ta=function(d){hn(this.g,new V(d))},ye.prototype.sa=function(d){hn(this.g,new X)},ye.prototype.ra=function(){hn(this.g,"b")},P.prototype.createWebChannel=P.prototype.g,k.prototype.send=k.prototype.o,k.prototype.open=k.prototype.m,k.prototype.close=k.prototype.close,BP=yo.createWebChannelTransport=function(){return new P},jP=yo.getStatEventTarget=function(){return Au()},UP=yo.Event=br,yw=yo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rc.NO_ERROR=0,Rc.TIMEOUT=8,Rc.HTTP_ERROR=6,ag=yo.ErrorCode=Rc,Cu.COMPLETE="complete",VP=yo.EventType=Cu,Vo.EventType=Uo,Uo.OPEN="a",Uo.CLOSE="b",Uo.ERROR="c",Uo.MESSAGE="d",nn.prototype.listen=nn.prototype.K,Ch=yo.WebChannel=Vo,Kae=yo.FetchXmlHttpFactory=ht,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,FP=yo.XhrIo=rt}).apply(typeof gw<"u"?gw:typeof self<"u"?self:typeof window<"u"?window:{});var b4="@firebase/firestore",E4="4.8.0";var bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");var Kh="11.10.0";var tu=new ts("@firebase/firestore");function Rh(){return tu.logLevel}function te(n,...e){if(tu.logLevel<=Ve.DEBUG){let t=e.map(RM);tu.debug(`Firestore (${Kh}): ${n}`,...t)}}function _o(n,...e){if(tu.logLevel<=Ve.ERROR){let t=e.map(RM);tu.error(`Firestore (${Kh}): ${n}`,...t)}}function Ya(n,...e){if(tu.logLevel<=Ve.WARN){let t=e.map(RM);tu.warn(`Firestore (${Kh}): ${n}`,...t)}}function RM(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cH(n,r,t)}function cH(n,e,t){let r=`FIRESTORE (${Kh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _o(r),new Error(r)}function lt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||cH(e,i,r)}function Ie(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var us=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Tw=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},WP=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}},GP=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},KP=class{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new us;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new us,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new us)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new Tw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new bn(e)}},QP=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},YP=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},XP=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);let r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sw(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Sw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Qae(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function lH(){return new TextEncoder}var pg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Qae(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ke(n,e){return n<e?-1:n>e?1:0}function JP(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ke(r,i);{let s=lH(),o=Yae(s.encode(w4(n,t)),s.encode(w4(e,t)));return o!==0?o:ke(r,i)}}t+=r>65535?2:1}return ke(n.length,e.length)}function w4(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Yae(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function Lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var I4="__name__",Dw=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ke(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):JP(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return go.fromString(e.substring(4,e.length-2))}},jt=class n extends Dw{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Xae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fr=class n extends Dw{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Xae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I4}static keyField(){return new n([I4])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(jt.fromString(e))}static fromName(e){return new n(jt.fromString(e).popFirst(5))}static empty(){return new n(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new jt(e.slice()))}};function Jae(n,e,t){if(!t)throw new se(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Zae(n,e,t,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T4(n){if(!fe.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uH(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xM(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function mg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xM(n);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Cg(n,e){if(!uH(n))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new se(q.INVALID_ARGUMENT,t);return!0}var S4=-62135596800,D4=1e6,Jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*D4);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<S4)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D4}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cg(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-S4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Xt("string",Jt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};var Se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gg=-1,ZP=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ZP.UNKNOWN_ID=-1;function ece(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new nu(i,fe.empty(),e)}function tce(n){return new nu(n.readTime,n.key,gg)}var nu=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Se.min(),fe.empty(),gg)}static max(){return new n(Se.max(),fe.empty(),gg)}};function nce(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}var rce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",eN=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Qh(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==rce)throw n;te("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function ice(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yh(n){return n.name==="IndexedDbTransactionError"}var PM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),NM=-1;function tI(n){return n==null}function yg(n){return n===0&&1/n==-1/0}function sce(n){return typeof n=="number"&&Number.isInteger(n)&&!yg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var dH="";function oce(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A4(e)),e=ace(n.get(t),e);return A4(e)}function ace(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case dH:t+="";break;default:t+=s}}return t}function A4(n){return n+dH+""}var cce="remoteDocuments",hH="owner";var fH="mutationQueues";var pH="mutations";var mH="documentMutations",lce="remoteDocumentsV14";var gH="remoteDocumentGlobal";var yH="targets";var _H="targetDocuments";var vH="targetGlobal",bH="collectionParents";var EH="clientMetadata";var wH="bundles";var IH="namedQueries";var uce="indexConfiguration";var dce="indexState";var hce="indexEntries";var TH="documentOverlays";var fce="globals";var pce=[fH,pH,mH,cce,yH,hH,vH,_H,EH,gH,bH,wH,IH],x2e=[...pce,TH],mce=[fH,pH,mH,lce,yH,hH,vH,_H,EH,gH,bH,wH,IH,TH],gce=mce,yce=[...gce,uce,dce,hce];var P2e=[...yce,fce];function C4(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function au(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SH(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Nt=class n{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mh(this.root,e,this.comparator,!0)}},Mh=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ds=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1;ds.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var En=class n{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Aw=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ls=class n{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new n([])}unionWith(e){let t=new En(Fr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cw=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Fn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Cw("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Fn.EMPTY_BYTE_STRING=new Fn("");var _ce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(n){if(lt(!!n,39018),typeof n=="string"){let e=0,t=_ce.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bo(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}var DH="server_timestamp",AH="__type__",CH="__previous_value__",RH="__local_write_time__";function MM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[AH])===null||t===void 0?void 0:t.stringValue)===DH}function nI(n){let e=n.mapValue.fields[CH];return MM(e)?nI(e):e}function _g(n){let e=vo(n.mapValue.fields[RH].timestampValue);return new Jt(e.seconds,e.nanos)}var tN=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},Rw="(default)",xw=class n{constructor(e,t){this.projectId=e,this.database=t||Rw}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Rw}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kM="__type__",xH="__max__",_w={mapValue:{fields:{__type__:{stringValue:xH}}}},OM="__vector__",Fh="value";function Xa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?MM(n)?4:NH(n)?9007199254740991:PH(n)?10:11:he(28295,{value:n})}function ps(n,e){if(n===e)return!0;let t=Xa(n);if(t!==Xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _g(n).isEqual(_g(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=vo(i.timestampValue),a=vo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return bo(i.bytesValue).isEqual(bo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Tt(i.doubleValue),a=Tt(s.doubleValue);return o===a?yg(o)===yg(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Lh(n.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(C4(o)!==C4(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ps(o[c],a[c])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function vg(n,e){return(n.values||[]).find(t=>ps(t,e))!==void 0}function Vh(n,e){if(n===e)return 0;let t=Xa(n),r=Xa(e);if(t!==r)return ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Tt(s.integerValue||s.doubleValue),c=Tt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return R4(n.timestampValue,e.timestampValue);case 4:return R4(_g(n),_g(e));case 5:return JP(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=bo(s),c=bo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ke(a[l],c[l]);if(u!==0)return u}return ke(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ke(Tt(s.latitude),Tt(o.latitude));return a!==0?a:ke(Tt(s.longitude),Tt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return x4(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,u;let f=s.fields||{},p=o.fields||{},m=(a=f[Fh])===null||a===void 0?void 0:a.arrayValue,I=(c=p[Fh])===null||c===void 0?void 0:c.arrayValue,D=ke(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((u=I?.values)===null||u===void 0?void 0:u.length)||0);return D!==0?D:x4(m,I)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===_w.mapValue&&o===_w.mapValue)return 0;if(s===_w.mapValue)return 1;if(o===_w.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){let p=JP(c[f],u[f]);if(p!==0)return p;let m=Vh(a[c[f]],l[u[f]]);if(m!==0)return m}return ke(c.length,u.length)})(n.mapValue,e.mapValue);default:throw he(23264,{le:t})}}function R4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);let t=vo(n),r=vo(e),i=ke(t.seconds,r.seconds);return i!==0?i:ke(t.nanos,r.nanos)}function x4(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Vh(t[i],r[i]);if(s)return s}return ke(t.length,r.length)}function Uh(n){return nN(n)}function nN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=vo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return bo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=nN(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${nN(t.fields[o])}`;return i+"}"})(n.mapValue):he(61005,{value:n})}function Ew(n){switch(Xa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=nI(n);return e?16+Ew(e):16;case 5:return 2*n.stringValue.length;case 6:return bo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Ew(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return au(r.fields,(s,o)=>{i+=s.length+Ew(o)}),i})(n.mapValue);default:throw he(13486,{value:n})}}function rN(n){return!!n&&"integerValue"in n}function LM(n){return!!n&&"arrayValue"in n}function P4(n){return!!n&&"nullValue"in n}function N4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ww(n){return!!n&&"mapValue"in n}function PH(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[kM])===null||t===void 0?void 0:t.stringValue)===OM}function lg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return au(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NH(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xH}var M2e={mapValue:{fields:{[kM]:{stringValue:OM},[Fh]:{arrayValue:{}}}}};var Ri=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ww(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lg(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=lg(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ww(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ww(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){au(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(lg(this.value))}};function MH(n){let e=[];return au(n.fields,(t,r)=>{let i=new Fr([t]);if(ww(r)){let s=MH(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ls(e)}var xi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Se.min(),Se.min(),Se.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Se.min(),Se.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Se.min(),Se.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var jh=class{constructor(e,t){this.position=e,this.inclusive=t}};function M4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),t.key):r=Vh(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function k4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ps(n.position[t],e.position[t]))return!1;return!0}var Bh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pw=class{},un=class n extends Pw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sN(e,t,r):t==="array-contains"?new cN(e,r):t==="in"?new lN(e,r):t==="not-in"?new uN(e,r):t==="array-contains-any"?new dN(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new oN(e,r):new aN(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vh(t,this.value)):t!==null&&Xa(this.value)===Xa(t)&&this.matchesComparison(Vh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ms=class n extends Pw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return kH(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function kH(n){return n.op==="and"}function OH(n){return bce(n)&&kH(n)}function bce(n){for(let e of n.filters)if(e instanceof ms)return!1;return!0}function iN(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Uh(n.value);if(OH(n))return n.filters.map(e=>iN(e)).join(",");{let e=n.filters.map(t=>iN(t)).join(",");return`${n.op}(${e})`}}function LH(n,e){return n instanceof un?(function(r,i){return i instanceof un&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)})(n,e):n instanceof ms?(function(r,i){return i instanceof ms&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&LH(o,i.filters[a]),!0):!1})(n,e):void he(19439)}function FH(n){return n instanceof un?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uh(t.value)}`})(n):n instanceof ms?(function(t){return t.op.toString()+" {"+t.getFilters().map(FH).join(" ,")+"}"})(n):"Filter"}var sN=class extends un{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},oN=class extends un{constructor(e,t){super(e,"in",t),this.keys=VH("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},aN=class extends un{constructor(e,t){super(e,"not-in",t),this.keys=VH("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function VH(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}var cN=class extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return LM(t)&&vg(t.arrayValue,this.value)}},lN=class extends un{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vg(this.value.arrayValue,t)}},uN=class extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(vg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vg(this.value.arrayValue,t)}},dN=class extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!LM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vg(this.value.arrayValue,r))}};var hN=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function O4(n,e=null,t=[],r=[],i=null,s=null,o=null){return new hN(n,e,t,r,i,s,o)}function FM(n){let e=Ie(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>iN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),tI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uh(r)).join(",")),e.Pe=t}return e.Pe}function VM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!k4(n.startAt,e.startAt)&&k4(n.endAt,e.endAt)}function fN(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var zh=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Ece(n,e,t,r,i,s,o,a){return new zh(n,e,t,r,i,s,o,a)}function UM(n){return new zh(n)}function L4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wce(n){return n.collectionGroup!==null}function ug(n){let e=Ie(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(Fr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Bh(s,r))}),t.has(Fr.keyField().canonicalString())||e.Te.push(new Bh(Fr.keyField(),r))}return e.Te}function hs(n){let e=Ie(n);return e.Ie||(e.Ie=Ice(e,ug(n))),e.Ie}function Ice(n,e){if(n.limitType==="F")return O4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Bh(i.field,s)});let t=n.endAt?new jh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jh(n.startAt.position,n.startAt.inclusive):null;return O4(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pN(n,e,t){return new zh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rI(n,e){return VM(hs(n),hs(e))&&n.limitType===e.limitType}function UH(n){return`${FM(hs(n))}|lt:${n.limitType}`}function xh(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>FH(i)).join(", ")}]`),tI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Uh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Uh(i)).join(",")),`Target(${r})`})(hs(n))}; limitType=${n.limitType})`}function iI(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of ug(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=M4(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,ug(r),i)||r.endAt&&!(function(o,a,c){let l=M4(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,ug(r),i))})(n,e)}function Tce(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jH(n){return(e,t)=>{let r=!1;for(let i of ug(n)){let s=Sce(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Sce(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Vh(c,l):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}var Eo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return SH(this.inner)}size(){return this.innerSize}};var Dce=new Nt(fe.comparator);function wo(){return Dce}var BH=new Nt(fe.comparator);function cg(...n){let e=BH;for(let t of n)e=e.insert(t.key,t);return e}function zH(n){let e=BH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yl(){return dg()}function $H(){return dg()}function dg(){return new Eo(n=>n.toString(),(n,e)=>n.isEqual(e))}var Ace=new Nt(fe.comparator),Cce=new En(fe.comparator);function je(...n){let e=Cce;for(let t of n)e=e.add(t);return e}var Rce=new En(ke);function xce(){return Rce}function jM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yg(e)?"-0":e}}function HH(n){return{integerValue:""+n}}function Pce(n,e){return sce(e)?HH(e):jM(n,e)}var $h=class{constructor(){this._=void 0}};function Nce(n,e,t){return n instanceof Hh?(function(i,s){let o={fields:{[AH]:{stringValue:DH},[RH]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&MM(s)&&(s=nI(s)),s&&(o.fields[CH]=s),{mapValue:o}})(t,e):n instanceof ru?WH(n,e):n instanceof iu?GH(n,e):(function(i,s){let o=qH(i,s),a=F4(o)+F4(i.Ee);return rN(o)&&rN(i.Ee)?HH(a):jM(i.serializer,a)})(n,e)}function Mce(n,e,t){return n instanceof ru?WH(n,e):n instanceof iu?GH(n,e):t}function qH(n,e){return n instanceof qh?(function(r){return rN(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Hh=class extends $h{},ru=class extends $h{constructor(e){super(),this.elements=e}};function WH(n,e){let t=KH(e);for(let r of n.elements)t.some(i=>ps(i,r))||t.push(r);return{arrayValue:{values:t}}}var iu=class extends $h{constructor(e){super(),this.elements=e}};function GH(n,e){let t=KH(e);for(let r of n.elements)t=t.filter(i=>!ps(i,r));return{arrayValue:{values:t}}}var qh=class extends $h{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function F4(n){return Tt(n.integerValue||n.doubleValue)}function KH(n){return LM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kce(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ru&&i instanceof ru||r instanceof iu&&i instanceof iu?Lh(r.elements,i.elements,ps):r instanceof qh&&i instanceof qh?ps(r.Ee,i.Ee):r instanceof Hh&&i instanceof Hh})(n.transform,e.transform)}var mN=class{constructor(e,t){this.version=e,this.transformResults=t}},Zl=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Iw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Wh=class{};function QH(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nw(n.key,Zl.none()):new su(n.key,n.data,Zl.none());{let t=n.data,r=Ri.empty(),i=new En(Fr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Io(n.key,r,new ls(i.toArray()),Zl.none())}}function Oce(n,e,t){n instanceof su?(function(i,s,o){let a=i.value.clone(),c=U4(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Io?(function(i,s,o){if(!Iw(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=U4(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(YH(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function hg(n,e,t,r){return n instanceof su?(function(s,o,a,c){if(!Iw(s.precondition,o))return a;let l=s.value.clone(),u=j4(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Io?(function(s,o,a,c){if(!Iw(s.precondition,o))return a;let l=j4(s.fieldTransforms,c,o),u=o.data;return u.setAll(YH(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return Iw(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Lce(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=qH(r.transform,i||null);s!=null&&(t===null&&(t=Ri.empty()),t.set(r.field,s))}return t||null}function V4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lh(r,i,(s,o)=>kce(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var su=class extends Wh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Io=class extends Wh{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function YH(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function U4(n,e,t){let r=new Map;lt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Mce(o,a,t[i]))}return r}function j4(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Nce(s,o,e))}return r}var Nw=class extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gN=class extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yN=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Oce(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hg(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$H();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=QH(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),je())}isEqual(e){return this.batchId===e.batchId&&Lh(this.mutations,e.mutations,(t,r)=>V4(t,r))&&Lh(this.baseMutations,e.baseMutations,(t,r)=>V4(t,r))}},_N=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Ace})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var vN=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bN=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Qt,Ke;function Fce(n){switch(n){case q.OK:return he(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function XH(n){if(n===void 0)return _o("GRPC error has no .code"),q.UNKNOWN;switch(n){case Qt.OK:return q.OK;case Qt.CANCELLED:return q.CANCELLED;case Qt.UNKNOWN:return q.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return q.INTERNAL;case Qt.UNAVAILABLE:return q.UNAVAILABLE;case Qt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Qt.NOT_FOUND:return q.NOT_FOUND;case Qt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Qt.ABORTED:return q.ABORTED;case Qt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Qt.DATA_LOSS:return q.DATA_LOSS;default:return he(39323,{code:n})}}(Ke=Qt||(Qt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var B4=null;var Vce=new go([4294967295,4294967295],0);function z4(n){let e=lH().encode(n),t=new LP;return t.update(e),new Uint8Array(t.digest())}function $4(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new go([t,r],0),new go([i,s],0)]}var EN=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xl(`Invalid padding: ${t}`);if(r<0)throw new Xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=go.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(go.fromNumber(r)));return i.compare(Vce)===1&&(i=new go([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=z4(e),[r,i]=$4(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=z4(e),[r,i]=$4(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Xl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mw=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Se.min(),i,new Nt(ke),wo(),je())}},bg=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,je(),je(),je())}};var kh=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},kw=class{constructor(e,t){this.targetId=e,this.De=t}},Ow=class{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Lw=class{constructor(){this.ve=0,this.Ce=H4(),this.Fe=Fn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),t=je(),r=je();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:s})}}),new bg(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=H4()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},wN=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=wo(),this.je=vw(),this.Je=vw(),this.He=new Nt(ke)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(fN(s))if(r===0){let o=new fe(s.path);this.Xe(t,o,xi.newNoDocument(o,Se.min()))}else lt(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}B4?.ct((function(u,f,p,m,I){var D,S,N,M,F,j;let z={localCacheCount:u,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},B=f.unchangedNames;return B&&(z.bloomFilter={applied:I===0,hashCount:(D=B?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(M=(N=(S=B?.bits)===null||S===void 0?void 0:S.bitmap)===null||N===void 0?void 0:N.length)!==null&&M!==void 0?M:0,padding:(j=(F=B?.bits)===null||F===void 0?void 0:F.padding)!==null&&j!==void 0?j:0,mightContain:T=>{var _;return(_=m?.mightContain(T))!==null&&_!==void 0&&_}}),z})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=bo(r).toUint8Array()}catch(c){if(c instanceof Cw)return Ya("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new EN(o,i,s)}catch(c){return Ya(c instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&fN(a.target)){let c=new fe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,xi.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=je();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new Mw(e,t,this.He,this.ze,r);return this.ze=wo(),this.je=vw(),this.Je=vw(),this.He=new Nt(ke),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Lw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new En(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new En(ke),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Lw),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vw(){return new Nt(fe.comparator)}function H4(){return new Nt(fe.comparator)}var Uce={asc:"ASCENDING",desc:"DESCENDING"},jce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bce={and:"AND",or:"OR"},IN=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function TN(n,e){return n.useProto3Json||tI(e)?e:{value:e}}function Fw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zce(n,e){return Fw(n,e.toTimestamp())}function fs(n){return lt(!!n,49232),Se.fromTimestamp((function(t){let r=vo(t);return new Jt(r.seconds,r.nanos)})(n))}function BM(n,e){return SN(n,e).canonicalString()}function SN(n,e){let t=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ZH(n){let e=jt.fromString(n);return lt(iq(e),10190,{key:e.toString()}),e}function DN(n,e){return BM(n.databaseId,e.path)}function zP(n,e){let t=ZH(e);if(t.get(1)!==n.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(tq(t))}function eq(n,e){return BM(n.databaseId,e)}function $ce(n){let e=ZH(n);return e.length===4?jt.emptyPath():tq(e)}function AN(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tq(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function q4(n,e,t){return{name:DN(n,e),fields:t.value.mapValue.fields}}function Hce(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:he(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(lt(u===void 0||typeof u=="string",58123),Fn.fromBase64String(u||"")):(lt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Fn.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?q.UNKNOWN:XH(l.code);return new se(u,l.message||"")})(o);t=new Ow(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=zP(n,r.document.name),s=fs(r.document.updateTime),o=r.document.createTime?fs(r.document.createTime):Se.min(),a=new Ri({mapValue:{fields:r.document.fields}}),c=xi.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new kh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=zP(n,r.document),s=r.readTime?fs(r.readTime):Se.min(),o=xi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new kh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=zP(n,r.document),s=r.removedTargetIds||[];t=new kh([],s,i,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new bN(i,s),a=r.targetId;t=new kw(a,o)}}return t}function qce(n,e){let t;if(e instanceof su)t={update:q4(n,e.key,e.value)};else if(e instanceof Nw)t={delete:DN(n,e.key)};else if(e instanceof Io)t={update:q4(n,e.key,e.data),updateMask:ele(e.fieldMask)};else{if(!(e instanceof gN))return he(16599,{Rt:e.type});t={verify:DN(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Hh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ru)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof iu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw he(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:zce(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he(27497)})(n,e.precondition)),t}function Wce(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?fs(i.updateTime):fs(s);return o.isEqual(Se.min())&&(o=fs(s)),new mN(o,i.transformResults||[])})(t,e))):[]}function Gce(n,e){return{documents:[eq(n,e.path)]}}function Kce(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eq(n,i);let s=(function(l){if(l.length!==0)return rq(ms.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(p){return{field:Ph(p.field),direction:Xce(p.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=TN(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Qce(n){let e=$ce(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){lt(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(f){let p=nq(f);return p instanceof ms&&OH(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(p=>(function(I){return new Bh(Nh(I.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,tI(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(f){let p=!!f.before,m=f.values||[];return new jh(m,p)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let p=!f.before,m=f.values||[];return new jh(m,p)})(t.endAt)),Ece(e,i,o,s,a,"F",c,l)}function Yce(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nq(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Nh(t.unaryFilter.field);return un.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Nh(t.unaryFilter.field);return un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Nh(t.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Nh(t.unaryFilter.field);return un.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return un.create(Nh(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ms.create(t.compositeFilter.filters.map(r=>nq(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function Xce(n){return Uce[n]}function Jce(n){return jce[n]}function Zce(n){return Bce[n]}function Ph(n){return{fieldPath:n.canonicalString()}}function Nh(n){return Fr.fromServerFormat(n.fieldPath)}function rq(n){return n instanceof un?(function(t){if(t.op==="=="){if(N4(t.value))return{unaryFilter:{field:Ph(t.field),op:"IS_NAN"}};if(P4(t.value))return{unaryFilter:{field:Ph(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N4(t.value))return{unaryFilter:{field:Ph(t.field),op:"IS_NOT_NAN"}};if(P4(t.value))return{unaryFilter:{field:Ph(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ph(t.field),op:Jce(t.op),value:t.value}}})(n):n instanceof ms?(function(t){let r=t.getFilters().map(i=>rq(i));return r.length===1?r[0]:{compositeFilter:{op:Zce(t.op),filters:r}}})(n):he(54877,{filter:n})}function ele(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iq(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Eg=class n{constructor(e,t,r,i,s=Se.min(),o=Se.min(),a=Fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var CN=class{constructor(e){this.gt=e}};function tle(n){let e=Qce({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pN(e,e.limit,"L"):e}var Vw=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),yg(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=vo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(bo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?NH(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):PH(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):he(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Fh,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Tt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Vw.Ut=new Vw;var RN=class{constructor(){this.Dn=new xN}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(nu.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(nu.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},xN=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(jt.comparator)).toArray()}};var k2e=new Uint8Array(0);var W4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sq=41943040,Yr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(sq,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);var wg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var G4="LruGarbageCollector",nle=1048576;function K4([n,e],[t,r]){let i=ke(n,t);return i===0?ke(e,r):i}var PN=class{constructor(e){this.Tr=e,this.buffer=new En(K4),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();K4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},NN=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(G4,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yh(t)?te(G4,"Ignoring IndexedDB error during garbage collection: ",t):await Qh(t)}await this.Rr(3e5)})}},MN=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(PM.ue);let r=new PN(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(W4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W4):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Rh()<=Ve.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function rle(n,e){return new MN(n,e)}var kN=class{constructor(){this.changes=new Eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ON=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var LN=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hg(r.mutation,i,ls.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,t,r=je()){let i=Yl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cg();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Yl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,je()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=wo(),o=dg(),a=(function(){return dg()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Io)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),hg(u.mutation,l,u.mutation.getFieldMask(),Jt.now())):o.set(l.key,ls.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var f;return a.set(l,new ON(u,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=dg(),i=new Nt((o,a)=>o-a),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||ls.empty();u=a.applyToLocalView(l,u),r.set(c,u);let f=(i.get(a.batchId)||je()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,f=$H();u.forEach(p=>{if(!s.has(p)){let m=QH(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wce(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Yl()),a=gg,c=s;return o.next(l=>W.forEach(l,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?W.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,je())).next(u=>({batchId:a,changes:zH(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=cg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=cg();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let l=(function(f,p){return new zh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,xi.newInvalidDocument(u)))});let a=cg();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&hg(u.mutation,l,ls.empty(),Jt.now()),iI(t,l)&&(a=a.insert(c,l))}),a})}};var FN=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:fs(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:tle(i.bundledQuery),readTime:fs(i.readTime)}})(t)),W.resolve()}};var VN=class{constructor(){this.overlays=new Nt(fe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Yl();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=Yl(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Nt((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Yl(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Yl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vN(t,r));let s=this.kr.get(t);s===void 0&&(s=je(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var UN=class{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var Ig=class{constructor(){this.qr=new En(Yt.Qr),this.$r=new En(Yt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Yt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Yt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new fe(new jt([])),r=new Yt(t,e),i=new Yt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new fe(new jt([])),r=new Yt(t,e),i=new Yt(t,e+1),s=je();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Yt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Yt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var jN=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new En(Yt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new yN(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?NM:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Yt(t,0),i=new Yt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(ke);return t.forEach(i=>{let s=new Yt(i,0),o=new Yt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new Yt(new fe(s),0),a=new En(ke);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){lt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new Yt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Yt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var BN=class{constructor(e){this.ni=e,this.docs=(function(){return new Nt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():xi.newInvalidDocument(t))}getEntries(e,t){let r=wo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=wo(),o=t.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||nce(tce(u),r)<=0||(i.has(u.key)||iI(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){he(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zN(this)}getSize(e){return W.resolve(this.size)}},zN=class extends kN{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var $N=class{constructor(e){this.persistence=e,this.ii=new Eo(t=>FM(t),VM),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new Ig,this.targetCount=0,this._i=wg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new wg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var Uw=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new PM(0),this.ci=!1,this.ci=!0,this.li=new UN,this.referenceDelegate=e(this),this.hi=new $N(this),this.indexManager=new RN,this.remoteDocumentCache=(function(i){return new BN(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new CN(t),this.Ti=new FN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new jN(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);let i=new HN(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},HN=class extends eN{constructor(e){super(),this.currentSequenceNumber=e}},qN=class n{constructor(e){this.persistence=e,this.Ai=new Ig,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Se.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},jw=class n{constructor(e,t){this.persistence=e,this.gi=new Eo(r=>oce(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rle(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ew(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var WN=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=je(),i=je();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var GN=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var KN=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ij()?8:ice(_n())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new GN;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Rh()<=Ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",xh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Rh()<=Ve.DEBUG&&te("QueryEngine","Query:",xh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Rh()<=Ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",xh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(t))):W.resolve())}ps(e,t){if(L4(t))return W.resolve(null);let r=hs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pN(t,null,"F"),r=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=je(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,pN(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return L4(t)||i.isEqual(Se.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Rh()<=Ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xh(t)),this.vs(e,o,t,ece(i,gg)).next(a=>a))})}bs(e,t){let r=new En(jH(e));return t.forEach((i,s)=>{iI(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Rh()<=Ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",xh(t)),this.gs.getDocumentsMatchingQuery(e,t,nu.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var zM="LocalStore",ile=3e8,QN=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Nt(ke),this.Ms=new Eo(s=>FM(s),VM),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LN(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function sle(n,e,t,r){return new QN(n,e,t,r)}async function oq(n,e){let t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=je();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function ole(n,e){let t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let f=l.batch,p=f.keys(),m=W.resolve();return p.forEach(I=>{m=m.next(()=>u.getEntry(c,I)).next(D=>{let S=l.docVersions.get(I);lt(S!==null,48541),D.version.compareTo(S)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),u.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=je();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aq(n){let e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function ale(n,e){let t=Ie(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,f)=>{let p=i.get(f);if(!p)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Fn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),(function(D,S,N){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=ile?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,u)&&a.push(t.hi.updateTargetData(s,m))});let c=wo(),l=je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(cle(s,o,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Se.min())){let u=t.hi.getLastRemoteSnapshotVersion(s).next(f=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=i,s))}function cle(n,e,t){let r=je(),i=je();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=wo();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):te(zM,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function lle(n,e){let t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=NM),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ule(n,e){let t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Eg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function YN(n,e,t){let r=Ie(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Yh(o))throw o;te(zM,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Q4(n,e,t){let r=Ie(n),i=Se.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let f=Ie(c),p=f.Ms.get(u);return p!==void 0?W.resolve(f.Fs.get(p)):f.hi.getTargetData(l,u)})(r,o,hs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Se.min(),t?s:je())).next(a=>(dle(r,Tce(e),a),{documents:a,qs:s})))}function dle(n,e,t){let r=n.xs.get(e)||Se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var Bw=class{constructor(){this.activeTargetIds=xce()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var XN=class{constructor(){this.Fo=new Bw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Bw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var JN=class{xo(e){}shutdown(){}};var Y4="ConnectivityMonitor",zw=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(Y4,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){te(Y4,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bw=null;function ZN(){return bw===null?bw=(function(){return 268435456+Math.round(2147483648*Math.random())})():bw++,"0x"+bw.toString(16)}var $P="RestConnection",hle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Rw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=ZN(),a=this.Go(e,t.toUriEncodedString());te($P,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:l}=new URL(a),u=Pa(l);return this.jo(e,a,c,r,u).then(f=>(te($P,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ya($P,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=hle[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var tM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ln="WebChannelConnection",nM=class extends eM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=ZN();return new Promise((a,c)=>{let l=new FP;l.setWithCredentials(!0),l.listenOnce(VP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ag.NO_ERROR:let f=l.getResponseJson();te(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case ag.TIMEOUT:te(Ln,`RPC '${e}' ${o} timed out`),c(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case ag.HTTP_ERROR:let p=l.getStatus();if(te(Ln,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let D=(function(N){let M=N.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(M)>=0?M:q.UNKNOWN})(I.status);c(new se(D,I.message))}else c(new se(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new se(q.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{te(Ln,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);te(Ln,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=ZN(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BP(),a=jP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");te(Ln,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=o.createWebChannel(u,c);this.T_(f);let p=!1,m=!1,I=new tM({Ho:S=>{m?te(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(te(Ln,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),te(Ln,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Yo:()=>f.close()}),D=(S,N,M)=>{S.listen(N,F=>{try{M(F)}catch(j){setTimeout(()=>{throw j},0)}})};return D(f,Ch.EventType.OPEN,()=>{m||(te(Ln,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),D(f,Ch.EventType.CLOSE,()=>{m||(m=!0,te(Ln,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(f))}),D(f,Ch.EventType.ERROR,S=>{m||(m=!0,Ya(Ln,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),I.__(new se(q.UNAVAILABLE,"The operation could not be completed")))}),D(f,Ch.EventType.MESSAGE,S=>{var N;if(!m){let M=S.data[0];lt(!!M,16349);let F=M,j=F?.error||((N=F[0])===null||N===void 0?void 0:N.error);if(j){te(Ln,`RPC '${e}' stream ${i} received error:`,j);let z=j.status,B=(function(b){let C=Qt[b];if(C!==void 0)return XH(C)})(z),T=j.message;B===void 0&&(B=q.INTERNAL,T="Unknown error status: "+z+" with message "+j.message),m=!0,I.__(new se(B,T)),f.close()}else te(Ln,`RPC '${e}' stream ${i} received:`,M),I.a_(M)}}),D(a,UP.STAT_EVENT,S=>{S.stat===yw.PROXY?te(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===yw.NOPROXY&&te(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function HP(){return typeof document<"u"?document:null}function sI(n){return new IN(n,!0)}var $w=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var X4="PersistentStream",Hw=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new $w(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(_o(t.toString()),_o("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new se(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return te(X4,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(te(X4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rM=class extends Hw{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Hce(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?fs(o.readTime):Se.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=AN(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=fN(c)?{documents:Gce(s,c)}:{query:Kce(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=JH(s,o.resumeToken);let l=TN(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=Fw(s,o.snapshotVersion.toTimestamp());let l=TN(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Yce(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=AN(this.serializer),t.removeTarget=e,this.k_(t)}},iM=class extends Hw{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Wce(e.writeResults,e.commitTime),r=fs(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=AN(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>qce(this.serializer,r))};this.k_(t)}};var sM=class{},oM=class extends sM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,SN(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,SN(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},aM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_o(t),this._a=!1):te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ou="RemoteStore",cM=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{cu(this)&&(te(ou,"Restarting streams for network reachability change."),await(async function(c){let l=Ie(c);l.Ia.add(4),await Rg(l),l.Aa.set("Unknown"),l.Ia.delete(4),await oI(l)})(this))})}),this.Aa=new aM(r,i)}};async function oI(n){if(cu(n))for(let e of n.da)await e(!0)}async function Rg(n){for(let e of n.da)await e(!1)}function cq(n,e){let t=Ie(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),WM(t)?qM(t):Xh(t).x_()&&HM(t,e))}function $M(n,e){let t=Ie(n),r=Xh(t);t.Ta.delete(e),r.x_()&&lq(t,e),t.Ta.size===0&&(r.x_()?r.B_():cu(t)&&t.Aa.set("Unknown"))}function HM(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xh(n).H_(e)}function lq(n,e){n.Ra.$e(e),Xh(n).Y_(e)}function qM(n){n.Ra=new wN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Xh(n).start(),n.Aa.aa()}function WM(n){return cu(n)&&!Xh(n).M_()&&n.Ta.size>0}function cu(n){return Ie(n).Ia.size===0}function uq(n){n.Ra=void 0}async function fle(n){n.Aa.set("Online")}async function ple(n){n.Ta.forEach((e,t)=>{HM(n,e)})}async function mle(n,e){uq(n),WM(n)?(n.Aa.la(e),qM(n)):n.Aa.set("Unknown")}async function gle(n,e,t){if(n.Aa.set("Online"),e instanceof Ow&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){te(ou,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qw(n,r)}else if(e instanceof kh?n.Ra.Ye(e):e instanceof kw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Se.min()))try{let r=await aq(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ta.get(l);u&&s.Ta.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ta.get(c);if(!u)return;s.Ta.set(c,u.withResumeToken(Fn.EMPTY_BYTE_STRING,u.snapshotVersion)),lq(s,c);let f=new Eg(u.target,c,l,u.sequenceNumber);HM(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){te(ou,"Failed to raise snapshot:",r),await qw(n,r)}}async function qw(n,e,t){if(!Yh(e))throw e;n.Ia.add(1),await Rg(n),n.Aa.set("Offline"),t||(t=()=>aq(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{te(ou,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await oI(n)})}function dq(n,e){return e().catch(t=>qw(n,t,e))}async function aI(n){let e=Ie(n),t=Ja(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:NM;for(;yle(e);)try{let i=await lle(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,_le(e,i)}catch(i){await qw(e,i)}hq(e)&&fq(e)}function yle(n){return cu(n)&&n.Pa.length<10}function _le(n,e){n.Pa.push(e);let t=Ja(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function hq(n){return cu(n)&&!Ja(n).M_()&&n.Pa.length>0}function fq(n){Ja(n).start()}async function vle(n){Ja(n).na()}async function ble(n){let e=Ja(n);for(let t of n.Pa)e.X_(t.mutations)}async function Ele(n,e,t){let r=n.Pa.shift(),i=_N.from(r,e,t);await dq(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await aI(n)}async function wle(n,e){e&&Ja(n).Z_&&await(async function(r,i){if((function(o){return Fce(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();Ja(r).N_(),await dq(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await aI(r)}})(n,e),hq(n)&&fq(n)}async function J4(n,e){let t=Ie(n);t.asyncQueue.verifyOperationInProgress(),te(ou,"RemoteStore received new credentials");let r=cu(t);t.Ia.add(3),await Rg(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await oI(t)}async function Ile(n,e){let t=Ie(n);e?(t.Ia.delete(2),await oI(t)):e||(t.Ia.add(2),await Rg(t),t.Aa.set("Unknown"))}function Xh(n){return n.Va||(n.Va=(function(t,r,i){let s=Ie(t);return s.ia(),new rM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:fle.bind(null,n),e_:ple.bind(null,n),n_:mle.bind(null,n),J_:gle.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),WM(n)?qM(n):n.Aa.set("Unknown")):(await n.Va.stop(),uq(n))})),n.Va}function Ja(n){return n.ma||(n.ma=(function(t,r,i){let s=Ie(t);return s.ia(),new iM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:vle.bind(null,n),n_:wle.bind(null,n),ea:ble.bind(null,n),ta:Ele.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await aI(n)):(await n.ma.stop(),n.Pa.length>0&&(te(ou,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var lM=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GM(n,e){if(_o("AsyncQueue",`${e}: ${n}`),Yh(n))return new se(q.UNAVAILABLE,`${e}: ${n}`);throw n}var Ww=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=cg(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Gw=class{constructor(){this.fa=new Nt(fe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):he(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Gh=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ww.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var uM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},dM=class{constructor(){this.queries=Z4(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Ie(t),s=i.queries;i.queries=Z4(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}};function Z4(){return new Eo(n=>UH(n),rI)}async function Tle(n,e){let t=Ie(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new uM,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=GM(o,`Initialization of query '${xh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&KM(t)}async function Sle(n,e){let t=Ie(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Dle(n,e){let t=Ie(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&KM(t)}function Ale(n,e,t){let r=Ie(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function KM(n){n.Da.forEach(e=>{e.next()})}var hM,eH;(eH=hM||(hM={})).Fa="default",eH.Cache="cache";var fM=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hM.Cache}};var Kw=class{constructor(e){this.key=e}},Qw=class{constructor(e){this.key=e}},pM=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=jH(e),this.eu=new Ww(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Gw,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{let p=i.get(u),m=iI(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),S=!1;p&&m?p.data.isEqual(m.data)?I!==D&&(r.track({type:3,doc:m}),S=!0):this.iu(p,m)||(r.track({type:2,doc:m}),S=!0,(c&&this.Xa(m,c)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(c||l)&&(a=!0)),S&&(m?(o=o.add(m),s=D?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((u,f)=>(function(m,I){let D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:S})}};return D(m)-D(I)})(u.type,f.type)||this.Xa(u.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new Gh(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Gw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=je(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Qw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Kw(r))}),t}uu(e){this.Ha=e.qs,this.Za=je();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Gh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},QM="SyncEngine",mM=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gM=class{constructor(e){this.key=e,this.lu=!1}},yM=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Eo(a=>UH(a),rI),this.Tu=new Map,this.Iu=new Set,this.du=new Nt(fe.comparator),this.Eu=new Map,this.Au=new Ig,this.Ru={},this.Vu=new Map,this.mu=wg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Cle(n,e,t=!0){let r=vq(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await pq(r,e,t,!0),i}async function Rle(n,e){let t=vq(n);await pq(t,e,!0,!1)}async function pq(n,e,t,r){let i=await ule(n.localStore,hs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await xle(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&cq(n.remoteStore,i),a}async function xle(n,e,t,r,i){n.gu=(f,p,m)=>(async function(D,S,N,M){let F=S.view.nu(N);F.Ds&&(F=await Q4(D.localStore,S.query,!1).then(({documents:T})=>S.view.nu(T,F)));let j=M&&M.targetChanges.get(S.targetId),z=M&&M.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(F,D.isPrimaryClient,j,z);return nH(D,S.targetId,B._u),B.snapshot})(n,f,p,m);let s=await Q4(n.localStore,e,!0),o=new pM(e,s.qs),a=o.nu(s.documents),c=bg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);nH(n,t,l._u);let u=new mM(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function Ple(n,e,t){let r=Ie(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!rI(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YN(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$M(r.remoteStore,i.targetId),_M(r,i.targetId)}).catch(Qh)):(_M(r,i.targetId),await YN(r.localStore,i.targetId,!0))}async function Nle(n,e){let t=Ie(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$M(t.remoteStore,r.targetId))}async function Mle(n,e,t){let r=jle(n);try{let i=await(function(o,a){let c=Ie(o),l=Jt.now(),u=a.reduce((m,I)=>m.add(I.key),je()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=wo(),D=je();return c.Os.getEntries(m,u).next(S=>{I=S,I.forEach((N,M)=>{M.isValidDocument()||(D=D.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,I)).next(S=>{f=S;let N=[];for(let M of a){let F=Lce(M,f.get(M.key).overlayedDocument);F!=null&&N.push(new Io(M.key,F,MH(F.value.mapValue),Zl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,N,a)}).next(S=>{p=S;let N=S.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,S.batchId,N)})}).then(()=>({batchId:p.batchId,changes:zH(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Nt(ke)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,t),await xg(r,i.changes),await aI(r.remoteStore)}catch(i){let s=GM(i,"Failed to persist write");t.reject(s)}}async function mq(n,e){let t=Ie(n);try{let r=await ale(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?lt(o.lu,14607):i.removedDocuments.size>0&&(lt(o.lu,42227),o.lu=!1))}),await xg(t,r,e)}catch(r){await Qh(r)}}function tH(n,e,t){let r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ie(o);c.onlineState=a;let l=!1;c.queries.forEach((u,f)=>{for(let p of f.wa)p.va(a)&&(l=!0)}),l&&KM(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kle(n,e,t){let r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Nt(fe.comparator);o=o.insert(s,xi.newNoDocument(s,Se.min()));let a=je().add(s),c=new Mw(Se.min(),new Map,new Nt(ke),o,a);await mq(r,c),r.du=r.du.remove(s),r.Eu.delete(e),YM(r)}else await YN(r.localStore,e,!1).then(()=>_M(r,e,t)).catch(Qh)}async function Ole(n,e){let t=Ie(n),r=e.batch.batchId;try{let i=await ole(t.localStore,e);yq(t,r,null),gq(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xg(t,i)}catch(i){await Qh(i)}}async function Lle(n,e,t){let r=Ie(n);try{let i=await(function(o,a){let c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(lt(f!==null,37113),u=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);yq(r,e,t),gq(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xg(r,i)}catch(i){await Qh(i)}}function gq(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function yq(n,e,t){let r=Ie(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function _M(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||_q(n,r)})}function _q(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&($M(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),YM(n))}function nH(n,e,t){for(let r of t)r instanceof Kw?(n.Au.addReference(r.key,e),Fle(n,r)):r instanceof Qw?(te(QM,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||_q(n,r.key)):he(19791,{yu:r})}function Fle(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(te(QM,"New document in limbo: "+t),n.Iu.add(r),YM(n))}function YM(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new fe(jt.fromString(e)),r=n.mu.next();n.Eu.set(r,new gM(t)),n.du=n.du.insert(t,r),cq(n.remoteStore,new Eg(hs(UM(t.path)),r,"TargetPurposeLimboResolution",PM.ue))}}async function xg(n,e,t){let r=Ie(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=WN.Es(c.targetId,l);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,l){let u=Ie(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>W.forEach(l,p=>W.forEach(p.Is,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>W.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Yh(f))throw f;te(zM,"Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let m=u.Fs.get(p),I=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(I);u.Fs=u.Fs.insert(p,D)}}})(r.localStore,s))}async function Vle(n,e){let t=Ie(n);if(!t.currentUser.isEqual(e)){te(QM,"User change. New user:",e.toKey());let r=await oq(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new se(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xg(t,r.Bs)}}function Ule(n,e){let t=Ie(n),r=t.Eu.get(e);if(r&&r.lu)return je().add(r.key);{let i=je(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function vq(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ule.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kle.bind(null,e),e.hu.J_=Dle.bind(null,e.eventManager),e.hu.pu=Ale.bind(null,e.eventManager),e}function jle(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ole.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lle.bind(null,e),e}var bq=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sI(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return sle(this.persistence,new KN,t.initialUser,this.serializer)}Du(t){return new Uw(qN.Vi,this.serializer)}bu(t){return new XN}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),vM=class extends bq{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){lt(this.persistence.referenceDelegate instanceof jw,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new NN(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new Uw(r=>jw.Vi(r,t),this.serializer)}};var Ble=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tH(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vle.bind(null,this.syncEngine),await Ile(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dM})()}createDatastore(t){let r=sI(t.databaseInfo.databaseId),i=(function(o){return new nM(o)})(t.databaseInfo);return(function(o,a,c,l){return new oM(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new cM(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>tH(this.syncEngine,r,0),(function(){return zw.C()?new zw:new JN})())}createSyncEngine(t,r){return(function(s,o,a,c,l,u,f){let p=new yM(s,o,a,c,l,u);return f&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Ie(s);te(ou,"RemoteStore shutting down."),o.Ia.add(5),await Rg(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var bM=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_o("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Za="FirestoreClient",EM=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te(Za,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(Za,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=GM(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function qP(n,e){n.asyncQueue.verifyOperationInProgress(),te(Za,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oq(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ya("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ya("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function rH(n,e){n.asyncQueue.verifyOperationInProgress();let t=await zle(n);te(Za,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>J4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>J4(e.remoteStore,i)),n._onlineComponents=e}async function zle(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(Za,"Using user provided OfflineComponentProvider");try{await qP(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ya("Error using user provided cache. Falling back to memory cache: "+t),await qP(n,new bq)}}else te(Za,"Using default OfflineComponentProvider"),await qP(n,new vM(void 0));return n._offlineComponents}async function Eq(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(Za,"Using user provided OnlineComponentProvider"),await rH(n,n._uninitializedComponentsProvider._online)):(te(Za,"Using default OnlineComponentProvider"),await rH(n,new Ble))),n._onlineComponents}function $le(n){return Eq(n).then(e=>e.syncEngine)}async function Hle(n){let e=await Eq(n),t=e.eventManager;return t.onListen=Cle.bind(null,e.syncEngine),t.onUnlisten=Ple.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Rle.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Nle.bind(null,e.syncEngine),t}function qle(n,e,t={}){let r=new us;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new bM({next:p=>{u.Ou(),o.enqueueAndForget(()=>Sle(s,f));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new fM(UM(a.path),u,{includeMetadataChanges:!0,ka:!0});return Tle(s,f)})(await Hle(n),n.asyncQueue,e,t,r)),r.promise}function wq(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iH=new Map;var Iq="firestore.googleapis.com",sH=!0,Yw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iq,this.ssl=sH}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sH;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nle)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wq((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Tg=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WP;switch(r.type){case"firstParty":return new YP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=iH.get(t);r&&(te("ComponentProvider","Removing Datastore"),iH.delete(t),r.terminate())})(this),Promise.resolve()}};function Tq(n,e,t,r={}){var i;n=mg(n,Tg);let s=Pa(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Bb(`https://${c}`),zb("Firestore",!0)),o.host!==Iq&&o.host!==c&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!es(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=bn.MOCK_USER;else{u=JU(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bn(p)}n._authCredentials=new GP(new Tw(u,f))}}var wM=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Yn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Cg(t,n._jsonSchema))return new n(e,r||null,new fe(jt.fromString(t.referencePath)))}};Yn._jsonSchemaVersion="firestore/documentReference/1.0",Yn._jsonSchema={type:Xt("string",Yn._jsonSchemaVersion),referencePath:Xt("string")};var Sg=class n extends wM{constructor(e,t,r){super(e,t,UM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Sq(n,e,...t){if(n=cr(n),arguments.length===1&&(e=pg.newId()),Jae("doc","path",e),n instanceof Tg){let r=jt.fromString(e,...t);return T4(r),new Yn(n,null,new fe(r))}{if(!(n instanceof Yn||n instanceof Sg))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(jt.fromString(e,...t));return T4(r),new Yn(n.firestore,n instanceof Sg?n.converter:null,new fe(r))}}var oH="AsyncQueue",Xw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new $w(this,"async_queue_retry"),this.oc=()=>{let r=HP();r&&te(oH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=HP();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=HP();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new us;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Yh(e))throw e;te(oH,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,_o("INTERNAL UNHANDLED ERROR: ",aH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=lM.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&he(47125,{hc:aH(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function aH(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Dg=class extends Tg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Xw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Xw(e),this._firestoreClient=void 0,await e}}};function Dq(n,e){let t=typeof n=="object"?n:kl(),r=typeof n=="string"?n:e||Rw,i=Gd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=XU("firestore");s&&Tq(i,...s)}return i}function Aq(n){if(n._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Wle(n),n._firestoreClient}function Wle(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,l,u){return new tN(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,wq(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new EM(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ga=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Fn.fromBase64String(e))}catch(t){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cg(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ga._jsonSchemaVersion="firestore/bytes/1.0",Ga._jsonSchema={type:Xt("string",Ga._jsonSchemaVersion),bytes:Xt("string")};var Ag=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jw=class{constructor(e){this._methodName=e}};var Ka=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Cg(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ka._jsonSchemaVersion="firestore/geoPoint/1.0",Ka._jsonSchema={type:Xt("string",Ka._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};var Qa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cg(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Qa._jsonSchemaVersion="firestore/vectorValue/1.0",Qa._jsonSchema={type:Xt("string",Qa._jsonSchemaVersion),vectorValues:Xt("object")};var Gle=/^__.*__$/,IM=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}};function Cq(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:n})}}var TM=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Cq(this.Ec)&&Gle.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},SM=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sI(e)}Dc(e,t,r,i=!1){return new TM({Ec:e,methodName:t,bc:r,path:Fr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kle(n){let e=n._freezeSettings(),t=sI(n._databaseId);return new SM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qle(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Nq("Data must be an object, but it was:",o,r);let a=xq(r,o),c,l;if(s.merge)c=new ls(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let f of s.mergeFields){let p=Yle(e,f,t);if(!o.contains(p))throw new se(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Jle(u,p)||u.push(p)}c=new ls(u),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new IM(new Ri(a),c,l)}function Rq(n,e){if(Pq(n=cr(n)))return Nq("Unsupported field value:",e,n),xq(n,e);if(n instanceof Jw)return(function(r,i){if(!Cq(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Rq(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=cr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pce(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Jt.fromDate(r);return{timestampValue:Fw(i.serializer,s)}}if(r instanceof Jt){let s=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fw(i.serializer,s)}}if(r instanceof Ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ga)return{bytesValue:JH(i.serializer,r._byteString)};if(r instanceof Yn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qa)return(function(o,a){return{mapValue:{fields:{[kM]:{stringValue:OM},[Fh]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return jM(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${xM(r)}`)})(n,e)}function xq(n,e){let t={};return SH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):au(n,(r,i)=>{let s=Rq(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Pq(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof Ka||n instanceof Ga||n instanceof Yn||n instanceof Jw||n instanceof Qa)}function Nq(n,e,t){if(!Pq(t)||!uH(t)){let r=xM(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Yle(n,e,t){if((e=cr(e))instanceof Ag)return e._internalPath;if(typeof e=="string")return Mq(n,e);throw Zw("Field path arguments must be of type string or ",n,!1,void 0,t)}var Xle=new RegExp("[~\\*/\\[\\]]");function Mq(n,e,t){if(e.search(Xle)>=0)throw Zw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ag(...e.split("."))._internalPath}catch{throw Zw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new se(q.INVALID_ARGUMENT,a+n+c)}function Jle(n,e){return n.some(t=>t.isEqual(e))}var eI=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new DM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kq("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},DM=class extends eI{data(){return super.data()}};function kq(n,e){return typeof e=="string"?Mq(n,e):e instanceof Ag?e._internalPath:e._delegate._internalPath}var AM=class{convertValue(e,t="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return au(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Fh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Tt(o.doubleValue));return new Qa(s)}convertGeoPoint(e){return new Ka(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_g(e));default:return null}}convertTimestamp(e){let t=vo(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=jt.fromString(e);lt(iq(r),9688,{name:e});let i=new xw(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||_o(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Zle(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Jl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},eu=class n extends eI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(kq("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};eu._jsonSchemaVersion="firestore/documentSnapshot/1.0",eu._jsonSchema={type:Xt("string",eu._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var Oh=class extends eu{data(e={}){return super.data(e)}},fg=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Oh(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Oh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Oh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:eue(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function eue(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function Oq(n){n=mg(n,Yn);let e=mg(n.firestore,Dg);return qle(Aq(e),n._key).then(t=>nue(e,n,t))}fg._jsonSchemaVersion="firestore/querySnapshot/1.0",fg._jsonSchema={type:Xt("string",fg._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var CM=class extends AM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}};function Lq(n,e,t){n=mg(n,Yn);let r=mg(n.firestore,Dg),i=Zle(n.converter,e,t);return tue(r,[Qle(Kle(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zl.none())])}function tue(n,e){return(function(r,i){let s=new us;return r.asyncQueue.enqueueAndForget(async()=>Mle(await $le(r),i,s)),s.promise})(Aq(n),e)}function nue(n,e,t){let r=t.docs.get(e._key),i=new CM(n);return new eu(n,i,e._key,r,new Jl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Kh=i})(Ma),Ii(new Kn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Dg(new KP(r.getProvider("auth-internal")),new XP(o,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xw(l.options.projectId,u)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ct(b4,E4,e),Ct(b4,E4,"esm2017")})();var lu=class{constructor(e){return e}},Fq="firestore",XM=class{constructor(){return Qd(Fq)}};var JM=new J("angularfire2.firestore-instances");function rue(n,e){let t=_m(Fq,n,e);return t&&new lu(t)}function iue(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new lu(r)}}var sue={provide:XM,deps:[[new sr,JM]]},oue={provide:lu,useFactory:rue,deps:[[new sr,JM],Js]};function Vq(n,...e){return Ct("angularfire",ka.full,"fst"),mn([oue,sue,{provide:JM,useFactory:iue(n),multi:!0,deps:[Pe,_t,Oa,Ll,[new sr,Om],[new sr,Yd],...e]}])}var Uq=lr(g4,!0);var ZM=lr(Sq,!0,2);var jq=lr(Oq,!0);var Bq=lr(Dq,!0);var zq=lr(Lq,!0,2);var $q={production:!1,firebase:{apiKey:"AIzaSyAa3aCpidnJ3MB3D2FlpkCHGuVcRyhfmb8",authDomain:"vvskchaitanya-1.firebaseapp.com",projectId:"vvskchaitanya-1",storageBucket:"vvskchaitanya-1.appspot.com",messagingSenderId:"683857452414",appId:"1:683857452414:web:41b3da4368a3df73d5272f",measurementId:"G-BCJ69CN9L7"},githubToken:""};function Pg(n){return n.buttons===0||n.detail===0}function Ng(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var ek;function Hq(){if(ek==null){let n=typeof document<"u"?document.head:null;ek=!!(n&&(n.createShadowRoot||n.attachShadow))}return ek}function tk(n){if(Hq()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Pi(n){return n.composedPath?n.composedPath()[0]:n.target}var nk;try{nk=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nk=!1}var Ni=(()=>{class n{_platformId=O(Us);isBrowser=this._platformId?MV(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||nk)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mg;function qq(){if(Mg==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Mg=!0}))}finally{Mg=Mg||!1}return Mg}function Jh(n){return qq()?n:!!n.capture}function ec(n){return n instanceof qt?n.nativeElement:n}var Wq=new J("cdk-input-modality-detector-options"),Gq={ignoreKeys:[18,17,224,91,16]},Kq=650,rk={passive:!0,capture:!0},Qq=(()=>{class n{_platform=O(Ni);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Ot(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Pi(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<Kq||(this._modality.next(Pg(t)?"keyboard":"mouse"),this._mostRecentTarget=Pi(t))};_onTouchstart=t=>{if(Ng(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Pi(t)};constructor(){let t=O(Pe),r=O(Xe),i=O(Wq,{optional:!0});if(this._options=$($({},Gq),i),this.modalityDetected=this._modality.pipe(XT(1)),this.modalityChanged=this.modalityDetected.pipe(ed()),this._platform.isBrowser){let s=O(Ar).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(r,"keydown",this._onKeydown,rk),s.listen(r,"mousedown",this._onMousedown,rk),s.listen(r,"touchstart",this._onTouchstart,rk)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kg=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(kg||{}),Yq=new J("cdk-focus-monitor-default-options"),cI=Jh({passive:!0,capture:!0}),ik=(()=>{class n{_ngZone=O(Pe);_platform=O(Ni);_inputModalityDetector=O(Qq);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=O(Xe);_stopInputModalityDetector=new mt;constructor(){let t=O(Yq,{optional:!0});this._detectionMode=t?.detectionMode||kg.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let r=Pi(t);for(let i=r;i;i=i.parentElement)t.type==="focus"?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){let i=ec(t);if(!this._platform.isBrowser||i.nodeType!==1)return de();let s=tk(i)||this._document,o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;let a={checkChildren:r,subject:new mt,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let r=ec(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){let s=ec(t),o=this._document.activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===kg.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===kg.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?Kq:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,r){let i=this._elementInfo.get(r),s=Pi(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){let i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,cI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,cI)}),this._rootNodeFocusListenerCount.set(r,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qc(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,cI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,cI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lI=new WeakMap,Og=(()=>{class n{_appRef;_injector=O(_t);_environmentInjector=O(wt);load(t){let r=this._appRef=this._appRef||this._injector.get(qr),i=lI.get(r);i||(i={loaders:new Set,refs:[]},lI.set(r,i),r.onDestroy(()=>{lI.get(r)?.refs.forEach(s=>s.destroy()),lI.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(TV(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xq=new Set,uu,sk=(()=>{class n{_platform=O(Ni);_nonce=O(bd,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cue}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&aue(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aue(n,e){if(!Xq.has(n))try{uu||(uu=document.createElement("style"),e&&uu.setAttribute("nonce",e),uu.setAttribute("type","text/css"),document.head.appendChild(uu)),uu.sheet&&(uu.sheet.insertRule(`@media ${n} {body{ }}`,0),Xq.add(n))}catch(t){console.error(t)}}function cue(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var uI;function lue(){if(uI===void 0&&(uI=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(uI=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return uI}function Zh(n){return lue()?.createHTML(n)||n}var uue=new J("MATERIAL_ANIMATIONS"),Jq=null;function due(){return O(uue,{optional:!0})?.animationsDisabled||O(vd,{optional:!0})==="NoopAnimations"?"di-disabled":(Jq??=O(sk).matchMedia("(prefers-reduced-motion)").matches,Jq?"reduced-motion":"enabled")}function dI(){return due()!=="enabled"}var Xr=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(Xr||{}),ok=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Xr.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},Zq=Jh({passive:!0,capture:!0}),ak=class{_events=new Map;addHandler(e,t,r,i){let s=this._events.get(t);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Zq)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let s=i.get(t);s&&(s.delete(r),s.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Zq)))}_delegateEventHandler=e=>{let t=Pi(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}},Lg={enterDuration:225,exitDuration:150},hue=800,e6=Jh({passive:!0,capture:!0}),t6=["mousedown","touchstart"],n6=["mouseup","mouseleave","touchend","touchcancel"],fue=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),hI=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new ak;constructor(e,t,r,i,s){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=ec(r)),s&&s.get(Og).load(fue)}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=$($({},Lg),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let o=r.radius||pue(e,t,i),a=e-i.left,c=t-i.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let f=window.getComputedStyle(u),p=f.transitionProperty,m=f.transitionDuration,I=p==="none"||m==="0s"||m==="0s, 0s"||i.width===0&&i.height===0,D=new ok(this,u,r,I);u.style.transform="scale3d(1, 1, 1)",D.state=Xr.FADING_IN,r.persistent||(this._mostRecentTransientRipple=D);let S=null;return!I&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let N=()=>{S&&(S.fallbackTimer=null),clearTimeout(F),this._finishRippleTransition(D)},M=()=>this._destroyRipple(D),F=setTimeout(M,l+100);u.addEventListener("transitionend",N),u.addEventListener("transitioncancel",M),S={onTransitionEnd:N,onTransitionCancel:M,fallbackTimer:F}}),this._activeRipples.set(D,S),(I||!l)&&this._finishRippleTransition(D),D}fadeOutRipple(e){if(e.state===Xr.FADING_OUT||e.state===Xr.HIDDEN)return;let t=e.element,r=$($({},Lg),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Xr.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=ec(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,t6.forEach(r=>{n._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{n6.forEach(t=>{this._triggerElement.addEventListener(t,this,e6)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Xr.FADING_IN?this._startFadeOutTransition(e):e.state===Xr.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Xr.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Xr.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Pg(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+hue;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Ng(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Xr.VISIBLE||e.config.terminateOnPointerUp&&e.state===Xr.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(t6.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(n6.forEach(t=>e.removeEventListener(t,this,e6)),this._pointerUpEventsRegistered=!1))}};function pue(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var r6=new J("mat-ripple-global-options");var mue={capture:!0},gue=["focus","mousedown","mouseenter","touchstart"],ck="mat-ripple-loader-uninitialized",lk="mat-ripple-loader-class-name",i6="mat-ripple-loader-centered",fI="mat-ripple-loader-disabled",s6=(()=>{class n{_document=O(Xe);_animationsDisabled=dI();_globalRippleOptions=O(r6,{optional:!0});_platform=O(Ni);_ngZone=O(Pe);_injector=O(_t);_eventCleanups;_hosts=new Map;constructor(){let t=O(Ar).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>gue.map(r=>t.listen(this._document,r,this._onInteraction,mue)))}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);this._eventCleanups.forEach(r=>r())}configureRipple(t,r){t.setAttribute(ck,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(lk))&&t.setAttribute(lk,r.className||""),r.centered&&t.setAttribute(i6,""),r.disabled&&t.setAttribute(fI,"")}setDisabled(t,r){let i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(fI,""):t.removeAttribute(fI)}_onInteraction=t=>{let r=Pi(t);if(r instanceof HTMLElement){let i=r.closest(`[${ck}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(lk)),t.append(r);let i=this._globalRippleOptions,s=this._animationsDisabled?0:i?.animation?.enterDuration??Lg.enterDuration,o=this._animationsDisabled?0:i?.animation?.exitDuration??Lg.exitDuration,a={rippleDisabled:this._animationsDisabled||i?.disabled||t.hasAttribute(fI),rippleConfig:{centered:t.hasAttribute(i6),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:o}}},c=new hI(a,this._ngZone,r,this._platform,this._injector),l=!a.rippleDisabled;l&&c.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:c,hasSetUpEvents:l}),t.removeAttribute(ck)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var o6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(r,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var yue=["mat-icon-button",""],_ue=["*"],vue=new J("MAT_BUTTON_CONFIG");function a6(n){return n==null?void 0:IV(n)}var uk=(()=>{class n{_elementRef=O(qt);_ngZone=O(Pe);_animationsDisabled=dI();_config=O(vue,{optional:!0});_focusMonitor=O(ik);_cleanupClick;_renderer=O(wd);_rippleLoader=O(s6);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){O(Og).load(o6);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(r,i){r&2&&($s("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),fl(i.color?"mat-"+i.color:""),Pr("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",gi],disabled:[2,"disabled","disabled",gi],ariaDisabled:[2,"aria-disabled","ariaDisabled",gi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",gi],tabIndex:[2,"tabIndex","tabIndex",a6],_tabindex:[2,"tabindex","_tabindex",a6]}})}return n})(),dk=(()=>{class n extends uk{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Td],attrs:yue,ngContentSelectors:_ue,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Wr(),wa(0,"span",0),Sn(1),wa(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var gs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({})}return n})();var c6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({imports:[gs]})}return n})();var bue=["matButton",""],Eue=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],wue=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var l6=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),ef=(()=>{class n extends uk{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=Iue(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let r=this._elementRef.nativeElement.classList,i=this._appearance?l6.get(this._appearance):null,s=l6.get(t);i&&r.remove(...i),r.add(...s),this._appearance=t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Td],attrs:bue,ngContentSelectors:wue,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Wr(Eue),wa(0,"span",0),Sn(1),Rr(2,"span",1),Sn(3,1),xr(),Sn(4,2),wa(5,"span",2)(6,"span",3)),r&2&&Pr("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Iue(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var tf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({imports:[c6,gs]})}return n})();var Tue=["*"];var Sue=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Due=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],Aue=new J("MAT_CARD_CONFIG"),tc=(()=>{class n{appearance;constructor(){let t=O(Aue,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(r,i){r&2&&Pr("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")("mat-mdc-card-filled",i.appearance==="filled")("mdc-card--filled",i.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Tue,decls:1,vars:0,template:function(r,i){r&1&&(Wr(),Sn(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),nc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var rc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),pI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var ic=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:Due,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,i){r&1&&(Wr(Sue),Sn(0),Rr(1,"div",0),Sn(2,1),xr(),Sn(3,2))},encapsulation:2,changeDetection:0})}return n})();var mI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"]})}return n})();var sc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({imports:[gs]})}return n})();function u6(n){return Error(`Unable to find icon with the name "${n}"`)}function Cue(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function d6(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function h6(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var To=class{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}},p6=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new To(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){let o=this._sanitizer.sanitize(Tn.HTML,i);if(!o)throw h6(i);let a=Zh(o);return this._addSvgIconConfig(t,r,new To("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new To(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){let s=this._sanitizer.sanitize(Tn.HTML,r);if(!s)throw h6(r);let o=Zh(s);return this._addSvgIconSetConfig(t,new To("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(Tn.RESOURCE_URL,t);if(!r)throw d6(t);let i=this._cachedIconsByUrl.get(r);return i?de(yI(i)):this._loadSvgIconFromConfig(new To(t,null)).pipe(on(s=>this._cachedIconsByUrl.set(r,s)),pe(s=>yI(s)))}getNamedSvgIcon(t,r=""){let i=f6(r,t),s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Yf(u6(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?de(yI(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(pe(r=>yI(r)))}_getSvgFromIconSetConfigs(t,r){let i=this._extractIconWithNameFromAnySet(t,r);if(i)return de(i);let s=r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Gc(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Tn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),de(null)})));return GT(s).pipe(pe(()=>{let o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw u6(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){let s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(on(r=>t.svgText=r),pe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?de(null):this._fetchIcon(t).pipe(on(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){let s=t.querySelector(`[id="${r}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,i);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),i);let a=this._svgElementFromString(Zh("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let r=this._svgElementFromString(Zh("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){let{name:o,value:a}=i[s];o!=="id"&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw Cue();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let o=this._sanitizer.sanitize(Tn.RESOURCE_URL,r);if(!o)throw d6(r);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(pe(l=>Zh(l)),Kc(()=>this._inProgressUrlFetches.delete(o)),YT());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(f6(t,r),i),this}_addSvgIconSetConfig(t,r){let i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){let s=this._resolvers[i](r,t);if(s)return Rue(s)?new To(s.url,null,s.options):new To(s,null)}}static \u0275fac=function(r){return new(r||n)(ie(KD,8),ie(QD),ie(Xe,8),ie(Sr))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yI(n){return n.cloneNode(!0)}function f6(n,e){return n+":"+e}function Rue(n){return!!(n.url&&n.options)}var xue=["*"],Pue=new J("MAT_ICON_DEFAULT_OPTIONS"),Nue=new J("mat-icon-location",{providedIn:"root",factory:()=>{let n=O(Xe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),m6=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Mue=m6.map(n=>`[${n}]`).join(", "),kue=/^url\(['"]?#(.*?)['"]?\)$/,oc=(()=>{class n{_elementRef=O(qt);_iconRegistry=O(p6);_location=O(Nue);_errorHandler=O(Sr);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=kt.EMPTY;constructor(){let t=O(new Sd("aria-hidden"),{optional:!0}),r=O(Pue,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=t.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(Mue),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)m6.forEach(o=>{let a=r[s],c=a.getAttribute(o),l=c?c.match(kue):null;if(l){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(sn(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${r}:${i}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&($s("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),fl(i.color?"mat-"+i.color:""),Pr("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",gi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:xue,decls:1,vars:0,template:function(r,i){r&1&&(Wr(),Sn(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),ac=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({imports:[gs]})}return n})();var ur=class n{auth=O(oo);router=O(Ks);user$=AE(this.auth);constructor(){}async loginWithGoogle(){let e=new wR;try{await fz(this.auth,e),this.router.navigate(["/dashboard"])}catch(t){console.error("Login failed",t)}}async logout(){await pz(this.auth),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var vI=class n{authService=O(ur);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-home"]],decls:42,vars:0,consts:[[1,"home-container"],[1,"hero-section"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"cta-container"],["mat-flat-button","","color","primary",1,"google-signin-btn",3,"click"],[1,"hero-note"],[1,"features-section"],[1,"feature-card"],["mat-card-avatar","","color","primary"],["mat-card-avatar","","color","accent"],["mat-card-avatar","","color","warn"]],template:function(t,r){t&1&&(oe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),le(4,"Master Your Lifestyle"),ce(),oe(5,"p",4),le(6," Data-driven insights to adapt, improve, and thrive. Track your habits, analyze your LA Score, and reach your peak potential. "),ce(),oe(7,"div",5)(8,"button",6),Qi("click",function(){return r.authService.loginWithGoogle()}),oe(9,"mat-icon"),le(10,"login"),ce(),le(11," Sign in with Google "),ce()(),oe(12,"p",7),le(13,"Start your journey today. No credit card required."),ce()()(),oe(14,"div",8)(15,"mat-card",9)(16,"mat-card-header")(17,"mat-icon",10),le(18,"analytics"),ce(),oe(19,"mat-card-title"),le(20,"Smart Analytics"),ce()(),oe(21,"mat-card-content")(22,"p"),le(23,"Visualize your progress with intuitive charts and graphs."),ce()()(),oe(24,"mat-card",9)(25,"mat-card-header")(26,"mat-icon",11),le(27,"track_changes"),ce(),oe(28,"mat-card-title"),le(29,"Habit Tracking"),ce()(),oe(30,"mat-card-content")(31,"p"),le(32,"Monitor your daily routines and identify areas for improvement."),ce()()(),oe(33,"mat-card",9)(34,"mat-card-header")(35,"mat-icon",12),le(36,"psychology"),ce(),oe(37,"mat-card-title"),le(38,"Adaptive Insights"),ce()(),oe(39,"mat-card-content")(40,"p"),le(41,"Get personalized recommendations based on your unique lifestyle data."),ce()()()()())},dependencies:[tf,ef,sc,tc,mI,rc,ic,nc,ac,oc],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3f51b5,#5c6bc0);color:#fff;padding:80px 20px;text-align:center;display:flex;justify-content:center;align-items:center}.hero-content[_ngcontent-%COMP%]{max-width:800px}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:16px;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;margin-bottom:40px;opacity:.9;line-height:1.5}.cta-container[_ngcontent-%COMP%]{margin-bottom:24px}.google-signin-btn[_ngcontent-%COMP%]{padding:12px 32px;font-size:1.1rem;border-radius:50px;height:auto}.hero-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7}.features-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:32px;padding:60px 20px;max-width:1200px;margin:0 auto;width:100%;box-sizing:border-box}.feature-card[_ngcontent-%COMP%]{height:100%;transition:transform .3s ease,box-shadow .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 16px #0000001a}mat-card-avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media(max-width:768px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.2rem}}"]})};var bI=class n{authService=O(ur);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-login"]],decls:12,vars:0,consts:[[1,"login-container"],[1,"login-card"],["mat-flat-button","","color","primary",1,"google-signin-btn",3,"click"]],template:function(t,r){t&1&&(oe(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),le(4,"Welcome Back"),ce(),oe(5,"mat-card-subtitle"),le(6,"Sign in to continue"),ce()(),oe(7,"mat-card-content")(8,"button",2),Qi("click",function(){return r.authService.loginWithGoogle()}),oe(9,"mat-icon"),le(10,"login"),ce(),le(11," Sign in with Google "),ce()()()())},dependencies:[tf,ef,sc,tc,rc,ic,pI,nc,ac,oc],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh}.login-card[_ngcontent-%COMP%]{padding:30px;text-align:center;max-width:400px;width:100%}.google-signin-btn[_ngcontent-%COMP%]{width:100%;padding:8px 16px;margin-top:20px}"]})};var EI=class n{authService=O(ur);ngOnInit(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,r){t&1&&(Rr(0,"p"),le(1,"Logging out..."),xr())},encapsulation:2})};function Ug(n){return n+.5|0}var cc=(n,e,t)=>Math.max(Math.min(n,t),e);function Fg(n){return cc(Ug(n*2.55),0,255)}function lc(n){return cc(Ug(n*255),0,255)}function So(n){return cc(Ug(n/2.55)/100,0,1)}function g6(n){return cc(Ug(n*100),0,100)}var Jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pk=[..."0123456789ABCDEF"],Oue=n=>pk[n&15],Lue=n=>pk[(n&240)>>4]+pk[n&15],wI=n=>(n&240)>>4===(n&15),Fue=n=>wI(n.r)&&wI(n.g)&&wI(n.b)&&wI(n.a);function Vue(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Jr[n[1]]*17,g:255&Jr[n[2]]*17,b:255&Jr[n[3]]*17,a:e===5?Jr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Jr[n[1]]<<4|Jr[n[2]],g:Jr[n[3]]<<4|Jr[n[4]],b:Jr[n[5]]<<4|Jr[n[6]],a:e===9?Jr[n[7]]<<4|Jr[n[8]]:255})),t}var Uue=(n,e)=>n<255?e(n):"";function jue(n){var e=Fue(n)?Oue:Lue;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Uue(n.a,e):void 0}var Bue=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function b6(n,e,t){let r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function zue(n,e,t){let r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function $ue(n,e,t){let r=b6(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Hue(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function mk(n){let t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=Hue(t,r,i,u,s),c=c*60+.5),[c|0,l||0,a]}function gk(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(lc)}function yk(n,e,t){return gk(b6,n,e,t)}function que(n,e,t){return gk($ue,n,e,t)}function Wue(n,e,t){return gk(zue,n,e,t)}function E6(n){return(n%360+360)%360}function Gue(n){let e=Bue.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Fg(+e[5]):lc(+e[5]));let i=E6(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=que(i,s,o):e[1]==="hsv"?r=Wue(i,s,o):r=yk(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function Kue(n,e){var t=mk(n);t[0]=E6(t[0]+e),t=yk(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Que(n){if(!n)return;let e=mk(n),t=e[0],r=g6(e[1]),i=g6(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${So(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var y6={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_6={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Yue(){let n={},e=Object.keys(_6),t=Object.keys(y6),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,y6[s]);s=parseInt(_6[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var II;function Xue(n){II||(II=Yue(),II.transparent=[0,0,0,0]);let e=II[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Jue=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Zue(n){let e=Jue.exec(n),t=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];t=e[8]?Fg(o):cc(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Fg(r):cc(r,0,255)),i=255&(e[4]?Fg(i):cc(i,0,255)),s=255&(e[6]?Fg(s):cc(s,0,255)),{r,g:i,b:s,a:t}}}function ede(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${So(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var fk=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,nf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function tde(n,e,t){let r=nf(So(n.r)),i=nf(So(n.g)),s=nf(So(n.b));return{r:lc(fk(r+t*(nf(So(e.r))-r))),g:lc(fk(i+t*(nf(So(e.g))-i))),b:lc(fk(s+t*(nf(So(e.b))-s))),a:n.a+t*(e.a-n.a)}}function TI(n,e,t){if(n){let r=mk(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=yk(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function w6(n,e){return n&&Object.assign(e||{},n)}function v6(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=lc(n[3]))):(e=w6(n,{r:0,g:0,b:0,a:1}),e.a=lc(e.a)),e}function nde(n){return n.charAt(0)==="r"?Zue(n):Gue(n)}var Vg=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=v6(e):t==="string"&&(r=Vue(e)||Xue(e)||nde(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=w6(this._rgb);return e&&(e.a=So(e.a)),e}set rgb(e){this._rgb=v6(e)}rgbString(){return this._valid?ede(this._rgb):void 0}hexString(){return this._valid?jue(this._rgb):void 0}hslString(){return this._valid?Que(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=tde(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=lc(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Ug(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return TI(this._rgb,2,e),this}darken(e){return TI(this._rgb,2,-e),this}saturate(e){return TI(this._rgb,1,e),this}desaturate(e){return TI(this._rgb,1,-e),this}rotate(e){return Kue(this._rgb,e),this}};function _s(){}var M6=(()=>{let n=0;return()=>n++})();function Qe(n){return n==null}function vt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Be(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function mr(n,e){return xt(n)?n:e}function Ae(n,e){return typeof n>"u"?e:n}var k6=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function gt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ut(n,e,t,r){let i,s,o;if(vt(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(Be(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function zg(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function CI(n){if(vt(n))return n.map(CI);if(Be(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=CI(n[t[i]]);return e}return n}function O6(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function rde(n,e,t,r){if(!O6(n))return;let i=e[n],s=t[n];Be(i)&&Be(s)?sf(i,s,r):e[n]=CI(s)}function sf(n,e,t){let r=vt(e)?e:[e],i=r.length;if(!Be(n))return n;t=t||{};let s=t.merger||rde,o;for(let a=0;a<i;++a){if(o=r[a],!Be(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function af(n,e){return sf(n,e,{merger:ide})}function ide(n,e,t){if(!O6(n))return;let r=e[n],i=t[n];Be(r)&&Be(i)?af(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=CI(i))}var I6={"":n=>n,x:n=>n.x,y:n=>n.y};function sde(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function ode(n){let e=sde(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function pu(n,e){return(I6[e]||(I6[e]=ode(e)))(n)}function NI(n){return n.charAt(0).toUpperCase()+n.slice(1)}var cf=n=>typeof n<"u",Do=n=>typeof n=="function",Ek=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function L6(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Bt=Math.PI,fr=2*Bt,ade=fr+Bt,RI=Number.POSITIVE_INFINITY,cde=Bt/180,hr=Bt/2,du=Bt/4,T6=Bt*2/3,Ao=Math.log10,Mi=Math.sign;function lf(n,e,t){return Math.abs(n-e)<t}function wk(n){let e=Math.round(n);n=lf(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ao(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function F6(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function lde(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function uf(n){return!lde(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function V6(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function Ik(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Co(n){return n*(Bt/180)}function MI(n){return n*(180/Bt)}function Tk(n){if(!xt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function U6(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t);return s<-.5*Bt&&(s+=fr),{angle:s,distance:i}}function xI(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function ude(n,e){return(n-e+ade)%fr-Bt}function dr(n){return(n%fr+fr)%fr}function Sk(n,e,t,r){let i=dr(n),s=dr(e),o=dr(t),a=dr(s-i),c=dr(o-i),l=dr(i-s),u=dr(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function pr(n,e,t){return Math.max(e,Math.min(t,n))}function j6(n){return pr(n,-32768,32767)}function Ro(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function kI(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}var dc=(n,e,t,r)=>kI(n,t,r?i=>{let s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),B6=(n,e,t)=>kI(n,t,r=>n[r][e]>=t);function z6(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var $6=["push","pop","shift","splice","unshift"];function H6(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),$6.forEach(t=>{let r="_onData"+NI(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Dk(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&($6.forEach(s=>{delete n[s]}),delete n._chartjs)}function Ak(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var Ck=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Rk(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,Ck.call(window,()=>{r=!1,n.apply(e,t)}))}}function q6(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var OI=n=>n==="start"?"left":n==="end"?"right":"center",Dn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,W6=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function G6(n,e,t){let r=e.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:I}=o.getUserBounds();if(m){if(i=Math.min(dc(c,u,f).lo,t?r:dc(e,u,o.getPixelForValue(f)).lo),l){let D=c.slice(0,i+1).reverse().findIndex(S=>!Qe(S[a.axis]));i-=Math.max(0,D)}i=pr(i,0,r-1)}if(I){let D=Math.max(dc(c,o.axis,p,!0).hi+1,t?0:dc(e,u,o.getPixelForValue(p),!0).hi+1);if(l){let S=c.slice(D-1).findIndex(N=>!Qe(N[a.axis]));D+=Math.max(0,S)}s=pr(D,i,r)-i}else s=r-i}return{start:i,count:s}}function K6(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}var SI=n=>n===0||n===1,S6=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*fr/t)),D6=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*fr/t)+1,rf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*hr)+1,easeOutSine:n=>Math.sin(n*hr),easeInOutSine:n=>-.5*(Math.cos(Bt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>SI(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>SI(n)?n:S6(n,.075,.3),easeOutElastic:n=>SI(n)?n:D6(n,.075,.3),easeInOutElastic(n){return SI(n)?n:n<.5?.5*S6(n*2,.1125,.45):.5+.5*D6(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-rf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?rf.easeInBounce(n*2)*.5:rf.easeOutBounce(n*2-1)*.5+.5};function xk(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Pk(n){return xk(n)?n:new Vg(n)}function _k(n){return xk(n)?n:new Vg(n).saturate(.5).darken(.1).hexString()}var dde=["x","y","borderWidth","radius","tension"],hde=["color","borderColor","backgroundColor"];function fde(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:hde},numbers:{type:"number",properties:dde}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function pde(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var A6=new Map;function mde(n,e){e=e||{};let t=n+JSON.stringify(e),r=A6.get(t);return r||(r=new Intl.NumberFormat(n,e),A6.set(t,r)),r}function LI(n,e,t){return mde(e,t).format(n)}var Q6={values(n){return vt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=gde(n,t)}let o=Ao(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),LI(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(Ao(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?Q6.numeric.call(this,n,e,t):""}};function gde(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var $g={formatters:Q6};function yde(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$g.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var fc=Object.create(null),FI=Object.create(null);function jg(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function vk(n,e,t){return typeof e=="string"?sf(jg(n,e),t):sf(jg(n,""),e)}var bk=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>_k(i.backgroundColor),this.hoverBorderColor=(r,i)=>_k(i.borderColor),this.hoverColor=(r,i)=>_k(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vk(this,e,t)}get(e){return jg(this,e)}describe(e,t){return vk(FI,e,t)}override(e,t){return vk(fc,e,t)}route(e,t,r,i){let s=jg(this,e),o=jg(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[i];return Be(c)?Object.assign({},l,c):Ae(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},bt=new bk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fde,pde,yde]);function _de(n){return!n||Qe(n.size)||Qe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Bg(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function Y6(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,f,p;for(c=0;c<a;c++)if(f=t[c],f!=null&&!vt(f))o=Bg(n,i,s,o,f);else if(vt(f))for(l=0,u=f.length;l<u;l++)p=f[l],p!=null&&!vt(p)&&(o=Bg(n,i,s,o,p));n.restore();let m=s.length/2;if(m>t.length){for(c=0;c<m;c++)delete i[s[c]];s.splice(0,m)}return o}function pc(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function Nk(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function VI(n,e,t,r){Mk(n,e,t,r,null)}function Mk(n,e,t,r,i){let s,o,a,c,l,u,f,p,m=e.pointStyle,I=e.rotation,D=e.radius,S=(I||0)*cde;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(S),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(D)||D<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,r,i/2,D,0,0,fr):n.arc(t,r,D,0,fr),n.closePath();break;case"triangle":u=i?i/2:D,n.moveTo(t+Math.sin(S)*u,r-Math.cos(S)*D),S+=T6,n.lineTo(t+Math.sin(S)*u,r-Math.cos(S)*D),S+=T6,n.lineTo(t+Math.sin(S)*u,r-Math.cos(S)*D),n.closePath();break;case"rectRounded":l=D*.516,c=D-l,o=Math.cos(S+du)*c,f=Math.cos(S+du)*(i?i/2-l:c),a=Math.sin(S+du)*c,p=Math.sin(S+du)*(i?i/2-l:c),n.arc(t-f,r-a,l,S-Bt,S-hr),n.arc(t+p,r-o,l,S-hr,S),n.arc(t+f,r+a,l,S,S+hr),n.arc(t-p,r+o,l,S+hr,S+Bt),n.closePath();break;case"rect":if(!I){c=Math.SQRT1_2*D,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}S+=du;case"rectRot":f=Math.cos(S)*(i?i/2:D),o=Math.cos(S)*D,a=Math.sin(S)*D,p=Math.sin(S)*(i?i/2:D),n.moveTo(t-f,r-a),n.lineTo(t+p,r-o),n.lineTo(t+f,r+a),n.lineTo(t-p,r+o),n.closePath();break;case"crossRot":S+=du;case"cross":f=Math.cos(S)*(i?i/2:D),o=Math.cos(S)*D,a=Math.sin(S)*D,p=Math.sin(S)*(i?i/2:D),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o);break;case"star":f=Math.cos(S)*(i?i/2:D),o=Math.cos(S)*D,a=Math.sin(S)*D,p=Math.sin(S)*(i?i/2:D),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o),S+=du,f=Math.cos(S)*(i?i/2:D),o=Math.cos(S)*D,a=Math.sin(S)*D,p=Math.sin(S)*(i?i/2:D),n.moveTo(t-f,r-a),n.lineTo(t+f,r+a),n.moveTo(t+p,r-o),n.lineTo(t-p,r+o);break;case"line":o=i?i/2:Math.cos(S)*D,a=Math.sin(S)*D,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(S)*(i?i/2:D),r+Math.sin(S)*D);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ys(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Hg(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function qg(n){n.restore()}function X6(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function J6(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function vde(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Qe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function bde(n,e,t,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Ede(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function mc(n,e,t,r,i,s={}){let o=vt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=i.string,vde(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&Ede(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Qe(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,r,s.maxWidth)),n.fillText(l,t,r,s.maxWidth),bde(n,t,r,l,s),r+=Number(i.lineHeight);n.restore()}function df(n,e){let{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bt,Bt,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Bt,hr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,hr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-hr,!0),n.lineTo(t+o.topLeft,r)}var wde=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ide=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tde(n,e){let t=(""+n).match(wde);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Sde=n=>+n||0;function kk(n,e){let t={},r=Be(e),i=r?Object.keys(e):e,s=Be(n)?r?o=>Ae(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of i)t[o]=Sde(s(o));return t}function Ok(n){return kk(n,{top:"y",right:"x",bottom:"y",left:"x"})}function gc(n){return kk(n,["topLeft","topRight","bottomLeft","bottomRight"])}function An(n){let e=Ok(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Zt(n,e){n=n||{},e=e||bt.font;let t=Ae(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Ae(n.style,e.style);r&&!(""+r).match(Ide)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Ae(n.family,e.family),lineHeight:Tde(Ae(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Ae(n.weight,e.weight),string:""};return i.string=_de(i),i}function Wg(n,e,t,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&vt(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Z6(n,e,t){let{min:r,max:i}=n,s=k6(e,(i-r)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function xo(n,e){return Object.assign(Object.create(n),e)}function UI(n,e=[""],t,r,i=()=>n[0]){let s=t||n;typeof r>"u"&&(r=n3("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>UI([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return e3(a,c,()=>Mde(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return R6(a).includes(c)},ownKeys(a){return R6(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function fu(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Lk(n,r),setContext:s=>fu(n,s,t,r),override:s=>fu(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return e3(s,o,()=>Ade(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function Lk(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Do(t)?t:()=>t,isIndexable:Do(r)?r:()=>r}}var Dde=(n,e)=>n?n+NI(e):e,Fk=(n,e)=>Be(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function e3(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function Ade(n,e,t){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[e];return Do(a)&&o.isScriptable(e)&&(a=Cde(e,a,n,t)),vt(a)&&a.length&&(a=Rde(e,a,n,o.isIndexable)),Fk(e,a)&&(a=fu(a,i,s&&s[e],o)),a}function Cde(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||r);return a.delete(n),Fk(n,c)&&(c=Vk(i._scopes,i,n,c)),c}function Rde(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Be(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let f=Vk(l,i,n,u);e.push(fu(f,s,o&&o[n],a))}}return e}function t3(n,e,t){return Do(n)?n(e,t):n}var xde=(n,e)=>n===!0?e:typeof n=="string"?pu(e,n):void 0;function Pde(n,e,t,r,i){for(let s of e){let o=xde(t,s);if(o){n.add(o);let a=t3(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function Vk(n,e,t,r){let i=e._rootScopes,s=t3(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let c=C6(a,o,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=C6(a,o,s,c,r),c===null)?!1:UI(Array.from(a),[""],i,s,()=>Nde(e,t,r))}function C6(n,e,t,r,i){for(;t;)t=Pde(n,e,t,r,i);return t}function Nde(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return vt(i)&&Be(t)?t:i||{}}function Mde(n,e,t,r){let i;for(let s of e)if(i=n3(Dde(s,n),t),typeof i<"u")return Fk(n,i)?Vk(t,r,n,i):i}function n3(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function R6(n){let e=n._keys;return e||(e=n._keys=kde(n._scopes)),e}function kde(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}var Ode=Number.EPSILON||1e-14,of=(n,e)=>e<n.length&&!n[e].skip&&n[e],r3=n=>n==="x"?"y":"x";function Lde(n,e,t,r){let i=n.skip?e:n,s=e,o=t.skip?e:t,a=xI(s,i),c=xI(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let f=r*l,p=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function Fde(n,e,t){let r=n.length,i,s,o,a,c,l=of(n,0);for(let u=0;u<r-1;++u)if(c=l,l=of(n,u+1),!(!c||!l)){if(lf(e[u],0,Ode)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function Vde(n,e,t="x"){let r=r3(t),i=n.length,s,o,a,c=of(n,0);for(let l=0;l<i;++l){if(o=a,a=c,c=of(n,l+1),!a)continue;let u=a[t],f=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=f-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=f+s*e[l])}}function Ude(n,e="x"){let t=r3(e),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,c,l=of(n,0);for(o=0;o<r;++o)if(a=c,c=l,l=of(n,o+1),!!c){if(l){let u=l[e]-c[e];i[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?Mi(i[o-1])!==Mi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Fde(n,i,s),Vde(n,s,e)}function DI(n,e,t){return Math.max(Math.min(n,t),e)}function jde(n,e){let t,r,i,s,o,a=ys(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&ys(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=DI(i.cp1x,e.left,e.right),i.cp1y=DI(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=DI(i.cp2x,e.left,e.right),i.cp2y=DI(i.cp2y,e.top,e.bottom)))}function i3(n,e,t,r,i){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Ude(n,i);else{let l=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=Lde(l,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&jde(n,t)}function jI(){return typeof window<"u"&&typeof document<"u"}function BI(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function PI(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var zI=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Bde(n,e){return zI(n).getPropertyValue(e)}var zde=["top","right","bottom","left"];function hu(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let s=zde[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var $de=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Hde(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,c;if($de(i,s,n.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function yc(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=zI(t),s=i.boxSizing==="border-box",o=hu(i,"padding"),a=hu(i,"border","width"),{x:c,y:l,box:u}=Hde(n,t),f=o.left+(u&&a.left),p=o.top+(u&&a.top),{width:m,height:I}=e;return s&&(m-=o.width+a.width,I-=o.height+a.height),{x:Math.round((c-f)/m*t.width/r),y:Math.round((l-p)/I*t.height/r)}}function qde(n,e,t){let r,i;if(e===void 0||t===void 0){let s=n&&BI(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=zI(s),c=hu(a,"border","width"),l=hu(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,r=PI(a.maxWidth,s,"clientWidth"),i=PI(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||RI,maxHeight:i||RI}}var hc=n=>Math.round(n*10)/10;function s3(n,e,t,r){let i=zI(n),s=hu(i,"margin"),o=PI(i.maxWidth,n,"clientWidth")||RI,a=PI(i.maxHeight,n,"clientHeight")||RI,c=qde(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let p=hu(i,"border","width"),m=hu(i,"padding");l-=m.width+p.width,u-=m.height+p.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=hc(Math.min(l,o,c.maxWidth)),u=hc(Math.min(u,a,c.maxHeight)),l&&!u&&(u=hc(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=hc(Math.floor(u*r))),{width:l,height:u}}function Uk(n,e,t){let r=e||1,i=hc(n.height*r),s=hc(n.width*r);n.height=hc(n.height),n.width=hc(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var o3=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};jI()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function jk(n,e){let t=Bde(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function uc(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function a3(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function c3(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=uc(n,i,t),a=uc(i,s,t),c=uc(s,e,t),l=uc(o,a,t),u=uc(a,c,t);return uc(l,u,t)}var Wde=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Gde=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function mu(n,e,t){return n?Wde(e,t):Gde()}function Bk(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function zk(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function l3(n){return n==="angle"?{between:Sk,compare:ude,normalize:dr}:{between:Ro,compare:(e,t)=>e-t,normalize:e=>e}}function x6({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Kde(n,e,t){let{property:r,start:i,end:s}=t,{between:o,normalize:a}=l3(r),c=e.length,{start:l,end:u,loop:f}=n,p,m;if(f){for(l+=c,u+=c,p=0,m=c;p<m&&o(a(e[l%c][r]),i,s);++p)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:f,style:n.style}}function $k(n,e,t){if(!t)return[n];let{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=l3(r),{start:u,end:f,loop:p,style:m}=Kde(n,e,t),I=[],D=!1,S=null,N,M,F,j=()=>c(i,F,N)&&a(i,F)!==0,z=()=>a(s,N)===0||c(s,F,N),B=()=>D||j(),T=()=>!D||z();for(let _=u,b=u;_<=f;++_)M=e[_%o],!M.skip&&(N=l(M[r]),N!==F&&(D=c(N,i,s),S===null&&B()&&(S=a(N,i)===0?_:b),S!==null&&T()&&(I.push(x6({start:S,end:_,loop:p,count:o,style:m})),S=null),b=_,F=N));return S!==null&&I.push(x6({start:S,end:f,loop:p,count:o,style:m})),I}function Hk(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let s=$k(r[i],n.points,e);s.length&&t.push(...s)}return t}function Qde(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Yde(n,e,t,r){let i=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function u3(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=Qde(t,i,s,r);if(r===!0)return P6(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+i:a,l=!!n._fullLoop&&o===0&&a===i-1;return P6(n,Yde(t,o,c,l),t,e)}function P6(n,e,t,r){return!r||!r.setContext||!t?e:Xde(n,e,t,r)}function Xde(n,e,t,r){let i=n._chart.getContext(),s=N6(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,f=e[0].start,p=f;function m(I,D,S,N){let M=a?-1:1;if(I!==D){for(I+=c;t[I%c].skip;)I-=M;for(;t[D%c].skip;)D+=M;I%c!==D%c&&(l.push({start:I%c,end:D%c,loop:S,style:N}),u=N,f=D%c)}}for(let I of e){f=a?f:I.start;let D=t[f%c],S;for(p=f+1;p<=I.end;p++){let N=t[p%c];S=N6(r.setContext(xo(i,{type:"segment",p0:D,p1:N,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),Jde(S,u)&&m(f,p-1,I.loop,u),D=N,u=S}f<p-1&&m(f,p-1,I.loop,u)}return l}function N6(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Jde(n,e){if(!e)return!1;let t=[],r=function(i,s){return xk(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function AI(n,e,t){return n.options.clip?n[t]:e[t]}function Zde(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:AI(t,e,"left"),right:AI(t,e,"right"),top:AI(r,e,"top"),bottom:AI(r,e,"bottom")}:e}function qk(n,e){let t=e._clip;if(t.disabled)return!1;let r=Zde(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var rO=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ck.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Po=new rO,d3="transparent",ehe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=Pk(n||d3),i=r.valid&&Pk(e||d3);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},iO=class{constructor(e,t,r,i){let s=t[r];i=Wg([e.to,i,s,e.from]);let o=Wg([e.from,s,i]);this._active=!0,this._fn=e.fn||ehe[e.type||typeof o],this._easing=rf[e.easing]||rf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Wg([e.to,t,i,e.from]),this._from=Wg([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},YI=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Be(e))return;let t=Object.keys(bt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Be(s))return;let o={};for(let a of t)o[a]=s[a];(vt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){let r=t.options,i=nhe(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&the(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],f=s[l],p=r.get(l);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[l]=u;continue}s[l]=f=new iO(p,e,l,u),i.push(f)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return Po.add(this._chart,r),!0}};function the(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function nhe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function h3(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function rhe(n,e,t){if(t===!1)return!1;let r=h3(n,t),i=h3(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function ihe(n){let e,t,r,i;return Be(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function h5(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function f3(n,e,t,r={}){let i=n.keys,s=r.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===t){if(u=!0,r.all)continue;break}l=n.values[c],xt(l)&&(s||e===0||Mi(e)===Mi(l))&&(e+=l)}return!u&&!r.all?0:e}function she(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[i]:u,[s]:n[u]};return a}function Wk(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ohe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function ahe(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function che(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function p3(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function m3(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=ohe(s,o,r),f=e.length,p;for(let m=0;m<f;++m){let I=e[m],{[c]:D,[l]:S}=I,N=I._stacks||(I._stacks={});p=N[l]=che(i,u,D),p[a]=S,p._top=p3(p,o,!0,r.type),p._bottom=p3(p,o,!1,r.type);let M=p._visualValues||(p._visualValues={});M[a]=S}}function Gk(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function lhe(n,e){return xo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function uhe(n,e,t){return xo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Gg(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}var Kk=n=>n==="reset"||n==="none",g3=(n,e)=>e?n:Object.assign({},n),dhe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:h5(t,!0),values:null},gO=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wk(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gg(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(p,m,I,D)=>p==="x"?m:p==="r"?D:I,o=r.xAxisID=Ae(i.xAxisID,Gk(t,"x")),a=r.yAxisID=Ae(i.yAxisID,Gk(t,"y")),c=r.rAxisID=Ae(i.rAxisID,Gk(t,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),f=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Dk(this._data,this),t._stacked&&Gg(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Be(r)){let s=this._cachedMeta;this._data=she(r,s)}else if(i!==r){if(i){Dk(i,this);let s=this._cachedMeta;Gg(s),s._parsed=[]}r&&Object.isExtensible(r)&&H6(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=Wk(r.vScale,r),r.stack!==i.stack&&(s=!0,Gg(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(m3(this,r._parsed),r._stacked=Wk(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=t===0&&r===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],f,p,m;if(this._parsing===!1)i._parsed=s,i._sorted=!0,m=s;else{vt(s[t])?m=this.parseArrayData(i,s,t,r):Be(s[t])?m=this.parseObjectData(i,s,t,r):m=this.parsePrimitiveData(i,s,t,r);let I=()=>p[c]===null||u&&p[c]<u[c];for(f=0;f<r;++f)i._parsed[f+t]=p=m[f],l&&(I()&&(l=!1),u=p);i._sorted=l}a&&m3(this,m)}parsePrimitiveData(t,r,i,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),f=o===a,p=new Array(s),m,I,D;for(m=0,I=s;m<I;++m)D=m+i,p[m]={[c]:f||o.parse(u[D],D),[l]:a.parse(r[D],D)};return p}parseArrayData(t,r,i,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,f,p;for(l=0,u=s;l<u;++l)f=l+i,p=r[f],c[l]={x:o.parse(p[0],f),y:a.parse(p[1],f)};return c}parseObjectData(t,r,i,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),f,p,m,I;for(f=0,p=s;f<p;++f)m=f+i,I=r[m],u[f]={x:o.parse(pu(I,c),m),y:a.parse(pu(I,l),m)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let s=this.chart,o=this._cachedMeta,a=r[t.axis],c={keys:h5(s,!0),values:r._stacks[t.axis]._visualValues};return f3(c,a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=f3(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),l=dhe(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=ahe(c),m,I;function D(){I=s[m];let S=I[c.axis];return!xt(I[t.axis])||f>S||p<S}for(m=0;m<a&&!(!D()&&(this.updateRangeFromParsed(u,t,I,l),o));++m);if(o){for(m=a-1;m>=0;--m)if(!D()){this.updateRangeFromParsed(u,t,I,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],xt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=ihe(Ae(this.options.clip,rhe(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,f;for(i.dataset&&i.dataset.draw(t,o,c,l),f=c;f<c+l;++f){let p=s[f];p.hidden||(p.active&&u?a.push(p):p.draw(t,o))}for(f=0;f<a.length;++f)a[f].draw(t,o)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=uhe(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=lhe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=t+"-"+r,c=o[a],l=this.enableOptionSharing&&cf(i);if(c)return g3(c,l);let u=this.chart.config,f=u.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],m=u.getOptionScopes(this.getDataset(),f),I=Object.keys(bt.elements[t]),D=()=>this.getContext(i,s,r),S=u.resolveNamedOptions(m,I,D,p);return S.$shared&&(S.$shared=l,o[a]=Object.freeze(g3(S,l))),S}_resolveAnimations(t,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,r),m=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(m,this.getContext(t,i,r))}let u=new YI(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Kk(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){Kk(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!Kk(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){let s=this._cachedMeta,o=s.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,r);i._stacked&&Gg(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function hhe(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=Ak(r.sort((i,s)=>i-s))}return n._cache.$bar}function fhe(n){let e=n.iScale,t=hhe(e,n.type),r=e._length,i,s,o,a,c=()=>{o===32767||o===-32768||(cf(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function phe(n,e,t,r){let i=t.barThickness,s,o;return Qe(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function mhe(n,e,t,r){let i=e.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:t.barPercentage,start:l}}function ghe(n,e,t,r){let i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function f5(n,e,t,r){return vt(n)?ghe(n,e,t,r):e[t.axis]=t.parse(n,r),e}function y3(n,e,t,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,c=[],l,u,f,p;for(l=t,u=t+r;l<u;++l)p=e[l],f={},f[i.axis]=a||i.parse(o[l],l),c.push(f5(p,f,s,l));return c}function Qk(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function yhe(n,e,t){return n!==0?Mi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function _he(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function vhe(n,e,t,r){let i=e.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=_he(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(s[_3(u,o,a,c)]=!0,i=l)),s[_3(i,o,a,c)]=!0,n.borderSkipped=s}function _3(n,e,t,r){return r?(n=bhe(n,e,t),n=v3(n,t,e)):n=v3(n,e,t),n}function bhe(n,e,t){return n===e?t:n===t?e:n}function v3(n,e,t){return n==="start"?e:n==="end"?t:n}function Ehe(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var p5=(()=>{class n extends gO{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return y3(t,r,i,s)}parseArrayData(t,r,i,s){return y3(t,r,i,s)}parseObjectData(t,r,i,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,f=a.axis==="x"?c:l,p=[],m,I,D,S;for(m=i,I=i+s;m<I;++m)S=r[m],D={},D[o.axis]=o.parse(pu(S,u),m),p.push(f5(pu(S,f),D,a,m));return p}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,c=Qk(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(r,s);for(let I=r;I<r+i;I++){let D=this.getParsed(I),S=o||Qe(D[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(I),N=this._calculateBarIndexPixels(I,f),M=(D._stacks||{})[c.axis],F={horizontal:u,base:S.base,enableBorderRadius:!M||Qk(D._custom)||a===M._top||a===M._bottom,x:u?S.head:N.center,y:u?N.center:S.head,height:u?N.size:Math.abs(S.size),width:u?Math.abs(S.size):N.size};m&&(F.options=p||this.resolveDataElementOptions(I,t[I].active?"active":s));let j=F.options||t[I].options;vhe(F,j,M,a),Ehe(F,j,f.ratio),this.updateElement(t[I],I,F,s)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=f=>{let p=f._parsed.find(I=>I[i.axis]===l),m=p&&p[f.vScale.axis];if(Qe(m)||isNaN(m))return!0};for(let f of s)if(!(r!==void 0&&u(f))&&((o===!1||a.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&a.push(f.stack),f.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[Ae(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let s=this._getStacks(t,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let c=t.barThickness;return{min:c||fhe(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,f=Qk(u),p=l[r.axis],m=0,I=i?this.applyStack(r,l,i):p,D,S;I!==p&&(m=I-p,I=p),f&&(p=u.barStart,I=u.barEnd-u.barStart,p!==0&&Mi(p)!==Mi(u.barEnd)&&(m=0),m+=p);let N=!Qe(o)&&!f?o:m,M=r.getPixelForValue(N);if(this.chart.getDataVisibility(t)?D=r.getPixelForValue(m+I):D=M,S=D-M,Math.abs(S)<a){S=yhe(S,r,c)*a,p===c&&(M-=S/2);let F=r.getPixelForDecimal(0),j=r.getPixelForDecimal(1),z=Math.min(F,j),B=Math.max(F,j);M=Math.max(Math.min(M,B),z),D=M+S,i&&!f&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(D)-r.getValueForPixel(M))}if(M===r.getPixelForValue(c)){let F=Mi(S)*r.getLineWidthForValue(c)/2;M+=F,S-=F}return{size:S,base:M,head:D,center:D+S/2}}_calculateBarIndexPixels(t,r){let i=r.scale,s=this.options,o=s.skipNull,a=Ae(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(r.grouped){let f=o?this._getStackCount(t):r.stackCount,p=s.barThickness==="flex"?mhe(t,r,s,f*u):phe(t,r,s,f*u),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(Ae(m,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+I;c=p.start+p.chunk*D+p.chunk/2,l=Math.min(a,p.chunk*p.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})();var m5=(()=>{class n extends gO{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:c,count:l}=G6(r,s,a);this._drawStart=c,this._drawCount=l,K6(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,s),m=a.axis,I=c.axis,{spanGaps:D,segment:S}=this.options,N=uf(D)?D:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none",F=r+i,j=t.length,z=r>0&&this.getParsed(r-1);for(let B=0;B<j;++B){let T=t[B],_=M?T:{};if(B<r||B>=F){_.skip=!0;continue}let b=this.getParsed(B),C=Qe(b[I]),A=_[m]=a.getPixelForValue(b[m],B),R=_[I]=o||C?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,b,l):b[I],B);_.skip=isNaN(A)||isNaN(R)||C,_.stop=B>0&&Math.abs(b[m]-z[m])>N,S&&(_.parsed=b,_.raw=u.data[B]),p&&(_.options=f||this.resolveDataElementOptions(B,T.active?"active":s)),M||this.updateElement(T,B,_,s),z=b}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function gu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var sO=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return gu()}parse(){return gu()}format(){return gu()}add(){return gu()}diff(){return gu()}startOf(){return gu()}endOf(){return gu()}},whe={_date:sO};function Ihe(n,e,t,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?B6:dc;if(r){if(i._sharedOptions){let u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){let p=l(s,e,t-f),m=l(s,e,t+f);return{lo:p.lo,hi:m.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:f}=i._cachedMeta,{_parsed:p}=n,m=p.slice(0,u.lo+1).reverse().findIndex(D=>!Qe(D[f.axis]));u.lo-=Math.max(0,m);let I=p.slice(u.hi).findIndex(D=>!Qe(D[f.axis]));u.hi+=Math.max(0,I)}return u}}return{lo:0,hi:s.length-1}}function ny(n,e,t,r,i){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:f,hi:p}=Ihe(s[a],e,o,i);for(let m=f;m<=p;++m){let I=u[m];I.skip||r(I,l,m)}}}function The(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Yk(n,e,t,r,i){let s=[];return!i&&!n.isPointInArea(e)||ny(n,t,e,function(a,c,l){!i&&!ys(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function She(n,e,t,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=U6(o,{x:e.x,y:e.y});Sk(f,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return ny(n,t,e,s),i}function Dhe(n,e,t,r,i,s){let o=[],a=The(t),c=Number.POSITIVE_INFINITY;function l(u,f,p){let m=u.inRange(e.x,e.y,i);if(r&&!m)return;let I=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(I))&&!m)return;let S=a(e,I);S<c?(o=[{element:u,datasetIndex:f,index:p}],c=S):S===c&&o.push({element:u,datasetIndex:f,index:p})}return ny(n,t,e,l),o}function Xk(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?She(n,e,t,i):Dhe(n,e,t,r,i,s)}function b3(n,e,t,r,i){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return ny(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var Ahe={evaluateInteractionItems:ny,modes:{index(n,e,t,r){let i=yc(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Yk(n,i,s,r,o):Xk(n,i,s,!1,r,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,f=l.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=yc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?Yk(n,i,s,r,o):Xk(n,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=yc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Yk(n,i,s,r,o)},nearest(n,e,t,r){let i=yc(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Xk(n,i,s,t.intersect,r,o)},x(n,e,t,r){let i=yc(e,n);return b3(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=yc(e,n);return b3(n,i,"y",t.intersect,r)}}},g5=["left","top","right","bottom"];function Kg(n,e){return n.filter(t=>t.pos===e)}function E3(n,e){return n.filter(t=>g5.indexOf(t.pos)===-1&&t.box.axis===e)}function Qg(n,e){return n.sort((t,r)=>{let i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Che(n){let e=[],t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Rhe(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:s}=t;if(!r||!g5.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function xhe(n,e){let t=Rhe(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function Phe(n){let e=Che(n),t=Qg(e.filter(l=>l.box.fullSize),!0),r=Qg(Kg(e,"left"),!0),i=Qg(Kg(e,"right")),s=Qg(Kg(e,"top"),!0),o=Qg(Kg(e,"bottom")),a=E3(e,"x"),c=E3(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Kg(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function w3(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function y5(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Nhe(n,e,t,r){let{pos:i,box:s}=t,o=n.maxPadding;if(!Be(i)){t.size&&(n[i]-=t.size);let f=r[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[i]+=t.size}s.getPadding&&y5(o,s.getPadding());let a=Math.max(0,e.outerWidth-w3(o,n,"left","right")),c=Math.max(0,e.outerHeight-w3(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function Mhe(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function khe(n,e){let t=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Jg(n,e,t,r){let i=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,khe(a.horizontal,e));let{same:f,other:p}=Nhe(e,t,a,r);l|=f&&i.length,u=u||p,c.fullSize||i.push(a)}return l&&Jg(i,e,t,r)||u}function $I(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function I3(n,e,t,r){let i=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let f=e.w*u,p=l.size||c.height;cf(l.start)&&(o=l.start),c.fullSize?$I(c,i.left,o,t.outerWidth-i.right-i.left,p):$I(c,e.left+l.placed,o,f,p),l.start=o,l.placed+=f,o=c.bottom}else{let f=e.h*u,p=l.size||c.width;cf(l.start)&&(s=l.start),c.fullSize?$I(c,s,i.top,p,t.outerHeight-i.bottom-i.top):$I(c,s,e.top+l.placed,p,f),l.start=s,l.placed+=f,s=c.right}}e.x=s,e.y=o}var Zr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=An(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=Phe(n.boxes),c=a.vertical,l=a.horizontal;ut(n.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});let u=c.reduce((D,S)=>S.box.options&&S.box.options.display===!1?D:D+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);y5(p,An(r));let m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),I=xhe(c.concat(l),f);Jg(a.fullSize,m,f,I),Jg(c,m,f,I),Jg(l,m,f,I)&&Jg(c,m,f,I),Mhe(m),I3(a.leftAndTop,m,f,I),m.x+=m.w,m.y+=m.h,I3(a.rightAndBottom,m,f,I),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ut(a.chartArea,D=>{let S=D.box;Object.assign(S,n.chartArea),S.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},XI=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},oO=class extends XI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},KI="$chartjs",Ohe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},T3=n=>n===null||n==="";function Lhe(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[KI]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",T3(i)){let s=jk(n,"width");s!==void 0&&(n.width=s)}if(T3(r))if(n.style.height==="")n.height=n.width/(e||2);else{let s=jk(n,"height");s!==void 0&&(n.height=s)}return n}var _5=o3?{passive:!0}:!1;function Fhe(n,e,t){n&&n.addEventListener(e,t,_5)}function Vhe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,_5)}function Uhe(n,e){let t=Ohe[n.type]||n.type,{x:r,y:i}=yc(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function JI(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function jhe(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||JI(a.addedNodes,r),o=o&&!JI(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Bhe(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||JI(a.removedNodes,r),o=o&&!JI(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var ey=new Map,S3=0;function v5(){let n=window.devicePixelRatio;n!==S3&&(S3=n,ey.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function zhe(n,e){ey.size||window.addEventListener("resize",v5),ey.set(n,e)}function $he(n){ey.delete(n),ey.size||window.removeEventListener("resize",v5)}function Hhe(n,e,t){let r=n.canvas,i=r&&BI(r);if(!i)return;let s=Rk((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(i),zhe(n,s),o}function Jk(n,e,t){t&&t.disconnect(),e==="resize"&&$he(n)}function qhe(n,e,t){let r=n.canvas,i=Rk(s=>{n.ctx!==null&&t(Uhe(s,n))},n);return Fhe(r,e,i),i}var aO=class extends XI{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Lhe(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[KI])return!1;let r=t[KI].initial;["height","width"].forEach(s=>{let o=r[s];Qe(o)?t.removeAttribute(s):t.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[KI],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),o={attach:jhe,detach:Bhe,resize:Hhe}[t]||qhe;i[t]=o(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:Jk,detach:Jk,resize:Jk}[t]||Vhe)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return s3(e,t,r,i)}isAttached(e){let t=e&&BI(e);return!!(t&&t.isConnected)}};function Whe(n){return!jI()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?oO:aO}var Es=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return uf(this.x)&&uf(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Ghe(n,e){let t=n.options.ticks,r=Khe(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Yhe(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return Xhe(e,l,s,o/i),l;let u=Qhe(s,e,i);if(o>0){let f,p,m=o>1?Math.round((c-a)/(o-1)):null;for(HI(e,l,u,Qe(m)?0:a-m,a),f=0,p=o-1;f<p;f++)HI(e,l,u,s[f],s[f+1]);return HI(e,l,u,c,Qe(m)?e.length:c+m),l}return HI(e,l,u),l}function Khe(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Qhe(n,e,t){let r=Jhe(n),i=e.length/t;if(!r)return Math.max(i,1);let s=F6(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function Yhe(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Xhe(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function HI(n,e,t,r,i){let s=Ae(r,0),o=Math.min(Ae(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function Jhe(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var Zhe=n=>n==="left"?"right":n==="right"?"left":n,D3=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,A3=(n,e)=>Math.min(e||n,n);function C3(n,e){let t=[],r=n.length/e,i=n.length,s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function efe(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function tfe(n,e){ut(n,t=>{let r=t.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function Yg(n){return n.drawTicks?n.tickLength:0}function R3(n,e){if(!n.display)return 0;let t=Zt(n.font,e),r=An(n.padding);return(vt(n.text)?n.text.length:1)*t.lineHeight+r.height}function nfe(n,e){return xo(n,{scale:e,type:"scale"})}function rfe(n,e,t){return xo(n,{tick:t,index:e,type:"tick"})}function ife(n,e,t){let r=OI(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Zhe(r)),r}function sfe(n,e,t,r){let{top:i,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,f=0,p,m,I,D=o-i,S=a-s;if(n.isHorizontal()){if(m=Dn(r,s,a),Be(t)){let N=Object.keys(t)[0],M=t[N];I=u[N].getPixelForValue(M)+D-e}else t==="center"?I=(l.bottom+l.top)/2+D-e:I=D3(n,t,e);p=a-s}else{if(Be(t)){let N=Object.keys(t)[0],M=t[N];m=u[N].getPixelForValue(M)-S+e}else t==="center"?m=(l.left+l.right)/2-S+e:m=D3(n,t,e);I=Dn(r,o,i),f=t==="left"?-hr:hr}return{titleX:m,titleY:I,maxWidth:p,rotation:f}}var _u=class n extends Es{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=mr(e,Number.POSITIVE_INFINITY),t=mr(t,Number.NEGATIVE_INFINITY),r=mr(r,Number.POSITIVE_INFINITY),i=mr(i,Number.NEGATIVE_INFINITY),{min:mr(e,r),max:mr(t,i),minDefined:xt(e),maxDefined:xt(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:mr(t,mr(r,t)),max:mr(r,mr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Z6(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?C3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ghe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gt(this.options.afterUpdate,[this])}beforeSetDimensions(){gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),gt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=gt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=A3(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation,o=i,a,c,l;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=pr(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),c=this.maxHeight-Yg(e.grid)-t.padding-R3(e.title,this.chart.options.font),l=Math.sqrt(f*f+p*p),o=MI(Math.min(Math.asin(pr((u.highest.height+6)/a,-1,1)),Math.asin(pr(c/l,-1,1))-Math.asin(pr(p/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){gt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=R3(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Yg(s)+c):(e.height=this.maxHeight,e.width=Yg(s)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,I=Co(this.labelRotation),D=Math.cos(I),S=Math.sin(I);if(a){let N=r.mirror?0:S*f.width+D*p.height;e.height=Math.min(this.maxHeight,e.height+N+m)}else{let N=r.mirror?0:D*f.width+S*p.height;e.width=Math.min(this.maxWidth,e.width+N+m)}this._calculatePadding(l,u,S,D)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),p=0,m=0;c?l?(p=i*e.width,m=r*t.height):(p=r*e.height,m=i*t.width):s==="start"?m=t.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=t.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=t.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=t.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Qe(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=C3(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/A3(t,r)),l=0,u=0,f,p,m,I,D,S,N,M,F,j,z;for(f=0;f<t;f+=c){if(I=e[f].label,D=this._resolveTickFontOptions(f),i.font=S=D.string,N=s[S]=s[S]||{data:{},gc:[]},M=D.lineHeight,F=j=0,!Qe(I)&&!vt(I))F=Bg(i,N.data,N.gc,F,I),j=M;else if(vt(I))for(p=0,m=I.length;p<m;++p)z=I[p],!Qe(z)&&!vt(z)&&(F=Bg(i,N.data,N.gc,F,z),j+=M);o.push(F),a.push(j),l=Math.max(F,l),u=Math.max(j,u)}tfe(s,t);let B=o.indexOf(l),T=a.indexOf(u),_=b=>({width:o[b]||0,height:a[b]||0});return{first:_(0),last:_(t-1),widest:_(B),highest:_(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return j6(this._alignToPixels?pc(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=rfe(this.getContext(),e,r))}return this.$context||(this.$context=nfe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Co(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=Yg(s),m=[],I=a.setContext(this.getContext()),D=I.display?I.width:0,S=D/2,N=function(Y){return pc(r,Y,D)},M,F,j,z,B,T,_,b,C,A,R,w;if(o==="top")M=N(this.bottom),T=this.bottom-p,b=M-S,A=N(e.top)+S,w=e.bottom;else if(o==="bottom")M=N(this.top),A=e.top,w=N(e.bottom)-S,T=M+S,b=this.top+p;else if(o==="left")M=N(this.right),B=this.right-p,_=M-S,C=N(e.left)+S,R=e.right;else if(o==="right")M=N(this.left),C=e.left,R=N(e.right)-S,B=M+S,_=this.left+p;else if(t==="x"){if(o==="center")M=N((e.top+e.bottom)/2+.5);else if(Be(o)){let Y=Object.keys(o)[0],ee=o[Y];M=N(this.chart.scales[Y].getPixelForValue(ee))}A=e.top,w=e.bottom,T=M+S,b=T+p}else if(t==="y"){if(o==="center")M=N((e.left+e.right)/2);else if(Be(o)){let Y=Object.keys(o)[0],ee=o[Y];M=N(this.chart.scales[Y].getPixelForValue(ee))}B=M-S,_=B-p,C=e.left,R=e.right}let Oe=Ae(i.ticks.maxTicksLimit,f),Ce=Math.max(1,Math.ceil(f/Oe));for(F=0;F<f;F+=Ce){let Y=this.getContext(F),ee=s.setContext(Y),re=a.setContext(Y),ge=ee.lineWidth,at=ee.color,zt=re.dash||[],Ze=re.dashOffset,$e=ee.tickWidth,Le=ee.tickColor,dn=ee.tickBorderDash||[],Vn=ee.tickBorderDashOffset;j=efe(this,F,c),j!==void 0&&(z=pc(r,j,ge),l?B=_=C=R=z:T=b=A=w=z,m.push({tx1:B,ty1:T,tx2:_,ty2:b,x1:C,y1:A,x2:R,y2:w,width:ge,color:at,borderDash:zt,borderDashOffset:Ze,tickWidth:$e,tickColor:Le,tickBorderDash:dn,tickBorderDashOffset:Vn}))}return this._ticksLength=f,this._borderValue=M,m}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:f}=s,p=Yg(r.grid),m=p+u,I=f?-u:m,D=-Co(this.labelRotation),S=[],N,M,F,j,z,B,T,_,b,C,A,R,w="middle";if(i==="top")B=this.bottom-I,T=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+I,T=this._getXAxisLabelAlignment();else if(i==="left"){let Ce=this._getYAxisLabelAlignment(p);T=Ce.textAlign,z=Ce.x}else if(i==="right"){let Ce=this._getYAxisLabelAlignment(p);T=Ce.textAlign,z=Ce.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+m;else if(Be(i)){let Ce=Object.keys(i)[0],Y=i[Ce];B=this.chart.scales[Ce].getPixelForValue(Y)+m}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")z=(e.left+e.right)/2-m;else if(Be(i)){let Ce=Object.keys(i)[0],Y=i[Ce];z=this.chart.scales[Ce].getPixelForValue(Y)}T=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(c==="start"?w="top":c==="end"&&(w="bottom"));let Oe=this._getLabelSizes();for(N=0,M=a.length;N<M;++N){F=a[N],j=F.label;let Ce=s.setContext(this.getContext(N));_=this.getPixelForTick(N)+s.labelOffset,b=this._resolveTickFontOptions(N),C=b.lineHeight,A=vt(j)?j.length:1;let Y=A/2,ee=Ce.color,re=Ce.textStrokeColor,ge=Ce.textStrokeWidth,at=T;o?(z=_,T==="inner"&&(N===M-1?at=this.options.reverse?"left":"right":N===0?at=this.options.reverse?"right":"left":at="center"),i==="top"?l==="near"||D!==0?R=-A*C+C/2:l==="center"?R=-Oe.highest.height/2-Y*C+C:R=-Oe.highest.height+C/2:l==="near"||D!==0?R=C/2:l==="center"?R=Oe.highest.height/2-Y*C:R=Oe.highest.height-A*C,f&&(R*=-1),D!==0&&!Ce.showLabelBackdrop&&(z+=C/2*Math.sin(D))):(B=_,R=(1-A)*C/2);let zt;if(Ce.showLabelBackdrop){let Ze=An(Ce.backdropPadding),$e=Oe.heights[N],Le=Oe.widths[N],dn=R-Ze.top,Vn=0-Ze.left;switch(w){case"middle":dn-=$e/2;break;case"bottom":dn-=$e;break}switch(T){case"center":Vn-=Le/2;break;case"right":Vn-=Le;break;case"inner":N===M-1?Vn-=Le:N>0&&(Vn-=Le/2);break}zt={left:Vn,top:dn,width:Le+Ze.width,height:$e+Ze.height,color:Ce.backdropColor}}S.push({label:j,font:b,textOffset:R,options:{rotation:D,color:ee,strokeColor:re,strokeWidth:ge,textAlign:at,textBaseline:w,translation:[z,B],backdrop:zt}})}return S}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Co(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?i?(u=this.right+s,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){let c=i[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,f,p;this.isHorizontal()?(l=pc(e,this.left,o)-o/2,u=pc(e,this.right,a)+a/2,f=p=c):(f=pc(e,this.top,o)-o/2,p=pc(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,f),t.lineTo(u,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&Hg(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;mc(r,l,0,u,c,a)}i&&qg(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let s=Zt(r.font),o=An(r.padding),a=r.align,c=s.lineHeight/2;t==="bottom"||t==="center"||Be(t)?(c+=o.bottom,vt(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:f,rotation:p}=sfe(this,c,t,a);mc(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:ife(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=Ae(e.grid&&e.grid.z,-1),i=Ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Zt(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},hf=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;cfe(t)&&(r=this.register(t));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,ofe(e,o,r),this.override&&bt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in bt[i]&&(delete bt[i][r],this.override&&delete fc[r])}};function ofe(n,e,t){let r=sf(Object.create(null),[t?bt.get(t):{},bt.get(e),n.defaults]);bt.set(e,r),n.defaultRoutes&&afe(e,n.defaultRoutes),n.descriptors&&bt.describe(e,n.descriptors)}function afe(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");bt.route(s,i,c,a)})}function cfe(n){return"id"in n&&"defaults"in n}var cO=class{constructor(){this.controllers=new hf(gO,"datasets",!0),this.elements=new hf(Es,"elements"),this.plugins=new hf(Object,"plugins"),this.scales=new hf(_u,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ut(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){let i=NI(e);gt(r["before"+i],[],r),t[e](r),gt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},bs=new cO,lO=class{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[t,i,s.options];if(gt(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=Ae(r.options&&r.options.plugins,{}),s=lfe(r);return i===!1&&!t?[]:dfe(e,s,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function lfe(n){let e={},t=[],r=Object.keys(bs.plugins.items);for(let s=0;s<r.length;s++)t.push(bs.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function ufe(n,e){return!e&&n===!1?null:n===!0?{}:n}function dfe(n,{plugins:e,localIds:t},r,i){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=ufe(r[c],i);l!==null&&s.push({plugin:a,options:hfe(n.config,{plugin:a,local:t[c]},l,o)})}return s}function hfe(n,{plugin:e,local:t},r,i){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function uO(n,e){let t=bt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function ffe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function pfe(n,e){return n===e?"_index_":"_value_"}function x3(n){if(n==="x"||n==="y"||n==="r")return n}function mfe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dO(n,...e){if(x3(n))return n;for(let t of e){let r=t.axis||mfe(t.position)||n.length>1&&x3(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function P3(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function gfe(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return P3(n,"x",t[0])||P3(n,"y",t[0])}return{}}function yfe(n,e){let t=fc[n.type]||{scales:{}},r=e.scales||{},i=uO(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Be(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=dO(o,a,gfe(o,n),bt.scales[a.type]),l=pfe(c,i),u=t.scales||{};s[o]=af(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||uO(a,e),u=(fc[a]||{}).scales||{};Object.keys(u).forEach(f=>{let p=ffe(f,c),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),af(s[m],[{axis:p},r[m],u[f]])})}),Object.keys(s).forEach(o=>{let a=s[o];af(a,[bt.scales[a.type],bt.scale])}),s}function b5(n){let e=n.options||(n.options={});e.plugins=Ae(e.plugins,{}),e.scales=yfe(n,e)}function E5(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function _fe(n){return n=n||{},n.data=E5(n.data),b5(n),n}var N3=new Map,w5=new Set;function qI(n,e){let t=N3.get(n);return t||(t=e(),N3.set(n,t),w5.add(t)),t}var Xg=(n,e,t)=>{let r=pu(e,t);r!==void 0&&n.add(r)},hO=class{constructor(e){this._config=_fe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=E5(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),b5(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qI(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return qI(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return qI(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return qI(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(f=>Xg(c,e,f))),u.forEach(f=>Xg(c,i,f)),u.forEach(f=>Xg(c,fc[s]||{},f)),u.forEach(f=>Xg(c,bt,f)),u.forEach(f=>Xg(c,FI,f))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),w5.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,fc[t]||{},bt.datasets[t]||{},{type:t},bt,FI]}resolveNamedOptions(e,t,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=M3(this._resolverCache,e,i),c=o;if(bfe(o,t)){s.$shared=!1,r=Do(r)?r():r;let l=this.createResolver(e,r,a);c=fu(o,r,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,r=[""],i){let{resolver:s}=M3(this._resolverCache,e,r);return Be(t)?fu(s,t,void 0,i):s}};function M3(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),s=r.get(i);return s||(s={resolver:UI(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var vfe=n=>Be(n)&&Object.getOwnPropertyNames(n).some(e=>Do(n[e]));function bfe(n,e){let{isScriptable:t,isIndexable:r}=Lk(n);for(let i of e){let s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Do(a)||vfe(a))||o&&vt(a))return!0}return!1}var Efe="4.5.1",wfe=["top","bottom","left","right","chartArea"];function k3(n,e){return n==="top"||n==="bottom"||wfe.indexOf(n)===-1&&e==="x"}function O3(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function L3(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),gt(t&&t.onComplete,[n],e)}function Ife(n){let e=n.chart,t=e.options.animation;gt(t&&t.onProgress,[n],e)}function I5(n){return jI()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var QI={},F3=n=>{let e=I5(n);return Object.values(QI).filter(t=>t.canvas===e).pop()};function Tfe(n,e,t){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=e){let o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function Sfe(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var pf=(()=>{class n{static defaults=bt;static instances=QI;static overrides=fc;static registry=bs;static version=Efe;static getChart=F3;static register(...t){bs.add(...t),V3()}static unregister(...t){bs.remove(...t),V3()}constructor(t,r){let i=this.config=new hO(r),s=I5(t),o=F3(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Whe(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,f=l&&l.width;if(this.id=M6(),this.ctx=c,this.canvas=l,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=q6(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],QI[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Po.listen(this,"complete",L3),Po.listen(this,"progress",Ife),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return Qe(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return bs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Uk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Nk(this.canvas,this.ctx),this}stop(){return Po.stop(this),this}resize(t,r){Po.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Uk(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),gt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};ut(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=dO(a,c),u=l==="r",f=l==="x";return{options:c,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),ut(o,a=>{let c=a.options,l=c.id,u=dO(l,c),f=Ae(c.type,a.dtype);(c.position===void 0||k3(c.position,u)!==k3(a.dposition))&&(c.position=a.dposition),s[l]=!0;let p=null;if(l in i&&i[l].type===f)p=i[l];else{let m=bs.getScale(f);p=new m({id:l,type:f,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(c,t)}),ut(s,(a,c)=>{a||delete i[c]}),ut(i,a=>{Zr.configure(this,a,a.options),Zr.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(O3("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||uO(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=bs.getController(c),{datasetElementType:u,dataElementType:f}=bt.datasets[c];Object.assign(l,{dataElementType:bs.getElement(f),datasetElementType:u&&bs.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ut(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){let{controller:p}=this.getDatasetMeta(u),m=!s&&o.indexOf(p)===-1;p.buildOrUpdateElements(m),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||ut(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(O3("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ut(this.scales,t=>{Zr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ek(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;Tfe(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!Ek(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zr.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],ut(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Do(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Po.has(this)?this.attached&&!Po.running(this)&&Po.start(this):(this.draw(),L3({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=qk(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Hg(r,s),t.controller.draw(),s&&qg(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ys(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){let o=Ahe.modes[r];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);cf(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Po.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Nk(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete QI[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};ut(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){ut(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ut(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!zg(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let s=this.options.hover,o=(l,u)=>l.filter(f=>!u.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),a=o(r,t),c=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(t,s,i,a),l=L6(t),u=Sfe(t,this._lastEvent,i,l);i&&(this._lastEvent=null,gt(o.onHover,[t,c,this],this),l&&gt(o.onClick,[t,c,this],this));let f=!zg(c,s);return(f||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,f}_getActiveElements(t,r,i,s){if(t.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function V3(){return ut(pf.instances,n=>n._plugins.invalidate())}function T5(n,e,t=e){n.lineCap=Ae(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ae(t.borderDash,e.borderDash)),n.lineDashOffset=Ae(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ae(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ae(t.borderWidth,e.borderWidth),n.strokeStyle=Ae(t.borderColor,e.borderColor)}function Dfe(n,e,t){n.lineTo(t.x,t.y)}function Afe(n){return n.stepped?X6:n.tension||n.cubicInterpolationMode==="monotone"?J6:Dfe}function S5(n,e,t={}){let r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function Cfe(n,e,t,r){let{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=S5(i,t,r),u=Afe(s),{move:f=!0,reverse:p}=r||{},m,I,D;for(m=0;m<=l;++m)I=i[(a+(p?l-m:m))%o],!I.skip&&(f?(n.moveTo(I.x,I.y),f=!1):u(n,D,I,p,s.stepped),D=I);return c&&(I=i[(a+(p?l:0))%o],u(n,D,I,p,s.stepped)),!!c}function Rfe(n,e,t,r){let i=e.points,{count:s,start:o,ilen:a}=S5(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,f=0,p,m,I,D,S,N,M=j=>(o+(l?a-j:j))%s,F=()=>{D!==S&&(n.lineTo(u,S),n.lineTo(u,D),n.lineTo(u,N))};for(c&&(m=i[M(0)],n.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[M(p)],m.skip)continue;let j=m.x,z=m.y,B=j|0;B===I?(z<D?D=z:z>S&&(S=z),u=(f*u+j)/++f):(F(),n.lineTo(j,z),I=B,f=0,D=S=z),N=z}F()}function fO(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Rfe:Cfe}function xfe(n){return n.stepped?a3:n.tension||n.cubicInterpolationMode==="monotone"?c3:uc}function Pfe(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),T5(n,e.options),n.stroke(i)}function Nfe(n,e,t,r){let{segments:i,options:s}=e,o=fO(e);for(let a of i)T5(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var Mfe=typeof Path2D=="function";function kfe(n,e,t,r){Mfe&&!e.options.segment?Pfe(n,e,t,r):Nfe(n,e,t,r)}var ry=(()=>{class n extends Es{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;i3(this._points,i,t,s,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=u3(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,s=t[r],o=this.points,a=Hk(this,{property:r,start:s,end:s});if(!a.length)return;let c=[],l=xfe(i),u,f;for(u=0,f=a.length;u<f;++u){let{start:p,end:m}=a[u],I=o[p],D=o[m];if(I===D){c.push(I);continue}let S=Math.abs((s-I[r])/(D[r]-I[r])),N=l(I,D,S,i.stepped);N[r]=t[r],c.push(N)}return c.length===1?c[0]:c}pathSegment(t,r,i){return fO(this)(t,this,r,i)}path(t,r,i){let s=this.segments,o=fO(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of s)a&=o(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),kfe(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function U3(n,e,t,r){let i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}var D5=(()=>{class n extends Es{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return U3(this,t,"x",r)}inYRange(t,r){return U3(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!ys(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,VI(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function A5(n,e){let{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,f;return n.horizontal?(f=o/2,a=Math.min(t,i),c=Math.max(t,i),l=r-f,u=r+f):(f=s/2,a=t-f,c=t+f,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function _c(n,e,t,r){return n?0:pr(e,t,r)}function Ofe(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,s=Ok(r);return{t:_c(i.top,s.top,0,t),r:_c(i.right,s.right,0,e),b:_c(i.bottom,s.bottom,0,t),l:_c(i.left,s.left,0,e)}}function Lfe(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=gc(i),o=Math.min(e,t),a=n.borderSkipped,c=r||Be(i);return{topLeft:_c(!c||a.top||a.left,s.topLeft,0,o),topRight:_c(!c||a.top||a.right,s.topRight,0,o),bottomLeft:_c(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:_c(!c||a.bottom||a.right,s.bottomRight,0,o)}}function Ffe(n){let e=A5(n),t=e.right-e.left,r=e.bottom-e.top,i=Ofe(n,t/2,r/2),s=Lfe(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Zk(n,e,t,r){let i=e===null,s=t===null,a=n&&!(i&&s)&&A5(n,r);return a&&(i||Ro(e,a.left,a.right))&&(s||Ro(t,a.top,a.bottom))}function Vfe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Ufe(n,e){n.rect(e.x,e.y,e.w,e.h)}function eO(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var ZI=class extends Es{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Ffe(this),a=Vfe(o.radius)?df:Ufe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,eO(o,t,s)),e.clip(),a(e,eO(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,eO(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return Zk(this,e,t,r)}inXRange(e,t){return Zk(this,e,null,t)}inYRange(e,t){return Zk(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};function jfe(n,e,t){let r=n.segments,i=n.points,s=e.points,o=[];for(let a of r){let{start:c,end:l}=a;l=iT(c,l,i);let u=pO(t,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}let f=Hk(e,u);for(let p of f){let m=pO(t,s[p.start],s[p.end],p.loop),I=$k(a,i,m);for(let D of I)o.push({source:D,target:p,start:{[t]:j3(u,m,"start",Math.max)},end:{[t]:j3(u,m,"end",Math.min)}})}}return o}function pO(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=dr(i),s=dr(s)),{property:n,start:i,end:s}}function Bfe(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=iT(o,a,i);let c=i[o],l=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function iT(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function j3(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function C5(n,e){let t=[],r=!1;return vt(n)?(r=!0,t=n):t=Bfe(n,e),t.length?new ry({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function B3(n){return n&&n.fill!==!1}function zfe(n,e,t){let i=n[e].fill,s=[e],o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!xt(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function $fe(n,e,t){let r=Gfe(n);if(Be(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return xt(i)&&Math.floor(i)===i?Hfe(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Hfe(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function qfe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Be(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Wfe(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Be(n)?r=n.value:r=e.getBaseValue(),r}function Gfe(n){let e=n.options,t=e.fill,r=Ae(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Kfe(n){let{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=Qfe(e,t);a.push(C5({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)Yfe(i,o[u],a)}return new ry({points:i,options:{}})}function Qfe(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Yfe(n,e,t){let r=[];for(let i=0;i<t.length;i++){let s=t[i],{first:o,last:a,point:c}=Xfe(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function Xfe(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],f=o[u.start][t],p=o[u.end][t];if(Ro(i,f,p)){a=i===f,c=i===p;break}}return{first:a,last:c,point:r}}var eT=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:s,radius:o}=this;return t=t||{start:0,end:fr},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function Jfe(n){let{chart:e,fill:t,line:r}=n;if(xt(t))return Zfe(e,t);if(t==="stack")return Kfe(n);if(t==="shape")return!0;let i=epe(n);return i instanceof eT?i:C5(i,r)}function Zfe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function epe(n){return(n.scale||{}).getPointPositionForValue?npe(n):tpe(n)}function tpe(n){let{scale:e={},fill:t}=n,r=qfe(t,e);if(xt(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function npe(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Wfe(t,e,s),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,s);return new eT({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function tO(n,e,t){let r=Jfe(e),{chart:i,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,f=l.backgroundColor,{above:p=f,below:m=f}=u||{},I=i.getDatasetMeta(s),D=qk(i,I);r&&o.points.length&&(Hg(n,t),rpe(n,{line:o,target:r,above:p,below:m,area:t,scale:a,axis:c,clip:D}),qg(n))}function rpe(n,e){let{line:t,target:r,above:i,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==i&&(l==="x"?(z3(n,r,o.top),nO(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),z3(n,r,o.bottom)):l==="y"&&($3(n,r,o.left),nO(n,{line:t,target:r,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),$3(n,r,o.right),u=i)),nO(n,{line:t,target:r,color:u,scale:a,property:l,clip:c}),n.restore()}function z3(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],f=i[iT(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function $3(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],f=i[iT(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function nO(n,e){let{line:t,target:r,property:i,color:s,scale:o,clip:a}=e,c=jfe(t,r,i);for(let{source:l,target:u,start:f,end:p}of c){let{style:{backgroundColor:m=s}={}}=l,I=r!==!0;n.save(),n.fillStyle=m,ipe(n,o,a,I&&pO(i,f,p)),n.beginPath();let D=!!t.pathSegment(n,l),S;if(I){D?n.closePath():H3(n,r,p,i);let N=!!r.pathSegment(n,u,{move:D,reverse:!0});S=D&&N,S||H3(n,r,f,i)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function ipe(n,e,t,r){let i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let c,l,u,f;s==="x"?(c=o,l=i.top,u=a,f=i.bottom):(c=i.left,l=o,u=i.right,f=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),f=Math.min(f,t.bottom)),n.rect(c,l,u-c,f-l),n.clip()}}function H3(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var R5={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],s,o,a,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof ry&&(c={visible:n.isDatasetVisible(o),index:o,fill:$fe(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=zfe(i,o,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&tO(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;B3(s)&&tO(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!B3(r)||t.drawTime!=="beforeDatasetDraw"||tO(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},q3=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},spe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,tT=class extends Es{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=gt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=Zt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=q3(r,s),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((I,D)=>{let S=r+t/2+s.measureText(I.text).width;(D===0||l[l.length-1]+S+2*a>o)&&(f+=u,l[l.length-(D>0?0:1)]=0,m+=u,p++),c[D]={left:0,top:m,row:p,width:S,height:i},l[l.length-1]+=S+a}),f}_fitCols(e,t,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,f=a,p=0,m=0,I=0,D=0;return this.legendItems.forEach((S,N)=>{let{itemWidth:M,itemHeight:F}=ope(r,t,s,S,i);N>0&&m+F+2*a>u&&(f+=p+a,l.push({width:p,height:m}),I+=p+a,D++,p=m=0),c[N]={left:I,top:m,col:D,width:M,height:F},p=Math.max(p,M),m+=F+a}),f+=p,l.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=mu(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Dn(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Dn(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=Dn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Dn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Hg(e,this),this._draw(),qg(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=bt.color,c=mu(e.rtl,this.left,this.width),l=Zt(o.font),{padding:u}=o,f=l.size,p=f/2,m;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:I,boxHeight:D,itemHeight:S}=q3(o,f),N=function(B,T,_){if(isNaN(I)||I<=0||isNaN(D)||D<0)return;i.save();let b=Ae(_.lineWidth,1);if(i.fillStyle=Ae(_.fillStyle,a),i.lineCap=Ae(_.lineCap,"butt"),i.lineDashOffset=Ae(_.lineDashOffset,0),i.lineJoin=Ae(_.lineJoin,"miter"),i.lineWidth=b,i.strokeStyle=Ae(_.strokeStyle,a),i.setLineDash(Ae(_.lineDash,[])),o.usePointStyle){let C={radius:D*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:b},A=c.xPlus(B,I/2),R=T+p;Mk(i,C,A,R,o.pointStyleWidth&&I)}else{let C=T+Math.max((f-D)/2,0),A=c.leftForLtr(B,I),R=gc(_.borderRadius);i.beginPath(),Object.values(R).some(w=>w!==0)?df(i,{x:A,y:C,w:I,h:D,radius:R}):i.rect(A,C,I,D),i.fill(),b!==0&&i.stroke()}i.restore()},M=function(B,T,_){mc(i,_.text,B,T+S/2,l,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},F=this.isHorizontal(),j=this._computeTitleHeight();F?m={x:Dn(s,this.left+u,this.right-r[0]),y:this.top+u+j,line:0}:m={x:this.left+u,y:Dn(s,this.top+j+u,this.bottom-t[0].height),line:0},Bk(this.ctx,e.textDirection);let z=S+u;this.legendItems.forEach((B,T)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;let _=i.measureText(B.text).width,b=c.textAlign(B.textAlign||(B.textAlign=o.textAlign)),C=I+p+_,A=m.x,R=m.y;c.setWidth(this.width),F?T>0&&A+C+u>this.right&&(R=m.y+=z,m.line++,A=m.x=Dn(s,this.left+u,this.right-r[m.line])):T>0&&R+z>this.bottom&&(A=m.x=A+t[m.line].width+u,m.line++,R=m.y=Dn(s,this.top+j+u,this.bottom-t[m.line].height));let w=c.x(A);if(N(w,R,B),A=W6(b,A+I+p,F?A+C:this.right,e.rtl),M(c.x(A),R,B),F)m.x+=C+u;else if(typeof B.text!="string"){let Oe=l.lineHeight;m.y+=x5(B,Oe)+u}else m.y+=z}),zk(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=Zt(t.font),i=An(t.padding);if(!t.display)return;let s=mu(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+l,f=Dn(e.align,f,this.right-p);else{let I=this.columnSizes.reduce((D,S)=>Math.max(D,S.height),0);u=l+Dn(e.align,this.top,this.bottom-I-e.labels.padding-this._computeTitleHeight())}let m=Dn(a,f,f+p);o.textAlign=s.textAlign(OI(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,mc(o,t.text,m,u,r)}_computeTitleHeight(){let e=this.options.title,t=Zt(e.font),r=An(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Ro(e,this.left,this.right)&&Ro(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ro(e,i.left,i.left+i.width)&&Ro(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!lpe(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=spe(i,r);i&&!s&&gt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&gt(t.onHover,[e,r,this],this)}else r&&gt(t.onClick,[e,r,this],this)}};function ope(n,e,t,r,i){let s=ape(r,n,e,t),o=cpe(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function ape(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function cpe(n,e,t){let r=n;return typeof e.text!="string"&&(r=x5(e,t)),r}function x5(n,e){let t=n.text?n.text.length:0;return e*t}function lpe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var P5={id:"legend",_element:tT,start(n,e,t){let r=n.legend=new tT({ctx:n.ctx,options:t,chart:n});Zr.configure(n,r,t),Zr.addBox(n,r)},stop(n){Zr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;Zr.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=An(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},nT=class extends Es{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=vt(r.text)?r.text.length:1;this._padding=An(r.padding);let s=i*Zt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align,c=0,l,u,f;return this.isHorizontal()?(u=Dn(a,r,s),f=t+e,l=s-r):(o.position==="left"?(u=r+e,f=Dn(a,i,t),c=Bt*-.5):(u=s-e,f=Dn(a,t,i),c=Bt*.5),l=i-t),{titleX:u,titleY:f,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=Zt(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);mc(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:OI(t.align),textBaseline:"middle",translation:[o,a]})}};function upe(n,e){let t=new nT({ctx:n.ctx,options:e,chart:n});Zr.configure(n,t,e),Zr.addBox(n,t),n.titleBlock=t}var N5={id:"title",_element:nT,start(n,e,t){upe(n,t)},stop(n){let e=n.titleBlock;Zr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;Zr.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var Zg={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=xI(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function vs(n,e){return e&&(vt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function No(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function dpe(n,e){let{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function W3(n,e){let t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Zt(e.bodyFont),l=Zt(e.titleFont),u=Zt(e.footerFont),f=s.length,p=i.length,m=r.length,I=An(e.padding),D=I.height,S=0,N=r.reduce((j,z)=>j+z.before.length+z.lines.length+z.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,f&&(D+=f*l.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),N){let j=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;D+=m*j+(N-m)*c.lineHeight+(N-1)*e.bodySpacing}p&&(D+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let M=0,F=function(j){S=Math.max(S,t.measureText(j).width+M)};return t.save(),t.font=l.string,ut(n.title,F),t.font=c.string,ut(n.beforeBody.concat(n.afterBody),F),M=e.displayColors?o+2+e.boxPadding:0,ut(r,j=>{ut(j.before,F),ut(j.lines,F),ut(j.after,F)}),M=0,t.font=u.string,ut(n.footer,F),t.restore(),S+=I.width,{width:S,height:D}}function hpe(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function fpe(n,e,t,r){let{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function ppe(n,e,t,r){let{x:i,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),fpe(l,n,e,t)&&(l="center"),l}function G3(n,e,t){let r=t.yAlign||e.yAlign||hpe(n,t);return{xAlign:t.xAlign||e.xAlign||ppe(n,e,t,r),yAlign:r}}function mpe(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function gpe(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function K3(n,e,t,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=i+s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=gc(o),I=mpe(e,a),D=gpe(e,c,l);return c==="center"?a==="left"?I+=l:a==="right"&&(I-=l):a==="left"?I-=Math.max(u,p)+i:a==="right"&&(I+=Math.max(f,m)+i),{x:pr(I,0,r.width-e.width),y:pr(D,0,r.height-e.height)}}function WI(n,e,t){let r=An(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function Q3(n){return vs([],No(n))}function ype(n,e,t){return xo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Y3(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var M5={beforeTitle:_s,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:_s,beforeBody:_s,beforeLabel:_s,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Qe(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:_s,afterBody:_s,beforeFooter:_s,footer:_s,afterFooter:_s};function gr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?M5[e].call(t,r):i}var X3=(()=>{class n extends Es{static positioners=Zg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new YI(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=ype(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,s=gr(i,"beforeTitle",this,t),o=gr(i,"title",this,t),a=gr(i,"afterTitle",this,t),c=[];return c=vs(c,No(s)),c=vs(c,No(o)),c=vs(c,No(a)),c}getBeforeBody(t,r){return Q3(gr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,s=[];return ut(t,o=>{let a={before:[],lines:[],after:[]},c=Y3(i,o);vs(a.before,No(gr(c,"beforeLabel",this,o))),vs(a.lines,gr(c,"label",this,o)),vs(a.after,No(gr(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return Q3(gr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,s=gr(i,"beforeFooter",this,t),o=gr(i,"footer",this,t),a=gr(i,"afterFooter",this,t),c=[];return c=vs(c,No(s)),c=vs(c,No(o)),c=vs(c,No(a)),c}_createItems(t){let r=this._active,i=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(dpe(this.chart,r[l]));return t.filter&&(c=c.filter((f,p,m)=>t.filter(f,p,m,i))),t.itemSort&&(c=c.sort((f,p)=>t.itemSort(f,p,i))),ut(c,f=>{let p=Y3(t.callbacks,f);s.push(gr(p,"labelColor",this,f)),o.push(gr(p,"labelPointStyle",this,f)),a.push(gr(p,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Zg[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=W3(this,i),u=Object.assign({},c,l),f=G3(this.chart,i,u),p=K3(i,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){let o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:f,bottomRight:p}=gc(c),{x:m,y:I}=t,{width:D,height:S}=r,N,M,F,j,z,B;return o==="center"?(z=I+S/2,s==="left"?(N=m,M=N-a,j=z+a,B=z-a):(N=m+D,M=N+a,j=z-a,B=z+a),F=N):(s==="left"?M=m+Math.max(l,f)+a:s==="right"?M=m+D-Math.max(u,p)-a:M=this.caretX,o==="top"?(j=I,z=j-a,N=M-a,F=M+a):(j=I+S,z=j+a,N=M+a,F=M-a),B=j),{x1:N,x2:M,x3:F,y1:j,y2:z,y3:B}}drawTitle(t,r,i){let s=this.title,o=s.length,a,c,l;if(o){let u=mu(i.rtl,this.x,this.width);for(t.x=WI(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=Zt(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,s,o){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,f=Zt(o.bodyFont),p=WI(this,"left",o),m=s.x(p),I=l<f.lineHeight?(f.lineHeight-l)/2:0,D=r.y+I;if(o.usePointStyle){let S={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},N=s.leftForLtr(m,u)+u/2,M=D+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,VI(t,S,N,M),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,VI(t,S,N,M)}else{t.lineWidth=Be(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let S=s.leftForLtr(m,u),N=s.leftForLtr(s.xPlus(m,1),u-2),M=gc(a.borderRadius);Object.values(M).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,df(t,{x:S,y:D,w:u,h:l,radius:M}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),df(t,{x:N,y:D+1,w:u-2,h:l-2,radius:M}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(S,D,u,l),t.strokeRect(S,D,u,l),t.fillStyle=a.backgroundColor,t.fillRect(N,D+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:f}=i,p=Zt(i.bodyFont),m=p.lineHeight,I=0,D=mu(i.rtl,this.x,this.width),S=function(b){r.fillText(b,D.x(t.x+I),t.y+m/2),t.y+=m+o},N=D.textAlign(a),M,F,j,z,B,T,_;for(r.textAlign=a,r.textBaseline="middle",r.font=p.string,t.x=WI(this,N,i),r.fillStyle=i.bodyColor,ut(this.beforeBody,S),I=c&&N!=="right"?a==="center"?u/2+f:u+2+f:0,z=0,T=s.length;z<T;++z){for(M=s[z],F=this.labelTextColors[z],r.fillStyle=F,ut(M.before,S),j=M.lines,c&&j.length&&(this._drawColorBox(r,t,z,D,i),m=Math.max(p.lineHeight,l)),B=0,_=j.length;B<_;++B)S(j[B]),m=p.lineHeight;ut(M.after,S)}I=0,m=p.lineHeight,ut(this.afterBody,S),t.y-=o}drawFooter(t,r,i){let s=this.footer,o=s.length,a,c;if(o){let l=mu(i.rtl,this.x,this.width);for(t.x=WI(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=Zt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:f}=i,{topLeft:p,topRight:m,bottomLeft:I,bottomRight:D}=gc(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+p,l),a==="top"&&this.drawCaret(t,r,i,s),r.lineTo(c+u-m,l),r.quadraticCurveTo(c+u,l,c+u,l+m),a==="center"&&o==="right"&&this.drawCaret(t,r,i,s),r.lineTo(c+u,l+f-D),r.quadraticCurveTo(c+u,l+f,c+u-D,l+f),a==="bottom"&&this.drawCaret(t,r,i,s),r.lineTo(c+I,l+f),r.quadraticCurveTo(c,l+f,c,l+f-I),a==="center"&&o==="left"&&this.drawCaret(t,r,i,s),r.lineTo(c,l+p),r.quadraticCurveTo(c,l,c+p,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=Zg[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=W3(this,t),l=Object.assign({},a,this._size),u=G3(r,t,l),f=K3(t,l,u,r);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=An(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),Bk(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),zk(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!zg(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),c=this._positionChanged(a,t),l=r||!zg(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:s,options:o}=this,a=Zg[o.position].call(this,t,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),k5={id:"tooltip",_element:X3,positioners:Zg,afterInit(n,e,t){t&&(n.tooltip=new X3({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Fe($({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:M5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var _pe=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function vpe(n,e,t,r){let i=n.indexOf(e);if(i===-1)return _pe(n,e,t,r);let s=n.lastIndexOf(e);return i!==s?t:i}var bpe=(n,e)=>n===null?null:pr(Math.round(n),0,e);function J3(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var O5=(()=>{class n extends _u{static id="category";static defaults={ticks:{callback:J3}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Qe(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:vpe(i,t,Ae(r,t),this._addedLabels),bpe(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=t===0&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return J3.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Epe(n,e){let t=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:f,includeBounds:p}=n,m=s||1,I=u-1,{min:D,max:S}=e,N=!Qe(o),M=!Qe(a),F=!Qe(l),j=(S-D)/(f+1),z=wk((S-D)/I/m)*m,B,T,_,b;if(z<1e-14&&!N&&!M)return[{value:D},{value:S}];b=Math.ceil(S/z)-Math.floor(D/z),b>I&&(z=wk(b*z/I/m)*m),Qe(c)||(B=Math.pow(10,c),z=Math.ceil(z*B)/B),i==="ticks"?(T=Math.floor(D/z)*z,_=Math.ceil(S/z)*z):(T=D,_=S),N&&M&&s&&V6((a-o)/s,z/1e3)?(b=Math.round(Math.min((a-o)/z,u)),z=(a-o)/b,T=o,_=a):F?(T=N?o:T,_=M?a:_,b=l-1,z=(_-T)/b):(b=(_-T)/z,lf(b,Math.round(b),z/1e3)?b=Math.round(b):b=Math.ceil(b));let C=Math.max(Tk(z),Tk(T));B=Math.pow(10,Qe(c)?C:c),T=Math.round(T*B)/B,_=Math.round(_*B)/B;let A=0;for(N&&(p&&T!==o?(t.push({value:o}),T<o&&A++,lf(Math.round((T+A*z)*B)/B,o,Z3(o,j,n))&&A++):T<o&&A++);A<b;++A){let R=Math.round((T+A*z)*B)/B;if(M&&R>a)break;t.push({value:R})}return M&&p&&_!==a?t.length&&lf(t[t.length-1].value,a,Z3(a,j,n))?t[t.length-1].value=a:t.push({value:a}):(!M||_===a)&&t.push({value:_}),t}function Z3(n,e,{horizontal:t,minRotation:r}){let i=Co(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var ff=class extends _u{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Qe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=t?i:c,a=c=>s=r?s:c;if(e){let c=Mi(i),l=Mi(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Epe(i,s);return e.bounds==="ticks"&&Ik(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return LI(e,this.chart.options.locale,this.options.ticks.format)}},rT=class extends ff{static id="linear";static defaults={ticks:{callback:$g.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=xt(e)?e:0,this.max=xt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Co(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},ty=n=>Math.floor(Ao(n)),yu=(n,e)=>Math.pow(10,ty(n)+e);function e5(n){return n/Math.pow(10,ty(n))===1}function t5(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function wpe(n,e){let t=e-n,r=ty(t);for(;t5(n,e,r)>10;)r++;for(;t5(n,e,r)<10;)r--;return Math.min(r,ty(n))}function Ipe(n,{min:e,max:t}){e=mr(n.min,e);let r=[],i=ty(e),s=wpe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,f=Math.floor((l-u)/Math.pow(10,s)),p=mr(n.min,Math.round((c+u+f*Math.pow(10,s))*o)/o);for(;p<t;)r.push({value:p,major:e5(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),p=Math.round((c+u+f*Math.pow(10,s))*o)/o;let m=mr(n.max,p);return r.push({value:m,major:e5(m),significand:f}),r}var n5=class extends _u{static id="logarithmic";static defaults={ticks:{callback:$g.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=ff.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return xt(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=xt(e)?Math.max(0,e):null,this.max=xt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xt(this._userMin)&&(this.min=e===yu(this.min,0)?yu(this.min,-1):yu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(yu(r,-1)),o(yu(i,1)))),r<=0&&s(yu(i,-1)),i<=0&&o(yu(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=Ipe(t,this);return e.bounds==="ticks"&&Ik(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":LI(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ao(e),this._valueRange=Ao(this.max)-Ao(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ao(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function mO(n){let e=n.ticks;if(e.display&&n.display){let t=An(e.backdropPadding);return Ae(e.font&&e.font.size,bt.font.size)+t.height}return 0}function Tpe(n,e,t){return t=vt(t)?t:[t],{w:Y6(n,e.string,t),h:t.length*e.lineHeight}}function r5(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Spe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Bt/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),f=Zt(l.font),p=Tpe(n.ctx,f,n._pointLabels[c]);r[c]=p;let m=dr(n.getIndexAngle(c)+a),I=Math.round(MI(m)),D=r5(I,u.x,p.w,0,180),S=r5(I,u.y,p.h,90,270);Dpe(t,e,m,D,S)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Rpe(n,r,i)}function Dpe(n,e,t,r,i){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function Ape(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,r+i+o,s),l=Math.round(MI(dr(c.angle+hr))),u=Npe(c.y,a.h,l),f=xpe(l),p=Ppe(c.x,a.w,f);return{visible:!0,x:c.x,y:u,textAlign:f,left:p,top:u,right:p+a.w,bottom:u+a.h}}function Cpe(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:s}=n;return!(ys({x:t,y:r},e)||ys({x:t,y:s},e)||ys({x:i,y:r},e)||ys({x:i,y:s},e))}function Rpe(n,e,t){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:mO(s)/2,additionalAngle:o?Bt/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let f=Ape(n,u,c);r.push(f),a==="auto"&&(f.visible=Cpe(f,l),f.visible&&(l=f))}return r}function xpe(n){return n===0||n===180?"center":n<180?"left":"right"}function Ppe(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Npe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Mpe(n,e,t){let{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Qe(a)){let c=gc(e.borderRadius),l=An(e.backdropPadding);n.fillStyle=a;let u=r-l.left,f=i-l.top,p=s-r+l.width,m=o-i+l.height;Object.values(c).some(I=>I!==0)?(n.beginPath(),df(n,{x:u,y:f,w:p,h:m,radius:c}),n.fill()):n.fillRect(u,f,p,m)}}function kpe(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));Mpe(t,o,s);let a=Zt(o.font),{x:c,y:l,textAlign:u}=s;mc(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function L5(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,fr);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Ope(n,e,t,r,i){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),L5(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function Lpe(n,e,t){return xo(n,{label:t,index:e,type:"pointLabel"})}var i5=class extends ff{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$g.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=An(mO(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=xt(e)&&!isNaN(e)?e:0,this.max=xt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/mO(this.options))}generateTickLabels(e){ff.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=gt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?Spe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=fr/(this._pointLabels.length||1),r=this.options.startAngle||0;return dr(e*t+Co(r))}getDistanceFromCenterForValue(e){if(Qe(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Qe(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return Lpe(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-hr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),L5(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&kpe(this,o),i.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let p=this.getContext(f),m=i.setContext(p),I=s.setContext(p);Ope(this,m,c,o,I)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:p}=u;!p||!f||(e.lineWidth=p,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=Zt(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let f=An(l.backdropPadding);e.fillRect(-o/2-f.left,-s-u.size/2-f.top,o+f.width,u.size+f.height)}mc(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},sT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yr=Object.keys(sT);function s5(n,e){return n-e}function o5(n,e){if(Qe(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),xt(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(uf(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function a5(n,e,t,r){let i=yr.length;for(let s=yr.indexOf(n);s<i-1;++s){let o=sT[yr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return yr[s]}return yr[i-1]}function Fpe(n,e,t,r,i){for(let s=yr.length-1;s>=yr.indexOf(t);s--){let o=yr[s];if(sT[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return yr[t?yr.indexOf(t):0]}function Vpe(n){for(let e=yr.indexOf(n)+1,t=yr.length;e<t;++e)if(sT[yr[e]].common)return yr[e]}function c5(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=kI(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function Upe(n,e,t,r){let i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function l5(n,e,t){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:Upe(n,r,i,t)}var u5=(()=>{class n extends _u{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),s=this._adapter=new whe._date(t.adapters.date);s.init(r),af(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:o5(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=xt(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=xt(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=z6(s,o,a);return this._unit=r.unit||(i.autoSkip?a5(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):Fpe(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Vpe(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),l5(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?r=1-s:r=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=pr(r,0,a),i=pr(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||a5(o.minUnit,r,i,this._getLabelCapacity(r)),c=Ae(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=uf(l)||l===!0,f={},p=r,m,I;if(u&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let D=s.ticks.source==="data"&&this.getDataTimestamps();for(m=p,I=0;m<i;m=+t.add(m,c,a),I++)c5(f,m,D);return(m===i||s.bounds==="ticks"||I===1)&&c5(f,m,D),Object.keys(f).sort(s5).map(S=>+S)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return gt(a,[t,r,i],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,f=l&&c[l],p=u&&c[u],m=i[r],I=u&&p&&m&&m.major;return this._adapter.format(t,s||(I?p:f))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,s=Co(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,l5(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(o5(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ak(t.sort(s5))}}return n})();function GI(n,e,t){let r=0,i=n.length-1,s,o,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=dc(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=dc(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:c}=n[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var d5=class extends u5{static id="timeseries";static defaults=u5.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=GI(t,this.min),this._tableRange=GI(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(GI(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return GI(this._table,r*this._tableRange+this._minPos,!0)}};var jpe=typeof global=="object"&&global&&global.Object===Object&&global,oT=jpe;var Bpe=typeof self=="object"&&self&&self.Object===Object&&self,zpe=oT||Bpe||Function("return this")(),ei=zpe;var $pe=ei.Symbol,mf=$pe;var F5=Object.prototype,Hpe=F5.hasOwnProperty,qpe=F5.toString,iy=mf?mf.toStringTag:void 0;function Wpe(n){var e=Hpe.call(n,iy),t=n[iy];try{n[iy]=void 0;var r=!0}catch{}var i=qpe.call(n);return r&&(e?n[iy]=t:delete n[iy]),i}var V5=Wpe;var Gpe=Object.prototype,Kpe=Gpe.toString;function Qpe(n){return Kpe.call(n)}var U5=Qpe;var Ype="[object Null]",Xpe="[object Undefined]",j5=mf?mf.toStringTag:void 0;function Jpe(n){return n==null?n===void 0?Xpe:Ype:j5&&j5 in Object(n)?V5(n):U5(n)}var vc=Jpe;function Zpe(n){return n!=null&&typeof n=="object"}var ws=Zpe;var eme=Array.isArray,sy=eme;function tme(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var _r=tme;function nme(n){return n}var aT=nme;var rme="[object AsyncFunction]",ime="[object Function]",sme="[object GeneratorFunction]",ome="[object Proxy]";function ame(n){if(!_r(n))return!1;var e=vc(n);return e==ime||e==sme||e==rme||e==ome}var gf=ame;var cme=ei["__core-js_shared__"],cT=cme;var B5=(function(){var n=/[^.]+$/.exec(cT&&cT.keys&&cT.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function lme(n){return!!B5&&B5 in n}var z5=lme;var ume=Function.prototype,dme=ume.toString;function hme(n){if(n!=null){try{return dme.call(n)}catch{}try{return n+""}catch{}}return""}var $5=hme;var fme=/[\\^$.*+?()[\]{}|]/g,pme=/^\[object .+?Constructor\]$/,mme=Function.prototype,gme=Object.prototype,yme=mme.toString,_me=gme.hasOwnProperty,vme=RegExp("^"+yme.call(_me).replace(fme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bme(n){if(!_r(n)||z5(n))return!1;var e=gf(n)?vme:pme;return e.test($5(n))}var H5=bme;function Eme(n,e){return n?.[e]}var q5=Eme;function wme(n,e){var t=q5(n,e);return H5(t)?t:void 0}var yf=wme;var W5=Object.create,Ime=(function(){function n(){}return function(e){if(!_r(e))return{};if(W5)return W5(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})(),G5=Ime;function Tme(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var K5=Tme;function Sme(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Q5=Sme;var Dme=800,Ame=16,Cme=Date.now;function Rme(n){var e=0,t=0;return function(){var r=Cme(),i=Ame-(r-t);if(t=r,i>0){if(++e>=Dme)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var Y5=Rme;function xme(n){return function(){return n}}var X5=xme;var Pme=(function(){try{var n=yf(Object,"defineProperty");return n({},"",{}),n}catch{}})(),_f=Pme;var Nme=_f?function(n,e){return _f(n,"toString",{configurable:!0,enumerable:!1,value:X5(e),writable:!0})}:aT,J5=Nme;var Mme=Y5(J5),Z5=Mme;var kme=9007199254740991,Ome=/^(?:0|[1-9]\d*)$/;function Lme(n,e){var t=typeof n;return e=e??kme,!!e&&(t=="number"||t!="symbol"&&Ome.test(n))&&n>-1&&n%1==0&&n<e}var lT=Lme;function Fme(n,e,t){e=="__proto__"&&_f?_f(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var vf=Fme;function Vme(n,e){return n===e||n!==n&&e!==e}var bc=Vme;var Ume=Object.prototype,jme=Ume.hasOwnProperty;function Bme(n,e,t){var r=n[e];(!(jme.call(n,e)&&bc(r,t))||t===void 0&&!(e in n))&&vf(n,e,t)}var e9=Bme;function zme(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),i?vf(t,a,c):e9(t,a,c)}return t}var t9=zme;var n9=Math.max;function $me(n,e,t){return e=n9(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=n9(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),K5(n,this,a)}}var r9=$me;function Hme(n,e){return Z5(r9(n,e,aT),n+"")}var i9=Hme;var qme=9007199254740991;function Wme(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=qme}var uT=Wme;function Gme(n){return n!=null&&uT(n.length)&&!gf(n)}var bf=Gme;function Kme(n,e,t){if(!_r(t))return!1;var r=typeof e;return(r=="number"?bf(t)&&lT(e,t.length):r=="string"&&e in t)?bc(t[e],n):!1}var s9=Kme;function Qme(n){return i9(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&s9(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var o9=Qme;var Yme=Object.prototype;function Xme(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Yme;return n===t}var dT=Xme;function Jme(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var a9=Jme;var Zme="[object Arguments]";function ege(n){return ws(n)&&vc(n)==Zme}var yO=ege;var c9=Object.prototype,tge=c9.hasOwnProperty,nge=c9.propertyIsEnumerable,rge=yO((function(){return arguments})())?yO:function(n){return ws(n)&&tge.call(n,"callee")&&!nge.call(n,"callee")},oy=rge;function ige(){return!1}var l9=ige;var h9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,u9=h9&&typeof module=="object"&&module&&!module.nodeType&&module,sge=u9&&u9.exports===h9,d9=sge?ei.Buffer:void 0,oge=d9?d9.isBuffer:void 0,age=oge||l9,hT=age;var cge="[object Arguments]",lge="[object Array]",uge="[object Boolean]",dge="[object Date]",hge="[object Error]",fge="[object Function]",pge="[object Map]",mge="[object Number]",gge="[object Object]",yge="[object RegExp]",_ge="[object Set]",vge="[object String]",bge="[object WeakMap]",Ege="[object ArrayBuffer]",wge="[object DataView]",Ige="[object Float32Array]",Tge="[object Float64Array]",Sge="[object Int8Array]",Dge="[object Int16Array]",Age="[object Int32Array]",Cge="[object Uint8Array]",Rge="[object Uint8ClampedArray]",xge="[object Uint16Array]",Pge="[object Uint32Array]",Et={};Et[Ige]=Et[Tge]=Et[Sge]=Et[Dge]=Et[Age]=Et[Cge]=Et[Rge]=Et[xge]=Et[Pge]=!0;Et[cge]=Et[lge]=Et[Ege]=Et[uge]=Et[wge]=Et[dge]=Et[hge]=Et[fge]=Et[pge]=Et[mge]=Et[gge]=Et[yge]=Et[_ge]=Et[vge]=Et[bge]=!1;function Nge(n){return ws(n)&&uT(n.length)&&!!Et[vc(n)]}var f9=Nge;function Mge(n){return function(e){return n(e)}}var p9=Mge;var m9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ay=m9&&typeof module=="object"&&module&&!module.nodeType&&module,kge=ay&&ay.exports===m9,_O=kge&&oT.process,Oge=(function(){try{var n=ay&&ay.require&&ay.require("util").types;return n||_O&&_O.binding&&_O.binding("util")}catch{}})(),vO=Oge;var g9=vO&&vO.isTypedArray,Lge=g9?p9(g9):f9,fT=Lge;var Fge=Object.prototype,Vge=Fge.hasOwnProperty;function Uge(n,e){var t=sy(n),r=!t&&oy(n),i=!t&&!r&&hT(n),s=!t&&!r&&!i&&fT(n),o=t||r||i||s,a=o?a9(n.length,String):[],c=a.length;for(var l in n)(e||Vge.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||lT(l,c)))&&a.push(l);return a}var y9=Uge;function jge(n,e){return function(t){return n(e(t))}}var _9=jge;function Bge(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var v9=Bge;var zge=Object.prototype,$ge=zge.hasOwnProperty;function Hge(n){if(!_r(n))return v9(n);var e=dT(n),t=[];for(var r in n)r=="constructor"&&(e||!$ge.call(n,r))||t.push(r);return t}var b9=Hge;function qge(n){return bf(n)?y9(n,!0):b9(n)}var pT=qge;var Wge=yf(Object,"create"),Mo=Wge;function Gge(){this.__data__=Mo?Mo(null):{},this.size=0}var E9=Gge;function Kge(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var w9=Kge;var Qge="__lodash_hash_undefined__",Yge=Object.prototype,Xge=Yge.hasOwnProperty;function Jge(n){var e=this.__data__;if(Mo){var t=e[n];return t===Qge?void 0:t}return Xge.call(e,n)?e[n]:void 0}var I9=Jge;var Zge=Object.prototype,eye=Zge.hasOwnProperty;function tye(n){var e=this.__data__;return Mo?e[n]!==void 0:eye.call(e,n)}var T9=tye;var nye="__lodash_hash_undefined__";function rye(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Mo&&e===void 0?nye:e,this}var S9=rye;function Ef(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ef.prototype.clear=E9;Ef.prototype.delete=w9;Ef.prototype.get=I9;Ef.prototype.has=T9;Ef.prototype.set=S9;var bO=Ef;function iye(){this.__data__=[],this.size=0}var D9=iye;function sye(n,e){for(var t=n.length;t--;)if(bc(n[t][0],e))return t;return-1}var Ec=sye;var oye=Array.prototype,aye=oye.splice;function cye(n){var e=this.__data__,t=Ec(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():aye.call(e,t,1),--this.size,!0}var A9=cye;function lye(n){var e=this.__data__,t=Ec(e,n);return t<0?void 0:e[t][1]}var C9=lye;function uye(n){return Ec(this.__data__,n)>-1}var R9=uye;function dye(n,e){var t=this.__data__,r=Ec(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var x9=dye;function wf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}wf.prototype.clear=D9;wf.prototype.delete=A9;wf.prototype.get=C9;wf.prototype.has=R9;wf.prototype.set=x9;var wc=wf;var hye=yf(ei,"Map"),mT=hye;function fye(){this.size=0,this.__data__={hash:new bO,map:new(mT||wc),string:new bO}}var P9=fye;function pye(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var N9=pye;function mye(n,e){var t=n.__data__;return N9(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ic=mye;function gye(n){var e=Ic(this,n).delete(n);return this.size-=e?1:0,e}var M9=gye;function yye(n){return Ic(this,n).get(n)}var k9=yye;function _ye(n){return Ic(this,n).has(n)}var O9=_ye;function vye(n,e){var t=Ic(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var L9=vye;function If(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}If.prototype.clear=P9;If.prototype.delete=M9;If.prototype.get=k9;If.prototype.has=O9;If.prototype.set=L9;var F9=If;var bye=_9(Object.getPrototypeOf,Object),gT=bye;var Eye="[object Object]",wye=Function.prototype,Iye=Object.prototype,V9=wye.toString,Tye=Iye.hasOwnProperty,Sye=V9.call(Object);function Dye(n){if(!ws(n)||vc(n)!=Eye)return!1;var e=gT(n);if(e===null)return!0;var t=Tye.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&V9.call(t)==Sye}var U9=Dye;function Aye(){this.__data__=new wc,this.size=0}var j9=Aye;function Cye(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var B9=Cye;function Rye(n){return this.__data__.get(n)}var z9=Rye;function xye(n){return this.__data__.has(n)}var $9=xye;var Pye=200;function Nye(n,e){var t=this.__data__;if(t instanceof wc){var r=t.__data__;if(!mT||r.length<Pye-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new F9(r)}return t.set(n,e),this.size=t.size,this}var H9=Nye;function Tf(n){var e=this.__data__=new wc(n);this.size=e.size}Tf.prototype.clear=j9;Tf.prototype.delete=B9;Tf.prototype.get=z9;Tf.prototype.has=$9;Tf.prototype.set=H9;var q9=Tf;var Q9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,W9=Q9&&typeof module=="object"&&module&&!module.nodeType&&module,Mye=W9&&W9.exports===Q9,G9=Mye?ei.Buffer:void 0,K9=G9?G9.allocUnsafe:void 0;function kye(n,e){if(e)return n.slice();var t=n.length,r=K9?K9(t):new n.constructor(t);return n.copy(r),r}var Y9=kye;var Oye=ei.Uint8Array,EO=Oye;function Lye(n){var e=new n.constructor(n.byteLength);return new EO(e).set(new EO(n)),e}var X9=Lye;function Fye(n,e){var t=e?X9(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var J9=Fye;function Vye(n){return typeof n.constructor=="function"&&!dT(n)?G5(gT(n)):{}}var Z9=Vye;function Uye(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[n?a:++i];if(t(s[c],c,s)===!1)break}return e}}var eW=Uye;var jye=eW(),tW=jye;function Bye(n,e,t){(t!==void 0&&!bc(n[e],t)||t===void 0&&!(e in n))&&vf(n,e,t)}var cy=Bye;function zye(n){return ws(n)&&bf(n)}var nW=zye;function $ye(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var ly=$ye;function Hye(n){return t9(n,pT(n))}var rW=Hye;function qye(n,e,t,r,i,s,o){var a=ly(n,t),c=ly(e,t),l=o.get(c);if(l){cy(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,f=u===void 0;if(f){var p=sy(c),m=!p&&hT(c),I=!p&&!m&&fT(c);u=c,p||m||I?sy(a)?u=a:nW(a)?u=Q5(a):m?(f=!1,u=Y9(c,!0)):I?(f=!1,u=J9(c,!0)):u=[]:U9(c)||oy(c)?(u=a,oy(a)?u=rW(a):(!_r(a)||gf(a))&&(u=Z9(c))):f=!1}f&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),cy(n,t,u)}var iW=qye;function sW(n,e,t,r,i){n!==e&&tW(e,function(s,o){if(i||(i=new q9),_r(s))iW(n,e,o,t,sW,r,i);else{var a=r?r(ly(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),cy(n,o,a)}},pT)}var oW=sW;var Wye=o9(function(n,e,t){oW(n,e,t)}),wO=Wye;var Gye=new J("Configuration for ngCharts");var Kye=(()=>{class n{constructor(){this.colorschemesOptions=new Ot(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aW=(()=>{class n{constructor(t,r,i,s){this.zone=r,this.themeService=i,this.type="bar",this.plugins=[],this.chartClick=new an,this.chartHover=new an,this.subs=[],this.themeOverrides={},s?.registerables&&pf.register(...s.registerables),s?.defaults&&bt.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(ed()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let r=["type"],i=Object.getOwnPropertyNames(t);if(i.some(s=>r.includes(s))||i.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new pf(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,r){this.chart&&(this.chart.getDatasetMeta(t).hidden=r,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return wO({onHover:(t,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:r}))},onClick:(t,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(r){return new(r||n)(gn(qt),gn(Pe),gn(Kye),gn(Gye,8))}}static{this.\u0275dir=Vt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[ba]})}}return n})();var yT=class n{firestore=O(lu);constructor(){}getUserData(e){let t=ZM(this.firestore,`users/${e}`);return Uq(t)}async initUserData(e){let t=ZM(this.firestore,`users/${e}`);(await jq(t)).exists()||await zq(t,{laScore:0})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qye(n,e){if(n&1&&(oe(0,"div",1)(1,"div",2)(2,"h1"),le(3),ce(),oe(4,"p",3),le(5,"Here's your lifestyle overview for today."),ce()(),oe(6,"div",4)(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title"),le(10,"LA Score"),ce(),oe(11,"mat-icon",6),le(12,"speed"),ce()(),oe(13,"mat-card-content")(14,"div",7),le(15),ce(),oe(16,"div",8),Wn(17,"canvas",9),ce()()(),oe(18,"mat-card",10)(19,"mat-card-header")(20,"mat-card-title"),le(21,"Streak"),ce(),oe(22,"mat-icon",11),le(23,"local_fire_department"),ce()(),oe(24,"mat-card-content")(25,"div",12),le(26,"5 Days"),ce(),oe(27,"p",13),le(28,"Keep it up!"),ce()()(),oe(29,"mat-card",10)(30,"mat-card-header")(31,"mat-card-title"),le(32,"Habits"),ce(),oe(33,"mat-icon",14),le(34,"check_circle"),ce()(),oe(35,"mat-card-content")(36,"div",12),le(37,"8/10"),ce(),oe(38,"p",13),le(39,"Completed today"),ce()()()(),oe(40,"div",15)(41,"mat-card",16)(42,"mat-card-header")(43,"mat-card-title"),le(44,"Weekly Progress"),ce()(),oe(45,"mat-card-content")(46,"div",17),Wn(47,"canvas",9),ce()()()()()),n&2){let t,r=e.ngIf,i=xp();Cr(3),ml("Welcome back, ",(r.displayName==null||(t=r.displayName.split(" "))==null?null:t[0])||"User","!"),Cr(12),pl(i.laScore),Cr(2),Ki("data",i.barChartData)("options",i.barChartOptions)("type",i.barChartType),Cr(30),Ki("data",i.lineChartData)("options",i.lineChartOptions)("type",i.lineChartType)}}pf.register(p5,ZI,m5,ry,D5,R5,O5,rT,N5,k5,P5);var _T=class n{authService=O(ur);firestoreService=O(yT);laScore=0;user$=this.authService.user$;barChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#333"}}};barChartType="bar";barChartData={labels:["LA Score"],datasets:[{data:[0],label:"Score",backgroundColor:["#3f51b5"],borderRadius:5}]};lineChartOptions={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}},scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!0,position:"bottom"}}};lineChartType="line";lineChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{data:[65,59,80,81,56,55,40],label:"Weekly Progress",backgroundColor:"rgba(63, 81, 181, 0.2)",borderColor:"#3f51b5",pointBackgroundColor:"#fff",pointBorderColor:"#3f51b5",fill:"origin"}]};ngOnInit(){this.authService.user$.pipe(Ht(e=>e?(this.firestoreService.initUserData(e.uid),this.firestoreService.getUserData(e.uid)):de(null))).subscribe(e=>{e&&e.laScore!==void 0&&(this.laScore=e.laScore,this.updateChart(this.laScore))})}updateChart(e){this.barChartData={labels:["Current Score"],datasets:[{data:[e],label:"LA Score",backgroundColor:["#3f51b5"],borderRadius:5}]};let t=[e-10,e-5,e+2,e-2,e+5,e,e];this.lineChartData=Fe($({},this.lineChartData),{datasets:[Fe($({},this.lineChartData.datasets[0]),{data:t.map(r=>Math.max(0,Math.min(100,r)))})]})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[1,"welcome-section"],[1,"subtitle"],[1,"stats-grid"],[1,"stat-card","main-score-card"],["color","primary",1,"card-icon"],[1,"score-value"],[1,"chart-wrapper","small-chart"],["baseChart","",3,"data","options","type"],[1,"stat-card"],["color","accent",1,"card-icon"],[1,"stat-value"],[1,"stat-desc"],["color","warn",1,"card-icon"],[1,"charts-section"],[1,"chart-card"],[1,"chart-wrapper","main-chart"]],template:function(t,r){t&1&&(zs(0,Qye,48,8,"div",0),gl(1,"async")),t&2&&Ki("ngIf",yl(1,1,r.user$))},dependencies:[Sa,_l,aW,sc,tc,rc,ic,nc,ac,oc,vl],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:1.1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.card-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.score-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3f51b5;line-height:1;margin-bottom:16px}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;margin-bottom:4px}.stat-desc[_ngcontent-%COMP%]{color:#666;margin:0}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.small-chart[_ngcontent-%COMP%]{height:100px}.main-chart[_ngcontent-%COMP%]{height:300px}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px}@media(max-width:600px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.score-value[_ngcontent-%COMP%]{font-size:2.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}}"]})};function Yye(n,e){if(n&1&&(oe(0,"div",1)(1,"mat-card",2)(2,"mat-card-header"),Wn(3,"div",3),oe(4,"mat-card-title"),le(5),ce(),oe(6,"mat-card-subtitle"),le(7),ce()(),oe(8,"mat-card-content")(9,"p"),le(10),ce()()()()),n&2){let t=e.ngIf;Cr(3),Nv("background-image","url("+(t.photoURL||"")+")"),Cr(2),pl(t.displayName),Cr(2),pl(t.email),Cr(3),ml("User ID: ",t.uid)}}var vT=class n{authService=O(ur);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-card"],["mat-card-avatar","",1,"profile-header-image"]],template:function(t,r){t&1&&(zs(0,Yye,11,5,"div",0),gl(1,"async")),t&2&&Ki("ngIf",yl(1,1,r.user$))},dependencies:[Sa,_l,sc,tc,mI,rc,ic,pI,nc,vl],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.profile-card[_ngcontent-%COMP%]{width:400px}.profile-header-image[_ngcontent-%COMP%]{background-size:cover}"]})};var IO=pe(n=>!!n),Xye=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>IO);return AE(this.auth).pipe(sn(1),i(t,r),pe(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(ie(Ks),ie(oo))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),uy=n=>({canActivate:[Xye],data:{authGuardPipe:n}});var cW=n=>Hc(IO,pe(e=>e||n)),lW=n=>Hc(IO,pe(e=>e&&n||!0));var uW=()=>cW(["login"]),dW=()=>lW(["dashboard"]),hW=[$({path:"",component:vI},uy(dW)),$({path:"login",component:bI},uy(dW)),{path:"logout",component:EI},$({path:"dashboard",component:_T},uy(uW)),$({path:"profile",component:vT},uy(uW)),{path:"**",redirectTo:""}];var TO="Service workers are disabled or not supported by this browser",Sf=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new ue(r=>r.error(new H(5601,!1)));else{let r=null,i=new mt;this.worker=new ue(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let s=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(Ht(()=>e.getRegistration().then(l=>{if(!l)throw new H(5601,!1);return l})));let o=new mt;this.events=o.asObservable();let a=l=>{let{data:u}=l;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(qr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(sn(1)).subscribe(i=>{i.postMessage($({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(fn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(sn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(fn(i=>i.nonce===e),sn(1),pe(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},Jye=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new mt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=xs,this.notificationClicks=xs,this.notificationCloses=xs,this.pushSubscriptionChanges=xs,this.subscription=xs;return}this.messages=this.sw.eventsOfType("PUSH").pipe(pe(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(pe(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(pe(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(pe(i=>i.data)),this.pushManager=this.sw.registration.pipe(pe(i=>i.pushManager));let r=this.pushManager.pipe(Ht(i=>i.getSubscription()));this.subscription=new ue(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(TO));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(Ht(c=>c.subscribe(r)),sn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(TO));let t=r=>{if(r===null)throw new H(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new H(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(sn(1),Ht(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ie(Sf))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Zye=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=xs,this.unrecoverable=xs;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(TO));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new H(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ie(Sf))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),pW=new J("");function e_e(){let n=O(dy);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=O(pW),t=O(Pe),r=O(qr);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=fW(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),fW(+a[0])]);break;default:throw new H(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(zi(5604,!1)))})})}function fW(n){return new Promise(e=>setTimeout(e,n))}function t_e(){let n=O(dy),e=O(_t),t=!0;return new Sf(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var dy=class{enabled;updateViaCache;type;scope;registrationStrategy};function mW(n,e={}){return mn([Jye,Zye,{provide:pW,useValue:n},{provide:dy,useValue:e},{provide:Sf,useFactory:t_e},Sv(e_e)])}var gW={providers:[a0(),_A(hW),WU(),Tj(()=>Sj($q.firebase)),dz(()=>hz()),Vq(()=>Bq()),mW("ngsw-worker.js",{enabled:!Np(),registrationStrategy:"registerWhenStable:30000"})]};var n_e=["*",[["mat-toolbar-row"]]],r_e=["*","mat-toolbar-row"],i_e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Vt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),yW=(()=>{class n{_elementRef=O(qt);_platform=O(Ni);_document=O(Xe);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(r&1&&Rv(s,i_e,5),r&2){let o;xv(o=Pv())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){r&2&&(fl(i.color?"mat-"+i.color:""),Pr("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",i._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:r_e,decls:2,vars:0,template:function(r,i){r&1&&(Wr(n_e),Sn(0),Sn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return n})();var bT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Dt({imports:[gs]})}return n})();function o_e(n,e){if(n&1){let t=AD();Av(0),oe(1,"a",5),le(2,"Dashboard"),ce(),oe(3,"a",6),le(4,"Profile"),ce(),oe(5,"button",7),Qi("click",function(){L_(t);let i=xp();return F_(i.authService.logout())}),oe(6,"mat-icon"),le(7,"logout"),ce()(),Cv()}}function a_e(n,e){}var ET=class n{authService=O(ur);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-header"]],decls:8,vars:4,consts:[["loginTemplate",""],["color","primary",1,"app-header"],["routerLink","/",1,"logo"],[1,"spacer"],[4,"ngIf","ngIfElse"],["mat-button","","routerLink","/dashboard"],["mat-button","","routerLink","/profile"],["mat-icon-button","","title","Logout",3,"click"]],template:function(t,r){if(t&1&&(oe(0,"mat-toolbar",1)(1,"span",2),le(2,"Lifestyle Adapter"),ce(),Wn(3,"span",3),zs(4,o_e,8,0,"ng-container",4),gl(5,"async"),zs(6,a_e,0,0,"ng-template",null,0,RD),ce()),t&2){let i=CD(7);Cr(4),Ki("ngIf",yl(5,2,r.user$))("ngIfElse",i)}},dependencies:[bT,yW,tf,ef,dk,yb,Sa,_l,ac,oc,vl],styles:[".app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;font-size:1.2rem;letter-spacing:.5px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})};var wT=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["href","#"]],template:function(t,r){t&1&&(Rr(0,"footer",0)(1,"div",1)(2,"p"),le(3,"\xA9 2026 Lifestyle Adapter. All rights reserved."),xr(),Rr(4,"div",2)(5,"a",3),le(6,"Privacy Policy"),xr(),Rr(7,"a",3),le(8,"Terms of Service"),xr()()()())},dependencies:[bT],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:20px 0;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;margin-left:20px;font-size:.9rem;transition:color .3s}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px}}"]})};var IT=class n{title="lifestyle-adapter";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"content"]],template:function(t,r){t&1&&(Wn(0,"app-header"),oe(1,"main",0),Wn(2,"router-outlet"),ce(),Wn(3,"app-footer"))},dependencies:[nm,ET,wT],styles:[".content[_ngcontent-%COMP%]{min-height:calc(100vh - 128px);padding:20px}"]})};$D(IT,gW).catch(n=>console.error(n));
