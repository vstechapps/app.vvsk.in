var Zne=Object.defineProperty,eie=Object.defineProperties;var tie=Object.getOwnPropertyDescriptors;var Cx=Object.getOwnPropertySymbols;var K4=Object.prototype.hasOwnProperty,X4=Object.prototype.propertyIsEnumerable;var q4=(n,e,t)=>e in n?Zne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ie=(n,e)=>{for(var t in e||={})K4.call(e,t)&&q4(n,t,e[t]);if(Cx)for(var t of Cx(e))X4.call(e,t)&&q4(n,t,e[t]);return n},st=(n,e)=>eie(n,tie(e));var Ax=(n,e)=>{var t={};for(var i in n)K4.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Cx)for(var i of Cx(n))e.indexOf(i)<0&&X4.call(n,i)&&(t[i]=n[i]);return t};var qr=null,Mx=!1,JD=1,nie=null,as=Symbol("SIGNAL");function Gt(n){let e=qr;return qr=n,e}function Rx(){return qr}var ip={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function U_(n){if(Mx)throw new Error("");if(qr===null)return;qr.consumerOnSignalRead(n);let e=qr.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=qr.recomputing;if(i&&(t=e!==void 0?e.nextProducer:qr.producers,t!==void 0&&t.producer===n)){qr.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===qr&&(!i||rie(r,qr)))return;let s=sp(qr),o={producer:n,consumer:qr,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};qr.producersTail=o,e!==void 0?e.nextProducer=o:qr.producers=o,s&&Z4(n,o)}function Y4(){JD++}function ZD(n){if(!(sp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===JD)){if(!n.producerMustRecompute(n)&&!z_(n)){QD(n);return}n.producerRecomputeValue(n),QD(n)}}function eR(n){if(n.consumers===void 0)return;let e=Mx;Mx=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||iie(i)}}finally{Mx=e}}function tR(){return qr?.consumerAllowSignalWrites!==!1}function iie(n){n.dirty=!0,eR(n),n.consumerMarkedDirty?.(n)}function QD(n){n.dirty=!1,n.lastCleanEpoch=JD}function rp(n){return n&&Q4(n),Gt(n)}function Q4(n){n.producersTail=void 0,n.recomputing=!0}function B_(n,e){Gt(e),n&&J4(n)}function J4(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(sp(n))do t=nR(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function z_(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(ZD(t),i!==t.version))return!0}return!1}function Gd(n){if(sp(n)){let e=n.producers;for(;e!==void 0;)e=nR(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Z4(n,e){let t=n.consumersTail,i=sp(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)Z4(r.producer,r)}function nR(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!sp(e)){let s=e.producers;for(;s!==void 0;)s=nR(s)}return t}function sp(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function iR(n){nie?.(n)}function rie(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function rR(n,e){return Object.is(n,e)}function Px(n,e){let t=Object.create(sie);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(ZD(t),U_(t),t.value===Dx)throw t.error;return t.value};return i[as]=t,iR(t),i}var XD=Symbol("UNSET"),YD=Symbol("COMPUTING"),Dx=Symbol("ERRORED"),sie=st(ie({},ip),{value:XD,dirty:!0,error:null,equal:rR,kind:"computed",producerMustRecompute(n){return n.value===XD||n.value===YD},producerRecomputeValue(n){if(n.value===YD)throw new Error("");let e=n.value;n.value=YD;let t=rp(n),i,r=!1;try{i=n.computation(),Gt(null),r=e!==XD&&e!==Dx&&i!==Dx&&n.equal(e,i)}catch(s){i=Dx,n.error=s}finally{B_(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function oie(){throw new Error}var ez=oie;function tz(n){ez(n)}function sR(n){ez=n}var aie=null;function oR(n,e){let t=Object.create(kx);t.value=n,e!==void 0&&(t.equal=e);let i=()=>nz(t);return i[as]=t,iR(t),[i,o=>H_(t,o),o=>iz(t,o)]}function nz(n){return U_(n),n.value}function H_(n,e){tR()||tz(n),n.equal(n.value,e)||(n.value=e,cie(n))}function iz(n,e){tR()||tz(n),H_(n,e(n.value))}var kx=st(ie({},ip),{equal:rR,value:void 0,kind:"signal"});function cie(n){n.version++,Y4(),eR(n),aie?.(n)}function aR(n){let e=Gt(null);try{return n()}finally{Gt(e)}}var cR=st(ie({},ip),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function lR(n){if(n.dirty=!1,n.version>0&&!z_(n))return;n.version++;let e=rp(n);try{n.cleanup(),n.fn()}finally{B_(n,e)}}function Yt(n){return typeof n=="function"}function op(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Nx=op(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Yt(i))try{i()}catch(s){e=s instanceof Nx?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{rz(s)}catch(o){e=e??[],o instanceof Nx?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Nx(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rz(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wd(t,e)}remove(e){let{_finalizers:t}=this;t&&Wd(t,e),e instanceof n&&e._removeParent(this)}};Pn.EMPTY=(()=>{let n=new Pn;return n.closed=!0,n})();var uR=Pn.EMPTY;function Ox(n){return n instanceof Pn||n&&"closed"in n&&Yt(n.remove)&&Yt(n.add)&&Yt(n.unsubscribe)}function rz(n){Yt(n)?n():n.unsubscribe()}var Ko={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ap={setTimeout(n,e,...t){let{delegate:i}=ap;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ap;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Lx(n){ap.setTimeout(()=>{let{onUnhandledError:e}=Ko;if(e)e(n);else throw n})}function $d(){}var sz=dR("C",void 0,void 0);function oz(n){return dR("E",void 0,n)}function az(n){return dR("N",n,void 0)}function dR(n,e,t){return{kind:n,value:e,error:t}}var qd=null;function cp(n){if(Ko.useDeprecatedSynchronousErrorHandling){let e=!qd;if(e&&(qd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=qd;if(qd=null,t)throw i}}else n()}function cz(n){Ko.useDeprecatedSynchronousErrorHandling&&qd&&(qd.errorThrown=!0,qd.error=n)}var Kd=class extends Pn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ox(e)&&e.add(this)):this.destination=die}static create(e,t,i){return new Mc(e,t,i)}next(e){this.isStopped?fR(az(e),this):this._next(e)}error(e){this.isStopped?fR(oz(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fR(sz,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lie=Function.prototype.bind;function hR(n,e){return lie.call(n,e)}var pR=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Fx(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Fx(i)}else Fx(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fx(t)}}},Mc=class extends Kd{constructor(e,t,i){super();let r;if(Yt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ko.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&hR(e.next,s),error:e.error&&hR(e.error,s),complete:e.complete&&hR(e.complete,s)}):r=e}this.destination=new pR(r)}};function Fx(n){Ko.useDeprecatedSynchronousErrorHandling?cz(n):Lx(n)}function uie(n){throw n}function fR(n,e){let{onStoppedNotification:t}=Ko;t&&ap.setTimeout(()=>t(n,e))}var die={closed:!0,next:$d,error:uie,complete:$d};var lp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ys(n){return n}function Xd(...n){return mR(n)}function mR(n){return n.length===0?Ys:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var _t=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=fie(t)?t:new Mc(t,i,r);return cp(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=lz(i),new i((r,s)=>{let o=new Mc({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[lp](){return this}pipe(...t){return mR(t)(this)}toPromise(t){return t=lz(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function lz(n){var e;return(e=n??Ko.Promise)!==null&&e!==void 0?e:Promise}function hie(n){return n&&Yt(n.next)&&Yt(n.error)&&Yt(n.complete)}function fie(n){return n&&n instanceof Kd||hie(n)&&Ox(n)}function pie(n){return Yt(n?.lift)}function un(n){return e=>{if(pie(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function fn(n,e,t,i,r){return new gR(n,e,t,i,r)}var gR=class extends Kd{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var uz=op(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Dt=(()=>{class n extends _t{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Vx(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new uz}next(t){cp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){cp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){cp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?uR:(this.currentObservers=null,s.push(t),new Pn(()=>{this.currentObservers=null,Wd(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new _t;return t.source=this,t}}return n.create=(e,t)=>new Vx(e,t),n})(),Vx=class extends Dt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:uR}};var zi=class extends Dt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var _R={now(){return(_R.delegate||Date).now()},delegate:void 0};var Ux=class extends Pn{constructor(e,t){super()}schedule(e,t=0){return this}};var j_={setInterval(n,e,...t){let{delegate:i}=j_;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=j_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var up=class extends Ux{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return j_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&j_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wd(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var dp=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};dp.now=_R.now;var hp=class extends dp{constructor(e,t=dp.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var du=new hp(up),yR=du;var Bx=class extends up{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var zx=class extends hp{};var vR=new zx(Bx);var Kr=new _t(n=>n.complete());function Hx(n){return n&&Yt(n.schedule)}function bR(n){return n[n.length-1]}function jx(n){return Yt(bR(n))?n.pop():void 0}function ka(n){return Hx(bR(n))?n.pop():void 0}function dz(n,e){return typeof bR(n)=="number"?n.pop():e}function Gx(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function fz(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function hz(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yd(n){return this instanceof Yd?(this.v=n,this):new Yd(n)}function pz(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){i[p]&&(r[p]=function(b){return new Promise(function(g,v){s.push([p,b,g,v])>1||c(p,b)})},_&&(r[p]=_(r[p])))}function c(p,_){try{l(i[p](_))}catch(b){h(s[0][3],b)}}function l(p){p.value instanceof Yd?Promise.resolve(p.value.v).then(u,d):h(s[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,_){p(_),s.shift(),s.length&&c(s[0][0],s[0][1])}}function mz(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hz=="function"?hz(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Wx=n=>n&&typeof n.length=="number"&&typeof n!="function";function $x(n){return Yt(n?.then)}function qx(n){return Yt(n[lp])}function Kx(n){return Symbol.asyncIterator&&Yt(n?.[Symbol.asyncIterator])}function Xx(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mie(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yx=mie();function Qx(n){return Yt(n?.[Yx])}function Jx(n){return pz(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Yd(t.read());if(r)return yield Yd(void 0);yield yield Yd(i)}}finally{t.releaseLock()}})}function Zx(n){return Yt(n?.getReader)}function ci(n){if(n instanceof _t)return n;if(n!=null){if(qx(n))return gie(n);if(Wx(n))return _ie(n);if($x(n))return yie(n);if(Kx(n))return gz(n);if(Qx(n))return vie(n);if(Zx(n))return bie(n)}throw Xx(n)}function gie(n){return new _t(e=>{let t=n[lp]();if(Yt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _ie(n){return new _t(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yie(n){return new _t(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Lx)})}function vie(n){return new _t(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gz(n){return new _t(e=>{xie(n,e).catch(t=>e.error(t))})}function bie(n){return gz(Jx(n))}function xie(n,e){var t,i,r,s;return fz(this,void 0,void 0,function*(){try{for(t=mz(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function ws(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function hu(n,e=0){return un((t,i)=>{t.subscribe(fn(i,r=>ws(i,n,()=>i.next(r),e),()=>ws(i,n,()=>i.complete(),e),r=>ws(i,n,()=>i.error(r),e)))})}function fu(n,e=0){return un((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function _z(n,e){return ci(n).pipe(fu(e),hu(e))}function yz(n,e){return ci(n).pipe(fu(e),hu(e))}function vz(n,e){return new _t(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function bz(n,e){return new _t(t=>{let i;return ws(t,e,()=>{i=n[Yx](),ws(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>Yt(i?.return)&&i.return()})}function ew(n,e){if(!n)throw new Error("Iterable cannot be null");return new _t(t=>{ws(t,e,()=>{let i=n[Symbol.asyncIterator]();ws(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function xz(n,e){return ew(Jx(n),e)}function wz(n,e){if(n!=null){if(qx(n))return _z(n,e);if(Wx(n))return vz(n,e);if($x(n))return yz(n,e);if(Kx(n))return ew(n,e);if(Qx(n))return bz(n,e);if(Zx(n))return xz(n,e)}throw Xx(n)}function vi(n,e){return e?wz(n,e):ci(n)}function xt(...n){let e=ka(n);return vi(n,e)}function G_(n,e){let t=Yt(n)?n:()=>n,i=r=>r.error(t());return new _t(e?r=>e.schedule(i,0,r):i)}function W_(n){return!!n&&(n instanceof _t||Yt(n.lift)&&Yt(n.subscribe))}var Qd=op(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ez(n){return n instanceof Date&&!isNaN(n)}function pt(n,e){return un((t,i)=>{let r=0;t.subscribe(fn(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:wie}=Array;function Eie(n,e){return wie(e)?n(...e):n(e)}function tw(n){return pt(e=>Eie(n,e))}var{isArray:Iie}=Array,{getPrototypeOf:Tie,prototype:Sie,keys:Cie}=Object;function nw(n){if(n.length===1){let e=n[0];if(Iie(e))return{args:e,keys:null};if(Aie(e)){let t=Cie(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Aie(n){return n&&typeof n=="object"&&Tie(n)===Sie}function iw(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function xR(...n){let e=ka(n),t=jx(n),{args:i,keys:r}=nw(n);if(i.length===0)return vi([],e);let s=new _t(Mie(i,e,r?o=>iw(r,o):Ys));return t?s.pipe(tw(t)):s}function Mie(n,e,t=Ys){return i=>{Iz(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)Iz(e,()=>{let l=vi(n[c],e),u=!1;l.subscribe(fn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function Iz(n,e,t){n?ws(t,n,e):e()}function Tz(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},p=b=>l<i?_(b):c.push(b),_=b=>{s&&e.next(b),l++;let g=!1;ci(t(b,u++)).subscribe(fn(e,v=>{r?.(v),s?p(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let v=c.shift();o?ws(e,o,()=>_(v)):_(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(fn(e,p,()=>{d=!0,h()})),()=>{a?.()}}function cs(n,e,t=1/0){return Yt(e)?cs((i,r)=>pt((s,o)=>e(i,s,r,o))(ci(n(i,r))),t):(typeof e=="number"&&(t=e),un((i,r)=>Tz(i,r,n,t)))}function rw(n=1/0){return cs(Ys,n)}function Sz(){return rw(1)}function fp(...n){return Sz()(vi(n,ka(n)))}function $_(n){return new _t(e=>{ci(n()).subscribe(e)})}function q_(...n){let e=jx(n),{args:t,keys:i}=nw(n),r=new _t(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;ci(t[u]).subscribe(fn(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?iw(i,a):a),s.complete())}))}});return e?r.pipe(tw(e)):r}function Cz(n=0,e,t=yR){let i=-1;return e!=null&&(Hx(e)?t=e:i=e),new _t(r=>{let s=Ez(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Jd(...n){let e=ka(n),t=dz(n,1/0),i=n;return i.length?i.length===1?ci(i[0]):rw(t)(vi(i,e)):Kr}var Dc=new _t($d);function ni(n,e){return un((t,i)=>{let r=0;t.subscribe(fn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Az(n){return un((e,t)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(fn(t,l=>{i=!0,r=l,s||ci(n(l)).subscribe(s=fn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}function sw(n,e=du){return Az(()=>Cz(n,e))}function Zd(n){return un((e,t)=>{let i=null,r=!1,s;i=e.subscribe(fn(t,void 0,void 0,o=>{s=ci(n(o,Zd(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function pp(n,e){return Yt(e)?cs(n,e,1):cs(n,1)}function K_(n,e=du){return un((t,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}t.subscribe(fn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function wR(n){return un((e,t)=>{let i=!1;e.subscribe(fn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Hi(n){return n<=0?()=>Kr:un((e,t)=>{let i=0;e.subscribe(fn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function eh(n,e=Ys){return n=n??Die,un((t,i)=>{let r,s=!0;t.subscribe(fn(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Die(n,e){return n===e}function Mz(n=Rie){return un((e,t)=>{let i=!1;e.subscribe(fn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Rie(){return new Qd}function th(n){return un((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Rc(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ni((r,s)=>n(r,s,i)):Ys,Hi(1),t?wR(e):Mz(()=>new Qd))}function ow(n){return n<=0?()=>Kr:un((e,t)=>{let i=[];e.subscribe(fn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function IR(n={}){let{connector:e=()=>new Dt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),o=c=void 0,u=d=!1},_=()=>{let b=o;p(),b?.unsubscribe()};return un((b,g)=>{l++,!d&&!u&&h();let v=c=c??e();g.add(()=>{l--,l===0&&!d&&!u&&(a=ER(_,r))}),v.subscribe(g),!o&&l>0&&(o=new Mc({next:P=>v.next(P),error:P=>{d=!0,h(),a=ER(p,t,P),v.error(P)},complete:()=>{u=!0,h(),a=ER(p,i),v.complete()}}),ci(b).subscribe(o))})(s)}}function ER(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Mc({next:()=>{i.unsubscribe(),n()}});return ci(e(...t)).subscribe(i)}function TR(n){return ni((e,t)=>n<=t)}function Pc(...n){let e=ka(n);return un((t,i)=>{(e?fp(n,t,e):fp(n,t)).subscribe(i)})}function bi(n,e){return un((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(fn(i,c=>{r?.unsubscribe();let l=0,u=s++;ci(n(c,u)).subscribe(r=fn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Na(n){return un((e,t)=>{ci(n).subscribe(fn(t,()=>t.complete(),$d)),!t.closed&&e.subscribe(t)})}function ji(n,e,t){let i=Yt(n)||e||t?{next:n,error:e,complete:t}:n;return i?un((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(fn(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Ys}var SR;function aw(){return SR}function Oa(n){let e=SR;return SR=n,e}var Dz=Symbol("NotFound");function mp(n){return n===Dz||n?.name==="\u0275NotFound"}var pu=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},BR=new pu("21.0.1");var pw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Oe=class extends Error{code;constructor(e,t){super(La(e,t)),this.code=e}};function Pie(n){return`NG0${Math.abs(n)}`}function La(n,e){return`${Pie(n)}${e?": "+e:""}`}var bo=globalThis;function qn(n){for(let e in n)if(n[e]===qn)return e;throw Error("")}function Oz(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Nc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Nc).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function mw(n,e){return n?e?`${n} ${e}`:n:e||""}var kie=qn({__forward_ref__:qn});function Qs(n){return n.__forward_ref__=Qs,n.toString=function(){return Nc(this())},n}function kr(n){return zR(n)?n():n}function zR(n){return typeof n=="function"&&n.hasOwnProperty(kie)&&n.__forward_ref__===Qs}function ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ty(n){return Nie(n,gw)}function HR(n){return ty(n)!==null}function Nie(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Oie(n){let e=n?.[gw]??null;return e||null}function AR(n){return n&&n.hasOwnProperty(lw)?n[lw]:null}var gw=qn({\u0275prov:qn}),lw=qn({\u0275inj:qn}),Ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jR(n){return n&&!!n.\u0275providers}var GR=qn({\u0275cmp:qn}),WR=qn({\u0275dir:qn}),$R=qn({\u0275pipe:qn}),qR=qn({\u0275mod:qn}),Y_=qn({\u0275fac:qn}),oh=qn({__NG_ELEMENT_ID__:qn}),Rz=qn({__NG_ENV_ID__:qn});function ah(n){return typeof n=="string"?n:n==null?"":String(n)}function Lz(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ah(n)}var Fz=qn({ngErrorCode:qn}),Lie=qn({ngErrorMessage:qn}),Fie=qn({ngTokenPath:qn});function KR(n,e){return Vz("",-200,e)}function _w(n,e){throw new Oe(-201,!1)}function Vz(n,e,t){let i=new Oe(e,n);return i[Fz]=e,i[Lie]=n,t&&(i[Fie]=t),i}function Vie(n){return n[Fz]}var MR;function Uz(){return MR}function ls(n){let e=MR;return MR=n,e}function XR(n,e,t){let i=ty(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;_w(n,"Injector")}var Uie={},nh=Uie,DR="__NG_DI_FLAG__",RR=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=ih(t)||0;try{return this.injector.get(e,i&8?null:nh,i)}catch(r){if(mp(r))return r;throw r}}};function Bie(n,e=0){let t=aw();if(t===void 0)throw new Oe(-203,!1);if(t===null)return XR(n,void 0,e);{let i=zie(e),r=t.retrieve(n,i);if(mp(r)){if(i.optional)return null;throw r}return r}}function it(n,e=0){return(Uz()||Bie)(kr(n),e)}function H(n,e){return it(n,ih(e))}function ih(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zie(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function PR(n){let e=[];for(let t=0;t<n.length;t++){let i=kr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Oe(900,!1);let r,s=0;for(let o=0;o<i.length;o++){let a=i[o],c=Hie(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(it(r,s))}else e.push(it(i))}return e}function Bz(n,e){return n[DR]=e,n.prototype[DR]=e,n}function Hie(n){return n[DR]}function mu(n,e){let t=n.hasOwnProperty(Y_);return t?n[Y_]:null}function zz(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function Hz(n){return n.flat(Number.POSITIVE_INFINITY)}function yw(n,e){n.forEach(t=>Array.isArray(t)?yw(t,e):e(t))}function YR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ny(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jz(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function Gz(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function vw(n,e,t){let i=_p(n,e);return i>=0?n[i|1]=t:(i=~i,Gz(n,i,e,t)),i}function bw(n,e){let t=_p(n,e);if(t>=0)return n[t|1]}function _p(n,e){return jie(n,e,1)}function jie(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var yu={},us=[],vu=new Ee(""),QR=new Ee("",-1),JR=new Ee(""),Q_=class{get(e,t=nh){if(t===nh){let r=Vz("",-201);throw r.name="\u0275NotFound",r}return t}};function ZR(n){return n[qR]||null}function Lc(n){return n[GR]||null}function e1(n){return n[WR]||null}function Wz(n){return n[$R]||null}function vr(n){return{\u0275providers:n}}function $z(n){return vr([{provide:vu,multi:!0,useValue:n}])}function qz(...n){return{\u0275providers:t1(!0,n),\u0275fromNgModule:!0}}function t1(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return yw(e,o=>{let a=o;uw(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Kz(r,s),t}function Kz(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];n1(r,s=>{e(s,i)})}}function uw(n,e,t,i){if(n=kr(n),!n)return!1;let r=null,s=AR(n),o=!s&&Lc(n);if(!s&&!o){let c=n.ngModule;if(s=AR(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)uw(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{yw(s.imports,u=>{uw(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Kz(l,e)}if(!a){let l=mu(r)||(()=>new r);e({provide:r,useFactory:l,deps:us},r),e({provide:JR,useValue:r,multi:!0},r),e({provide:vu,useValue:()=>it(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;n1(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function n1(n,e){for(let t of n)jR(t)&&(t=t.\u0275providers),Array.isArray(t)?n1(t,e):e(t)}var Gie=qn({provide:String,useValue:qn});function Xz(n){return n!==null&&typeof n=="object"&&Gie in n}function Wie(n){return!!(n&&n.useExisting)}function $ie(n){return!!(n&&n.useFactory)}function rh(n){return typeof n=="function"}function Yz(n){return!!n.useClass}var iy=new Ee(""),cw={},Pz={},CR;function yp(){return CR===void 0&&(CR=new Q_),CR}var ii=class{},sh=class extends ii{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,NR(e,o=>this.processProvider(o)),this.records.set(QR,gp(void 0,this)),r.has("environment")&&this.records.set(ii,gp(void 0,this));let s=this.records.get(iy);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(JR,us,{self:!0}))}retrieve(e,t){let i=ih(t)||0;try{return this.get(e,nh,i)}catch(r){if(mp(r))return r;throw r}}destroy(){X_(this),this._destroyed=!0;let e=Gt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Gt(e)}}onDestroy(e){return X_(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){X_(this);let t=Oa(this),i=ls(void 0),r;try{return e()}finally{Oa(t),ls(i)}}get(e,t=nh,i){if(X_(this),e.hasOwnProperty(Rz))return e[Rz](this);let r=ih(i),s,o=Oa(this),a=ls(void 0);try{if(!(r&4)){let l=this.records.get(e);if(l===void 0){let u=Qie(e)&&ty(e);u&&this.injectableDefInScope(u)?l=gp(kR(e),cw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&2?yp():this.parent;return t=r&8&&t===nh?null:t,c.get(e,t)}catch(c){let l=Vie(c);throw l===-200||l===-201?new Oe(l,null):c}finally{ls(a),Oa(o)}}resolveInjectorInitializers(){let e=Gt(null),t=Oa(this),i=ls(void 0),r;try{let s=this.get(vu,us,{self:!0});for(let o of s)o()}finally{Oa(t),ls(i),Gt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Nc(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=kr(e);let t=rh(e)?e:kr(e&&e.provide),i=Kie(e);if(!rh(e)&&e.multi===!0){let r=this.records.get(t);r||(r=gp(void 0,cw,!0),r.factory=()=>PR(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=Gt(null);try{if(t.value===Pz)throw KR(Nc(e));return t.value===cw&&(t.value=Pz,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&Yie(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Gt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kR(n){let e=ty(n),t=e!==null?e.factory:mu(n);if(t!==null)return t;if(n instanceof Ee)throw new Oe(204,!1);if(n instanceof Function)return qie(n);throw new Oe(204,!1)}function qie(n){if(n.length>0)throw new Oe(204,!1);let t=Oie(n);return t!==null?()=>t.factory(n):()=>new n}function Kie(n){if(Xz(n))return gp(void 0,n.useValue);{let e=i1(n);return gp(e,cw)}}function i1(n,e,t){let i;if(rh(n)){let r=kr(n);return mu(r)||kR(r)}else if(Xz(n))i=()=>kr(n.useValue);else if($ie(n))i=()=>n.useFactory(...PR(n.deps||[]));else if(Wie(n))i=(r,s)=>it(kr(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=kr(n&&(n.useClass||n.provide));if(Xie(n))i=()=>new r(...PR(n.deps));else return mu(r)||kR(r)}return i}function X_(n){if(n.destroyed)throw new Oe(205,!1)}function gp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xie(n){return!!n.deps}function Yie(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Qie(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function NR(n,e){for(let t of n)Array.isArray(t)?NR(t,e):t&&jR(t)?NR(t.\u0275providers,e):e(t)}function Gi(n,e){let t;n instanceof sh?(X_(n),t=n):t=new RR(n);let i,r=Oa(t),s=ls(void 0);try{return e()}finally{Oa(r),ls(s)}}function Qz(){return Uz()!==void 0||aw()!=null}var Xo=0,Pt=1,Ut=2,yr=3,xo=4,ds=5,vp=6,bp=7,Nr=8,bu=9,Fa=10,li=11,xp=12,r1=13,ch=14,Is=15,xu=16,lh=17,Va=18,ry=19,s1=20,kc=21,xw=22,gu=23,Js=24,uh=25,sy=26,xi=27,Jz=1;var wu=7,oy=8,dh=9,Xr=10;function Ua(n){return Array.isArray(n)&&typeof n[Jz]=="object"}function Yo(n){return Array.isArray(n)&&n[Jz]===!0}function o1(n){return(n.flags&4)!==0}function Eu(n){return n.componentOffset>-1}function wp(n){return(n.flags&1)===1}function Ba(n){return!!n.template}function Ep(n){return(n[Ut]&512)!==0}function hh(n){return(n[Ut]&256)===256}var a1="svg",Zz="math";function wo(n){for(;Array.isArray(n);)n=n[Xo];return n}function c1(n,e){return wo(e[n])}function Qo(n,e){return wo(e[n.index])}function ay(n,e){return n.data[e]}function ww(n,e){return n[e]}function l1(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Eo(n,e){let t=e[n];return Ua(t)?t:t[Xo]}function e5(n){return(n[Ut]&4)===4}function Ew(n){return(n[Ut]&128)===128}function t5(n){return Yo(n[yr])}function Jo(n,e){return e==null?null:n[e]}function u1(n){n[lh]=0}function d1(n){n[Ut]&1024||(n[Ut]|=1024,Ew(n)&&fh(n))}function n5(n,e){for(;n>0;)e=e[ch],n--;return e}function cy(n){return!!(n[Ut]&9216||n[Js]?.dirty)}function Iw(n){n[Fa].changeDetectionScheduler?.notify(8),n[Ut]&64&&(n[Ut]|=1024),cy(n)&&fh(n)}function fh(n){n[Fa].changeDetectionScheduler?.notify(0);let e=_u(n);for(;e!==null&&!(e[Ut]&8192||(e[Ut]|=8192,!Ew(e)));)e=_u(e)}function h1(n,e){if(hh(n))throw new Oe(911,!1);n[kc]===null&&(n[kc]=[]),n[kc].push(e)}function i5(n,e){if(n[kc]===null)return;let t=n[kc].indexOf(e);t!==-1&&n[kc].splice(t,1)}function _u(n){let e=n[yr];return Yo(e)?e[yr]:e}function f1(n){return n[bp]??=[]}function p1(n){return n.cleanup??=[]}function r5(n,e,t,i){let r=f1(e);r.push(t),n.firstCreatePass&&p1(n).push(i,r.length-1)}var tn={lFrame:g5(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var OR=!1;function s5(){return tn.lFrame.elementDepthCount}function o5(){tn.lFrame.elementDepthCount++}function m1(){tn.lFrame.elementDepthCount--}function Tw(){return tn.bindingsEnabled}function g1(){return tn.skipHydrationRootTNode!==null}function _1(n){return tn.skipHydrationRootTNode===n}function y1(){tn.skipHydrationRootTNode=null}function Bt(){return tn.lFrame.lView}function mi(){return tn.lFrame.tView}function ri(n){return tn.lFrame.contextLView=n,n[Nr]}function si(n){return tn.lFrame.contextLView=null,n}function hr(){let n=v1();for(;n!==null&&n.type===64;)n=n.parent;return n}function v1(){return tn.lFrame.currentTNode}function a5(){let n=tn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ip(n,e){let t=tn.lFrame;t.currentTNode=n,t.isParent=e}function b1(){return tn.lFrame.isParent}function x1(){tn.lFrame.isParent=!1}function c5(){return tn.lFrame.contextLView}function w1(){return OR}function J_(n){let e=OR;return OR=n,e}function E1(){let n=tn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function l5(){return tn.lFrame.bindingIndex}function u5(n){return tn.lFrame.bindingIndex=n}function ph(){return tn.lFrame.bindingIndex++}function Sw(n){let e=tn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function d5(){return tn.lFrame.inI18n}function h5(n,e){let t=tn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cw(e)}function f5(){return tn.lFrame.currentDirectiveIndex}function Cw(n){tn.lFrame.currentDirectiveIndex=n}function p5(n){let e=tn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function I1(){return tn.lFrame.currentQueryIndex}function Aw(n){tn.lFrame.currentQueryIndex=n}function Jie(n){let e=n[Pt];return e.type===2?e.declTNode:e.type===1?n[ds]:null}function T1(n,e,t){if(t&4){let r=e,s=n;for(;r=r.parent,r===null&&!(t&1);)if(r=Jie(s),r===null||(s=s[ch],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=tn.lFrame=m5();return i.currentTNode=e,i.lView=n,!0}function Mw(n){let e=m5(),t=n[Pt];tn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function m5(){let n=tn.lFrame,e=n===null?null:n.child;return e===null?g5(n):e}function g5(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _5(){let n=tn.lFrame;return tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var S1=_5;function Dw(){let n=_5();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function y5(n){return(tn.lFrame.contextLView=n5(n,tn.lFrame.contextLView))[Nr]}function Fc(){return tn.lFrame.selectedIndex}function Iu(n){tn.lFrame.selectedIndex=n}function ly(){let n=tn.lFrame;return ay(n.tView,n.selectedIndex)}function Io(){tn.lFrame.currentNamespace=a1}function Vc(){Zie()}function Zie(){tn.lFrame.currentNamespace=null}function v5(){return tn.lFrame.currentNamespace}var b5=!0;function Rw(){return b5}function uy(n){b5=n}function LR(n,e=null,t=null,i){let r=C1(n,e,t,i);return r.resolveInjectorInitializers(),r}function C1(n,e=null,t=null,i,r=new Set){let s=[t||us,qz(n)];return i=i||(typeof n=="object"?void 0:Nc(n)),new sh(s,e||yp(),i||null,r)}var Qt=class n{static THROW_IF_NOT_FOUND=nh;static NULL=new Q_;static create(e,t){if(Array.isArray(e))return LR({name:""},t,e,"");{let i=e.name??"";return LR({name:i},e.parent,e.providers,i)}}static \u0275prov=ve({token:n,providedIn:"any",factory:()=>it(QR)});static __NG_ELEMENT_ID__=-1},Wt=new Ee(""),Ts=(()=>{class n{static __NG_ELEMENT_ID__=ere;static __NG_ENV_ID__=t=>t}return n})(),dw=class extends Ts{_lView;constructor(e){super(),this._lView=e}get destroyed(){return hh(this._lView)}onDestroy(e){let t=this._lView;return h1(t,e),()=>i5(t,e)}};function ere(){return new dw(Bt())}var x5=!1,Uc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new zi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _t(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),FR=class extends Dt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Qz()&&(this.destroyRef=H(Ts,{optional:!0})??void 0,this.pendingTasks=H(Uc,{optional:!0})??void 0)}emit(e){let t=Gt(null);try{super.next(e)}finally{Gt(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Pn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},vn=FR;function hw(...n){}function A1(n){let e,t;function i(){n=hw;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function M1(n){return queueMicrotask(()=>n()),()=>{n=hw}}var D1="isAngularZone",Z_=D1+"_ID",tre=0,St=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vn(!1);onMicrotaskEmpty=new vn(!1);onStable=new vn(!1);onError=new vn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=x5}=e;if(typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,rre(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(D1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Oe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,nre,hw,hw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},nre={};function R1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ire(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){A1(()=>{n.callbackScheduled=!1,VR(n),n.isCheckStableRunning=!0,R1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),VR(n)}function rre(n){let e=()=>{ire(n)},t=tre++;n._inner=n._inner.fork({name:"angular",properties:{[D1]:!0,[Z_]:t,[Z_+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(sre(c))return i.invokeTask(s,o,a,c);try{return kz(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Nz(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return kz(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ore(c)&&e(),Nz(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,VR(n),R1(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function VR(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function kz(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Nz(n){n._nesting--,R1(n)}var ey=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vn;onMicrotaskEmpty=new vn;onStable=new vn;onError=new vn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function sre(n){return w5(n,"__ignore_ng_zone__")}function ore(n){return w5(n,"__scheduler_tick__")}function w5(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Es=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ss=new Ee("",{factory:()=>{let n=H(St),e=H(ii),t;return i=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw i}):(t??=e.get(Es),t.handleError(i))})}}}),E5={provide:vu,useValue:()=>{let n=H(Es,{optional:!0})},multi:!0},are=new Ee("",{factory:()=>{let n=H(Wt).defaultView;if(!n)return;let e=H(Ss),t=s=>{e(s.reason),s.preventDefault()},i=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),H(Ts).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function P1(){return vr([$z(()=>void H(are))])}function jn(n,e){let[t,i,r]=oR(n,e?.equal),s=t,o=s[as];return s.set=i,s.update=r,s.asReadonly=I5.bind(s),s}function I5(){let n=this[as];if(n.readonlyFn===void 0){let e=()=>this();e[as]=n,n.readonlyFn=e}return n.readonlyFn}var dy=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=cre}return n})();function cre(){return new dy(Bt(),hr())}var Oc=class{},hy=new Ee("",{factory:()=>!0});var k1=new Ee(""),Tu=(()=>{class n{internalPendingTasks=H(Uc);scheduler=H(Oc);errorHandler=H(Ss);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Pw=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new UR})}return n})(),UR=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}},fw=class{[as];constructor(e){this[as]=e}destroy(){this[as].destroy()}};function fy(n,e){let t=e?.injector??H(Qt),i=e?.manualCleanup!==!0?t.get(Ts):null,r,s=t.get(dy,null,{optional:!0}),o=t.get(Oc);return s!==null?(r=dre(s.view,o,n),i instanceof dw&&i._lView===s.view&&(i=null)):r=hre(n,t.get(Pw),o),r.injector=t,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new fw(r)}var T5=st(ie({},cR),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=J_(!1);try{lR(this)}finally{J_(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=Gt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Gt(n)}}}),lre=st(ie({},T5),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Gd(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),ure=st(ie({},T5),{consumerMarkedDirty(){this.view[Ut]|=8192,fh(this.view),this.notifier.notify(13)},destroy(){if(Gd(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[gu]?.delete(this)}});function dre(n,e,t){let i=Object.create(ure);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=S5(i,t),n[gu]??=new Set,n[gu].add(i),i.consumerMarkedDirty(i),i}function hre(n,e,t){let i=Object.create(lre);return i.fn=S5(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function S5(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ci(n){return aR(n)}function Rp(n){return{toString:n}.toString()}var kw="__parameters__";function yre(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function vre(n,e,t){return Rp(()=>{let i=yre(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(kw)?c[kw]:Object.defineProperty(c,kw,{value:[]})[kw];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Cs=Bz(vre("Optional"),8);function bre(n){return typeof n=="function"}function iH(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var jw=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}},hs=(()=>{let n=()=>rH;return n.ngInherit=!0,n})();function rH(n){return n.type.prototype.ngOnChanges&&(n.setInput=wre),xre}function xre(){let n=oH(this),e=n?.current;if(e){let t=n.previous;if(t===yu)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function wre(n,e,t,i,r){let s=this.declaredInputs[i],o=oH(n)||Ere(n,{previous:yu,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new jw(l&&l.currentValue,t,c===yu),iH(n,e,r,t)}var sH="__ngSimpleChanges__";function oH(n){return n[sH]||null}function Ere(n,e){return n[sH]=e}var C5=[];var Kn=function(n,e=null,t){for(let i=0;i<C5.length;i++){let r=C5[i];r(n,e,t)}},kn=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(kn||{});function Ire(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=rH(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function aH(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Vw(n,e,t){cH(n,e,3,t)}function Uw(n,e,t,i){(n[Ut]&3)===t&&cH(n,e,t,i)}function N1(n,e){let t=n[Ut];(t&3)===e&&(t&=16383,t+=1,n[Ut]=t)}function cH(n,e,t,i){let r=i!==void 0?n[lh]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[lh]+=65536),(a<s||s==-1)&&(Tre(n,t,e,c),n[lh]=(n[lh]&4294901760)+c+2),c++}function A5(n,e){Kn(kn.LifecycleHookStart,n,e);let t=Gt(null);try{e.call(n)}finally{Gt(t),Kn(kn.LifecycleHookEnd,n,e)}}function Tre(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Ut]>>14<n[lh]>>16&&(n[Ut]&3)===e&&(n[Ut]+=16384,A5(a,s)):A5(a,s)}var Sp=-1,gh=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function Sre(n){return(n.flags&8)!==0}function Cre(n){return(n.flags&16)!==0}function Are(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];Mre(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function lH(n){return n===3||n===4||n===6}function Mre(n){return n.charCodeAt(0)===64}function Cp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?M5(n,t,r,null,e[++i]):M5(n,t,r,null,null))}}return n}function M5(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}function uH(n){return n!==Sp}function Gw(n){return n&32767}function Dre(n){return n>>16}function Ww(n,e){let t=Dre(n),i=e;for(;t>0;)i=i[ch],t--;return i}var G1=!0;function $w(n){let e=G1;return G1=n,e}var Rre=256,dH=Rre-1,hH=5,Pre=0,za={};function kre(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(oh)&&(i=t[oh]),i==null&&(i=t[oh]=Pre++);let r=i&dH,s=1<<r;e.data[n+(r>>hH)]|=s}function qw(n,e){let t=fH(n,e);if(t!==-1)return t;let i=e[Pt];i.firstCreatePass&&(n.injectorIndex=e.length,O1(i.data,n),O1(e,null),O1(i.blueprint,null));let r=bP(n,e),s=n.injectorIndex;if(uH(r)){let o=Gw(r),a=Ww(r,e),c=a[Pt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function O1(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fH(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function bP(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=yH(r),i===null)return Sp;if(t++,r=r[ch],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Sp}function W1(n,e,t){kre(n,e,t)}function Nre(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(lH(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function pH(n,e,t){if(t&8||n!==void 0)return n;_w(e,"NodeInjector")}function mH(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[bu],s=ls(void 0);try{return r?r.get(e,i,t&8):XR(e,i,t&8)}finally{ls(s)}}return pH(i,e,t)}function gH(n,e,t,i=0,r){if(n!==null){if(e[Ut]&2048&&!(i&2)){let o=Vre(n,e,t,i,za);if(o!==za)return o}let s=_H(n,e,t,i,za);if(s!==za)return s}return mH(e,t,i,r)}function _H(n,e,t,i,r){let s=Lre(t);if(typeof s=="function"){if(!T1(e,n,i))return i&1?pH(r,t,i):mH(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&8))_w(t);else return o}finally{S1()}}else if(typeof s=="number"){let o=null,a=fH(n,e),c=Sp,l=i&1?e[Is][ds]:null;for((a===-1||i&4)&&(c=a===-1?bP(n,e):e[a+8],c===Sp||!R5(i,!1)?a=-1:(o=e[Pt],a=Gw(c),e=Ww(c,e)));a!==-1;){let u=e[Pt];if(D5(s,a,u.data)){let d=Ore(a,e,t,o,i,l);if(d!==za)return d}c=e[a+8],c!==Sp&&R5(i,e[Pt].data[a+8]===l)&&D5(s,a,e)?(o=u,a=Gw(c),e=Ww(c,e)):a=-1}}return r}function Ore(n,e,t,i,r,s){let o=e[Pt],a=o.data[n+8],c=i==null?Eu(a)&&G1:i!=o&&(a.type&3)!==0,l=r&1&&s===a,u=Bw(a,o,t,c,l);return u!==null?_y(e,o,u,a,r):za}function Bw(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let p=d;p<h;p++){let _=o[p];if(p<c&&t===_||p>=c&&_.type===t)return p}if(r){let p=o[c];if(p&&Ba(p)&&p.type===t)return c}return null}function _y(n,e,t,i,r){let s=n[t],o=e.data;if(s instanceof gh){let a=s;if(a.resolving){let p=Lz(o[t]);throw KR(p)}let c=$w(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],u,d=a.injectImpl?ls(a.injectImpl):null,h=T1(n,i,0);try{s=n[t]=a.factory(void 0,r,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Ire(t,o[t],e)}finally{d!==null&&ls(d),$w(c),a.resolving=!1,S1()}}return s}function Lre(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(oh)?n[oh]:void 0;return typeof e=="number"?e>=0?e&dH:Fre:e}function D5(n,e,t){let i=1<<n;return!!(t[e+(n>>hH)]&i)}function R5(n,e){return!(n&2)&&!(n&1&&e)}var mh=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return gH(this._tNode,this._lView,e,ih(i),t)}};function Fre(){return new mh(hr(),Bt())}function xr(n){return Rp(()=>{let e=n.prototype.constructor,t=e[Y_]||$1(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[Y_]||$1(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function $1(n){return zR(n)?()=>{let e=$1(kr(n));return e&&e()}:mu(n)}function Vre(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Ut]&2048&&!Ep(o);){let a=_H(s,o,t,i|2,za);if(a!==za)return a;let c=s.parent;if(!c){let l=o[s1];if(l){let u=l.get(t,za,i);if(u!==za)return u}c=yH(o),o=o[ch]}s=c}return r}function yH(n){let e=n[Pt],t=e.type;return t===2?e.declTNode:t===1?n[ds]:null}function xy(n){return Nre(hr(),n)}function Ure(){return Pp(hr(),Bt())}function Pp(n,e){return new nn(Qo(n,e))}var nn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Ure}return n})();function Bre(n){return n instanceof nn?n.nativeElement:n}function zre(){return this._results[Symbol.iterator]()}var Bc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Dt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Hz(e);(this._changesDetected=!zz(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zre};function vH(n){return(n.flags&128)===128}var xP=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(xP||{}),bH=new Map,Hre=0;function jre(){return Hre++}function Gre(n){bH.set(n[ry],n)}function q1(n){bH.delete(n[ry])}var P5="__ngContext__";function Ap(n,e){Ua(e)?(n[P5]=e[ry],Gre(e)):n[P5]=e}function xH(n){return EH(n[xp])}function wH(n){return EH(n[xo])}function EH(n){for(;n!==null&&!Yo(n);)n=n[xo];return n}var Wre;function wP(n){Wre=n}var kp=new Ee("",{factory:()=>$re}),$re="ng";var oE=new Ee(""),jc=new Ee("",{providedIn:"platform",factory:()=>"unknown"}),wy=new Ee(""),Np=new Ee("",{factory:()=>H(Wt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IH=!1,TH=new Ee("",{factory:()=>IH});var qre=(n,e,t,i)=>{};function Kre(n,e,t,i){qre(n,e,t,i)}function aE(n){return(n.flags&32)===32}var Xre=()=>null;function SH(n,e,t=!1){return Xre(n,e,t)}function CH(n,e){let t=n.contentQueries;if(t!==null){let i=Gt(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];Aw(s),a.contentQueries(2,e[o],o)}}}finally{Gt(i)}}}function K1(n,e,t){Aw(0);let i=Gt(null);try{e(n,t)}finally{Gt(i)}}function EP(n,e,t){if(o1(e)){let i=Gt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Gt(i)}}}var ta=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ta||{}),Nw;function Yre(){if(Nw===void 0&&(Nw=null,bo.trustedTypes))try{Nw=bo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nw}function cE(n){return Yre()?.createHTML(n)||n}var Ow;function Qre(){if(Ow===void 0&&(Ow=null,bo.trustedTypes))try{Ow=bo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ow}function k5(n){return Qre()?.createScriptURL(n)||n}var zc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pw})`}},X1=class extends zc{getTypeName(){return"HTML"}},Y1=class extends zc{getTypeName(){return"Style"}},Q1=class extends zc{getTypeName(){return"Script"}},J1=class extends zc{getTypeName(){return"URL"}},Z1=class extends zc{getTypeName(){return"ResourceURL"}};function ia(n){return n instanceof zc?n.changingThisBreaksApplicationSecurity:n}function Gc(n,e){let t=AH(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pw})`)}return t===e}function AH(n){return n instanceof zc&&n.getTypeName()||null}function IP(n){return new X1(n)}function TP(n){return new Y1(n)}function SP(n){return new Q1(n)}function CP(n){return new J1(n)}function AP(n){return new Z1(n)}function Jre(n){let e=new tP(n);return Zre()?new eP(e):e}var eP=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(cE(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},tP=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=cE(e),t}};function Zre(){try{return!!new window.DOMParser().parseFromString(cE(""),"text/html")}catch{return!1}}var ese=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ey(n){return n=String(n),n.match(ese)?n:"unsafe:"+n}function Wc(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Iy(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var MH=Wc("area,br,col,hr,img,wbr"),DH=Wc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),RH=Wc("rp,rt"),tse=Iy(RH,DH),nse=Iy(DH,Wc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ise=Iy(RH,Wc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),N5=Iy(MH,nse,ise,tse),PH=Wc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rse=Wc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sse=Wc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),ose=Iy(PH,rse,sse),ase=Wc("script,style,template"),nP=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=use(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=lse(t);if(s){t=s;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=O5(e).toLowerCase();if(!N5.hasOwnProperty(t))return this.sanitizedSomething=!0,!ase.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!ose.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;PH[a]&&(c=Ey(c)),this.buf.push(" ",o,'="',L5(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=O5(e).toLowerCase();N5.hasOwnProperty(t)&&!MH.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(L5(e))}};function cse(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function lse(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw kH(e);return e}function use(n){let e=n.firstChild;if(e&&cse(n,e))throw kH(e);return e}function O5(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function kH(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var dse=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hse=/([^\#-~ |!])/g;function L5(n){return n.replace(/&/g,"&amp;").replace(dse,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(hse,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Lw;function MP(n,e){let t=null;try{Lw=Lw||Jre(n);let i=e?String(e):"";t=Lw.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Lw.getInertBodyElement(i)}while(i!==s);let a=new nP().sanitizeChildren(F5(t)||t);return cE(a)}finally{if(t){let i=F5(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function F5(n){return"content"in n&&fse(n)?n.content:null}function fse(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Or=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Or||{});function NH(n){let e=LH();return e?e.sanitize(Or.URL,n)||"":Gc(n,"URL")?ia(n):Ey(ah(n))}function OH(n){let e=LH();if(e)return k5(e.sanitize(Or.RESOURCE_URL,n)||"");if(Gc(n,"ResourceURL"))return k5(ia(n));throw new Oe(904,!1)}function pse(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?OH:NH}function DP(n,e,t){return pse(e,t)(n)}function LH(){let n=Bt();return n&&n[Fa].sanitizer}var mse=/^>|^->|<!--|-->|--!>|<!-$/g,gse=/(<|>)/g,_se="\u200B$1\u200B";function yse(n){return n.replace(mse,e=>e.replace(gse,_se))}function FH(n){return n instanceof Function?n():n}function vse(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var VH="ng-template";function bse(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&vse(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(RP(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function RP(n){return n.type===4&&n.value!==VH}function xse(n,e,t){let i=n.type===4&&!t?VH:n.value;return e===i}function wse(n,e,t){let i=4,r=n.attrs,s=r!==null?Tse(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Zo(i)&&!Zo(c))return!1;if(o&&Zo(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!xse(n,c,t)||c===""&&e.length===1){if(Zo(i))return!1;o=!0}}else if(i&8){if(r===null||!bse(n,r,c,t)){if(Zo(i))return!1;o=!0}}else{let l=e[++a],u=Ese(c,r,RP(n),t);if(u===-1){if(Zo(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(Zo(i))return!1;o=!0}}}}return Zo(i)||o}function Zo(n){return(n&1)===0}function Ese(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return Sse(e,n)}function UH(n,e,t=!1){for(let i=0;i<e.length;i++)if(wse(n,e[i],t))return!0;return!1}function Ise(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function Tse(n){for(let e=0;e<n.length;e++){let t=n[e];if(lH(t))return e}return n.length}function Sse(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Cse(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function V5(n,e){return n?":not("+e.trim()+")":e}function Ase(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Zo(o)&&(e+=V5(s,r),r=""),i=o,s=s||!Zo(i);t++}return r!==""&&(e+=V5(s,r)),e}function Mse(n){return n.map(Ase).join(",")}function Dse(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Zo(r))break;r=s}i++}return t.length&&e.push(1,...t),e}var As={};function Rse(n,e){return n.createText(e)}function Pse(n,e,t){n.setValue(e,t)}function kse(n,e){return n.createComment(yse(e))}function BH(n,e,t){return n.createElement(e,t)}function Kw(n,e,t,i,r){n.insertBefore(e,t,i,r)}function zH(n,e,t){n.appendChild(e,t)}function U5(n,e,t,i,r){i!==null?Kw(n,e,t,i,r):zH(n,e,t)}function Nse(n,e,t,i){n.removeChild(null,e,t,i)}function Ose(n,e,t){n.setAttribute(e,"style",t)}function Lse(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function HH(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&Are(n,e,i),r!==null&&Lse(n,e,r),s!==null&&Ose(n,e,s)}function PP(n,e,t,i,r,s,o,a,c,l,u){let d=xi+i,h=d+r,p=Fse(d,h),_=typeof l=="function"?l():l;return p[Pt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:u}}function Fse(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:As);return t}function Vse(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=PP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function kP(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Xo]=r,d[Ut]=i|4|128|8|64|1024,(l!==null||n&&n[Ut]&2048)&&(d[Ut]|=2048),u1(d),d[yr]=d[ch]=n,d[Nr]=t,d[Fa]=o||n&&n[Fa],d[li]=a||n&&n[li],d[bu]=c||n&&n[bu]||null,d[ds]=s,d[ry]=jre(),d[vp]=u,d[s1]=l,d[Is]=e.type==2?n[Is]:d,d}function Use(n,e,t){let i=Qo(e,n),r=Vse(t),s=n[Fa].rendererFactory,o=NP(n,kP(n,r,null,jH(t),i,e,null,s.createRenderer(i,t),null,null,null));return n[e.index]=o}function jH(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function GH(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function NP(n,e){return n[xp]?n[r1][xo]=e:n[xp]=e,n[r1]=e,e}function Ot(n=1){WH(mi(),Bt(),Fc()+n,!1)}function WH(n,e,t,i){if(!i)if((e[Ut]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Vw(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Uw(e,s,0,t)}Iu(t)}var lE=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(lE||{});function iP(n,e,t,i){let r=Gt(null);try{let[s,o,a]=n.inputs[t],c=null;(o&lE.SignalBased)!==0&&(c=e[s][as]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,s):iH(e,c,s,i)}finally{Gt(r)}}var Ha=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ha||{}),Bse;function OP(n,e){return Bse(n,e)}var Mp=new Set,uE=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(uE||{}),$c=new Ee(""),B5=new Set;function vh(n){B5.has(n)||(B5.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var LP=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),$H=[0,1,2,3],qH=(()=>{class n{ngZone=H(St);scheduler=H(Oc);errorHandler=H(Es,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H($c,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Kn(kn.AfterRenderHooksStart),this.executing=!0;for(let i of $H)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Kn(kn.AfterRenderHooksEnd)}register(t){let{view:i}=t;i!==void 0?((i[uh]??=[]).push(t),fh(i),i[Ut]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(uE.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,s,o=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[uh];e&&(this.view[uh]=e.filter(t=>t!==this))}};function ja(n,e){let t=e?.injector??H(Qt);return vh("NgAfterNextRender"),Hse(n,t,e,!0)}function zse(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Hse(n,e,t,i){let r=e.get(LP);r.impl??=e.get(qH);let s=e.get($c,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Ts):null,a=e.get(dy,null,{optional:!0}),c=new Xw(r.impl,zse(n),a?.view,i,o,s?.snapshot(null));return r.impl.register(c),c}var jse=new Ee("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function KH(n,e,t){let i=n.get(jse);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function Gse(n,e){for(let[t,i]of e)KH(n,i.animateFns)}function z5(n,e,t,i){let r=n?.[sy]?.enter;e!==null&&r&&r.has(t.index)&&Gse(i,r)}function Tp(n,e,t,i,r,s,o,a){if(r!=null){let c,l=!1;Yo(r)?c=r:Ua(r)&&(l=!0,r=r[Xo]);let u=wo(r);n===0&&i!==null?(z5(a,i,s,t),o==null?zH(e,i,u):Kw(e,i,u,o||null,!0)):n===1&&i!==null?(z5(a,i,s,t),Kw(e,i,u,o||null,!0)):n===2?H5(a,s,t,d=>{Nse(e,u,l,d)}):n===3&&H5(a,s,t,()=>{e.destroyNode(u)}),c!=null&&toe(e,n,t,c,s,i,o)}}function Wse(n,e){XH(n,e),e[Xo]=null,e[ds]=null}function $se(n,e,t,i,r,s){i[Xo]=r,i[ds]=e,dE(n,i,t,1,r,s)}function XH(n,e){e[Fa].changeDetectionScheduler?.notify(9),dE(n,e,e[li],2,null,null)}function qse(n){let e=n[xp];if(!e)return L1(n[Pt],n);for(;e;){let t=null;if(Ua(e))t=e[xp];else{let i=e[Xr];i&&(t=i)}if(!t){for(;e&&!e[xo]&&e!==n;)Ua(e)&&L1(e[Pt],e),e=e[yr];e===null&&(e=n),Ua(e)&&L1(e[Pt],e),t=e&&e[xo]}e=t}}function FP(n,e){let t=n[dh],i=t.indexOf(e);t.splice(i,1)}function VP(n,e){if(hh(e))return;let t=e[li];t.destroyNode&&dE(n,e,t,3,null,null),qse(e)}function L1(n,e){if(hh(e))return;let t=Gt(null);try{e[Ut]&=-129,e[Ut]|=256,e[Js]&&Gd(e[Js]),Yse(n,e),Xse(n,e),e[Pt].type===1&&e[li].destroy();let i=e[xu];if(i!==null&&Yo(e[yr])){i!==e[yr]&&FP(i,e);let r=e[Va];r!==null&&r.detachView(n)}q1(e)}finally{Gt(t)}}function H5(n,e,t,i){let r=n?.[sy];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&Mp.add(n),KH(t,()=>{if(r.leave&&r.leave.has(e.index)){let o=r.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:u}=l();a.push(u)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),Kse(n,i)}else n&&Mp.delete(n),i(!1)},r)}function Kse(n,e){let t=n[sy]?.running;if(t){t.then(()=>{n[sy].running=void 0,Mp.delete(n),e(!0)});return}e(!1)}function Xse(n,e){let t=n.cleanup,i=e[bp];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[bp]=null);let r=e[kc];if(r!==null){e[kc]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[gu];if(s!==null){e[gu]=null;for(let o of s)o.destroy()}}function Yse(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof gh)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Kn(kn.LifecycleHookStart,a,c);try{c.call(a)}finally{Kn(kn.LifecycleHookEnd,a,c)}}else{Kn(kn.LifecycleHookStart,r,s);try{s.call(r)}finally{Kn(kn.LifecycleHookEnd,r,s)}}}}}function YH(n,e,t){return Qse(n,e.parent,t)}function Qse(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Xo];if(Eu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ta.None||r===ta.Emulated)return null}return Qo(i,t)}function QH(n,e,t){return Zse(n,e,t)}function Jse(n,e,t){return n.type&40?Qo(n,t):null}var Zse=Jse,j5;function UP(n,e,t,i){let r=YH(n,i,e),s=e[li],o=i.parent||e[ds],a=QH(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)U5(s,r,t[c],a,!1);else U5(s,r,t,a,!1);j5!==void 0&&j5(s,i,e,t,r)}function my(n,e){if(e!==null){let t=e.type;if(t&3)return Qo(e,n);if(t&4)return rP(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return my(n,i);{let r=n[e.index];return Yo(r)?rP(-1,r):wo(r)}}else{if(t&128)return my(n,e.next);if(t&32)return OP(e,n)()||wo(n[e.index]);{let i=JH(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=_u(n[Is]);return my(r,i)}else return my(n,e.next)}}}return null}function JH(n,e){if(e!==null){let i=n[Is][ds],r=e.projection;return i.projection[r]}return null}function rP(n,e){let t=Xr+n+1;if(t<e.length){let i=e[t],r=i[Pt].firstChild;if(r!==null)return my(i,r)}return e[wu]}function BP(n,e,t,i,r,s,o){for(;t!=null;){let a=i[bu];if(t.type===128){t=t.next;continue}let c=i[t.index],l=t.type;if(o&&e===0&&(c&&Ap(wo(c),i),t.flags|=2),!aE(t))if(l&8)BP(n,e,t.child,i,r,s,!1),Tp(e,n,a,r,c,t,s,i);else if(l&32){let u=OP(t,i),d;for(;d=u();)Tp(e,n,a,r,d,t,s,i);Tp(e,n,a,r,c,t,s,i)}else l&16?ZH(n,e,i,t,r,s):Tp(e,n,a,r,c,t,s,i);t=o?t.projectionNext:t.next}}function dE(n,e,t,i,r,s){BP(t,i,n.firstChild,e,r,s,!1)}function eoe(n,e,t){let i=e[li],r=YH(n,t,e),s=t.parent||e[ds],o=QH(s,t,e);ZH(i,0,e,t,r,o)}function ZH(n,e,t,i,r,s){let o=t[Is],c=o[ds].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Tp(e,n,t[bu],r,u,i,s,t)}else{let l=c,u=o[yr];vH(i)&&(l.flags|=128),BP(n,e,l,u,r,s,!0)}}function toe(n,e,t,i,r,s,o){let a=i[wu],c=wo(i);a!==c&&Tp(e,n,t,s,a,r,o);for(let l=Xr;l<i.length;l++){let u=i[l];dE(u[Pt],u,n,e,s,a)}}function noe(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Ha.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ha.Important),n.setStyle(t,i,r,s))}}function ej(n,e,t,i,r){let s=Fc(),o=i&2;try{Iu(-1),o&&e.length>xi&&WH(n,e,xi,!1);let a=o?kn.TemplateUpdateStart:kn.TemplateCreateStart;Kn(a,r,t),t(i,r)}finally{Iu(s);let a=o?kn.TemplateUpdateEnd:kn.TemplateCreateEnd;Kn(a,r,t)}}function hE(n,e,t){coe(n,e,t),(t.flags&64)===64&&loe(n,e,t)}function Ty(n,e,t=Qo){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function ioe(n,e,t,i){let s=i.get(TH,IH)||t===ta.ShadowDom||t===ta.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return roe(o),o}function roe(n){soe(n)}var soe=()=>null;function ooe(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function tj(n,e,t,i,r,s){let o=e[Pt];if(GP(n,o,e,t,i)){Eu(n)&&aoe(e,n.index);return}n.type&3&&(t=ooe(t)),nj(n,e,t,i,r,s)}function nj(n,e,t,i,r,s){if(n.type&3){let o=Qo(n,e);i=s!=null?s(i,n.value||"",t):i,r.setProperty(o,t,i)}else n.type&12}function aoe(n,e){let t=Eo(e,n);t[Ut]&16||(t[Ut]|=64)}function coe(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Eu(t)&&Use(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qw(t,e);let s=t.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],c=_y(e,n,o,t);if(Ap(c,e),s!==null&&foe(e,o-i,c,a,t,s),Ba(a)){let l=Eo(t.index,e);l[Nr]=_y(e,n,o,t)}}}function loe(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=f5();try{Iu(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];Cw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&uoe(c,l)}}finally{Iu(-1),Cw(o)}}function uoe(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zP(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];UH(e,s.selectors,!1)&&(i??=[],Ba(s)?i.unshift(s):i.push(s))}return i}function doe(n,e,t,i,r,s){let o=Qo(n,e);hoe(e[li],o,s,n.value,t,i,r)}function hoe(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?ah(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function foe(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];iP(i,t,c,l)}}function HP(n,e,t,i,r){let s=xi+t,o=e[Pt],a=r(o,e,n,i,t);e[s]=a,Ip(n,!0);let c=n.type===2;return c?(HH(e[li],a,n),(s5()===0||wp(n))&&Ap(a,e),o5()):Ap(a,e),Rw()&&(!c||!aE(n))&&UP(o,e,a,n),n}function jP(n){let e=n;return b1()?x1():(e=e.parent,Ip(e,!1)),e}function poe(n,e){let t=n[bu];if(!t)return;let i;try{i=t.get(Ss,null)}catch{i=null}i?.(e)}function GP(n,e,t,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],d=e.data[l];iP(d,t[l],u,r),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];iP(u,l,i,r),a=!0}return a}function moe(n,e){let t=Eo(e,n),i=t[Pt];goe(i,t);let r=t[Xo];r!==null&&t[vp]===null&&(t[vp]=SH(r,t[bu])),Kn(kn.ComponentStart);try{WP(i,t,t[Nr])}finally{Kn(kn.ComponentEnd,t[Nr])}}function goe(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function WP(n,e,t){Mw(e);try{let i=n.viewQuery;i!==null&&K1(1,i,t);let r=n.template;r!==null&&ej(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Va]?.finishViewCreation(n),n.staticContentQueries&&CH(n,e),n.staticViewQueries&&K1(2,n.viewQuery,t);let s=n.components;s!==null&&_oe(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ut]&=-5,Dw()}}function _oe(n,e){for(let t=0;t<e.length;t++)moe(n,e[t])}function $P(n,e,t,i){let r=Gt(null);try{let s=e.tView,a=n[Ut]&4096?4096:16,c=kP(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[xu]=l;let u=n[Va];return u!==null&&(c[Va]=u.createEmbeddedView(s)),WP(s,c,t),c}finally{Gt(r)}}function Yw(n,e){return!e||e.firstChild===null||vH(n)}function yy(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(wo(s)),Yo(s)&&ij(s,i);let o=t.type;if(o&8)yy(n,e,t.child,i);else if(o&32){let a=OP(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=JH(e,t);if(Array.isArray(a))i.push(...a);else{let c=_u(e[Is]);yy(c[Pt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function ij(n,e){for(let t=Xr;t<n.length;t++){let i=n[t],r=i[Pt].firstChild;r!==null&&yy(i[Pt],i,r,e)}n[wu]!==n[Xo]&&e.push(n[wu])}function rj(n){if(n[uh]!==null){for(let e of n[uh])e.impl.addSequence(e);n[uh].length=0}}var sj=[];function yoe(n){return n[Js]??voe(n)}function voe(n){let e=sj.pop()??Object.create(xoe);return e.lView=n,e}function boe(n){n.lView[Js]!==n&&(n.lView=null,sj.push(n))}var xoe=st(ie({},ip),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{fh(n.lView)},consumerOnSignalRead(){this.lView[Js]=this}});function woe(n){let e=n[Js]??Object.create(Eoe);return e.lView=n,e}var Eoe=st(ie({},ip),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=_u(n.lView);for(;e&&!oj(e[Pt]);)e=_u(e);e&&d1(e)},consumerOnSignalRead(){this.lView[Js]=this}});function oj(n){return n.type!==2}function aj(n){if(n[gu]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[gu])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Ut]&8192)}}var Ioe=100;function cj(n,e=0){let i=n[Fa].rendererFactory,r=!1;r||i.begin?.();try{Toe(n,e)}finally{r||i.end?.()}}function Toe(n,e){let t=w1();try{J_(!0),sP(n,e);let i=0;for(;cy(n);){if(i===Ioe)throw new Oe(103,!1);i++,sP(n,1)}}finally{J_(t)}}function Soe(n,e,t,i){if(hh(e))return;let r=e[Ut],s=!1,o=!1;Mw(e);let a=!0,c=null,l=null;s||(oj(n)?(l=yoe(e),c=rp(l)):Rx()===null?(a=!1,l=woe(e),c=rp(l)):e[Js]&&(Gd(e[Js]),e[Js]=null));try{u1(e),u5(n.bindingStartIndex),t!==null&&ej(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&Vw(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Uw(e,p,0,null),N1(e,0)}if(o||Coe(e),aj(e),lj(e,0),n.contentQueries!==null&&CH(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&Vw(e,p)}else{let p=n.contentHooks;p!==null&&Uw(e,p,1),N1(e,1)}Moe(n,e);let d=n.components;d!==null&&dj(e,d,0);let h=n.viewQuery;if(h!==null&&K1(2,h,i),!s)if(u){let p=n.viewCheckHooks;p!==null&&Vw(e,p)}else{let p=n.viewHooks;p!==null&&Uw(e,p,2),N1(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xw]){for(let p of e[xw])p();e[xw]=null}s||(rj(e),e[Ut]&=-73)}catch(u){throw s||fh(e),u}finally{l!==null&&(B_(l,c),a&&boe(l)),Dw()}}function lj(n,e){for(let t=xH(n);t!==null;t=wH(t))for(let i=Xr;i<t.length;i++){let r=t[i];uj(r,e)}}function Coe(n){for(let e=xH(n);e!==null;e=wH(e)){if(!(e[Ut]&2))continue;let t=e[dh];for(let i=0;i<t.length;i++){let r=t[i];d1(r)}}}function Aoe(n,e,t){Kn(kn.ComponentStart);let i=Eo(e,n);try{uj(i,t)}finally{Kn(kn.ComponentEnd,i[Nr])}}function uj(n,e){Ew(n)&&sP(n,e)}function sP(n,e){let i=n[Pt],r=n[Ut],s=n[Js],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&z_(s)),o||=!1,s&&(s.dirty=!1),n[Ut]&=-9217,o)Soe(i,n,i.template,n[Nr]);else if(r&8192){let a=Gt(null);try{aj(n),lj(n,1);let c=i.components;c!==null&&dj(n,c,1),rj(n)}finally{Gt(a)}}}function dj(n,e,t){for(let i=0;i<e.length;i++)Aoe(n,e[i],t)}function Moe(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Iu(~r);else{let s=r,o=t[++i],a=t[++i];h5(o,s);let c=e[s];Kn(kn.HostBindingsUpdateStart,c);try{a(2,c)}finally{Kn(kn.HostBindingsUpdateEnd,c)}}}}finally{Iu(-1)}}function qP(n,e){let t=w1()?64:1088;for(n[Fa].changeDetectionScheduler?.notify(e);n;){n[Ut]|=t;let i=_u(n);if(Ep(n)&&!i)return n;n=i}return null}function hj(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Doe(n,e){let t=Xr+e;if(t<n.length)return n[t]}function KP(n,e,t,i=!0){let r=e[Pt];if(Poe(r,e,n,t),i){let o=rP(t,n),a=e[li],c=a.parentNode(n[wu]);c!==null&&$se(r,n[ds],a,e,c,o)}let s=e[vp];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Roe(n,e){let t=Qw(n,e);return t!==void 0&&VP(t[Pt],t),t}function Qw(n,e){if(n.length<=Xr)return;let t=Xr+e,i=n[t];if(i){let r=i[xu];r!==null&&r!==n&&FP(r,i),e>0&&(n[t-1][xo]=i[xo]);let s=ny(n,Xr+e);Wse(i[Pt],i);let o=s[Va];o!==null&&o.detachView(s[Pt]),i[yr]=null,i[xo]=null,i[Ut]&=-129}return i}function Poe(n,e,t,i){let r=Xr+i,s=t.length;i>0&&(t[r-1][xo]=e),i<s-Xr?(e[xo]=t[r],YR(t,Xr+i,e)):(t.push(e),e[xo]=null),e[yr]=t;let o=e[xu];o!==null&&t!==o&&fj(o,e);let a=e[Va];a!==null&&a.insertView(n),Iw(e),e[Ut]|=128}function fj(n,e){let t=n[dh],i=e[yr];if(Ua(i))n[Ut]|=2;else{let r=i[yr][Is];e[Is]!==r&&(n[Ut]|=2)}t===null?n[dh]=[e]:t.push(e)}var Su=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Pt];return yy(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Nr]}set context(e){this._lView[Nr]=e}get destroyed(){return hh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yr];if(Yo(e)){let t=e[oy],i=t?t.indexOf(this):-1;i>-1&&(Qw(e,i),ny(t,i))}this._attachedToViewContainer=!1}VP(this._lView[Pt],this._lView)}onDestroy(e){h1(this._lView,e)}markForCheck(){qP(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ut]&=-129}reattach(){Iw(this._lView),this._lView[Ut]|=128}detectChanges(){this._lView[Ut]|=1024,cj(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ep(this._lView),t=this._lView[xu];t!==null&&!e&&FP(t,this._lView),XH(this._lView[Pt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=e;let t=Ep(this._lView),i=this._lView[xu];i!==null&&!t&&fj(i,this._lView),Iw(this._lView)}};var Zs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=koe;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let s=$P(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Su(s)}}return n})();function koe(){return XP(hr(),Bt())}function XP(n,e){return n.type&4?new Zs(e,n,Pp(n,e)):null}function Op(n,e,t,i,r){let s=n.data[e];if(s===null)s=Noe(n,e,t,i,r),d5()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=a5();s.injectorIndex=o===null?-1:o.injectorIndex}return Ip(s,!0),s}function Noe(n,e,t,i,r){let s=v1(),o=b1(),a=o?s:s&&s.parent,c=n.data[e]=Loe(n,a,t,e,i,r);return Ooe(n,c,s,o),c}function Ooe(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Loe(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return g1()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Foe=()=>null,Voe=()=>null;function oP(n,e){return Foe(n,e)}function Uoe(n,e,t){return Voe(n,e,t)}var pj=class{},fE=class{},aP=class{resolveComponentFactory(e){throw new Oe(917,!1)}},Sy=class{static NULL=new aP},br=class{},Lr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Boe()}return n})();function Boe(){let n=Bt(),e=hr(),t=Eo(e.index,n);return(Ua(t)?t:n)[li]}var mj=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>null})}return n})();var zw={},cP=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,zw,i);return r!==zw||t===zw?r:this.parentInjector.get(e,t,i)}};function Jw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=mw(r,a);else if(s==2){let c=a,l=e[++o];i=mw(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function mt(n,e=0){let t=Bt();if(t===null)return it(n,e);let i=hr();return gH(i,t,kr(n),e)}function pE(){let n="invalid";throw new Error(n)}function gj(n,e,t,i,r){let s=i===null?null:{"":-1},o=r(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}joe(n,e,t,a,s,c,l)}s!==null&&i!==null&&zoe(t,i,s)}function zoe(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new Oe(-301,!1);i.push(e[r],s)}}function Hoe(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function joe(n,e,t,i,r,s,o){let a=i.length,c=!1;for(let h=0;h<a;h++){let p=i[h];!c&&Ba(p)&&(c=!0,Hoe(n,t,h)),W1(qw(t,e),n,p.type)}Xoe(t,n.data.length,a);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,d=GH(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(t.mergedAttrs=Cp(t.mergedAttrs,p.hostAttrs),Woe(n,t,e,d,p),Koe(d,p,r),o!==null&&o.has(p)){let[b,g]=o.get(p);t.directiveToIndex.set(p.type,[d,b+t.directiveStart,g+t.directiveStart])}else(s===null||!s.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let _=p.type.prototype;!l&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}Goe(n,t,s)}function Goe(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))G5(0,e,r,i),G5(1,e,r,i),$5(e,i,!1);else{let s=t.get(r);W5(0,e,s,i),W5(1,e,s,i),$5(e,i,!0)}}}function G5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(i),_j(e,s)}}function W5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),_j(e,o)}}function _j(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function $5(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!t&&r===null||t&&s===null||RP(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===e){o??=[],o.push(c,i[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function Woe(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=mu(r.type,!0)),o=new gh(s,Ba(r),mt,null);n.blueprint[i]=o,t[i]=o,$oe(n,e,i,GH(n,t,r.hostVars,As),r)}function $oe(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;qoe(o)!=a&&o.push(a),o.push(t,i,s)}}function qoe(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Koe(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ba(e)&&(t[""]=n)}}function Xoe(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function YP(n,e,t,i,r,s,o,a){let c=e[Pt],l=c.consts,u=Jo(l,o),d=Op(c,n,t,i,u);return s&&gj(c,e,d,Jo(l,a),r),d.mergedAttrs=Cp(d.mergedAttrs,d.attrs),d.attrs!==null&&Jw(d,d.attrs,!1),d.mergedAttrs!==null&&Jw(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function QP(n,e){aH(n,e),o1(e)&&n.queries.elementEnd(e)}function Yoe(n,e,t,i,r,s){let o=e.consts,a=Jo(o,r),c=Op(e,n,t,i,a);if(c.mergedAttrs=Cp(c.mergedAttrs,c.attrs),s!=null){let l=Jo(o,s);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Jw(c,c.attrs,!1),c.mergedAttrs!==null&&Jw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function JP(n){return vj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function yj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function vj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bj(n,e,t){return n[e]=t}function na(n,e,t){if(t===As)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function xj(n,e,t,i){let r=na(n,e,t);return na(n,e+1,i)||r}function Hw(n,e,t){return function i(r){let s=Eu(n)?Eo(n.index,e):e;qP(s,5);let o=e[Nr],a=q5(e,o,t,r),c=i.__ngNextListenerFn__;for(;c;)a=q5(e,o,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function q5(n,e,t,i){let r=Gt(null);try{return Kn(kn.OutputStart,e,t),t(i)!==!1}catch(s){return poe(n,s),!1}finally{Kn(kn.OutputEnd,e,t),Gt(r)}}function wj(n,e,t,i,r,s,o,a){let c=wp(n),l=!1,u=null;if(!i&&c&&(u=Joe(e,t,s,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let d=Qo(n,t),h=i?i(d):d;Kre(t,h,s,a);let p=r.listen(h,s,a);if(!Qoe(s)){let _=i?b=>i(wo(b[n.index])):n.index;Ej(_,e,t,s,a,p,!1)}}return l}function Qoe(n){return n.startsWith("animation")||n.startsWith("transition")}function Joe(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[bp],c=r[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Ej(n,e,t,i,r,s,o){let a=e.firstCreatePass?p1(e):null,c=f1(t),l=c.length;c.push(r,s),a&&a.push(i,n,l,(l+1)*(o?-1:1))}function K5(n,e,t,i,r,s){let o=e[t],a=e[Pt],l=a.data[t].outputs[i],d=o[l].subscribe(s);Ej(n.index,a,e,r,s,d,!0)}var lP=Symbol("BINDING");var Zw=class extends Sy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lc(e);return new _h(t,this.ngModule)}};function Zoe(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:(i&lE.SignalBased)!==0};return r&&(s.transform=r),s})}function eae(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function tae(n,e,t){let i=e instanceof ii?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new cP(t,i):t}function nae(n){let e=n.get(br,null);if(e===null)throw new Oe(407,!1);let t=n.get(mj,null),i=n.get(Oc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function iae(n,e){let t=Ij(n);return BH(e,t,t==="svg"?a1:t==="math"?Zz:null)}function Ij(n){return(n.selectors[0][0]||"div").toLowerCase()}var _h=class extends fE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Zoe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=eae(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Mse(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,s,o){Kn(kn.DynamicComponentStart);let a=Gt(null);try{let c=this.componentDef,l=rae(i,c,o,s),u=tae(c,r||this.ngModule,e),d=nae(u),h=d.rendererFactory.createRenderer(null,c),p=i?ioe(h,i,c.encapsulation,u):iae(c,h),_=o?.some(X5)||s?.some(v=>typeof v!="function"&&v.bindings.some(X5)),b=kP(null,l,null,512|jH(c),null,null,d,h,u,null,SH(p,u,!0));b[xi]=p,Mw(b);let g=null;try{let v=YP(xi,b,2,"#host",()=>l.directiveRegistry,!0,0);HH(h,p,v),Ap(p,b),hE(l,b,v),EP(l,v,b),QP(l,v),t!==void 0&&oae(v,this.ngContentSelectors,t),g=Eo(v.index,b),b[Nr]=g[Nr],WP(l,b,null)}catch(v){throw g!==null&&q1(g),q1(b),v}finally{Kn(kn.DynamicComponentEnd),Dw()}return new eE(this.componentType,b,!!_)}finally{Gt(a)}}};function rae(n,e,t,i){let r=n?["ng-version","21.0.1"]:Dse(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[lP].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){a+=h[lP].requiredVars;let p=u+1;h.create&&(h.targetIdx=p,(s??=[]).push(h)),h.update&&(h.targetIdx=p,(o??=[]).push(h))}}let c=[e];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=e1(d);c.push(h)}return PP(0,null,sae(s,o),1,a,c,null,null,null,[r],null)}function sae(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function X5(n){let e=n[lP].kind;return e==="input"||e==="twoWay"}var eE=class extends pj{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=ay(t[Pt],xi),this.location=Pp(this._tNode,t),this.instance=Eo(this._tNode.index,t)[Nr],this.hostView=this.changeDetectorRef=new Su(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,s=GP(i,r[Pt],r,e,t);this.previousInputValues.set(e,t);let o=Eo(i.index,r);qP(o,1)}get injector(){return new mh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oae(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}var Ms=(()=>{class n{static __NG_ELEMENT_ID__=aae}return n})();function aae(){let n=hr();return Sj(n,Bt())}var cae=Ms,Tj=class extends cae{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Pp(this._hostTNode,this._hostLView)}get injector(){return new mh(this._hostTNode,this._hostLView)}get parentInjector(){let e=bP(this._hostTNode,this._hostLView);if(uH(e)){let t=Ww(e,this._hostLView),i=Gw(e),r=t[Pt].data[i+8];return new mh(r,t)}else return new mh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Y5(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Xr}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=oP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,Yw(this._hostTNode,o)),a}createComponent(e,t,i,r,s,o,a){let c=e&&!bre(e),l;if(c)l=t;else{let g=t||{};l=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef,o=g.directives,a=g.bindings}let u=c?e:new _h(Lc(e)),d=i||this.parentInjector;if(!s&&u.ngModule==null){let v=(c?d:this.parentInjector).get(ii,null);v&&(s=v)}let h=Lc(u.componentType??{}),p=oP(this._lContainer,h?.id??null),_=p?.firstChild??null,b=u.create(d,r,_,s,o,a);return this.insertImpl(b.hostView,l,Yw(this._hostTNode,p)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(t5(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[yr],l=new Tj(c,c[ds],c[yr]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return KP(o,r,s,i),e.attachToViewContainerRef(),YR(F1(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Y5(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Qw(this._lContainer,t);i&&(ny(F1(this._lContainer),t),VP(i[Pt],i))}detach(e){let t=this._adjustIndex(e,-1),i=Qw(this._lContainer,t);return i&&ny(F1(this._lContainer),t)!=null?new Su(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Y5(n){return n[oy]}function F1(n){return n[oy]||(n[oy]=[])}function Sj(n,e){let t,i=e[n.index];return Yo(i)?t=i:(t=hj(i,e,null,n),e[n.index]=t,NP(e,t)),uae(t,e,n,i),new Tj(t,n,e)}function lae(n,e){let t=n[li],i=t.createComment(""),r=Qo(e,n),s=t.parentNode(r);return Kw(t,s,i,t.nextSibling(r),!1),i}var uae=fae,dae=()=>!1;function hae(n,e,t){return dae(n,e,t)}function fae(n,e,t,i){if(n[wu])return;let r;t.type&8?r=wo(i):r=lae(e,t),n[wu]=r}var uP=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},dP=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ZP(e,t).matches!==null&&this.queries[t].setDirty()}},tE=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=xae(e):this.predicate=e}},hP=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fP=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,pae(t,s)),this.matchTNodeWithReadOption(e,t,Bw(t,e,s,!1,!1))}else i===Zs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Bw(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===nn||r===Ms||r===Zs&&t.type&4)this.addMatch(t.index,-2);else{let s=Bw(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function pae(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function mae(n,e){return n.type&11?Pp(n,e):n.type&4?XP(n,e):null}function gae(n,e,t,i){return t===-1?mae(e,n):t===-2?_ae(n,e,i):_y(n,n[Pt],t,e)}function _ae(n,e,t){if(t===nn)return Pp(e,n);if(t===Zs)return XP(e,n);if(t===Ms)return Sj(e,n)}function Cj(n,e,t,i){let r=e[Va].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(gae(e,u,o[c+1],t.metadata.read))}}r.matches=a}return r.matches}function pP(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=Cj(n,e,r,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Xr;d<u.length;d++){let h=u[d];h[xu]===h[yr]&&pP(h[Pt],h,l,i)}if(u[dh]!==null){let d=u[dh];for(let h=0;h<d.length;h++){let p=d[h];pP(p[Pt],p,l,i)}}}}}return i}function yae(n,e){return n[Va].queries[e].queryList}function Aj(n,e,t){let i=new Bc((t&4)===4);return r5(n,e,i,i.destroy),(e[Va]??=new dP).queries.push(new uP(i))-1}function vae(n,e,t){let i=mi();return i.firstCreatePass&&(Mj(i,new tE(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),Aj(i,Bt(),e)}function bae(n,e,t,i){let r=mi();if(r.firstCreatePass){let s=hr();Mj(r,new tE(e,t,i),s.index),wae(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return Aj(r,Bt(),t)}function xae(n){return n.split(",").map(e=>e.trim())}function Mj(n,e,t){n.queries===null&&(n.queries=new hP),n.queries.track(new fP(e,t))}function wae(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function ZP(n,e){return n.queries.getByIndex(e)}function Eae(n,e){let t=n[Pt],i=ZP(t,e);return i.crossesNgTemplate?pP(t,n,e,[]):Cj(t,n,i,e)}var Hc=class{},mE=class{};var nE=class extends Hc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zw(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let s=ZR(e);this._bootstrapComponents=FH(s.bootstrap),this._r3Injector=C1(e,t,[{provide:Hc,useValue:this},{provide:Sy,useValue:this.componentFactoryResolver},...i],Nc(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},iE=class extends mE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new nE(this.moduleType,e,[])}};var vy=class extends Hc{injector;componentFactoryResolver=new Zw(this);instance=null;constructor(e){super();let t=new sh([...e.providers,{provide:Hc,useValue:this},{provide:Sy,useValue:this.componentFactoryResolver}],e.parent||yp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cy(n,e,t=null){return new vy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Iae=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=t1(!1,t.type),r=i.length>0?Cy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(it(ii))})}return n})();function gt(n){return Rp(()=>{let e=Dj(n),t=st(ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Iae).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ta.Emulated,styles:n.styles||us,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&vh("NgStandalone"),Rj(t);let i=n.dependencies;return t.directiveDefs=Q5(i,Tae),t.pipeDefs=Q5(i,Wz),t.id=Aae(t),t})}function Tae(n){return Lc(n)||e1(n)}function rn(n){return Rp(()=>({type:n.type,bootstrap:n.bootstrap||us,declarations:n.declarations||us,imports:n.imports||us,exports:n.exports||us,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sae(n,e){if(n==null)return yu;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,c;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,c=r[3]||null):(s=r,o=r,a=lE.None,c=null),t[s]=[i,a,c],e[s]=o}return t}function Cae(n){if(n==null)return yu;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function wt(n){return Rp(()=>{let e=Dj(n);return Rj(e),e})}function gE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dj(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||yu,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||us,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Sae(n.inputs,e),outputs:Cae(n.outputs),debugInfo:null}}function Rj(n){n.features?.forEach(e=>e(n))}function Q5(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let s=e(r);s!==null&&i.push(s)}return i}:null}function Aae(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Mae(n){return Object.getPrototypeOf(n.prototype).constructor}function hi(n){let e=Mae(n.type),t=!0,i=[n];for(;e;){let r;if(Ba(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Oe(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=V1(n.inputs),o.declaredInputs=V1(n.declaredInputs),o.outputs=V1(n.outputs);let a=r.hostBindings;a&&Nae(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&Pae(n,c),l&&kae(n,l),Dae(n,r),Oz(n.outputs,r.outputs),Ba(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===hi&&(t=!1)}}e=Object.getPrototypeOf(e)}Rae(i)}function Dae(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function Rae(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Cp(r.hostAttrs,t=Cp(t,r.hostAttrs))}}function V1(n){return n===yu?{}:n===us?[]:n}function Pae(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function kae(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function Nae(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Pj(n,e,t,i,r,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Cp(n.mergedAttrs,n.attrs);let u=n.tView=PP(2,n,r,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ip(n,!1);let c=Lae(t,e,n,i);Rw()&&UP(t,e,c,n),Ap(c,e);let l=hj(c,e,c,n);e[i+xi]=l,NP(e,l),hae(l,n,e)}function Oae(n,e,t,i,r,s,o,a,c,l,u){let d=t+xi,h;return e.firstCreatePass?(h=Op(e,d,4,o||null,a||null),Tw()&&gj(e,n,h,Jo(e.consts,l),zP),aH(e,h)):h=e.data[d],Pj(h,n,e,t,i,r,s,c),wp(h)&&hE(e,n,h),l!=null&&Ty(n,h,u),h}function _E(n,e,t,i,r,s,o,a,c,l,u){let d=t+xi,h;if(e.firstCreatePass){if(h=Op(e,d,4,o||null,a||null),l!=null){let p=Jo(e.consts,l);h.localNames=[];for(let _=0;_<p.length;_+=2)h.localNames.push(p[_],-1)}}else h=e.data[d];return Pj(h,n,e,t,i,r,s,c),l!=null&&Ty(n,h,u),h}function Fr(n,e,t,i,r,s,o,a){let c=Bt(),l=mi(),u=Jo(l.consts,s);return Oae(c,l,n,e,t,i,r,u,void 0,o,a),Fr}function yE(n,e,t,i,r,s,o,a){let c=Bt(),l=mi(),u=Jo(l.consts,s);return _E(c,l,n,e,t,i,r,u,void 0,o,a),yE}var Lae=Fae;function Fae(n,e,t,i){return uy(!0),e[li].createComment("")}var vE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Ay(n){return typeof n=="function"&&n[as]!==void 0}function ek(n){return Ay(n)&&typeof n.set=="function"}var tk=new Ee("");function qc(n){return!!n&&typeof n.then=="function"}function bE(n){return!!n&&typeof n.subscribe=="function"}var nk=new Ee("");function Lp(n){return vr([{provide:nk,multi:!0,useValue:n}])}var ik=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=H(nk,{optional:!0})??[];injector=H(Qt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=Gi(this.injector,r);if(qc(s))t.push(s);else if(bE(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xE=new Ee("");function kj(){sR(()=>{let n="";throw new Oe(600,n)})}function Nj(n){return n.isBoundToModule}var Vae=10;var wr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(Ss);afterRenderManager=H(LP);zonelessEnabled=H(hy);rootEffectScheduler=H(Pw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Dt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H(Uc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pt(t=>!t))}constructor(){H($c,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=H(ii);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Qt.NULL){return this._injector.get(St).run(()=>{Kn(kn.BootstrapComponentStart);let o=t instanceof fE;if(!this._injector.get(ik).done){let _="";throw new Oe(405,_)}let c;o?c=t:c=this._injector.get(Sy).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=Nj(c)?void 0:this._injector.get(Hc),u=i||c.selector,d=c.create(r,[],u,l),h=d.location.nativeElement,p=d.injector.get(tk,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),gy(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),Kn(kn.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Kn(kn.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(uE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Kn(kn.ChangeDetectionEnd),new Oe(101,!1);let t=Gt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Gt(t),this.afterTick.next(),Kn(kn.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(br,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Vae;){Kn(kn.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Kn(kn.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!cy(r))continue;let s=i&&!this.zonelessEnabled?0:1;cj(r,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;gy(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(xE,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Wi(n,e,t,i){let r=Bt(),s=ph();if(na(r,s,e)){let o=mi(),a=ly();doe(a,r,n,e,t,i)}return Wi}var x4e=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Fp(n,e,t,i,r,s,o,a){vh("NgControlFlow");let c=Bt(),l=mi(),u=Jo(l.consts,s);return _E(c,l,n,e,t,i,r,u,256,o,a),rk}function rk(n,e,t,i,r,s,o,a){vh("NgControlFlow");let c=Bt(),l=mi(),u=Jo(l.consts,s);return _E(c,l,n,e,t,i,r,u,512,o,a),rk}function Vp(n,e){vh("NgControlFlow");let t=Bt(),i=ph(),r=t[i]!==As?t[i]:-1,s=r!==-1?J5(t,xi+r):void 0,o=0;if(na(t,i,n)){let a=Gt(null);try{if(s!==void 0&&Roe(s,o),n!==-1){let c=xi+n,l=J5(t,c),u=Uae(t[Pt],c),d=Uoe(l,u,t),h=$P(t,u,e,{dehydratedView:d});KP(l,h,o,Yw(u,d))}}finally{Gt(a)}}else if(s!==void 0){let a=Doe(s,o);a!==void 0&&(a[Nr]=e)}}function J5(n,e){return n[e]}function Uae(n,e){return ay(n,e)}function Bn(n,e,t){let i=Bt(),r=ph();if(na(i,r,e)){let s=mi(),o=ly();tj(o,i,n,e,i[li],t)}return Bn}function mP(n,e,t,i,r){GP(e,n,t,r?"class":"style",i)}function se(n,e,t,i){let r=Bt(),s=r[Pt],o=n+xi,a=s.firstCreatePass?YP(o,r,2,e,zP,Tw(),t,i):s.data[o];if(HP(a,r,n,e,Oj),wp(a)){let c=r[Pt];hE(c,r,a),EP(c,a,r)}return i!=null&&Ty(r,a),se}function ae(){let n=mi(),e=hr(),t=jP(e);return n.firstCreatePass&&QP(n,t),_1(t)&&y1(),m1(),t.classesWithoutHost!=null&&Sre(t)&&mP(n,t,Bt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Cre(t)&&mP(n,t,Bt(),t.stylesWithoutHost,!1),ae}function Sn(n,e,t,i){return se(n,e,t,i),ae(),Sn}function at(n,e,t,i){let r=Bt(),s=r[Pt],o=n+xi,a=s.firstCreatePass?Yoe(o,s,2,e,t,i):s.data[o];return HP(a,r,n,e,Oj),i!=null&&Ty(r,a),at}function Et(){let n=hr(),e=jP(n);return _1(e)&&y1(),m1(),Et}function fs(n,e,t,i){return at(n,e,t,i),Et(),fs}var Oj=(n,e,t,i,r)=>(uy(!0),BH(e[li],i,v5()));function bh(n,e,t){let i=Bt(),r=i[Pt],s=n+xi,o=r.firstCreatePass?YP(s,i,8,"ng-container",zP,Tw(),e,t):r.data[s];if(HP(o,i,n,"ng-container",Bae),wp(o)){let a=i[Pt];hE(a,i,o),EP(a,o,i)}return t!=null&&Ty(i,o),bh}function xh(){let n=mi(),e=hr(),t=jP(e);return n.firstCreatePass&&QP(n,t),xh}var Bae=(n,e,t,i,r)=>(uy(!0),kse(e[li],""));function Er(){return Bt()}function wE(n,e,t){let i=Bt(),r=ph();if(na(i,r,e)){let s=mi(),o=ly();nj(o,i,n,e,i[li],t)}return wE}var py=void 0;function zae(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Hae=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],py,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],py,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",py,py,py],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",zae],U1={};function eo(n){let e=jae(n),t=Z5(e);if(t)return t;let i=e.split("-")[0];if(t=Z5(i),t)return t;if(i==="en")return Hae;throw new Oe(701,!1)}function Z5(n){return n in U1||(U1[n]=bo.ng&&bo.ng.common&&bo.ng.common.locales&&bo.ng.common.locales[n]),U1[n]}var $i=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})($i||{});function jae(n){return n.toLowerCase().replace(/_/g,"-")}var My="en-US";var Gae=My;function Lj(n){typeof n=="string"&&(Gae=n.toLowerCase().replace(/_/g,"-"))}function Nn(n,e,t){let i=Bt(),r=mi(),s=hr();return Fj(r,i,i[li],s,n,e,t),Nn}function wh(n,e,t){let i=Bt(),r=mi(),s=hr();return(s.type&3||t)&&wj(s,r,i,t,i[li],n,e,Hw(s,i,e)),wh}function Fj(n,e,t,i,r,s,o){let a=!0,c=null;if((i.type&3||o)&&(c??=Hw(i,e,s),wj(i,n,e,o,t,r,s,c)&&(a=!1)),a){let l=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],p=u[d+1];c??=Hw(i,e,s),K5(i,e,h,p,r,c)}if(l&&l.length)for(let d of l)c??=Hw(i,e,s),K5(i,e,d,r,r,c)}}function Gn(n=1){return y5(n)}function Wae(n,e){let t=null,i=Ise(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?UH(n,s,!0):Cse(i,s))return r}return t}function fr(n){let e=Bt()[Is][ds];if(!e.projection){let t=n?n.length:1,i=e.projection=jz(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?Wae(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Xn(n,e=0,t,i,r,s){let o=Bt(),a=mi(),c=i?n+1:null;c!==null&&_E(o,a,c,i,r,s,null,t);let l=Op(a,xi+n,16,null,t||null);l.projection===null&&(l.projection=e),x1();let d=!o[vp]||g1();o[Is][ds].projection[l.projection]===null&&c!==null?$ae(o,a,c):d&&!aE(l)&&eoe(a,o,l)}function $ae(n,e,t){let i=xi+t,r=e.data[i],s=n[i],o=oP(s,r.tView.ssrId),a=$P(n,r,void 0,{dehydratedView:o});KP(s,a,0,Yw(r,o))}function Ds(n,e,t,i){bae(n,e,t,i)}function Kc(n,e,t){vae(n,e,t)}function Qi(n){let e=Bt(),t=mi(),i=I1();Aw(i+1);let r=ZP(t,i);if(n.dirty&&e5(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=Eae(e,i);n.reset(s,Bre),n.notifyOnChanges()}return!0}return!1}function Ji(){return yae(Bt(),I1())}function EE(n){let e=c5();return ww(e,xi+n)}function Fw(n,e){return n<<17|e<<2}function yh(n){return n>>17&32767}function qae(n){return(n&2)==2}function Kae(n,e){return n&131071|e<<17}function gP(n){return n|2}function Dp(n){return(n&131068)>>2}function B1(n,e){return n&-131069|e<<2}function Xae(n){return(n&1)===1}function _P(n){return n|1}function Yae(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=yh(o),c=Dp(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||_p(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=yh(n[a+1]);n[i+1]=Fw(h,a),h!==0&&(n[h+1]=B1(n[h+1],i)),n[a+1]=Kae(n[a+1],i)}else n[i+1]=Fw(a,0),a!==0&&(n[a+1]=B1(n[a+1],i)),a=i;else n[i+1]=Fw(c,0),a===0?a=i:n[c+1]=B1(n[c+1],i),c=i;l&&(n[i+1]=gP(n[i+1])),eH(n,u,i,!0),eH(n,u,i,!1),Qae(e,u,n,i,s),o=Fw(a,c),s?e.classBindings=o:e.styleBindings=o}function Qae(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&_p(s,e)>=0&&(t[i+1]=_P(t[i+1]))}function eH(n,e,t,i){let r=n[t+1],s=e===null,o=i?yh(r):Dp(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];Jae(c,e)&&(a=!0,n[o+1]=i?_P(l):gP(l)),o=i?yh(l):Dp(l)}a&&(n[t+1]=i?gP(r):_P(r))}function Jae(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_p(n,e)>=0:!1}var ea={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zae(n){return n.substring(ea.key,ea.keyEnd)}function ece(n){return tce(n),Vj(n,Uj(n,0,ea.textEnd))}function Vj(n,e){let t=ea.textEnd;return t===e?-1:(e=ea.keyEnd=nce(n,ea.key=e,t),Uj(n,e,t))}function tce(n){ea.key=0,ea.keyEnd=0,ea.value=0,ea.valueEnd=0,ea.textEnd=n.length}function Uj(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function nce(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Dy(n,e,t){return Bj(n,e,t,!1),Dy}function ui(n,e){return Bj(n,e,null,!0),ui}function Xc(n){rce(uce,ice,n,!0)}function ice(n,e){for(let t=ece(e);t>=0;t=Vj(e,t))vw(n,Zae(e),!0)}function Bj(n,e,t,i){let r=Bt(),s=mi(),o=Sw(2);if(s.firstUpdatePass&&Hj(s,n,o,i),e!==As&&na(r,o,e)){let a=s.data[Fc()];jj(s,a,r,r[li],n,r[o+1]=hce(e,t),i,o)}}function rce(n,e,t,i){let r=mi(),s=Sw(2);r.firstUpdatePass&&Hj(r,null,s,i);let o=Bt();if(t!==As&&na(o,s,t)){let a=r.data[Fc()];if(Gj(a,i)&&!zj(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=mw(c,t||"")),mP(r,a,o,t,i)}else dce(r,a,o,o[li],o[s+1],o[s+1]=lce(n,e,t),i,s)}}function zj(n,e){return e>=n.expandoStartIndex}function Hj(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Fc()],o=zj(n,t);Gj(s,i)&&e===null&&!o&&(e=!1),e=sce(r,s,e,i),Yae(r,s,e,t,o,i)}}function sce(n,e,t,i){let r=p5(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=z1(null,n,e,t,i),t=by(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=z1(r,n,e,t,i),s===null){let c=oce(n,e,i);c!==void 0&&Array.isArray(c)&&(c=z1(null,n,e,c[1],i),c=by(c,e.attrs,i),ace(n,e,i,c))}else s=cce(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function oce(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Dp(i)!==0)return n[yh(i)]}function ace(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[yh(r)]=i}function cce(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=by(i,o,t)}return by(i,e.attrs,t)}function z1(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=by(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function by(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),vw(n,o,t?!0:e[++s]))}return n===void 0?null:n}function lce(n,e,t){if(t==null||t==="")return us;let i=[],r=ia(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function uce(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&vw(n,i,t)}function dce(n,e,t,i,r,s,o,a){r===As&&(r=us);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,p=l<s.length?s[l+1]:void 0,_=null,b;u===d?(c+=2,l+=2,h!==p&&(_=d,b=p)):d===null||u!==null&&u<d?(c+=2,_=u):(l+=2,_=d,b=p),_!==null&&jj(n,e,t,i,_,b,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function jj(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=Xae(l)?tH(c,e,t,r,Dp(l),o):void 0;if(!rE(u)){rE(s)||qae(l)&&(s=tH(c,null,t,r,a,o));let d=c1(Fc(),t);noe(i,o,d,r,s)}}function tH(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===As&&(h=d?us:void 0);let p=d?bw(h,i):u===i?h:void 0;if(l&&!rE(p)&&(p=bw(c,i)),rE(p)&&(a=p,o))return a;let _=n[r+1];r=o?yh(_):Dp(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=bw(c,i))}return a}function rE(n){return n!==void 0}function hce(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Nc(ia(n)))),n}function Gj(n,e){return(n.flags&(e?8:16))!==0}function Q(n,e=""){let t=Bt(),i=mi(),r=n+xi,s=i.firstCreatePass?Op(i,r,1,e,null):i.data[r],o=fce(i,t,s,e,n);t[r]=o,Rw()&&UP(i,t,o,s),Ip(s,!1)}var fce=(n,e,t,i,r)=>(uy(!0),Rse(e[li],i));function pce(n,e,t,i=""){return na(n,ph(),t)?e+ah(t)+i:As}function mce(n,e,t,i,r,s=""){let o=l5(),a=xj(n,o,t,r);return Sw(2),a?e+ah(t)+i+ah(r)+s:As}function ps(n){return Ry("",n),ps}function Ry(n,e,t){let i=Bt(),r=pce(i,n,e,t);return r!==As&&Wj(i,Fc(),r),Ry}function IE(n,e,t,i,r){let s=Bt(),o=mce(s,n,e,t,i,r);return o!==As&&Wj(s,Fc(),o),IE}function Wj(n,e,t){let i=c1(e,n);Pse(n[li],i,t)}function TE(n,e,t){ek(e)&&(e=e());let i=Bt(),r=ph();if(na(i,r,e)){let s=mi(),o=ly();tj(o,i,n,e,i[li],t)}return TE}function sk(n,e){let t=ek(n);return t&&n.set(e),t}function SE(n,e){let t=Bt(),i=mi(),r=hr();return Fj(i,t,t[li],r,n,e),SE}function gce(n,e,t){let i=mi();if(i.firstCreatePass){let r=Ba(n);yP(t,i.data,i.blueprint,r,!0),yP(e,i.data,i.blueprint,r,!1)}}function yP(n,e,t,i,r){if(n=kr(n),Array.isArray(n))for(let s=0;s<n.length;s++)yP(n[s],e,t,i,r);else{let s=mi(),o=Bt(),a=hr(),c=rh(n)?n:kr(n.provide),l=i1(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(rh(n)||!n.multi){let p=new gh(l,r,mt,null),_=j1(c,e,r?u:u+h,d);_===-1?(W1(qw(a,o),s,c),H1(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),o.push(p)):(t[_]=p,o[_]=p)}else{let p=j1(c,e,u+h,d),_=j1(c,e,u,u+h),b=p>=0&&t[p],g=_>=0&&t[_];if(r&&!g||!r&&!b){W1(qw(a,o),s,c);let v=vce(r?yce:_ce,t.length,r,i,l,n);!r&&g&&(t[_].providerFactory=v),H1(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),o.push(v)}else{let v=$j(t[r?_:p],l,!r&&i);H1(s,n,p>-1?p:_,v)}!r&&i&&g&&t[_].componentProviders++}}}function H1(n,e,t,i){let r=rh(e),s=Yz(e);if(r||s){let c=(s?kr(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function $j(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function j1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function _ce(n,e,t,i,r){return vP(this.multi,[])}function yce(n,e,t,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=_y(i,i[Pt],this.providerFactory.index,r);o=c.slice(0,a),vP(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],vP(s,o);return o}function vP(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function vce(n,e,t,i,r,s){let o=new gh(n,t,mt,null);return o.multi=[],o.index=e,o.componentProviders=0,$j(o,r,i&&!t),o}function Rs(n,e=[]){return t=>{t.providersResolver=(i,r)=>gce(i,r?r(n):n,e)}}function qj(n,e){let t=n[e];return t===As?void 0:t}function bce(n,e,t,i,r,s){let o=e+t;return na(n,o,r)?bj(n,o+1,s?i.call(s,r):i(r)):qj(n,o+1)}function xce(n,e,t,i,r,s,o){let a=e+t;return xj(n,a,r,s)?bj(n,a+2,o?i.call(o,r,s):i(r,s)):qj(n,a+2)}function Yc(n,e){let t=mi(),i,r=n+xi;t.firstCreatePass?(i=wce(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=mu(i.type,!0)),o,a=ls(mt);try{let c=$w(!1),l=s();return $w(c),l1(t,Bt(),r,l),l}finally{ls(a)}}function wce(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Cu(n,e,t){let i=n+xi,r=Bt(),s=ww(r,i);return Kj(r,i)?bce(r,E1(),e,s.transform,t,s):s.transform(t)}function ok(n,e,t,i){let r=n+xi,s=Bt(),o=ww(s,r);return Kj(s,r)?xce(s,E1(),e,o.transform,t,i,o):o.transform(t,i)}function Kj(n,e){return n[Pt].data[e].pure}var sE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ak=(()=>{class n{compileModuleSync(t){return new iE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=ZR(t),s=FH(r.declarations).reduce((o,a)=>{let c=Lc(a);return c&&o.push(new _h(c)),o},[]);return new sE(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xj=(()=>{class n{applicationErrorHandler=H(Ss);appRef=H(wr);taskService=H(Uc);ngZone=H(St);zonelessEnabled=H(hy);tracing=H($c,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Z_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(k1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?M1:A1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Z_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,M1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yj(){return[{provide:Oc,useExisting:Xj},{provide:St,useClass:ey},{provide:hy,useValue:!0}]}function Ece(){return typeof $localize<"u"&&$localize.locale||My}var Py=new Ee("",{factory:()=>H(Py,{optional:!0,skipSelf:!0})||Ece()});function Up(n,e){return Px(n,e?.equal)}var t6=Symbol("InputSignalNode#UNSET"),Nce=st(ie({},kx),{transformFn:void 0,applyValueToInputSignal(n,e){H_(n,e)}});function n6(n,e){let t=Object.create(Nce);t.value=n,t.transformFn=e?.transform;function i(){if(U_(t),t.value===t6){let r=null;throw new Oe(-950,r)}return t.value}return i[as]=t,i}var Bp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>xy(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Qj(n,e){return n6(n,e)}function Oce(n){return n6(t6,n)}var i6=(Qj.required=Oce,Qj);var ck=new Ee(""),Lce=new Ee("");function ky(n){return!n.moduleRef}function Fce(n){let e=ky(n)?n.r3Injector:n.moduleRef.injector,t=e.get(St);return t.run(()=>{ky(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ss),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),ky(n)){let s=()=>e.destroy(),o=n.platformInjector.get(ck);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ck);o.add(s),n.moduleRef.onDestroy(()=>{gy(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return Uce(i,t,()=>{let s=e.get(Uc),o=s.add(),a=e.get(ik);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Py,My);if(Lj(c||My),!e.get(Lce,!0))return ky(n)?e.get(wr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ky(n)){let u=e.get(wr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Vce?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var Vce;function Uce(n,e,t){try{let i=t();return qc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var CE=null;function Bce(n=[],e){return Qt.create({name:e,providers:[{provide:iy,useValue:"platform"},{provide:ck,useValue:new Set([()=>CE=null])},...n]})}function zce(n=[]){if(CE)return CE;let e=Bce(n);return CE=e,kj(),Hce(e),e}function Hce(n){let e=n.get(oE,null);Gi(n,()=>{e?.forEach(t=>t())})}function Ny(){return!1}var ks=(()=>{class n{static __NG_ELEMENT_ID__=jce}return n})();function jce(n){return Gce(hr(),Bt(),(n&16)===16)}function Gce(n,e,t){if(Eu(n)&&!t){let i=Eo(n.index,e);return new Su(i,i)}else if(n.type&175){let i=e[Is];return new Su(i,e)}return null}var lk=class{constructor(){}supports(e){return JP(e)}create(e){return new uk(e)}},Wce=(n,e)=>e,uk=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Wce}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<Jj(i,r,s)?t:i,a=Jj(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let p=h<s.length?s[h]:s[h]=0,_=p+h;u<=_&&_<l&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!JP(e))throw new Oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,yj(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new dk(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new AE),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new AE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dk=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},hk=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},AE=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new hk,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Jj(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Zj(){return new ME([new lk])}var ME=(()=>{class n{factories;static \u0275prov=ve({token:n,providedIn:"root",factory:Zj});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=H(n,{optional:!0,skipSelf:!0});return n.create(t,i||Zj())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Oe(901,!1)}}return n})();function r6(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Kn(kn.BootstrapApplicationStart);try{let s=r?.injector??zce(i),o=[Yj(),E5,...t||[]],a=new vy({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return Fce({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Kn(kn.BootstrapApplicationEnd)}}function ki(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function s6(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function DE(n,e){let t=Lc(n),i=e.elementInjector||yp();return new _h(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var c6=null;function To(){return c6}function fk(n){c6??=n}var Oy=class{},pk=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(l6),providedIn:"platform"})}return n})();var l6=(()=>{class n extends pk{_location;_history;_doc=H(Wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return To().getBaseHref(this._doc)}onPopState(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function u6(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function o6(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Au(n){return n&&n[0]!=="?"?`?${n}`:n}var zp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(h6),providedIn:"root"})}return n})(),d6=new Ee(""),h6=(()=>{class n extends zp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return u6(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Au(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Au(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Au(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(it(pk),it(d6,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mu=(()=>{class n{_subject=new Dt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=Kce(o6(a6(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Au(i))}normalize(t){return n.stripTrailingSlash(qce(this._basePath,a6(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Au(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Au(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Au;static joinWithSlash=u6;static stripTrailingSlash=o6;static \u0275fac=function(i){return new(i||n)(it(zp))};static \u0275prov=ve({token:n,factory:()=>$ce(),providedIn:"root"})}return n})();function $ce(){return new Mu(it(zp))}function qce(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function a6(n){return n.replace(/\/index.html$/,"")}function Kce(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Yr=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Yr||{}),oi=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(oi||{}),Ns=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Ns||{}),Jc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function g6(n){return eo(n)[$i.LocaleId]}function _6(n,e,t){let i=eo(n),r=[i[$i.DayPeriodsFormat],i[$i.DayPeriodsStandalone]],s=So(r,e);return So(s,t)}function y6(n,e,t){let i=eo(n),r=[i[$i.DaysFormat],i[$i.DaysStandalone]],s=So(r,e);return So(s,t)}function v6(n,e,t){let i=eo(n),r=[i[$i.MonthsFormat],i[$i.MonthsStandalone]],s=So(r,e);return So(s,t)}function b6(n,e){let i=eo(n)[$i.Eras];return So(i,e)}function Ly(n,e){let t=eo(n);return So(t[$i.DateFormat],e)}function Fy(n,e){let t=eo(n);return So(t[$i.TimeFormat],e)}function Vy(n,e){let i=eo(n)[$i.DateTimeFormat];return So(i,e)}function Uy(n,e){let t=eo(n),i=t[$i.NumberSymbols][e];if(typeof i>"u"){if(e===Jc.CurrencyDecimal)return t[$i.NumberSymbols][Jc.Decimal];if(e===Jc.CurrencyGroup)return t[$i.NumberSymbols][Jc.Group]}return i}function x6(n){if(!n[$i.ExtraData])throw new Oe(2303,!1)}function w6(n){let e=eo(n);return x6(e),(e[$i.ExtraData][2]||[]).map(i=>typeof i=="string"?mk(i):[mk(i[0]),mk(i[1])])}function E6(n,e,t){let i=eo(n);x6(i);let r=[i[$i.ExtraData][0],i[$i.ExtraData][1]],s=So(r,e)||[];return So(s,t)||[]}function So(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Oe(2304,!1)}function mk(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Xce=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,RE={},Yce=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function I6(n,e,t,i){let r=sle(n);e=Qc(t,e)||e;let o=[],a;for(;e;)if(a=Yce.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=r.getTimezoneOffset();i&&(c=S6(i,c),r=rle(r,i));let l="";return o.forEach(u=>{let d=nle(u);l+=d?d(r,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function LE(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Qc(n,e){let t=g6(n);if(RE[t]??={},RE[t][e])return RE[t][e];let i="";switch(e){case"shortDate":i=Ly(n,Ns.Short);break;case"mediumDate":i=Ly(n,Ns.Medium);break;case"longDate":i=Ly(n,Ns.Long);break;case"fullDate":i=Ly(n,Ns.Full);break;case"shortTime":i=Fy(n,Ns.Short);break;case"mediumTime":i=Fy(n,Ns.Medium);break;case"longTime":i=Fy(n,Ns.Long);break;case"fullTime":i=Fy(n,Ns.Full);break;case"short":let r=Qc(n,"shortTime"),s=Qc(n,"shortDate");i=PE(Vy(n,Ns.Short),[r,s]);break;case"medium":let o=Qc(n,"mediumTime"),a=Qc(n,"mediumDate");i=PE(Vy(n,Ns.Medium),[o,a]);break;case"long":let c=Qc(n,"longTime"),l=Qc(n,"longDate");i=PE(Vy(n,Ns.Long),[c,l]);break;case"full":let u=Qc(n,"fullTime"),d=Qc(n,"fullDate");i=PE(Vy(n,Ns.Full),[u,d]);break}return i&&(RE[t][e]=i),i}function PE(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function ra(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function Qce(n,e){return ra(n,3).substring(0,e)}function Zi(n,e,t=0,i=!1,r=!1){return function(s,o){let a=Jce(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Qce(a,e);let c=Uy(o,Jc.MinusSign);return ra(a,e,c,i,r)}}function Jce(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Oe(2301,!1)}}function fi(n,e,t=Yr.Format,i=!1){return function(r,s){return Zce(r,s,n,e,t,i)}}function Zce(n,e,t,i,r,s){switch(t){case 2:return v6(e,r,i)[n.getMonth()];case 1:return y6(e,r,i)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=w6(e),u=E6(e,r,i),d=l.findIndex(h=>{if(Array.isArray(h)){let[p,_]=h,b=o>=p.hours&&a>=p.minutes,g=o<_.hours||o===_.hours&&a<_.minutes;if(p.hours<_.hours){if(b&&g)return!0}else if(b||g)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return _6(e,r,i)[o<12?0:1];case 3:return b6(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new Oe(2302,!1)}}function kE(n){return function(e,t,i){let r=-1*i,s=Uy(t,Jc.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+ra(o,2,s)+ra(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+ra(o,1,s);case 2:return"GMT"+(r>=0?"+":"")+ra(o,2,s)+":"+ra(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+ra(o,2,s)+":"+ra(Math.abs(r%60),2,s);default:throw new Oe(2310,!1)}}}var ele=0,OE=4;function tle(n){let e=LE(n,ele,1).getDay();return LE(n,0,1+(e<=OE?OE:OE+7)-e)}function T6(n){let e=n.getDay(),t=e===0?-3:OE-e;return LE(n.getFullYear(),n.getMonth(),n.getDate()+t)}function gk(n,e=!1){return function(t,i){let r;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{let s=T6(t),o=tle(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return ra(r,n,Uy(i,Jc.MinusSign))}}function NE(n,e=!1){return function(t,i){let s=T6(t).getFullYear();return ra(s,n,Uy(i,Jc.MinusSign),e)}}var _k={};function nle(n){if(_k[n])return _k[n];let e;switch(n){case"G":case"GG":case"GGG":e=fi(3,oi.Abbreviated);break;case"GGGG":e=fi(3,oi.Wide);break;case"GGGGG":e=fi(3,oi.Narrow);break;case"y":e=Zi(0,1,0,!1,!0);break;case"yy":e=Zi(0,2,0,!0,!0);break;case"yyy":e=Zi(0,3,0,!1,!0);break;case"yyyy":e=Zi(0,4,0,!1,!0);break;case"Y":e=NE(1);break;case"YY":e=NE(2,!0);break;case"YYY":e=NE(3);break;case"YYYY":e=NE(4);break;case"M":case"L":e=Zi(1,1,1);break;case"MM":case"LL":e=Zi(1,2,1);break;case"MMM":e=fi(2,oi.Abbreviated);break;case"MMMM":e=fi(2,oi.Wide);break;case"MMMMM":e=fi(2,oi.Narrow);break;case"LLL":e=fi(2,oi.Abbreviated,Yr.Standalone);break;case"LLLL":e=fi(2,oi.Wide,Yr.Standalone);break;case"LLLLL":e=fi(2,oi.Narrow,Yr.Standalone);break;case"w":e=gk(1);break;case"ww":e=gk(2);break;case"W":e=gk(1,!0);break;case"d":e=Zi(2,1);break;case"dd":e=Zi(2,2);break;case"c":case"cc":e=Zi(7,1);break;case"ccc":e=fi(1,oi.Abbreviated,Yr.Standalone);break;case"cccc":e=fi(1,oi.Wide,Yr.Standalone);break;case"ccccc":e=fi(1,oi.Narrow,Yr.Standalone);break;case"cccccc":e=fi(1,oi.Short,Yr.Standalone);break;case"E":case"EE":case"EEE":e=fi(1,oi.Abbreviated);break;case"EEEE":e=fi(1,oi.Wide);break;case"EEEEE":e=fi(1,oi.Narrow);break;case"EEEEEE":e=fi(1,oi.Short);break;case"a":case"aa":case"aaa":e=fi(0,oi.Abbreviated);break;case"aaaa":e=fi(0,oi.Wide);break;case"aaaaa":e=fi(0,oi.Narrow);break;case"b":case"bb":case"bbb":e=fi(0,oi.Abbreviated,Yr.Standalone,!0);break;case"bbbb":e=fi(0,oi.Wide,Yr.Standalone,!0);break;case"bbbbb":e=fi(0,oi.Narrow,Yr.Standalone,!0);break;case"B":case"BB":case"BBB":e=fi(0,oi.Abbreviated,Yr.Format,!0);break;case"BBBB":e=fi(0,oi.Wide,Yr.Format,!0);break;case"BBBBB":e=fi(0,oi.Narrow,Yr.Format,!0);break;case"h":e=Zi(3,1,-12);break;case"hh":e=Zi(3,2,-12);break;case"H":e=Zi(3,1);break;case"HH":e=Zi(3,2);break;case"m":e=Zi(4,1);break;case"mm":e=Zi(4,2);break;case"s":e=Zi(5,1);break;case"ss":e=Zi(5,2);break;case"S":e=Zi(6,1);break;case"SS":e=Zi(6,2);break;case"SSS":e=Zi(6,3);break;case"Z":case"ZZ":case"ZZZ":e=kE(0);break;case"ZZZZZ":e=kE(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=kE(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=kE(2);break;default:return null}return _k[n]=e,e}function S6(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ile(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function rle(n,e,t){let r=n.getTimezoneOffset(),s=S6(e,r);return ile(n,-1*(s-r))}function sle(n){if(f6(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return LE(r,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Xce))return ole(i)}let e=new Date(n);if(!f6(e))throw new Oe(2311,!1);return e}function ole(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function f6(n){return n instanceof Date&&!isNaN(n.valueOf())}var FE=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},UE=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new FE(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),p6(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);p6(s,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(mt(Ms),mt(Zs),mt(ME))};static \u0275dir=wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function p6(n,e){n.context.$implicit=e.item}var sa=(()=>{class n{_viewContainer;_context=new VE;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m6(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m6(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(mt(Ms),mt(Zs))};static \u0275dir=wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),VE=class{$implicit=null;ngIf=null};function m6(n,e){if(n&&!n.createEmbeddedView)throw new Oe(2020,!1)}function C6(n,e){return new Oe(2100,!1)}var yk=class{createSubscription(e,t,i){return Ci(()=>e.subscribe({next:t,error:i}))}dispose(e){Ci(()=>e.unsubscribe())}},vk=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},ale=new vk,cle=new yk,Eh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=H(Ss);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(qc(t))return ale;if(bE(t))return cle;throw C6(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(mt(ks,16))};static \u0275pipe=gE({name:"async",type:n,pure:!1})}return n})();var lle="mediumDate",A6=new Ee(""),M6=new Ee(""),bk=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(t==null||t===""||t!==t)return null;try{let o=i??this.defaultOptions?.dateFormat??lle,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return I6(t,o,s||this.locale,a)}catch(o){throw C6(n,o.message)}}static \u0275fac=function(i){return new(i||n)(mt(Py,16),mt(A6,24),mt(M6,24))};static \u0275pipe=gE({name:"date",type:n,pure:!0})}return n})();var Os=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();function BE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Ih=class{};var xk="browser";function D6(n){return n===xk}var By=class{_doc;constructor(e){this._doc=e}manager},zE=(()=>{class n extends By{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(it(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),GE=new Ee(""),Tk=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(o=>{o.manager=this});let r=t.filter(o=>!(o instanceof zE));this._plugins=r.slice().reverse();let s=t.find(o=>o instanceof zE);s&&this._plugins.push(s)}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Oe(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(it(GE),it(St))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),wk="ng-app-id";function R6(n){for(let e of n)e.remove()}function P6(n,e){let t=e.createElement("style");return t.textContent=n,t}function ule(n,e,t,i){let r=n.head?.querySelectorAll(`style[${wk}="${e}"],link[${wk}="${e}"]`);if(r)for(let s of r)s.removeAttribute(wk),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Ik(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Sk=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,ule(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,P6);i?.forEach(r=>this.addUsage(r,this.external,Ik))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(R6(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])R6(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,P6(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Ik(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(it(Wt),it(kp),it(Np,8),it(jc))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),Ek={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ck=/%COMP%/g;var N6="%COMP%",dle=`_nghost-${N6}`,hle=`_ngcontent-${N6}`,fle=!0,ple=new Ee("",{factory:()=>fle});function mle(n){return hle.replace(Ck,n)}function gle(n){return dle.replace(Ck,n)}function O6(n,e){return e.map(t=>t.replace(Ck,n))}var Ak=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new zy(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof jE?r.applyToHost(t):r instanceof Hy&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case ta.Emulated:s=new jE(c,l,i,this.appId,u,o,a,d,h);break;case ta.ShadowDom:return new HE(c,t,i,o,a,this.nonce,d,h,l);case ta.ExperimentalIsolatedShadowDom:return new HE(c,t,i,o,a,this.nonce,d,h);default:s=new Hy(c,l,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(it(Tk),it(Sk),it(kp),it(ple),it(Wt),it(St),it(Np),it($c,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),zy=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ek[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(k6(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(k6(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Oe(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Ek[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Ek[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ha.DashCase|Ha.Important)?e.style.setProperty(t,i,r&Ha.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ha.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=To().getGlobalEventTarget(this.doc,e),!e))throw new Oe(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function k6(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var HE=class extends zy{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,i,r,s,o,a,c,l){super(e,r,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=O6(i.id,u);for(let h of u){let p=document.createElement("style");o&&p.setAttribute("nonce",o),p.textContent=h,this.shadowRoot.appendChild(p)}let d=i.getExternalStyles?.();if(d)for(let h of d){let p=Ik(h,r);o&&p.setAttribute("nonce",o),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Hy=class extends zy{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?O6(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Mp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jE=class extends Hy{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,c,l){let u=r+"-"+i.id;super(e,t,i,s,o,a,c,l,u),this.contentAttr=mle(u),this.hostAttr=gle(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var WE=class n extends Oy{supportsDOMEvents=!0;static makeCurrent(){fk(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_le();return t==null?null:yle(t)}resetBaseElement(){jy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return BE(document.cookie,e)}},jy=null;function _le(){return jy=jy||document.head.querySelector("base"),jy?jy.getAttribute("href"):null}function yle(n){return new URL(n,document.baseURI).pathname}var vle=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),L6=["alt","control","meta","shift"],ble={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xle={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},F6=(()=>{class n extends By{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),L6.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=ble[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),L6.forEach(o=>{if(o!==r){let a=xle[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(it(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();function Mk(n,e,t){let i=ie({rootComponent:n,platformRef:t?.platformRef},wle(e));return r6(i)}function wle(n){return{appProviders:[...Cle,...n?.providers??[]],platformProviders:Sle}}function Ele(){WE.makeCurrent()}function Ile(){return new Es}function Tle(){return wP(document),document}var Sle=[{provide:jc,useValue:xk},{provide:oE,useValue:Ele,multi:!0},{provide:Wt,useFactory:Tle}];var Cle=[{provide:iy,useValue:"root"},{provide:Es,useFactory:Ile},{provide:GE,useClass:zE,multi:!0},{provide:GE,useClass:F6,multi:!0},Ak,Sk,Tk,{provide:br,useExisting:Ak},{provide:Ih,useClass:vle},[]];var Du=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Rk=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Pk=class{encodeKey(e){return V6(e)}encodeValue(e){return V6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Ale(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var Mle=/%(\d[a-f0-9])/gi,Dle={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function V6(n){return encodeURIComponent(n).replace(Mle,(e,t)=>Dle[t]??e)}function $E(n){return`${n}`}var Zc=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Pk,e.fromString){if(e.fromObject)throw new Oe(2805,!1);this.map=Ale(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map($E):[$E(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push($E(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf($E(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function Rle(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function U6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function B6(n){return typeof Blob<"u"&&n instanceof Blob}function z6(n){return typeof FormData<"u"&&n instanceof FormData}function Ple(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var H6="Content-Type",j6="Accept",G6="text/plain",W6="application/json",kle=`${W6}, ${G6}, */*`,jp=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let s;if(Rle(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new Oe(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Du,this.context??=new Rk,!this.params)this.params=new Zc,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||U6(this.body)||B6(this.body)||z6(this.body)||Ple(this.body)?this.body:this.body instanceof Zc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||z6(this.body)?null:B6(this.body)?this.body.type||null:U6(this.body)?null:typeof this.body=="string"?G6:this.body instanceof Zc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?W6:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,h=e.integrity||this.integrity,p=e.referrerPolicy||this.referrerPolicy,_=e.transferCache??this.transferCache,b=e.timeout??this.timeout,g=e.body!==void 0?e.body:this.body,v=e.withCredentials??this.withCredentials,P=e.reportProgress??this.reportProgress,R=e.headers||this.headers,N=e.params||this.params,U=e.context??this.context;return e.setHeaders!==void 0&&(R=Object.keys(e.setHeaders).reduce((O,I)=>O.set(I,e.setHeaders[I]),R)),e.setParams&&(N=Object.keys(e.setParams).reduce((O,I)=>O.set(I,e.setParams[I]),N)),new n(t,i,g,{params:N,headers:R,context:U,reportProgress:P,responseType:r,withCredentials:v,transferCache:_,keepalive:s,cache:a,priority:o,timeout:b,mode:c,redirect:l,credentials:u,referrer:d,integrity:h,referrerPolicy:p})}},Th=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Th||{}),Gy=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,i="OK"){this.headers=e.headers||new Du,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},kk=class n extends Gy{constructor(e={}){super(e)}type=Th.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Wy=class n extends Gy{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Th.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Gp=class extends Gy{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Nle=200,Ole=204;var Lle=/^\)\]\}',?\n/;var Fle=(()=>{class n{xhrFactory;tracingService=H($c,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new Oe(-2800,!1);let i=this.xhrFactory;return xt(null).pipe(bi(()=>new _t(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),t.headers.has(j6)||o.setRequestHeader(j6,kle),!t.headers.has(H6)){let g=t.detectContentTypeHeader();g!==null&&o.setRequestHeader(H6,g)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let g=t.responseType.toLowerCase();o.responseType=g!=="json"?g:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=o.statusText||"OK",v=new Du(o.getAllResponseHeaders()),P=o.responseURL||t.url;return c=new kk({headers:v,status:o.status,statusText:g,url:P}),c},u=this.maybePropagateTrace(()=>{let{headers:g,status:v,statusText:P,url:R}=l(),N=null;v!==Ole&&(N=typeof o.response>"u"?o.responseText:o.response),v===0&&(v=N?Nle:0);let U=v>=200&&v<300;if(t.responseType==="json"&&typeof N=="string"){let O=N;N=N.replace(Lle,"");try{N=N!==""?JSON.parse(N):null}catch(I){N=O,U&&(U=!1,N={error:I,text:N})}}U?(s.next(new Wy({body:N,headers:g,status:v,statusText:P,url:R||void 0})),s.complete()):s.error(new Gp({error:N,headers:g,status:v,statusText:P,url:R||void 0}))}),d=this.maybePropagateTrace(g=>{let{url:v}=l(),P=new Gp({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(P)}),h=d;t.timeout&&(h=this.maybePropagateTrace(g=>{let{url:v}=l(),P=new Gp({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:v||void 0});s.error(P)}));let p=!1,_=this.maybePropagateTrace(g=>{p||(s.next(l()),p=!0);let v={type:Th.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),t.responseType==="text"&&o.responseText&&(v.partialText=o.responseText),s.next(v)}),b=this.maybePropagateTrace(g=>{let v={type:Th.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),s.next(v)});return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",h),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",_),a!==null&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:Th.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",_),a!==null&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(it(Ih))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vle(n,e){return e(n)}function Ule(n,e,t){return(i,r)=>Gi(t,()=>e(i,s=>n(s,r)))}var Ble=new Ee("",{factory:()=>[]}),$6=new Ee(""),zle=new Ee("",{providedIn:"root",factory:()=>!0});var Hle=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it(Fle),r},providedIn:"root"})}return n})();var jle=(()=>{class n{backend;injector;chain=null;pendingTasks=H(Tu);contributeToStability=H(zle);constructor(t,i){this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Ble),...this.injector.get($6,[])]));this.chain=i.reduceRight((r,s)=>Ule(r,s,this.injector),Vle)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(th(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(it(Hle),it(ii))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gle=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it(jle),r},providedIn:"root"})}return n})();function Dk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Nk=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof jp)s=t;else{let c;r.headers instanceof Du?c=r.headers:c=new Du(r.headers);let l;r.params&&(r.params instanceof Zc?l=r.params:l=new Zc({fromObject:r.params})),s=new jp(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let o=xt(s).pipe(pp(c=>this.handler.handle(c)));if(t instanceof jp||r.observe==="events")return o;let a=o.pipe(ni(c=>c instanceof Wy));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Oe(2806,!1);return c.body}));case"blob":return a.pipe(pt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Oe(2807,!1);return c.body}));case"text":return a.pipe(pt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Oe(2808,!1);return c.body}));case"json":default:return a.pipe(pt(c=>c.body))}case"response":return a;default:throw new Oe(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Zc().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Dk(r,i))}post(t,i,r={}){return this.request("POST",t,Dk(r,i))}put(t,i,r={}){return this.request("PUT",t,Dk(r,i))}static \u0275fac=function(i){return new(i||n)(it(Gle))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q6=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(it(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ok=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=it($le),r},providedIn:"root"})}return n})(),$le=(()=>{class n extends Ok{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Or.NONE:return i;case Or.HTML:return Gc(i,"HTML")?ia(i):MP(this._doc,String(i)).toString();case Or.STYLE:return Gc(i,"Style")?ia(i):i;case Or.SCRIPT:if(Gc(i,"Script"))return ia(i);throw new Oe(5200,!1);case Or.URL:return Gc(i,"URL")?ia(i):Ey(String(i));case Or.RESOURCE_URL:if(Gc(i,"ResourceURL"))return ia(i);throw new Oe(5201,!1);default:throw new Oe(5202,!1)}}bypassSecurityTrustHtml(t){return IP(t)}bypassSecurityTrustStyle(t){return TP(t)}bypassSecurityTrustScript(t){return SP(t)}bypassSecurityTrustUrl(t){return CP(t)}bypassSecurityTrustResourceUrl(t){return AP(t)}static \u0275fac=function(i){return new(i||n)(it(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $t="primary",rv=Symbol("RouteTitle"),Bk=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Mh(n){return new Bk(n)}function i8(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function JE(n){return new Promise((e,t)=>{n.pipe(Rc()).subscribe({next:i=>e(i),error:i=>t(i)})})}function Kle(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ga(n[t],e[t]))return!1;return!0}function Ga(n,e){let t=n?zk(n):void 0,i=e?zk(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!r8(n[r],e[r]))return!1;return!0}function zk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function r8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function s8(n){return n.length>0?n[n.length-1]:null}function Rh(n){return W_(n)?n:qc(n)?vi(Promise.resolve(n)):xt(n)}function o8(n){return W_(n)?JE(n):Promise.resolve(n)}var Xle={exact:c8,subset:l8},a8={exact:Yle,subset:Qle,ignored:()=>!0};function X6(n,e,t){return Xle[t.paths](n.root,e.root,t.matrixParams)&&a8[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Yle(n,e){return Ga(n,e)}function c8(n,e,t){if(!Ch(n.segments,e.segments)||!XE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!c8(n.children[i],e.children[i],t))return!1;return!0}function Qle(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>r8(n[t],e[t]))}function l8(n,e,t){return u8(n,e,e.segments,t)}function u8(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ch(r,t)||e.hasChildren()||!XE(r,t,i))}else if(n.segments.length===t.length){if(!Ch(n.segments,t)||!XE(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!l8(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ch(n.segments,r)||!XE(n.segments,r,i)||!n.children[$t]?!1:u8(n.children[$t],e,s,i)}}function XE(n,e,t){return e.every((i,r)=>a8[t](n[r].parameters,i.parameters))}var aa=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Wn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Mh(this.queryParams),this._queryParamMap}toString(){return eue.serialize(this)}},Wn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return YE(this)}},Ru=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Mh(this.parameters),this._parameterMap}toString(){return h8(this)}};function Jle(n,e){return Ch(n,e)&&n.every((t,i)=>Ga(t.parameters,e[i].parameters))}function Ch(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Zle(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===$t&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==$t&&(t=t.concat(e(r,i)))}),t}var sv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>new Pu,providedIn:"root"})}return n})(),Pu=class{parse(e){let t=new jk(e);return new aa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$y(e.root,!0)}`,i=iue(e.queryParams),r=typeof e.fragment=="string"?`#${tue(e.fragment)}`:"";return`${t}${i}${r}`}},eue=new Pu;function YE(n){return n.segments.map(e=>h8(e)).join("/")}function $y(n,e){if(!n.hasChildren())return YE(n);if(e){let t=n.children[$t]?$y(n.children[$t],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==$t&&i.push(`${r}:${$y(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Zle(n,(i,r)=>r===$t?[$y(n.children[$t],!1)]:[`${r}:${$y(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[$t]!=null?`${YE(n)}/${t[0]}`:`${YE(n)}/(${t.join("//")})`}}function d8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qE(n){return d8(n).replace(/%3B/gi,";")}function tue(n){return encodeURI(n)}function Hk(n){return d8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function QE(n){return decodeURIComponent(n)}function Y6(n){return QE(n.replace(/\+/g,"%20"))}function h8(n){return`${Hk(n.path)}${nue(n.parameters)}`}function nue(n){return Object.entries(n).map(([e,t])=>`;${Hk(e)}=${Hk(t)}`).join("")}function iue(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${qE(t)}=${qE(r)}`).join("&"):`${qE(t)}=${qE(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var rue=/^[^\/()?;#]+/;function Lk(n){let e=n.match(rue);return e?e[0]:""}var sue=/^[^\/()?;=#]+/;function oue(n){let e=n.match(sue);return e?e[0]:""}var aue=/^[^=?&#]+/;function cue(n){let e=n.match(aue);return e?e[0]:""}var lue=/^[^&#]+/;function uue(n){let e=n.match(lue);return e?e[0]:""}var jk=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[$t]=new Wn(e,t)),i}parseSegment(){let e=Lk(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Oe(4009,!1);return this.capture(e),new Ru(QE(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=oue(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Lk(this.remaining);r&&(i=r,this.capture(i))}e[QE(t)]=QE(i)}parseQueryParam(e){let t=cue(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=uue(this.remaining);o&&(i=o,this.capture(i))}let r=Y6(t),s=Y6(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Lk(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Oe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=$t);let o=this.parseChildren();t[s??$t]=Object.keys(o).length===1&&o[$t]?o[$t]:new Wn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Oe(4011,!1)}};function f8(n){return n.segments.length>0?new Wn([],{[$t]:n}):n}function p8(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=p8(r);if(i===$t&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Wn(n.segments,e);return due(t)}function due(n){if(n.numberOfChildren===1&&n.children[$t]){let e=n.children[$t];return new Wn(n.segments.concat(e.segments),e.children)}return n}function ku(n){return n instanceof aa}function m8(n,e,t=null,i=null,r=new Pu){let s=g8(n);return _8(s,e,t,i,r)}function g8(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Wn(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=f8(i);return e??r}function _8(n,e,t,i,r){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Fk(s,s,s,t,i,r);let o=hue(e);if(o.toRoot())return Fk(s,s,new Wn([],{}),t,i,r);let a=fue(o,s,n),c=a.processChildren?Ky(a.segmentGroup,a.index,o.commands):v8(a.segmentGroup,a.index,o.commands);return Fk(s,a.segmentGroup,c,t,i,r)}function ZE(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qy(n){return typeof n=="object"&&n!=null&&n.outlets}function Q6(n,e,t){n||="\u0275";let i=new aa;return i.queryParams={[n]:e},t.parse(t.serialize(i)).queryParams[n]}function Fk(n,e,t,i,r,s){let o={};for(let[l,u]of Object.entries(i??{}))o[l]=Array.isArray(u)?u.map(d=>Q6(l,d,s)):Q6(l,u,s);let a;n===e?a=t:a=y8(n,e,t);let c=f8(p8(a));return new aa(c,o,r)}function y8(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=y8(s,e,t)}),new Wn(n.segments,i)}var eI=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ZE(i[0]))throw new Oe(4003,!1);let r=i.find(Qy);if(r&&r!==s8(i))throw new Oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hue(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new eI(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new eI(t,e,i)}var $p=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function fue(n,e,t){if(n.isAbsolute)return new $p(e,!0,0);if(!t)return new $p(e,!1,NaN);if(t.parent===null)return new $p(t,!0,0);let i=ZE(n.commands[0])?0:1,r=t.segments.length-1+i;return pue(t,r,n.numberOfDoubleDots)}function pue(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Oe(4005,!1);r=i.segments.length}return new $p(i,!1,r-s)}function mue(n){return Qy(n[0])?n[0].outlets:{[$t]:n}}function v8(n,e,t){if(n??=new Wn([],{}),n.segments.length===0&&n.hasChildren())return Ky(n,e,t);let i=gue(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Wn(n.segments.slice(0,i.pathIndex),{});return s.children[$t]=new Wn(n.segments.slice(i.pathIndex),n.children),Ky(s,0,r)}else return i.match&&r.length===0?new Wn(n.segments,{}):i.match&&!n.hasChildren()?Gk(n,e,t):i.match?Ky(n,0,r):Gk(n,e,t)}function Ky(n,e,t){if(t.length===0)return new Wn(n.segments,{});{let i=mue(t),r={};if(Object.keys(i).some(s=>s!==$t)&&n.children[$t]&&n.numberOfChildren===1&&n.children[$t].segments.length===0){let s=Ky(n.children[$t],e,t);return new Wn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=v8(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Wn(n.segments,r)}}function gue(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Qy(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Z6(c,l,o))return s;i+=2}else{if(!Z6(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Gk(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Qy(s)){let c=_ue(s.outlets);return new Wn(i,c)}if(r===0&&ZE(t[0])){let c=n.segments[e];i.push(new Ru(c.path,J6(t[0]))),r++;continue}let o=Qy(s)?s.outlets[$t]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&ZE(a)?(i.push(new Ru(o,J6(a))),r+=2):(i.push(new Ru(o,{})),r++)}return new Wn(i,{})}function _ue(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Gk(new Wn([],{}),0,i))}),e}function J6(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Z6(n,e,t){return n==t.path&&Ga(e,t.parameters)}var Xy="imperative",Ir=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ir||{}),no=class{id;url;constructor(e,t){this.id=e,this.url=t}},Dh=class extends no{type=Ir.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$a=class extends no{urlAfterRedirects;type=Ir.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ms=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ms||{}),Jy=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Jy||{}),Wa=class extends no{reason;code;type=Ir.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},el=class extends no{reason;code;type=Ir.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Kp=class extends no{error;target;type=Ir.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zy=class extends no{urlAfterRedirects;state;type=Ir.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tI=class extends no{urlAfterRedirects;state;type=Ir.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nI=class extends no{urlAfterRedirects;state;shouldActivate;type=Ir.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iI=class extends no{urlAfterRedirects;state;type=Ir.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rI=class extends no{urlAfterRedirects;state;type=Ir.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sI=class{route;type=Ir.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},oI=class{route;type=Ir.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},aI=class{snapshot;type=Ir.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cI=class{snapshot;type=Ir.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lI=class{snapshot;type=Ir.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uI=class{snapshot;type=Ir.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ev=class{},Xp=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yue(n){return!(n instanceof ev)&&!(n instanceof Xp)}function vue(n,e){return n.providers&&!n._injector&&(n._injector=Cy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function oa(n){return n.outlet||$t}function bue(n,e){let t=n.filter(i=>oa(i)===e);return t.push(...n.filter(i=>oa(i)!==e)),t}function Jp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dI=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Jp(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zp(this.rootInjector)}},Zp=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new dI(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(it(ii))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hI=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Wk(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Wk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$k(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return $k(e,this._root).map(t=>t.value)}};function Wk(n,e){if(n===e.value)return e;for(let t of e.children){let i=Wk(n,t);if(i)return i}return null}function $k(n,e){if(n===e.value)return[e];for(let t of e.children){let i=$k(n,t);if(i.length)return i.unshift(e),i}return[]}var to=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Wp(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var tv=class extends hI{snapshot;constructor(e,t){super(e),this.snapshot=t,Jk(this,e)}toString(){return this.snapshot.toString()}};function b8(n){let e=xue(n),t=new zi([new Ru("",{})]),i=new zi({}),r=new zi({}),s=new zi({}),o=new zi(""),a=new tl(t,i,s,o,r,$t,n,e.root);return a.snapshot=e.root,new tv(new to(a,[]),e)}function xue(n){let e={},t={},i={},s=new Ah([],e,i,"",t,$t,n,null,{});return new nv("",new to(s,[]))}var tl=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(pt(l=>l[rv]))??xt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pt(e=>Mh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pt(e=>Mh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fI(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ie(ie({},e.params),n.params),data:ie(ie({},e.data),n.data),resolve:ie(ie(ie(ie({},n.data),e.data),r?.data),n._resolvedData)}:i={params:ie({},n.params),data:ie({},n.data),resolve:ie(ie({},n.data),n._resolvedData??{})},r&&w8(r)&&(i.resolve[rv]=r.title),i}var Ah=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rv]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nv=class extends hI{url;constructor(e,t){super(t),this.url=e,Jk(this,t)}toString(){return x8(this._root)}};function Jk(n,e){e.value._routerState=n,e.children.forEach(t=>Jk(n,t))}function x8(n){let e=n.children.length>0?` { ${n.children.map(x8).join(", ")} } `:"";return`${n.value}${e}`}function Vk(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ga(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ga(e.params,t.params)||n.paramsSubject.next(t.params),Kle(e.url,t.url)||n.urlSubject.next(t.url),Ga(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qk(n,e){let t=Ga(n.params,e.params)&&Jle(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||qk(n.parent,e.parent))}function w8(n){return typeof n.title=="string"||n.title===null}var E8=new Ee(""),ov=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=$t;activateEvents=new vn;deactivateEvents=new vn;attachEvents=new vn;detachEvents=new vn;routerOutletData=i6(void 0,{});parentContexts=H(Zp);location=H(Ms);changeDetector=H(ks);inputBinder=H(_I,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Oe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Oe(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Kk(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hs]})}return n})(),Kk=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===tl?this.route:e===Zp?this.childContexts:e===E8?this.outletData:this.parent.get(e,t)}},_I=new Ee("");var Zk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Sn(0,"router-outlet")},dependencies:[ov],encapsulation:2})}return n})();function eN(n){let e=n.children&&n.children.map(eN),t=e?st(ie({},n),{children:e}):ie({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Zk),t}function wue(n,e,t){let i=iv(n,e._root,t?t._root:void 0);return new tv(i,e)}function iv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Eue(n,e,t);return new to(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>iv(n,a)),o}}let i=Iue(e.value),r=e.children.map(s=>iv(n,s));return new to(i,r)}}function Eue(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return iv(n,i,r);return iv(n,i)})}function Iue(n){return new tl(new zi(n.url),new zi(n.params),new zi(n.queryParams),new zi(n.fragment),new zi(n.data),n.outlet,n.component,n)}var Yp=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},I8="ngNavigationCancelingError";function pI(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ku(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=T8(!1,ms.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function T8(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[I8]=!0,t.cancellationCode=e,t}function Tue(n){return S8(n)&&ku(n.url)}function S8(n){return!!n&&n[I8]}var Sue=(n,e,t,i)=>pt(r=>(new Xk(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Xk=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Vk(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Wp(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Wp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Wp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Wp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new uI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new cI(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Vk(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vk(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},mI=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qp=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Cue(n,e,t){let i=n._root,r=e?e._root:null;return qy(i,r,t,[i.value])}function Aue(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function em(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!HR(n)?n:e.get(n):i}function qy(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Wp(e);return n.children.forEach(o=>{Mue(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yy(a,t.getContext(o),r)),r}function Mue(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Due(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new mI(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qy(n,e,a?a.children:null,i,r):qy(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new qp(a.outlet.component,o))}else o&&Yy(e,a,r),r.canActivateChecks.push(new mI(i)),s.component?qy(n,null,a?a.children:null,i,r):qy(n,null,t,i,r);return r}function Due(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ch(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ch(n.url,e.url)||!Ga(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qk(n,e)||!Ga(n.queryParams,e.queryParams);case"paramsChange":default:return!qk(n,e)}}function Yy(n,e,t){let i=Wp(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Yy(o,e.children.getContext(s),t):Yy(o,null,t):Yy(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qp(e.outlet.component,r)):t.canDeactivateChecks.push(new qp(null,r)):t.canDeactivateChecks.push(new qp(null,r))}function av(n){return typeof n=="function"}function Rue(n){return typeof n=="boolean"}function Pue(n){return n&&av(n.canLoad)}function kue(n){return n&&av(n.canActivate)}function Nue(n){return n&&av(n.canActivateChild)}function Oue(n){return n&&av(n.canDeactivate)}function Lue(n){return n&&av(n.canMatch)}function C8(n){return n instanceof Qd||n?.name==="EmptyError"}var KE=Symbol("INITIAL_VALUE");function Qp(){return bi(n=>xR(n.map(e=>e.pipe(Hi(1),Pc(KE)))).pipe(pt(e=>{for(let t of e)if(t!==!0){if(t===KE)return KE;if(t===!1||Fue(t))return t}return!0}),ni(e=>e!==KE),Hi(1)))}function Fue(n){return ku(n)||n instanceof Yp}function A8(n){return n.aborted?xt(void 0).pipe(Hi(1)):new _t(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function M8(n){return Na(A8(n))}function Vue(n,e){return cs(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?xt(st(ie({},t),{guardsResult:!0})):Uue(o,i,r,n).pipe(cs(a=>a&&Rue(a)?Bue(i,s,n,e):xt(a)),pt(a=>st(ie({},t),{guardsResult:a})))})}function Uue(n,e,t,i){return vi(n).pipe(cs(r=>Wue(r.component,r.route,t,e,i)),Rc(r=>r!==!0,!0))}function Bue(n,e,t,i){return vi(e).pipe(pp(r=>fp(Hue(r.route.parent,i),zue(r.route,i),Gue(n,r.path,t),jue(n,r.route,t))),Rc(r=>r!==!0,!0))}function zue(n,e){return n!==null&&e&&e(new lI(n)),xt(!0)}function Hue(n,e){return n!==null&&e&&e(new aI(n)),xt(!0)}function jue(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return xt(!0);let r=i.map(s=>$_(()=>{let o=Jp(e)??t,a=em(s,o),c=kue(a)?a.canActivate(e,n):Gi(o,()=>a(e,n));return Rh(c).pipe(Rc())}));return xt(r).pipe(Qp())}function Gue(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Aue(o)).filter(o=>o!==null).map(o=>$_(()=>{let a=o.guards.map(c=>{let l=Jp(o.node)??t,u=em(c,l),d=Nue(u)?u.canActivateChild(i,n):Gi(l,()=>u(i,n));return Rh(d).pipe(Rc())});return xt(a).pipe(Qp())}));return xt(s).pipe(Qp())}function Wue(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return xt(!0);let o=s.map(a=>{let c=Jp(e)??r,l=em(a,c),u=Oue(l)?l.canDeactivate(n,e,t,i):Gi(c,()=>l(n,e,t,i));return Rh(u).pipe(Rc())});return xt(o).pipe(Qp())}function $ue(n,e,t,i,r){let s=e.canLoad;if(s===void 0||s.length===0)return xt(!0);let o=s.map(a=>{let c=em(a,n),l=Pue(c)?c.canLoad(e,t):Gi(n,()=>c(e,t)),u=Rh(l);return r?u.pipe(M8(r)):u});return xt(o).pipe(Qp(),D8(i))}function D8(n){return Xd(ji(e=>{if(typeof e!="boolean")throw pI(n,e)}),pt(e=>e===!0))}function que(n,e,t,i,r){let s=e.canMatch;if(!s||s.length===0)return xt(!0);let o=s.map(a=>{let c=em(a,n),l=Lue(c)?c.canMatch(e,t):Gi(n,()=>c(e,t)),u=Rh(l);return r?u.pipe(M8(r)):u});return xt(o).pipe(Qp(),D8(i))}var Sh=class R8 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,R8.prototype)}},Yk=class P8 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,P8.prototype)}};function Kue(n){throw new Oe(4e3,!1)}function Xue(n){throw T8(!1,ms.GuardRejected)}var Yue=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[$t])throw Kue(`${e.redirectTo}`);r=r.children[$t]}}async applyRedirectCommands(e,t,i,r,s){let o=await Que(t,r,s);if(o instanceof aa)throw new Yk(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,i);if(o[0]==="/")throw new Yk(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new aa(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new Wn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Oe(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function Que(n,e,t){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:d}=e;return JE(Rh(Gi(t,()=>i({params:l,data:u,queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,title:d}))))}var Qk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jue(n,e,t,i,r,s){let o=k8(n,e,t);return o.matched?(i=vue(e,i),que(i,e,t,r,s).pipe(pt(a=>a===!0?o:ie({},Qk)))):xt(o)}function k8(n,e,t){if(e.path==="**")return Zue(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ie({},Qk):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||i8)(t,n,e);if(!r)return ie({},Qk);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?ie(ie({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Zue(n){return{matched:!0,parameters:n.length>0?s8(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function e8(n,e,t,i){return t.length>0&&nde(n,t,i)?{segmentGroup:new Wn(e,tde(i,new Wn(t,n.children))),slicedSegments:[]}:t.length===0&&ide(n,t,i)?{segmentGroup:new Wn(n.segments,ede(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Wn(n.segments,n.children),slicedSegments:t}}function ede(n,e,t,i){let r={};for(let s of t)if(yI(n,e,s)&&!i[oa(s)]){let o=new Wn([],{});r[oa(s)]=o}return ie(ie({},i),r)}function tde(n,e){let t={};t[$t]=e;for(let i of n)if(i.path===""&&oa(i)!==$t){let r=new Wn([],{});t[oa(i)]=r}return t}function nde(n,e,t){return t.some(i=>yI(n,e,i)&&oa(i)!==$t)}function ide(n,e,t){return t.some(i=>yI(n,e,i))}function yI(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rde(n,e,t){return e.length===0&&!n.children[t]}var sde=class{};async function ode(n,e,t,i,r,s,o="emptyOnly",a){return new cde(n,e,t,i,r,o,s,a).recognize()}var ade=31,cde=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Yue(this.urlSerializer,this.urlTree)}noMatchError(e){return new Oe(4002,`'${e.segmentGroup}'`)}async recognize(){let e=e8(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:i}=await this.match(e),r=new to(i,t),s=new nv("",r),o=m8(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Ah([],Object.freeze({}),Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$t,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,$t,t),rootSnapshot:t}}catch(i){if(i instanceof Yk)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Sh?this.noMatchError(i):i}}async processSegmentGroup(e,t,i,r,s){if(i.segments.length===0&&i.hasChildren())return this.processChildren(e,t,i,s);let o=await this.processSegment(e,t,i,i.segments,r,!0,s);return o instanceof to?[o]:[]}async processChildren(e,t,i,r){let s=[];for(let c of Object.keys(i.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=i.children[c],u=bue(t,c),d=await this.processSegmentGroup(e,u,l,c,r);o.push(...d)}let a=N8(o);return lde(a),a}async processSegment(e,t,i,r,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a)}catch(l){if(l instanceof Sh||C8(l))continue;throw l}if(rde(i,r,s))return new sde;throw new Sh(i)}async processSegmentAgainstRoute(e,t,i,r,s,o,a,c){if(oa(i)!==o&&(o===$t||!yI(r,s,i)))throw new Sh(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,r,i,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c);throw new Sh(r)}async expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=k8(t,r,s);if(!c)throw new Sh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ade&&(this.allowRedirects=!1));let p=new Ah(s,l,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,t8(r),oa(r),r.component??r._loadedComponent??null,r,n8(r)),_=fI(p,a,this.paramsInheritanceStrategy);if(p.params=Object.freeze(_.params),p.data=Object.freeze(_.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let b=await this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,e),g=await this.applyRedirects.lineralizeSegments(r,b);return this.processSegment(e,i,t,g.concat(h),o,!1,a)}async matchSegmentAgainstRoute(e,t,i,r,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await JE(Jue(t,i,r,e,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(t.children={}),!a?.matched)throw new Sh(t);e=i._injector??e;let{routes:c}=await this.getChildConfig(e,i,r),l=i._loadedInjector??e,{parameters:u,consumedSegments:d,remainingSegments:h}=a,p=new Ah(d,u,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,t8(i),oa(i),i.component??i._loadedComponent??null,i,n8(i)),_=fI(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(_.params),p.data=Object.freeze(_.data);let{segmentGroup:b,slicedSegments:g}=e8(t,d,h,c);if(g.length===0&&b.hasChildren()){let R=await this.processChildren(l,c,b,p);return new to(p,R)}if(c.length===0&&g.length===0)return new to(p,[]);let v=oa(i)===s,P=await this.processSegment(l,c,b,g,v?$t:s,!0,p);return new to(p,P instanceof to?[P]:[])}async getChildConfig(e,t,i){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await JE($ue(e,t,i,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw Xue(t)}return{routes:[],injector:e}}};function lde(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}function ude(n){let e=n.value.routeConfig;return e&&e.path===""}function N8(n){let e=[],t=new Set;for(let i of n){if(!ude(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=N8(i.children);e.push(new to(i.value,r))}return e.filter(i=>!t.has(i))}function t8(n){return n.data||{}}function n8(n){return n.resolve||{}}var dde=new Ee("",{factory:()=>ode});function hde(n,e,t,i,r,s,o){let a=n.get(dde);return cs(c=>xt(c).pipe(bi(l=>a(n,e,t,i,l.extractedUrl,r,s,o)),pt(({state:l,tree:u})=>st(ie({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function fde(n,e){return cs(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return xt(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of O8(c))o.add(l);let a=0;return vi(o).pipe(pp(c=>s.has(c)?pde(c,i,n,e):(c.data=fI(c,c.parent,n).resolve,xt(void 0))),ji(()=>a++),ow(1),cs(c=>a===o.size?xt(t):Kr))})}function O8(n){let e=n.children.map(t=>O8(t)).flat();return[n,...e]}function pde(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!w8(r)&&(s[rv]=r.title),$_(()=>(n.data=fI(n,n.parent,t).resolve,mde(s,n,e,i).pipe(pt(o=>(n._resolvedData=o,n.data=ie(ie({},n.data),o),null)))))}function mde(n,e,t,i){let r=zk(n);if(r.length===0)return xt({});let s={};return vi(r).pipe(cs(o=>gde(n[o],e,t,i).pipe(Rc(),ji(a=>{if(a instanceof Yp)throw pI(new Pu,a);s[o]=a}))),ow(1),pt(()=>s),Zd(o=>C8(o)?Kr:G_(o)))}function gde(n,e,t,i){let r=Jp(e)??i,s=em(n,r),o=s.resolve?s.resolve(e,t):Gi(r,()=>s(e,t));return Rh(o)}function Uk(n){return bi(e=>{let t=n(e);return t?vi(t).pipe(pt(()=>e)):xt(e)})}var tN=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===$t);return i}getResolvedTitleForRoute(t){return t.data[rv]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(L8),providedIn:"root"})}return n})(),L8=(()=>{class n extends tN{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(it(q6))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tm=new Ee("",{factory:()=>({})}),cv=new Ee(""),F8=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(ak);async loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await o8(Gi(t,()=>i.loadComponent())),o=await B8(U8(s));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o,o}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await V8(i,this.compiler,t,this.onLoadEndListener);return i._loadedRoutes=s.routes,i._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function V8(n,e,t,i){let r=await o8(Gi(t,()=>n.loadChildren())),s=await B8(U8(r)),o;s instanceof mE||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),i&&i(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(cv,[],{optional:!0,self:!0}).flat()),{routes:c.map(eN),injector:a}}function _de(n){return n&&typeof n=="object"&&"default"in n}function U8(n){return _de(n)?n.default:n}async function B8(n){return n}var vI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(yde),providedIn:"root"})}return n})(),yde=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z8=new Ee("");var vde=()=>{},H8=new Ee(""),j8=(()=>{class n{currentNavigation=jn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=jn(null,{});events=new Dt;transitionAbortWithErrorSubject=new Dt;configLoader=H(F8);environmentInjector=H(ii);destroyRef=H(Ts);urlSerializer=H(sv);rootContexts=H(Zp);location=H(Mu);inputBindingEnabled=H(_I,{optional:!0})!==null;titleStrategy=H(tN);options=H(tm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(vI);createViewTransition=H(z8,{optional:!0});navigationErrorHandler=H(H8,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>xt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new sI(r)),i=r=>this.events.next(new oI(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;Ci(()=>{this.transitions?.next(st(ie({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(t){return this.transitions=new zi(null),this.transitions.pipe(ni(i=>i!==null),bi(i=>{let r=!1,s=new AbortController;return xt(i).pipe(bi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ms.SupersededByNewNavigation),Kr;this.currentTransition=i;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?st(ie({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new el(o.id,this.urlSerializer.serialize(o.rawUrl),"",Jy.IgnoredSameUrlNavigation)),o.resolve(!1),Kr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return xt(o).pipe(bi(u=>(this.events.next(new Dh(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Kr:Promise.resolve(u))),hde(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),ji(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new Zy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:p,extras:_}=o,b=new Dh(u,this.urlSerializer.serialize(d),h,p);this.events.next(b);let g=b8(this.rootComponentType).snapshot;return this.currentTransition=i=st(ie({},o),{targetSnapshot:g,urlAfterRedirects:d,extras:st(ie({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(v=>(v.finalUrl=d,v)),xt(i)}else return this.events.next(new el(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Jy.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Kr}),ji(o=>{let a=new tI(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),pt(o=>(this.currentTransition=i=st(ie({},o),{guards:Cue(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),Vue(this.environmentInjector,o=>this.events.next(o)),ji(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw pI(this.urlSerializer,o.guardsResult);let a=new nI(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ni(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ms.GuardRejected),!1)),Uk(o=>{if(o.guards.canActivateChecks.length!==0)return xt(o).pipe(ji(a=>{let c=new iI(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),bi(a=>{let c=!1;return xt(a).pipe(fde(this.paramsInheritanceStrategy,this.environmentInjector),ji({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ms.NoDataFromResolver)}}))}),ji(a=>{let c=new rI(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Uk(o=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=Jp(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(o.targetSnapshot.root);return c.length===0?xt(o):vi(Promise.all(c).then(()=>o))}),Uk(()=>this.afterPreactivation()),bi(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?vi(c).pipe(pt(()=>i)):xt(i)}),pt(o=>{let a=wue(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=st(ie({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),i}),ji(()=>{this.events.next(new ev)}),Sue(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Hi(1),Na(A8(s.signal).pipe(ni(()=>!r&&!i.targetRouterState),ji(()=>{this.cancelNavigationTransition(i,s.signal.reason+"",ms.Aborted)}))),ji({next:o=>{r=!0,this.currentNavigation.update(a=>(a.abort=vde,a)),this.lastSuccessfulNavigation.set(Ci(this.currentNavigation)),this.events.next(new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Na(this.transitionAbortWithErrorSubject.pipe(ji(o=>{throw o}))),th(()=>{s.abort(),r||this.cancelNavigationTransition(i,"",ms.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Zd(o=>{if(this.destroyed)return i.resolve(!1),Kr;if(r=!0,S8(o))this.events.next(new Wa(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),Tue(o)?this.events.next(new Xp(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Kp(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let c=Gi(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Yp){let{message:l,cancellationCode:u}=pI(this.urlSerializer,c);this.events.next(new Wa(i.id,this.urlSerializer.serialize(i.extractedUrl),l,u)),this.events.next(new Xp(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return Kr}))}))}cancelNavigationTransition(t,i,r){let s=new Wa(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ci(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bde(n){return n!==Xy}var G8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(xde),providedIn:"root"})}return n})(),gI=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xde=(()=>{class n extends gI{static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nN=(()=>{class n{urlSerializer=H(sv);options=H(tm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(Mu);urlHandlingStrategy=H(vI);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new aa;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof aa?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=b8(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(W8),providedIn:"root"})}return n})(),W8=(()=>{class n extends nN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Dh?this.updateStateMemento():t instanceof el?this.commitTransition(i):t instanceof Zy?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ev?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Wa&&t.code!==ms.SupersededByNewNavigation&&t.code!==ms.Redirect?this.restoreHistory(i):t instanceof Kp?this.restoreHistory(i,!0):t instanceof $a&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=ie(ie({},o),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=ie(ie({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iN(n,e){n.events.pipe(ni(t=>t instanceof $a||t instanceof Wa||t instanceof Kp||t instanceof el),pt(t=>t instanceof $a||t instanceof el?0:(t instanceof Wa?t.code===ms.Redirect||t.code===ms.SupersededByNewNavigation:!1)?2:1),ni(t=>t!==2),Hi(1)).subscribe(()=>{e()})}var wde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ede={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(vE);stateManager=H(nN);options=H(tm,{optional:!0})||{};pendingTasks=H(Uc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(j8);urlSerializer=H(sv);location=H(Mu);urlHandlingStrategy=H(vI);injector=H(ii);_events=new Dt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(G8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(cv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(_I,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=Ci(this.navigationTransitions.currentNavigation);if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Wa&&i.code!==ms.Redirect&&i.code!==ms.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof $a)this.navigated=!0;else if(i instanceof Xp){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bde(r.source)},o);this.scheduleNavigation(a,Xy,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}yue(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=ie({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s).catch(c=>{this.disposed||this.injector.get(Ss)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ci(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eN),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ie(ie({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=g8(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return _8(d,t,u,l??null,this.urlSerializer)}navigateByUrl(t,i={skipLocationChange:!1}){let r=ku(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Xy,null,i)}navigate(t,i={skipLocationChange:!1}){return Ide(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(La(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=ie({},wde):i===!1?r=ie({},Ede):r=i,ku(t))return X6(this.currentUrlTree,t,r);let s=this.parseUrl(t);return X6(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return iN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ide(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Oe(4008,!1)}var nm=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=jn(null,{});get href(){return Ci(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Dt;applicationErrorHandler=H(Ss);options=H(tm,{optional:!0});constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(H(new Bp("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof $a&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ku(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ku(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(mt(Vr),mt(tl),xy("tabindex"),mt(Lr),mt(nn),mt(zp))};static \u0275dir=wt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&Nn("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Wi("href",r.reactiveHref(),DP)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ki],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ki],replaceUrl:[2,"replaceUrl","replaceUrl",ki],routerLink:"routerLink"},features:[hs]})}return n})();var Sde=new Ee("");function rN(n,...e){return vr([{provide:cv,multi:!0,useValue:n},[],{provide:tl,useFactory:Cde},{provide:xE,multi:!0,useFactory:Ade},e.map(t=>t.\u0275providers)])}function Cde(){return H(Vr).routerState.root}function Ade(){let n=H(Qt);return e=>{let t=n.get(wr);if(e!==t.components[0])return;let i=n.get(Vr),r=n.get(Mde);n.get(Dde)===1&&i.initialNavigation(),n.get(Rde,null,{optional:!0})?.setUpPreloading(),n.get(Sde,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Mde=new Ee("",{factory:()=>new Dt}),Dde=new Ee("",{factory:()=>1});var Rde=new Ee("");var q8=()=>{};var Y8=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Pde=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(h=64)),i.push(t[u],t[d],t[h],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Y8(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Pde(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new oN;let h=s<<2|a>>4;if(i.push(h),l!==64){let p=a<<4&240|l>>2;if(i.push(p),d!==64){let _=l<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},oN=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kde=function(n){let e=Y8(n);return bI.encodeByteArray(e,!0)},uv=function(n){return kde(n).replace(/\./g,"")},xI=function(n){try{return bI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Nde=()=>cN().__FIREBASE_DEFAULTS__,Ode=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Lde=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xI(n[1]);return e&&JSON.parse(e)},wI=()=>{try{return q8()||Nde()||Ode()||Lde()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lN=n=>{var e,t;return(t=(e=wI())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Q8=n=>{let e=lN(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},uN=()=>{var n;return(n=wI())===null||n===void 0?void 0:n.config},dN=n=>{var e;return(e=wI())===null||e===void 0?void 0:e[`_${n}`]};var Ph=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Nu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EI(n){return(await fetch(n,{credentials:"include"})).ok}function J8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[uv(JSON.stringify(t)),uv(JSON.stringify(o)),""].join(".")}var lv={};function Fde(){let n={prod:[],emulator:[]};for(let e of Object.keys(lv))lv[e]?n.emulator.push(e):n.prod.push(e);return n}function Vde(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var K8=!1;function II(n,e){if(typeof window>"u"||typeof document>"u"||!Nu(window.location.host)||lv[n]===e||lv[n]||K8)return;lv[n]=e;function t(h){return`__firebase__banner__${h}`}let i="__firebase__banner",s=Fde().prod.length>0;function o(){let h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{K8=!0,o()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=Vde(i),p=t("text"),_=document.getElementById(p)||document.createElement("span"),b=t("learnmore"),g=document.getElementById(b)||document.createElement("a"),v=t("preprendIcon"),P=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let R=h.element;a(R),u(g,b);let N=l();c(P,v),R.append(P,_,g,N),document.body.appendChild(R)}s?(_.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function Ude(){var n;let e=(n=wI())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t9(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function n9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i9(){let n=Tr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function r9(){return!Ude()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function s9(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Bde="FirebaseError",io=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Bde,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ca.prototype.create)}},ca=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?zde(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new io(r,a,i)}};function zde(n,e){return n.replace(Hde,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Hde=/\{\$([^}]+)}/g;function o9(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qa(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(X8(s)&&X8(o)){if(!qa(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function X8(n){return n!==null&&typeof n=="object"}function im(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function a9(n,e){let t=new aN(n,e);return t.subscribe.bind(t)}var aN=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jde(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=sN),r.error===void 0&&(r.error=sN),r.complete===void 0&&(r.complete=sN);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jde(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sN(){}var PWe=14400*1e3;function er(n){return n&&n._delegate?n._delegate:n}var gs=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var kh="[DEFAULT]";var hN=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Ph;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wde(e))try{this.getOrInitializeService({instanceIdentifier:kh})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=kh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kh){return this.instances.has(e)}getOptions(e=kh){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gde(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=kh){return this.component?this.component.multipleInstances?e:kh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gde(n){return n===kh?void 0:n}function Wde(n){return n.instantiationMode==="EAGER"}var TI=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new hN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $de=[],pn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(pn||{}),qde={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},Kde=pn.INFO,Xde={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},Yde=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Xde[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ka=class{constructor(e){this.name=e,this._logLevel=Kde,this._logHandler=Yde,this._userLogHandler=null,$de.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...e),this._logHandler(this,pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...e),this._logHandler(this,pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pn.INFO,...e),this._logHandler(this,pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pn.WARN,...e),this._logHandler(this,pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...e),this._logHandler(this,pn.ERROR,...e)}};var Qde=(n,e)=>e.some(t=>n instanceof t),c9,l9;function Jde(){return c9||(c9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zde(){return l9||(l9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var u9=new WeakMap,pN=new WeakMap,d9=new WeakMap,fN=new WeakMap,gN=new WeakMap;function ehe(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Xa(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&u9.set(t,n)}).catch(()=>{}),gN.set(e,n),e}function the(n){if(pN.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});pN.set(n,e)}var mN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pN.get(n);if(e==="objectStoreNames")return n.objectStoreNames||d9.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function h9(n){mN=n(mN)}function nhe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(SI(this),e,...t);return d9.set(i,e.sort?e.sort():[e]),Xa(i)}:Zde().includes(n)?function(...e){return n.apply(SI(this),e),Xa(u9.get(this))}:function(...e){return Xa(n.apply(SI(this),e))}}function ihe(n){return typeof n=="function"?nhe(n):(n instanceof IDBTransaction&&the(n),Qde(n,Jde())?new Proxy(n,mN):n)}function Xa(n){if(n instanceof IDBRequest)return ehe(n);if(fN.has(n))return fN.get(n);let e=ihe(n);return e!==n&&(fN.set(n,e),gN.set(e,n)),e}var SI=n=>gN.get(n);function CI(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=Xa(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Xa(o.result),c.oldVersion,c.newVersion,Xa(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var rhe=["get","getKey","getAll","getAllKeys","count"],she=["put","add","delete","clear"],_N=new Map;function f9(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_N.get(e))return _N.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=she.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||rhe.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),r&&c.done]))[0]};return _N.set(e,s),s}h9(n=>st(ie({},n),{get:(e,t,i)=>f9(e,t)||n.get(e,t,i),has:(e,t)=>!!f9(e,t)||n.has(e,t)}));var vN=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ohe(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function ohe(n){let e=n.getComponent();return e?.type==="VERSION"}var bN="@firebase/app",p9="0.13.2";var nl=new Ka("@firebase/app"),ahe="@firebase/app-compat",che="@firebase/analytics-compat",lhe="@firebase/analytics",uhe="@firebase/app-check-compat",dhe="@firebase/app-check",hhe="@firebase/auth",fhe="@firebase/auth-compat",phe="@firebase/database",mhe="@firebase/data-connect",ghe="@firebase/database-compat",_he="@firebase/functions",yhe="@firebase/functions-compat",vhe="@firebase/installations",bhe="@firebase/installations-compat",xhe="@firebase/messaging",whe="@firebase/messaging-compat",Ehe="@firebase/performance",Ihe="@firebase/performance-compat",The="@firebase/remote-config",She="@firebase/remote-config-compat",Che="@firebase/storage",Ahe="@firebase/storage-compat",Mhe="@firebase/firestore",Dhe="@firebase/ai",Rhe="@firebase/firestore-compat",Phe="firebase",khe="11.10.0";var xN="[DEFAULT]",Nhe={[bN]:"fire-core",[ahe]:"fire-core-compat",[lhe]:"fire-analytics",[che]:"fire-analytics-compat",[dhe]:"fire-app-check",[uhe]:"fire-app-check-compat",[hhe]:"fire-auth",[fhe]:"fire-auth-compat",[phe]:"fire-rtdb",[mhe]:"fire-data-connect",[ghe]:"fire-rtdb-compat",[_he]:"fire-fn",[yhe]:"fire-fn-compat",[vhe]:"fire-iid",[bhe]:"fire-iid-compat",[xhe]:"fire-fcm",[whe]:"fire-fcm-compat",[Ehe]:"fire-perf",[Ihe]:"fire-perf-compat",[The]:"fire-rc",[She]:"fire-rc-compat",[Che]:"fire-gcs",[Ahe]:"fire-gcs-compat",[Mhe]:"fire-fst",[Rhe]:"fire-fst-compat",[Dhe]:"fire-vertex","fire-js":"fire-js",[Phe]:"fire-js-all"};var hv=new Map,Ohe=new Map,wN=new Map;function m9(n,e){try{n.container.addComponent(e)}catch(t){nl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function la(n){let e=n.name;if(wN.has(e))return nl.debug(`There were multiple attempts to register component ${e}.`),!1;wN.set(e,n);for(let t of hv.values())m9(t,n);for(let t of Ohe.values())m9(t,n);return!0}function rm(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ro(n){return n==null?!1:n.settings!==void 0}var Lhe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ou=new ca("app","Firebase",Lhe);var EN=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ou.create("app-deleted",{appName:this._name})}};var Lu=khe;function SN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:xN,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Ou.create("bad-app-name",{appName:String(r)});if(t||(t=uN()),!t)throw Ou.create("no-options");let s=hv.get(r);if(s){if(qa(t,s.options)&&qa(i,s.config))return s;throw Ou.create("duplicate-app",{appName:r})}let o=new TI(r);for(let c of wN.values())o.addComponent(c);let a=new EN(t,i,o);return hv.set(r,a),a}function Nh(n=xN){let e=hv.get(n);if(!e&&n===xN&&uN())return SN();if(!e)throw Ou.create("no-app",{appName:n});return e}function AI(){return Array.from(hv.values())}function Ai(n,e,t){var i;let r=(i=Nhe[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nl.warn(a.join(" "));return}la(new gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Fhe="firebase-heartbeat-database",Vhe=1,fv="firebase-heartbeat-store",yN=null;function v9(){return yN||(yN=CI(Fhe,Vhe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fv)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ou.create("idb-open",{originalErrorMessage:n.message})})),yN}async function Uhe(n){try{let t=(await v9()).transaction(fv),i=await t.objectStore(fv).get(b9(n));return await t.done,i}catch(e){if(e instanceof io)nl.warn(e.message);else{let t=Ou.create("idb-get",{originalErrorMessage:e?.message});nl.warn(t.message)}}}async function g9(n,e){try{let i=(await v9()).transaction(fv,"readwrite");await i.objectStore(fv).put(e,b9(n)),await i.done}catch(t){if(t instanceof io)nl.warn(t.message);else{let i=Ou.create("idb-set",{originalErrorMessage:t?.message});nl.warn(i.message)}}}function b9(n){return`${n.name}!${n.options.appId}`}var Bhe=1024,zhe=30,IN=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new TN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_9();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>zhe){let o=jhe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){nl.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=_9(),{heartbeatsToSend:i,unsentEntries:r}=Hhe(this._heartbeatsCache.heartbeats),s=uv(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return nl.warn(t),""}}};function _9(){return new Date().toISOString().substring(0,10)}function Hhe(n,e=Bhe){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),y9(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),y9(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var TN=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?s9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Uhe(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return g9(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return g9(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function y9(n){return uv(JSON.stringify({version:2,heartbeats:n})).length}function jhe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Ghe(n){la(new gs("platform-logger",e=>new vN(e),"PRIVATE")),la(new gs("heartbeat",e=>new IN(e),"PRIVATE")),Ai(bN,p9,n),Ai(bN,p9,"esm2017"),Ai("fire-js","")}Ghe("");var Whe="firebase",$he="11.10.0";Ai(Whe,$he,"app");function x9(n){n===void 0&&(n=H(Qt));let e=n.get(Tu);return t=>new _t(i=>{let r=e.add(),s=!1;function o(){s||(r(),s=!0)}let a=t.subscribe({next:c=>{i.next(c),o()},complete:()=>{i.complete(),o()},error:c=>{i.error(c),o()}});return a.add(()=>{i.unsubscribe(),o()}),a})}var Fu=new pu("ANGULARFIRE2_VERSION");function pv(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var om=(n,e)=>{let t=e?[e]:AI(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},sm=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(sm||{}),w9=Ny()&&typeof Zone<"u"?sm.WARN:sm.SILENT;var MI=class{zone;delegate;constructor(e,t=vR){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r?r.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,i)}},Vu=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=H(St);this.outsideAngular=t.runOutsideAngular(()=>new MI(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new MI(typeof Zone>"u"?void 0:Zone.current,du))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E9=!1;function qhe(n,e){!E9&&(w9>sm.SILENT||Ny())&&(E9=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),w9>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Khe(n){let e=H(St,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Oh(n){let e=H(St,{optional:!0});return e?e.run(()=>n()):n()}var Xhe=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),Gi(t,()=>Oh(()=>n.apply(void 0,i)))),wi=(n,e,t)=>(t||=e?sm.WARN:sm.VERBOSE,function(){let i,r=arguments,s,o,a;try{s=H(Vu),o=H(Tu),a=H(ii)}catch{return qhe(n,t),n.apply(this,r)}for(let l=0;l<arguments.length;l++)typeof r[l]=="function"&&(e&&(i||=Oh(()=>o.add())),r[l]=Xhe(r[l],i,a));let c=Khe(()=>n.apply(this,r));return e?c instanceof _t?c.pipe(fu(s.outsideAngular),hu(s.insideAngular),x9(a)):c instanceof Promise?Oh(()=>{let l=o.add();return new Promise((u,d)=>{c.then(h=>Gi(a,()=>Oh(()=>u(h))),h=>Gi(a,()=>Oh(()=>d(h)))).finally(l)})}):typeof c=="function"&&i?function(){return setTimeout(i,0),c.apply(this,arguments)}:Oh(()=>c):c instanceof _t?c.pipe(fu(s.outsideAngular),hu(s.insideAngular)):Oh(()=>c)});var il=class{constructor(e){return e}},Lh=class{constructor(){return AI()}};function Yhe(n){return n&&n.length===1?n[0]:new il(Nh())}var CN=new Ee("angularfire2._apps"),Qhe={provide:il,useFactory:Yhe,deps:[[new Cs,CN]]},Jhe={provide:Lh,deps:[[new Cs,CN]]};function Zhe(n){return(e,t)=>{let i=t.get(jc);Ai("angularfire",Fu.full,"core"),Ai("angularfire",Fu.full,"app"),Ai("angular",BR.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new il(r)}}function I9(n,...e){return vr([Qhe,Jhe,{provide:CN,useFactory:Zhe(n),multi:!0,deps:[St,Qt,Vu,...e]}])}var T9=wi(SN,!0);var efe=new Map,tfe={activated:!1,tokenObservers:[]},nfe={initialized:!1,enabled:!1};function ua(n){return efe.get(n)||Object.assign({},tfe)}function M9(){return nfe}var ife="https://content-firebaseappcheck.googleapis.com/v1";var rfe="exchangeDebugToken",S9={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},P$e=1440*60*1e3;var DN=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ph,this.pending.promise.catch(t=>{}),await sfe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ph,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sfe(n){return new Promise(e=>{setTimeout(e,n)})}var ofe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Uu=new ca("appCheck","AppCheck",ofe);function D9(n){if(!ua(n).activated)throw Uu.create("use-before-activation",{appName:n.name})}async function R9({url:n,body:e},t){let i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){let d=await r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}let s={method:"POST",body:JSON.stringify(e),headers:i},o;try{o=await fetch(n,s)}catch(d){throw Uu.create("fetch-network-error",{originalErrorMessage:d?.message})}if(o.status!==200)throw Uu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Uu.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Uu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function P9(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${ife}/projects/${t}/apps/${i}:${rfe}?key=${r}`,body:{debug_token:e}}}var afe="firebase-app-check-database",cfe=1,RN="firebase-app-check-store";var DI=null;function lfe(){return DI||(DI=new Promise((n,e)=>{try{let t=indexedDB.open(afe,cfe);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Uu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(RN,{keyPath:"compositeKey"})}}}catch(t){e(Uu.create("storage-open",{originalErrorMessage:t?.message}))}}),DI)}function ufe(n,e){return dfe(hfe(n),e)}async function dfe(n,e){let i=(await lfe()).transaction(RN,"readwrite"),s=i.objectStore(RN).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(Uu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function hfe(n){return`${n.options.appId}-${n.name}`}var mv=new Ka("@firebase/app-check");function AN(n,e){return dv()?ufe(n,e).catch(t=>{mv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function k9(){return M9().enabled}async function N9(){let n=M9();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var ffe={error:"UNKNOWN_ERROR"};function pfe(n){return bI.encodeString(JSON.stringify(n),!1)}async function PN(n,e=!1,t=!1){let i=n.app;D9(i);let r=ua(i),s=r.token,o;if(s&&!gv(s)&&(r.token=void 0,s=void 0),!s){let l=await r.cachedTokenPromise;l&&(gv(l)?s=l:await AN(i,void 0))}if(!e&&s&&gv(s))return{token:s.token};let a=!1;if(k9())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=R9(P9(i,await N9()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let l=await r.exchangeTokenPromise;return await AN(i,l),r.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mv.warn(l.message):t&&mv.error(l),MN(l)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),s=await ua(i).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mv.warn(l.message):t&&mv.error(l),o=l}let c;return s?o?gv(s)?c={token:s.token,internalError:o}:c=MN(o):(c={token:s.token},r.token=s,await AN(i,s)):c=MN(o),a&&yfe(i,c),c}async function mfe(n){let e=n.app;D9(e);let{provider:t}=ua(e);if(k9()){let i=await N9(),{token:r}=await R9(P9(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=await t.getToken();return{token:i}}}function gfe(n,e,t,i){let{app:r}=n,s=ua(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&gv(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),C9(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>C9(n))}function O9(n,e){let t=ua(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function C9(n){let{app:e}=n,t=ua(e),i=t.tokenRefresher;i||(i=_fe(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function _fe(n){let{app:e}=n;return new DN(async()=>{let t=ua(e),i;if(t.token?i=await PN(n,!0):i=await PN(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let t=ua(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},S9.RETRIAL_MIN_WAIT,S9.RETRIAL_MAX_WAIT)}function yfe(n,e){let t=ua(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function gv(n){return n.expireTimeMillis-Date.now()>0}function MN(n){return{token:pfe(ffe),error:n}}var kN=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ua(this.app);for(let t of e)O9(this.app,t.next);return Promise.resolve()}};function vfe(n,e){return new kN(n,e)}function bfe(n){return{getToken:e=>PN(n,e),getLimitedUseToken:()=>mfe(n),addTokenListener:e=>gfe(n,"INTERNAL",e),removeTokenListener:e=>O9(n.app,e)}}var xfe="@firebase/app-check",wfe="0.10.1";var Efe="app-check",A9="app-check-internal";function Ife(){la(new gs(Efe,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return vfe(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(A9).initialize()})),la(new gs(A9,n=>{let e=n.getProvider("app-check").getImmediate();return bfe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ai(xfe,wfe)}Ife();var Tfe="app-check";var am=class{constructor(){return om(Tfe)}};var Sfe=["localhost","0.0.0.0","127.0.0.1"],G$e=typeof window<"u"&&Sfe.includes(window.location.hostname);var L9=()=>{};var F9=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Cfe=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},V9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(h=64)),i.push(t[u],t[d],t[h],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(F9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Cfe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new ON;let h=s<<2|a>>4;if(i.push(h),l!==64){let p=a<<4&240|l>>2;if(i.push(p),d!==64){let _=l<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ON=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Afe=function(n){let e=F9(n);return V9.encodeByteArray(e,!0)},FN=function(n){return Afe(n).replace(/\./g,"")},RI=function(n){try{return V9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function U9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Mfe=()=>U9().__FIREBASE_DEFAULTS__,Dfe=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Rfe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&RI(n[1]);return e&&JSON.parse(e)},B9=()=>{try{return L9()||Mfe()||Dfe()||Rfe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var z9=n=>B9()?.[`_${n}`];function _v(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function so(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(so())}function Pfe(){let n=B9()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G9(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function W9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $9(){return!Pfe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VN(){try{return typeof indexedDB=="object"}catch{return!1}}function q9(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var kfe="FirebaseError",Co=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kfe,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}},rl=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Nfe(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Co(r,a,i)}};function Nfe(n,e){return n.replace(Ofe,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Ofe=/\{\$([^}]+)}/g;function UN(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function K9(n,e){let t=new LN(n,e);return t.subscribe.bind(t)}var LN=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Lfe(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=NN),r.error===void 0&&(r.error=NN),r.complete===void 0&&(r.complete=NN);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Lfe(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function NN(){}var X$e=14400*1e3;function Bu(n){return n&&n._delegate?n._delegate:n}var da=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ffe=[],mn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(mn||{}),Vfe={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},Ufe=mn.INFO,Bfe={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},zfe=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Bfe[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zu=class{constructor(e){this.name=e,this._logLevel=Ufe,this._logHandler=zfe,this._userLogHandler=null,Ffe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}};var zN=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hfe(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Hfe(n){return n.getComponent()?.type==="VERSION"}var HN="@firebase/app",X9="0.14.6";var ol=new zu("@firebase/app"),jfe="@firebase/app-compat",Gfe="@firebase/analytics-compat",Wfe="@firebase/analytics",$fe="@firebase/app-check-compat",qfe="@firebase/app-check",Kfe="@firebase/auth",Xfe="@firebase/auth-compat",Yfe="@firebase/database",Qfe="@firebase/data-connect",Jfe="@firebase/database-compat",Zfe="@firebase/functions",epe="@firebase/functions-compat",tpe="@firebase/installations",npe="@firebase/installations-compat",ipe="@firebase/messaging",rpe="@firebase/messaging-compat",spe="@firebase/performance",ope="@firebase/performance-compat",ape="@firebase/remote-config",cpe="@firebase/remote-config-compat",lpe="@firebase/storage",upe="@firebase/storage-compat",dpe="@firebase/firestore",hpe="@firebase/ai",fpe="@firebase/firestore-compat",ppe="firebase",mpe="12.6.0";var gpe={[HN]:"fire-core",[jfe]:"fire-core-compat",[Wfe]:"fire-analytics",[Gfe]:"fire-analytics-compat",[qfe]:"fire-app-check",[$fe]:"fire-app-check-compat",[Kfe]:"fire-auth",[Xfe]:"fire-auth-compat",[Yfe]:"fire-rtdb",[Qfe]:"fire-data-connect",[Jfe]:"fire-rtdb-compat",[Zfe]:"fire-fn",[epe]:"fire-fn-compat",[tpe]:"fire-iid",[npe]:"fire-iid-compat",[ipe]:"fire-fcm",[rpe]:"fire-fcm-compat",[spe]:"fire-perf",[ope]:"fire-perf-compat",[ape]:"fire-rc",[cpe]:"fire-rc-compat",[lpe]:"fire-gcs",[upe]:"fire-gcs-compat",[dpe]:"fire-fst",[fpe]:"fire-fst-compat",[hpe]:"fire-vertex","fire-js":"fire-js",[ppe]:"fire-js-all"};var _pe=new Map,ype=new Map,Y9=new Map;function Q9(n,e){try{n.container.addComponent(e)}catch(t){ol.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hu(n){let e=n.name;if(Y9.has(e))return ol.debug(`There were multiple attempts to register component ${e}.`),!1;Y9.set(e,n);for(let t of _pe.values())Q9(t,n);for(let t of ype.values())Q9(t,n);return!0}function al(n){return n==null?!1:n.settings!==void 0}var vpe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},WN=new rl("app","Firebase",vpe);var cm=mpe;function sl(n,e,t){let i=gpe[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){let o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ol.warn(o.join(" "));return}Hu(new da(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bpe="firebase-heartbeat-database",xpe=1,yv="firebase-heartbeat-store",BN=null;function nG(){return BN||(BN=CI(bpe,xpe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yv)}catch(t){console.warn(t)}}}}).catch(n=>{throw WN.create("idb-open",{originalErrorMessage:n.message})})),BN}async function wpe(n){try{let t=(await nG()).transaction(yv),i=await t.objectStore(yv).get(iG(n));return await t.done,i}catch(e){if(e instanceof Co)ol.warn(e.message);else{let t=WN.create("idb-get",{originalErrorMessage:e?.message});ol.warn(t.message)}}}async function J9(n,e){try{let i=(await nG()).transaction(yv,"readwrite");await i.objectStore(yv).put(e,iG(n)),await i.done}catch(t){if(t instanceof Co)ol.warn(t.message);else{let i=WN.create("idb-set",{originalErrorMessage:t?.message});ol.warn(i.message)}}}function iG(n){return`${n.name}!${n.options.appId}`}var Epe=1024,Ipe=30,jN=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new GN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Z9();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Ipe){let r=Spe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ol.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Z9(),{heartbeatsToSend:t,unsentEntries:i}=Tpe(this._heartbeatsCache.heartbeats),r=FN(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ol.warn(e),""}}};function Z9(){return new Date().toISOString().substring(0,10)}function Tpe(n,e=Epe){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),eG(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),eG(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var GN=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VN()?q9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await wpe(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return J9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return J9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function eG(n){return FN(JSON.stringify({version:2,heartbeats:n})).length}function Spe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Cpe(n){Hu(new da("platform-logger",e=>new zN(e),"PRIVATE")),Hu(new da("heartbeat",e=>new jN(e),"PRIVATE")),sl(HN,X9,n),sl(HN,X9,"esm2020"),sl("fire-js","")}Cpe("");function dG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hG=dG,fG=new rl("auth","Firebase",dG());var OI=new zu("@firebase/auth");function Ppe(n,...e){OI.logLevel<=mn.WARN&&OI.warn(`Auth (${cm}): ${n}`,...e)}function kI(n,...e){OI.logLevel<=mn.ERROR&&OI.error(`Auth (${cm}): ${n}`,...e)}function rG(n,...e){throw iO(n,...e)}function nO(n,...e){return iO(n,...e)}function pG(n,e,t){let i=st(ie({},hG()),{[e]:t});return new rl("auth","Firebase",i).create(e,{appName:n.name})}function NI(n){return pG(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iO(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return fG.create(n,...e)}function $n(n,e,...t){if(!n)throw iO(e,...t)}function vv(n){let e="INTERNAL ASSERTION FAILED: "+n;throw kI(e),new Error(e)}function LI(n,e){n||vv(e)}function kpe(){return sG()==="http:"||sG()==="https:"}function sG(){return typeof self<"u"&&self.location?.protocol||null}function Npe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kpe()||G9()||"connection"in navigator)?navigator.onLine:!0}function Ope(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Uh=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,LI(t>e,"Short delay should be less than long delay!"),this.isMobile=H9()||W9()}get(){return Npe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Lpe(n,e){LI(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var FI=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Fpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Vpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Upe=new Uh(3e4,6e4);function mG(n,e){return n.tenantId&&!e.tenantId?st(ie({},e),{tenantId:n.tenantId}):e}async function HI(n,e,t,i,r={}){return gG(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=UN(ie({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=ie({method:e,headers:c},s);return j9()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&_v(n.emulatorConfig.host)&&(l.credentials="include"),FI.fetch()(await _G(n,n.config.apiHost,t,a),l)})}async function gG(n,e,t){n._canInitEmulator=!1;let i=ie(ie({},Fpe),e);try{let r=new KN(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw PI(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw PI(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw PI(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw PI(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw pG(n,u,l);rG(n,u)}}catch(r){if(r instanceof Co)throw r;rG(n,"network-request-failed",{message:String(r)})}}async function _G(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?Lpe(n.config,r):`${n.config.apiScheme}://${r}`;return Vpe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var KN=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(nO(this.auth,"network-request-failed")),Upe.get())})}};function PI(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=nO(n,e,i);return r.customData._tokenResponse=t,r}async function Bpe(n,e){return HI(n,"POST","/v1/accounts:delete",e)}async function VI(n,e){return HI(n,"POST","/v1/accounts:lookup",e)}function bv(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yG(n,e=!1){let t=Bu(n),i=await t.getIdToken(e),r=vG(i);$n(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:bv($N(r.auth_time)),issuedAtTime:bv($N(r.iat)),expirationTime:bv($N(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function $N(n){return Number(n)*1e3}function vG(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return kI("JWT malformed, contained fewer than 3 sections"),null;try{let r=RI(t);return r?JSON.parse(r):(kI("Failed to decode base64 JWT payload"),null)}catch(r){return kI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function oG(n){let e=vG(n);return $n(e,"internal-error"),$n(typeof e.exp<"u","internal-error"),$n(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function XN(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Co&&zpe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zpe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var YN=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var wv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bv(this.lastLoginAt),this.creationTime=bv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function UI(n){let e=n.auth,t=await n.getIdToken(),i=await XN(n,VI(e,{idToken:t}));$n(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let s=r.providerUserInfo?.length?xG(r.providerUserInfo):[],o=Hpe(n.providerData,s),a=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!o?.length,l=a?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new wv(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function bG(n){let e=Bu(n);await UI(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hpe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function xG(n){return n.map(i=>{var r=i,{providerId:e}=r,t=Ax(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function jpe(n,e){let t=await gG(n,{},async()=>{let i=UN({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await _G(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&_v(n.emulatorConfig.host)&&(c.credentials="include"),FI.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Gpe(n,e){return HI(n,"POST","/v2/accounts:revokeToken",mG(n,e))}var xv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$n(e.idToken,"internal-error"),$n(typeof e.idToken<"u","internal-error"),$n(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$n(e.length!==0,"internal-error");let t=oG(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($n(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await jpe(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&($n(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&($n(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&($n(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return vv("not implemented")}};function ju(n,e){$n(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Fh=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:i}=o,r=Ax(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await XN(this,this.stsTokenManager.getToken(this.auth,e));return $n(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yG(this,e)}reload(){return bG(this)}_assign(e){this!==e&&($n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>ie({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(st(ie({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await UI(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(al(this.auth.app))return Promise.reject(NI(this.auth));let e=await this.getIdToken();return await XN(this,Bpe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return st(ie({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>ie({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:_,stsTokenManager:b}=t;$n(d&&b,e,"internal-error");let g=xv.fromJSON(this.name,b);$n(typeof d=="string",e,"internal-error"),ju(i,e.name),ju(r,e.name),$n(typeof h=="boolean",e,"internal-error"),$n(typeof p=="boolean",e,"internal-error"),ju(s,e.name),ju(o,e.name),ju(a,e.name),ju(c,e.name),ju(l,e.name),ju(u,e.name);let v=new n({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:g,createdAt:l,lastLoginAt:u});return _&&Array.isArray(_)&&(v.providerData=_.map(P=>ie({},P))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,t,i=!1){let r=new xv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await UI(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];$n(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?xG(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new xv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new wv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var aG=new Map;function Vh(n){LI(n instanceof Function,"Expected a class definition");let e=aG.get(n);return e?(LI(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aG.set(n,e),e)}var Wpe=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),QN=Wpe;function qN(n,e,t){return`firebase:${n}:${e}:${t}`}var BI=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=qN(this.userKey,r.apiKey,s),this.fullPersistenceKey=qN("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await VI(this.auth,{idToken:e}).catch(()=>{});return t?Fh._fromGetAccountInfoResponse(this.auth,t,e):null}return Fh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(Vh(QN),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||Vh(QN),o=qN(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await VI(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Fh._fromGetAccountInfoResponse(e,h,u)}else d=Fh._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function cG(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xpe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($pe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qpe(e))return"Blackberry";if(Jpe(e))return"Webos";if(qpe(e))return"Safari";if((e.includes("chrome/")||Kpe(e))&&!e.includes("edge/"))return"Chrome";if(Ype(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function $pe(n=so()){return/firefox\//i.test(n)}function qpe(n=so()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kpe(n=so()){return/crios\//i.test(n)}function Xpe(n=so()){return/iemobile/i.test(n)}function Ype(n=so()){return/android/i.test(n)}function Qpe(n=so()){return/blackberry/i.test(n)}function Jpe(n=so()){return/webos/i.test(n)}function wG(n,e=[]){let t;switch(n){case"Browser":t=cG(so());break;case"Worker":t=`${cG(so())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cm}/${i}`}var JN=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Zpe(n,e={}){return HI(n,"GET","/v2/passwordPolicy",mG(n,e))}var eme=6,ZN=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eme,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var eO=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zI(this),this.idTokenSubscription=new zI(this),this.beforeStateQueue=new JN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vh(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await BI.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await VI(this,{idToken:e}),i=await Fh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(al(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await UI(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ope()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(al(this.app))return Promise.reject(NI(this));let t=e?Bu(e):null;return t&&$n(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$n(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return al(this.app)?Promise.reject(NI(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return al(this.app)?Promise.reject(NI(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Zpe(this),t=new ZN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Gpe(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Vh(e)||this._popupRedirectResolver;$n(t,this,"argument-error"),this.redirectPersistenceManager=await BI.create(this,[Vh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if($n(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(al(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ppe(`Error while retrieving App Check token: ${e.error}`),e?.token}};function tme(n){return Bu(n)}var zI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=K9(t=>this.observer=t)}get next(){return $n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nme={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ime(n){nme=n}function rme(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function sme(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Vh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function rO(n,e,t,i){return Bu(n).onIdTokenChanged(e,t,i)}var Iqe=rme("rcb"),Tqe=new Uh(3e4,6e4);var Sqe=new Uh(2e3,1e4);var Cqe=600*1e3;var Aqe=new Uh(3e4,6e4);var Mqe=new Uh(5e3,15e3);var Dqe=encodeURIComponent("fac");var lG="@firebase/auth",uG="1.11.1";var tO=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ome(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ame(n){Hu(new da("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;$n(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wG(n)},l=new eO(i,r,s,c);return sme(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Hu(new da("auth-internal",e=>{let t=tme(e.getProvider("auth").getImmediate());return(i=>new tO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sl(lG,uG,ome(n)),sl(lG,uG,"esm2020")}var cme=300,Rqe=z9("authIdTokenMaxAge")||cme;function lme(){return document.getElementsByTagName("head")?.[0]??document}ime({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=nO("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",lme().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ame("Browser");function EG(n){return new _t(function(e){var t=rO(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function VG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var UG=VG,BG=new ca("auth","Firebase",VG());var KI=new Ka("@firebase/auth");function hme(n,...e){KI.logLevel<=pn.WARN&&KI.warn(`Auth (${Lu}): ${n}`,...e)}function GI(n,...e){KI.logLevel<=pn.ERROR&&KI.error(`Auth (${Lu}): ${n}`,...e)}function Qa(n,...e){throw wO(n,...e)}function ha(n,...e){return wO(n,...e)}function xO(n,e,t){let i=Object.assign(Object.assign({},UG()),{[e]:t});return new ca("auth","Firebase",i).create(e,{appName:n.name})}function Bh(n){return xO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fme(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qa(n,"argument-error"),xO(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wO(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return BG.create(n,...e)}function Lt(n,e,...t){if(!n)throw wO(e,...t)}function cl(n){let e="INTERNAL ASSERTION FAILED: "+n;throw GI(e),new Error(e)}function ul(n,e){n||cl(e)}function aO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pme(){return IG()==="http:"||IG()==="https:"}function IG(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function mme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pme()||t9()||"connection"in navigator)?navigator.onLine:!0}function gme(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var zh=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ul(t>e,"Short delay should be less than long delay!"),this.isMobile=Z8()||n9()}get(){return mme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function EO(n,e){ul(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var XI=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vme=new zh(3e4,6e4);function IO(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function um(n,e,t,i,r={}){return zG(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=im(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return e9()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Nu(n.emulatorConfig.host)&&(l.credentials="include"),XI.fetch()(await HG(n,n.config.apiHost,t,a),l)})}async function zG(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},_me),e);try{let r=new cO(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw jI(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw jI(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw jI(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw jI(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw xO(n,u,l);Qa(n,u)}}catch(r){if(r instanceof io)throw r;Qa(n,"network-request-failed",{message:String(r)})}}async function bme(n,e,t,i,r={}){let s=await um(n,e,t,i,r);return"mfaPendingCredential"in s&&Qa(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function HG(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?EO(n.config,r):`${n.config.apiScheme}://${r}`;return yme.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var cO=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ha(this.auth,"network-request-failed")),vme.get())})}};function jI(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=ha(n,e,i);return r.customData._tokenResponse=t,r}async function xme(n,e){return um(n,"POST","/v1/accounts:delete",e)}async function YI(n,e){return um(n,"POST","/v1/accounts:lookup",e)}function Ev(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TO(n,e=!1){let t=er(n),i=await t.getIdToken(e),r=SO(i);Lt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ev(sO(r.auth_time)),issuedAtTime:Ev(sO(r.iat)),expirationTime:Ev(sO(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function sO(n){return Number(n)*1e3}function SO(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return GI("JWT malformed, contained fewer than 3 sections"),null;try{let r=xI(t);return r?JSON.parse(r):(GI("Failed to decode base64 JWT payload"),null)}catch(r){return GI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function TG(n){let e=SO(n);return Lt(e,"internal-error"),Lt(typeof e.exp<"u","internal-error"),Lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tv(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof io&&wme(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wme({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var lO=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Sv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ev(this.lastLoginAt),this.creationTime=Ev(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function QI(n){var e;let t=n.auth,i=await n.getIdToken(),r=await Tv(n,YI(t,{idToken:i}));Lt(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jG(s.providerUserInfo):[],a=Eme(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function CO(n){let e=er(n);await QI(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Eme(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function jG(n){return n.map(e=>{var{providerId:t}=e,i=Gx(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Ime(n,e){let t=await zG(n,{},async()=>{let i=im({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await HG(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&Nu(n.emulatorConfig.host)&&(c.credentials="include"),XI.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Tme(n,e){return um(n,"POST","/v2/accounts:revokeToken",IO(n,e))}var Iv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lt(e.idToken,"internal-error"),Lt(typeof e.idToken<"u","internal-error"),Lt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Lt(e.length!==0,"internal-error");let t=TG(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await Ime(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Lt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Lt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Lt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return cl("not implemented")}};function Gu(n,e){Lt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wu=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Gx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Tv(this,this.stsTokenManager.getToken(this.auth,e));return Lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TO(this,e)}reload(){return CO(this)}_assign(e){this!==e&&(Lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await QI(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ro(this.auth.app))return Promise.reject(Bh(this.auth));let e=await this.getIdToken();return await Tv(this,xme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;let d=(i=t.displayName)!==null&&i!==void 0?i:void 0,h=(r=t.email)!==null&&r!==void 0?r:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(a=t.tenantId)!==null&&a!==void 0?a:void 0,g=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=t.createdAt)!==null&&l!==void 0?l:void 0,P=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:R,emailVerified:N,isAnonymous:U,providerData:O,stsTokenManager:I}=t;Lt(R&&I,e,"internal-error");let w=Iv.fromJSON(this.name,I);Lt(typeof R=="string",e,"internal-error"),Gu(d,e.name),Gu(h,e.name),Lt(typeof N=="boolean",e,"internal-error"),Lt(typeof U=="boolean",e,"internal-error"),Gu(p,e.name),Gu(_,e.name),Gu(b,e.name),Gu(g,e.name),Gu(v,e.name),Gu(P,e.name);let y=new n({uid:R,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:U,photoURL:_,phoneNumber:p,tenantId:b,stsTokenManager:w,createdAt:v,lastLoginAt:P});return O&&Array.isArray(O)&&(y.providerData=O.map(x=>Object.assign({},x))),g&&(y._redirectEventId=g),y}static async _fromIdTokenResponse(e,t,i=!1){let r=new Iv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await QI(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];Lt(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?jG(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Iv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Sv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var SG=new Map;function ll(n){ul(n instanceof Function,"Expected a class definition");let e=SG.get(n);return e?(ul(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,SG.set(n,e),e)}var Sme=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),uO=Sme;function WI(n,e,t){return`firebase:${n}:${e}:${t}`}var JI=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=WI(this.userKey,r.apiKey,s),this.fullPersistenceKey=WI("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await YI(this.auth,{idToken:e}).catch(()=>{});return t?Wu._fromGetAccountInfoResponse(this.auth,t,e):null}return Wu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(ll(uO),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||ll(uO),o=WI(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await YI(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Wu._fromGetAccountInfoResponse(e,h,u)}else d=Wu._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function CG(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XG(e))return"Blackberry";if(YG(e))return"Webos";if(WG(e))return"Safari";if((e.includes("chrome/")||$G(e))&&!e.includes("edge/"))return"Chrome";if(KG(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function GG(n=Tr()){return/firefox\//i.test(n)}function WG(n=Tr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $G(n=Tr()){return/crios\//i.test(n)}function qG(n=Tr()){return/iemobile/i.test(n)}function KG(n=Tr()){return/android/i.test(n)}function XG(n=Tr()){return/blackberry/i.test(n)}function YG(n=Tr()){return/webos/i.test(n)}function AO(n=Tr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Cme(n=Tr()){var e;return AO(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ame(){return i9()&&document.documentMode===10}function QG(n=Tr()){return AO(n)||KG(n)||YG(n)||XG(n)||/windows phone/i.test(n)||qG(n)}function JG(n,e=[]){let t;switch(n){case"Browser":t=CG(Tr());break;case"Worker":t=`${CG(Tr())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lu}/${i}`}var dO=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Mme(n,e={}){return um(n,"GET","/v2/passwordPolicy",IO(n,e))}var Dme=6,hO=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Dme,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fO=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZI(this),this.idTokenSubscription=new ZI(this),this.beforeStateQueue=new dO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ll(t)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await JI.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await YI(this,{idToken:e}),i=await Wu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ro(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await QI(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ro(this.app))return Promise.reject(Bh(this));let t=e?er(e):null;return t&&Lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ro(this.app)?Promise.reject(Bh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ro(this.app)?Promise.reject(Bh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ll(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Mme(this),t=new hO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ca("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Tme(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ll(e)||this._popupRedirectResolver;Lt(t,this,"argument-error"),this.redirectPersistenceManager=await JI.create(this,[ll(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Lt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ro(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&hme(`Error while retrieving App Check token: ${t.error}`),t?.token}};function aT(n){return er(n)}var ZI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=a9(t=>this.observer=t)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var MO={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rme(n){MO=n}function Pme(n){return MO.loadJS(n)}function kme(){return MO.gapiScript}function ZG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function DO(n,e){let t=rm(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(qa(s,e??{}))return r;Qa(r,"already-initialized")}return t.initialize({options:e})}function Nme(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ll);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function RO(n,e,t){let i=aT(n);Lt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=eW(e),{host:o,port:a}=Ome(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Lt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Lt(qa(l,i.config.emulator)&&qa(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Nu(o)?(EI(`${s}//${o}${c}`),II("Auth",!0)):r||Lme()}function eW(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ome(n){let e=eW(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:AG(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:AG(o)}}}function AG(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Lme(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Cv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,t){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}};async function lm(n,e){return bme(n,"POST","/v1/accounts:signInWithIdp",IO(n,e))}var Fme="http://localhost",eT=class n extends Cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Gx(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return lm(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,lm(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,lm(e,t)}buildRequest(){let e={requestUri:Fme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=im(t)}return e}};var Av=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var tT=class extends Av{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var PO=(()=>{class n extends tT{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return eT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Mv=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){let s=await Wu._fromIdTokenResponse(e,i,r),o=MG(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let r=MG(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})}};function MG(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var pO=class n extends io{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function tW(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pO._fromErrorAndOperation(n,s,e,i):s})}async function Vme(n,e,t=!1){let i=await Tv(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mv._forOperation(n,"link",i)}async function Ume(n,e,t=!1){let{auth:i}=n;if(ro(i.app))return Promise.reject(Bh(i));let r="reauthenticate";try{let s=await Tv(n,tW(i,r,e,n),t);Lt(s.idToken,i,"internal-error");let o=SO(s.idToken);Lt(o,i,"internal-error");let{sub:a}=o;return Lt(n.uid===a,i,"user-mismatch"),Mv._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Qa(i,"user-mismatch"),s}}async function Bme(n,e,t=!1){if(ro(n.app))return Promise.reject(Bh(n));let i="signIn",r=await tW(n,i,e),s=await Mv._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}function kO(n,e,t,i){return er(n).onIdTokenChanged(e,t,i)}function NO(n,e,t){return er(n).beforeAuthStateChanged(e,t)}function OO(n){return er(n).signOut()}var nT="__sak";var iT=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nT,"1"),this.storage.removeItem(nT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var zme=1e3,Hme=10,jme=(()=>{class n extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QG(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);Ame()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Hme):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},zme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){let i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),nW=jme;var Gme=(()=>{class n extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),LO=Gme;function Wme(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var $me=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(async u=>u(i.origin,o)),l=await Wme(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function FO(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var mO=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=FO("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ya(){return window}function qme(n){Ya().location.href=n}function iW(){return typeof Ya().WorkerGlobalScope<"u"&&typeof Ya().importScripts=="function"}async function Kme(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xme(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Yme(){return iW()?self:null}var rW="firebaseLocalStorageDb",Qme=1,rT="firebaseLocalStorage",sW="fbase_key",Hh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function cT(n,e){return n.transaction([rT],e?"readwrite":"readonly").objectStore(rT)}function Jme(){let n=indexedDB.deleteDatabase(rW);return new Hh(n).toPromise()}function gO(){let n=indexedDB.open(rW,Qme);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(rT,{keyPath:sW})}catch(r){t(r)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(rT)?e(i):(i.close(),await Jme(),e(await gO()))})})}async function DG(n,e,t){let i=cT(n,!0).put({[sW]:e,value:t});return new Hh(i).toPromise()}async function Zme(n,e){let t=cT(n,!1).get(e),i=await new Hh(t).toPromise();return i===void 0?null:i.value}function RG(n,e){let t=cT(n,!0).delete(e);return new Hh(t).toPromise()}var ege=800,tge=3,nge=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gO(),this.db)}async _withRetries(t){let i=0;for(;;)try{let r=await this._openDb();return await t(r)}catch(r){if(i++>tge)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iW()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$me._getInstance(Yme()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Kme(),!this.activeServiceWorker)return;this.sender=new mO(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Xme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await gO();return await DG(t,nT,"1"),await RG(t,nT),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>DG(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){let i=await this._withRetries(r=>Zme(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>RG(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=cT(s,!1).getAll();return new Hh(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ege)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),oW=nge;var wKe=ZG("rcb"),EKe=new zh(3e4,6e4);function aW(n,e){return e?ll(e):(Lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Dv=class extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ige(n){return Bme(n.auth,new Dv(n),n.bypassAuthState)}function rge(n){let{auth:e,user:t}=n;return Lt(t,e,"internal-error"),Ume(t,new Dv(n),n.bypassAuthState)}async function sge(n){let{auth:e,user:t}=n;return Lt(t,e,"internal-error"),Vme(t,new Dv(n),n.bypassAuthState)}var sT=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ige;case"linkViaPopup":case"linkViaRedirect":return sge;case"reauthViaPopup":case"reauthViaRedirect":return rge;default:Qa(this.auth,"internal-error")}}resolve(e){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var oge=new zh(2e3,1e4);async function VO(n,e,t){if(ro(n.app))return Promise.reject(ha(n,"operation-not-supported-in-this-environment"));let i=aT(n);fme(n,e,Av);let r=aW(i,t);return new age(i,"signInViaPopup",e,r).executeNotNull()}var age=(()=>{class n extends sT{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Lt(t,this.auth,"internal-error"),t}async onExecution(){ul(this.filter.length===1,"Popup operations only handle one event");let t=FO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ha(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ha(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ha(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oge.get())};t()}}n.currentPopupAction=null;return n})(),cge="pendingRedirect",$I=new Map,_O=class extends sT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=$I.get(this.auth._key());if(!e){try{let i=await lge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}$I.set(this.auth._key(),e)}return this.bypassAuthState||$I.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function lge(n,e){let t=hge(e),i=dge(n);if(!await i._isAvailable())return!1;let r=await i._get(t)==="true";return await i._remove(t),r}function uge(n,e){$I.set(n._key(),e)}function dge(n){return ll(n._redirectPersistence)}function hge(n){return WI(cge,n.config.apiKey,n.name)}async function fge(n,e,t=!1){if(ro(n.app))return Promise.reject(Bh(n));let i=aT(n),r=aW(i,e),o=await new _O(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}var pge=600*1e3,yO=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mge(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!cW(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ha(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pge&&this.cachedEventUids.clear(),this.cachedEventUids.has(PG(e))}saveEventToCache(e){this.cachedEventUids.add(PG(e)),this.lastProcessedEventTime=Date.now()}};function PG(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cW({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mge(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cW(n);default:return!1}}async function gge(n,e={}){return um(n,"GET","/v1/projects",e)}var _ge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yge=/^https?/;async function vge(n){if(n.config.emulator)return;let{authorizedDomains:e}=await gge(n);for(let t of e)try{if(bge(t))return}catch{}Qa(n,"unauthorized-domain")}function bge(n){let e=aO(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!yge.test(t))return!1;if(_ge.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var xge=new zh(3e4,6e4);function kG(){let n=Ya().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wge(n){return new Promise((e,t)=>{var i,r,s;function o(){kG(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kG(),t(ha(n,"network-request-failed"))},timeout:xge.get()})}if(!((r=(i=Ya().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ya().gapi)===null||s===void 0)&&s.load)o();else{let a=ZG("iframefcb");return Ya()[a]=()=>{gapi.load?o():t(ha(n,"network-request-failed"))},Pme(`${kme()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw qI=null,e})}var qI=null;function Ege(n){return qI=qI||wge(n),qI}var Ige=new zh(5e3,15e3),Tge="__/auth/iframe",Sge="emulator/auth/iframe",Cge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Age=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mge(n){let e=n.config;Lt(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?EO(e,Sge):`https://${n.config.authDomain}/${Tge}`,i={apiKey:e.apiKey,appName:n.name,v:Lu},r=Age.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${im(i).slice(1)}`}async function Dge(n){let e=await Ege(n),t=Ya().gapi;return Lt(t,n,"internal-error"),e.open({where:document.body,url:Mge(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cge,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});let o=ha(n,"network-request-failed"),a=Ya().setTimeout(()=>{s(o)},Ige.get());function c(){Ya().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}var Rge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pge=500,kge=600,Nge="_blank",Oge="http://localhost",oT=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Lge(n,e,t,i=Pge,r=kge){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},Rge),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Tr().toLowerCase();t&&(a=$G(l)?Nge:t),GG(l)&&(e=e||Oge,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,_])=>`${h}${p}=${_},`,"");if(Cme(l)&&a!=="_self")return Fge(e||"",a),new oT(null);let d=window.open(e||"",a,u);Lt(d,n,"popup-blocked");try{d.focus()}catch{}return new oT(d)}function Fge(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Vge="__/auth/handler",Uge="emulator/auth/handler",Bge=encodeURIComponent("fac");async function NG(n,e,t,i,r,s){Lt(n.config.authDomain,n,"auth-domain-config-required"),Lt(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Lu,eventId:r};if(e instanceof Av){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",o9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof tT){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=await n._getAppCheckToken(),l=c?`#${Bge}=${encodeURIComponent(c)}`:"";return`${zge(n)}?${im(a).slice(1)}${l}`}function zge({config:n}){return n.emulator?EO(n,Uge):`https://${n.authDomain}/${Vge}`}var oO="webStorageSupport",vO=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LO,this._completeRedirectFn=fge,this._overrideRedirectResult=uge}async _openPopup(e,t,i,r){var s;ul((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await NG(e,t,i,aO(),r);return Lge(e,o,FO())}async _openRedirect(e,t,i,r){await this._originValidation(e);let s=await NG(e,t,i,aO(),r);return qme(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ul(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Dge(e),i=new yO(e);return t.register("authEvent",r=>(Lt(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oO,{type:oO},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[oO];o!==void 0&&t(!!o),Qa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vge(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QG()||WG()||AO()}},lW=vO;var OG="@firebase/auth",LG="1.10.8";var bO=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Hge(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jge(n){la(new gs("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Lt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JG(n)},l=new fO(i,r,s,c);return Nme(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),la(new gs("auth-internal",e=>{let t=aT(e.getProvider("auth").getImmediate());return(i=>new bO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(OG,LG,Hge(n)),Ai(OG,LG,"esm2017")}var Gge=300,Wge=dN("authIdTokenMaxAge")||Gge,FG=null,$ge=n=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Wge)return;let r=t?.token;FG!==r&&(FG=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function UO(n=Nh()){let e=rm(n,"auth");if(e.isInitialized())return e.getImmediate();let t=DO(n,{popupRedirectResolver:lW,persistence:[oW,nW,LO]}),i=dN("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=$ge(s.toString());NO(t,o,()=>o(t.currentUser)),kO(t,a=>o(a))}}let r=lN("auth");return r&&RO(t,`http://${r}`),t}function qge(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Rme({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=ha("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",qge().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jge("Browser");var uW="auth",dl=class{constructor(e){return e}},Rv=class{constructor(){return om(uW)}};var BO=new Ee("angularfire2.auth-instances");function V_e(n,e){let t=pv(uW,n,e);return t&&new dl(t)}function U_e(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new dl(i)}}var B_e={provide:Rv,deps:[[new Cs,BO]]},z_e={provide:dl,useFactory:V_e,deps:[[new Cs,BO],il]};function dW(n,...e){return Ai("angularfire",Fu.full,"auth"),vr([z_e,B_e,{provide:BO,useFactory:U_e(n),multi:!0,deps:[St,Qt,Vu,Lh,[new Cs,am],...e]}])}var lT=wi(EG,!0);var hW=wi(UO,!0);var fW=wi(VO,!0,2);var pW=wi(OO,!0,2);var mW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gW={};var hl,zO;(function(){var n;function e(I,w){function y(){}y.prototype=w.prototype,I.F=w.prototype,I.prototype=new y,I.prototype.constructor=I,I.D=function(x,S,M){for(var C=Array(arguments.length-2),re=2;re<arguments.length;re++)C[re-2]=arguments[re];return w.prototype[S].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,y){y||(y=0);let x=Array(16);if(typeof w=="string")for(var S=0;S<16;++S)x[S]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(S=0;S<16;++S)x[S]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=I.g[0],y=I.g[1],S=I.g[2];let M=I.g[3],C;C=w+(M^y&(S^M))+x[0]+3614090360&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[2]+606105819&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[3]+3250441966&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[6]+2821735955&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[7]+4249261313&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[10]+4294925233&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[11]+2304563134&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[14]+2792965006&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[15]+1236535329&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(S^M&(y^S))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[11]+643717713&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[0]+3921069994&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[15]+3634488961&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[4]+3889429448&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[3]+4107603335&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[8]+1163531501&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[7]+1735328473&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[12]+2368359562&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(y^S^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[11]+1839030562&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[14]+4259657740&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[7]+4139469664&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[10]+3200236656&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[3]+3572445317&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[6]+76029189&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[15]+530742520&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[2]+3299628645&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(S^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[14]+2878612391&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[5]+4237533241&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[10]+4293915773&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[1]+2240044497&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[6]+2734768916&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[13]+1309151649&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[2]+718787259&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+M&4294967295}i.prototype.v=function(I,w){w===void 0&&(w=I.length);let y=w-this.blockSize,x=this.C,S=this.h,M=0;for(;M<w;){if(S==0)for(;M<=y;)r(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<w;)if(x[S++]=I.charCodeAt(M++),S==this.blockSize){r(this,x),S=0;break}}else for(;M<w;)if(x[S++]=I[M++],S==this.blockSize){r(this,x),S=0;break}}this.h=S,this.o+=w},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,y=0;y<4;++y)for(let x=0;x<32;x+=8)I[w++]=this.g[y]>>>x&255;return I};function s(I,w){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=w(I)}function o(I,w){this.h=w;let y=[],x=!0;for(let S=I.length-1;S>=0;S--){let M=I[S]|0;x&&M==w||(y[S]=M,x=!1)}this.g=y}var a={};function c(I){return-128<=I&&I<128?s(I,function(w){return new o([w|0],w<0?-1:0)}):new o([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return g(l(-I));let w=[],y=1;for(let x=0;I>=y;x++)w[x]=I/y|0,y*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return g(u(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let y=l(Math.pow(w,8)),x=d;for(let M=0;M<I.length;M+=8){var S=Math.min(8,I.length-M);let C=parseInt(I.substring(M,M+S),w);S<8?(S=l(Math.pow(w,S)),x=x.j(S).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),p=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-g(this).m();let I=0,w=1;for(let y=0;y<this.g.length;y++){let x=this.i(y);I+=(x>=0?x:4294967296+x)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(b(this))return"-"+g(this).toString(I);let w=l(Math.pow(I,6));var y=this;let x="";for(;;){let S=N(y,w).g;y=v(y,S.j(w));let M=((y.g.length>0?y.g[0]:y.h)>>>0).toString(I);if(y=S,_(y))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=v(this,I),b(I)?-1:_(I)?0:1};function g(I){let w=I.g.length,y=[];for(let x=0;x<w;x++)y[x]=~I.g[x];return new o(y,~I.h).add(h)}n.abs=function(){return b(this)?g(this):this},n.add=function(I){let w=Math.max(this.g.length,I.g.length),y=[],x=0;for(let S=0;S<=w;S++){let M=x+(this.i(S)&65535)+(I.i(S)&65535),C=(M>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);x=C>>>16,M&=65535,C&=65535,y[S]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function v(I,w){return I.add(g(w))}n.j=function(I){if(_(this)||_(I))return d;if(b(this))return b(I)?g(this).j(g(I)):g(g(this).j(I));if(b(I))return g(this.j(g(I)));if(this.l(p)<0&&I.l(p)<0)return l(this.m()*I.m());let w=this.g.length+I.g.length,y=[];for(var x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(let S=0;S<I.g.length;S++){let M=this.i(x)>>>16,C=this.i(x)&65535,re=I.i(S)>>>16,Y=I.i(S)&65535;y[2*x+2*S]+=C*Y,P(y,2*x+2*S),y[2*x+2*S+1]+=M*Y,P(y,2*x+2*S+1),y[2*x+2*S+1]+=C*re,P(y,2*x+2*S+1),y[2*x+2*S+2]+=M*re,P(y,2*x+2*S+2)}for(I=0;I<w;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=w;I<2*w;I++)y[I]=0;return new o(y,0)};function P(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function R(I,w){this.g=I,this.h=w}function N(I,w){if(_(w))throw Error("division by zero");if(_(I))return new R(d,d);if(b(I))return w=N(g(I),w),new R(g(w.g),g(w.h));if(b(w))return w=N(I,g(w)),new R(g(w.g),w.h);if(I.g.length>30){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;x.l(I)<=0;)y=U(y),x=U(x);var S=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!_(x);){var C=M.add(x);C.l(I)<=0&&(S=S.add(y),M=C),x=O(x,1),y=O(y,1)}return w=v(I,S.j(w)),new R(S,w)}for(S=d;I.l(w)>=0;){for(y=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=l(y),C=M.j(w);b(C)||C.l(I)>0;)y-=x,M=l(y),C=M.j(w);_(M)&&(M=h),S=S.add(M),I=v(I,C)}return new R(S,I)}n.B=function(I){return N(this,I).h},n.and=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)&I.i(x);return new o(y,this.h&I.h)},n.or=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)|I.i(x);return new o(y,this.h|I.h)},n.xor=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)^I.i(x);return new o(y,this.h^I.h)};function U(I){let w=I.g.length+1,y=[];for(let x=0;x<w;x++)y[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(y,I.h)}function O(I,w){let y=w>>5;w%=32;let x=I.g.length-y,S=[];for(let M=0;M<x;M++)S[M]=w>0?I.i(M+y)>>>w|I.i(M+y+1)<<32-w:I.i(M+y);return new o(S,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zO=gW.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,hl=gW.Integer=o}).apply(typeof mW<"u"?mW:typeof self<"u"?self:typeof window<"u"?window:{});var uT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fl={};var HO,j_e,dm,jO,Pv,dT,GO,WO,$O;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof uT=="object"&&uT];for(var T=0;T<m.length;++T){var D=m[T];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=t(this);function r(m,T){if(T)e:{var D=i;m=m.split(".");for(var V=0;V<m.length-1;V++){var W=m[V];if(!(W in D))break e;D=D[W]}m=m[m.length-1],V=D[m],T=T(V),T!=V&&T!=null&&e(D,m,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(T){var D=[],V;for(V in T)Object.prototype.hasOwnProperty.call(T,V)&&D.push([V,T[V]]);return D}});var s=s||{},o=this||self;function a(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function c(m,T,D){return m.call.apply(m.bind,arguments)}function l(m,T,D){return l=c,l.apply(null,arguments)}function u(m,T){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function d(m,T){function D(){}D.prototype=T.prototype,m.Z=T.prototype,m.prototype=new D,m.prototype.constructor=m,m.Ob=function(V,W,ee){for(var Le=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Le[Nt-2]=arguments[Nt];return T.prototype[W].apply(V,Le)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function p(m){let T=m.length;if(T>0){let D=Array(T);for(let V=0;V<T;V++)D[V]=m[V];return D}return[]}function _(m,T){for(let V=1;V<arguments.length;V++){let W=arguments[V];var D=typeof W;if(D=D!="object"?D:W?Array.isArray(W)?"array":D:"null",D=="array"||D=="object"&&typeof W.length=="number"){D=m.length||0;let ee=W.length||0;m.length=D+ee;for(let Le=0;Le<ee;Le++)m[D+Le]=W[Le]}else m.push(W)}}class b{constructor(T,D){this.i=T,this.j=D,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function g(m){o.setTimeout(()=>{throw m},0)}function v(){var m=I;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class P{constructor(){this.h=this.g=null}add(T,D){let V=R.get();V.set(T,D),this.h?this.h.next=V:this.g=V,this.h=V}}var R=new b(()=>new N,m=>m.reset());class N{constructor(){this.next=this.g=this.h=null}set(T,D){this.h=T,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,O=!1,I=new P,w=()=>{let m=Promise.resolve(void 0);U=()=>{m.then(y)}};function y(){for(var m;m=v();){try{m.h.call(m.g)}catch(D){g(D)}var T=R;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}O=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{let D=()=>{};o.addEventListener("test",D,T),o.removeEventListener("test",D,T)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function re(m,T){S.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}d(re,S),re.prototype.init=function(m,T){let D=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(D=="mouseover"?T=m.fromElement:D=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);let m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),le=0;function fe(m,T,D,V,W){this.listener=m,this.proxy=null,this.src=T,this.type=D,this.capture=!!V,this.ha=W,this.key=++le,this.da=this.fa=!1}function oe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function we(m,T,D){for(let V in m)T.call(D,m[V],V,m)}function Ae(m,T){for(let D in m)T.call(void 0,m[D],D,m)}function Qe(m){let T={};for(let D in m)T[D]=m[D];return T}let ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(m,T){let D,V;for(let W=1;W<arguments.length;W++){V=arguments[W];for(D in V)m[D]=V[D];for(let ee=0;ee<ut.length;ee++)D=ut[ee],Object.prototype.hasOwnProperty.call(V,D)&&(m[D]=V[D])}}function Vt(m){this.src=m,this.g={},this.h=0}Vt.prototype.add=function(m,T,D,V,W){let ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);let Le=ue(m,T,V,W);return Le>-1?(T=m[Le],D||(T.fa=!1)):(T=new fe(T,this.src,ee,!!V,W),T.fa=D,m.push(T)),T};function Ht(m,T){let D=T.type;if(D in m.g){var V=m.g[D],W=Array.prototype.indexOf.call(V,T,void 0),ee;(ee=W>=0)&&Array.prototype.splice.call(V,W,1),ee&&(oe(T),m.g[D].length==0&&(delete m.g[D],m.h--))}}function ue(m,T,D,V){for(let W=0;W<m.length;++W){let ee=m[W];if(!ee.da&&ee.listener==T&&ee.capture==!!D&&ee.ha==V)return W}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Xe={};function ft(m,T,D,V,W){if(V&&V.once)return In(m,T,D,V,W);if(Array.isArray(T)){for(let ee=0;ee<T.length;ee++)ft(m,T[ee],D,V,W);return null}return D=xe(D),m&&m[Y]?m.J(T,D,a(V)?!!V.capture:!!V,W):tt(m,T,D,!1,V,W)}function tt(m,T,D,V,W,ee){if(!T)throw Error("Invalid event type");let Le=a(W)?!!W.capture:!!W,Nt=Se(m);if(Nt||(m[me]=Nt=new Vt(m)),D=Nt.add(T,D,V,Le,ee),D.proxy)return D;if(V=jt(),D.proxy=V,V.src=m,V.listener=D,m.addEventListener)M||(W=Le),W===void 0&&(W=!1),m.addEventListener(T.toString(),V,W);else if(m.attachEvent)m.attachEvent(B(T.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function jt(){function m(D){return T.call(m.src,m.listener,D)}let T=be;return m}function In(m,T,D,V,W){if(Array.isArray(T)){for(let ee=0;ee<T.length;ee++)In(m,T[ee],D,V,W);return null}return D=xe(D),m&&m[Y]?m.K(T,D,a(V)?!!V.capture:!!V,W):tt(m,T,D,!0,V,W)}function Tt(m,T,D,V,W){if(Array.isArray(T))for(var ee=0;ee<T.length;ee++)Tt(m,T[ee],D,V,W);else V=a(V)?!!V.capture:!!V,D=xe(D),m&&m[Y]?(m=m.i,ee=String(T).toString(),ee in m.g&&(T=m.g[ee],D=ue(T,D,V,W),D>-1&&(oe(T[D]),Array.prototype.splice.call(T,D,1),T.length==0&&(delete m.g[ee],m.h--)))):m&&(m=Se(m))&&(T=m.g[T.toString()],m=-1,T&&(m=ue(T,D,V,W)),(D=m>-1?T[m]:null)&&ye(D))}function ye(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Y])Ht(T.i,m);else{var D=m.type,V=m.proxy;T.removeEventListener?T.removeEventListener(D,V,m.capture):T.detachEvent?T.detachEvent(B(D),V):T.addListener&&T.removeListener&&T.removeListener(V),(D=Se(T))?(Ht(D,m),D.h==0&&(D.src=null,T[me]=null)):oe(m)}}}function B(m){return m in Xe?Xe[m]:Xe[m]="on"+m}function be(m,T){if(m.da)m=!0;else{T=new re(T,this);let D=m.listener,V=m.ha||m.src;m.fa&&ye(m),m=D.call(V,T)}return m}function Se(m){return m=m[me],m instanceof Vt?m:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function xe(m){return typeof m=="function"?m:(m[Pe]||(m[Pe]=function(T){return m.handleEvent(T)}),m[Pe])}function Fe(){x.call(this),this.i=new Vt(this),this.M=this,this.G=null}d(Fe,x),Fe.prototype[Y]=!0,Fe.prototype.removeEventListener=function(m,T,D,V){Tt(this,m,T,D,V)};function Ce(m,T){var D,V=m.G;if(V)for(D=[];V;V=V.G)D.push(V);if(m=m.M,V=T.type||T,typeof T=="string")T=new S(T,m);else if(T instanceof S)T.target=T.target||m;else{var W=T;T=new S(V,m),rt(T,W)}W=!0;let ee,Le;if(D)for(Le=D.length-1;Le>=0;Le--)ee=T.g=D[Le],W=Ge(ee,V,!0,T)&&W;if(ee=T.g=m,W=Ge(ee,V,!0,T)&&W,W=Ge(ee,V,!1,T)&&W,D)for(Le=0;Le<D.length;Le++)ee=T.g=D[Le],W=Ge(ee,V,!1,T)&&W}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var m=this.i;for(let T in m.g){let D=m.g[T];for(let V=0;V<D.length;V++)oe(D[V]);delete m.g[T],m.h--}}this.G=null},Fe.prototype.J=function(m,T,D,V){return this.i.add(String(m),T,!1,D,V)},Fe.prototype.K=function(m,T,D,V){return this.i.add(String(m),T,!0,D,V)};function Ge(m,T,D,V){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let W=!0;for(let ee=0;ee<T.length;++ee){let Le=T[ee];if(Le&&!Le.da&&Le.capture==D){let Nt=Le.listener,f=Le.ha||Le.src;Le.fa&&Ht(m.i,Le),W=Nt.call(f,V)!==!1&&W}}return W&&!V.defaultPrevented}function z(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=l(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:o.setTimeout(m,T||0)}function k(m){m.g=z(()=>{m.g=null,m.i&&(m.i=!1,k(m))},m.l);let T=m.h;m.h=null,m.m.apply(null,T)}class X extends x{constructor(T,D){super(),this.m=T,this.l=D,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:k(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(m){x.call(this),this.h=m,this.g={}}d(ce,x);var he=[];function J(m){we(m.g,function(T,D){this.g.hasOwnProperty(D)&&ye(T)},m),m.g={}}ce.prototype.N=function(){ce.Z.N.call(this),J(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=o.JSON.stringify,Ue=o.JSON.parse,dt=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function nt(){}function _e(){}var Me={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vt(){S.call(this,"d")}d(vt,S);function ht(){S.call(this,"c")}d(ht,S);var He={},Rt=null;function j(){return Rt=Rt||new Fe}He.Ia="serverreachability";function Be(m){S.call(this,He.Ia,m)}d(Be,S);function ke(m){let T=j();Ce(T,new Be(T))}He.STAT_EVENT="statevent";function Ne(m,T){S.call(this,He.STAT_EVENT,m),this.stat=T}d(Ne,S);function ge(m){let T=j();Ce(T,new Ne(T,m))}He.Ja="timingevent";function pe(m,T){S.call(this,He.Ja,m),this.size=T}d(pe,S);function We(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},T)}function Ct(){this.g=!0}Ct.prototype.ua=function(){this.g=!1};function Fn(m,T,D,V,W,ee){m.info(function(){if(m.g)if(ee){var Le="",Nt=ee.split("&");for(let E=0;E<Nt.length;E++){var f=Nt[E].split("=");if(f.length>1){let A=f[0];f=f[1];let L=A.split("_");Le=L.length>=2&&L[1]=="type"?Le+(A+"="+f+"&"):Le+(A+"=redacted&")}}}else Le=null;else Le=ee;return"XMLHTTP REQ ("+V+") [attempt "+W+"]: "+T+`
`+D+`
`+Le})}function Rn(m,T,D,V,W,ee,Le){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+W+"]: "+T+`
`+D+`
`+ee+" "+Le})}function Si(m,T,D,V){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+dr(m,D)+(V?" "+V:"")})}function Hr(m,T){m.info(function(){return"TIMEOUT: "+T})}Ct.prototype.info=function(){};function dr(m,T){if(!m.g)return T;if(!T)return null;try{let ee=JSON.parse(T);if(ee){for(m=0;m<ee.length;m++)if(Array.isArray(ee[m])){var D=ee[m];if(!(D.length<2)){var V=D[1];if(Array.isArray(V)&&!(V.length<1)){var W=V[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Le=1;Le<V.length;Le++)V[Le]=""}}}}return Ze(ee)}catch{return T}}var Sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ho={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jr;function Ec(){}d(Ec,nt),Ec.prototype.g=function(){return new XMLHttpRequest},jr=new Ec;function Ca(m){return encodeURIComponent(String(m))}function jo(m){var T=1;m=m.split(":");let D=[];for(;T>0&&m.length;)D.push(m.shift()),T--;return m.length&&D.push(m.join(":")),D}function ss(m,T,D,V){this.j=m,this.i=T,this.l=D,this.S=V||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ud}function Ud(){this.i=null,this.g="",this.h=!1}var yo={},Ic={};function Aa(m,T,D){m.M=1,m.A=Li(_n(T)),m.u=D,m.R=!0,Tc(m,null)}function Tc(m,T){m.F=Date.now(),Ma(m),m.B=_n(m.A);var D=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),gx(D.i,"t",V),m.C=0,D=m.j.L,m.h=new Ud,m.g=tp(m.j,D?T:null,!m.u),m.P>0&&(m.O=new X(l(m.Y,m,m.g),m.P)),T=m.V,D=m.g,V=m.ba;var W="readystatechange";Array.isArray(W)||(W&&(he[0]=W.toString()),W=he);for(let ee=0;ee<W.length;ee++){let Le=ft(D,W[ee],V||T.handleEvent,!1,T.h||T);if(!Le)break;T.g[Le.key]=Le}T=m.J?Qe(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),ke(),Fn(m.i,m.v,m.B,m.l,m.S,m.u)}ss.prototype.ba=function(m){m=m.target;let T=this.O;T&&Hn(m)==3?T.j():this.Y(m)},ss.prototype.Y=function(m){try{if(m==this.g)e:{let Nt=Hn(this.g),f=this.g.ya(),E=this.g.ca();if(!(Nt<3)&&(Nt!=3||this.g&&(this.h.h||this.g.la()||Ex(this.g)))){this.K||Nt!=4||f==7||(f==8||E<=0?ke(3):ke(2)),F(this);var T=this.g.ca();this.X=T;var D=vo(this);if(this.o=T==200,Rn(this.i,this.v,this.B,this.l,this.S,Nt,T),this.o){if(this.U&&!this.L){t:{if(this.g){var V,W=this.g;if((V=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(V)){var ee=V;break t}}ee=null}if(m=ee)Si(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ne(this,m);else{this.o=!1,this.m=3,ge(12),Z(this),G(this);break e}}if(this.R){m=!0;let A;for(;!this.K&&this.C<D.length;)if(A=qf(this,D),A==Ic){Nt==4&&(this.m=4,ge(14),m=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(A==yo){this.m=4,ge(15),Si(this.i,this.l,D,"[Invalid Chunk]"),m=!1;break}else Si(this.i,this.l,A,null),ne(this,A);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||D.length!=0||this.h.h||(this.m=1,ge(16),m=!1),this.o=this.o&&m,!m)Si(this.i,this.l,D,"[Invalid Chunked Response]"),Z(this),G(this);else if(D.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Jf(Le),Le.P=!0,ge(11))}}else Si(this.i,this.l,D,null),ne(this,D);Nt==4&&Z(this),this.o&&!this.K&&(Nt==4?O_(this.j,this):(this.o=!1,Ma(this)))}else qD(this.g),T==400&&D.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),Z(this),G(this)}}}catch{}finally{}};function vo(m){if(!Bd(m))return m.g.la();let T=Ex(m.g);if(T==="")return"";let D="",V=T.length,W=Hn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Z(m),G(m),"";m.h.i=new o.TextDecoder}for(let ee=0;ee<V;ee++)m.h.h=!0,D+=m.h.i.decode(T[ee],{stream:!(W&&ee==V-1)});return T.length=0,m.h.g+=D,m.C=0,m.h.g}function Bd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function qf(m,T){var D=m.C,V=T.indexOf(`
`,D);return V==-1?Ic:(D=Number(T.substring(D,V)),isNaN(D)?yo:(V+=1,V+D>T.length?Ic:(T=T.slice(V,V+D),m.C=V+D,T)))}ss.prototype.cancel=function(){this.K=!0,Z(this)};function Ma(m){m.T=Date.now()+m.H,iu(m,m.H)}function iu(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=We(l(m.aa,m),T)}function F(m){m.D&&(o.clearTimeout(m.D),m.D=null)}ss.prototype.aa=function(){this.D=null;let m=Date.now();m-this.T>=0?(Hr(this.i,this.B),this.M!=2&&(ke(),ge(17)),Z(this),this.m=2,G(this)):iu(this,this.T-m)};function G(m){m.j.I==0||m.K||O_(m.j,m)}function Z(m){F(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,J(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function ne(m,T){try{var D=m.j;if(D.I!=0&&(D.g==m||Ke(D.h,m))){if(!m.L&&Ke(D.h,m)&&D.I==3){try{var V=D.Ba.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var W=V;if(W[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<m.F)Zf(D),Sc(D);else break e;lu(D),ge(18)}}else D.xa=W[1],0<D.xa-D.K&&W[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=We(l(D.Va,D),6e3));Ye(D.h)<=1&&D.ta&&(D.ta=void 0)}else Ra(D,11)}else if((m.L||D.g==m)&&Zf(D),!C(T))for(W=D.Ba.g.parse(T),T=0;T<W.length;T++){let E=W[T],A=E[0];if(!(A<=D.K))if(D.K=A,E=E[1],D.I==2)if(E[0]=="c"){D.M=E[1],D.ba=E[2];let L=E[3];L!=null&&(D.ka=L,D.j.info("VER="+D.ka));let $=E[4];$!=null&&(D.za=$,D.j.info("SVER="+D.za));let te=E[5];te!=null&&typeof te=="number"&&te>0&&(V=1.5*te,D.O=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;let Re=m.g;if(Re){let Vn=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vn){var ee=V.h;ee.g||Vn.indexOf("spdy")==-1&&Vn.indexOf("quic")==-1&&Vn.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(bt(ee,ee.h),ee.h=null))}if(V.G){let Bi=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;Bi&&(V.wa=Bi,ot(V.J,V.G,Bi))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-m.F,D.j.info("Handshake RTT: "+D.T+"ms")),V=D;var Le=m;if(V.na=ep(V,V.L?V.ba:null,V.W),Le.L){At(V.h,Le);var Nt=Le,f=V.O;f&&(Nt.H=f),Nt.D&&(F(Nt),Ma(Nt)),V.g=Le}else Qf(V);D.i.length>0&&xs(D)}else E[0]!="stop"&&E[0]!="close"||Ra(D,7);else D.I==3&&(E[0]=="stop"||E[0]=="close"?E[0]=="stop"?Ra(D,7):Yf(D):E[0]!="noop"&&D.l&&D.l.qa(E),D.A=0)}}ke(4)}catch{}}var q=class{constructor(m,T){this.g=m,this.map=T}};function De(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ze(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ye(m){return m.h?1:m.g?m.g.size:0}function Ke(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function bt(m,T){m.g?m.g.add(T):m.h=T}function At(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}De.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let m of this.g.values())m.cancel();this.g.clear()}};function ct(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(let D of m.g.values())T=T.concat(D.G);return T}return p(m.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(m,T){if(m){m=m.split("&");for(let D=0;D<m.length;D++){let V=m[D].indexOf("="),W,ee=null;V>=0?(W=m[D].substring(0,V),ee=m[D].substring(V+1)):W=m[D],T(W,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function wn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof wn?(this.l=m.l,yn(this,m.j),this.o=m.o,this.g=m.g,lt(this,m.u),this.h=m.h,Jn(this,_x(m.i)),this.m=m.m):m&&(T=String(m).match(en))?(this.l=!1,yn(this,T[1]||"",!0),this.o=vs(T[2]||""),this.g=vs(T[3]||"",!0),lt(this,T[4]),this.h=vs(T[5]||"",!0),Jn(this,T[6]||"",!0),this.m=vs(T[7]||"")):(this.l=!1,this.i=new os(null,this.l))}wn.prototype.toString=function(){let m=[];var T=this.j;T&&m.push(ai(T,zn,!0),":");var D=this.g;return(D||T=="file")&&(m.push("//"),(T=this.o)&&m.push(ai(T,zn,!0),"@"),m.push(Ca(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&m.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&m.push("/"),m.push(ai(D,D.charAt(0)=="/"?Pr:Fi,!0))),(D=this.i.toString())&&m.push("?",D),(D=this.m)&&m.push("#",ai(D,Vi)),m.join("")},wn.prototype.resolve=function(m){let T=_n(this),D=!!m.j;D?yn(T,m.j):D=!!m.o,D?T.o=m.o:D=!!m.g,D?T.g=m.g:D=m.u!=null;var V=m.h;if(D)lt(T,m.u);else if(D=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var W=T.h.lastIndexOf("/");W!=-1&&(V=T.h.slice(0,W+1)+V)}if(W=V,W==".."||W==".")V="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){V=W.lastIndexOf("/",0)==0,W=W.split("/");let ee=[];for(let Le=0;Le<W.length;){let Nt=W[Le++];Nt=="."?V&&Le==W.length&&ee.push(""):Nt==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),V&&Le==W.length&&ee.push("")):(ee.push(Nt),V=!0)}V=ee.join("/")}else V=W}return D?T.h=V:D=m.i.toString()!=="",D?Jn(T,_x(m.i)):D=!!m.m,D&&(T.m=m.m),T};function _n(m){return new wn(m)}function yn(m,T,D){m.j=D?vs(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function lt(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Jn(m,T,D){T instanceof os?(m.i=T,zd(m.i,m.l)):(D||(T=ai(T,Xt)),m.i=new os(T,m.l))}function ot(m,T,D){m.i.set(T,D)}function Li(m){return ot(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function vs(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,T,D){return typeof m=="string"?(m=encodeURI(m).replace(T,Rr),D&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Rr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var zn=/[#\/\?@]/g,Fi=/[#\?:]/g,Pr=/[#\?]/g,Xt=/[#\?@]/g,Vi=/#/g;function os(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Ui(m){m.g||(m.g=new Map,m.h=0,m.i&&Tn(m.i,function(T,D){m.add(decodeURIComponent(T.replace(/\+/g," ")),D)}))}n=os.prototype,n.add=function(m,T){Ui(this),this.i=null,m=ru(this,m);let D=this.g.get(m);return D||this.g.set(m,D=[]),D.push(T),this.h+=1,this};function px(m,T){Ui(m),T=ru(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function M_(m,T){return Ui(m),T=ru(m,T),m.g.has(T)}n.forEach=function(m,T){Ui(this),this.g.forEach(function(D,V){D.forEach(function(W){m.call(T,W,V,this)},this)},this)};function mx(m,T){Ui(m);let D=[];if(typeof T=="string")M_(m,T)&&(D=D.concat(m.g.get(ru(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)D=D.concat(m[T]);return D}n.set=function(m,T){return Ui(this),this.i=null,m=ru(this,m),M_(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=mx(this,m),m.length>0?String(m[0]):T):T};function gx(m,T,D){px(m,T),D.length>0&&(m.i=null,m.g.set(ru(m,T),p(D)),m.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let m=[],T=Array.from(this.g.keys());for(let V=0;V<T.length;V++){var D=T[V];let W=Ca(D);D=mx(this,D);for(let ee=0;ee<D.length;ee++){let Le=W;D[ee]!==""&&(Le+="="+Ca(D[ee])),m.push(Le)}}return this.i=m.join("&")};function _x(m){let T=new os;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function ru(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function zd(m,T){T&&!m.j&&(Ui(m),m.i=null,m.g.forEach(function(D,V){let W=V.toLowerCase();V!=W&&(px(this,V),gx(this,W,D))},m)),m.j=T}function Da(m,T){let D=new Ct;if(o.Image){let V=new Image;V.onload=u(Go,D,"TestLoadImage: loaded",!0,T,V),V.onerror=u(Go,D,"TestLoadImage: error",!1,T,V),V.onabort=u(Go,D,"TestLoadImage: abort",!1,T,V),V.ontimeout=u(Go,D,"TestLoadImage: timeout",!1,T,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else T(!1)}function yx(m,T){let D=new Ct,V=new AbortController,W=setTimeout(()=>{V.abort(),Go(D,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:V.signal}).then(ee=>{clearTimeout(W),ee.ok?Go(D,"TestPingServer: ok",!0,T):Go(D,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(W),Go(D,"TestPingServer: error",!1,T)})}function Go(m,T,D,V,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),V(D)}catch{}}function vx(){this.g=new dt}function Wo(m){this.i=m.Sb||null,this.h=m.ab||!1}d(Wo,nt),Wo.prototype.g=function(){return new Kf(this.i,this.h)};function Kf(m,T){Fe.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Kf,Fe),n=Kf.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,bs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||o).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hd(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bx(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function bx(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?Hd(this):bs(this),this.readyState==3&&bx(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Hd(this))},n.Na=function(m){this.g&&(this.response=m,Hd(this))},n.ga=function(){this.g&&Hd(this)};function Hd(m){m.readyState=4,m.l=null,m.j=null,m.B=null,bs(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let m=[],T=this.h.entries();for(var D=T.next();!D.done;)D=D.value,m.push(D[0]+": "+D[1]),D=T.next();return m.join(`\r
`)};function bs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function xx(m){let T="";return we(m,function(D,V){T+=V,T+=":",T+=D,T+=`\r
`}),T}function D_(m,T,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=xx(D),typeof m=="string"?D!=null&&Ca(D):ot(m,T,D))}function ti(m){Fe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ti,Fe);var Xf=/^https?$/i,wx=["POST","PUT"];n=ti.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jr.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(ee){su(this,ee);return}if(m=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var W in V)D.set(W,V[W]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(let ee of V.keys())D.set(ee,V.get(ee));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(ee=>ee.toLowerCase()=="content-type"),W=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(wx,T,void 0)>=0)||V||W||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ee,Le]of D)this.g.setRequestHeader(ee,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ee){su(this,ee)}};function su(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,ou(m),au(m)}function ou(m){m.A||(m.A=!0,Ce(m,"complete"),Ce(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ce(this,"complete"),Ce(this,"abort"),au(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),ti.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?R_(this):this.Xa())},n.Xa=function(){R_(this)};function R_(m){if(m.h&&typeof s<"u"){if(m.v&&Hn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ce(m,"readystatechange"),Hn(m)==4){m.h=!1;try{let ee=m.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var D;if(!(D=T)){var V;if(V=ee===0){let Le=String(m.D).match(en)[1]||null;!Le&&o.self&&o.self.location&&(Le=o.self.location.protocol.slice(0,-1)),V=!Xf.test(Le?Le.toLowerCase():"")}D=V}if(D)Ce(m,"complete"),Ce(m,"success");else{m.o=6;try{var W=Hn(m)>2?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.ca()+"]",ou(m)}}finally{au(m)}}}}function au(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);let D=m.g;m.g=null,T||Ce(m,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Hn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Ue(T)}};function Ex(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function qD(m){let T={};m=(m.g&&Hn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(C(m[V]))continue;var D=jo(m[V]);let W=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();let ee=T[W]||[];T[W]=ee,ee.push(D)}Ae(T,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cu(m,T,D){return D&&D.internalChannelParams&&D.internalChannelParams[m]||T}function P_(m){this.za=0,this.i=[],this.j=new Ct,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cu("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cu("baseRetryDelayMs",5e3,m),this.Za=cu("retryDelaySeedMs",1e4,m),this.Ta=cu("forwardChannelMaxRetries",2,m),this.va=cu("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new De(m&&m.concurrentRequestLimit),this.Ba=new vx,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=P_.prototype,n.ka=8,n.I=1,n.connect=function(m,T,D,V){ge(0),this.W=m,this.H=T||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.J=ep(this,null,this.W),xs(this)};function Yf(m){if(k_(m),m.I==3){var T=m.V++,D=_n(m.J);if(ot(D,"SID",m.M),ot(D,"RID",T),ot(D,"TYPE","terminate"),$o(m,D),T=new ss(m,m.j,T),T.M=2,T.A=Li(_n(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(T.A.toString(),"")}catch{}!D&&o.Image&&(new Image().src=T.A,D=!0),D||(T.g=tp(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Ma(T)}L_(m)}function Sc(m){m.g&&(Jf(m),m.g.cancel(),m.g=null)}function k_(m){Sc(m),m.v&&(o.clearTimeout(m.v),m.v=null),Zf(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function xs(m){if(!ze(m.h)&&!m.m){m.m=!0;var T=m.Ea;U||w(),O||(U(),O=!0),I.add(T,m),m.D=0}}function Ix(m,T){return Ye(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=We(l(m.Ea,m,T),uu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;let W=new ss(this,this.j,m),ee=this.o;if(this.U&&(ee?(ee=Qe(ee),rt(ee,this.U)):ee=this.U),this.u!==null||this.R||(W.J=ee,ee=null),this.S)e:{for(var T=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,T>4096){T=D;break e}if(T===4096||D===this.i.length-1){T=D+1;break e}}T=1e3}else T=1e3;T=N_(this,W,T),D=_n(this.J),ot(D,"RID",m),ot(D,"CVER",22),this.G&&ot(D,"X-HTTP-Session-Id",this.G),$o(this,D),ee&&(this.R?T="headers="+Ca(xx(ee))+"&"+T:this.u&&D_(D,this.u,ee)),bt(this.h,W),this.Ra&&ot(D,"TYPE","init"),this.S?(ot(D,"$req",T),ot(D,"SID","null"),W.U=!0,Aa(W,D,null)):Aa(W,D,T),this.I=2}}else this.I==3&&(m?Tx(this,m):this.i.length==0||ze(this.h)||Tx(this))};function Tx(m,T){var D;T?D=T.l:D=m.V++;let V=_n(m.J);ot(V,"SID",m.M),ot(V,"RID",D),ot(V,"AID",m.K),$o(m,V),m.u&&m.o&&D_(V,m.u,m.o),D=new ss(m,m.j,D,m.D+1),m.u===null&&(D.J=m.o),T&&(m.i=T.G.concat(m.i)),T=N_(m,D,1e3),D.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),bt(m.h,D),Aa(D,V,T)}function $o(m,T){m.H&&we(m.H,function(D,V){ot(T,V,D)}),m.l&&we({},function(D,V){ot(T,V,D)})}function N_(m,T,D){D=Math.min(m.i.length,D);let V=m.l?l(m.l.Ka,m.l,m):null;e:{var W=m.i;let Nt=-1;for(;;){let f=["count="+D];Nt==-1?D>0?(Nt=W[0].g,f.push("ofs="+Nt)):Nt=0:f.push("ofs="+Nt);let E=!0;for(let A=0;A<D;A++){var ee=W[A].g;let L=W[A].map;if(ee-=Nt,ee<0)Nt=Math.max(0,W[A].g-100),E=!1;else try{ee="req"+ee+"_"||"";try{var Le=L instanceof Map?L:Object.entries(L);for(let[$,te]of Le){let Re=te;a(te)&&(Re=Ze(te)),f.push(ee+$+"="+encodeURIComponent(Re))}}catch($){throw f.push(ee+"type="+encodeURIComponent("_badmap")),$}}catch{V&&V(L)}}if(E){Le=f.join("&");break e}}Le=void 0}return m=m.i.splice(0,D),T.G=m,Le}function Qf(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;U||w(),O||(U(),O=!0),I.add(T,m),m.A=0}}function lu(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=We(l(m.Da,m),uu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,jd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=We(l(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),Sc(this),jd(this))};function Jf(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function jd(m){m.g=new ss(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=_n(m.na);ot(T,"RID","rpc"),ot(T,"SID",m.M),ot(T,"AID",m.K),ot(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&ot(T,"TO",m.ia),ot(T,"TYPE","xmlhttp"),$o(m,T),m.u&&m.o&&D_(T,m.u,m.o),m.O&&(m.g.H=m.O);var D=m.g;m=m.ba,D.M=1,D.A=Li(_n(T)),D.u=null,D.R=!0,Tc(D,m)}n.Va=function(){this.C!=null&&(this.C=null,Sc(this),lu(this),ge(19))};function Zf(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function O_(m,T){var D=null;if(m.g==T){Zf(m),Jf(m),m.g=null;var V=2}else if(Ke(m.h,T))D=T.G,At(m.h,T),V=1;else return;if(m.I!=0){if(T.o)if(V==1){D=T.u?T.u.length:0,T=Date.now()-T.F;var W=m.D;V=j(),Ce(V,new pe(V,D)),xs(m)}else Qf(m);else if(W=T.m,W==3||W==0&&T.X>0||!(V==1&&Ix(m,T)||V==2&&lu(m)))switch(D&&D.length>0&&(T=m.h,T.i=T.i.concat(D)),W){case 1:Ra(m,5);break;case 4:Ra(m,10);break;case 3:Ra(m,6);break;default:Ra(m,2)}}}function uu(m,T){let D=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(D*=2),D*T}function Ra(m,T){if(m.j.info("Error code "+T),T==2){var D=l(m.bb,m),V=m.Ua;let W=!V;V=new wn(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yn(V,"https"),Li(V),W?Da(V.toString(),D):yx(V.toString(),D)}else ge(2);m.I=0,m.l&&m.l.pa(T),L_(m),k_(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function L_(m){if(m.I=0,m.ja=[],m.l){let T=ct(m.h);(T.length!=0||m.i.length!=0)&&(_(m.ja,T),_(m.ja,m.i),m.h.i.length=0,p(m.i),m.i.length=0),m.l.oa()}}function ep(m,T,D){var V=D instanceof wn?_n(D):new wn(D);if(V.g!="")T&&(V.g=T+"."+V.g),lt(V,V.u);else{var W=o.location;V=W.protocol,T=T?T+"."+W.hostname:W.hostname,W=+W.port;let ee=new wn(null);V&&yn(ee,V),T&&(ee.g=T),W&&lt(ee,W),D&&(ee.h=D),V=ee}return D=m.G,T=m.wa,D&&T&&ot(V,D,T),ot(V,"VER",m.ka),$o(m,V),V}function tp(m,T,D){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new ti(new Wo({ab:D})):new ti(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function F_(){}n=F_.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Cc(){}Cc.prototype.g=function(m,T){return new Gr(m,T)};function Gr(m,T){Fe.call(this),this.g=new P_(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!C(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!C(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Ac(this)}d(Gr,Fe),Gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gr.prototype.close=function(){Yf(this.g)},Gr.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var D={};D.__data__=m,m=D}else this.v&&(D={},D.__data__=Ze(m),m=D);T.i.push(new q(T.Ya++,m)),T.I==3&&xs(T)},Gr.prototype.N=function(){this.g.l=null,delete this.j,Yf(this.g),delete this.g,Gr.Z.N.call(this)};function V_(m){vt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(let D in T){m=D;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}d(V_,vt);function Pa(){ht.call(this),this.status=1}d(Pa,ht);function Ac(m){this.g=m}d(Ac,F_),Ac.prototype.ra=function(){Ce(this.g,"a")},Ac.prototype.qa=function(m){Ce(this.g,new V_(m))},Ac.prototype.pa=function(m){Ce(this.g,new Pa)},Ac.prototype.oa=function(){Ce(this.g,"b")},Cc.prototype.createWebChannel=Cc.prototype.g,Gr.prototype.send=Gr.prototype.o,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,$O=fl.createWebChannelTransport=function(){return new Cc},WO=fl.getStatEventTarget=function(){return j()},GO=fl.Event=He,dT=fl.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,Pv=fl.ErrorCode=Sa,Ho.COMPLETE="complete",jO=fl.EventType=Ho,_e.EventType=Me,Me.OPEN="a",Me.CLOSE="b",Me.ERROR="c",Me.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,dm=fl.WebChannel=_e,j_e=fl.FetchXmlHttpFactory=Wo,ti.prototype.listenOnce=ti.prototype.K,ti.prototype.getLastError=ti.prototype.Ha,ti.prototype.getLastErrorCode=ti.prototype.ya,ti.prototype.getStatus=ti.prototype.ca,ti.prototype.getResponseJson=ti.prototype.La,ti.prototype.getResponseText=ti.prototype.la,ti.prototype.send=ti.prototype.ea,ti.prototype.setWithCredentials=ti.prototype.Fa,HO=fl.XhrIo=ti}).apply(typeof uT<"u"?uT:typeof self<"u"?self:typeof window<"u"?window:{});var _W="@firebase/firestore",yW="4.9.2";var Jr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");var Lm="12.3.0";var Kh=new zu("@firebase/firestore");function hm(){return Kh.logLevel}function et(n,...e){if(Kh.logLevel<=mn.DEBUG){let t=e.map(RF);Kh.debug(`Firestore (${Lm}): ${n}`,...t)}}function gl(n,...e){if(Kh.logLevel<=mn.ERROR){let t=e.map(RF);Kh.error(`Firestore (${Lm}): ${n}`,...t)}}function Uv(n,...e){if(Kh.logLevel<=mn.WARN){let t=e.map(RF);Kh.warn(`Firestore (${Lm}): ${n}`,...t)}}function RF(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function qt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,o$(n,i,t)}function o$(n,e,t){let i=`FIRESTORE (${Lm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw gl(i),new Error(i)}function Mi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||o$(e,r,i)}function An(n,e){return n}var je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mt=class extends Co{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $u=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var eL=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tL=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}};var nL=class{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mi(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new $u;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $u,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $u)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Mi(typeof i.accessToken=="string",31837,{l:i}),new eL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Mi(e===null||typeof e=="string",2055,{h:e}),new Jr(e)}},iL=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},rL=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new iL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_T=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sL=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,al(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mi(this.o===void 0,3512);let i=s=>{s.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _T(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _T(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function G_e(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var yT=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=G_e(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function En(n,e){return n<e?-1:n>e?1:0}function oL(n,e){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++){let r=n.charAt(i),s=e.charAt(i);if(r!==s)return qO(r)===qO(s)?En(r,s):qO(r)?1:-1}return En(n.length,e.length)}var W_e=55296,$_e=57343;function qO(n){let e=n.charCodeAt(0);return e>=W_e&&e<=$_e}function Im(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var vW="__name__",vT=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&qt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&qt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return En(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):oL(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hl.fromString(e.substring(4,e.length-2))}},pr=class n extends vT{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Mt(je.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},q_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fa=class n extends vT{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return q_e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vW}static keyField(){return new n([vW])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Mt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Mt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Mt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Mt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ft=class n{constructor(e){this.path=e}static fromPath(e){return new n(pr.fromString(e))}static fromName(e){return new n(pr.fromString(e).popFirst(5))}static empty(){return new n(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pr(e.slice()))}};function K_e(n,e,t,i){if(e===!0&&i===!0)throw new Mt(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X_e(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Y_e(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qt(12329,{type:typeof n})}function KO(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Mt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Y_e(n);throw new Mt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ir(n,e){let t={typeString:n};return e&&(t.value=e),t}function Zv(n,e){if(!X_e(n))throw new Mt(je.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Mt(je.INVALID_ARGUMENT,t);return!0}var bW=-62135596800,xW=1e6,_s=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*xW);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bW)throw new Mt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xW}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zv(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-bW;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};_s._jsonSchemaVersion="firestore/timestamp/1.0",_s._jsonSchema={type:ir("string",_s._jsonSchemaVersion),seconds:ir("number"),nanoseconds:ir("number")};var sn=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new _s(0,0))}static max(){return new n(new _s(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bv=-1,aL=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};aL.UNKNOWN_ID=-1;function Q_e(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=sn.fromTimestamp(i===1e9?new _s(t+1,0):new _s(t,i));return new Xh(r,Ft.empty(),e)}function J_e(n){return new Xh(n.readTime,n.key,Bv)}var Xh=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(sn.min(),Ft.empty(),Bv)}static max(){return new n(sn.max(),Ft.empty(),Bv)}};function Z_e(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ft.comparator(n.documentKey,e.documentKey),t!==0?t:En(n.largestBatchId,e.largestBatchId))}var eye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cL=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function WT(n){if(n.code!==je.FAILED_PRECONDITION||n.message!==eye)throw n;et("LocalStore","Unexpectedly lost primary lease")}var Te=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function tye(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fm(n){return n.name==="IndexedDbTransactionError"}var PF=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),nye=-1;function $T(n){return n==null}function bT(n){return n===0&&1/n==-1/0}var a$="";function iye(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wW(e)),e=rye(n.get(t),e);return wW(e)}function rye(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case a$:t+="";break;default:t+=s}}return t}function wW(n){return n+a$+""}var sye="remoteDocuments",c$="owner";var l$="mutationQueues";var u$="mutations";var d$="documentMutations",oye="remoteDocumentsV14";var h$="remoteDocumentGlobal";var f$="targets";var p$="targetDocuments";var m$="targetGlobal",g$="collectionParents";var _$="clientMetadata";var y$="bundles";var v$="namedQueries";var aye="indexConfiguration";var cye="indexState";var lye="indexEntries";var b$="documentOverlays";var uye="globals";var dye=[l$,u$,d$,sye,f$,c$,m$,p$,_$,h$,g$,y$,v$],CXe=[...dye,b$],hye=[l$,u$,d$,oye,f$,c$,m$,p$,_$,h$,g$,y$,v$,b$],fye=hye,pye=[...fye,aye,cye,lye];var AXe=[...pye,uye];function EW(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function e0(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mye(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qi=class n{constructor(e,t){this.comparator=e,this.root=t||Ja.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ja.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ja.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}},gm=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ja=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw qt(27949);return e+(this.isRed()?0:1)}};Ja.EMPTY=null,Ja.RED=!0,Ja.BLACK=!1;Ja.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ja(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Sr=class n{constructor(e){this.comparator=e,this.data=new qi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(e){return new xT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xT=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jh=class n{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new n([])}unionWith(e){let t=new Sr(fa.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Im(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var wT=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Zr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wT("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zr.EMPTY_BYTE_STRING=new Zr("");var gye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(n){if(Mi(!!n,39018),typeof n=="string"){let e=0,t=gye.exec(n);if(Mi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ei(n.seconds),nanos:Ei(n.nanos)}}function Ei(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yl(n){return typeof n=="string"?Zr.fromBase64String(n):Zr.fromUint8Array(n)}var x$="server_timestamp",w$="__type__",E$="__previous_value__",I$="__local_write_time__";function kF(n){return(n?.mapValue?.fields||{})[w$]?.stringValue===x$}function qT(n){let e=n.mapValue.fields[E$];return kF(e)?qT(e):e}function zv(n){let e=_l(n.mapValue.fields[I$].timestampValue);return new _s(e.seconds,e.nanos)}var lL=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},uL="(default)",ET=class n{constructor(e,t){this.projectId=e,this.database=t||uL}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===uL}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var T$="__type__",S$="__max__",hT={mapValue:{fields:{__type__:{stringValue:S$}}}},C$="__vector__",Hv="value";function qu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kF(n)?4:M$(n)?9007199254740991:A$(n)?10:11:qt(28295,{value:n})}function ec(n,e){if(n===e)return!0;let t=qu(n);if(t!==qu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zv(n).isEqual(zv(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=_l(r.timestampValue),a=_l(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return yl(r.bytesValue).isEqual(yl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ei(r.geoPointValue.latitude)===Ei(s.geoPointValue.latitude)&&Ei(r.geoPointValue.longitude)===Ei(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ei(r.integerValue)===Ei(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ei(r.doubleValue),a=Ei(s.doubleValue);return o===a?bT(o)===bT(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Im(n.arrayValue.values||[],e.arrayValue.values||[],ec);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(EW(o)!==EW(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ec(o[c],a[c])))return!1;return!0})(n,e);default:return qt(52216,{left:n})}}function jv(n,e){return(n.values||[]).find(t=>ec(t,e))!==void 0}function Tm(n,e){if(n===e)return 0;let t=qu(n),i=qu(e);if(t!==i)return En(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return En(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ei(s.integerValue||s.doubleValue),c=Ei(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return IW(n.timestampValue,e.timestampValue);case 4:return IW(zv(n),zv(e));case 5:return oL(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=yl(s),c=yl(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=En(a[l],c[l]);if(u!==0)return u}return En(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=En(Ei(s.latitude),Ei(o.latitude));return a!==0?a:En(Ei(s.longitude),Ei(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return TW(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[Hv]?.arrayValue,u=c[Hv]?.arrayValue,d=En(l?.values?.length||0,u?.values?.length||0);return d!==0?d:TW(l,u)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===hT.mapValue&&o===hT.mapValue)return 0;if(s===hT.mapValue)return 1;if(o===hT.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=oL(c[d],u[d]);if(h!==0)return h;let p=Tm(a[c[d]],l[u[d]]);if(p!==0)return p}return En(c.length,u.length)})(n.mapValue,e.mapValue);default:throw qt(23264,{he:t})}}function IW(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return En(n,e);let t=_l(n),i=_l(e),r=En(t.seconds,i.seconds);return r!==0?r:En(t.nanos,i.nanos)}function TW(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Tm(t[r],i[r]);if(s)return s}return En(t.length,i.length)}function Sm(n){return dL(n)}function dL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=_l(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return yl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ft.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=dL(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${dL(t.fields[o])}`;return r+"}"})(n.mapValue):qt(61005,{value:n})}function mT(n){switch(qu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qT(n);return e?16+mT(e):16;case 5:return 2*n.stringValue.length;case 6:return yl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+mT(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return e0(i.fields,(s,o)=>{r+=s.length+mT(o)}),r})(n.mapValue);default:throw qt(13486,{value:n})}}function hL(n){return!!n&&"integerValue"in n}function NF(n){return!!n&&"arrayValue"in n}function SW(n){return!!n&&"nullValue"in n}function CW(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function XO(n){return!!n&&"mapValue"in n}function A$(n){return(n?.mapValue?.fields||{})[T$]?.stringValue===C$}function Nv(n){if(n.geoPointValue)return{geoPointValue:ie({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:ie({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return e0(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Nv(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nv(n.arrayValue.values[t]);return e}return ie({},n)}function M$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S$}var DXe={mapValue:{fields:{[T$]:{stringValue:C$},[Hv]:{arrayValue:{}}}}};var pl=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!XO(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nv(t)}setAll(e){let t=fa.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Nv(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());XO(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ec(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];XO(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){e0(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Nv(this.value))}};var pa=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,sn.min(),sn.min(),sn.min(),pl.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,sn.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,sn.min(),sn.min(),pl.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,sn.min(),sn.min(),pl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cm=class{constructor(e,t){this.position=e,this.inclusive=t}};function AW(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Ft.comparator(Ft.fromName(o.referenceValue),t.key):i=Tm(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function MW(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ec(n.position[t],e.position[t]))return!1;return!0}var Am=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function _ye(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var IT=class{},mr=class n extends IT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new pL(e,t,i):t==="array-contains"?new _L(e,i):t==="in"?new yL(e,i):t==="not-in"?new vL(e,i):t==="array-contains-any"?new bL(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mL(e,i):new gL(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tm(t,this.value)):t!==null&&qu(this.value)===qu(t)&&this.matchesComparison(Tm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tc=class n extends IT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return D$(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function D$(n){return n.op==="and"}function R$(n){return yye(n)&&D$(n)}function yye(n){for(let e of n.filters)if(e instanceof tc)return!1;return!0}function fL(n){if(n instanceof mr)return n.field.canonicalString()+n.op.toString()+Sm(n.value);if(R$(n))return n.filters.map(e=>fL(e)).join(",");{let e=n.filters.map(t=>fL(t)).join(",");return`${n.op}(${e})`}}function P$(n,e){return n instanceof mr?(function(i,r){return r instanceof mr&&i.op===r.op&&i.field.isEqual(r.field)&&ec(i.value,r.value)})(n,e):n instanceof tc?(function(i,r){return r instanceof tc&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&P$(o,r.filters[a]),!0):!1})(n,e):void qt(19439)}function k$(n){return n instanceof mr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sm(t.value)}`})(n):n instanceof tc?(function(t){return t.op.toString()+" {"+t.getFilters().map(k$).join(" ,")+"}"})(n):"Filter"}var pL=class extends mr{constructor(e,t,i){super(e,t,i),this.key=Ft.fromName(i.referenceValue)}matches(e){let t=Ft.comparator(e.key,this.key);return this.matchesComparison(t)}},mL=class extends mr{constructor(e,t){super(e,"in",t),this.keys=N$("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gL=class extends mr{constructor(e,t){super(e,"not-in",t),this.keys=N$("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function N$(n,e){return(e.arrayValue?.values||[]).map(t=>Ft.fromName(t.referenceValue))}var _L=class extends mr{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return NF(t)&&jv(t.arrayValue,this.value)}},yL=class extends mr{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jv(this.value.arrayValue,t)}},vL=class extends mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jv(this.value.arrayValue,t)}},bL=class extends mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!NF(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jv(this.value.arrayValue,i))}};var xL=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function DW(n,e=null,t=[],i=[],r=null,s=null,o=null){return new xL(n,e,t,i,r,s,o)}function OF(n){let e=An(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>fL(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),$T(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Sm(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Sm(i)).join(",")),e.Te=t}return e.Te}function LF(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_ye(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!P$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MW(n.startAt,e.startAt)&&MW(n.endAt,e.endAt)}function wL(n){return Ft.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Mm=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function vye(n,e,t,i,r,s,o,a){return new Mm(n,e,t,i,r,s,o,a)}function FF(n){return new Mm(n)}function RW(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bye(n){return n.collectionGroup!==null}function Ov(n){let e=An(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Sr(fa.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Am(s,i))}),t.has(fa.keyField().canonicalString())||e.Ie.push(new Am(fa.keyField(),i))}return e.Ie}function Za(n){let e=An(n);return e.Ee||(e.Ee=xye(e,Ov(n))),e.Ee}function xye(n,e){if(n.limitType==="F")return DW(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Am(r.field,s)});let t=n.endAt?new Cm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Cm(n.startAt.position,n.startAt.inclusive):null;return DW(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function EL(n,e,t){return new Mm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function KT(n,e){return LF(Za(n),Za(e))&&n.limitType===e.limitType}function O$(n){return`${OF(Za(n))}|lt:${n.limitType}`}function fm(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>k$(r)).join(", ")}]`),$T(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Sm(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Sm(r)).join(",")),`Target(${i})`})(Za(n))}; limitType=${n.limitType})`}function XT(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ft.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of Ov(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=AW(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,Ov(i),r)||i.endAt&&!(function(o,a,c){let l=AW(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,Ov(i),r))})(n,e)}function wye(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L$(n){return(e,t)=>{let i=!1;for(let r of Ov(n)){let s=Eye(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Eye(n,e,t){let i=n.field.isKeyField()?Ft.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Tm(c,l):qt(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt(19790,{direction:n.dir})}}var vl=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){e0(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return mye(this.inner)}size(){return this.innerSize}};var Iye=new qi(Ft.comparator);function Ku(){return Iye}var F$=new qi(Ft.comparator);function kv(...n){let e=F$;for(let t of n)e=e.insert(t.key,t);return e}function Tye(n){let e=F$;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Gh(){return Lv()}function V$(){return Lv()}function Lv(){return new vl(n=>n.toString(),(n,e)=>n.isEqual(e))}var RXe=new qi(Ft.comparator),Sye=new Sr(Ft.comparator);function On(...n){let e=Sye;for(let t of n)e=e.add(t);return e}var Cye=new Sr(En);function Aye(){return Cye}function Mye(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bT(e)?"-0":e}}function Dye(n){return{integerValue:""+n}}var Dm=class{constructor(){this._=void 0}};function Rye(n,e,t){return n instanceof Gv?(function(r,s){let o={fields:{[w$]:{stringValue:x$},[I$]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&kF(s)&&(s=qT(s)),s&&(o.fields[E$]=s),{mapValue:o}})(t,e):n instanceof Rm?U$(n,e):n instanceof Pm?B$(n,e):(function(r,s){let o=kye(r,s),a=PW(o)+PW(r.Ae);return hL(o)&&hL(r.Ae)?Dye(a):Mye(r.serializer,a)})(n,e)}function Pye(n,e,t){return n instanceof Rm?U$(n,e):n instanceof Pm?B$(n,e):t}function kye(n,e){return n instanceof Wv?(function(i){return hL(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var Gv=class extends Dm{},Rm=class extends Dm{constructor(e){super(),this.elements=e}};function U$(n,e){let t=z$(e);for(let i of n.elements)t.some(r=>ec(r,i))||t.push(i);return{arrayValue:{values:t}}}var Pm=class extends Dm{constructor(e){super(),this.elements=e}};function B$(n,e){let t=z$(e);for(let i of n.elements)t=t.filter(r=>!ec(r,i));return{arrayValue:{values:t}}}var Wv=class extends Dm{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function PW(n){return Ei(n.integerValue||n.doubleValue)}function z$(n){return NF(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Nye(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Rm&&r instanceof Rm||i instanceof Pm&&r instanceof Pm?Im(i.elements,r.elements,ec):i instanceof Wv&&r instanceof Wv?ec(i.Ae,r.Ae):i instanceof Gv&&r instanceof Gv})(n.transform,e.transform)}var Fv=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gT(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var $v=class{};function H$(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new IL(n.key,Fv.none()):new qv(n.key,n.data,Fv.none());{let t=n.data,i=pl.empty(),r=new Sr(fa.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new km(n.key,i,new jh(r.toArray()),Fv.none())}}function Oye(n,e,t){n instanceof qv?(function(r,s,o){let a=r.value.clone(),c=NW(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof km?(function(r,s,o){if(!gT(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=NW(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(j$(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Vv(n,e,t,i){return n instanceof qv?(function(s,o,a,c){if(!gT(s.precondition,o))return a;let l=s.value.clone(),u=OW(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof km?(function(s,o,a,c){if(!gT(s.precondition,o))return a;let l=OW(s.fieldTransforms,c,o),u=o.data;return u.setAll(j$(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return gT(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function kW(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Im(i,r,(s,o)=>Nye(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var qv=class extends $v{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},km=class extends $v{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function j$(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function NW(n,e,t){let i=new Map;Mi(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Pye(o,a,t[r]))}return i}function OW(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,Rye(s,o,e))}return i}var IL=class extends $v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var TL=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&Oye(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Vv(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Vv(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=V$();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=H$(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(sn.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),On())}isEqual(e){return this.batchId===e.batchId&&Im(this.mutations,e.mutations,(t,i)=>kW(t,i))&&Im(this.baseMutations,e.baseMutations,(t,i)=>kW(t,i))}};var SL=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var CL=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tr,Cn;function G$(n){if(n===void 0)return gl("GRPC error has no .code"),je.UNKNOWN;switch(n){case tr.OK:return je.OK;case tr.CANCELLED:return je.CANCELLED;case tr.UNKNOWN:return je.UNKNOWN;case tr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case tr.INTERNAL:return je.INTERNAL;case tr.UNAVAILABLE:return je.UNAVAILABLE;case tr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case tr.NOT_FOUND:return je.NOT_FOUND;case tr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case tr.ABORTED:return je.ABORTED;case tr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case tr.DATA_LOSS:return je.DATA_LOSS;default:return qt(39323,{code:n})}}(Cn=tr||(tr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";var Lye=null;function Fye(){return new TextEncoder}var Vye=new hl([4294967295,4294967295],0);function LW(n){let e=Fye().encode(n),t=new zO;return t.update(e),new Uint8Array(t.digest())}function FW(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hl([t,i],0),new hl([r,s],0)]}var AL=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wh(`Invalid padding: ${t}`);if(i<0)throw new Wh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hl.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(hl.fromNumber(i)));return r.compare(Vye)===1&&(r=new hl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=LW(e),[i,r]=FW(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);if(!this.we(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=LW(e),[i,r]=FW(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Wh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var TT=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Kv.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(sn.min(),r,new qi(En),Ku(),On())}},Kv=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,On(),On(),On())}};var _m=class{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}},ST=class{constructor(e,t){this.targetId=e,this.Ce=t}},CT=class{constructor(e,t,i=Zr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},AT=class{constructor(){this.ve=0,this.Fe=VW(),this.Me=Zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=On(),t=On(),i=On();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:qt(38017,{changeType:s})}}),new Kv(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=VW()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},ML=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ku(),this.Je=fT(),this.He=fT(),this.Ye=new qi(En)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:qt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,r)=>{this.rt(r)&&t(r)})}st(e){let t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){let s=r.target;if(wL(s))if(i===0){let o=new Ft(s.path);this.et(t,o,pa.newNoDocument(o,sn.min()))}else Mi(i===1,20013,{expectedCount:i});else{let o=this._t(t);if(o!==i){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}Lye?.lt((function(u,d,h,p,_){let b={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},g=d.unchangedNames;return g&&(b.bloomFilter={applied:_===0,hashCount:g?.hashCount??0,bitmapLength:g?.bits?.bitmap?.length??0,padding:g?.bits?.padding??0,mightContain:v=>p?.mightContain(v)??!1}),b})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=yl(i).toUint8Array()}catch(c){if(c instanceof wT)return Uv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new AL(o,r,s)}catch(c){return Uv(c instanceof Wh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){let i=this.Ge.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),r++)}),r}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&wL(a.target)){let c=new Ft(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pa.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let i=On();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let r=new TT(e,t,this.Ye,this.je,i);return this.je=Ku(),this.Je=fT(),this.He=fT(),this.Ye=new qi(En),r}Xe(e,t){if(!this.rt(e))return;let i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new AT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sr(En),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sr(En),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||et("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AT),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function fT(){return new qi(Ft.comparator)}function VW(){return new qi(Ft.comparator)}var Uye={asc:"ASCENDING",desc:"DESCENDING"},Bye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zye={and:"AND",or:"OR"},DL=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function RL(n,e){return n.useProto3Json||$T(e)?e:{value:e}}function Hye(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jye(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ym(n){return Mi(!!n,49232),sn.fromTimestamp((function(t){let i=_l(t);return new _s(i.seconds,i.nanos)})(n))}function Gye(n,e){return PL(n,e).canonicalString()}function PL(n,e){let t=(function(r){return new pr(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function W$(n){let e=pr.fromString(n);return Mi(Y$(e),10190,{key:e.toString()}),e}function YO(n,e){let t=W$(e);if(t.get(1)!==n.databaseId.projectId)throw new Mt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Mt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ft(q$(t))}function $$(n,e){return Gye(n.databaseId,e)}function Wye(n){let e=W$(n);return e.length===4?pr.emptyPath():q$(e)}function UW(n){return new pr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function q$(n){return Mi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $ye(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:qt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Mi(u===void 0||typeof u=="string",58123),Zr.fromBase64String(u||"")):(Mi(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Zr.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?je.UNKNOWN:G$(l.code);return new Mt(u,l.message||"")})(o);t=new CT(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=YO(n,i.document.name),s=ym(i.document.updateTime),o=i.document.createTime?ym(i.document.createTime):sn.min(),a=new pl({mapValue:{fields:i.document.fields}}),c=pa.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new _m(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=YO(n,i.document),s=i.readTime?ym(i.readTime):sn.min(),o=pa.newNoDocument(r,s),a=i.removedTargetIds||[];t=new _m([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=YO(n,i.document),s=i.removedTargetIds||[];t=new _m([],s,r,null)}else{if(!("filter"in e))return qt(11601,{Rt:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new CL(r,s),a=i.targetId;t=new ST(a,o)}}return t}function qye(n,e){return{documents:[$$(n,e.path)]}}function Kye(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$$(n,r);let s=(function(l){if(l.length!==0)return X$(tc.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:pm(h.field),direction:Qye(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=RL(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:r}}function Xye(n){let e=Wye(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Mi(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=K$(d);return h instanceof tc&&R$(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(_){return new Am(mm(_.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,$T(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,p=d.values||[];return new Cm(p,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,p=d.values||[];return new Cm(p,h)})(t.endAt)),vye(e,r,o,s,a,"F",c,l)}function Yye(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K$(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=mm(t.unaryFilter.field);return mr.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=mm(t.unaryFilter.field);return mr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=mm(t.unaryFilter.field);return mr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=mm(t.unaryFilter.field);return mr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mr.create(mm(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return tc.create(t.compositeFilter.filters.map(i=>K$(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(t.compositeFilter.op))})(n):qt(30097,{filter:n})}function Qye(n){return Uye[n]}function Jye(n){return Bye[n]}function Zye(n){return zye[n]}function pm(n){return{fieldPath:n.canonicalString()}}function mm(n){return fa.fromServerFormat(n.fieldPath)}function X$(n){return n instanceof mr?(function(t){if(t.op==="=="){if(CW(t.value))return{unaryFilter:{field:pm(t.field),op:"IS_NAN"}};if(SW(t.value))return{unaryFilter:{field:pm(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CW(t.value))return{unaryFilter:{field:pm(t.field),op:"IS_NOT_NAN"}};if(SW(t.value))return{unaryFilter:{field:pm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pm(t.field),op:Jye(t.op),value:t.value}}})(n):n instanceof tc?(function(t){let i=t.getFilters().map(r=>X$(r));return i.length===1?i[0]:{compositeFilter:{op:Zye(t.op),filters:i}}})(n):qt(54877,{filter:n})}function Y$(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xv=class n{constructor(e,t,i,r,s=sn.min(),o=sn.min(),a=Zr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kL=class{constructor(e){this.yt=e}};function eve(n){let e=Xye({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?EL(e,e.limit,"L"):e}var MT=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ei(e.integerValue));else if("doubleValue"in e){let i=Ei(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),bT(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=_l(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(yl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?M$(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):A$(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):qt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};this.Ft(t,55);for(let r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=Hv,s=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ei(s)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){let i=e.values||[];this.Ft(t,50);for(let r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ft.fromName(e).path.forEach(i=>{this.Ft(t,60),this.Ut(i,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};MT.Kt=new MT;var NL=class{constructor(){this.Cn=new OL}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Xh.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Xh.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}},OL=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Sr(pr.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Sr(pr.comparator)).toArray()}};var PXe=new Uint8Array(0);var BW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q$=41943040,Ao=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Ao.DEFAULT_COLLECTION_PERCENTILE=10,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ao.DEFAULT=new Ao(Q$,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ao.DISABLED=new Ao(-1,0,0);var Yv=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var zW="LruGarbageCollector",tve=1048576;function HW([n,e],[t,i]){let r=En(n,t);return r===0?En(e,i):r}var LL=class{constructor(e){this.Ir=e,this.buffer=new Sr(HW),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();HW(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},FL=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){et(zW,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fm(t)?et(zW,"Ignoring IndexedDB error during garbage collection: ",t):await WT(t)}await this.Vr(3e5)})}},VL=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(PF.ce);let i=new LL(t);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(BW)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BW):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),hm()<=mn.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function nve(n,e){return new VL(n,e)}var UL=class{constructor(){this.changes=new vl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var BL=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zL=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Vv(i.mutation,r,jh.empty(),_s.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,On()).next(()=>i))}getLocalViewOfDocuments(e,t,i=On()){let r=Gh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=kv();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Gh();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,On()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Ku(),o=Lv(),a=(function(){return Lv()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof km)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Vv(u.mutation,l,u.mutation.getFieldMask(),_s.now())):o.set(l.key,jh.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>a.set(l,new BL(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let i=Lv(),r=new qi((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||jh.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||On()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=V$();u.forEach(h=>{if(!s.has(h)){let p=H$(t.get(h),i.get(h));p!==null&&d.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Te.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return Ft.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bye(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Te.resolve(Gh()),a=Bv,c=s;return o.next(l=>Te.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Te.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,On())).next(u=>({batchId:a,changes:Tye(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ft(t)).next(i=>{let r=kv();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=kv();return this.indexManager.getCollectionParents(e,s).next(a=>Te.forEach(a,c=>{let l=(function(d,h){return new Mm(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,pa.newInvalidDocument(u)))});let a=kv();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Vv(u.mutation,l,jh.empty(),_s.now()),XT(t,l)&&(a=a.insert(c,l))}),a})}};var HL=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ym(r.createTime)}})(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:eve(r.bundledQuery),readTime:ym(r.readTime)}})(t)),Te.resolve()}};var jL=class{constructor(){this.overlays=new qi(Ft.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Gh();return Te.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.St(e,t,s)}),Te.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){let r=Gh(),s=t.length+1,o=new Ft(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new qi((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Gh(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Gh(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Te.resolve(a)}St(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new SL(t,i));let s=this.qr.get(t);s===void 0&&(s=On(),this.qr.set(t,s)),this.qr.set(t,s.add(i.key))}};var GL=class{constructor(){this.sessionToken=Zr.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}};var Qv=class{constructor(){this.Qr=new Sr(nr.$r),this.Ur=new Sr(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new nr(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new nr(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){let t=new Ft(new pr([])),i=new nr(t,e),r=new nr(t,e+1),s=[];return this.Ur.forEachInRange([i,r],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ft(new pr([])),i=new nr(t,e),r=new nr(t,e+1),s=On();return this.Ur.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nr(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nr=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ft.comparator(e.key,t.key)||En(e.Yr,t.Yr)}static Kr(e,t){return En(e.Yr,t.Yr)||Ft.comparator(e.key,t.key)}};var WL=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sr(nr.$r)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new TL(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Zr=this.Zr.add(new nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.ei(i),s=r<0?0:r;return Te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?nye:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nr(t,0),r=new nr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],o=>{let a=this.Xr(o.Yr);s.push(a)}),Te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Sr(En);return t.forEach(r=>{let s=new nr(r,0),o=new nr(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{i=i.add(a.Yr)})}),Te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Ft.isDocumentKey(s)||(s=s.child(""));let o=new nr(new Ft(s),0),a=new Sr(En);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Yr)),!0)},o),Te.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(i=>{let r=this.Xr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Mi(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Te.forEach(t.mutations,r=>{let s=new nr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new nr(t,0),r=this.Zr.firstAfterOrEqual(i);return Te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var $L=class{constructor(e){this.ri=e,this.docs=(function(){return new qi(Ft.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():pa.newInvalidDocument(t))}getEntries(e,t){let i=Ku();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():pa.newInvalidDocument(r))}),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ku(),o=t.path,a=new Ft(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Z_e(J_e(u),i)<=0||(r.has(u.key)||XT(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Te.resolve(s)}getAllFromCollectionGroup(e,t,i,r){qt(9500)}ii(e,t){return Te.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new qL(this)}getSize(e){return Te.resolve(this.size)}},qL=class extends UL{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var KL=class{constructor(e){this.persistence=e,this.si=new vl(t=>OF(t),LF),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.oi=0,this._i=new Qv,this.targetCount=0,this.ai=Yv.ur()}forEachTarget(e,t){return this.si.forEach((i,r)=>t(r)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Yv(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Te.waitFor(s).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Te.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}};var DT=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new PF(0),this.li=!1,this.li=!0,this.hi=new GL,this.referenceDelegate=e(this),this.Pi=new KL(this),this.indexManager=new NL,this.remoteDocumentCache=(function(r){return new $L(r)})(i=>this.referenceDelegate.Ti(i)),this.serializer=new kL(t),this.Ii=new HL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new WL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){et("MemoryPersistence","Starting transaction:",e);let r=new XL(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,t){return Te.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}},XL=class extends cL{constructor(e){super(),this.currentSequenceNumber=e}},YL=class n{constructor(e){this.persistence=e,this.Ri=new Qv,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw qt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(r=>this.fi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,i=>{let r=Ft.fromPath(i);return this.gi(e,r).next(s=>{s||t.removeEntry(r,sn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},RT=class n{constructor(e,t){this.persistence=e,this.pi=new vl(i=>iye(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=nve(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?Te.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,t).next(a=>{a||(i++,s.removeEntry(o,sn.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mT(e.data.value)),t}br(e,t,i){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.pi.get(t);return Te.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var QL=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=On(),r=On();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var JL=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ZL=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $9()?8:tye(so())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new JL;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(hm()<=mn.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",fm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(hm()<=mn.DEBUG&&et("QueryEngine","Query:",fm(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(hm()<=mn.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",fm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Za(t))):Te.resolve())}ys(e,t){if(RW(t))return Te.resolve(null);let i=Za(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=EL(t,null,"F"),i=Za(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=On(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,EL(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,i,r){return RW(t)||r.isEqual(sn.min())?Te.resolve(null):this.ps.getDocuments(e,i).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,i,r)?Te.resolve(null):(hm()<=mn.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fm(t)),this.vs(e,o,t,Q_e(r,Bv)).next(a=>a))})}Ds(e,t){let i=new Sr(L$(e));return t.forEach((r,s)=>{XT(e,s)&&(i=i.add(s))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,i){return hm()<=mn.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",fm(t)),this.ps.getDocumentsMatchingQuery(e,t,Xh.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var VF="LocalStore",ive=3e8,eF=class{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new qi(En),this.xs=new vl(s=>OF(s),LF),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function rve(n,e,t,i){return new eF(n,e,t,i)}async function J$(n,e){let t=An(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=On();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function Z$(n){let e=An(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function sve(n,e){let t=An(n),i=e.snapshotVersion,r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,d)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Zr.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),(function(b,g,v){return b.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=ive?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(h,p,u)&&a.push(t.Pi.updateTargetData(s,p))});let c=Ku(),l=On();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(ove(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!i.isEqual(sn.min())){let u=t.Pi.getLastRemoteSnapshotVersion(s).next(d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Te.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=r,s))}function ove(n,e,t){let i=On(),r=On();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ku();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(sn.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):et(VF,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:r}})}function ave(n,e){let t=An(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Pi.getTargetData(i,e).next(s=>s?(r=s,Te.resolve(r)):t.Pi.allocateTargetId(i).next(o=>(r=new Xv(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function tF(n,e,t){let i=An(n),r=i.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Fm(o))throw o;et(VF,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function jW(n,e,t){let i=An(n),r=sn.min(),s=On();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=An(c),h=d.xs.get(u);return h!==void 0?Te.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)})(i,o,Za(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,e,t?r:sn.min(),t?s:On())).next(a=>(cve(i,wye(e),a),{documents:a,Qs:s})))}function cve(n,e,t){let i=n.Os.get(e)||sn.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Os.set(e,i)}var PT=class{constructor(){this.activeTargetIds=Aye()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nF=class{constructor(){this.Mo=new PT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new PT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iF=class{Oo(e){}shutdown(){}};var GW="ConnectivityMonitor",kT=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(GW,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){et(GW,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var pT=null;function rF(){return pT===null?pT=(function(){return 268435456+Math.round(2147483648*Math.random())})():pT++,"0x"+pT.toString(16)}var QO="RestConnection",lve={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},sF=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===uL?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,s){let o=rF(),a=this.zo(e,t.toUriEncodedString());et(QO,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,s);let{host:l}=new URL(a),u=_v(l);return this.Jo(e,a,c,i,u).then(d=>(et(QO,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Uv(QO,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Ho(e,t,i,r,s,o){return this.Go(e,t,i,r,s)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,t){let i=lve[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}};var oF=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Qr="WebChannelConnection",aF=class extends sF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,s){let o=rF();return new Promise((a,c)=>{let l=new HO;l.setWithCredentials(!0),l.listenOnce(jO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pv.NO_ERROR:let d=l.getResponseJson();et(Qr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Pv.TIMEOUT:et(Qr,`RPC '${e}' ${o} timed out`),c(new Mt(je.DEADLINE_EXCEEDED,"Request time out"));break;case Pv.HTTP_ERROR:let h=l.getStatus();if(et(Qr,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let b=(function(v){let P=v.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(P)>=0?P:je.UNKNOWN})(_.status);c(new Mt(b,_.message))}else c(new Mt(je.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Mt(je.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{et(Qr,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);et(Qr,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}T_(e,t,i){let r=rF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$O(),a=WO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");et(Qr,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.I_(d);let h=!1,p=!1,_=new oF({Yo:g=>{p?et(Qr,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(et(Qr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),et(Qr,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},Zo:()=>d.close()}),b=(g,v,P)=>{g.listen(v,R=>{try{P(R)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,dm.EventType.OPEN,()=>{p||(et(Qr,`RPC '${e}' stream ${r} transport opened.`),_.o_())}),b(d,dm.EventType.CLOSE,()=>{p||(p=!0,et(Qr,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(d))}),b(d,dm.EventType.ERROR,g=>{p||(p=!0,Uv(Qr,`RPC '${e}' stream ${r} transport errored. Name:`,g.name,"Message:",g.message),_.a_(new Mt(je.UNAVAILABLE,"The operation could not be completed")))}),b(d,dm.EventType.MESSAGE,g=>{if(!p){let v=g.data[0];Mi(!!v,16349);let P=v,R=P?.error||P[0]?.error;if(R){et(Qr,`RPC '${e}' stream ${r} received error:`,R);let N=R.status,U=(function(w){let y=tr[w];if(y!==void 0)return G$(y)})(N),O=R.message;U===void 0&&(U=je.INTERNAL,O="Unknown error status: "+N+" with message "+R.message),p=!0,_.a_(new Mt(U,O)),d.close()}else et(Qr,`RPC '${e}' stream ${r} received:`,v),_.u_(v)}}),b(a,GO.STAT_EVENT,g=>{g.stat===dT.PROXY?et(Qr,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===dT.NOPROXY&&et(Qr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function JO(){return typeof document<"u"?document:null}function eq(n){return new DL(n,!0)}var NT=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var WW="PersistentStream",cF=class{constructor(e,t,i,r,s,o,a,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(gl(t.toString()),gl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===t&&this.G_(i,r)},i=>{e(()=>{let r=new Mt(je.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,t){let i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return et(WW,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(et(WW,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lF=class extends cF{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=$ye(this.serializer,e),i=(function(s){if(!("targetChange"in s))return sn.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?sn.min():o.readTime?ym(o.readTime):sn.min()})(e);return this.listener.H_(t,i)}Y_(e){let t={};t.database=UW(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=wL(c)?{documents:qye(s,c)}:{query:Kye(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jye(s,o.resumeToken);let l=RL(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(sn.min())>0){a.readTime=Hye(s,o.snapshotVersion.toTimestamp());let l=RL(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=Yye(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){let t={};t.database=UW(this.serializer),t.removeTarget=e,this.q_(t)}};var uF=class{},dF=class extends uF{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Mt(je.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,PL(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Mt(je.UNKNOWN,s.toString())})}Ho(e,t,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,PL(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Mt(je.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},hF=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gl(t),this.aa=!1):et("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Nm="RemoteStore",fF=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{n0(this)&&(et(Nm,"Restarting streams for network reachability change."),await(async function(c){let l=An(c);l.Ea.add(4),await t0(l),l.Ra.set("Unknown"),l.Ea.delete(4),await YT(l)})(this))})}),this.Ra=new hF(i,r)}};async function YT(n){if(n0(n))for(let e of n.da)await e(!0)}async function t0(n){for(let e of n.da)await e(!1)}function tq(n,e){let t=An(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),HF(t)?zF(t):Vm(t).O_()&&BF(t,e))}function UF(n,e){let t=An(n),i=Vm(t);t.Ia.delete(e),i.O_()&&nq(t,e),t.Ia.size===0&&(i.O_()?i.L_():n0(t)&&t.Ra.set("Unknown"))}function BF(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vm(n).Y_(e)}function nq(n,e){n.Va.Ue(e),Vm(n).Z_(e)}function zF(n){n.Va=new ML({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vm(n).start(),n.Ra.ua()}function HF(n){return n0(n)&&!Vm(n).x_()&&n.Ia.size>0}function n0(n){return An(n).Ea.size===0}function iq(n){n.Va=void 0}async function uve(n){n.Ra.set("Online")}async function dve(n){n.Ia.forEach((e,t)=>{BF(n,e)})}async function hve(n,e){iq(n),HF(n)?(n.Ra.ha(e),zF(n)):n.Ra.set("Unknown")}async function fve(n,e,t){if(n.Ra.set("Online"),e instanceof CT&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(i){et(Nm,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $W(n,i)}else if(e instanceof _m?n.Va.Ze(e):e instanceof ST?n.Va.st(e):n.Va.tt(e),!t.isEqual(sn.min()))try{let i=await Z$(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(Zr.EMPTY_BYTE_STRING,u.snapshotVersion)),nq(s,c);let d=new Xv(u.target,c,l,u.sequenceNumber);BF(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){et(Nm,"Failed to raise snapshot:",i),await $W(n,i)}}async function $W(n,e,t){if(!Fm(e))throw e;n.Ea.add(1),await t0(n),n.Ra.set("Offline"),t||(t=()=>Z$(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{et(Nm,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await YT(n)})}async function qW(n,e){let t=An(n);t.asyncQueue.verifyOperationInProgress(),et(Nm,"RemoteStore received new credentials");let i=n0(t);t.Ea.add(3),await t0(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await YT(t)}async function pve(n,e){let t=An(n);e?(t.Ea.delete(2),await YT(t)):e||(t.Ea.add(2),await t0(t),t.Ra.set("Unknown"))}function Vm(n){return n.ma||(n.ma=(function(t,i,r){let s=An(t);return s.sa(),new lF(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Xo:uve.bind(null,n),t_:dve.bind(null,n),r_:hve.bind(null,n),H_:fve.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),HF(n)?zF(n):n.Ra.set("Unknown")):(await n.ma.stop(),iq(n))})),n.ma}var pF=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new $u,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function rq(n,e){if(gl("AsyncQueue",`${e}: ${n}`),Fm(n))return new Mt(je.UNAVAILABLE,`${e}: ${n}`);throw n}var OT=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ft.comparator(t.key,i.key):(t,i)=>Ft.comparator(t.key,i.key),this.keyedMap=kv(),this.sortedSet=new qi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var LT=class{constructor(){this.ga=new qi(Ft.comparator)}track(e){let t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qt(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}},Om=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,OT.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&KT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var mF=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},gF=class{constructor(){this.queries=KW(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){let r=An(t),s=r.queries;r.queries=KW(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(i)})})(this,new Mt(je.ABORTED,"Firestore shutting down"))}};function KW(){return new vl(n=>O$(n),KT)}async function mve(n,e){let t=An(n),i=3,r=e.query,s=t.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new mF,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await t.onListen(r,!0);break;case 1:s.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=rq(o,`Initialization of query '${fm(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&jF(t)}async function gve(n,e){let t=An(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _ve(n,e){let t=An(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(r)&&(i=!0);o.wa=r}}i&&jF(t)}function yve(n,e,t){let i=An(n),r=i.queries.get(e);if(r)for(let s of r.Sa)s.onError(t);i.queries.delete(e)}function jF(n){n.Ca.forEach(e=>{e.next()})}var _F,XW;(XW=_F||(_F={})).Ma="default",XW.Cache="cache";var yF=class{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Om(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Om.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_F.Cache}};var FT=class{constructor(e){this.key=e}},VT=class{constructor(e){this.key=e}},vF=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=On(),this.mutatedKeys=On(),this.eu=L$(e),this.tu=new OT(this.eu)}get nu(){return this.Ya}ru(e,t){let i=t?t.iu:new LT,r=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),p=XT(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),g=!1;h&&p?h.data.isEqual(p.data)?_!==b&&(i.track({type:3,doc:p}),g=!0):this.su(h,p)||(i.track({type:2,doc:p}),g=!0,(c&&this.eu(p,c)>0||l&&this.eu(p,l)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),g=!0):h&&!p&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(p?(o=o.add(p),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{tu:o,iu:i,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((u,d)=>(function(p,_){let b=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Rt:g})}};return b(p)-b(_)})(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(i),r=r??!1;let a=t&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new Om(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new LT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=On(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});let t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new VT(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new FT(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=On();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Om.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},GF="SyncEngine",bF=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},xF=class{constructor(e){this.key=e,this.hu=!1}},wF=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vl(a=>O$(a),KT),this.Iu=new Map,this.Eu=new Set,this.du=new qi(Ft.comparator),this.Au=new Map,this.Ru=new Qv,this.Vu={},this.mu=new Map,this.fu=Yv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function vve(n,e,t=!0){let i=lq(n),r,s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await sq(i,e,t,!0),r}async function bve(n,e){let t=lq(n);await sq(t,e,!0,!1)}async function sq(n,e,t,i){let r=await ave(n.localStore,Za(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await xve(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&tq(n.remoteStore,r),a}async function xve(n,e,t,i,r){n.pu=(d,h,p)=>(async function(b,g,v,P){let R=g.view.ru(v);R.Cs&&(R=await jW(b.localStore,g.query,!1).then(({documents:I})=>g.view.ru(I,R)));let N=P&&P.targetChanges.get(g.targetId),U=P&&P.targetMismatches.get(g.targetId)!=null,O=g.view.applyChanges(R,b.isPrimaryClient,N,U);return QW(b,g.targetId,O.au),O.snapshot})(n,d,h,p);let s=await jW(n.localStore,e,!0),o=new vF(e,s.Qs),a=o.ru(s.documents),c=Kv.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);QW(n,t,l.au);let u=new bF(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function wve(n,e,t){let i=An(n),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(o=>!KT(o,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await tF(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&UF(i.remoteStore,r.targetId),EF(i,r.targetId)}).catch(WT)):(EF(i,r.targetId),await tF(i.localStore,r.targetId,!0))}async function Eve(n,e){let t=An(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),UF(t.remoteStore,i.targetId))}async function oq(n,e){let t=An(n);try{let i=await sve(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Au.get(s);o&&(Mi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Mi(o.hu,14607):r.removedDocuments.size>0&&(Mi(o.hu,42227),o.hu=!1))}),await cq(t,i,e)}catch(i){await WT(i)}}function YW(n,e,t){let i=An(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=An(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Sa)h.va(a)&&(l=!0)}),l&&jF(c)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ive(n,e,t){let i=An(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Au.get(e),s=r&&r.key;if(s){let o=new qi(Ft.comparator);o=o.insert(s,pa.newNoDocument(s,sn.min()));let a=On().add(s),c=new TT(sn.min(),new Map,new qi(En),o,a);await oq(i,c),i.du=i.du.remove(s),i.Au.delete(e),WF(i)}else await tF(i.localStore,e,!1).then(()=>EF(i,e,t)).catch(WT)}function EF(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||aq(n,i)})}function aq(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(UF(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),WF(n))}function QW(n,e,t){for(let i of t)i instanceof FT?(n.Ru.addReference(i.key,e),Tve(n,i)):i instanceof VT?(et(GF,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||aq(n,i.key)):qt(19791,{wu:i})}function Tve(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(et(GF,"New document in limbo: "+t),n.Eu.add(i),WF(n))}function WF(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ft(pr.fromString(e)),i=n.fu.next();n.Au.set(i,new xF(t)),n.du=n.du.insert(t,i),tq(n.remoteStore,new Xv(Za(FF(t.path)),i,"TargetPurposeLimboResolution",PF.ce))}}async function cq(n,e,t){let i=An(n),r=[],s=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,c)=>{o.push(i.pu(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient){let u=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;i.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){r.push(l);let u=QL.As(c.targetId,l);s.push(u)}}))}),await Promise.all(o),i.Pu.H_(r),await(async function(c,l){let u=An(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Te.forEach(l,h=>Te.forEach(h.Es,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>Te.forEach(h.ds,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Fm(d))throw d;et(VF,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let p=u.Ms.get(h),_=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(h,b)}}})(i.localStore,s))}async function Sve(n,e){let t=An(n);if(!t.currentUser.isEqual(e)){et(GF,"User change. New user:",e.toKey());let i=await J$(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Mt(je.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cq(t,i.Ls)}}function Cve(n,e){let t=An(n),i=t.Au.get(e);if(i&&i.hu)return On().add(i.key);{let r=On(),s=t.Iu.get(e);if(!s)return r;for(let o of s){let a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function lq(n){let e=An(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ive.bind(null,e),e.Pu.H_=_ve.bind(null,e.eventManager),e.Pu.yu=yve.bind(null,e.eventManager),e}var uq=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=eq(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return rve(this.persistence,new ZL,t.initialUser,this.serializer)}Cu(t){return new DT(YL.mi,this.serializer)}Du(t){return new nF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),IF=class extends uq{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mi(this.persistence.referenceDelegate instanceof RT,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new FL(i,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Ao.withCacheSize(this.cacheSizeBytes):Ao.DEFAULT;return new DT(i=>RT.mi(i,t),this.serializer)}};var Ave=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YW(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sve.bind(null,this.syncEngine),await pve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gF})()}createDatastore(t){let i=eq(t.databaseInfo.databaseId),r=(function(o){return new aF(o)})(t.databaseInfo);return(function(o,a,c,l){return new dF(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new fF(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>YW(this.syncEngine,i,0),(function(){return kT.v()?new kT:new iF})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new wF(s,o,a,c,l,u);return d&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){let r=An(i);et(Nm,"RemoteStore shutting down."),r.Ea.add(5),await t0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var TF=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xu="FirestoreClient",SF=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Jr.UNAUTHENTICATED,this.clientId=yT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{et(Xu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(et(Xu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $u;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=rq(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function ZO(n,e){n.asyncQueue.verifyOperationInProgress(),et(Xu,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await J$(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function JW(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Mve(n);et(Xu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>qW(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>qW(e.remoteStore,r)),n._onlineComponents=e}async function Mve(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){et(Xu,"Using user provided OfflineComponentProvider");try{await ZO(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===je.FAILED_PRECONDITION||r.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Uv("Error using user provided cache. Falling back to memory cache: "+t),await ZO(n,new uq)}}else et(Xu,"Using default OfflineComponentProvider"),await ZO(n,new IF(void 0));return n._offlineComponents}async function Dve(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(et(Xu,"Using user provided OnlineComponentProvider"),await JW(n,n._uninitializedComponentsProvider._online)):(et(Xu,"Using default OnlineComponentProvider"),await JW(n,new Ave))),n._onlineComponents}async function ZW(n){let e=await Dve(n),t=e.eventManager;return t.onListen=vve.bind(null,e.syncEngine),t.onUnlisten=wve.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bve.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Eve.bind(null,e.syncEngine),t}function dq(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var e$=new Map;var Rve="firestore.googleapis.com",t$=!0,UT=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Mt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rve,this.ssl=t$}else this.host=e.host,this.ssl=e.ssl??t$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q$;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tve)throw new Mt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K_e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dq(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Mt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Mt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Mt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},CF=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Mt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new tL;switch(i.type){case"firstParty":return new rL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Mt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=e$.get(t);i&&(et("ComponentProvider","Removing Datastore"),e$.delete(t),i.terminate())})(this),Promise.resolve()}};var BT=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ml=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new AF(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Zv(t,n._jsonSchema))return new n(e,i||null,new Ft(pr.fromString(t.referencePath)))}};ml._jsonSchemaVersion="firestore/documentReference/1.0",ml._jsonSchema={type:ir("string",ml._jsonSchemaVersion),referencePath:ir("string")};var AF=class n extends BT{constructor(e,t,i){super(e,t,FF(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ml(this.firestore,null,new Ft(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var n$="AsyncQueue",zT=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NT(this,"async_queue_retry"),this._c=()=>{let i=JO();i&&et(n$,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let t=JO();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=JO();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new $u;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fm(e))throw e;et(n$,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,gl("INTERNAL UNHANDLED ERROR: ",i$(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=pF.createAndSchedule(this,e,t,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&qt(47125,{Pc:i$(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function i$(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function r$(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Jv=class extends CF{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new zT,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zT(e),this._firestoreClient=void 0,await e}}};function Pve(n){if(n._terminated)throw new Mt(je.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kve(n),n._firestoreClient}function kve(n){let e=n._freezeSettings(),t=(function(r,s,o,a){return new lL(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,dq(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new SF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){let s=r?._online.build();return{_offline:r?._offline.build(s),_online:s}})(n._componentsProvider))}var vm=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Zr.fromBase64String(e))}catch(t){throw new Mt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zv(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};vm._jsonSchemaVersion="firestore/bytes/1.0",vm._jsonSchema={type:ir("string",vm._jsonSchemaVersion),bytes:ir("string")};var HT=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Mt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bm=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Zv(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};bm._jsonSchemaVersion="firestore/geoPoint/1.0",bm._jsonSchema={type:ir("string",bm._jsonSchemaVersion),latitude:ir("number"),longitude:ir("number")};var xm=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zv(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Mt(je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};xm._jsonSchemaVersion="firestore/vectorValue/1.0",xm._jsonSchema={type:ir("string",xm._jsonSchemaVersion),vectorValues:ir("object")};var Nve=new RegExp("[~\\*/\\[\\]]");function Ove(n,e,t){if(e.search(Nve)>=0)throw s$(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new HT(...e.split("."))._internalPath}catch{throw s$(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function s$(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Mt(je.INVALID_ARGUMENT,a+n+c)}var jT=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ml(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(hq("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},MF=class extends jT{data(){return super.data()}};function hq(n,e){return typeof e=="string"?Ove(n,e):e instanceof HT?e._internalPath:e._delegate._internalPath}function Lve(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Mt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DF=class{convertValue(e,t="none"){switch(qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return e0(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){let t=e.fields?.[Hv].arrayValue?.values?.map(i=>Ei(i.doubleValue));return new xm(t)}convertGeoPoint(e){return new bm(Ei(e.latitude),Ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=qT(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zv(e));default:return null}}convertTimestamp(e){let t=_l(e);return new _s(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=pr.fromString(e);Mi(Y$(i),9688,{name:e});let r=new ET(i.get(1),i.get(3)),s=new Ft(i.popFirst(5));return r.isEqual(t)||gl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var $h=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qh=class n extends jT{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(hq("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};qh._jsonSchemaVersion="firestore/documentSnapshot/1.0",qh._jsonSchema={type:ir("string",qh._jsonSchemaVersion),bundleSource:ir("string","DocumentSnapshot"),bundleName:ir("string"),bundle:ir("string")};var wm=class extends qh{data(e={}){return super.data(e)}},Em=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $h(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new wm(this._firestore,this._userDataWriter,i.key,i,new $h(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Mt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new wm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $h(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new wm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $h(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Fve(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Fve(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:n})}}Em._jsonSchemaVersion="firestore/querySnapshot/1.0",Em._jsonSchema={type:ir("string",Em._jsonSchemaVersion),bundleSource:ir("string","QuerySnapshot"),bundleName:ir("string"),bundle:ir("string")};var GT=class extends DF{constructor(e){super(),this.firestore=e}convertBytes(e){return new vm(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ml(this.firestore,null,t)}};function fq(n,...e){n=Bu(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||r$(e[i])||(t=e[i++]);let r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(r$(e[i])){let c=e[i];e[i]=c.next?.bind(c),e[i+1]=c.error?.bind(c),e[i+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof ml)o=KO(n.firestore,Jv),a=FF(n._key.path),s={next:c=>{e[i]&&e[i](Vve(o,n,c))},error:e[i+1],complete:e[i+2]};else{let c=KO(n,BT);o=KO(c.firestore,Jv),a=c._query;let l=new GT(o);s={next:u=>{e[i]&&e[i](new Em(o,l,c,u))},error:e[i+1],complete:e[i+2]},Lve(n._query)}return(function(l,u,d,h){let p=new TF(h),_=new yF(u,p,d);return l.asyncQueue.enqueueAndForget(async()=>mve(await ZW(l),_)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>gve(await ZW(l),_))}})(Pve(o),a,r,s)}function Vve(n,e,t){let i=t.docs.get(e._key),r=new GT(n);return new qh(n,r,e._key,i,new $h(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Lm=r})(cm),Hu(new da("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Jv(new nL(i.getProvider("auth-internal")),new sL(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Mt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ET(l.options.projectId,u)})(o,r),o);return s=ie({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),sl(_W,yW,e),sl(_W,yW,"esm2020")})();var QT=function(){return QT=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},QT.apply(this,arguments)};var Bve={includeMetadataChanges:!1};function $F(n,e){return e===void 0&&(e=Bve),new _t(function(t){var i=fq(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function pq(n){return $F(n,{includeMetadataChanges:!0})}function mq(n,e){return e===void 0&&(e={}),pq(n).pipe(pt(function(t){return qF(t,e)}))}function qF(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:QT(QT({},i),(t={},t[e.idField]=n.id,t))}function gq(n){return $F(n,{includeMetadataChanges:!0}).pipe(pt(function(e){return e.docs}))}function _q(n,e){return e===void 0&&(e={}),gq(n).pipe(pt(function(t){return t.map(function(i){return qF(i,e)})}))}var yq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vq={};var bl,KF;(function(){var n;function e(I,w){function y(){}y.prototype=w.prototype,I.D=w.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(x,S,M){for(var C=Array(arguments.length-2),re=2;re<arguments.length;re++)C[re-2]=arguments[re];return w.prototype[S].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,y){y||(y=0);var x=Array(16);if(typeof w=="string")for(var S=0;16>S;++S)x[S]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(S=0;16>S;++S)x[S]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=I.g[0],y=I.g[1],S=I.g[2];var M=I.g[3],C=w+(M^y&(S^M))+x[0]+3614090360&4294967295;w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[2]+606105819&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[3]+3250441966&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[6]+2821735955&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[7]+4249261313&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[10]+4294925233&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[11]+2304563134&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(M^y&(S^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(S^w&(y^S))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=S+(y^M&(w^y))+x[14]+2792965006&4294967295,S=M+(C<<17&4294967295|C>>>15),C=y+(w^S&(M^w))+x[15]+1236535329&4294967295,y=S+(C<<22&4294967295|C>>>10),C=w+(S^M&(y^S))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[11]+643717713&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[0]+3921069994&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[15]+3634488961&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[4]+3889429448&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[3]+4107603335&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[8]+1163531501&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(S^M&(y^S))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^S&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=S+(w^y&(M^w))+x[7]+1735328473&4294967295,S=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(S^M))+x[12]+2368359562&4294967295,y=S+(C<<20&4294967295|C>>>12),C=w+(y^S^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[11]+1839030562&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[14]+4259657740&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[7]+4139469664&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[10]+3200236656&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[3]+3572445317&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[6]+76029189&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(y^S^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^S)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=S+(M^w^y)+x[15]+530742520&4294967295,S=M+(C<<16&4294967295|C>>>16),C=y+(S^M^w)+x[2]+3299628645&4294967295,y=S+(C<<23&4294967295|C>>>9),C=w+(S^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[14]+2878612391&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[5]+4237533241&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[10]+4293915773&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[1]+2240044497&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[6]+2734768916&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[13]+1309151649&4294967295,y=S+(C<<21&4294967295|C>>>11),C=w+(S^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~S))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=S+(w^(M|~y))+x[2]+718787259&4294967295,S=M+(C<<15&4294967295|C>>>17),C=y+(M^(S|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+M&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var y=w-this.blockSize,x=this.B,S=this.h,M=0;M<w;){if(S==0)for(;M<=y;)r(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<w;)if(x[S++]=I.charCodeAt(M++),S==this.blockSize){r(this,x),S=0;break}}else for(;M<w;)if(x[S++]=I[M++],S==this.blockSize){r(this,x),S=0;break}}this.h=S,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var y=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=y&255,y/=256;for(this.u(I),I=Array(16),w=y=0;4>w;++w)for(var x=0;32>x;x+=8)I[y++]=this.g[w]>>>x&255;return I};function s(I,w){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=w(I)}function o(I,w){this.h=w;for(var y=[],x=!0,S=I.length-1;0<=S;S--){var M=I[S]|0;x&&M==w||(y[S]=M,x=!1)}this.g=y}var a={};function c(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return g(l(-I));for(var w=[],y=1,x=0;I>=y;x++)w[x]=I/y|0,y*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return g(u(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=l(Math.pow(w,8)),x=d,S=0;S<I.length;S+=8){var M=Math.min(8,I.length-S),C=parseInt(I.substring(S,S+M),w);8>M?(M=l(Math.pow(w,M)),x=x.j(M).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),p=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-g(this).m();for(var I=0,w=1,y=0;y<this.g.length;y++){var x=this.i(y);I+=(0<=x?x:4294967296+x)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(b(this))return"-"+g(this).toString(I);for(var w=l(Math.pow(I,6)),y=this,x="";;){var S=N(y,w).g;y=v(y,S.j(w));var M=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,_(y))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=v(this,I),b(I)?-1:_(I)?0:1};function g(I){for(var w=I.g.length,y=[],x=0;x<w;x++)y[x]=~I.g[x];return new o(y,~I.h).add(h)}n.abs=function(){return b(this)?g(this):this},n.add=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0,S=0;S<=w;S++){var M=x+(this.i(S)&65535)+(I.i(S)&65535),C=(M>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);x=C>>>16,M&=65535,C&=65535,y[S]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function v(I,w){return I.add(g(w))}n.j=function(I){if(_(this)||_(I))return d;if(b(this))return b(I)?g(this).j(g(I)):g(g(this).j(I));if(b(I))return g(this.j(g(I)));if(0>this.l(p)&&0>I.l(p))return l(this.m()*I.m());for(var w=this.g.length+I.g.length,y=[],x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var S=0;S<I.g.length;S++){var M=this.i(x)>>>16,C=this.i(x)&65535,re=I.i(S)>>>16,Y=I.i(S)&65535;y[2*x+2*S]+=C*Y,P(y,2*x+2*S),y[2*x+2*S+1]+=M*Y,P(y,2*x+2*S+1),y[2*x+2*S+1]+=C*re,P(y,2*x+2*S+1),y[2*x+2*S+2]+=M*re,P(y,2*x+2*S+2)}for(x=0;x<w;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=w;x<2*w;x++)y[x]=0;return new o(y,0)};function P(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function R(I,w){this.g=I,this.h=w}function N(I,w){if(_(w))throw Error("division by zero");if(_(I))return new R(d,d);if(b(I))return w=N(g(I),w),new R(g(w.g),g(w.h));if(b(w))return w=N(I,g(w)),new R(g(w.g),w.h);if(30<I.g.length){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;0>=x.l(I);)y=U(y),x=U(x);var S=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!_(x);){var C=M.add(x);0>=C.l(I)&&(S=S.add(y),M=C),x=O(x,1),y=O(y,1)}return w=v(I,S.j(w)),new R(S,w)}for(S=d;0<=I.l(w);){for(y=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=l(y),C=M.j(w);b(C)||0<C.l(I);)y-=x,M=l(y),C=M.j(w);_(M)&&(M=h),S=S.add(M),I=v(I,C)}return new R(S,I)}n.A=function(I){return N(this,I).h},n.and=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)&I.i(x);return new o(y,this.h&I.h)},n.or=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)|I.i(x);return new o(y,this.h|I.h)},n.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)^I.i(x);return new o(y,this.h^I.h)};function U(I){for(var w=I.g.length+1,y=[],x=0;x<w;x++)y[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(y,I.h)}function O(I,w){var y=w>>5;w%=32;for(var x=I.g.length-y,S=[],M=0;M<x;M++)S[M]=0<w?I.i(M+y)>>>w|I.i(M+y+1)<<32-w:I.i(M+y);return new o(S,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,KF=vq.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,bl=vq.Integer=o}).apply(typeof yq<"u"?yq:typeof self<"u"?self:typeof window<"u"?window:{});var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xl={};var XF,zve,Um,YF,i0,ZT,QF,JF,ZF;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,A){return f==Array.prototype||f==Object.prototype||(f[E]=A.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof JT=="object"&&JT];for(var E=0;E<f.length;++E){var A=f[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function r(f,E){if(E)e:{var A=i;f=f.split(".");for(var L=0;L<f.length-1;L++){var $=f[L];if(!($ in A))break e;A=A[$]}f=f[f.length-1],L=A[f],E=E(L),E!=L&&E!=null&&e(A,f,{configurable:!0,writable:!0,value:E})}}function s(f,E){f instanceof String&&(f+="");var A=0,L=!1,$={next:function(){if(!L&&A<f.length){var te=A++;return{value:E(te,f[te]),done:!1}}return L=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}r("Array.prototype.values",function(f){return f||function(){return s(this,function(E,A){return A})}});var o=o||{},a=this||self;function c(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function l(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function u(f,E,A){return f.call.apply(f.bind,arguments)}function d(f,E,A){if(!f)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,L),f.apply(E,$)}}return function(){return f.apply(E,arguments)}}function h(f,E,A){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(f,E){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function _(f,E){function A(){}A.prototype=E.prototype,f.aa=E.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(L,$,te){for(var Re=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)Re[Vn-2]=arguments[Vn];return E.prototype[$].apply(L,Re)}}function b(f){let E=f.length;if(0<E){let A=Array(E);for(let L=0;L<E;L++)A[L]=f[L];return A}return[]}function g(f,E){for(let A=1;A<arguments.length;A++){let L=arguments[A];if(c(L)){let $=f.length||0,te=L.length||0;f.length=$+te;for(let Re=0;Re<te;Re++)f[$+Re]=L[Re]}else f.push(L)}}class v{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(f){return/^[\s\xa0]*$/.test(f)}function R(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function N(f){return N[" "](f),f}N[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function O(f,E,A){for(let L in f)E.call(A,f[L],L,f)}function I(f,E){for(let A in f)E.call(void 0,f[A],A,f)}function w(f){let E={};for(let A in f)E[A]=f[A];return E}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(f,E){let A,L;for(let $=1;$<arguments.length;$++){L=arguments[$];for(A in L)f[A]=L[A];for(let te=0;te<y.length;te++)A=y[te],Object.prototype.hasOwnProperty.call(L,A)&&(f[A]=L[A])}}function S(f){var E=1;f=f.split(":");let A=[];for(;0<E&&f.length;)A.push(f.shift()),E--;return f.length&&A.push(f.join(":")),A}function M(f){a.setTimeout(()=>{throw f},0)}function C(){var f=we;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class re{constructor(){this.h=this.g=null}add(E,A){let L=Y.get();L.set(E,A),this.h?this.h.next=L:this.g=L,this.h=L}}var Y=new v(()=>new le,f=>f.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,oe=!1,we=new re,Ae=()=>{let f=a.Promise.resolve(void 0);fe=()=>{f.then(Qe)}};var Qe=()=>{for(var f;f=C();){try{f.h.call(f.g)}catch(A){M(A)}var E=Y;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}oe=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var Vt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let A=()=>{};a.addEventListener("test",A,E),a.removeEventListener("test",A,E)}catch{}return f})();function Ht(f,E){if(rt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(U){e:{try{N(E.nodeName);var $=!0;break e}catch{}$=!1}$||(E=null)}}else A=="mouseover"?E=f.fromElement:A=="mouseout"&&(E=f.toElement);this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ue[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ht.aa.h.call(this)}}_(Ht,rt);var ue={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function ft(f,E,A,L,$){this.listener=f,this.proxy=null,this.src=E,this.type=A,this.capture=!!L,this.ha=$,this.key=++Xe,this.da=this.fa=!1}function tt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function jt(f){this.src=f,this.g={},this.h=0}jt.prototype.add=function(f,E,A,L,$){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var Re=Tt(f,E,L,$);return-1<Re?(E=f[Re],A||(E.fa=!1)):(E=new ft(E,this.src,te,!!L,$),E.fa=A,f.push(E)),E};function In(f,E){var A=E.type;if(A in f.g){var L=f.g[A],$=Array.prototype.indexOf.call(L,E,void 0),te;(te=0<=$)&&Array.prototype.splice.call(L,$,1),te&&(tt(E),f.g[A].length==0&&(delete f.g[A],f.h--))}}function Tt(f,E,A,L){for(var $=0;$<f.length;++$){var te=f[$];if(!te.da&&te.listener==E&&te.capture==!!A&&te.ha==L)return $}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),B={};function be(f,E,A,L,$){if(L&&L.once)return xe(f,E,A,L,$);if(Array.isArray(E)){for(var te=0;te<E.length;te++)be(f,E[te],A,L,$);return null}return A=ce(A),f&&f[me]?f.K(E,A,l(L)?!!L.capture:!!L,$):Se(f,E,A,!1,L,$)}function Se(f,E,A,L,$,te){if(!E)throw Error("Invalid event type");var Re=l($)?!!$.capture:!!$,Vn=k(f);if(Vn||(f[ye]=Vn=new jt(f)),A=Vn.add(E,A,L,Re,te),A.proxy)return A;if(L=Pe(),A.proxy=L,L.src=f,L.listener=A,f.addEventListener)Vt||($=Re),$===void 0&&($=!1),f.addEventListener(E.toString(),L,$);else if(f.attachEvent)f.attachEvent(Ge(E.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Pe(){function f(A){return E.call(f.src,f.listener,A)}let E=z;return f}function xe(f,E,A,L,$){if(Array.isArray(E)){for(var te=0;te<E.length;te++)xe(f,E[te],A,L,$);return null}return A=ce(A),f&&f[me]?f.L(E,A,l(L)?!!L.capture:!!L,$):Se(f,E,A,!0,L,$)}function Fe(f,E,A,L,$){if(Array.isArray(E))for(var te=0;te<E.length;te++)Fe(f,E[te],A,L,$);else L=l(L)?!!L.capture:!!L,A=ce(A),f&&f[me]?(f=f.i,E=String(E).toString(),E in f.g&&(te=f.g[E],A=Tt(te,A,L,$),-1<A&&(tt(te[A]),Array.prototype.splice.call(te,A,1),te.length==0&&(delete f.g[E],f.h--)))):f&&(f=k(f))&&(E=f.g[E.toString()],f=-1,E&&(f=Tt(E,A,L,$)),(A=-1<f?E[f]:null)&&Ce(A))}function Ce(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[me])In(E.i,f);else{var A=f.type,L=f.proxy;E.removeEventListener?E.removeEventListener(A,L,f.capture):E.detachEvent?E.detachEvent(Ge(A),L):E.addListener&&E.removeListener&&E.removeListener(L),(A=k(E))?(In(A,f),A.h==0&&(A.src=null,E[ye]=null)):tt(f)}}}function Ge(f){return f in B?B[f]:B[f]="on"+f}function z(f,E){if(f.da)f=!0;else{E=new Ht(E,this);var A=f.listener,L=f.ha||f.src;f.fa&&Ce(f),f=A.call(L,E)}return f}function k(f){return f=f[ye],f instanceof jt?f:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(f){return typeof f=="function"?f:(f[X]||(f[X]=function(E){return f.handleEvent(E)}),f[X])}function he(){ut.call(this),this.i=new jt(this),this.M=this,this.F=null}_(he,ut),he.prototype[me]=!0,he.prototype.removeEventListener=function(f,E,A,L){Fe(this,f,E,A,L)};function J(f,E){var A,L=f.F;if(L)for(A=[];L;L=L.F)A.push(L);if(f=f.M,L=E.type||E,typeof E=="string")E=new rt(E,f);else if(E instanceof rt)E.target=E.target||f;else{var $=E;E=new rt(L,f),x(E,$)}if($=!0,A)for(var te=A.length-1;0<=te;te--){var Re=E.g=A[te];$=Ze(Re,L,!0,E)&&$}if(Re=E.g=f,$=Ze(Re,L,!0,E)&&$,$=Ze(Re,L,!1,E)&&$,A)for(te=0;te<A.length;te++)Re=E.g=A[te],$=Ze(Re,L,!1,E)&&$}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var A=f.g[E],L=0;L<A.length;L++)tt(A[L]);delete f.g[E],f.h--}}this.F=null},he.prototype.K=function(f,E,A,L){return this.i.add(String(f),E,!1,A,L)},he.prototype.L=function(f,E,A,L){return this.i.add(String(f),E,!0,A,L)};function Ze(f,E,A,L){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var $=!0,te=0;te<E.length;++te){var Re=E[te];if(Re&&!Re.da&&Re.capture==A){var Vn=Re.listener,Bi=Re.ha||Re.src;Re.fa&&In(f.i,Re),$=Vn.call(Bi,L)!==!1&&$}}return $&&!L.defaultPrevented}function Ue(f,E,A){if(typeof f=="function")A&&(f=h(f,A));else if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function dt(f){f.g=Ue(()=>{f.g=null,f.i&&(f.i=!1,dt(f))},f.l);let E=f.h;f.h=null,f.m.apply(null,E)}class nt extends ut{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(f){ut.call(this),this.h=f,this.g={}}_(_e,ut);var Me=[];function vt(f){O(f.g,function(E,A){this.g.hasOwnProperty(A)&&Ce(E)},f),f.g={}}_e.prototype.N=function(){_e.aa.N.call(this),vt(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=a.JSON.stringify,He=a.JSON.parse,Rt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function j(){}j.prototype.h=null;function Be(f){return f.h||(f.h=f.i())}function ke(){}var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){rt.call(this,"d")}_(ge,rt);function pe(){rt.call(this,"c")}_(pe,rt);var We={},Ct=null;function Fn(){return Ct=Ct||new he}We.La="serverreachability";function Rn(f){rt.call(this,We.La,f)}_(Rn,rt);function Si(f){let E=Fn();J(E,new Rn(E))}We.STAT_EVENT="statevent";function Hr(f,E){rt.call(this,We.STAT_EVENT,f),this.stat=E}_(Hr,rt);function dr(f){let E=Fn();J(E,new Hr(E,f))}We.Ma="timingevent";function Sa(f,E){rt.call(this,We.Ma,f),this.size=E}_(Sa,rt);function Ho(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function jr(){this.g=!0}jr.prototype.xa=function(){this.g=!1};function Ec(f,E,A,L,$,te){f.info(function(){if(f.g)if(te)for(var Re="",Vn=te.split("&"),Bi=0;Bi<Vn.length;Bi++){var Un=Vn[Bi].split("=");if(1<Un.length){var Wr=Un[0];Un=Un[1];var $r=Wr.split("_");Re=2<=$r.length&&$r[1]=="type"?Re+(Wr+"="+Un+"&"):Re+(Wr+"=redacted&")}}else Re=null;else Re=te;return"XMLHTTP REQ ("+L+") [attempt "+$+"]: "+E+`
`+A+`
`+Re})}function Ca(f,E,A,L,$,te,Re){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+$+"]: "+E+`
`+A+`
`+te+" "+Re})}function jo(f,E,A,L){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ud(f,A)+(L?" "+L:"")})}function ss(f,E){f.info(function(){return"TIMEOUT: "+E})}jr.prototype.info=function(){};function Ud(f,E){if(!f.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var L=A[f];if(!(2>L.length)){var $=L[1];if(Array.isArray($)&&!(1>$.length)){var te=$[0];if(te!="noop"&&te!="stop"&&te!="close")for(var Re=1;Re<$.length;Re++)$[Re]=""}}}}return ht(A)}catch{return E}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Aa;function Tc(){}_(Tc,j),Tc.prototype.g=function(){return new XMLHttpRequest},Tc.prototype.i=function(){return{}},Aa=new Tc;function vo(f,E,A,L){this.j=f,this.i=E,this.l=A,this.R=L||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var qf={},Ma={};function iu(f,E,A){f.L=1,f.v=Vi(Rr(E)),f.m=A,f.P=!0,F(f,null)}function F(f,E){f.F=Date.now(),ne(f),f.A=Rr(f.v);var A=f.A,L=f.R;Array.isArray(L)||(L=[String(L)]),vx(A.i,"t",L),f.C=0,A=f.j.J,f.h=new Bd,f.g=T(f.j,A?E:null,!f.m),0<f.O&&(f.M=new nt(h(f.Y,f,f.g),f.O)),E=f.U,A=f.g,L=f.ca;var $="readystatechange";Array.isArray($)||($&&(Me[0]=$.toString()),$=Me);for(var te=0;te<$.length;te++){var Re=be(A,$[te],L||E.handleEvent,!1,E.h||E);if(!Re)break;E.g[Re.key]=Re}E=f.H?w(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Si(),Ec(f.i,f.u,f.A,f.l,f.R,f.m)}vo.prototype.ca=function(f){f=f.target;let E=this.M;E&&xs(f)==3?E.j():this.Y(f)},vo.prototype.Y=function(f){try{if(f==this.g)e:{let $r=xs(this.g);var E=this.g.Ba();let np=this.g.Z();if(!(3>$r)&&($r!=3||this.g&&(this.h.h||this.g.oa()||Ix(this.g)))){this.J||$r!=4||E==7||(E==8||0>=np?Si(3):Si(2)),De(this);var A=this.g.Z();this.X=A;t:if(G(this)){var L=Ix(this.g);f="";var $=L.length,te=xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ye(this),ze(this);var Re="";break t}this.h.i=new a.TextDecoder}for(E=0;E<$;E++)this.h.h=!0,f+=this.h.i.decode(L[E],{stream:!(te&&E==$-1)});L.length=0,this.h.g+=f,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=A==200,Ca(this.i,this.u,this.A,this.l,this.R,$r,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Vn,Bi=this.g;if((Vn=Bi.g?Bi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Vn)){var Un=Vn;break t}}Un=null}if(A=Un)jo(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,A);else{this.o=!1,this.s=3,dr(12),Ye(this),ze(this);break e}}if(this.P){A=!0;let qo;for(;!this.J&&this.C<Re.length;)if(qo=Z(this,Re),qo==Ma){$r==4&&(this.s=4,dr(14),A=!1),jo(this.i,this.l,null,"[Incomplete Response]");break}else if(qo==qf){this.s=4,dr(15),jo(this.i,this.l,Re,"[Invalid Chunk]"),A=!1;break}else jo(this.i,this.l,qo,null),Ke(this,qo);if(G(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$r!=4||Re.length!=0||this.h.h||(this.s=1,dr(16),A=!1),this.o=this.o&&A,!A)jo(this.i,this.l,Re,"[Invalid Chunked Response]"),Ye(this),ze(this);else if(0<Re.length&&!this.W){this.W=!0;var Wr=this.j;Wr.g==this&&Wr.ba&&!Wr.M&&(Wr.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),tp(Wr),Wr.M=!0,dr(11))}}else jo(this.i,this.l,Re,null),Ke(this,Re);$r==4&&Ye(this),this.o&&!this.J&&($r==4?Gr(this.j,this):(this.o=!1,ne(this)))}else Tx(this.g),A==400&&0<Re.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Ye(this),ze(this)}}}catch{}finally{}};function G(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Z(f,E){var A=f.C,L=E.indexOf(`
`,A);return L==-1?Ma:(A=Number(E.substring(A,L)),isNaN(A)?qf:(L+=1,L+A>E.length?Ma:(E=E.slice(L,L+A),f.C=L+A,E)))}vo.prototype.cancel=function(){this.J=!0,Ye(this)};function ne(f){f.S=Date.now()+f.I,q(f,f.I)}function q(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ho(h(f.ba,f),E)}function De(f){f.B&&(a.clearTimeout(f.B),f.B=null)}vo.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(ss(this.i,this.A),this.L!=2&&(Si(),dr(17)),Ye(this),this.s=2,ze(this)):q(this,this.S-f)};function ze(f){f.j.G==0||f.J||Gr(f.j,f)}function Ye(f){De(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,vt(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function Ke(f,E){try{var A=f.j;if(A.G!=0&&(A.g==f||Tn(A.h,f))){if(!f.K&&Tn(A.h,f)&&A.G==3){try{var L=A.Da.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var $=L;if($[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)Cc(A),lu(A);else break e;ep(A),dr(18)}}else A.za=$[1],0<A.za-A.T&&37500>$[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ho(h(A.Za,A),6e3));if(1>=en(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Pa(A,11)}else if((f.K||A.g==f)&&Cc(A),!P(E))for($=A.Da.g.parse(E),E=0;E<$.length;E++){let Un=$[E];if(A.T=Un[0],Un=Un[1],A.G==2)if(Un[0]=="c"){A.K=Un[1],A.ia=Un[2];let Wr=Un[3];Wr!=null&&(A.la=Wr,A.j.info("VER="+A.la));let $r=Un[4];$r!=null&&(A.Aa=$r,A.j.info("SVER="+A.Aa));let np=Un[5];np!=null&&typeof np=="number"&&0<np&&(L=1.5*np,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;let qo=f.g;if(qo){let Sx=qo.g?qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sx){var te=L.h;te.g||Sx.indexOf("spdy")==-1&&Sx.indexOf("quic")==-1&&Sx.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(wn(te,te.h),te.h=null))}if(L.D){let KD=qo.g?qo.g.getResponseHeader("X-HTTP-Session-Id"):null;KD&&(L.ya=KD,Xt(L.I,L.D,KD))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var Re=f;if(L.qa=m(L,L.J?L.ia:null,L.W),Re.K){_n(L.h,Re);var Vn=Re,Bi=L.L;Bi&&(Vn.I=Bi),Vn.B&&(De(Vn),ne(Vn)),L.g=Re}else L_(L);0<A.i.length&&jd(A)}else Un[0]!="stop"&&Un[0]!="close"||Pa(A,7);else A.G==3&&(Un[0]=="stop"||Un[0]=="close"?Un[0]=="stop"?Pa(A,7):Qf(A):Un[0]!="noop"&&A.l&&A.l.ta(Un),A.v=0)}}Si(4)}catch{}}var bt=class{constructor(f,E){this.g=f,this.map=E}};function At(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function en(f){return f.h?1:f.g?f.g.size:0}function Tn(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function wn(f,E){f.g?f.g.add(E):f.h=E}function _n(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}At.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function yn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(let A of f.g.values())E=E.concat(A.D);return E}return b(f.i)}function lt(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var E=[],A=f.length,L=0;L<A;L++)E.push(f[L]);return E}E=[],A=0;for(L in f)E[A++]=f[L];return E}function Jn(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var E=[];f=f.length;for(var A=0;A<f;A++)E.push(A);return E}E=[],A=0;for(let L in f)E[A++]=L;return E}}}function ot(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var A=Jn(f),L=lt(f),$=L.length,te=0;te<$;te++)E.call(void 0,L[te],A&&A[te],f)}var Li=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vs(f,E){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var L=f[A].indexOf("="),$=null;if(0<=L){var te=f[A].substring(0,L);$=f[A].substring(L+1)}else te=f[A];E(te,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ai(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ai){this.h=f.h,zn(this,f.j),this.o=f.o,this.g=f.g,Fi(this,f.s),this.l=f.l;var E=f.i,A=new zd;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),Pr(this,A),this.m=f.m}else f&&(E=String(f).match(Li))?(this.h=!1,zn(this,E[1]||"",!0),this.o=os(E[2]||""),this.g=os(E[3]||"",!0),Fi(this,E[4]),this.l=os(E[5]||"",!0),Pr(this,E[6]||"",!0),this.m=os(E[7]||"")):(this.h=!1,this.i=new zd(null,this.h))}ai.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Ui(E,M_,!0),":");var A=this.g;return(A||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Ui(E,M_,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(Ui(A,A.charAt(0)=="/"?gx:mx,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",Ui(A,ru)),f.join("")};function Rr(f){return new ai(f)}function zn(f,E,A){f.j=A?os(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Fi(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Pr(f,E,A){E instanceof zd?(f.i=E,Kf(f.i,f.h)):(A||(E=Ui(E,_x)),f.i=new zd(E,f.h))}function Xt(f,E,A){f.i.set(E,A)}function Vi(f){return Xt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function os(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ui(f,E,A){return typeof f=="string"?(f=encodeURI(f).replace(E,px),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function px(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var M_=/[#\/\?@]/g,mx=/[#\?:]/g,gx=/[#\?]/g,_x=/[#\?@]/g,ru=/#/g;function zd(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function Da(f){f.g||(f.g=new Map,f.h=0,f.i&&vs(f.i,function(E,A){f.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=zd.prototype,n.add=function(f,E){Da(this),this.i=null,f=Wo(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(E),this.h+=1,this};function yx(f,E){Da(f),E=Wo(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function Go(f,E){return Da(f),E=Wo(f,E),f.g.has(E)}n.forEach=function(f,E){Da(this),this.g.forEach(function(A,L){A.forEach(function($){f.call(E,$,L,this)},this)},this)},n.na=function(){Da(this);let f=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let L=0;L<E.length;L++){let $=f[L];for(let te=0;te<$.length;te++)A.push(E[L])}return A},n.V=function(f){Da(this);let E=[];if(typeof f=="string")Go(this,f)&&(E=E.concat(this.g.get(Wo(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)E=E.concat(f[A])}return E},n.set=function(f,E){return Da(this),this.i=null,f=Wo(this,f),Go(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},n.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function vx(f,E,A){yx(f,E),0<A.length&&(f.i=null,f.g.set(Wo(f,E),b(A)),f.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var L=E[A];let te=encodeURIComponent(String(L)),Re=this.V(L);for(L=0;L<Re.length;L++){var $=te;Re[L]!==""&&($+="="+encodeURIComponent(String(Re[L]))),f.push($)}}return this.i=f.join("&")};function Wo(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Kf(f,E){E&&!f.j&&(Da(f),f.i=null,f.g.forEach(function(A,L){var $=L.toLowerCase();L!=$&&(yx(this,L),vx(this,$,A))},f)),f.j=E}function bx(f,E){let A=new jr;if(a.Image){let L=new Image;L.onload=p(bs,A,"TestLoadImage: loaded",!0,E,L),L.onerror=p(bs,A,"TestLoadImage: error",!1,E,L),L.onabort=p(bs,A,"TestLoadImage: abort",!1,E,L),L.ontimeout=p(bs,A,"TestLoadImage: timeout",!1,E,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else E(!1)}function Hd(f,E){let A=new jr,L=new AbortController,$=setTimeout(()=>{L.abort(),bs(A,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:L.signal}).then(te=>{clearTimeout($),te.ok?bs(A,"TestPingServer: ok",!0,E):bs(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout($),bs(A,"TestPingServer: error",!1,E)})}function bs(f,E,A,L,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),L(A)}catch{}}function xx(){this.g=new Rt}function D_(f,E,A){let L=A||"";try{ot(f,function($,te){let Re=$;l($)&&(Re=ht($)),E.push(L+te+"="+encodeURIComponent(Re))})}catch($){throw E.push(L+"type="+encodeURIComponent("_badmap")),$}}function ti(f){this.l=f.Ub||null,this.j=f.eb||!1}_(ti,j),ti.prototype.g=function(){return new Xf(this.l,this.j)},ti.prototype.i=(function(f){return function(){return f}})({});function Xf(f,E){he.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Xf,he),n=Xf.prototype,n.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,ou(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,su(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ou(this)),this.g&&(this.readyState=3,ou(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wx(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function wx(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?su(this):ou(this),this.readyState==3&&wx(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,su(this))},n.Qa=function(f){this.g&&(this.response=f,su(this))},n.ga=function(){this.g&&su(this)};function su(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ou(f)}n.setRequestHeader=function(f,E){this.u.append(f,E)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=E.next();return f.join(`\r
`)};function ou(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function R_(f){let E="";return O(f,function(A,L){E+=L,E+=":",E+=A,E+=`\r
`}),E}function au(f,E,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=R_(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):Xt(f,E,A))}function Hn(f){he.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Hn,he);var Ex=/^https?$/i,qD=["POST","PUT"];n=Hn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,E,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Aa.g(),this.v=this.o?Be(this.o):Be(Aa),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(te){cu(this,te);return}if(f=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var $ in L)A.set($,L[$]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(let te of L.keys())A.set(te,L.get(te));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(te=>te.toLowerCase()=="content-type"),$=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qD,E,void 0))||L||$||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[te,Re]of A)this.g.setRequestHeader(te,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{k_(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){cu(this,te)}};function cu(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,P_(f),Sc(f)}function P_(f){f.A||(f.A=!0,J(f,"complete"),J(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,J(this,"complete"),J(this,"abort"),Sc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),Hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yf(this):this.bb())},n.bb=function(){Yf(this)};function Yf(f){if(f.h&&typeof o<"u"&&(!f.v[1]||xs(f)!=4||f.Z()!=2)){if(f.u&&xs(f)==4)Ue(f.Ea,0,f);else if(J(f,"readystatechange"),xs(f)==4){f.h=!1;try{let Re=f.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var L;if(L=Re===0){var $=String(f.D).match(Li)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),L=!Ex.test($?$.toLowerCase():"")}A=L}if(A)J(f,"complete"),J(f,"success");else{f.m=6;try{var te=2<xs(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",P_(f)}}finally{Sc(f)}}}}function Sc(f,E){if(f.g){k_(f);let A=f.g,L=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||J(f,"ready");try{A.onreadystatechange=L}catch{}}}function k_(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function xs(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<xs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),He(E)}};function Ix(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Tx(f){let E={};f=(f.g&&2<=xs(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(P(f[L]))continue;var A=S(f[L]);let $=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();let te=E[$]||[];E[$]=te,te.push(A)}I(E,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(f,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||E}function N_(f){this.Aa=0,this.i=[],this.j=new jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$o("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$o("baseRetryDelayMs",5e3,f),this.cb=$o("retryDelaySeedMs",1e4,f),this.Wa=$o("forwardChannelMaxRetries",2,f),this.wa=$o("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new At(f&&f.concurrentRequestLimit),this.Da=new xx,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=N_.prototype,n.la=8,n.G=1,n.connect=function(f,E,A,L){dr(0),this.W=f,this.H=E||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=m(this,null,this.W),jd(this)};function Qf(f){if(Jf(f),f.G==3){var E=f.U++,A=Rr(f.I);if(Xt(A,"SID",f.K),Xt(A,"RID",E),Xt(A,"TYPE","terminate"),uu(f,A),E=new vo(f,f.j,E),E.L=2,E.v=Vi(Rr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=E.v,A=!0),A||(E.g=T(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ne(E)}Ac(f)}function lu(f){f.g&&(tp(f),f.g.cancel(),f.g=null)}function Jf(f){lu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Cc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function jd(f){if(!ct(f.h)&&!f.s){f.s=!0;var E=f.Ga;fe||Ae(),oe||(fe(),oe=!0),we.add(E,f),f.B=0}}function Zf(f,E){return en(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ho(h(f.Ga,f,E),V_(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let $=new vo(this,this.j,f),te=this.o;if(this.S&&(te?(te=w(te),x(te,this.S)):te=this.S),this.m!==null||this.O||($.H=te,te=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Ra(this,$,E),A=Rr(this.I),Xt(A,"RID",f),Xt(A,"CVER",22),this.D&&Xt(A,"X-HTTP-Session-Id",this.D),uu(this,A),te&&(this.O?E="headers="+encodeURIComponent(String(R_(te)))+"&"+E:this.m&&au(A,this.m,te)),wn(this.h,$),this.Ua&&Xt(A,"TYPE","init"),this.P?(Xt(A,"$req",E),Xt(A,"SID","null"),$.T=!0,iu($,A,null)):iu($,A,E),this.G=2}}else this.G==3&&(f?O_(this,f):this.i.length==0||ct(this.h)||O_(this))};function O_(f,E){var A;E?A=E.l:A=f.U++;let L=Rr(f.I);Xt(L,"SID",f.K),Xt(L,"RID",A),Xt(L,"AID",f.T),uu(f,L),f.m&&f.o&&au(L,f.m,f.o),A=new vo(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),E&&(f.i=E.D.concat(f.i)),E=Ra(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),wn(f.h,A),iu(A,L,E)}function uu(f,E){f.H&&O(f.H,function(A,L){Xt(E,L,A)}),f.l&&ot({},function(A,L){Xt(E,L,A)})}function Ra(f,E,A){A=Math.min(f.i.length,A);var L=f.l?h(f.l.Na,f.l,f):null;e:{var $=f.i;let te=-1;for(;;){let Re=["count="+A];te==-1?0<A?(te=$[0].g,Re.push("ofs="+te)):te=0:Re.push("ofs="+te);let Vn=!0;for(let Bi=0;Bi<A;Bi++){let Un=$[Bi].g,Wr=$[Bi].map;if(Un-=te,0>Un)te=Math.max(0,$[Bi].g-100),Vn=!1;else try{D_(Wr,Re,"req"+Un+"_")}catch{L&&L(Wr)}}if(Vn){L=Re.join("&");break e}}}return f=f.i.splice(0,A),E.D=f,L}function L_(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;fe||Ae(),oe||(fe(),oe=!0),we.add(E,f),f.v=0}}function ep(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ho(h(f.Fa,f),V_(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,F_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ho(h(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),lu(this),F_(this))};function tp(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function F_(f){f.g=new vo(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=Rr(f.qa);Xt(E,"RID","rpc"),Xt(E,"SID",f.K),Xt(E,"AID",f.T),Xt(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Xt(E,"TO",f.ja),Xt(E,"TYPE","xmlhttp"),uu(f,E),f.m&&f.o&&au(E,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=Vi(Rr(E)),A.m=null,A.P=!0,F(A,f)}n.Za=function(){this.C!=null&&(this.C=null,lu(this),ep(this),dr(19))};function Cc(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Gr(f,E){var A=null;if(f.g==E){Cc(f),tp(f),f.g=null;var L=2}else if(Tn(f.h,E))A=E.D,_n(f.h,E),L=1;else return;if(f.G!=0){if(E.o)if(L==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var $=f.B;L=Fn(),J(L,new Sa(L,A)),jd(f)}else L_(f);else if($=E.s,$==3||$==0&&0<E.X||!(L==1&&Zf(f,E)||L==2&&ep(f)))switch(A&&0<A.length&&(E=f.h,E.i=E.i.concat(A)),$){case 1:Pa(f,5);break;case 4:Pa(f,10);break;case 3:Pa(f,6);break;default:Pa(f,2)}}}function V_(f,E){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*E}function Pa(f,E){if(f.j.info("Error code "+E),E==2){var A=h(f.fb,f),L=f.Xa;let $=!L;L=new ai(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zn(L,"https"),Vi(L),$?bx(L.toString(),A):Hd(L.toString(),A)}else dr(2);f.G=0,f.l&&f.l.sa(E),Ac(f),Jf(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function Ac(f){if(f.G=0,f.ka=[],f.l){let E=yn(f.h);(E.length!=0||f.i.length!=0)&&(g(f.ka,E),g(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function m(f,E,A){var L=A instanceof ai?Rr(A):new ai(A);if(L.g!="")E&&(L.g=E+"."+L.g),Fi(L,L.s);else{var $=a.location;L=$.protocol,E=E?E+"."+$.hostname:$.hostname,$=+$.port;var te=new ai(null);L&&zn(te,L),E&&(te.g=E),$&&Fi(te,$),A&&(te.l=A),L=te}return A=f.D,E=f.ya,A&&E&&Xt(L,A,E),Xt(L,"VER",f.la),uu(f,L),L}function T(f,E,A){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new Hn(new ti({eb:A})):new Hn(f.pa),E.Ha(f.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function D(){}n=D.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function V(){}V.prototype.g=function(f,E){return new W(f,E)};function W(f,E){he.call(this),this.g=new N_(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!P(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Nt(this)}_(W,he),W.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},W.prototype.close=function(){Qf(this.g)},W.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=ht(f),f=A);E.i.push(new bt(E.Ya++,f)),E.G==3&&jd(E)},W.prototype.N=function(){this.g.l=null,delete this.j,Qf(this.g),delete this.g,W.aa.N.call(this)};function ee(f){ge.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(let A in E){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}_(ee,ge);function Le(){pe.call(this),this.status=1}_(Le,pe);function Nt(f){this.g=f}_(Nt,D),Nt.prototype.ua=function(){J(this.g,"a")},Nt.prototype.ta=function(f){J(this.g,new ee(f))},Nt.prototype.sa=function(f){J(this.g,new Le)},Nt.prototype.ra=function(){J(this.g,"b")},V.prototype.createWebChannel=V.prototype.g,W.prototype.send=W.prototype.o,W.prototype.open=W.prototype.m,W.prototype.close=W.prototype.close,ZF=xl.createWebChannelTransport=function(){return new V},JF=xl.getStatEventTarget=function(){return Fn()},QF=xl.Event=We,ZT=xl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,i0=xl.ErrorCode=yo,Ic.COMPLETE="complete",YF=xl.EventType=Ic,ke.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,Um=xl.WebChannel=ke,zve=xl.FetchXmlHttpFactory=ti,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,XF=xl.XhrIo=Hn}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var bq="@firebase/firestore",xq="4.8.0";var Cr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");var ag="11.10.0";var ef=new Ka("@firebase/firestore");function Bm(){return ef.logLevel}function Je(n,...e){if(ef.logLevel<=pn.DEBUG){let t=e.map(jV);ef.debug(`Firestore (${ag}): ${n}`,...t)}}function wl(n,...e){if(ef.logLevel<=pn.ERROR){let t=e.map(jV);ef.error(`Firestore (${ag}): ${n}`,...t)}}function ed(n,...e){if(ef.logLevel<=pn.WARN){let t=e.map(jV);ef.warn(`Firestore (${ag}): ${n}`,...t)}}function jV(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function kt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,d7(n,i,t)}function d7(n,e,t){let i=`FIRESTORE (${ag}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw wl(i),new Error(i)}function Yn(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||d7(e,r,i)}function Kt(n,e){return n}var de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends io{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ma=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var oS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},r2=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}},s2=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},o2=class{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Yn(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new ma;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ma,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ma)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yn(typeof i.accessToken=="string",31837,{l:i}),new oS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Yn(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}},a2=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},c2=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new a2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},aS=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},l2=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ro(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Yn(this.o===void 0,3512);let i=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aS(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Yn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Hve(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function h7(){return new TextEncoder}var c0=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=Hve(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function ln(n,e){return n<e?-1:n>e?1:0}function u2(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return ln(i,r);{let s=h7(),o=jve(s.encode(wq(n,t)),s.encode(wq(e,t)));return o!==0?o:ln(i,r)}}t+=i>65535?2:1}return ln(n.length,e.length)}function wq(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function jve(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ln(n[t],e[t]);return ln(n.length,e.length)}function Xm(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Eq="__name__",cS=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&kt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&kt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return ln(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):u2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bl.fromString(e.substring(4,e.length-2))}},gi=class n extends cS{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ve(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Gve=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ao=class n extends cS{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Gve.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Eq}static keyField(){return new n([Eq])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var It=class n{constructor(e){this.path=e}static fromPath(e){return new n(gi.fromString(e))}static fromName(e){return new n(gi.fromString(e).popFirst(5))}static empty(){return new n(gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gi(e.slice()))}};function f7(n,e,t){if(!t)throw new Ve(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wve(n,e,t,i){if(e===!0&&i===!0)throw new Ve(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Iq(n){if(!It.isDocumentKey(n))throw new Ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tq(n){if(It.isDocumentKey(n))throw new Ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function p7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":kt(12329,{type:typeof n})}function ga(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=zS(n);throw new Ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $ve(n,e){if(e<=0)throw new Ve(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ar(n,e){let t={typeString:n};return e&&(t.value=e),t}function x0(n,e){if(!p7(n))throw new Ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Ve(de.INVALID_ARGUMENT,t);return!0}var Sq=-62135596800,Cq=1e6,cr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Cq);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sq)throw new Ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cq}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(x0(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Sq;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:ar("string",cr._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};var Zt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new cr(0,0))}static max(){return new n(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var l0=-1,d2=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};d2.UNKNOWN_ID=-1;function qve(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(i===1e9?new cr(t+1,0):new cr(t,i));return new tf(r,It.empty(),e)}function Kve(n){return new tf(n.readTime,n.key,l0)}var tf=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Zt.min(),It.empty(),l0)}static max(){return new n(Zt.max(),It.empty(),l0)}};function Xve(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=It.comparator(n.documentKey,e.documentKey),t!==0?t:ln(n.largestBatchId,e.largestBatchId))}var Yve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",h2=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function cg(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Yve)throw n;Je("LocalStore","Unexpectedly lost primary lease")}var Ie=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function Qve(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lg(n){return n.name==="IndexedDbTransactionError"}var GV=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),WV=-1;function HS(n){return n==null}function u0(n){return n===0&&1/n==-1/0}function Jve(n){return typeof n=="number"&&Number.isInteger(n)&&!u0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var m7="";function Zve(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Aq(e)),e=e0e(n.get(t),e);return Aq(e)}function e0e(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case m7:t+="";break;default:t+=s}}return t}function Aq(n){return n+m7+""}var t0e="remoteDocuments",g7="owner";var _7="mutationQueues";var y7="mutations";var v7="documentMutations",n0e="remoteDocumentsV14";var b7="remoteDocumentGlobal";var x7="targets";var w7="targetDocuments";var E7="targetGlobal",I7="collectionParents";var T7="clientMetadata";var S7="bundles";var C7="namedQueries";var i0e="indexConfiguration";var r0e="indexState";var s0e="indexEntries";var A7="documentOverlays";var o0e="globals";var a0e=[_7,y7,v7,t0e,x7,g7,E7,w7,T7,b7,I7,S7,C7],tYe=[...a0e,A7],c0e=[_7,y7,v7,n0e,x7,g7,E7,w7,T7,b7,I7,S7,C7,A7],l0e=c0e,u0e=[...l0e,i0e,r0e,s0e];var nYe=[...u0e,o0e];function Mq(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M7(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ni=class n{constructor(e,t){this.comparator=e,this.root=t||nc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gm(this.root,e,this.comparator,!0)}},Gm=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nc=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}};nc.EMPTY=null,nc.RED=!0,nc.BLACK=!1;nc.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new nc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ar=class n{constructor(e){this.comparator=e,this.data=new Ni(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lS(this.data.getIterator())}getIteratorFrom(e){return new lS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lS=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Do=class n{constructor(e){this.fields=e,e.sort(ao.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ar(ao.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xm(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var uS=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ts=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uS("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ts.EMPTY_BYTE_STRING=new ts("");var d0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(n){if(Yn(!!n,39018),typeof n=="string"){let e=0,t=d0e.exec(n);if(Yn(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ii(n.seconds),nanos:Ii(n.nanos)}}function Ii(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Il(n){return typeof n=="string"?ts.fromBase64String(n):ts.fromUint8Array(n)}var D7="server_timestamp",R7="__type__",P7="__previous_value__",k7="__local_write_time__";function jS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[R7])===null||t===void 0?void 0:t.stringValue)===D7}function GS(n){let e=n.mapValue.fields[P7];return jS(e)?GS(e):e}function d0(n){let e=El(n.mapValue.fields[k7].timestampValue);return new cr(e.seconds,e.nanos)}var f2=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},dS="(default)",hS=class n{constructor(e,t){this.projectId=e,this.database=t||dS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===dS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $V="__type__",N7="__max__",eS={mapValue:{fields:{__type__:{stringValue:N7}}}},qV="__vector__",Ym="value";function td(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jS(n)?4:L7(n)?9007199254740991:O7(n)?10:11:kt(28295,{value:n})}function oc(n,e){if(n===e)return!0;let t=td(n);if(t!==td(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return d0(n).isEqual(d0(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=El(r.timestampValue),a=El(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return Il(r.bytesValue).isEqual(Il(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ii(r.geoPointValue.latitude)===Ii(s.geoPointValue.latitude)&&Ii(r.geoPointValue.longitude)===Ii(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ii(r.integerValue)===Ii(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ii(r.doubleValue),a=Ii(s.doubleValue);return o===a?u0(o)===u0(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Xm(n.arrayValue.values||[],e.arrayValue.values||[],oc);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Mq(o)!==Mq(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!oc(o[c],a[c])))return!1;return!0})(n,e);default:return kt(52216,{left:n})}}function h0(n,e){return(n.values||[]).find(t=>oc(t,e))!==void 0}function Qm(n,e){if(n===e)return 0;let t=td(n),i=td(e);if(t!==i)return ln(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ln(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ii(s.integerValue||s.doubleValue),c=Ii(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Dq(n.timestampValue,e.timestampValue);case 4:return Dq(d0(n),d0(e));case 5:return u2(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Il(s),c=Il(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ln(a[l],c[l]);if(u!==0)return u}return ln(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ln(Ii(s.latitude),Ii(o.latitude));return a!==0?a:ln(Ii(s.longitude),Ii(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Rq(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,u;let d=s.fields||{},h=o.fields||{},p=(a=d[Ym])===null||a===void 0?void 0:a.arrayValue,_=(c=h[Ym])===null||c===void 0?void 0:c.arrayValue,b=ln(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=_?.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:Rq(p,_)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===eS.mapValue&&o===eS.mapValue)return 0;if(s===eS.mapValue)return 1;if(o===eS.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=u2(c[d],u[d]);if(h!==0)return h;let p=Qm(a[c[d]],l[u[d]]);if(p!==0)return p}return ln(c.length,u.length)})(n.mapValue,e.mapValue);default:throw kt(23264,{le:t})}}function Dq(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ln(n,e);let t=El(n),i=El(e),r=ln(t.seconds,i.seconds);return r!==0?r:ln(t.nanos,i.nanos)}function Rq(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Qm(t[r],i[r]);if(s)return s}return ln(t.length,i.length)}function Jm(n){return p2(n)}function p2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=El(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Il(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return It.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=p2(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${p2(t.fields[o])}`;return r+"}"})(n.mapValue):kt(61005,{value:n})}function iS(n){switch(td(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=GS(n);return e?16+iS(e):16;case 5:return 2*n.stringValue.length;case 6:return Il(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+iS(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return sd(i.fields,(s,o)=>{r+=s.length+iS(o)}),r})(n.mapValue);default:throw kt(13486,{value:n})}}function fS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function m2(n){return!!n&&"integerValue"in n}function KV(n){return!!n&&"arrayValue"in n}function Pq(n){return!!n&&"nullValue"in n}function kq(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rS(n){return!!n&&"mapValue"in n}function O7(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$V])===null||t===void 0?void 0:t.stringValue)===qV}function s0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return sd(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=s0(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=s0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function L7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===N7}var rYe={mapValue:{fields:{[$V]:{stringValue:qV},[Ym]:{arrayValue:{}}}}};var oo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=s0(t)}setAll(e){let t=ao.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=s0(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());rS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];rS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){sd(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(s0(this.value))}};function F7(n){let e=[];return sd(n.fields,(t,i)=>{let r=new ao([t]);if(rS(i)){let s=F7(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Do(e)}var _a=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Zt.min(),Zt.min(),Zt.min(),oo.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Zt.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Zt.min(),Zt.min(),oo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Zt.min(),Zt.min(),oo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nd=class{constructor(e,t){this.position=e,this.inclusive=t}};function Nq(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=It.comparator(It.fromName(o.referenceValue),t.key):i=Qm(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Oq(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oc(n.position[t],e.position[t]))return!1;return!0}var nf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function h0e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pS=class{},or=class n extends pS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _2(e,t,i):t==="array-contains"?new b2(e,i):t==="in"?new x2(e,i):t==="not-in"?new w2(e,i):t==="array-contains-any"?new E2(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new y2(e,i):new v2(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qm(t,this.value)):t!==null&&td(this.value)===td(t)&&this.matchesComparison(Qm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ya=class n extends pS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return V7(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function V7(n){return n.op==="and"}function U7(n){return f0e(n)&&V7(n)}function f0e(n){for(let e of n.filters)if(e instanceof ya)return!1;return!0}function g2(n){if(n instanceof or)return n.field.canonicalString()+n.op.toString()+Jm(n.value);if(U7(n))return n.filters.map(e=>g2(e)).join(",");{let e=n.filters.map(t=>g2(t)).join(",");return`${n.op}(${e})`}}function B7(n,e){return n instanceof or?(function(i,r){return r instanceof or&&i.op===r.op&&i.field.isEqual(r.field)&&oc(i.value,r.value)})(n,e):n instanceof ya?(function(i,r){return r instanceof ya&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&B7(o,r.filters[a]),!0):!1})(n,e):void kt(19439)}function z7(n){return n instanceof or?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jm(t.value)}`})(n):n instanceof ya?(function(t){return t.op.toString()+" {"+t.getFilters().map(z7).join(" ,")+"}"})(n):"Filter"}var _2=class extends or{constructor(e,t,i){super(e,t,i),this.key=It.fromName(i.referenceValue)}matches(e){let t=It.comparator(e.key,this.key);return this.matchesComparison(t)}},y2=class extends or{constructor(e,t){super(e,"in",t),this.keys=H7("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},v2=class extends or{constructor(e,t){super(e,"not-in",t),this.keys=H7("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function H7(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>It.fromName(i.referenceValue))}var b2=class extends or{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return KV(t)&&h0(t.arrayValue,this.value)}},x2=class extends or{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&h0(this.value.arrayValue,t)}},w2=class extends or{constructor(e,t){super(e,"not-in",t)}matches(e){if(h0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!h0(this.value.arrayValue,t)}},E2=class extends or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!KV(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>h0(this.value.arrayValue,i))}};var I2=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function Lq(n,e=null,t=[],i=[],r=null,s=null,o=null){return new I2(n,e,t,i,r,s,o)}function XV(n){let e=Kt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>g2(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),HS(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Jm(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Jm(i)).join(",")),e.Pe=t}return e.Pe}function YV(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h0e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!B7(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Oq(n.startAt,e.startAt)&&Oq(n.endAt,e.endAt)}function T2(n){return It.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Tl=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function p0e(n,e,t,i,r,s,o,a){return new Tl(n,e,t,i,r,s,o,a)}function QV(n){return new Tl(n)}function Fq(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JV(n){return n.collectionGroup!==null}function Wm(n){let e=Kt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ar(ao.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new nf(s,i))}),t.has(ao.keyField().canonicalString())||e.Te.push(new nf(ao.keyField(),i))}return e.Te}function ic(n){let e=Kt(n);return e.Ie||(e.Ie=m0e(e,Wm(n))),e.Ie}function m0e(n,e){if(n.limitType==="F")return Lq(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new nf(r.field,s)});let t=n.endAt?new nd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new nd(n.startAt.position,n.startAt.inclusive):null;return Lq(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function S2(n,e){let t=n.filters.concat([e]);return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mS(n,e,t){return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function WS(n,e){return YV(ic(n),ic(e))&&n.limitType===e.limitType}function j7(n){return`${XV(ic(n))}|lt:${n.limitType}`}function zm(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>z7(r)).join(", ")}]`),HS(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Jm(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Jm(r)).join(",")),`Target(${i})`})(ic(n))}; limitType=${n.limitType})`}function $S(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):It.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of Wm(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=Nq(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,Wm(i),r)||i.endAt&&!(function(o,a,c){let l=Nq(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,Wm(i),r))})(n,e)}function g0e(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function G7(n){return(e,t)=>{let i=!1;for(let r of Wm(n)){let s=_0e(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function _0e(n,e,t){let i=n.field.isKeyField()?It.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Qm(c,l):kt(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return kt(19790,{direction:n.dir})}}var Sl=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sd(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return M7(this.inner)}size(){return this.innerSize}};var y0e=new Ni(It.comparator);function Cl(){return y0e}var W7=new Ni(It.comparator);function r0(...n){let e=W7;for(let t of n)e=e.insert(t.key,t);return e}function $7(n){let e=W7;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Yh(){return o0()}function q7(){return o0()}function o0(){return new Sl(n=>n.toString(),(n,e)=>n.isEqual(e))}var v0e=new Ni(It.comparator),b0e=new Ar(It.comparator);function bn(...n){let e=b0e;for(let t of n)e=e.add(t);return e}var x0e=new Ar(ln);function w0e(){return x0e}function ZV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u0(e)?"-0":e}}function K7(n){return{integerValue:""+n}}function E0e(n,e){return Jve(e)?K7(e):ZV(n,e)}var Zm=class{constructor(){this._=void 0}};function I0e(n,e,t){return n instanceof eg?(function(r,s){let o={fields:{[R7]:{stringValue:D7},[k7]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&jS(s)&&(s=GS(s)),s&&(o.fields[P7]=s),{mapValue:o}})(t,e):n instanceof rf?Y7(n,e):n instanceof sf?Q7(n,e):(function(r,s){let o=X7(r,s),a=Vq(o)+Vq(r.Ee);return m2(o)&&m2(r.Ee)?K7(a):ZV(r.serializer,a)})(n,e)}function T0e(n,e,t){return n instanceof rf?Y7(n,e):n instanceof sf?Q7(n,e):t}function X7(n,e){return n instanceof tg?(function(i){return m2(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var eg=class extends Zm{},rf=class extends Zm{constructor(e){super(),this.elements=e}};function Y7(n,e){let t=J7(e);for(let i of n.elements)t.some(r=>oc(r,i))||t.push(i);return{arrayValue:{values:t}}}var sf=class extends Zm{constructor(e){super(),this.elements=e}};function Q7(n,e){let t=J7(e);for(let i of n.elements)t=t.filter(r=>!oc(r,i));return{arrayValue:{values:t}}}var tg=class extends Zm{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Vq(n){return Ii(n.integerValue||n.doubleValue)}function J7(n){return KV(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function S0e(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof rf&&r instanceof rf||i instanceof sf&&r instanceof sf?Xm(i.elements,r.elements,oc):i instanceof tg&&r instanceof tg?oc(i.Ee,r.Ee):i instanceof eg&&r instanceof eg})(n.transform,e.transform)}var C2=class{constructor(e,t){this.version=e,this.transformResults=t}},rc=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sS(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ng=class{};function Z7(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f0(n.key,rc.none()):new of(n.key,n.data,rc.none());{let t=n.data,i=oo.empty(),r=new Ar(ao.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ac(n.key,i,new Do(r.toArray()),rc.none())}}function C0e(n,e,t){n instanceof of?(function(r,s,o){let a=r.value.clone(),c=Bq(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ac?(function(r,s,o){if(!sS(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Bq(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(eK(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function a0(n,e,t,i){return n instanceof of?(function(s,o,a,c){if(!sS(s.precondition,o))return a;let l=s.value.clone(),u=zq(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof ac?(function(s,o,a,c){if(!sS(s.precondition,o))return a;let l=zq(s.fieldTransforms,c,o),u=o.data;return u.setAll(eK(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return sS(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function A0e(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=X7(i.transform,r||null);s!=null&&(t===null&&(t=oo.empty()),t.set(i.field,s))}return t||null}function Uq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xm(i,r,(s,o)=>S0e(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var of=class extends ng{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ac=class extends ng{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function eK(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Bq(n,e,t){let i=new Map;Yn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,T0e(o,a,t[r]))}return i}function zq(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,I0e(s,o,e))}return i}var f0=class extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},A2=class extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var M2=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&C0e(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=a0(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=a0(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=q7();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=Z7(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Zt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&Xm(this.mutations,e.mutations,(t,i)=>Uq(t,i))&&Xm(this.baseMutations,e.baseMutations,(t,i)=>Uq(t,i))}},D2=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Yn(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return v0e})(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var R2=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var P2=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rr,Mn;function M0e(n){switch(n){case de.OK:return kt(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return kt(15467,{code:n})}}function tK(n){if(n===void 0)return wl("GRPC error has no .code"),de.UNKNOWN;switch(n){case rr.OK:return de.OK;case rr.CANCELLED:return de.CANCELLED;case rr.UNKNOWN:return de.UNKNOWN;case rr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case rr.INTERNAL:return de.INTERNAL;case rr.UNAVAILABLE:return de.UNAVAILABLE;case rr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case rr.NOT_FOUND:return de.NOT_FOUND;case rr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case rr.ABORTED:return de.ABORTED;case rr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case rr.DATA_LOSS:return de.DATA_LOSS;default:return kt(39323,{code:n})}}(Mn=rr||(rr={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";var Hq=null;var D0e=new bl([4294967295,4294967295],0);function jq(n){let e=h7().encode(n),t=new KF;return t.update(e),new Uint8Array(t.digest())}function Gq(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new bl([t,i],0),new bl([r,s],0)]}var k2=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qh(`Invalid padding: ${t}`);if(i<0)throw new Qh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=bl.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(bl.fromNumber(i)));return r.compare(D0e)===1&&(r=new bl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=jq(e),[i,r]=Gq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=jq(e),[i,r]=Gq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);this.we(o)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Qh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gS=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,p0.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Zt.min(),r,new Ni(ln),Cl(),bn())}},p0=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,bn(),bn(),bn())}};var $m=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},_S=class{constructor(e,t){this.targetId=e,this.De=t}},yS=class{constructor(e,t,i=ts.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},vS=class{constructor(){this.ve=0,this.Ce=Wq(),this.Fe=ts.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=bn(),t=bn(),i=bn();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:kt(38017,{changeType:s})}}),new p0(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Wq()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Yn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},N2=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Cl(),this.je=tS(),this.Je=tS(),this.He=new Ni(ln)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:kt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let s=r.target;if(T2(s))if(i===0){let o=new It(s.path);this.Xe(t,o,_a.newNoDocument(o,Zt.min()))}else Yn(i===1,20013,{expectedCount:i});else{let o=this.ot(t);if(o!==i){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}Hq?.ct((function(u,d,h,p,_){var b,g,v,P,R,N;let U={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},O=d.unchangedNames;return O&&(U.bloomFilter={applied:_===0,hashCount:(b=O?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(P=(v=(g=O?.bits)===null||g===void 0?void 0:g.bitmap)===null||v===void 0?void 0:v.length)!==null&&P!==void 0?P:0,padding:(N=(R=O?.bits)===null||R===void 0?void 0:R.padding)!==null&&N!==void 0?N:0,mightContain:I=>{var w;return(w=p?.mightContain(I))!==null&&w!==void 0&&w}}),U})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=Il(i).toUint8Array()}catch(c){if(c instanceof uS)return ed("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new k2(o,r,s)}catch(c){return ed(c instanceof Qh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&T2(a.target)){let c=new It(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,_a.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let i=bn();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let r=new gS(e,t,this.He,this.ze,i);return this.ze=Cl(),this.je=tS(),this.Je=tS(),this.He=new Ni(ln),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ar(ln),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ar(ln),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vS),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function tS(){return new Ni(It.comparator)}function Wq(){return new Ni(It.comparator)}var R0e={asc:"ASCENDING",desc:"DESCENDING"},P0e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k0e={and:"AND",or:"OR"},O2=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function L2(n,e){return n.useProto3Json||HS(e)?e:{value:e}}function bS(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nK(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N0e(n,e){return bS(n,e.toTimestamp())}function sc(n){return Yn(!!n,49232),Zt.fromTimestamp((function(t){let i=El(t);return new cr(i.seconds,i.nanos)})(n))}function e3(n,e){return F2(n,e).canonicalString()}function F2(n,e){let t=(function(r){return new gi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iK(n){let e=gi.fromString(n);return Yn(cK(e),10190,{key:e.toString()}),e}function V2(n,e){return e3(n.databaseId,e.path)}function e2(n,e){let t=iK(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new It(sK(t))}function rK(n,e){return e3(n.databaseId,e)}function O0e(n){let e=iK(n);return e.length===4?gi.emptyPath():sK(e)}function U2(n){return new gi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sK(n){return Yn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $q(n,e,t){return{name:V2(n,e),fields:t.value.mapValue.fields}}function L0e(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:kt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Yn(u===void 0||typeof u=="string",58123),ts.fromBase64String(u||"")):(Yn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ts.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?de.UNKNOWN:tK(l.code);return new Ve(u,l.message||"")})(o);t=new yS(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=e2(n,i.document.name),s=sc(i.document.updateTime),o=i.document.createTime?sc(i.document.createTime):Zt.min(),a=new oo({mapValue:{fields:i.document.fields}}),c=_a.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new $m(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=e2(n,i.document),s=i.readTime?sc(i.readTime):Zt.min(),o=_a.newNoDocument(r,s),a=i.removedTargetIds||[];t=new $m([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=e2(n,i.document),s=i.removedTargetIds||[];t=new $m([],s,r,null)}else{if(!("filter"in e))return kt(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new P2(r,s),a=i.targetId;t=new _S(a,o)}}return t}function F0e(n,e){let t;if(e instanceof of)t={update:$q(n,e.key,e.value)};else if(e instanceof f0)t={delete:V2(n,e.key)};else if(e instanceof ac)t={update:$q(n,e.key,e.data),updateMask:$0e(e.fieldMask)};else{if(!(e instanceof A2))return kt(16599,{Rt:e.type});t={verify:V2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(s,o){let a=o.transform;if(a instanceof eg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tg)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw kt(20930,{transform:o.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:N0e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:kt(27497)})(n,e.precondition)),t}function V0e(n,e){return n&&n.length>0?(Yn(e!==void 0,14353),n.map(t=>(function(r,s){let o=r.updateTime?sc(r.updateTime):sc(s);return o.isEqual(Zt.min())&&(o=sc(s)),new C2(o,r.transformResults||[])})(t,e))):[]}function U0e(n,e){return{documents:[rK(n,e.path)]}}function B0e(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rK(n,r);let s=(function(l){if(l.length!==0)return aK(ya.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:Hm(h.field),direction:j0e(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=L2(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:r}}function z0e(n){let e=O0e(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Yn(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=oK(d);return h instanceof ya&&U7(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(_){return new nf(jm(_.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,HS(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,p=d.values||[];return new nd(p,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,p=d.values||[];return new nd(p,h)})(t.endAt)),p0e(e,r,o,s,a,"F",c,l)}function H0e(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oK(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=jm(t.unaryFilter.field);return or.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=jm(t.unaryFilter.field);return or.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=jm(t.unaryFilter.field);return or.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=jm(t.unaryFilter.field);return or.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return or.create(jm(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ya.create(t.compositeFilter.filters.map(i=>oK(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return kt(1026)}})(t.compositeFilter.op))})(n):kt(30097,{filter:n})}function j0e(n){return R0e[n]}function G0e(n){return P0e[n]}function W0e(n){return k0e[n]}function Hm(n){return{fieldPath:n.canonicalString()}}function jm(n){return ao.fromServerFormat(n.fieldPath)}function aK(n){return n instanceof or?(function(t){if(t.op==="=="){if(kq(t.value))return{unaryFilter:{field:Hm(t.field),op:"IS_NAN"}};if(Pq(t.value))return{unaryFilter:{field:Hm(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kq(t.value))return{unaryFilter:{field:Hm(t.field),op:"IS_NOT_NAN"}};if(Pq(t.value))return{unaryFilter:{field:Hm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hm(t.field),op:G0e(t.op),value:t.value}}})(n):n instanceof ya?(function(t){let i=t.getFilters().map(r=>aK(r));return i.length===1?i[0]:{compositeFilter:{op:W0e(t.op),filters:i}}})(n):kt(54877,{filter:n})}function $0e(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cK(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var m0=class n{constructor(e,t,i,r,s=Zt.min(),o=Zt.min(),a=ts.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var B2=class{constructor(e){this.gt=e}};function q0e(n){let e=z0e({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mS(e,e.limit,"L"):e}var xS=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ii(e.integerValue));else if("doubleValue"in e){let i=Ii(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),u0(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=El(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Il(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?L7(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):O7(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):kt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let s=e.fields||{};this.Ct(t,53);let o=Ym,a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(Ii(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),It.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};xS.Ut=new xS;var z2=class{constructor(){this.Dn=new H2}addToCollectionParentIndex(e,t){return this.Dn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(tf.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(tf.min())}updateCollectionGroup(e,t,i){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}},H2=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ar(gi.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ar(gi.comparator)).toArray()}};var sYe=new Uint8Array(0);var qq={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lK=41943040,Mo=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(lK,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);var g0=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Kq="LruGarbageCollector",K0e=1048576;function Xq([n,e],[t,i]){let r=ln(n,t);return r===0?ln(e,i):r}var j2=class{constructor(e){this.Tr=e,this.buffer=new Ar(Xq),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();Xq(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},G2=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Je(Kq,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lg(t)?Je(Kq,"Ignoring IndexedDB error during garbage collection: ",t):await cg(t)}await this.Rr(3e5)})}},W2=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(GV.ue);let i=new j2(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(qq)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qq):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Bm()<=pn.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function X0e(n,e){return new W2(n,e)}var $2=class{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_a.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var q2=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var K2=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&a0(i.mutation,r,Do.empty(),cr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,bn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=bn()){let r=Yh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=r0();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Yh();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,bn()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Cl(),o=o0(),a=(function(){return o0()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof ac)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),a0(u.mutation,l,u.mutation.getFieldMask(),cr.now())):o.set(l.key,Do.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new q2(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=o0(),r=new Ni((o,a)=>o-a),s=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||Do.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||bn()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=q7();u.forEach(h=>{if(!s.has(h)){let p=Z7(t.get(h),i.get(h));p!==null&&d.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ie.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return It.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ie.resolve(Yh()),a=l0,c=s;return o.next(l=>Ie.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ie.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,bn())).next(u=>({batchId:a,changes:$7(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new It(t)).next(i=>{let r=r0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=r0();return this.indexManager.getCollectionParents(e,s).next(a=>Ie.forEach(a,c=>{let l=(function(d,h){return new Tl(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,_a.newInvalidDocument(u)))});let a=r0();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&a0(u.mutation,l,Do.empty(),cr.now()),$S(t,l)&&(a=a.insert(c,l))}),a})}};var X2=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:sc(r.createTime)}})(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:q0e(r.bundledQuery),readTime:sc(r.readTime)}})(t)),Ie.resolve()}};var Y2=class{constructor(){this.overlays=new Ni(It.comparator),this.kr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Yh();return Ie.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.wt(e,t,s)}),Ie.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),Ie.resolve()}getOverlaysForCollection(e,t,i){let r=Yh(),s=t.length+1,o=new It(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ni((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Yh(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Yh(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Ie.resolve(a)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new R2(t,i));let s=this.kr.get(t);s===void 0&&(s=bn(),this.kr.set(t,s)),this.kr.set(t,s.add(i.key))}};var Q2=class{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}};var _0=class{constructor(){this.qr=new Ar(sr.Qr),this.$r=new Ar(sr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new sr(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new sr(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new It(new gi([])),i=new sr(t,e),r=new sr(t,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new It(new gi([])),i=new sr(t,e),r=new sr(t,e+1),s=bn();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new sr(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},sr=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return It.comparator(e.key,t.key)||ln(e.Hr,t.Hr)}static Ur(e,t){return ln(e.Hr,t.Hr)||It.comparator(e.key,t.key)}};var J2=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ar(sr.Qr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new M2(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Yr=this.Yr.add(new sr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,t){return Ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),s=r<0?0:r;return Ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?WV:this.er-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{let a=this.Zr(o.Hr);s.push(a)}),Ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ar(ln);return t.forEach(r=>{let s=new sr(r,0),o=new sr(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),Ie.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;It.isDocumentKey(s)||(s=s.child(""));let o=new sr(new It(s),0),a=new Ar(ln);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Hr)),!0)},o),Ie.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Yn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Ie.forEach(t.mutations,r=>{let s=new sr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new sr(t,0),r=this.Yr.firstAfterOrEqual(i);return Ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Z2=class{constructor(e){this.ni=e,this.docs=(function(){return new Ni(It.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Ie.resolve(i?i.document.mutableCopy():_a.newInvalidDocument(t))}getEntries(e,t){let i=Cl();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():_a.newInvalidDocument(r))}),Ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Cl(),o=t.path,a=new It(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Xve(Kve(u),i)<=0||(r.has(u.key)||$S(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ie.resolve(s)}getAllFromCollectionGroup(e,t,i,r){kt(9500)}ri(e,t){return Ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new eV(this)}getSize(e){return Ie.resolve(this.size)}},eV=class extends $2{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),Ie.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var tV=class{constructor(e){this.persistence=e,this.ii=new Sl(t=>XV(t),YV),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.si=0,this.oi=new _0,this.targetCount=0,this._i=g0.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Ie.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new g0(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.hr(t),Ie.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ie.waitFor(s).next(()=>r)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return Ie.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Ie.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return Ie.resolve(i)}containsKey(e,t){return Ie.resolve(this.oi.containsKey(t))}};var wS=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new GV(0),this.ci=!1,this.ci=!0,this.li=new Q2,this.referenceDelegate=e(this),this.hi=new tV(this),this.indexManager=new z2,this.remoteDocumentCache=(function(r){return new Z2(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new B2(t),this.Ti=new X2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Y2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new J2(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Je("MemoryPersistence","Starting transaction:",e);let r=new nV(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,t){return Ie.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},nV=class extends h2{constructor(e){super(),this.currentSequenceNumber=e}},iV=class n{constructor(e){this.persistence=e,this.Ai=new _0,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw kt(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Ie.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.mi,i=>{let r=It.fromPath(i);return this.fi(e,r).next(s=>{s||t.removeEntry(r,Zt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Ie.or([()=>Ie.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},ES=class n{constructor(e,t){this.persistence=e,this.gi=new Sl(i=>Zve(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=X0e(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return Ie.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?Ie.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Zt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Ie.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=iS(e.data.value)),t}Sr(e,t,i){return Ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return Ie.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var rV=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=bn(),r=bn();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var sV=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oV=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return r9()?8:Qve(Tr())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sV;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Bm()<=pn.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",zm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(Bm()<=pn.DEBUG&&Je("QueryEngine","Query:",zm(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Bm()<=pn.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",zm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ic(t))):Ie.resolve())}ps(e,t){if(Fq(t))return Ie.resolve(null);let i=ic(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=mS(t,null,"F"),i=ic(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=bn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,mS(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,i,r){return Fq(t)||r.isEqual(Zt.min())?Ie.resolve(null):this.gs.getDocuments(e,i).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,i,r)?Ie.resolve(null):(Bm()<=pn.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zm(t)),this.vs(e,o,t,qve(r,l0)).next(a=>a))})}bs(e,t){let i=new Ar(G7(e));return t.forEach((r,s)=>{$S(e,s)&&(i=i.add(s))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,i){return Bm()<=pn.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",zm(t)),this.gs.getDocumentsMatchingQuery(e,t,tf.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var t3="LocalStore",Y0e=3e8,aV=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Ni(ln),this.Ms=new Sl(s=>XV(s),YV),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Q0e(n,e,t,i){return new aV(n,e,t,i)}async function uK(n,e){let t=Kt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=bn();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function J0e(n,e){let t=Kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let d=l.batch,h=d.keys(),p=Ie.resolve();return h.forEach(_=>{p=p.next(()=>u.getEntry(c,_)).next(b=>{let g=l.docVersions.get(_);Yn(g!==null,48541),b.version.compareTo(g)<0&&(d.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),u.addEntry(b)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,d))})(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let c=bn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function dK(n){let e=Kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Z0e(n,e){let t=Kt(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,d)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ts.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),(function(b,g,v){return b.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Y0e?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(h,p,u)&&a.push(t.hi.updateTargetData(s,p))});let c=Cl(),l=bn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(ebe(s,o,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!i.isEqual(Zt.min())){let u=t.hi.getLastRemoteSnapshotVersion(s).next(d=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ie.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=r,s))}function ebe(n,e,t){let i=bn(),r=bn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Cl();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Zt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Je(t3,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function tbe(n,e){let t=Kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=WV),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nbe(n,e){let t=Kt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(s=>s?(r=s,Ie.resolve(r)):t.hi.allocateTargetId(i).next(o=>(r=new m0(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function cV(n,e,t){let i=Kt(n),r=i.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!lg(o))throw o;Je(t3,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function Yq(n,e,t){let i=Kt(n),r=Zt.min(),s=bn();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=Kt(c),h=d.Ms.get(u);return h!==void 0?Ie.resolve(d.Fs.get(h)):d.hi.getTargetData(l,u)})(i,o,ic(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,t?r:Zt.min(),t?s:bn())).next(a=>(ibe(i,g0e(e),a),{documents:a,qs:s})))}function ibe(n,e,t){let i=n.xs.get(e)||Zt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.xs.set(e,i)}var IS=class{constructor(){this.activeTargetIds=w0e()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lV=class{constructor(){this.Fo=new IS,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new IS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uV=class{xo(e){}shutdown(){}};var Qq="ConnectivityMonitor",TS=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Je(Qq,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){Je(Qq,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var nS=null;function dV(){return nS===null?nS=(function(){return 268435456+Math.round(2147483648*Math.random())})():nS++,"0x"+nS.toString(16)}var t2="RestConnection",rbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},hV=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===dS?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,s){let o=dV(),a=this.Go(e,t.toUriEncodedString());Je(t2,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);let{host:l}=new URL(a),u=Nu(l);return this.jo(e,a,c,i,u).then(d=>(Je(t2,`Received RPC '${e}' ${o}: `,d),d),d=>{throw ed(t2,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Jo(e,t,i,r,s,o){return this.Wo(e,t,i,r,s)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ag})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,t){let i=rbe[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var fV=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var es="WebChannelConnection",pV=class extends hV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,s){let o=dV();return new Promise((a,c)=>{let l=new XF;l.setWithCredentials(!0),l.listenOnce(YF.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case i0.NO_ERROR:let d=l.getResponseJson();Je(es,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case i0.TIMEOUT:Je(es,`RPC '${e}' ${o} timed out`),c(new Ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case i0.HTTP_ERROR:let h=l.getStatus();if(Je(es,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let b=(function(v){let P=v.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(P)>=0?P:de.UNKNOWN})(_.status);c(new Ve(b,_.message))}else c(new Ve(de.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ve(de.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{Je(es,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);Je(es,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}P_(e,t,i){let r=dV(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZF(),a=JF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");Je(es,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.T_(d);let h=!1,p=!1,_=new fV({Ho:g=>{p?Je(es,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(Je(es,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),Je(es,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},Yo:()=>d.close()}),b=(g,v,P)=>{g.listen(v,R=>{try{P(R)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,Um.EventType.OPEN,()=>{p||(Je(es,`RPC '${e}' stream ${r} transport opened.`),_.s_())}),b(d,Um.EventType.CLOSE,()=>{p||(p=!0,Je(es,`RPC '${e}' stream ${r} transport closed`),_.__(),this.I_(d))}),b(d,Um.EventType.ERROR,g=>{p||(p=!0,ed(es,`RPC '${e}' stream ${r} transport errored. Name:`,g.name,"Message:",g.message),_.__(new Ve(de.UNAVAILABLE,"The operation could not be completed")))}),b(d,Um.EventType.MESSAGE,g=>{var v;if(!p){let P=g.data[0];Yn(!!P,16349);let R=P,N=R?.error||((v=R[0])===null||v===void 0?void 0:v.error);if(N){Je(es,`RPC '${e}' stream ${r} received error:`,N);let U=N.status,O=(function(y){let x=rr[y];if(x!==void 0)return tK(x)})(U),I=N.message;O===void 0&&(O=de.INTERNAL,I="Unknown error status: "+U+" with message "+N.message),p=!0,_.__(new Ve(O,I)),d.close()}else Je(es,`RPC '${e}' stream ${r} received:`,P),_.a_(P)}}),b(a,QF.STAT_EVENT,g=>{g.stat===ZT.PROXY?Je(es,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===ZT.NOPROXY&&Je(es,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function n2(){return typeof document<"u"?document:null}function qS(n){return new O2(n,!0)}var SS=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&Je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Jq="PersistentStream",CS=class{constructor(e,t,i,r,s,o,a,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new SS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(wl(t.toString()),wl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new Ve(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Je(Jq,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Je(Jq,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mV=class extends CS{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=L0e(this.serializer,e),i=(function(s){if(!("targetChange"in s))return Zt.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Zt.min():o.readTime?sc(o.readTime):Zt.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=U2(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=T2(c)?{documents:U0e(s,c)}:{query:B0e(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nK(s,o.resumeToken);let l=L2(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Zt.min())>0){a.readTime=bS(s,o.snapshotVersion.toTimestamp());let l=L2(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=H0e(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=U2(this.serializer),t.removeTarget=e,this.k_(t)}},gV=class extends CS{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Yn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Yn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Yn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=V0e(e.writeResults,e.commitTime),i=sc(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=U2(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>F0e(this.serializer,i))};this.k_(t)}};var _V=class{},yV=class extends _V{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,F2(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(de.UNKNOWN,s.toString())})}Jo(e,t,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,F2(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(de.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},vV=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wl(t),this._a=!1):Je("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var af="RemoteStore",bV=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{cf(this)&&(Je(af,"Restarting streams for network reachability change."),await(async function(c){let l=Kt(c);l.Ia.add(4),await w0(l),l.Aa.set("Unknown"),l.Ia.delete(4),await KS(l)})(this))})}),this.Aa=new vV(i,r)}};async function KS(n){if(cf(n))for(let e of n.da)await e(!0)}async function w0(n){for(let e of n.da)await e(!1)}function hK(n,e){let t=Kt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),s3(t)?r3(t):ug(t).x_()&&i3(t,e))}function n3(n,e){let t=Kt(n),i=ug(t);t.Ta.delete(e),i.x_()&&fK(t,e),t.Ta.size===0&&(i.x_()?i.B_():cf(t)&&t.Aa.set("Unknown"))}function i3(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ug(n).H_(e)}function fK(n,e){n.Ra.$e(e),ug(n).Y_(e)}function r3(n){n.Ra=new N2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ug(n).start(),n.Aa.aa()}function s3(n){return cf(n)&&!ug(n).M_()&&n.Ta.size>0}function cf(n){return Kt(n).Ia.size===0}function pK(n){n.Ra=void 0}async function sbe(n){n.Aa.set("Online")}async function obe(n){n.Ta.forEach((e,t)=>{i3(n,e)})}async function abe(n,e){pK(n),s3(n)?(n.Aa.la(e),r3(n)):n.Aa.set("Unknown")}async function cbe(n,e,t){if(n.Aa.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))})(n,e)}catch(i){Je(af,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await AS(n,i)}else if(e instanceof $m?n.Ra.Ye(e):e instanceof _S?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Zt.min()))try{let i=await dK(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ta.get(l);u&&s.Ta.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ta.get(c);if(!u)return;s.Ta.set(c,u.withResumeToken(ts.EMPTY_BYTE_STRING,u.snapshotVersion)),fK(s,c);let d=new m0(u.target,c,l,u.sequenceNumber);i3(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){Je(af,"Failed to raise snapshot:",i),await AS(n,i)}}async function AS(n,e,t){if(!lg(e))throw e;n.Ia.add(1),await w0(n),n.Aa.set("Offline"),t||(t=()=>dK(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Je(af,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await KS(n)})}function mK(n,e){return e().catch(t=>AS(n,t,e))}async function XS(n){let e=Kt(n),t=id(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:WV;for(;lbe(e);)try{let r=await tbe(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,ube(e,r)}catch(r){await AS(e,r)}gK(e)&&_K(e)}function lbe(n){return cf(n)&&n.Pa.length<10}function ube(n,e){n.Pa.push(e);let t=id(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function gK(n){return cf(n)&&!id(n).M_()&&n.Pa.length>0}function _K(n){id(n).start()}async function dbe(n){id(n).na()}async function hbe(n){let e=id(n);for(let t of n.Pa)e.X_(t.mutations)}async function fbe(n,e,t){let i=n.Pa.shift(),r=D2.from(i,e,t);await mK(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await XS(n)}async function pbe(n,e){e&&id(n).Z_&&await(async function(i,r){if((function(o){return M0e(o)&&o!==de.ABORTED})(r.code)){let s=i.Pa.shift();id(i).N_(),await mK(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await XS(i)}})(n,e),gK(n)&&_K(n)}async function Zq(n,e){let t=Kt(n);t.asyncQueue.verifyOperationInProgress(),Je(af,"RemoteStore received new credentials");let i=cf(t);t.Ia.add(3),await w0(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await KS(t)}async function mbe(n,e){let t=Kt(n);e?(t.Ia.delete(2),await KS(t)):e||(t.Ia.add(2),await w0(t),t.Aa.set("Unknown"))}function ug(n){return n.Va||(n.Va=(function(t,i,r){let s=Kt(t);return s.ia(),new mV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:sbe.bind(null,n),e_:obe.bind(null,n),n_:abe.bind(null,n),J_:cbe.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),s3(n)?r3(n):n.Aa.set("Unknown")):(await n.Va.stop(),pK(n))})),n.Va}function id(n){return n.ma||(n.ma=(function(t,i,r){let s=Kt(t);return s.ia(),new gV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:dbe.bind(null,n),n_:pbe.bind(null,n),ea:hbe.bind(null,n),ta:fbe.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await XS(n)):(await n.ma.stop(),n.Pa.length>0&&(Je(af,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var xV=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function o3(n,e){if(wl("AsyncQueue",`${e}: ${n}`),lg(n))return new Ve(de.UNAVAILABLE,`${e}: ${n}`);throw n}var MS=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||It.comparator(t.key,i.key):(t,i)=>It.comparator(t.key,i.key),this.keyedMap=r0(),this.sortedSet=new Ni(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var DS=class{constructor(){this.fa=new Ni(It.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):kt(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},ig=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,MS.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&WS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var wV=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},EV=class{constructor(){this.queries=e7(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=Kt(t),s=r.queries;r.queries=e7(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(i)})})(this,new Ve(de.ABORTED,"Firestore shutting down"))}};function e7(){return new Sl(n=>j7(n),WS)}async function yK(n,e){let t=Kt(n),i=3,r=e.query,s=t.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new wV,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await t.onListen(r,!0);break;case 1:s.ya=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=o3(o,`Initialization of query '${zm(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&a3(t)}async function vK(n,e){let t=Kt(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function gbe(n,e){let t=Kt(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&a3(t)}function _be(n,e,t){let i=Kt(n),r=i.queries.get(e);if(r)for(let s of r.wa)s.onError(t);i.queries.delete(e)}function a3(n){n.Da.forEach(e=>{e.next()})}var IV,t7;(t7=IV||(IV={})).Fa="default",t7.Cache="cache";var RS=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ig(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ig.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==IV.Cache}};var PS=class{constructor(e){this.key=e}},kS=class{constructor(e){this.key=e}},TV=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=bn(),this.mutatedKeys=bn(),this.Xa=G7(e),this.eu=new MS(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new DS,r=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),p=$S(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),g=!1;h&&p?h.data.isEqual(p.data)?_!==b&&(i.track({type:3,doc:p}),g=!0):this.iu(h,p)||(i.track({type:2,doc:p}),g=!0,(c&&this.Xa(p,c)>0||l&&this.Xa(p,l)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),g=!0):h&&!p&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(p?(o=o.add(p),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((u,d)=>(function(p,_){let b=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{At:g})}};return b(p)-b(_)})(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(i),r=r!=null&&r;let a=t&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new ig(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new DS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=bn(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new kS(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new PS(i))}),t}uu(e){this.Ha=e.qs,this.Za=bn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ig.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},c3="SyncEngine",SV=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},CV=class{constructor(e){this.key=e,this.lu=!1}},AV=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Sl(a=>j7(a),WS),this.Tu=new Map,this.Iu=new Set,this.du=new Ni(It.comparator),this.Eu=new Map,this.Au=new _0,this.Ru={},this.Vu=new Map,this.mu=g0.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function ybe(n,e,t=!0){let i=TK(n),r,s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await bK(i,e,t,!0),r}async function vbe(n,e){let t=TK(n);await bK(t,e,!0,!1)}async function bK(n,e,t,i){let r=await nbe(n.localStore,ic(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await bbe(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&hK(n.remoteStore,r),a}async function bbe(n,e,t,i,r){n.gu=(d,h,p)=>(async function(b,g,v,P){let R=g.view.nu(v);R.Ds&&(R=await Yq(b.localStore,g.query,!1).then(({documents:I})=>g.view.nu(I,R)));let N=P&&P.targetChanges.get(g.targetId),U=P&&P.targetMismatches.get(g.targetId)!=null,O=g.view.applyChanges(R,b.isPrimaryClient,N,U);return i7(b,g.targetId,O._u),O.snapshot})(n,d,h,p);let s=await Yq(n.localStore,e,!0),o=new TV(e,s.qs),a=o.nu(s.documents),c=p0.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);i7(n,t,l._u);let u=new SV(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function xbe(n,e,t){let i=Kt(n),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!WS(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await cV(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&n3(i.remoteStore,r.targetId),MV(i,r.targetId)}).catch(cg)):(MV(i,r.targetId),await cV(i.localStore,r.targetId,!0))}async function wbe(n,e){let t=Kt(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),n3(t.remoteStore,i.targetId))}async function Ebe(n,e,t){let i=Dbe(n);try{let r=await(function(o,a){let c=Kt(o),l=cr.now(),u=a.reduce((p,_)=>p.add(_.key),bn()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Cl(),b=bn();return c.Os.getEntries(p,u).next(g=>{_=g,_.forEach((v,P)=>{P.isValidDocument()||(b=b.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(g=>{d=g;let v=[];for(let P of a){let R=A0e(P,d.get(P.key).overlayedDocument);R!=null&&v.push(new ac(P.key,R,F7(R.value.mapValue),rc.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,v,a)}).next(g=>{h=g;let v=g.applyToLocalDocumentSet(d,b);return c.documentOverlayCache.saveOverlays(p,g.batchId,v)})}).then(()=>({batchId:h.batchId,changes:$7(d)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Ni(ln)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(i,r.batchId,t),await E0(i,r.changes),await XS(i.remoteStore)}catch(r){let s=o3(r,"Failed to persist write");t.reject(s)}}async function xK(n,e){let t=Kt(n);try{let i=await Z0e(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Eu.get(s);o&&(Yn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?Yn(o.lu,14607):r.removedDocuments.size>0&&(Yn(o.lu,42227),o.lu=!1))}),await E0(t,i,e)}catch(i){await cg(i)}}function n7(n,e,t){let i=Kt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=Kt(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.wa)h.va(a)&&(l=!0)}),l&&a3(c)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ibe(n,e,t){let i=Kt(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),s=r&&r.key;if(s){let o=new Ni(It.comparator);o=o.insert(s,_a.newNoDocument(s,Zt.min()));let a=bn().add(s),c=new gS(Zt.min(),new Map,new Ni(ln),o,a);await xK(i,c),i.du=i.du.remove(s),i.Eu.delete(e),l3(i)}else await cV(i.localStore,e,!1).then(()=>MV(i,e,t)).catch(cg)}async function Tbe(n,e){let t=Kt(n),i=e.batch.batchId;try{let r=await J0e(t.localStore,e);EK(t,i,null),wK(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await E0(t,r)}catch(r){await cg(r)}}async function Sbe(n,e,t){let i=Kt(n);try{let r=await(function(o,a){let c=Kt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Yn(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(i.localStore,e);EK(i,e,t),wK(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await E0(i,r)}catch(r){await cg(r)}}function wK(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function EK(n,e,t){let i=Kt(n),r=i.Ru[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function MV(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||IK(n,i)})}function IK(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(n3(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),l3(n))}function i7(n,e,t){for(let i of t)i instanceof PS?(n.Au.addReference(i.key,e),Cbe(n,i)):i instanceof kS?(Je(c3,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||IK(n,i.key)):kt(19791,{yu:i})}function Cbe(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Je(c3,"New document in limbo: "+t),n.Iu.add(i),l3(n))}function l3(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new It(gi.fromString(e)),i=n.mu.next();n.Eu.set(i,new CV(t)),n.du=n.du.insert(t,i),hK(n.remoteStore,new m0(ic(QV(t.path)),i,"TargetPurposeLimboResolution",GV.ue))}}async function E0(n,e,t){let i=Kt(n),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,c)=>{o.push(i.gu(c,e,t).then(l=>{var u;if((l||t)&&i.isPrimaryClient){let d=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){r.push(l);let d=rV.Es(c.targetId,l);s.push(d)}}))}),await Promise.all(o),i.hu.J_(r),await(async function(c,l){let u=Kt(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ie.forEach(l,h=>Ie.forEach(h.Is,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>Ie.forEach(h.ds,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!lg(d))throw d;Je(t3,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let p=u.Fs.get(h),_=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(_);u.Fs=u.Fs.insert(h,b)}}})(i.localStore,s))}async function Abe(n,e){let t=Kt(n);if(!t.currentUser.isEqual(e)){Je(c3,"User change. New user:",e.toKey());let i=await uK(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ve(de.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await E0(t,i.Bs)}}function Mbe(n,e){let t=Kt(n),i=t.Eu.get(e);if(i&&i.lu)return bn().add(i.key);{let r=bn(),s=t.Tu.get(e);if(!s)return r;for(let o of s){let a=t.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function TK(n){let e=Kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mbe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ibe.bind(null,e),e.hu.J_=gbe.bind(null,e.eventManager),e.hu.pu=_be.bind(null,e.eventManager),e}function Dbe(n){let e=Kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tbe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sbe.bind(null,e),e}var SK=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qS(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,i){return null}Fu(t,i){return null}vu(t){return Q0e(this.persistence,new oV,t.initialUser,this.serializer)}Du(t){return new wS(iV.Vi,this.serializer)}bu(t){return new lV}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),DV=class extends SK{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Yn(this.persistence.referenceDelegate instanceof ES,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new G2(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new wS(i=>ES.Vi(i,t),this.serializer)}};var Rbe=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n7(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Abe.bind(null,this.syncEngine),await mbe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EV})()}createDatastore(t){let i=qS(t.databaseInfo.databaseId),r=(function(o){return new pV(o)})(t.databaseInfo);return(function(o,a,c,l){return new yV(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new bV(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>n7(this.syncEngine,i,0),(function(){return TS.C()?new TS:new uV})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new AV(s,o,a,c,l,u);return d&&(h.fu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(s){let o=Kt(s);Je(af,"RemoteStore shutting down."),o.Ia.add(5),await w0(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}return n.provider={build:()=>new n},n})();var NS=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):wl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rd="FirestoreClient",RV=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Cr.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{Je(rd,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Je(rd,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=o3(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function i2(n,e){n.asyncQueue.verifyOperationInProgress(),Je(rd,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await uK(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{ed("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Je("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{ed("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e}async function r7(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Pbe(n);Je(rd,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Zq(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Zq(e.remoteStore,r)),n._onlineComponents=e}async function Pbe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je(rd,"Using user provided OfflineComponentProvider");try{await i2(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ed("Error using user provided cache. Falling back to memory cache: "+t),await i2(n,new SK)}}else Je(rd,"Using default OfflineComponentProvider"),await i2(n,new DV(void 0));return n._offlineComponents}async function CK(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je(rd,"Using user provided OnlineComponentProvider"),await r7(n,n._uninitializedComponentsProvider._online)):(Je(rd,"Using default OnlineComponentProvider"),await r7(n,new Rbe))),n._onlineComponents}function kbe(n){return CK(n).then(e=>e.syncEngine)}async function AK(n){let e=await CK(n),t=e.eventManager;return t.onListen=ybe.bind(null,e.syncEngine),t.onUnlisten=xbe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vbe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wbe.bind(null,e.syncEngine),t}function Nbe(n,e,t={}){let i=new ma;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new NS({next:h=>{u.Ou(),o.enqueueAndForget(()=>vK(s,d));let p=h.docs.has(a);!p&&h.fromCache?l.reject(new Ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?l.reject(new Ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new RS(QV(a.path),u,{includeMetadataChanges:!0,ka:!0});return yK(s,d)})(await AK(n),n.asyncQueue,e,t,i)),i.promise}function Obe(n,e,t={}){let i=new ma;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new NS({next:h=>{u.Ou(),o.enqueueAndForget(()=>vK(s,d)),h.fromCache&&c.source==="server"?l.reject(new Ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new RS(a,u,{includeMetadataChanges:!0,ka:!0});return yK(s,d)})(await AK(n),n.asyncQueue,e,t,i)),i.promise}function MK(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var s7=new Map;var DK="firestore.googleapis.com",o7=!0,OS=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DK,this.ssl=o7}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:o7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lK;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K0e)throw new Ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wve("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MK((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},rg=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new r2;switch(i.type){case"firstParty":return new c2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=s7.get(t);i&&(Je("ComponentProvider","Removing Datastore"),s7.delete(t),i.terminate())})(this),Promise.resolve()}};function RK(n,e,t,i={}){var r;n=ga(n,rg);let s=Nu(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(EI(`https://${c}`),II("Firestore",!0)),o.host!==DK&&o.host!==c&&ed("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:i});if(!qa(l,a)&&(n._setSettings(l),i.mockUserToken)){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Cr.MOCK_USER;else{u=J8(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Cr(h)}n._authCredentials=new s2(new oS(u,d))}}var Al=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Mr=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(x0(t,n._jsonSchema))return new n(e,i||null,new It(gi.fromString(t.referencePath)))}};Mr._jsonSchemaVersion="firestore/documentReference/1.0",Mr._jsonSchema={type:ar("string",Mr._jsonSchemaVersion),referencePath:ar("string")};var Yu=class n extends Al{constructor(e,t,i){super(e,t,QV(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new It(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function PK(n,e,...t){if(n=er(n),f7("collection","path",e),n instanceof rg){let i=gi.fromString(e,...t);return Tq(i),new Yu(n,null,i)}{if(!(n instanceof Mr||n instanceof Yu))throw new Ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(gi.fromString(e,...t));return Tq(i),new Yu(n.firestore,null,i)}}function u3(n,e,...t){if(n=er(n),arguments.length===1&&(e=c0.newId()),f7("doc","path",e),n instanceof rg){let i=gi.fromString(e,...t);return Iq(i),new Mr(n,null,new It(i))}{if(!(n instanceof Mr||n instanceof Yu))throw new Ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(gi.fromString(e,...t));return Iq(i),new Mr(n.firestore,n instanceof Yu?n.converter:null,new It(i))}}var a7="AsyncQueue",LS=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new SS(this,"async_queue_retry"),this.oc=()=>{let i=n2();i&&Je(a7,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=n2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=n2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ma;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lg(e))throw e;Je(a7,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,wl("INTERNAL UNHANDLED ERROR: ",c7(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=xV.createAndSchedule(this,e,t,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&kt(47125,{hc:c7(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function c7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Ml=class extends rg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new LS,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new LS(e),this._firestoreClient=void 0,await e}}};function kK(n,e){let t=typeof n=="object"?n:Nh(),i=typeof n=="string"?n:e||dS,r=rm(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Q8("firestore");s&&RK(r,...s)}return r}function d3(n){if(n._terminated)throw new Ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Lbe(n),n._firestoreClient}function Lbe(n){var e,t,i;let r=n._freezeSettings(),s=(function(a,c,l,u){return new f2(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,MK(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new RV(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Qu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ts.fromBase64String(e))}catch(t){throw new Ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(x0(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Qu._jsonSchemaVersion="firestore/bytes/1.0",Qu._jsonSchema={type:ar("string",Qu._jsonSchemaVersion),bytes:ar("string")};var sg=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ao(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var y0=class{constructor(e){this._methodName=e}};var Ju=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(x0(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ju._jsonSchemaVersion="firestore/geoPoint/1.0",Ju._jsonSchema={type:ar("string",Ju._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};var Zu=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(x0(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Zu._jsonSchemaVersion="firestore/vectorValue/1.0",Zu._jsonSchema={type:ar("string",Zu._jsonSchemaVersion),vectorValues:ar("object")};var Fbe=/^__.*__$/,PV=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ac(e,this.data,this.fieldMask,t,this.fieldTransforms):new of(e,this.data,t,this.fieldTransforms)}},FS=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ac(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function NK(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{Ec:n})}}var kV=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return US(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(NK(this.Ec)&&Fbe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},NV=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qS(e)}Dc(e,t,i,r=!1){return new kV({Ec:e,methodName:t,bc:i,path:ao.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function I0(n){let e=n._freezeSettings(),t=qS(n._databaseId);return new NV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OK(n,e,t,i,r,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,r);h3("Data must be an object, but it was:",o,i);let a=FK(i,o),c,l;if(s.merge)c=new Do(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=OV(e,d,t);if(!o.contains(h))throw new Ve(de.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);UK(u,h)||u.push(h)}c=new Do(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new PV(new oo(a),c,l)}var VS=class n extends y0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Vbe(n,e,t,i){let r=n.Dc(1,e,t);h3("Data must be an object, but it was:",r,i);let s=[],o=oo.empty();sd(i,(c,l)=>{let u=f3(e,c,t);l=er(l);let d=r.gc(u);if(l instanceof VS)s.push(u);else{let h=T0(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new Do(s);return new FS(o,a,r.fieldTransforms)}function Ube(n,e,t,i,r,s){let o=n.Dc(1,e,t),a=[OV(e,i,t)],c=[r];if(s.length%2!=0)throw new Ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(OV(e,s[h])),c.push(s[h+1]);let l=[],u=oo.empty();for(let h=a.length-1;h>=0;--h)if(!UK(l,a[h])){let p=a[h],_=c[h];_=er(_);let b=o.gc(p);if(_ instanceof VS)l.push(p);else{let g=T0(_,b);g!=null&&(l.push(p),u.set(p,g))}}let d=new Do(l);return new FS(u,d,o.fieldTransforms)}function LK(n,e,t,i=!1){return T0(t,n.Dc(i?4:3,e))}function T0(n,e){if(VK(n=er(n)))return h3("Unsupported field value:",e,n),FK(n,e);if(n instanceof y0)return(function(i,r){if(!NK(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let s=[],o=0;for(let a of i){let c=T0(a,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(i,r){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return E0e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=cr.fromDate(i);return{timestampValue:bS(r.serializer,s)}}if(i instanceof cr){let s=new cr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bS(r.serializer,s)}}if(i instanceof Ju)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qu)return{bytesValue:nK(r.serializer,i._byteString)};if(i instanceof Mr){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:e3(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Zu)return(function(o,a){return{mapValue:{fields:{[$V]:{stringValue:qV},[Ym]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return ZV(a.serializer,l)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${zS(i)}`)})(n,e)}function FK(n,e){let t={};return M7(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sd(n,(i,r)=>{let s=T0(r,e.Vc(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function VK(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof Ju||n instanceof Qu||n instanceof Mr||n instanceof y0||n instanceof Zu)}function h3(n,e,t){if(!VK(t)||!p7(t)){let i=zS(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function OV(n,e,t){if((e=er(e))instanceof sg)return e._internalPath;if(typeof e=="string")return f3(n,e);throw US("Field path arguments must be of type string or ",n,!1,void 0,t)}var Bbe=new RegExp("[~\\*/\\[\\]]");function f3(n,e,t){if(e.search(Bbe)>=0)throw US(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sg(...e.split("."))._internalPath}catch{throw US(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function US(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ve(de.INVALID_ARGUMENT,a+n+c)}function UK(n,e){return n.some(t=>t.isEqual(e))}var v0=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new LV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(p3("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},LV=class extends v0{data(){return super.data()}};function p3(n,e){return typeof e=="string"?f3(n,e):e instanceof sg?e._internalPath:e._delegate._internalPath}function zbe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var b0=class{},og=class extends b0{};function BK(n,e,...t){let i=[];e instanceof b0&&i.push(e),i=i.concat(t),(function(s){let o=s.filter(c=>c instanceof VV).length,a=s.filter(c=>c instanceof FV).length;if(o>1||o>0&&a>0)throw new Ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var FV=class n extends og{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return GK(e._query,t),new Al(e.firestore,e.converter,S2(e._query,t))}_parse(e){let t=I0(e.firestore);return(function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){u7(d,u);let _=[];for(let b of d)_.push(l7(c,s,b));h={arrayValue:{values:_}}}else h=l7(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||u7(d,u),h=LK(a,o,d,u==="in"||u==="not-in");return or.create(l,u,h)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var VV=class n extends b0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ya.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)GK(o,c),o=S2(o,c)})(e._query,t),new Al(e.firestore,e.converter,S2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var UV=class n extends og{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,s,o){if(r.startAt!==null)throw new Ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nf(s,o)})(e._query,this._field,this._direction);return new Al(e.firestore,e.converter,(function(r,s){let o=r.explicitOrderBy.concat([s]);return new Tl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function zK(n,e="asc"){let t=e,i=p3("orderBy",n);return UV._create(i,t)}var BV=class n extends og{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Al(e.firestore,e.converter,mS(e._query,this._limit,this._limitType))}};function HK(n){return $ve("limit",n),BV._create("limit",n,"F")}var zV=class n extends og{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=Hbe(e,this.type,this._docOrFields,this._inclusive);return new Al(e.firestore,e.converter,(function(r,s){return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)})(e._query,t))}};function jK(...n){return zV._create("startAfter",n,!1)}function Hbe(n,e,t,i){if(t[0]=er(t[0]),t[0]instanceof v0)return(function(s,o,a,c,l){if(!c)throw new Ve(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Wm(s))if(d.field.isKeyField())u.push(fS(o,c.key));else{let h=c.data.field(d.field);if(jS(h))throw new Ve(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let p=d.field.canonicalString();throw new Ve(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new nd(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=I0(n.firestore);return(function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new Ve(de.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let p=[];for(let _=0;_<u.length;_++){let b=u[_];if(h[_].field.isKeyField()){if(typeof b!="string")throw new Ve(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!JV(o)&&b.indexOf("/")!==-1)throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let g=o.path.child(gi.fromString(b));if(!It.isDocumentKey(g))throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let v=new It(g);p.push(fS(a,v))}else{let g=LK(c,l,b);p.push(g)}}return new nd(p,d)})(n._query,n.firestore._databaseId,r,e,t,i)}}function l7(n,e,t){if(typeof(t=er(t))=="string"){if(t==="")throw new Ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JV(e)&&t.indexOf("/")!==-1)throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(gi.fromString(t));if(!It.isDocumentKey(i))throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fS(n,new It(i))}if(t instanceof Mr)return fS(n,t._key);throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zS(t)}.`)}function u7(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GK(n,e){let t=(function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var HV=class{convertValue(e,t="none"){switch(td(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return sd(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[Ym].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ii(o.doubleValue));return new Zu(s)}convertGeoPoint(e){return new Ju(Ii(e.latitude),Ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=GS(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(d0(e));default:return null}}convertTimestamp(e){let t=El(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=gi.fromString(e);Yn(cK(i),9688,{name:e});let r=new hS(i.get(1),i.get(3)),s=new It(i.popFirst(5));return r.isEqual(t)||wl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function WK(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Jh=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zh=class n extends v0{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(p3("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Zh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zh._jsonSchema={type:ar("string",Zh._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};var qm=class extends Zh{data(e={}){return super.data(e)}},Km=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new qm(this._firestore,this._userDataWriter,i.key,i,new Jh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new qm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Jh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new qm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Jh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:jbe(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function jbe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:n})}}function $K(n){n=ga(n,Mr);let e=ga(n.firestore,Ml);return Nbe(d3(e),n._key).then(t=>Gbe(e,n,t))}Km._jsonSchemaVersion="firestore/querySnapshot/1.0",Km._jsonSchema={type:ar("string",Km._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};var BS=class extends HV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,t)}};function qK(n){n=ga(n,Al);let e=ga(n.firestore,Ml),t=d3(e),i=new BS(e);return zbe(n._query),Obe(t,n._query).then(r=>new Km(e,i,n,r))}function KK(n,e,t){n=ga(n,Mr);let i=ga(n.firestore,Ml),r=WK(n.converter,e,t);return YS(i,[OK(I0(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,rc.none())])}function XK(n,e,t,...i){n=ga(n,Mr);let r=ga(n.firestore,Ml),s=I0(r),o;return o=typeof(e=er(e))=="string"||e instanceof sg?Ube(s,"updateDoc",n._key,e,t,i):Vbe(s,"updateDoc",n._key,e),YS(r,[o.toMutation(n._key,rc.exists(!0))])}function YK(n){return YS(ga(n.firestore,Ml),[new f0(n._key,rc.none())])}function QK(n,e){let t=ga(n.firestore,Ml),i=u3(n),r=WK(n.converter,e);return YS(t,[OK(I0(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,rc.exists(!1))]).then(()=>i)}function YS(n,e){return(function(i,r){let s=new ma;return i.asyncQueue.enqueueAndForget(async()=>Ebe(await kbe(i),r,s)),s.promise})(d3(n),e)}function Gbe(n,e,t){let i=t.docs.get(e._key),r=new BS(n);return new Zh(n,r,e._key,i,new Jh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ag=r})(Lu),la(new gs("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Ml(new o2(i.getProvider("auth-internal")),new l2(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hS(l.options.projectId,u)})(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ai(bq,xq,e),Ai(bq,xq,"esm2017")})();var Dl=class{constructor(e){return e}},JK="firestore",m3=class{constructor(){return om(JK)}};var g3=new Ee("angularfire2.firestore-instances");function Wbe(n,e){let t=pv(JK,n,e);return t&&new Dl(t)}function $be(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Dl(i)}}var qbe={provide:m3,deps:[[new Cs,g3]]},Kbe={provide:Dl,useFactory:Wbe,deps:[[new Cs,g3],il]};function ZK(n,...e){return Ai("angularfire",Fu.full,"fst"),vr([Kbe,qbe,{provide:g3,useFactory:$be(n),multi:!0,deps:[St,Qt,Vu,Lh,[new Cs,Rv],[new Cs,am],...e]}])}var eX=wi(_q,!0);var tX=wi(mq,!0);var nX=wi(QK,!0,2);var QS=wi(PK,!0,2);var iX=wi(YK,!0,2);var dg=wi(u3,!0,2);var rX=wi($K,!0);var sX=wi(qK,!0);var oX=wi(kK,!0);var _3=wi(HK,!0,2);var S0=wi(zK,!0,2),JS=wi(BK,!0,2);var aX=wi(KK,!0,2);var cX=wi(jK,!0,2);var lX=wi(XK,!0,2);var C0={production:!0,test:!1,firebase:{apiKey:"AIzaSyBAO3O7xMC8HoyDEiqvKuYzAB1XyYaDpYg",authDomain:"lifestyleadapter.firebaseapp.com",projectId:"lifestyleadapter",storageBucket:"lifestyleadapter.firebasestorage.app",messagingSenderId:"391283581586",appId:"1:391283581586:web:c2296efb45ba65e2c4bc4b",measurementId:"G-Y01W5VQR7N"},githubToken:""};function lf(n){return n.buttons===0||n.detail===0}function uf(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var y3;function uX(){if(y3==null){let n=typeof document<"u"?document.head:null;y3=!!(n&&(n.createShadowRoot||n.attachShadow))}return y3}function v3(n){if(uX()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ls(n){return n.composedPath?n.composedPath()[0]:n.target}var b3;try{b3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{b3=!1}var Ki=(()=>{class n{_platformId=H(jc);isBrowser=this._platformId?D6(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||b3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A0;function dX(){if(A0==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>A0=!0}))}finally{A0=A0||!1}return A0}function hg(n){return dX()?n:!!n.capture}function fg(n,e=0){return hX(n)?Number(n):arguments.length===2?e:0}function hX(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Ro(n){return n instanceof nn?n.nativeElement:n}var fX=new Ee("cdk-input-modality-detector-options"),pX={ignoreKeys:[18,17,224,91,16]},mX=650,x3={passive:!0,capture:!0},gX=(()=>{class n{_platform=H(Ki);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new zi(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ls(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<mX||(this._modality.next(lf(t)?"keyboard":"mouse"),this._mostRecentTarget=Ls(t))};_onTouchstart=t=>{if(uf(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ls(t)};constructor(){let t=H(St),i=H(Wt),r=H(fX,{optional:!0});if(this._options=ie(ie({},pX),r),this.modalityDetected=this._modality.pipe(TR(1)),this.modalityChanged=this.modalityDetected.pipe(eh()),this._platform.isBrowser){let s=H(br).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(i,"keydown",this._onKeydown,x3),s.listen(i,"mousedown",this._onMousedown,x3),s.listen(i,"touchstart",this._onTouchstart,x3)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M0=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(M0||{}),_X=new Ee("cdk-focus-monitor-default-options"),ZS=hg({passive:!0,capture:!0}),pg=(()=>{class n{_ngZone=H(St);_platform=H(Ki);_inputModalityDetector=H(gX);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=H(Wt);_stopInputModalityDetector=new Dt;constructor(){let t=H(_X,{optional:!0});this._detectionMode=t?.detectionMode||M0.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=Ls(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=Ro(t);if(!this._platform.isBrowser||r.nodeType!==1)return xt();let s=v3(r)||this._document,o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let a={checkChildren:i,subject:new Dt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=Ro(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=Ro(t),o=this._document.activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===M0.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===M0.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?mX:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=Ls(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ZS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ZS)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Na(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ZS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ZS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eC=new WeakMap,Po=(()=>{class n{_appRef;_injector=H(Qt);_environmentInjector=H(ii);load(t){let i=this._appRef=this._appRef||this._injector.get(wr),r=eC.get(i);r||(r={loaders:new Set,refs:[]},eC.set(i,r),i.onDestroy(()=>{eC.get(i)?.refs.forEach(s=>s.destroy()),eC.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(DE(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function w3(n){return Array.isArray(n)?n:[n]}var yX=new Set,df,E3=(()=>{class n{_platform=H(Ki);_nonce=H(Np,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Qbe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Ybe(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ybe(n,e){if(!yX.has(n))try{df||(df=document.createElement("style"),e&&df.setAttribute("nonce",e),df.setAttribute("type","text/css"),document.head.appendChild(df)),df.sheet&&(df.sheet.insertRule(`@media ${n} {body{ }}`,0),yX.add(n))}catch(t){console.error(t)}}function Qbe(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}function Jbe(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var vX=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zbe=(()=>{class n{_mutationObserverFactory=H(vX);_observedElements=new Map;_ngZone=H(St);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){let i=Ro(t);return new _t(r=>{let o=this._observeElement(i).pipe(pt(a=>a.filter(c=>!Jbe(c))),ni(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let i=new Dt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bX=(()=>{class n{_contentObserver=H(Zbe);_elementRef=H(nn);event=new vn;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=fg(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(K_(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",ki],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),xX=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({providers:[vX]})}return n})();var I3={},hf=class n{_appId=H(kp);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),I3.hasOwnProperty(e)||(I3[e]=0),`${e}${t?n._infix+"-":""}${I3[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var exe=200,tC=class{_letterKeyStream=new Dt;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Dt;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:exe;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(ji(t=>this._pressedLetters.push(t)),K_(e),ni(()=>this._pressedLetters.length>0),pt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}};function nC(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var iC=class{_items;_activeItemIndex=jn(-1);_activeItem=jn(null);_wrap=!1;_typeaheadSubscription=Pn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Bc?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Ay(e)&&(this._effectRef=fy(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new Dt;change=new Dt;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new tC(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||nC(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex()+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return Ay(this._items)?this._items():this._items instanceof Bc?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var D0=class extends iC{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var rC;function txe(){if(rC===void 0&&(rC=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(rC=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return rC}function mg(n){return txe()?.createHTML(n)||n}var ff;function IX(){if(ff==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ff=!1,ff;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)ff=!0;else{let n=Element.prototype.scrollTo;n?ff=!/\{\s*\[native code\]\s*\}/.test(n.toString()):ff=!1}}return ff}function C3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var ixe=new Ee("MATERIAL_ANIMATIONS"),TX=null;function rxe(){return H(ixe,{optional:!0})?.animationsDisabled||H(wy,{optional:!0})==="NoopAnimations"?"di-disabled":(TX??=H(E3).matchMedia("(prefers-reduced-motion)").matches,TX?"reduced-motion":"enabled")}function va(){return rxe()!=="enabled"}function Xi(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Rl(n){return n!=null&&`${n}`!="false"}var ko=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(ko||{}),A3=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=ko.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},SX=hg({passive:!0,capture:!0}),M3=class{_events=new Map;addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,SX)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,SX)))}_delegateEventHandler=e=>{let t=Ls(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}},R0={enterDuration:225,exitDuration:150},sxe=800,CX=hg({passive:!0,capture:!0}),AX=["mousedown","touchstart"],MX=["mouseup","mouseleave","touchend","touchcancel"],oxe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),pf=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new M3;constructor(e,t,i,r,s){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=Ro(i)),s&&s.get(Po).load(oxe)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ie(ie({},R0),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||axe(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,_=h==="none"||p==="0s"||p==="0s, 0s"||r.width===0&&r.height===0,b=new A3(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",b.state=ko.FADING_IN,i.persistent||(this._mostRecentTransientRipple=b);let g=null;return!_&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let v=()=>{g&&(g.fallbackTimer=null),clearTimeout(R),this._finishRippleTransition(b)},P=()=>this._destroyRipple(b),R=setTimeout(P,l+100);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",P),g={onTransitionEnd:v,onTransitionCancel:P,fallbackTimer:R}}),this._activeRipples.set(b,g),(_||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(e.state===ko.FADING_OUT||e.state===ko.HIDDEN)return;let t=e.element,i=ie(ie({},R0),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=ko.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Ro(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,AX.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{MX.forEach(t=>{this._triggerElement.addEventListener(t,this,CX)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===ko.FADING_IN?this._startFadeOutTransition(e):e.state===ko.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=ko.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=ko.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=lf(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+sxe;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!uf(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===ko.VISIBLE||e.config.terminateOnPointerUp&&e.state===ko.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(AX.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(MX.forEach(t=>e.removeEventListener(t,this,CX)),this._pointerUpEventsRegistered=!1))}};function axe(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var P0=new Ee("mat-ripple-global-options"),DX=(()=>{class n{_elementRef=H(nn);_animationsDisabled=va();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=H(St),i=H(Ki),r=H(P0,{optional:!0}),s=H(Qt);this._globalOptions=r||{},this._rippleRenderer=new pf(this,t,this._elementRef,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ie(ie(ie({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,ie(ie({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ie(ie({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&ui("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var cxe={capture:!0},lxe=["focus","mousedown","mouseenter","touchstart"],D3="mat-ripple-loader-uninitialized",R3="mat-ripple-loader-class-name",RX="mat-ripple-loader-centered",sC="mat-ripple-loader-disabled",PX=(()=>{class n{_document=H(Wt);_animationsDisabled=va();_globalRippleOptions=H(P0,{optional:!0});_platform=H(Ki);_ngZone=H(St);_injector=H(Qt);_eventCleanups;_hosts=new Map;constructor(){let t=H(br).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>lxe.map(i=>t.listen(this._document,i,this._onInteraction,cxe)))}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(t,i){t.setAttribute(D3,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(R3))&&t.setAttribute(R3,i.className||""),i.centered&&t.setAttribute(RX,""),i.disabled&&t.setAttribute(sC,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(sC,""):t.removeAttribute(sC)}_onInteraction=t=>{let i=Ls(t);if(i instanceof HTMLElement){let r=i.closest(`[${D3}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(R3)),t.append(i);let r=this._globalRippleOptions,s=this._animationsDisabled?0:r?.animation?.enterDuration??R0.enterDuration,o=this._animationsDisabled?0:r?.animation?.exitDuration??R0.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||t.hasAttribute(sC),rippleConfig:{centered:t.hasAttribute(RX),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:o}}},c=new pf(a,this._ngZone,i,this._platform,this._injector),l=!a.rippleDisabled;l&&c.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:c,hasSetUpEvents:l}),t.removeAttribute(D3)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var uxe=["mat-icon-button",""],dxe=["*"],hxe=new Ee("MAT_BUTTON_CONFIG");function kX(n){return n==null?void 0:s6(n)}var P3=(()=>{class n{_elementRef=H(nn);_ngZone=H(St);_animationsDisabled=va();_config=H(hxe,{optional:!0});_focusMonitor=H(pg);_cleanupClick;_renderer=H(Lr);_rippleLoader=H(PX);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){H(Po).load(gg);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Wi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Xc(r.color?"mat-"+r.color:""),ui("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ki],disabled:[2,"disabled","disabled",ki],ariaDisabled:[2,"aria-disabled","ariaDisabled",ki],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ki],tabIndex:[2,"tabIndex","tabIndex",kX],_tabindex:[2,"tabindex","_tabindex",kX]}})}return n})(),k3=(()=>{class n extends P3{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[hi],attrs:uxe,ngContentSelectors:dxe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(fr(),fs(0,"span",0),Xn(1),fs(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var fxe=new Ee("cdk-dir-doc",{providedIn:"root",factory:()=>H(Wt)}),pxe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function NX(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?pxe.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var k0=(()=>{class n{get value(){return this.valueSignal()}valueSignal=jn("ltr");change=new vn;constructor(){let t=H(fxe,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(NX(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Di=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();var _g=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var mxe=["matButton",""],gxe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],_xe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var OX=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),yg=(()=>{class n extends P3{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=yxe(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?OX.get(this._appearance):null,s=OX.get(t);r&&i.remove(...r),i.add(...s),this._appearance=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[hi],attrs:mxe,ngContentSelectors:_xe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(fr(gxe),fs(0,"span",0),Xn(1),at(2,"span",1),Xn(3,1),Et(),Xn(4,2),fs(5,"span",2)(6,"span",3)),i&2&&ui("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function yxe(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var No=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[_g,Di]})}return n})();var vxe=["*"];var bxe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],xxe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],wxe=new Ee("MAT_CARD_CONFIG"),od=(()=>{class n{appearance;constructor(){let t=H(wxe,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(i,r){i&2&&ui("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")("mat-mdc-card-filled",r.appearance==="filled")("mdc-card--filled",r.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:vxe,decls:1,vars:0,template:function(i,r){i&1&&(fr(),Xn(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),oC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var vg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),LX=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var aC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:xxe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(fr(bxe),Xn(0),at(1,"div",0),Xn(2,1),Et(),Xn(3,2))},encapsulation:2,changeDetection:0})}return n})();var Oo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();function FX(n){return Error(`Unable to find icon with the name "${n}"`)}function Exe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function VX(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function UX(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Pl=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},zX=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Pl(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(Or.HTML,r);if(!o)throw UX(r);let a=mg(o);return this._addSvgIconConfig(t,i,new Pl("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Pl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(Or.HTML,i);if(!s)throw UX(i);let o=mg(s);return this._addSvgIconSetConfig(t,new Pl("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Or.RESOURCE_URL,t);if(!i)throw VX(t);let r=this._cachedIconsByUrl.get(i);return r?xt(lC(r)):this._loadSvgIconFromConfig(new Pl(t,null)).pipe(ji(s=>this._cachedIconsByUrl.set(i,s)),pt(s=>lC(s)))}getNamedSvgIcon(t,i=""){let r=BX(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):G_(FX(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?xt(lC(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(pt(i=>lC(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return xt(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Zd(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Or.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),xt(null)})));return q_(s).pipe(pt(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw FX(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ji(i=>t.svgText=i),pt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?xt(null):this._fetchIcon(t).pipe(ji(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(mg("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(mg("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw Exe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(Or.RESOURCE_URL,i);if(!o)throw VX(i);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(pt(l=>mg(l)),th(()=>this._inProgressUrlFetches.delete(o)),IR());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(BX(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return Ixe(s)?new Pl(s.url,null,s.options):new Pl(s,null)}}static \u0275fac=function(i){return new(i||n)(it(Nk,8),it(Ok),it(Wt,8),it(Es))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lC(n){return n.cloneNode(!0)}function BX(n,e){return n+":"+e}function Ixe(n){return!!(n.url&&n.options)}var Txe=["*"],Sxe=new Ee("MAT_ICON_DEFAULT_OPTIONS"),Cxe=new Ee("mat-icon-location",{providedIn:"root",factory:()=>{let n=H(Wt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),HX=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Axe=HX.map(n=>`[${n}]`).join(", "),Mxe=/^url\(['"]?#(.*?)['"]?\)$/,cc=(()=>{class n{_elementRef=H(nn);_iconRegistry=H(zX);_location=H(Cxe);_errorHandler=H(Es);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Pn.EMPTY;constructor(){let t=H(new Bp("aria-hidden"),{optional:!0}),i=H(Sxe,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(Axe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)HX.forEach(o=>{let a=i[s],c=a.getAttribute(o),l=c?c.match(Mxe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Hi(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Wi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Xc(r.color?"mat-"+r.color:""),ui("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",ki],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:Txe,decls:1,vars:0,template:function(i,r){i&1&&(fr(),Xn(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Fs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var Vs=class n{auth=H(dl);router=H(Vr);user$=lT(this.auth);constructor(){}async loginWithGoogle(){let e=new PO;try{await fW(this.auth,e),this.router.navigate(["/dashboard"])}catch(t){console.error("Login failed",t)}}async logout(){await pW(this.auth),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function Dxe(n,e){if(n&1){let t=Er();se(0,"button",15),Nn("click",function(){ri(t);let r=Gn();return si(r.authService.loginWithGoogle())}),Sn(1,"div",16),se(2,"div",17)(3,"div",18),Io(),se(4,"svg",19),Sn(5,"path",20)(6,"path",21)(7,"path",22)(8,"path",23)(9,"path",24),ae()(),Vc(),se(10,"span",25),Q(11,"Sign in with Google"),ae(),se(12,"span",26),Q(13,"Sign in with Google"),ae()()()}}function Rxe(n,e){n&1&&(se(0,"p",27),Q(1,"Join thousands of users optimizing their lifestyle today."),ae())}function Pxe(n,e){n&1&&(se(0,"p",27),Q(1,"Sign in to access your personalized dashboard."),ae())}var uC=class n{authService=H(Vs);router=H(Vr);isStandalone=!1;ngOnInit(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||!C0.production&&!C0.test,this.isStandalone&&this.authService.user$.subscribe(e=>{e&&this.router.navigate(["/dashboard"])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-home"]],decls:39,vars:3,consts:[[1,"home-container"],[1,"hero-section"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"cta-container"],["class","gsi-material-button",3,"click",4,"ngIf"],["class","hero-note",4,"ngIf"],[1,"value-prop-section"],[1,"features-grid"],[1,"feature-item"],[1,"icon-wrapper"],["color","primary"],["color","accent"],["color","warn"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"],[1,"hero-note"]],template:function(t,i){t&1&&(se(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),Q(4,"Lifestyle Adapter"),ae(),se(5,"p",4),Q(6," Your personal growth companion for a better lifestyle. "),ae(),se(7,"div",5),Fr(8,Dxe,14,0,"button",6),ae(),Fr(9,Rxe,2,0,"p",7)(10,Pxe,2,0,"p",7),ae()(),se(11,"div",8)(12,"h2"),Q(13,"Why Lifestyle Adapter?"),ae(),se(14,"div",9)(15,"div",10)(16,"div",11)(17,"mat-icon",12),Q(18,"insights"),ae()(),se(19,"h3"),Q(20,"Data-Driven Growth"),ae(),se(21,"p"),Q(22,"Stop guessing. Use real data to understand what works for you and what doesn't."),ae()(),se(23,"div",10)(24,"div",11)(25,"mat-icon",13),Q(26,"schedule"),ae()(),se(27,"h3"),Q(28,"Habit Formation"),ae(),se(29,"p"),Q(30,"Build streaks and track consistency to turn positive actions into automatic behaviors."),ae()(),se(31,"div",10)(32,"div",11)(33,"mat-icon",14),Q(34,"trending_up"),ae()(),se(35,"h3"),Q(36,"Measurable Progress"),ae(),se(37,"p"),Q(38,"Watch your LA Score rise as you improve your sleep, activity, and focus."),ae()()()()()),t&2&&(Ot(8),Bn("ngIf",i.isStandalone),Ot(),Bn("ngIf",!i.isStandalone),Ot(),Bn("ngIf",i.isStandalone))},dependencies:[Os,sa,No,Oo,Fs,cc],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a237e,#283593);color:#fff;padding:100px 20px;text-align:center;display:flex;justify-content:center;align-items:center;min-height:400px}.hero-content[_ngcontent-%COMP%]{max-width:800px;width:100%}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:24px;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300;margin-bottom:48px;opacity:.9;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto}.cta-container[_ngcontent-%COMP%]{margin-bottom:24px;display:flex;flex-direction:column;align-items:center;gap:16px;width:100%}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}.hero-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7;margin-top:16px}.value-prop-section[_ngcontent-%COMP%]{padding:80px 20px;background-color:#f5f5f5;text-align:center}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:60px}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:40px;max-width:1200px;margin:0 auto}.feature-item[_ngcontent-%COMP%]{background:#fff;padding:40px 30px;border-radius:16px;box-shadow:0 4px 20px #0000000d;transition:transform .3s ease}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.icon-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;width:64px;height:64px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 auto 24px}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:16px;color:#333}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}@media(max-width:768px){.hero-section[_ngcontent-%COMP%]{padding:60px 20px;min-height:auto}.hero-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:16px}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:32px}.value-prop-section[_ngcontent-%COMP%]{padding:60px 20px}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:40px}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:30px}.feature-item[_ngcontent-%COMP%]{padding:30px 20px}}@media(max-width:480px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1rem}.install-button[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]{width:100%}}"]})};var dC=class n{authService=H(Vs);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-container"],[1,"login-card"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"]],template:function(t,i){t&1&&(se(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),Q(4,"Welcome to Lifestyle Adapter"),ae(),se(5,"mat-card-subtitle"),Q(6,"Sign in to continue"),ae()(),se(7,"mat-card-content")(8,"button",2),Nn("click",function(){return i.authService.loginWithGoogle()}),Sn(9,"div",3),se(10,"div",4)(11,"div",5),Io(),se(12,"svg",6),Sn(13,"path",7)(14,"path",8)(15,"path",9)(16,"path",10)(17,"path",11),ae()(),Vc(),se(18,"span",12),Q(19,"Sign in with Google"),ae(),se(20,"span",13),Q(21,"Sign in with Google"),ae()()()()()())},dependencies:[No,Oo,od,vg,aC,LX,oC,Fs],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{padding:30px;text-align:center;max-width:400px;width:100%}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:100%;max-width:400px;min-width:min-content;margin-top:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}@media(max-width:480px){.login-container[_ngcontent-%COMP%]{padding:16px;height:auto;min-height:calc(100vh - 64px)}.login-card[_ngcontent-%COMP%]{padding:20px;box-shadow:none!important;border:1px solid #e0e0e0}}"]})};var hC=class n{authService=H(Vs);ngOnInit(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,i){t&1&&(at(0,"p"),Q(1,"Logging out..."),Et())},encapsulation:2})};function F0(n){return n+.5|0}var ad=(n,e,t)=>Math.max(Math.min(n,t),e);function O0(n){return ad(F0(n*2.55),0,255)}function cd(n){return ad(F0(n*255),0,255)}function kl(n){return ad(F0(n/2.55)/100,0,1)}function jX(n){return ad(F0(n*100),0,100)}var Lo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},L3=[..."0123456789ABCDEF"],kxe=n=>L3[n&15],Nxe=n=>L3[(n&240)>>4]+L3[n&15],fC=n=>(n&240)>>4===(n&15),Oxe=n=>fC(n.r)&&fC(n.g)&&fC(n.b)&&fC(n.a);function Lxe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Lo[n[1]]*17,g:255&Lo[n[2]]*17,b:255&Lo[n[3]]*17,a:e===5?Lo[n[4]]*17:255}:(e===7||e===9)&&(t={r:Lo[n[1]]<<4|Lo[n[2]],g:Lo[n[3]]<<4|Lo[n[4]],b:Lo[n[5]]<<4|Lo[n[6]],a:e===9?Lo[n[7]]<<4|Lo[n[8]]:255})),t}var Fxe=(n,e)=>n<255?e(n):"";function Vxe(n){var e=Oxe(n)?kxe:Nxe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Fxe(n.a,e):void 0}var Uxe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qX(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Bxe(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function zxe(n,e,t){let i=qX(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function Hxe(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function F3(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=Hxe(t,i,r,u,s),c=c*60+.5),[c|0,l||0,a]}function V3(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(cd)}function U3(n,e,t){return V3(qX,n,e,t)}function jxe(n,e,t){return V3(zxe,n,e,t)}function Gxe(n,e,t){return V3(Bxe,n,e,t)}function KX(n){return(n%360+360)%360}function Wxe(n){let e=Uxe.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?O0(+e[5]):cd(+e[5]));let r=KX(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=jxe(r,s,o):e[1]==="hsv"?i=Gxe(r,s,o):i=U3(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function $xe(n,e){var t=F3(n);t[0]=KX(t[0]+e),t=U3(t),n.r=t[0],n.g=t[1],n.b=t[2]}function qxe(n){if(!n)return;let e=F3(n),t=e[0],i=jX(e[1]),r=jX(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${kl(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var GX={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},WX={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Kxe(){let n={},e=Object.keys(WX),t=Object.keys(GX),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,GX[s]);s=parseInt(WX[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var pC;function Xxe(n){pC||(pC=Kxe(),pC.transparent=[0,0,0,0]);let e=pC[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Yxe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Qxe(n){let e=Yxe.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?O0(o):ad(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?O0(i):ad(i,0,255)),r=255&(e[4]?O0(r):ad(r,0,255)),s=255&(e[6]?O0(s):ad(s,0,255)),{r:i,g:r,b:s,a:t}}}function Jxe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${kl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var O3=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Zxe(n,e,t){let i=bg(kl(n.r)),r=bg(kl(n.g)),s=bg(kl(n.b));return{r:cd(O3(i+t*(bg(kl(e.r))-i))),g:cd(O3(r+t*(bg(kl(e.g))-r))),b:cd(O3(s+t*(bg(kl(e.b))-s))),a:n.a+t*(e.a-n.a)}}function mC(n,e,t){if(n){let i=F3(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=U3(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function XX(n,e){return n&&Object.assign(e||{},n)}function $X(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=cd(n[3]))):(e=XX(n,{r:0,g:0,b:0,a:1}),e.a=cd(e.a)),e}function ewe(n){return n.charAt(0)==="r"?Qxe(n):Wxe(n)}var L0=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=$X(e):t==="string"&&(i=Lxe(e)||Xxe(e)||ewe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=XX(this._rgb);return e&&(e.a=kl(e.a)),e}set rgb(e){this._rgb=$X(e)}rgbString(){return this._valid?Jxe(this._rgb):void 0}hexString(){return this._valid?Vxe(this._rgb):void 0}hslString(){return this._valid?qxe(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Zxe(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=cd(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=F0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mC(this._rgb,2,e),this}darken(e){return mC(this._rgb,2,-e),this}saturate(e){return mC(this._rgb,1,e),this}desaturate(e){return mC(this._rgb,1,-e),this}rotate(e){return $xe(this._rgb,e),this}};function uc(){}var oY=(()=>{let n=0;return()=>n++})();function Dn(n){return n==null}function pi(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ri(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function js(n,e){return Ri(n)?n:e}function an(n,e){return typeof n>"u"?e:n}var aY=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function di(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Qn(n,e,t,i){let r,s,o;if(pi(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(xn(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function B0(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function vC(n){if(pi(n))return n.map(vC);if(xn(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=vC(n[t[r]]);return e}return n}function cY(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function twe(n,e,t,i){if(!cY(n))return;let r=e[n],s=t[n];xn(r)&&xn(s)?wg(r,s,i):e[n]=vC(s)}function wg(n,e,t){let i=pi(e)?e:[e],r=i.length;if(!xn(n))return n;t=t||{};let s=t.merger||twe,o;for(let a=0;a<r;++a){if(o=i[a],!xn(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function Ig(n,e){return wg(n,e,{merger:nwe})}function nwe(n,e,t){if(!cY(n))return;let i=e[n],r=t[n];xn(i)&&xn(r)?Ig(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=vC(r))}var YX={"":n=>n,x:n=>n.x,y:n=>n.y};function iwe(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function rwe(n){let e=iwe(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function yf(n,e){return(YX[e]||(YX[e]=rwe(e)))(n)}function EC(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Tg=n=>typeof n<"u",Nl=n=>typeof n=="function",j3=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function lY(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Yi=Math.PI,zs=2*Yi,swe=zs+Yi,bC=Number.POSITIVE_INFINITY,owe=Yi/180,Bs=Yi/2,mf=Yi/4,QX=Yi*2/3,Ol=Math.log10,ba=Math.sign;function Sg(n,e,t){return Math.abs(n-e)<t}function G3(n){let e=Math.round(n);n=Sg(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ol(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function uY(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function awe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Cg(n){return!awe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function dY(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function W3(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ll(n){return n*(Yi/180)}function IC(n){return n*(180/Yi)}function $3(n){if(!Ri(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function hY(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*Yi&&(s+=zs),{angle:s,distance:r}}function xC(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function cwe(n,e){return(n-e+swe)%zs-Yi}function Us(n){return(n%zs+zs)%zs}function q3(n,e,t,i){let r=Us(n),s=Us(e),o=Us(t),a=Us(s-r),c=Us(o-r),l=Us(r-s),u=Us(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Hs(n,e,t){return Math.max(e,Math.min(t,n))}function fY(n){return Hs(n,-32768,32767)}function Fl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function TC(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var ud=(n,e,t,i)=>TC(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),pY=(n,e,t)=>TC(n,t,i=>n[i][e]>=t);function mY(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var gY=["push","pop","shift","splice","unshift"];function _Y(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),gY.forEach(t=>{let i="_onData"+EC(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function K3(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(gY.forEach(s=>{delete n[s]}),delete n._chartjs)}function X3(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var Y3=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Q3(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,Y3.call(window,()=>{i=!1,n.apply(e,t)}))}}function yY(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var SC=n=>n==="start"?"left":n==="end"?"right":"center",Ur=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,vY=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function bY(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:_}=o.getUserBounds();if(p){if(r=Math.min(ud(c,u,d).lo,t?i:ud(e,u,o.getPixelForValue(d)).lo),l){let b=c.slice(0,r+1).reverse().findIndex(g=>!Dn(g[a.axis]));r-=Math.max(0,b)}r=Hs(r,0,i-1)}if(_){let b=Math.max(ud(c,o.axis,h,!0).hi+1,t?0:ud(e,u,o.getPixelForValue(h),!0).hi+1);if(l){let g=c.slice(b-1).findIndex(v=>!Dn(v[a.axis]));b+=Math.max(0,g)}s=Hs(b,r,i)-r}else s=i-r}return{start:r,count:s}}function xY(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var gC=n=>n===0||n===1,JX=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*zs/t)),ZX=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*zs/t)+1,xg={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Bs)+1,easeOutSine:n=>Math.sin(n*Bs),easeInOutSine:n=>-.5*(Math.cos(Yi*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>gC(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>gC(n)?n:JX(n,.075,.3),easeOutElastic:n=>gC(n)?n:ZX(n,.075,.3),easeInOutElastic(n){return gC(n)?n:n<.5?.5*JX(n*2,.1125,.45):.5+.5*ZX(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-xg.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?xg.easeInBounce(n*2)*.5:xg.easeOutBounce(n*2-1)*.5+.5};function J3(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Z3(n){return J3(n)?n:new L0(n)}function B3(n){return J3(n)?n:new L0(n).saturate(.5).darken(.1).hexString()}var lwe=["x","y","borderWidth","radius","tension"],uwe=["color","borderColor","backgroundColor"];function dwe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:uwe},numbers:{type:"number",properties:lwe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function hwe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var eY=new Map;function fwe(n,e){e=e||{};let t=n+JSON.stringify(e),i=eY.get(t);return i||(i=new Intl.NumberFormat(n,e),eY.set(t,i)),i}function CC(n,e,t){return fwe(e,t).format(n)}var wY={values(n){return pi(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=pwe(n,t)}let o=Ol(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),CC(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Ol(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?wY.numeric.call(this,n,e,t):""}};function pwe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var z0={formatters:wY};function mwe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:z0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var hd=Object.create(null),AC=Object.create(null);function V0(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function z3(n,e,t){return typeof e=="string"?wg(V0(n,e),t):wg(V0(n,""),e)}var H3=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>B3(r.backgroundColor),this.hoverBorderColor=(i,r)=>B3(r.borderColor),this.hoverColor=(i,r)=>B3(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return z3(this,e,t)}get(e){return V0(this,e)}describe(e,t){return z3(AC,e,t)}override(e,t){return z3(hd,e,t)}route(e,t,i,r){let s=V0(this,e),o=V0(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return xn(c)?Object.assign({},l,c):an(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},_i=new H3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dwe,hwe,mwe]);function gwe(n){return!n||Dn(n.size)||Dn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function U0(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function EY(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!pi(d))o=U0(n,r,s,o,d);else if(pi(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!pi(h)&&(o=U0(n,r,s,o,h));n.restore();let p=s.length/2;if(p>t.length){for(c=0;c<p;c++)delete r[s[c]];s.splice(0,p)}return o}function fd(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function eU(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function MC(n,e,t,i){tU(n,e,t,i,null)}function tU(n,e,t,i,r){let s,o,a,c,l,u,d,h,p=e.pointStyle,_=e.rotation,b=e.radius,g=(_||0)*owe;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(g),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),p){default:r?n.ellipse(t,i,r/2,b,0,0,zs):n.arc(t,i,b,0,zs),n.closePath();break;case"triangle":u=r?r/2:b,n.moveTo(t+Math.sin(g)*u,i-Math.cos(g)*b),g+=QX,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*b),g+=QX,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*b),n.closePath();break;case"rectRounded":l=b*.516,c=b-l,o=Math.cos(g+mf)*c,d=Math.cos(g+mf)*(r?r/2-l:c),a=Math.sin(g+mf)*c,h=Math.sin(g+mf)*(r?r/2-l:c),n.arc(t-d,i-a,l,g-Yi,g-Bs),n.arc(t+h,i-o,l,g-Bs,g),n.arc(t+d,i+a,l,g,g+Bs),n.arc(t-h,i+o,l,g+Bs,g+Yi),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*b,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}g+=mf;case"rectRot":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":g+=mf;case"cross":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),g+=mf,d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(g)*b,a=Math.sin(g)*b,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*(r?r/2:b),i+Math.sin(g)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function lc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function H0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function j0(n){n.restore()}function IY(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function TY(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function _we(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Dn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function ywe(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function vwe(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function pd(n,e,t,i,r,s={}){let o=pi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,_we(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&vwe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Dn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),ywe(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function Ag(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Yi,Yi,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Yi,Bs,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Bs,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Bs,!0),n.lineTo(t+o.topLeft,i)}var bwe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xwe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wwe(n,e){let t=(""+n).match(bwe);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Ewe=n=>+n||0;function nU(n,e){let t={},i=xn(e),r=i?Object.keys(e):e,s=xn(n)?i?o=>an(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=Ewe(s(o));return t}function iU(n){return nU(n,{top:"y",right:"x",bottom:"y",left:"x"})}function md(n){return nU(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Br(n){let e=iU(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lr(n,e){n=n||{},e=e||_i.font;let t=an(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=an(n.style,e.style);i&&!(""+i).match(xwe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:an(n.family,e.family),lineHeight:wwe(an(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:an(n.weight,e.weight),string:""};return r.string=gwe(r),r}function G0(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&pi(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function SY(n,e,t){let{min:i,max:r}=n,s=aY(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Vl(n,e){return Object.assign(Object.create(n),e)}function DC(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=MY("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>DC([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return CY(a,c,()=>Rwe(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return nY(a).includes(c)},ownKeys(a){return nY(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function _f(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:rU(n,i),setContext:s=>_f(n,s,t,i),override:s=>_f(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return CY(s,o,()=>Twe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function rU(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Nl(t)?t:()=>t,isIndexable:Nl(i)?i:()=>i}}var Iwe=(n,e)=>n?n+EC(e):e,sU=(n,e)=>xn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function CY(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function Twe(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Nl(a)&&o.isScriptable(e)&&(a=Swe(e,a,n,t)),pi(a)&&a.length&&(a=Cwe(e,a,n,o.isIndexable)),sU(e,a)&&(a=_f(a,r,s&&s[e],o)),a}function Swe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),sU(n,c)&&(c=oU(r._scopes,r,n,c)),c}function Cwe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(xn(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=oU(l,r,n,u);e.push(_f(d,s,o&&o[n],a))}}return e}function AY(n,e,t){return Nl(n)?n(e,t):n}var Awe=(n,e)=>n===!0?e:typeof n=="string"?yf(e,n):void 0;function Mwe(n,e,t,i,r){for(let s of e){let o=Awe(t,s);if(o){n.add(o);let a=AY(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function oU(n,e,t,i){let r=e._rootScopes,s=AY(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=tY(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=tY(a,o,s,c,i),c===null)?!1:DC(Array.from(a),[""],r,s,()=>Dwe(e,t,i))}function tY(n,e,t,i,r){for(;t;)t=Mwe(n,e,t,i,r);return t}function Dwe(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return pi(r)&&xn(t)?t:r||{}}function Rwe(n,e,t,i){let r;for(let s of e)if(r=MY(Iwe(s,n),t),typeof r<"u")return sU(n,r)?oU(t,i,n,r):r}function MY(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function nY(n){let e=n._keys;return e||(e=n._keys=Pwe(n._scopes)),e}function Pwe(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}var kwe=Number.EPSILON||1e-14,Eg=(n,e)=>e<n.length&&!n[e].skip&&n[e],DY=n=>n==="x"?"y":"x";function Nwe(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=xC(s,r),c=xC(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=i*l,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Owe(n,e,t){let i=n.length,r,s,o,a,c,l=Eg(n,0);for(let u=0;u<i-1;++u)if(c=l,l=Eg(n,u+1),!(!c||!l)){if(Sg(e[u],0,kwe)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function Lwe(n,e,t="x"){let i=DY(t),r=n.length,s,o,a,c=Eg(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Eg(n,l+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[l])}}function Fwe(n,e="x"){let t=DY(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=Eg(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Eg(n,o+1),!!c){if(l){let u=l[e]-c[e];r[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?ba(r[o-1])!==ba(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Owe(n,r,s),Lwe(n,s,e)}function _C(n,e,t){return Math.max(Math.min(n,t),e)}function Vwe(n,e){let t,i,r,s,o,a=lc(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&lc(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=_C(r.cp1x,e.left,e.right),r.cp1y=_C(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=_C(r.cp2x,e.left,e.right),r.cp2y=_C(r.cp2y,e.top,e.bottom)))}function RY(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Fwe(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=Nwe(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&Vwe(n,t)}function RC(){return typeof window<"u"&&typeof document<"u"}function PC(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wC(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var kC=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Uwe(n,e){return kC(n).getPropertyValue(e)}var Bwe=["top","right","bottom","left"];function gf(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=Bwe[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var zwe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Hwe(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(zwe(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function gd(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=kC(t),s=r.boxSizing==="border-box",o=gf(r,"padding"),a=gf(r,"border","width"),{x:c,y:l,box:u}=Hwe(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:p,height:_}=e;return s&&(p-=o.width+a.width,_-=o.height+a.height),{x:Math.round((c-d)/p*t.width/i),y:Math.round((l-h)/_*t.height/i)}}function jwe(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&PC(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=kC(s),c=gf(a,"border","width"),l=gf(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=wC(a.maxWidth,s,"clientWidth"),r=wC(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||bC,maxHeight:r||bC}}var dd=n=>Math.round(n*10)/10;function PY(n,e,t,i){let r=kC(n),s=gf(r,"margin"),o=wC(r.maxWidth,n,"clientWidth")||bC,a=wC(r.maxHeight,n,"clientHeight")||bC,c=jwe(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let h=gf(r,"border","width"),p=gf(r,"padding");l-=p.width+h.width,u-=p.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=dd(Math.min(l,o,c.maxWidth)),u=dd(Math.min(u,a,c.maxHeight)),l&&!u&&(u=dd(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=dd(Math.floor(u*i))),{width:l,height:u}}function aU(n,e,t){let i=e||1,r=dd(n.height*i),s=dd(n.width*i);n.height=dd(n.height),n.width=dd(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var kY=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};RC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function cU(n,e){let t=Uwe(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ld(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function NY(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function OY(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=ld(n,r,t),a=ld(r,s,t),c=ld(s,e,t),l=ld(o,a,t),u=ld(a,c,t);return ld(l,u,t)}var Gwe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Wwe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function vf(n,e,t){return n?Gwe(e,t):Wwe()}function lU(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function uU(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function LY(n){return n==="angle"?{between:q3,compare:cwe,normalize:Us}:{between:Fl,compare:(e,t)=>e-t,normalize:e=>e}}function iY({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function $we(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=LY(i),c=e.length,{start:l,end:u,loop:d}=n,h,p;if(d){for(l+=c,u+=c,h=0,p=c;h<p&&o(a(e[l%c][i]),r,s);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:n.style}}function dU(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=LY(i),{start:u,end:d,loop:h,style:p}=$we(n,e,t),_=[],b=!1,g=null,v,P,R,N=()=>c(r,R,v)&&a(r,R)!==0,U=()=>a(s,v)===0||c(s,R,v),O=()=>b||N(),I=()=>!b||U();for(let w=u,y=u;w<=d;++w)P=e[w%o],!P.skip&&(v=l(P[i]),v!==R&&(b=c(v,r,s),g===null&&O()&&(g=a(v,r)===0?w:y),g!==null&&I()&&(_.push(iY({start:g,end:w,loop:h,count:o,style:p})),g=null),y=w,R=v));return g!==null&&_.push(iY({start:g,end:d,loop:h,count:o,style:p})),_}function hU(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=dU(i[r],n.points,e);s.length&&t.push(...s)}return t}function qwe(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Kwe(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function FY(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=qwe(t,r,s,i);if(i===!0)return rY(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return rY(n,Kwe(t,o,c,l),t,e)}function rY(n,e,t,i){return!i||!i.setContext||!t?e:Xwe(n,e,t,i)}function Xwe(n,e,t,i){let r=n._chart.getContext(),s=sY(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,d=e[0].start,h=d;function p(_,b,g,v){let P=a?-1:1;if(_!==b){for(_+=c;t[_%c].skip;)_-=P;for(;t[b%c].skip;)b+=P;_%c!==b%c&&(l.push({start:_%c,end:b%c,loop:g,style:v}),u=v,d=b%c)}}for(let _ of e){d=a?d:_.start;let b=t[d%c],g;for(h=d+1;h<=_.end;h++){let v=t[h%c];g=sY(i.setContext(Vl(r,{type:"segment",p0:b,p1:v,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),Ywe(g,u)&&p(d,h-1,_.loop,u),b=v,u=g}d<h-1&&p(d,h-1,_.loop,u)}return l}function sY(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Ywe(n,e){if(!e)return!1;let t=[],i=function(r,s){return J3(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function yC(n,e,t){return n.options.clip?n[t]:e[t]}function Qwe(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:yC(t,e,"left"),right:yC(t,e,"right"),top:yC(i,e,"top"),bottom:yC(i,e,"bottom")}:e}function fU(n,e){let t=e._clip;if(t.disabled)return!1;let i=Qwe(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var TU=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Y3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Ul=new TU,VY="transparent",Jwe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=Z3(n||VY),r=i.valid&&Z3(e||VY);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},SU=class{constructor(e,t,i,r){let s=t[i];r=G0([e.to,r,s,e.from]);let o=G0([e.from,s,r]);this._active=!0,this._fn=e.fn||Jwe[e.type||typeof o],this._easing=xg[e.easing]||xg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=G0([e.to,t,r,e.from]),this._from=G0([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},zC=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xn(e))return;let t=Object.keys(_i.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!xn(s))return;let o={};for(let a of t)o[a]=s[a];(pi(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=eEe(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&Zwe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],h=i.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new SU(h,e,l,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Ul.add(this._chart,i),!0}};function Zwe(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function eEe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function UY(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function tEe(n,e,t){if(t===!1)return!1;let i=UY(n,t),r=UY(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function nEe(n){let e,t,i,r;return xn(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function UQ(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function BY(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(u=!0,i.all)continue;break}l=n.values[c],Ri(l)&&(s||e===0||ba(e)===ba(l))&&(e+=l)}return!u&&!i.all?0:e}function iEe(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[r]:u,[s]:n[u]};return a}function pU(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function rEe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function sEe(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function oEe(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function zY(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function HY(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=rEe(s,o,i),d=e.length,h;for(let p=0;p<d;++p){let _=e[p],{[c]:b,[l]:g}=_,v=_._stacks||(_._stacks={});h=v[l]=oEe(r,u,b),h[a]=g,h._top=zY(h,o,!0,i.type),h._bottom=zY(h,o,!1,i.type);let P=h._visualValues||(h._visualValues={});P[a]=g}}function mU(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function aEe(n,e){return Vl(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cEe(n,e,t){return Vl(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function W0(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var gU=n=>n==="reset"||n==="none",jY=(n,e)=>e?n:Object.assign({},n),lEe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:UQ(t,!0),values:null},VU=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pU(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&W0(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,p,_,b)=>h==="x"?p:h==="r"?b:_,o=i.xAxisID=an(r.xAxisID,mU(t,"x")),a=i.yAxisID=an(r.yAxisID,mU(t,"y")),c=i.rAxisID=an(r.rAxisID,mU(t,"r")),l=i.indexAxis,u=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&K3(this._data,this),t._stacked&&W0(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(xn(i)){let s=this._cachedMeta;this._data=iEe(i,s)}else if(r!==i){if(r){K3(r,this);let s=this._cachedMeta;W0(s),s._parsed=[]}i&&Object.isExtensible(i)&&_Y(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=pU(i.vScale,i),i.stack!==r.stack&&(s=!0,W0(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&(HY(this,i._parsed),i._stacked=pU(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{pi(s[t])?p=this.parseArrayData(r,s,t,i):xn(s[t])?p=this.parseObjectData(r,s,t,i):p=this.parsePrimitiveData(r,s,t,i);let _=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<i;++d)r._parsed[d+t]=h=p[d],l&&(_()&&(l=!1),u=h);r._sorted=l}a&&HY(this,p)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),p,_,b;for(p=0,_=s;p<_;++p)b=p+r,h[p]={[c]:d||o.parse(u[b],b),[l]:a.parse(i[b],b)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+r,h=i[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,p,_;for(d=0,h=s;d<h;++d)p=d+r,_=i[p],u[d]={x:o.parse(yf(_,c),p),y:a.parse(yf(_,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:UQ(s,!0),values:i._stacks[t.axis]._visualValues};return BY(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=BY(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=lEe(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=sEe(c),p,_;function b(){_=s[p];let g=_[c.axis];return!Ri(_[t.axis])||d>g||h<g}for(p=0;p<a&&!(!b()&&(this.updateRangeFromParsed(u,t,_,l),o));++p);if(o){for(p=a-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(u,t,_,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Ri(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=nEe(an(this.options.clip,tEe(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=cEe(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=aEe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&Tg(r);if(c)return jY(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),_=Object.keys(_i.elements[t]),b=()=>this.getContext(r,s,i),g=u.resolveNamedOptions(p,_,b,h);return g.$shared&&(g.$shared=l,o[a]=Object.freeze(jY(g,l))),g}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),p=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(p,this.getContext(t,r,i))}let u=new zC(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||gU(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){gU(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!gU(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&W0(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function uEe(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=X3(i.sort((r,s)=>r-s))}return n._cache.$bar}function dEe(n){let e=n.iScale,t=uEe(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(Tg(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function hEe(n,e,t,i){let r=t.barThickness,s,o;return Dn(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function fEe(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function pEe(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function BQ(n,e,t,i){return pi(n)?pEe(n,e,t,i):e[t.axis]=t.parse(n,i),e}function GY(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,u,d,h;for(l=t,u=t+i;l<u;++l)h=e[l],d={},d[r.axis]=a||r.parse(o[l],l),c.push(BQ(h,d,s,l));return c}function _U(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function mEe(n,e,t){return n!==0?ba(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function gEe(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function _Ee(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=gEe(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=u:(s[WY(u,o,a,c)]=!0,r=l)),s[WY(r,o,a,c)]=!0,n.borderSkipped=s}function WY(n,e,t,i){return i?(n=yEe(n,e,t),n=$Y(n,t,e)):n=$Y(n,e,t),n}function yEe(n,e,t){return n===e?t:n===t?e:n}function $Y(n,e,t){return n==="start"?e:n==="end"?t:n}function vEe(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var zQ=(()=>{class n extends VU{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return GY(t,i,r,s)}parseArrayData(t,i,r,s){return GY(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],p,_,b,g;for(p=r,_=r+s;p<_;++p)g=i[p],b={},b[o.axis]=o.parse(yf(g,u),p),h.push(BQ(yf(g,d),b,a,p));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=_U(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let _=i;_<i+r;_++){let b=this.getParsed(_),g=o||Dn(b[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(_),v=this._calculateBarIndexPixels(_,d),P=(b._stacks||{})[c.axis],R={horizontal:u,base:g.base,enableBorderRadius:!P||_U(b._custom)||a===P._top||a===P._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};p&&(R.options=h||this.resolveDataElementOptions(_,t[_].active?"active":s));let N=R.options||t[_].options;_Ee(R,N,P,a),vEe(R,N,d.ratio),this.updateElement(t[_],_,R,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],u=d=>{let h=d._parsed.find(_=>_[r.axis]===l),p=h&&h[d.vScale.axis];if(Dn(p)||isNaN(p))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===i).shift()}_getAxis(){let t={},i=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)t[an(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||dEe(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,d=_U(u),h=l[i.axis],p=0,_=r?this.applyStack(i,l,r):h,b,g;_!==h&&(p=_-h,_=h),d&&(h=u.barStart,_=u.barEnd-u.barStart,h!==0&&ba(h)!==ba(u.barEnd)&&(p=0),p+=h);let v=!Dn(o)&&!d?o:p,P=i.getPixelForValue(v);if(this.chart.getDataVisibility(t)?b=i.getPixelForValue(p+_):b=P,g=b-P,Math.abs(g)<a){g=mEe(g,i,c)*a,h===c&&(P-=g/2);let R=i.getPixelForDecimal(0),N=i.getPixelForDecimal(1),U=Math.min(R,N),O=Math.max(R,N);P=Math.max(Math.min(P,O),U),b=P+g,r&&!d&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(b)-i.getValueForPixel(P))}if(P===i.getPixelForValue(c)){let R=ba(g)*i.getLineWidthForValue(c)/2;P+=R,g-=R}return{size:g,base:P,head:b,center:b+g/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=an(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(i.grouped){let d=o?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?fEe(t,i,s,d*u):hEe(t,i,s,d*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(an(p,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+_;c=h.start+h.chunk*b+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})();var HQ=(()=>{class n extends VU{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=bY(i,s,a);this._drawStart=c,this._drawCount=l,xY(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),p=a.axis,_=c.axis,{spanGaps:b,segment:g}=this.options,v=Cg(b)?b:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||o||s==="none",R=i+r,N=t.length,U=i>0&&this.getParsed(i-1);for(let O=0;O<N;++O){let I=t[O],w=P?I:{};if(O<i||O>=R){w.skip=!0;continue}let y=this.getParsed(O),x=Dn(y[_]),S=w[p]=a.getPixelForValue(y[p],O),M=w[_]=o||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,y,l):y[_],O);w.skip=isNaN(S)||isNaN(M)||x,w.stop=O>0&&Math.abs(y[p]-U[p])>v,g&&(w.parsed=y,w.raw=u.data[O]),h&&(w.options=d||this.resolveDataElementOptions(O,I.active?"active":s)),P||this.updateElement(I,O,w,s),U=y}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function bf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var CU=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return bf()}parse(){return bf()}format(){return bf()}add(){return bf()}diff(){return bf()}startOf(){return bf()}endOf(){return bf()}},bEe={_date:CU};function xEe(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?pY:ud;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){let h=l(s,e,t-d),p=l(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(b=>!Dn(b[d.axis]));u.lo-=Math.max(0,p);let _=h.slice(u.hi).findIndex(b=>!Dn(b[d.axis]));u.hi+=Math.max(0,_)}return u}}return{lo:0,hi:s.length-1}}function eb(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=xEe(s[a],e,o,r);for(let p=d;p<=h;++p){let _=u[p];_.skip||i(_,l,p)}}}function wEe(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function yU(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||eb(n,t,e,function(a,c,l){!r&&!lc(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function EEe(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=hY(o,{x:e.x,y:e.y});q3(d,l,u)&&r.push({element:o,datasetIndex:a,index:c})}return eb(n,t,e,s),r}function IEe(n,e,t,i,r,s){let o=[],a=wEe(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let p=u.inRange(e.x,e.y,r);if(i&&!p)return;let _=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(_))&&!p)return;let g=a(e,_);g<c?(o=[{element:u,datasetIndex:d,index:h}],c=g):g===c&&o.push({element:u,datasetIndex:d,index:h})}return eb(n,t,e,l),o}function vU(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?EEe(n,e,t,r):IEe(n,e,t,i,r,s)}function qY(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return eb(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var TEe={evaluateInteractionItems:eb,modes:{index(n,e,t,i){let r=gd(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?yU(n,r,s,i,o):vU(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=gd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?yU(n,r,s,i,o):vU(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=gd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return yU(n,r,s,i,o)},nearest(n,e,t,i){let r=gd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return vU(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=gd(e,n);return qY(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=gd(e,n);return qY(n,r,"y",t.intersect,i)}}},jQ=["left","top","right","bottom"];function $0(n,e){return n.filter(t=>t.pos===e)}function KY(n,e){return n.filter(t=>jQ.indexOf(t.pos)===-1&&t.box.axis===e)}function q0(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function SEe(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function CEe(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!jQ.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function AEe(n,e){let t=CEe(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function MEe(n){let e=SEe(n),t=q0(e.filter(l=>l.box.fullSize),!0),i=q0($0(e,"left"),!0),r=q0($0(e,"right")),s=q0($0(e,"top"),!0),o=q0($0(e,"bottom")),a=KY(e,"x"),c=KY(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:$0(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function XY(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function GQ(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function DEe(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!xn(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&GQ(o,s.getPadding());let a=Math.max(0,e.outerWidth-XY(o,n,"left","right")),c=Math.max(0,e.outerHeight-XY(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function REe(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function PEe(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Y0(n,e,t,i){let r=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,PEe(a.horizontal,e));let{same:d,other:h}=DEe(e,t,a,i);l|=d&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&Y0(r,e,t,i)||u}function NC(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function YY(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;Tg(l.start)&&(o=l.start),c.fullSize?NC(c,r.left,o,t.outerWidth-r.right-r.left,h):NC(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;Tg(l.start)&&(s=l.start),c.fullSize?NC(c,s,r.top,h,t.outerHeight-r.bottom-r.top):NC(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Fo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=Br(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=MEe(n.boxes),c=a.vertical,l=a.horizontal;Qn(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let u=c.reduce((b,g)=>g.box.options&&g.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);GQ(h,Br(i));let p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),_=AEe(c.concat(l),d);Y0(a.fullSize,p,d,_),Y0(c,p,d,_),Y0(l,p,d,_)&&Y0(c,p,d,_),REe(p),YY(a.leftAndTop,p,d,_),p.x+=p.w,p.y+=p.h,YY(a.rightAndBottom,p,d,_),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Qn(a.chartArea,b=>{let g=b.box;Object.assign(g,n.chartArea),g.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},HC=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},AU=class extends HC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},UC="$chartjs",kEe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},QY=n=>n===null||n==="";function NEe(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[UC]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",QY(r)){let s=cU(n,"width");s!==void 0&&(n.width=s)}if(QY(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=cU(n,"height");s!==void 0&&(n.height=s)}return n}var WQ=kY?{passive:!0}:!1;function OEe(n,e,t){n&&n.addEventListener(e,t,WQ)}function LEe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,WQ)}function FEe(n,e){let t=kEe[n.type]||n.type,{x:i,y:r}=gd(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function jC(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function VEe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||jC(a.addedNodes,i),o=o&&!jC(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function UEe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||jC(a.removedNodes,i),o=o&&!jC(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var J0=new Map,JY=0;function $Q(){let n=window.devicePixelRatio;n!==JY&&(JY=n,J0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function BEe(n,e){J0.size||window.addEventListener("resize",$Q),J0.set(n,e)}function zEe(n){J0.delete(n),J0.size||window.removeEventListener("resize",$Q)}function HEe(n,e,t){let i=n.canvas,r=i&&PC(i);if(!r)return;let s=Q3((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(r),BEe(n,s),o}function bU(n,e,t){t&&t.disconnect(),e==="resize"&&zEe(n)}function jEe(n,e,t){let i=n.canvas,r=Q3(s=>{n.ctx!==null&&t(FEe(s,n))},n);return OEe(i,e,r),r}var MU=class extends HC{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(NEe(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[UC])return!1;let i=t[UC].initial;["height","width"].forEach(s=>{let o=i[s];Dn(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[UC],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:VEe,detach:UEe,resize:HEe}[t]||jEe;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:bU,detach:bU,resize:bU}[t]||LEe)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return PY(e,t,i,r)}isAttached(e){let t=e&&PC(e);return!!(t&&t.isConnected)}};function GEe(n){return!RC()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?AU:MU}var fc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Cg(this.x)&&Cg(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function WEe(n,e){let t=n.options.ticks,i=$Ee(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?KEe(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return XEe(e,l,s,o/r),l;let u=qEe(s,e,r);if(o>0){let d,h,p=o>1?Math.round((c-a)/(o-1)):null;for(OC(e,l,u,Dn(p)?0:a-p,a),d=0,h=o-1;d<h;d++)OC(e,l,u,s[d],s[d+1]);return OC(e,l,u,c,Dn(p)?e.length:c+p),l}return OC(e,l,u),l}function $Ee(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function qEe(n,e,t){let i=YEe(n),r=e.length/t;if(!i)return Math.max(r,1);let s=uY(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function KEe(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function XEe(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function OC(n,e,t,i,r){let s=an(i,0),o=Math.min(an(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function YEe(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var QEe=n=>n==="left"?"right":n==="right"?"left":n,ZY=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,eQ=(n,e)=>Math.min(e||n,n);function tQ(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function JEe(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function ZEe(n,e){Qn(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function K0(n){return n.drawTicks?n.tickLength:0}function nQ(n,e){if(!n.display)return 0;let t=lr(n.font,e),i=Br(n.padding);return(pi(n.text)?n.text.length:1)*t.lineHeight+i.height}function eIe(n,e){return Vl(n,{scale:e,type:"scale"})}function tIe(n,e,t){return Vl(n,{tick:t,index:e,type:"tick"})}function nIe(n,e,t){let i=SC(n);return(t&&e!=="right"||!t&&e==="right")&&(i=QEe(i)),i}function iIe(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,h,p,_,b=o-r,g=a-s;if(n.isHorizontal()){if(p=Ur(i,s,a),xn(t)){let v=Object.keys(t)[0],P=t[v];_=u[v].getPixelForValue(P)+b-e}else t==="center"?_=(l.bottom+l.top)/2+b-e:_=ZY(n,t,e);h=a-s}else{if(xn(t)){let v=Object.keys(t)[0],P=t[v];p=u[v].getPixelForValue(P)-g+e}else t==="center"?p=(l.left+l.right)/2-g+e:p=ZY(n,t,e);_=Ur(i,o,r),d=t==="left"?-Bs:Bs}return{titleX:p,titleY:_,maxWidth:h,rotation:d}}var wf=class n extends fc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=js(e,Number.POSITIVE_INFINITY),t=js(t,Number.NEGATIVE_INFINITY),i=js(i,Number.POSITIVE_INFINITY),r=js(r,Number.NEGATIVE_INFINITY),{min:js(e,i),max:js(t,r),minDefined:Ri(e),maxDefined:Ri(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:js(t,js(i,t)),max:js(i,js(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){di(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=SY(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?tQ(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=WEe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){di(this.options.afterUpdate,[this])}beforeSetDimensions(){di(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){di(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),di(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){di(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=di(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){di(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){di(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=eQ(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Hs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(e.offset?.5:1)),c=this.maxHeight-K0(e.grid)-t.padding-nQ(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=IC(Math.min(Math.asin(Hs((u.highest.height+6)/a,-1,1)),Math.asin(Hs(c/l,-1,1))-Math.asin(Hs(h/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){di(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){di(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=nQ(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=K0(s)+c):(e.height=this.maxHeight,e.width=K0(s)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,_=Ll(this.labelRotation),b=Math.cos(_),g=Math.sin(_);if(a){let v=i.mirror?0:g*d.width+b*h.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{let v=i.mirror?0:b*d.width+g*h.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(l,u,g,b)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;c?l?(h=r*e.width,p=i*t.height):(h=i*e.height,p=r*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){di(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Dn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=tQ(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/eQ(t,i)),l=0,u=0,d,h,p,_,b,g,v,P,R,N,U;for(d=0;d<t;d+=c){if(_=e[d].label,b=this._resolveTickFontOptions(d),r.font=g=b.string,v=s[g]=s[g]||{data:{},gc:[]},P=b.lineHeight,R=N=0,!Dn(_)&&!pi(_))R=U0(r,v.data,v.gc,R,_),N=P;else if(pi(_))for(h=0,p=_.length;h<p;++h)U=_[h],!Dn(U)&&!pi(U)&&(R=U0(r,v.data,v.gc,R,U),N+=P);o.push(R),a.push(N),l=Math.max(R,l),u=Math.max(N,u)}ZEe(s,t);let O=o.indexOf(l),I=a.indexOf(u),w=y=>({width:o[y]||0,height:a[y]||0});return{first:w(0),last:w(t-1),widest:w(O),highest:w(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return fY(this._alignToPixels?fd(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=tIe(this.getContext(),e,i))}return this.$context||(this.$context=eIe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Ll(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=K0(s),p=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,g=b/2,v=function(le){return fd(i,le,b)},P,R,N,U,O,I,w,y,x,S,M,C;if(o==="top")P=v(this.bottom),I=this.bottom-h,y=P-g,S=v(e.top)+g,C=e.bottom;else if(o==="bottom")P=v(this.top),S=e.top,C=v(e.bottom)-g,I=P+g,y=this.top+h;else if(o==="left")P=v(this.right),O=this.right-h,w=P-g,x=v(e.left)+g,M=e.right;else if(o==="right")P=v(this.left),x=e.left,M=v(e.right)-g,O=P+g,w=this.left+h;else if(t==="x"){if(o==="center")P=v((e.top+e.bottom)/2+.5);else if(xn(o)){let le=Object.keys(o)[0],fe=o[le];P=v(this.chart.scales[le].getPixelForValue(fe))}S=e.top,C=e.bottom,I=P+g,y=I+h}else if(t==="y"){if(o==="center")P=v((e.left+e.right)/2);else if(xn(o)){let le=Object.keys(o)[0],fe=o[le];P=v(this.chart.scales[le].getPixelForValue(fe))}O=P-g,w=O-h,x=e.left,M=e.right}let re=an(r.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/re));for(R=0;R<d;R+=Y){let le=this.getContext(R),fe=s.setContext(le),oe=a.setContext(le),we=fe.lineWidth,Ae=fe.color,Qe=oe.dash||[],ut=oe.dashOffset,rt=fe.tickWidth,Vt=fe.tickColor,Ht=fe.tickBorderDash||[],ue=fe.tickBorderDashOffset;N=JEe(this,R,c),N!==void 0&&(U=fd(i,N,we),l?O=w=x=M=U:I=y=S=C=U,p.push({tx1:O,ty1:I,tx2:w,ty2:y,x1:x,y1:S,x2:M,y2:C,width:we,color:Ae,borderDash:Qe,borderDashOffset:ut,tickWidth:rt,tickColor:Vt,tickBorderDash:Ht,tickBorderDashOffset:ue}))}return this._ticksLength=d,this._borderValue=P,p}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=K0(i.grid),p=h+u,_=d?-u:p,b=-Ll(this.labelRotation),g=[],v,P,R,N,U,O,I,w,y,x,S,M,C="middle";if(r==="top")O=this.bottom-_,I=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+_,I=this._getXAxisLabelAlignment();else if(r==="left"){let Y=this._getYAxisLabelAlignment(h);I=Y.textAlign,U=Y.x}else if(r==="right"){let Y=this._getYAxisLabelAlignment(h);I=Y.textAlign,U=Y.x}else if(t==="x"){if(r==="center")O=(e.top+e.bottom)/2+p;else if(xn(r)){let Y=Object.keys(r)[0],le=r[Y];O=this.chart.scales[Y].getPixelForValue(le)+p}I=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")U=(e.left+e.right)/2-p;else if(xn(r)){let Y=Object.keys(r)[0],le=r[Y];U=this.chart.scales[Y].getPixelForValue(le)}I=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?C="top":c==="end"&&(C="bottom"));let re=this._getLabelSizes();for(v=0,P=a.length;v<P;++v){R=a[v],N=R.label;let Y=s.setContext(this.getContext(v));w=this.getPixelForTick(v)+s.labelOffset,y=this._resolveTickFontOptions(v),x=y.lineHeight,S=pi(N)?N.length:1;let le=S/2,fe=Y.color,oe=Y.textStrokeColor,we=Y.textStrokeWidth,Ae=I;o?(U=w,I==="inner"&&(v===P-1?Ae=this.options.reverse?"left":"right":v===0?Ae=this.options.reverse?"right":"left":Ae="center"),r==="top"?l==="near"||b!==0?M=-S*x+x/2:l==="center"?M=-re.highest.height/2-le*x+x:M=-re.highest.height+x/2:l==="near"||b!==0?M=x/2:l==="center"?M=re.highest.height/2-le*x:M=re.highest.height-S*x,d&&(M*=-1),b!==0&&!Y.showLabelBackdrop&&(U+=x/2*Math.sin(b))):(O=w,M=(1-S)*x/2);let Qe;if(Y.showLabelBackdrop){let ut=Br(Y.backdropPadding),rt=re.heights[v],Vt=re.widths[v],Ht=M-ut.top,ue=0-ut.left;switch(C){case"middle":Ht-=rt/2;break;case"bottom":Ht-=rt;break}switch(I){case"center":ue-=Vt/2;break;case"right":ue-=Vt;break;case"inner":v===P-1?ue-=Vt:v>0&&(ue-=Vt/2);break}Qe={left:ue,top:Ht,width:Vt+ut.width,height:rt+ut.height,color:Y.backdropColor}}g.push({label:N,font:y,textOffset:M,options:{rotation:b,color:fe,strokeColor:oe,strokeWidth:we,textAlign:Ae,textBaseline:C,translation:[U,O],backdrop:Qe}})}return g}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Ll(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?r?(u=this.right+s,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=fd(e,this.left,o)-o/2,u=fd(e,this.right,a)+a/2,d=h=c):(d=fd(e,this.top,o)-o/2,h=fd(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&H0(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;pd(i,l,0,u,c,a)}r&&j0(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=lr(i.font),o=Br(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||xn(t)?(c+=o.bottom,pi(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=iIe(this,c,t,a);pd(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:nIe(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=an(e.grid&&e.grid.z,-1),r=an(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return lr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Mg=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;oIe(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,rIe(e,o,i),this.override&&_i.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in _i[r]&&(delete _i[r][i],this.override&&delete hd[i])}};function rIe(n,e,t){let i=wg(Object.create(null),[t?_i.get(t):{},_i.get(e),n.defaults]);_i.set(e,i),n.defaultRoutes&&sIe(e,n.defaultRoutes),n.descriptors&&_i.describe(e,n.descriptors)}function sIe(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");_i.route(s,r,c,a)})}function oIe(n){return"id"in n&&"defaults"in n}var DU=class{constructor(){this.controllers=new Mg(VU,"datasets",!0),this.elements=new Mg(fc,"elements"),this.plugins=new Mg(Object,"plugins"),this.scales=new Mg(wf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Qn(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=EC(e);di(i["before"+r],[],i),t[e](i),di(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},hc=new DU,RU=class{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(di(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Dn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=an(i.options&&i.options.plugins,{}),s=aIe(i);return r===!1&&!t?[]:lIe(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function aIe(n){let e={},t=[],i=Object.keys(hc.plugins.items);for(let s=0;s<i.length;s++)t.push(hc.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function cIe(n,e){return!e&&n===!1?null:n===!0?{}:n}function lIe(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=cIe(i[c],r);l!==null&&s.push({plugin:a,options:uIe(n.config,{plugin:a,local:t[c]},l,o)})}return s}function uIe(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function PU(n,e){let t=_i.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function dIe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function hIe(n,e){return n===e?"_index_":"_value_"}function iQ(n){if(n==="x"||n==="y"||n==="r")return n}function fIe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function kU(n,...e){if(iQ(n))return n;for(let t of e){let i=t.axis||fIe(t.position)||n.length>1&&iQ(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function rQ(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function pIe(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return rQ(n,"x",t[0])||rQ(n,"y",t[0])}return{}}function mIe(n,e){let t=hd[n.type]||{scales:{}},i=e.scales||{},r=PU(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!xn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=kU(o,a,pIe(o,n),_i.scales[a.type]),l=hIe(c,r),u=t.scales||{};s[o]=Ig(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||PU(a,e),u=(hd[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=dIe(d,c),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),Ig(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Ig(a,[_i.scales[a.type],_i.scale])}),s}function qQ(n){let e=n.options||(n.options={});e.plugins=an(e.plugins,{}),e.scales=mIe(n,e)}function KQ(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function gIe(n){return n=n||{},n.data=KQ(n.data),qQ(n),n}var sQ=new Map,XQ=new Set;function LC(n,e){let t=sQ.get(n);return t||(t=e(),sQ.set(n,t),XQ.add(t)),t}var X0=(n,e,t)=>{let i=yf(e,t);i!==void 0&&n.add(i)},NU=class{constructor(e){this._config=gIe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=KQ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),qQ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return LC(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return LC(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return LC(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return LC(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>X0(c,e,d))),u.forEach(d=>X0(c,r,d)),u.forEach(d=>X0(c,hd[s]||{},d)),u.forEach(d=>X0(c,_i,d)),u.forEach(d=>X0(c,AC,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),XQ.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,hd[t]||{},_i.datasets[t]||{},{type:t},_i,AC]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=oQ(this._resolverCache,e,r),c=o;if(yIe(o,t)){s.$shared=!1,i=Nl(i)?i():i;let l=this.createResolver(e,i,a);c=_f(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=oQ(this._resolverCache,e,i);return xn(t)?_f(s,t,void 0,r):s}};function oQ(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:DC(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var _Ie=n=>xn(n)&&Object.getOwnPropertyNames(n).some(e=>Nl(n[e]));function yIe(n,e){let{isScriptable:t,isIndexable:i}=rU(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Nl(a)||_Ie(a))||o&&pi(a))return!0}return!1}var vIe="4.5.1",bIe=["top","bottom","left","right","chartArea"];function aQ(n,e){return n==="top"||n==="bottom"||bIe.indexOf(n)===-1&&e==="x"}function cQ(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function lQ(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),di(t&&t.onComplete,[n],e)}function xIe(n){let e=n.chart,t=e.options.animation;di(t&&t.onProgress,[n],e)}function YQ(n){return RC()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var BC={},uQ=n=>{let e=YQ(n);return Object.values(BC).filter(t=>t.canvas===e).pop()};function wIe(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function EIe(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Rg=(()=>{class n{static defaults=_i;static instances=BC;static overrides=hd;static registry=hc;static version=vIe;static getChart=uQ;static register(...t){hc.add(...t),dQ()}static unregister(...t){hc.remove(...t),dQ()}constructor(t,i){let r=this.config=new NU(i),s=YQ(t),o=uQ(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||GEe(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=oY(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yY(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],BC[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ul.listen(this,"complete",lQ),Ul.listen(this,"progress",xIe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Dn(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return hc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eU(this.canvas,this.ctx),this}stop(){return Ul.stop(this),this}resize(t,i){Ul.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,aU(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),di(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Qn(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=kU(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Qn(o,a=>{let c=a.options,l=c.id,u=kU(l,c),d=an(c.type,a.dtype);(c.position===void 0||aQ(c.position,u)!==aQ(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===d)h=r[l];else{let p=hc.getScale(d);h=new p({id:l,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(c,t)}),Qn(s,(a,c)=>{a||delete r[c]}),Qn(r,a=>{Fo.configure(this,a,a.options),Fo.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(cQ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||PU(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=hc.getController(c),{datasetElementType:u,dataElementType:d}=_i.datasets[c];Object.assign(l,{dataElementType:hc.getElement(d),datasetElementType:u&&hc.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Qn(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Qn(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cQ("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Qn(this.scales,t=>{Fo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!j3(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;wIe(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!j3(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fo.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Qn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Nl(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ul.has(this)?this.attached&&!Ul.running(this)&&Ul.start(this):(this.draw(),lQ({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=fU(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&H0(i,s),t.controller.draw(),s&&j0(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return lc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=TEe.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Vl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Tg(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Ul.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eU(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete BC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Qn(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){Qn(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Qn(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!B0(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=lY(t),u=EIe(t,this._lastEvent,r,l);r&&(this._lastEvent=null,di(o.onHover,[t,c,this],this),l&&di(o.onClick,[t,c,this],this));let d=!B0(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function dQ(){return Qn(Rg.instances,n=>n._plugins.invalidate())}function QQ(n,e,t=e){n.lineCap=an(t.borderCapStyle,e.borderCapStyle),n.setLineDash(an(t.borderDash,e.borderDash)),n.lineDashOffset=an(t.borderDashOffset,e.borderDashOffset),n.lineJoin=an(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=an(t.borderWidth,e.borderWidth),n.strokeStyle=an(t.borderColor,e.borderColor)}function IIe(n,e,t){n.lineTo(t.x,t.y)}function TIe(n){return n.stepped?IY:n.tension||n.cubicInterpolationMode==="monotone"?TY:IIe}function JQ(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function SIe(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=JQ(r,t,i),u=TIe(s),{move:d=!0,reverse:h}=i||{},p,_,b;for(p=0;p<=l;++p)_=r[(a+(h?l-p:p))%o],!_.skip&&(d?(n.moveTo(_.x,_.y),d=!1):u(n,b,_,h,s.stepped),b=_);return c&&(_=r[(a+(h?l:0))%o],u(n,b,_,h,s.stepped)),!!c}function CIe(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=JQ(r,t,i),{move:c=!0,reverse:l}=i||{},u=0,d=0,h,p,_,b,g,v,P=N=>(o+(l?a-N:N))%s,R=()=>{b!==g&&(n.lineTo(u,g),n.lineTo(u,b),n.lineTo(u,v))};for(c&&(p=r[P(0)],n.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[P(h)],p.skip)continue;let N=p.x,U=p.y,O=N|0;O===_?(U<b?b=U:U>g&&(g=U),u=(d*u+N)/++d):(R(),n.lineTo(N,U),_=O,d=0,b=g=U),v=U}R()}function OU(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?CIe:SIe}function AIe(n){return n.stepped?NY:n.tension||n.cubicInterpolationMode==="monotone"?OY:ld}function MIe(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),QQ(n,e.options),n.stroke(r)}function DIe(n,e,t,i){let{segments:r,options:s}=e,o=OU(e);for(let a of r)QQ(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var RIe=typeof Path2D=="function";function PIe(n,e,t,i){RIe&&!e.options.segment?MIe(n,e,t,i):DIe(n,e,t,i)}var tb=(()=>{class n extends fc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;RY(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=FY(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=hU(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=AIe(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:p}=a[u],_=o[h],b=o[p];if(_===b){c.push(_);continue}let g=Math.abs((s-_[i])/(b[i]-_[i])),v=l(_,b,g,r.stepped);v[i]=t[i],c.push(v)}return c.length===1?c[0]:c}pathSegment(t,i,r){return OU(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=OU(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),PIe(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function hQ(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var ZQ=(()=>{class n extends fc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return hQ(this,t,"x",i)}inYRange(t,i){return hQ(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!lc(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,MC(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function eJ(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-d,u=i+d):(d=s/2,a=t-d,c=t+d,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function _d(n,e,t,i){return n?0:Hs(e,t,i)}function kIe(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=iU(i);return{t:_d(r.top,s.top,0,t),r:_d(r.right,s.right,0,e),b:_d(r.bottom,s.bottom,0,t),l:_d(r.left,s.left,0,e)}}function NIe(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=md(r),o=Math.min(e,t),a=n.borderSkipped,c=i||xn(r);return{topLeft:_d(!c||a.top||a.left,s.topLeft,0,o),topRight:_d(!c||a.top||a.right,s.topRight,0,o),bottomLeft:_d(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:_d(!c||a.bottom||a.right,s.bottomRight,0,o)}}function OIe(n){let e=eJ(n),t=e.right-e.left,i=e.bottom-e.top,r=kIe(n,t/2,i/2),s=NIe(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function xU(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&eJ(n,i);return a&&(r||Fl(e,a.left,a.right))&&(s||Fl(t,a.top,a.bottom))}function LIe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function FIe(n,e){n.rect(e.x,e.y,e.w,e.h)}function wU(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var GC=class extends fc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=OIe(this),a=LIe(o.radius)?Ag:FIe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,wU(o,t,s)),e.clip(),a(e,wU(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,wU(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return xU(this,e,t,i)}inXRange(e,t){return xU(this,e,null,t)}inYRange(e,t){return xU(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};function VIe(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=XC(c,l,r);let u=LU(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[c],end:r[l]});continue}let d=hU(e,u);for(let h of d){let p=LU(t,s[h.start],s[h.end],h.loop),_=dU(a,r,p);for(let b of _)o.push({source:b,target:h,start:{[t]:fQ(u,p,"start",Math.max)},end:{[t]:fQ(u,p,"end",Math.min)}})}}return o}function LU(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Us(r),s=Us(s)),{property:n,start:r,end:s}}function UIe(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=XC(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function XC(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function fQ(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function tJ(n,e){let t=[],i=!1;return pi(n)?(i=!0,t=n):t=UIe(n,e),t.length?new tb({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function pQ(n){return n&&n.fill!==!1}function BIe(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ri(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function zIe(n,e,t){let i=WIe(n);if(xn(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ri(r)&&Math.floor(r)===r?HIe(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function HIe(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function jIe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:xn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function GIe(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:xn(n)?i=n.value:i=e.getBaseValue(),i}function WIe(n){let e=n.options,t=e.fill,i=an(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function $Ie(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=qIe(e,t);a.push(tJ({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)KIe(r,o[u],a)}return new tb({points:r,options:{}})}function qIe(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function KIe(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=XIe(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function XIe(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][t],h=o[u.end][t];if(Fl(r,d,h)){a=r===d,c=r===h;break}}return{first:a,last:c,point:i}}var WC=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:zs},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function YIe(n){let{chart:e,fill:t,line:i}=n;if(Ri(t))return QIe(e,t);if(t==="stack")return $Ie(n);if(t==="shape")return!0;let r=JIe(n);return r instanceof WC?r:tJ(r,i)}function QIe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function JIe(n){return(n.scale||{}).getPointPositionForValue?eTe(n):ZIe(n)}function ZIe(n){let{scale:e={},fill:t}=n,i=jIe(t,e);if(Ri(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function eTe(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=GIe(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new WC({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function EU(n,e,t){let i=YIe(e),{chart:r,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,d=l.backgroundColor,{above:h=d,below:p=d}=u||{},_=r.getDatasetMeta(s),b=fU(r,_);i&&o.points.length&&(H0(n,t),tTe(n,{line:o,target:i,above:h,below:p,area:t,scale:a,axis:c,clip:b}),j0(n))}function tTe(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==r&&(l==="x"?(mQ(n,i,o.top),IU(n,{line:t,target:i,color:r,scale:a,property:l,clip:c}),n.restore(),n.save(),mQ(n,i,o.bottom)):l==="y"&&(gQ(n,i,o.left),IU(n,{line:t,target:i,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),gQ(n,i,o.right),u=r)),IU(n,{line:t,target:i,color:u,scale:a,property:l,clip:c}),n.restore()}function mQ(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[XC(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function gQ(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[XC(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,d.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function IU(n,e){let{line:t,target:i,property:r,color:s,scale:o,clip:a}=e,c=VIe(t,i,r);for(let{source:l,target:u,start:d,end:h}of c){let{style:{backgroundColor:p=s}={}}=l,_=i!==!0;n.save(),n.fillStyle=p,nTe(n,o,a,_&&LU(r,d,h)),n.beginPath();let b=!!t.pathSegment(n,l),g;if(_){b?n.closePath():_Q(n,i,h,r);let v=!!i.pathSegment(n,u,{move:b,reverse:!0});g=b&&v,g||_Q(n,i,d,r)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function nTe(n,e,t,i){let r=e.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let c,l,u,d;s==="x"?(c=o,l=r.top,u=a,d=r.bottom):(c=r.left,l=o,u=r.right,d=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),d=Math.min(d,t.bottom)),n.rect(c,l,u-c,d-l),n.clip()}}function _Q(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var nJ={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof tb&&(c={visible:n.isDatasetVisible(o),index:o,fill:zIe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=BIe(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&EU(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;pQ(s)&&EU(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!pQ(i)||t.drawTime!=="beforeDatasetDraw"||EU(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},yQ=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},iTe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,$C=class extends fc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=di(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=lr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=yQ(i,s),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((_,b)=>{let g=i+t/2+s.measureText(_.text).width;(b===0||l[l.length-1]+g+2*a>o)&&(d+=u,l[l.length-(b>0?0:1)]=0,p+=u,h++),c[b]={left:0,top:p,row:h,width:g,height:r},l[l.length-1]+=g+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,p=0,_=0,b=0;return this.legendItems.forEach((g,v)=>{let{itemWidth:P,itemHeight:R}=rTe(i,t,s,g,r);v>0&&p+R+2*a>u&&(d+=h+a,l.push({width:h,height:p}),_+=h+a,b++,h=p=0),c[v]={left:_,top:p,col:b,width:P,height:R},h=Math.max(h,P),p+=R+a}),d+=h,l.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=vf(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Ur(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Ur(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=Ur(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Ur(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;H0(e,this),this._draw(),j0(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=_i.color,c=vf(e.rtl,this.left,this.width),l=lr(o.font),{padding:u}=o,d=l.size,h=d/2,p;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:_,boxHeight:b,itemHeight:g}=yQ(o,d),v=function(O,I,w){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;r.save();let y=an(w.lineWidth,1);if(r.fillStyle=an(w.fillStyle,a),r.lineCap=an(w.lineCap,"butt"),r.lineDashOffset=an(w.lineDashOffset,0),r.lineJoin=an(w.lineJoin,"miter"),r.lineWidth=y,r.strokeStyle=an(w.strokeStyle,a),r.setLineDash(an(w.lineDash,[])),o.usePointStyle){let x={radius:b*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:y},S=c.xPlus(O,_/2),M=I+h;tU(r,x,S,M,o.pointStyleWidth&&_)}else{let x=I+Math.max((d-b)/2,0),S=c.leftForLtr(O,_),M=md(w.borderRadius);r.beginPath(),Object.values(M).some(C=>C!==0)?Ag(r,{x:S,y:x,w:_,h:b,radius:M}):r.rect(S,x,_,b),r.fill(),y!==0&&r.stroke()}r.restore()},P=function(O,I,w){pd(r,w.text,O,I+g/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},R=this.isHorizontal(),N=this._computeTitleHeight();R?p={x:Ur(s,this.left+u,this.right-i[0]),y:this.top+u+N,line:0}:p={x:this.left+u,y:Ur(s,this.top+N+u,this.bottom-t[0].height),line:0},lU(this.ctx,e.textDirection);let U=g+u;this.legendItems.forEach((O,I)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;let w=r.measureText(O.text).width,y=c.textAlign(O.textAlign||(O.textAlign=o.textAlign)),x=_+h+w,S=p.x,M=p.y;c.setWidth(this.width),R?I>0&&S+x+u>this.right&&(M=p.y+=U,p.line++,S=p.x=Ur(s,this.left+u,this.right-i[p.line])):I>0&&M+U>this.bottom&&(S=p.x=S+t[p.line].width+u,p.line++,M=p.y=Ur(s,this.top+N+u,this.bottom-t[p.line].height));let C=c.x(S);if(v(C,M,O),S=vY(y,S+_+h,R?S+x:this.right,e.rtl),P(c.x(S),M,O),R)p.x+=x+u;else if(typeof O.text!="string"){let re=l.lineHeight;p.y+=iJ(O,re)+u}else p.y+=U}),uU(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=lr(t.font),r=Br(t.padding);if(!t.display)return;let s=vf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=Ur(e.align,d,this.right-h);else{let _=this.columnSizes.reduce((b,g)=>Math.max(b,g.height),0);u=l+Ur(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}let p=Ur(a,d,d+h);o.textAlign=s.textAlign(SC(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,pd(o,t.text,p,u,i)}_computeTitleHeight(){let e=this.options.title,t=lr(e.font),i=Br(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Fl(e,this.left,this.right)&&Fl(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Fl(e,r.left,r.left+r.width)&&Fl(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!aTe(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=iTe(r,i);r&&!s&&di(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&di(t.onHover,[e,i,this],this)}else i&&di(t.onClick,[e,i,this],this)}};function rTe(n,e,t,i,r){let s=sTe(i,n,e,t),o=oTe(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function sTe(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function oTe(n,e,t){let i=n;return typeof e.text!="string"&&(i=iJ(e,t)),i}function iJ(n,e){let t=n.text?n.text.length:0;return e*t}function aTe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var rJ={id:"legend",_element:$C,start(n,e,t){let i=n.legend=new $C({ctx:n.ctx,options:t,chart:n});Fo.configure(n,i,t),Fo.addBox(n,i)},stop(n){Fo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Fo.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=Br(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},qC=class extends fc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=pi(i.text)?i.text.length:1;this._padding=Br(i.padding);let s=r*lr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=Ur(a,i,s),d=t+e,l=s-i):(o.position==="left"?(u=i+e,d=Ur(a,r,t),c=Yi*-.5):(u=s-e,d=Ur(a,t,r),c=Yi*.5),l=r-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=lr(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);pd(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:SC(t.align),textBaseline:"middle",translation:[o,a]})}};function cTe(n,e){let t=new qC({ctx:n.ctx,options:e,chart:n});Fo.configure(n,t,e),Fo.addBox(n,t),n.titleBlock=t}var sJ={id:"title",_element:qC,start(n,e,t){cTe(n,t)},stop(n){let e=n.titleBlock;Fo.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Fo.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var Q0={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=xC(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function dc(n,e){return e&&(pi(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Bl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function lTe(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function vQ(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=lr(e.bodyFont),l=lr(e.titleFont),u=lr(e.footerFont),d=s.length,h=r.length,p=i.length,_=Br(e.padding),b=_.height,g=0,v=i.reduce((N,U)=>N+U.before.length+U.lines.length+U.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){let N=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;b+=p*N+(v-p)*c.lineHeight+(v-1)*e.bodySpacing}h&&(b+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let P=0,R=function(N){g=Math.max(g,t.measureText(N).width+P)};return t.save(),t.font=l.string,Qn(n.title,R),t.font=c.string,Qn(n.beforeBody.concat(n.afterBody),R),P=e.displayColors?o+2+e.boxPadding:0,Qn(i,N=>{Qn(N.before,R),Qn(N.lines,R),Qn(N.after,R)}),P=0,t.font=u.string,Qn(n.footer,R),t.restore(),g+=_.width,{width:g,height:b}}function uTe(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function dTe(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function hTe(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),dTe(l,n,e,t)&&(l="center"),l}function bQ(n,e,t){let i=t.yAlign||e.yAlign||uTe(n,t);return{xAlign:t.xAlign||e.xAlign||hTe(n,e,t,i),yAlign:i}}function fTe(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function pTe(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function xQ(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=md(o),_=fTe(e,a),b=pTe(e,c,l);return c==="center"?a==="left"?_+=l:a==="right"&&(_-=l):a==="left"?_-=Math.max(u,h)+r:a==="right"&&(_+=Math.max(d,p)+r),{x:Hs(_,0,i.width-e.width),y:Hs(b,0,i.height-e.height)}}function FC(n,e,t){let i=Br(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function wQ(n){return dc([],Bl(n))}function mTe(n,e,t){return Vl(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function EQ(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var oJ={beforeTitle:uc,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:uc,beforeBody:uc,beforeLabel:uc,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Dn(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:uc,afterBody:uc,beforeFooter:uc,footer:uc,afterFooter:uc};function Gs(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?oJ[e].call(t,i):r}var IQ=(()=>{class n extends fc{static positioners=Q0;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new zC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=mTe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Gs(r,"beforeTitle",this,t),o=Gs(r,"title",this,t),a=Gs(r,"afterTitle",this,t),c=[];return c=dc(c,Bl(s)),c=dc(c,Bl(o)),c=dc(c,Bl(a)),c}getBeforeBody(t,i){return wQ(Gs(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return Qn(t,o=>{let a={before:[],lines:[],after:[]},c=EQ(r,o);dc(a.before,Bl(Gs(c,"beforeLabel",this,o))),dc(a.lines,Gs(c,"label",this,o)),dc(a.after,Bl(Gs(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return wQ(Gs(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Gs(r,"beforeFooter",this,t),o=Gs(r,"footer",this,t),a=Gs(r,"afterFooter",this,t),c=[];return c=dc(c,Bl(s)),c=dc(c,Bl(o)),c=dc(c,Bl(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(lTe(this.chart,i[l]));return t.filter&&(c=c.filter((d,h,p)=>t.filter(d,h,p,r))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,r))),Qn(c,d=>{let h=EQ(t.callbacks,d);s.push(Gs(h,"labelColor",this,d)),o.push(Gs(h,"labelPointStyle",this,d)),a.push(Gs(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Q0[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=vQ(this,r),u=Object.assign({},c,l),d=bQ(this.chart,r,u),h=xQ(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=md(c),{x:p,y:_}=t,{width:b,height:g}=i,v,P,R,N,U,O;return o==="center"?(U=_+g/2,s==="left"?(v=p,P=v-a,N=U+a,O=U-a):(v=p+b,P=v+a,N=U-a,O=U+a),R=v):(s==="left"?P=p+Math.max(l,d)+a:s==="right"?P=p+b-Math.max(u,h)-a:P=this.caretX,o==="top"?(N=_,U=N-a,v=P-a,R=P+a):(N=_+g,U=N+a,v=P+a,R=P-a),O=N),{x1:v,x2:P,x3:R,y1:N,y2:U,y3:O}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let u=vf(r.rtl,this.x,this.width);for(t.x=FC(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=lr(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,d=lr(o.bodyFont),h=FC(this,"left",o),p=s.x(h),_=l<d.lineHeight?(d.lineHeight-l)/2:0,b=i.y+_;if(o.usePointStyle){let g={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},v=s.leftForLtr(p,u)+u/2,P=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,MC(t,g,v,P),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,MC(t,g,v,P)}else{t.lineWidth=xn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let g=s.leftForLtr(p,u),v=s.leftForLtr(s.xPlus(p,1),u-2),P=md(a.borderRadius);Object.values(P).some(R=>R!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Ag(t,{x:g,y:b,w:u,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Ag(t,{x:v,y:b+1,w:u-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,b,u,l),t.strokeRect(g,b,u,l),t.fillStyle=a.backgroundColor,t.fillRect(v,b+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=r,h=lr(r.bodyFont),p=h.lineHeight,_=0,b=vf(r.rtl,this.x,this.width),g=function(y){i.fillText(y,b.x(t.x+_),t.y+p/2),t.y+=p+o},v=b.textAlign(a),P,R,N,U,O,I,w;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=FC(this,v,r),i.fillStyle=r.bodyColor,Qn(this.beforeBody,g),_=c&&v!=="right"?a==="center"?u/2+d:u+2+d:0,U=0,I=s.length;U<I;++U){for(P=s[U],R=this.labelTextColors[U],i.fillStyle=R,Qn(P.before,g),N=P.lines,c&&N.length&&(this._drawColorBox(i,t,U,b,r),p=Math.max(h.lineHeight,l)),O=0,w=N.length;O<w;++O)g(N[O]),p=h.lineHeight;Qn(P.after,g)}_=0,p=h.lineHeight,Qn(this.afterBody,g),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=vf(r.rtl,this.x,this.width);for(t.x=FC(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=lr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=r,{topLeft:h,topRight:p,bottomLeft:_,bottomRight:b}=md(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+h,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+u-p,l),i.quadraticCurveTo(c+u,l,c+u,l+p),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+u,l+d-b),i.quadraticCurveTo(c+u,l+d,c+u-b,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+_,l+d),i.quadraticCurveTo(c,l+d,c,l+d-_),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+h),i.quadraticCurveTo(c,l,c+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Q0[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=vQ(this,t),l=Object.assign({},a,this._size),u=bQ(i,t,l),d=xQ(t,l,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Br(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),lU(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),uU(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!B0(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!B0(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=Q0[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),aJ={id:"tooltip",_element:IQ,positioners:Q0,afterInit(n,e,t){t&&(n.tooltip=new IQ({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",st(ie({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var gTe=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function _Te(n,e,t,i){let r=n.indexOf(e);if(r===-1)return gTe(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var yTe=(n,e)=>n===null?null:Hs(Math.round(n),0,e);function TQ(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var cJ=(()=>{class n extends wf{static id="category";static defaults={ticks:{callback:TQ}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Dn(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:_Te(r,t,an(i,t),this._addedLabels),yTe(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return TQ.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function vTe(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,_=u-1,{min:b,max:g}=e,v=!Dn(o),P=!Dn(a),R=!Dn(l),N=(g-b)/(d+1),U=G3((g-b)/_/p)*p,O,I,w,y;if(U<1e-14&&!v&&!P)return[{value:b},{value:g}];y=Math.ceil(g/U)-Math.floor(b/U),y>_&&(U=G3(y*U/_/p)*p),Dn(c)||(O=Math.pow(10,c),U=Math.ceil(U*O)/O),r==="ticks"?(I=Math.floor(b/U)*U,w=Math.ceil(g/U)*U):(I=b,w=g),v&&P&&s&&dY((a-o)/s,U/1e3)?(y=Math.round(Math.min((a-o)/U,u)),U=(a-o)/y,I=o,w=a):R?(I=v?o:I,w=P?a:w,y=l-1,U=(w-I)/y):(y=(w-I)/U,Sg(y,Math.round(y),U/1e3)?y=Math.round(y):y=Math.ceil(y));let x=Math.max($3(U),$3(I));O=Math.pow(10,Dn(c)?x:c),I=Math.round(I*O)/O,w=Math.round(w*O)/O;let S=0;for(v&&(h&&I!==o?(t.push({value:o}),I<o&&S++,Sg(Math.round((I+S*U)*O)/O,o,SQ(o,N,n))&&S++):I<o&&S++);S<y;++S){let M=Math.round((I+S*U)*O)/O;if(P&&M>a)break;t.push({value:M})}return P&&h&&w!==a?t.length&&Sg(t[t.length-1].value,a,SQ(a,N,n))?t[t.length-1].value=a:t.push({value:a}):(!P||w===a)&&t.push({value:w}),t}function SQ(n,e,{horizontal:t,minRotation:i}){let r=Ll(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Dg=class extends wf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Dn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=ba(r),l=ba(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=vTe(r,s);return e.bounds==="ticks"&&W3(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return CC(e,this.chart.options.locale,this.options.ticks.format)}},KC=class extends Dg{static id="linear";static defaults={ticks:{callback:z0.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ri(e)?e:0,this.max=Ri(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Ll(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Z0=n=>Math.floor(Ol(n)),xf=(n,e)=>Math.pow(10,Z0(n)+e);function CQ(n){return n/Math.pow(10,Z0(n))===1}function AQ(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function bTe(n,e){let t=e-n,i=Z0(t);for(;AQ(n,e,i)>10;)i++;for(;AQ(n,e,i)<10;)i--;return Math.min(i,Z0(n))}function xTe(n,{min:e,max:t}){e=js(n.min,e);let i=[],r=Z0(e),s=bTe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=js(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:CQ(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let p=js(n.max,h);return i.push({value:p,major:CQ(p),significand:d}),i}var MQ=class extends wf{static id="logarithmic";static defaults={ticks:{callback:z0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Dg.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ri(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ri(e)?Math.max(0,e):null,this.max=Ri(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ri(this._userMin)&&(this.min=e===xf(this.min,0)?xf(this.min,-1):xf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(xf(i,-1)),o(xf(r,1)))),i<=0&&s(xf(r,-1)),r<=0&&o(xf(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=xTe(t,this);return e.bounds==="ticks"&&W3(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":CC(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ol(e),this._valueRange=Ol(this.max)-Ol(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ol(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function FU(n){let e=n.ticks;if(e.display&&n.display){let t=Br(e.backdropPadding);return an(e.font&&e.font.size,_i.font.size)+t.height}return 0}function wTe(n,e,t){return t=pi(t)?t:[t],{w:EY(n,e.string,t),h:t.length*e.lineHeight}}function DQ(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function ETe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Yi/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),d=lr(l.font),h=wTe(n.ctx,d,n._pointLabels[c]);i[c]=h;let p=Us(n.getIndexAngle(c)+a),_=Math.round(IC(p)),b=DQ(_,u.x,h.w,0,180),g=DQ(_,u.y,h.h,90,270);ITe(t,e,p,b,g)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=CTe(n,i,r)}function ITe(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function TTe(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(IC(Us(c.angle+Bs))),u=DTe(c.y,a.h,l),d=ATe(l),h=MTe(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function STe(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(lc({x:t,y:i},e)||lc({x:t,y:s},e)||lc({x:r,y:i},e)||lc({x:r,y:s},e))}function CTe(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:FU(s)/2,additionalAngle:o?Yi/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let d=TTe(n,u,c);i.push(d),a==="auto"&&(d.visible=STe(d,l),d.visible&&(l=d))}return i}function ATe(n){return n===0||n===180?"center":n<180?"left":"right"}function MTe(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function DTe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function RTe(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Dn(a)){let c=md(e.borderRadius),l=Br(e.backdropPadding);n.fillStyle=a;let u=i-l.left,d=r-l.top,h=s-i+l.width,p=o-r+l.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),Ag(n,{x:u,y:d,w:h,h:p,radius:c}),n.fill()):n.fillRect(u,d,h,p)}}function PTe(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));RTe(t,o,s);let a=lr(o.font),{x:c,y:l,textAlign:u}=s;pd(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function lJ(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,zs);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function kTe(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),lJ(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function NTe(n,e,t){return Vl(n,{label:t,index:e,type:"pointLabel"})}var RQ=class extends Dg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:z0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Br(FU(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ri(e)&&!isNaN(e)?e:0,this.max=Ri(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FU(this.options))}generateTickLabels(e){Dg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=di(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?ETe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=zs/(this._pointLabels.length||1),i=this.options.startAngle||0;return Us(e*t+Ll(i))}getDistanceFromCenterForValue(e){if(Dn(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Dn(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return NTe(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-Bs+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),lJ(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&PTe(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),p=r.setContext(h),_=s.setContext(h);kTe(this,p,c,o,_)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=lr(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=Br(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}pd(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},YC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ws=Object.keys(YC);function PQ(n,e){return n-e}function kQ(n,e){if(Dn(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Ri(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Cg(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function NQ(n,e,t,i){let r=Ws.length;for(let s=Ws.indexOf(n);s<r-1;++s){let o=YC[Ws[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Ws[s]}return Ws[r-1]}function OTe(n,e,t,i,r){for(let s=Ws.length-1;s>=Ws.indexOf(t);s--){let o=Ws[s];if(YC[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Ws[t?Ws.indexOf(t):0]}function LTe(n){for(let e=Ws.indexOf(n)+1,t=Ws.length;e<t;++e)if(YC[Ws[e]].common)return Ws[e]}function OQ(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=TC(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function FTe(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function LQ(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:FTe(n,i,r,t)}var FQ=(()=>{class n extends wf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new bEe._date(t.adapters.date);s.init(i),Ig(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:kQ(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ri(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Ri(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=mY(s,o,a);return this._unit=i.unit||(r.autoSkip?NQ(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):OTe(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:LTe(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),LQ(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Hs(i,0,a),r=Hs(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||NQ(o.minUnit,i,r,this._getLabelCapacity(i)),c=an(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Cg(l)||l===!0,d={},h=i,p,_;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let b=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,_=0;p<r;p=+t.add(p,c,a),_++)OQ(d,p,b);return(p===r||s.bounds==="ticks"||_===1)&&OQ(d,p,b),Object.keys(d).sort(PQ).map(g=>+g)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return di(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],p=r[i],_=u&&h&&p&&p.major;return this._adapter.format(t,s||(_?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Ll(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,LQ(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(kQ(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return X3(t.sort(PQ))}}return n})();function VC(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=ud(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=ud(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var VQ=class extends FQ{static id="timeseries";static defaults=FQ.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=VC(t,this.min),this._tableRange=VC(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],c=r[o-1],l=r[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(VC(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return VC(this._table,i*this._tableRange+this._minPos,!0)}};var VTe=typeof global=="object"&&global&&global.Object===Object&&global,QC=VTe;var UTe=typeof self=="object"&&self&&self.Object===Object&&self,BTe=QC||UTe||Function("return this")(),Vo=BTe;var zTe=Vo.Symbol,Pg=zTe;var uJ=Object.prototype,HTe=uJ.hasOwnProperty,jTe=uJ.toString,nb=Pg?Pg.toStringTag:void 0;function GTe(n){var e=HTe.call(n,nb),t=n[nb];try{n[nb]=void 0;var i=!0}catch{}var r=jTe.call(n);return i&&(e?n[nb]=t:delete n[nb]),r}var dJ=GTe;var WTe=Object.prototype,$Te=WTe.toString;function qTe(n){return $Te.call(n)}var hJ=qTe;var KTe="[object Null]",XTe="[object Undefined]",fJ=Pg?Pg.toStringTag:void 0;function YTe(n){return n==null?n===void 0?XTe:KTe:fJ&&fJ in Object(n)?dJ(n):hJ(n)}var yd=YTe;function QTe(n){return n!=null&&typeof n=="object"}var pc=QTe;var JTe=Array.isArray,ib=JTe;function ZTe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var $s=ZTe;function eSe(n){return n}var JC=eSe;var tSe="[object AsyncFunction]",nSe="[object Function]",iSe="[object GeneratorFunction]",rSe="[object Proxy]";function sSe(n){if(!$s(n))return!1;var e=yd(n);return e==nSe||e==iSe||e==tSe||e==rSe}var kg=sSe;var oSe=Vo["__core-js_shared__"],ZC=oSe;var pJ=(function(){var n=/[^.]+$/.exec(ZC&&ZC.keys&&ZC.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function aSe(n){return!!pJ&&pJ in n}var mJ=aSe;var cSe=Function.prototype,lSe=cSe.toString;function uSe(n){if(n!=null){try{return lSe.call(n)}catch{}try{return n+""}catch{}}return""}var gJ=uSe;var dSe=/[\\^$.*+?()[\]{}|]/g,hSe=/^\[object .+?Constructor\]$/,fSe=Function.prototype,pSe=Object.prototype,mSe=fSe.toString,gSe=pSe.hasOwnProperty,_Se=RegExp("^"+mSe.call(gSe).replace(dSe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ySe(n){if(!$s(n)||mJ(n))return!1;var e=kg(n)?_Se:hSe;return e.test(gJ(n))}var _J=ySe;function vSe(n,e){return n?.[e]}var yJ=vSe;function bSe(n,e){var t=yJ(n,e);return _J(t)?t:void 0}var Ng=bSe;var vJ=Object.create,xSe=(function(){function n(){}return function(e){if(!$s(e))return{};if(vJ)return vJ(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})(),bJ=xSe;function wSe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var xJ=wSe;function ESe(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var wJ=ESe;var ISe=800,TSe=16,SSe=Date.now;function CSe(n){var e=0,t=0;return function(){var i=SSe(),r=TSe-(i-t);if(t=i,r>0){if(++e>=ISe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var EJ=CSe;function ASe(n){return function(){return n}}var IJ=ASe;var MSe=(function(){try{var n=Ng(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Og=MSe;var DSe=Og?function(n,e){return Og(n,"toString",{configurable:!0,enumerable:!1,value:IJ(e),writable:!0})}:JC,TJ=DSe;var RSe=EJ(TJ),SJ=RSe;var PSe=9007199254740991,kSe=/^(?:0|[1-9]\d*)$/;function NSe(n,e){var t=typeof n;return e=e??PSe,!!e&&(t=="number"||t!="symbol"&&kSe.test(n))&&n>-1&&n%1==0&&n<e}var eA=NSe;function OSe(n,e,t){e=="__proto__"&&Og?Og(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Lg=OSe;function LSe(n,e){return n===e||n!==n&&e!==e}var vd=LSe;var FSe=Object.prototype,VSe=FSe.hasOwnProperty;function USe(n,e,t){var i=n[e];(!(VSe.call(n,e)&&vd(i,t))||t===void 0&&!(e in n))&&Lg(n,e,t)}var CJ=USe;function BSe(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=i?i(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),r?Lg(t,a,c):CJ(t,a,c)}return t}var AJ=BSe;var MJ=Math.max;function zSe(n,e,t){return e=MJ(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=MJ(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),xJ(n,this,a)}}var DJ=zSe;function HSe(n,e){return SJ(DJ(n,e,JC),n+"")}var RJ=HSe;var jSe=9007199254740991;function GSe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=jSe}var tA=GSe;function WSe(n){return n!=null&&tA(n.length)&&!kg(n)}var Fg=WSe;function $Se(n,e,t){if(!$s(t))return!1;var i=typeof e;return(i=="number"?Fg(t)&&eA(e,t.length):i=="string"&&e in t)?vd(t[e],n):!1}var PJ=$Se;function qSe(n){return RJ(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&PJ(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var kJ=qSe;var KSe=Object.prototype;function XSe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||KSe;return n===t}var nA=XSe;function YSe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var NJ=YSe;var QSe="[object Arguments]";function JSe(n){return pc(n)&&yd(n)==QSe}var UU=JSe;var OJ=Object.prototype,ZSe=OJ.hasOwnProperty,eCe=OJ.propertyIsEnumerable,tCe=UU((function(){return arguments})())?UU:function(n){return pc(n)&&ZSe.call(n,"callee")&&!eCe.call(n,"callee")},rb=tCe;function nCe(){return!1}var LJ=nCe;var UJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,FJ=UJ&&typeof module=="object"&&module&&!module.nodeType&&module,iCe=FJ&&FJ.exports===UJ,VJ=iCe?Vo.Buffer:void 0,rCe=VJ?VJ.isBuffer:void 0,sCe=rCe||LJ,iA=sCe;var oCe="[object Arguments]",aCe="[object Array]",cCe="[object Boolean]",lCe="[object Date]",uCe="[object Error]",dCe="[object Function]",hCe="[object Map]",fCe="[object Number]",pCe="[object Object]",mCe="[object RegExp]",gCe="[object Set]",_Ce="[object String]",yCe="[object WeakMap]",vCe="[object ArrayBuffer]",bCe="[object DataView]",xCe="[object Float32Array]",wCe="[object Float64Array]",ECe="[object Int8Array]",ICe="[object Int16Array]",TCe="[object Int32Array]",SCe="[object Uint8Array]",CCe="[object Uint8ClampedArray]",ACe="[object Uint16Array]",MCe="[object Uint32Array]",yi={};yi[xCe]=yi[wCe]=yi[ECe]=yi[ICe]=yi[TCe]=yi[SCe]=yi[CCe]=yi[ACe]=yi[MCe]=!0;yi[oCe]=yi[aCe]=yi[vCe]=yi[cCe]=yi[bCe]=yi[lCe]=yi[uCe]=yi[dCe]=yi[hCe]=yi[fCe]=yi[pCe]=yi[mCe]=yi[gCe]=yi[_Ce]=yi[yCe]=!1;function DCe(n){return pc(n)&&tA(n.length)&&!!yi[yd(n)]}var BJ=DCe;function RCe(n){return function(e){return n(e)}}var zJ=RCe;var HJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sb=HJ&&typeof module=="object"&&module&&!module.nodeType&&module,PCe=sb&&sb.exports===HJ,BU=PCe&&QC.process,kCe=(function(){try{var n=sb&&sb.require&&sb.require("util").types;return n||BU&&BU.binding&&BU.binding("util")}catch{}})(),zU=kCe;var jJ=zU&&zU.isTypedArray,NCe=jJ?zJ(jJ):BJ,rA=NCe;var OCe=Object.prototype,LCe=OCe.hasOwnProperty;function FCe(n,e){var t=ib(n),i=!t&&rb(n),r=!t&&!i&&iA(n),s=!t&&!i&&!r&&rA(n),o=t||i||r||s,a=o?NJ(n.length,String):[],c=a.length;for(var l in n)(e||LCe.call(n,l))&&!(o&&(l=="length"||r&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||eA(l,c)))&&a.push(l);return a}var GJ=FCe;function VCe(n,e){return function(t){return n(e(t))}}var WJ=VCe;function UCe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var $J=UCe;var BCe=Object.prototype,zCe=BCe.hasOwnProperty;function HCe(n){if(!$s(n))return $J(n);var e=nA(n),t=[];for(var i in n)i=="constructor"&&(e||!zCe.call(n,i))||t.push(i);return t}var qJ=HCe;function jCe(n){return Fg(n)?GJ(n,!0):qJ(n)}var sA=jCe;var GCe=Ng(Object,"create"),zl=GCe;function WCe(){this.__data__=zl?zl(null):{},this.size=0}var KJ=WCe;function $Ce(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var XJ=$Ce;var qCe="__lodash_hash_undefined__",KCe=Object.prototype,XCe=KCe.hasOwnProperty;function YCe(n){var e=this.__data__;if(zl){var t=e[n];return t===qCe?void 0:t}return XCe.call(e,n)?e[n]:void 0}var YJ=YCe;var QCe=Object.prototype,JCe=QCe.hasOwnProperty;function ZCe(n){var e=this.__data__;return zl?e[n]!==void 0:JCe.call(e,n)}var QJ=ZCe;var eAe="__lodash_hash_undefined__";function tAe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=zl&&e===void 0?eAe:e,this}var JJ=tAe;function Vg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Vg.prototype.clear=KJ;Vg.prototype.delete=XJ;Vg.prototype.get=YJ;Vg.prototype.has=QJ;Vg.prototype.set=JJ;var HU=Vg;function nAe(){this.__data__=[],this.size=0}var ZJ=nAe;function iAe(n,e){for(var t=n.length;t--;)if(vd(n[t][0],e))return t;return-1}var bd=iAe;var rAe=Array.prototype,sAe=rAe.splice;function oAe(n){var e=this.__data__,t=bd(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():sAe.call(e,t,1),--this.size,!0}var eZ=oAe;function aAe(n){var e=this.__data__,t=bd(e,n);return t<0?void 0:e[t][1]}var tZ=aAe;function cAe(n){return bd(this.__data__,n)>-1}var nZ=cAe;function lAe(n,e){var t=this.__data__,i=bd(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var iZ=lAe;function Ug(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ug.prototype.clear=ZJ;Ug.prototype.delete=eZ;Ug.prototype.get=tZ;Ug.prototype.has=nZ;Ug.prototype.set=iZ;var xd=Ug;var uAe=Ng(Vo,"Map"),oA=uAe;function dAe(){this.size=0,this.__data__={hash:new HU,map:new(oA||xd),string:new HU}}var rZ=dAe;function hAe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var sZ=hAe;function fAe(n,e){var t=n.__data__;return sZ(e)?t[typeof e=="string"?"string":"hash"]:t.map}var wd=fAe;function pAe(n){var e=wd(this,n).delete(n);return this.size-=e?1:0,e}var oZ=pAe;function mAe(n){return wd(this,n).get(n)}var aZ=mAe;function gAe(n){return wd(this,n).has(n)}var cZ=gAe;function _Ae(n,e){var t=wd(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var lZ=_Ae;function Bg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Bg.prototype.clear=rZ;Bg.prototype.delete=oZ;Bg.prototype.get=aZ;Bg.prototype.has=cZ;Bg.prototype.set=lZ;var uZ=Bg;var yAe=WJ(Object.getPrototypeOf,Object),aA=yAe;var vAe="[object Object]",bAe=Function.prototype,xAe=Object.prototype,dZ=bAe.toString,wAe=xAe.hasOwnProperty,EAe=dZ.call(Object);function IAe(n){if(!pc(n)||yd(n)!=vAe)return!1;var e=aA(n);if(e===null)return!0;var t=wAe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&dZ.call(t)==EAe}var hZ=IAe;function TAe(){this.__data__=new xd,this.size=0}var fZ=TAe;function SAe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var pZ=SAe;function CAe(n){return this.__data__.get(n)}var mZ=CAe;function AAe(n){return this.__data__.has(n)}var gZ=AAe;var MAe=200;function DAe(n,e){var t=this.__data__;if(t instanceof xd){var i=t.__data__;if(!oA||i.length<MAe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new uZ(i)}return t.set(n,e),this.size=t.size,this}var _Z=DAe;function zg(n){var e=this.__data__=new xd(n);this.size=e.size}zg.prototype.clear=fZ;zg.prototype.delete=pZ;zg.prototype.get=mZ;zg.prototype.has=gZ;zg.prototype.set=_Z;var yZ=zg;var wZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vZ=wZ&&typeof module=="object"&&module&&!module.nodeType&&module,RAe=vZ&&vZ.exports===wZ,bZ=RAe?Vo.Buffer:void 0,xZ=bZ?bZ.allocUnsafe:void 0;function PAe(n,e){if(e)return n.slice();var t=n.length,i=xZ?xZ(t):new n.constructor(t);return n.copy(i),i}var EZ=PAe;var kAe=Vo.Uint8Array,jU=kAe;function NAe(n){var e=new n.constructor(n.byteLength);return new jU(e).set(new jU(n)),e}var IZ=NAe;function OAe(n,e){var t=e?IZ(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var TZ=OAe;function LAe(n){return typeof n.constructor=="function"&&!nA(n)?bJ(aA(n)):{}}var SZ=LAe;function FAe(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var c=o[n?a:++r];if(t(s[c],c,s)===!1)break}return e}}var CZ=FAe;var VAe=CZ(),AZ=VAe;function UAe(n,e,t){(t!==void 0&&!vd(n[e],t)||t===void 0&&!(e in n))&&Lg(n,e,t)}var ob=UAe;function BAe(n){return pc(n)&&Fg(n)}var MZ=BAe;function zAe(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var ab=zAe;function HAe(n){return AJ(n,sA(n))}var DZ=HAe;function jAe(n,e,t,i,r,s,o){var a=ab(n,t),c=ab(e,t),l=o.get(c);if(l){ob(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=ib(c),p=!h&&iA(c),_=!h&&!p&&rA(c);u=c,h||p||_?ib(a)?u=a:MZ(a)?u=wJ(a):p?(d=!1,u=EZ(c,!0)):_?(d=!1,u=TZ(c,!0)):u=[]:hZ(c)||rb(c)?(u=a,rb(a)?u=DZ(a):(!$s(a)||kg(a))&&(u=SZ(c))):d=!1}d&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),ob(n,t,u)}var RZ=jAe;function PZ(n,e,t,i,r){n!==e&&AZ(e,function(s,o){if(r||(r=new yZ),$s(s))RZ(n,e,o,t,PZ,i,r);else{var a=i?i(ab(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),ob(n,o,a)}},sA)}var kZ=PZ;var GAe=kJ(function(n,e,t){kZ(n,e,t)}),GU=GAe;var WAe=new Ee("Configuration for ngCharts");var $Ae=(()=>{class n{constructor(){this.colorschemesOptions=new zi(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NZ=(()=>{class n{constructor(t,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new vn,this.chartHover=new vn,this.subs=[],this.themeOverrides={},s?.registerables&&Rg.register(...s.registerables),s?.defaults&&_i.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(eh()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let i=["type"],r=Object.getOwnPropertyNames(t);if(r.some(s=>i.includes(s))||r.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Rg(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return GU({onHover:(t,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(mt(nn),mt(St),mt($Ae),mt(WAe,8))}}static{this.\u0275dir=wt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[hs]})}}return n})();var cA=class n{firestore=H(Dl);constructor(){}getUserData(e){let t=dg(this.firestore,`users/${e}`);return tX(t)}async initUserData(e){let t=dg(this.firestore,`users/${e}`);(await rX(t)).exists()||await aX(t,{laScore:0})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function qAe(n,e){if(n&1&&(se(0,"div",1)(1,"div",2)(2,"h1"),Q(3),ae(),se(4,"p",3),Q(5,"Here's your lifestyle overview for today."),ae()(),se(6,"div",4)(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title"),Q(10,"LA Score"),ae(),se(11,"mat-icon",6),Q(12,"speed"),ae()(),se(13,"mat-card-content")(14,"div",7),Q(15),ae(),se(16,"div",8),Sn(17,"canvas",9),ae()()(),se(18,"mat-card",10)(19,"mat-card-header")(20,"mat-card-title"),Q(21,"Streak"),ae(),se(22,"mat-icon",11),Q(23,"local_fire_department"),ae()(),se(24,"mat-card-content")(25,"div",12),Q(26,"5 Days"),ae(),se(27,"p",13),Q(28,"Keep it up!"),ae()()(),se(29,"mat-card",10)(30,"mat-card-header")(31,"mat-card-title"),Q(32,"Habits"),ae(),se(33,"mat-icon",14),Q(34,"check_circle"),ae()(),se(35,"mat-card-content")(36,"div",12),Q(37,"8/10"),ae(),se(38,"p",13),Q(39,"Completed today"),ae()()()(),se(40,"div",15)(41,"mat-card",16)(42,"mat-card-header")(43,"mat-card-title"),Q(44,"Weekly Progress"),ae()(),se(45,"mat-card-content")(46,"div",17),Sn(47,"canvas",9),ae()()()()()),n&2){let t,i=e.ngIf,r=Gn();Ot(3),Ry("Welcome back, ",(i.displayName==null||(t=i.displayName.split(" "))==null?null:t[0])||"User","!"),Ot(12),ps(r.laScore),Ot(2),Bn("data",r.barChartData)("options",r.barChartOptions)("type",r.barChartType),Ot(30),Bn("data",r.lineChartData)("options",r.lineChartOptions)("type",r.lineChartType)}}Rg.register(zQ,GC,HQ,tb,ZQ,nJ,cJ,KC,sJ,aJ,rJ);var lA=class n{authService=H(Vs);firestoreService=H(cA);laScore=0;user$=this.authService.user$;barChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#333"}}};barChartType="bar";barChartData={labels:["LA Score"],datasets:[{data:[0],label:"Score",backgroundColor:["#3f51b5"],borderRadius:5}]};lineChartOptions={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}},scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!0,position:"bottom"}}};lineChartType="line";lineChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{data:[65,59,80,81,56,55,40],label:"Weekly Progress",backgroundColor:"rgba(63, 81, 181, 0.2)",borderColor:"#3f51b5",pointBackgroundColor:"#fff",pointBorderColor:"#3f51b5",fill:"origin"}]};ngOnInit(){this.authService.user$.pipe(bi(e=>e?(this.firestoreService.initUserData(e.uid),this.firestoreService.getUserData(e.uid)):xt(null))).subscribe(e=>{e&&e.laScore!==void 0&&(this.laScore=e.laScore,this.updateChart(this.laScore))})}updateChart(e){this.barChartData={labels:["Current Score"],datasets:[{data:[e],label:"LA Score",backgroundColor:["#3f51b5"],borderRadius:5}]};let t=[e-10,e-5,e+2,e-2,e+5,e,e];this.lineChartData=st(ie({},this.lineChartData),{datasets:[st(ie({},this.lineChartData.datasets[0]),{data:t.map(i=>Math.max(0,Math.min(100,i)))})]})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[1,"welcome-section"],[1,"subtitle"],[1,"stats-grid"],[1,"stat-card","main-score-card"],["color","primary",1,"card-icon"],[1,"score-value"],[1,"chart-wrapper","small-chart"],["baseChart","",3,"data","options","type"],[1,"stat-card"],["color","accent",1,"card-icon"],[1,"stat-value"],[1,"stat-desc"],["color","warn",1,"card-icon"],[1,"charts-section"],[1,"chart-card"],[1,"chart-wrapper","main-chart"]],template:function(t,i){t&1&&(Fr(0,qAe,48,8,"div",0),Yc(1,"async")),t&2&&Bn("ngIf",Cu(1,1,i.user$))},dependencies:[Os,sa,NZ,Oo,od,vg,aC,oC,Fs,cc,Eh],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:1.1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.card-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.score-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3f51b5;line-height:1;margin-bottom:16px}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;margin-bottom:4px}.stat-desc[_ngcontent-%COMP%]{color:#666;margin:0}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.small-chart[_ngcontent-%COMP%]{height:100px}.main-chart[_ngcontent-%COMP%]{height:300px}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px}@media(max-width:600px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.score-value[_ngcontent-%COMP%]{font-size:2.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}}"]})};var WU=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=Rl(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=Rl(t)}_inset=!1;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){i&2&&(Wi("aria-orientation",r.vertical?"vertical":"horizontal"),ui("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return n})(),uA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var GZ=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(mt(Lr),mt(nn))};static \u0275dir=wt({type:n})}return n})(),QU=(()=>{class n extends GZ{static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,features:[hi]})}return n})(),pb=new Ee("");var KAe={provide:pb,useExisting:Qs(()=>vA),multi:!0};function XAe(){let n=To()?To().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var YAe=new Ee(""),vA=(()=>{class n extends GZ{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!XAe())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(mt(Lr),mt(nn),mt(YAe,8))};static \u0275dir=wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Nn("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Rs([KAe]),hi]})}return n})();function JU(n){return n==null||ZU(n)===0}function ZU(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var eB=new Ee(""),tB=new Ee(""),QAe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gg=class{static min(e){return JAe(e)}static max(e){return ZAe(e)}static required(e){return eMe(e)}static requiredTrue(e){return tMe(e)}static email(e){return nMe(e)}static minLength(e){return iMe(e)}static maxLength(e){return rMe(e)}static pattern(e){return sMe(e)}static nullValidator(e){return WZ()}static compose(e){return QZ(e)}static composeAsync(e){return ZZ(e)}};function JAe(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ZAe(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function eMe(n){return JU(n.value)?{required:!0}:null}function tMe(n){return n.value===!0?null:{required:!0}}function nMe(n){return JU(n.value)||QAe.test(n.value)?null:{email:!0}}function iMe(n){return e=>{let t=e.value?.length??ZU(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function rMe(n){return e=>{let t=e.value?.length??ZU(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function sMe(n){if(!n)return WZ;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(JU(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function WZ(n){return null}function $Z(n){return n!=null}function qZ(n){return qc(n)?vi(n):n}function KZ(n){let e={};return n.forEach(t=>{e=t!=null?ie(ie({},e),t):e}),Object.keys(e).length===0?null:e}function XZ(n,e){return e.map(t=>t(n))}function oMe(n){return!n.validate}function YZ(n){return n.map(e=>oMe(e)?e:t=>e.validate(t))}function QZ(n){if(!n)return null;let e=n.filter($Z);return e.length==0?null:function(t){return KZ(XZ(t,e))}}function JZ(n){return n!=null?QZ(YZ(n)):null}function ZZ(n){if(!n)return null;let e=n.filter($Z);return e.length==0?null:function(t){let i=XZ(t,e).map(qZ);return q_(i).pipe(pt(KZ))}}function eee(n){return n!=null?ZZ(YZ(n)):null}function OZ(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tee(n){return n._rawValidators}function nee(n){return n._rawAsyncValidators}function $U(n){return n?Array.isArray(n)?n:[n]:[]}function hA(n,e){return Array.isArray(n)?n.includes(e):n===e}function LZ(n,e){let t=$U(e);return $U(n).forEach(r=>{hA(t,r)||t.push(r)}),t}function FZ(n,e){return $U(e).filter(t=>!hA(n,t))}var fA=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JZ(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eee(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ef=class extends fA{name;get formDirective(){return null}get path(){return null}},If=class extends fA{_parent=null;name=null;valueAccessor=null},pA=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var iee=(()=>{class n extends pA{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(mt(If,2))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ui("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[hi]})}return n})(),ree=(()=>{class n extends pA{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(mt(Ef,10))};static \u0275dir=wt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ui("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[hi]})}return n})();var cb="VALID",dA="INVALID",Hg="PENDING",lb="DISABLED",Ed=class{},mA=class extends Ed{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ub=class extends Ed{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},db=class extends Ed{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},jg=class extends Ed{status;source;constructor(e,t){super(),this.status=e,this.source=t}},qU=class extends Ed{source;constructor(e){super(),this.source=e}},fb=class extends Ed{source;constructor(e){super(),this.source=e}};function nB(n){return(bA(n)?n.validators:n)||null}function aMe(n){return Array.isArray(n)?JZ(n):n||null}function iB(n,e){return(bA(e)?e.asyncValidators:n)||null}function cMe(n){return Array.isArray(n)?eee(n):n||null}function bA(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function see(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Oe(1e3,"");if(!i[t])throw new Oe(1001,"")}function oee(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Oe(1002,"")})}var Wg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ci(this.statusReactive)}set status(e){Ci(()=>this.statusReactive.set(e))}_status=Up(()=>this.statusReactive(),{});statusReactive=jn(void 0,{});get valid(){return this.status===cb}get invalid(){return this.status===dA}get pending(){return this.status==Hg}get disabled(){return this.status===lb}get enabled(){return this.status!==lb}errors;get pristine(){return Ci(this.pristineReactive)}set pristine(e){Ci(()=>this.pristineReactive.set(e))}_pristine=Up(()=>this.pristineReactive(),{});pristineReactive=jn(!0,{});get dirty(){return!this.pristine}get touched(){return Ci(this.touchedReactive)}set touched(e){Ci(()=>this.touchedReactive.set(e))}_touched=Up(()=>this.touchedReactive(),{});touchedReactive=jn(!1,{});get untouched(){return!this.touched}_events=new Dt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LZ(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LZ(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FZ(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FZ(e,this._rawAsyncValidators))}hasValidator(e){return hA(this._rawValidators,e)}hasAsyncValidator(e){return hA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(st(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new db(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new db(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(st(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ub(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new ub(!0,i))}markAsPending(e={}){this.status=Hg;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jg(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(st(ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lb,this.errors=null,this._forEachChild(r=>{r.disable(st(ie({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mA(this.value,i)),this._events.next(new jg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(st(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cb,this._forEachChild(i=>{i.enable(st(ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(st(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cb||this.status===Hg)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mA(this.value,t)),this._events.next(new jg(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(st(ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lb:cb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Hg,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=qZ(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new jg(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?lb:this.errors?dA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hg)?Hg:this._anyControlsHaveStatus(dA)?dA:cb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new ub(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new db(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bA(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=aMe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cMe(this._rawAsyncValidators)}},gA=class extends Wg{constructor(e,t,i){super(nB(t),iB(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){oee(this,!0,e),Object.keys(e).forEach(i=>{see(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,st(ie({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new fb(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var KU=class extends gA{};var xA=new Ee("",{factory:()=>wA}),wA="always";function aee(n,e){return[...e.path,n]}function XU(n,e,t=wA){rB(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),uMe(n,e),hMe(n,e),dMe(n,e),lMe(n,e)}function VZ(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),yA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _A(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lMe(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function rB(n,e){let t=tee(n);e.validator!==null?n.setValidators(OZ(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=nee(n);e.asyncValidator!==null?n.setAsyncValidators(OZ(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();_A(e._rawValidators,r),_A(e._rawAsyncValidators,r)}function yA(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=tee(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=nee(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return _A(e._rawValidators,i),_A(e._rawAsyncValidators,i),t}function uMe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&cee(n,e)})}function dMe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&cee(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function cee(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hMe(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function fMe(n,e){n==null,rB(n,e)}function pMe(n,e){return yA(n,e)}function lee(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function mMe(n){return Object.getPrototypeOf(n.constructor)===QU}function gMe(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function uee(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===vA?t=s:mMe(s)?i=s:r=s}),r||i||t||null}function _Me(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function UZ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BZ(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var hb=class extends Wg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(nB(t),iB(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(BZ(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new fb(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UZ(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UZ(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BZ(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yMe=n=>n instanceof hb;var vMe={provide:If,useExisting:Qs(()=>sB)},zZ=Promise.resolve(),sB=(()=>{class n extends If{_changeDetectorRef;callSetDisabledState;control=new hb;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vn;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uee(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lee(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){XU(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){zZ.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&ki(i);zZ.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aee(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(mt(Ef,9),mt(eB,10),mt(tB,10),mt(pb,10),mt(ks,8),mt(xA,8))};static \u0275dir=wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rs([vMe]),hi,hs]})}return n})();var dee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var YU=class extends Wg{constructor(e,t,i){super(nB(t),iB(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){oee(this,!1,e),e.forEach((i,r)=>{see(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],st(ie({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new fb(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var bMe=(()=>{class n extends Ef{callSetDisabledState;get submitted(){return Ci(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Up(()=>this._submittedReactive(),{});_submittedReactive=jn(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(yA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return XU(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){VZ(t.control||null,t,!1),_Me(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,gMe(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new qU(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(VZ(i||null,t),yMe(r)&&(XU(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);fMe(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&pMe(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rB(this.form,this),this._oldForm&&yA(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(mt(eB,10),mt(tB,10),mt(xA,8))};static \u0275dir=wt({type:n,features:[hi,hs]})}return n})();var hee=new Ee("");var xMe={provide:If,useExisting:Qs(()=>oB)},oB=(()=>{class n extends If{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new vn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uee(this,s)}ngOnChanges(t){this._added||this._setUpControl(),lee(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return aee(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(mt(Ef,13),mt(eB,10),mt(tB,10),mt(pb,10),mt(hee,8))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Rs([xMe]),hi,hs]})}return n})();var wMe={provide:Ef,useExisting:Qs(()=>aB)},aB=(()=>{class n extends bMe{form=null;ngSubmit=new vn;get control(){return this.form}static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Nn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rs([wMe]),hi]})}return n})(),EMe={provide:pb,useExisting:Qs(()=>EA),multi:!0};function fee(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function IMe(n){return n.split(":")[0]}var EA=(()=>{class n extends QU{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=H(wr).injector;destroyRef=H(Ts);cdr=H(ks);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ja({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=fee(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=IMe(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Nn("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rs([EMe]),hi]})}return n})(),pee=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(fee(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(mt(nn),mt(Lr),mt(EA,9))};static \u0275dir=wt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),TMe={provide:pb,useExisting:Qs(()=>mee),multi:!0};function HZ(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SMe(n){return n.split(":")[0]}var mee=(()=>{class n extends QU{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);r.push(l)}}else{let o=i.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=SMe(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Nn("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rs([TMe]),hi]})}return n})(),gee=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(HZ(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(HZ(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(mt(nn),mt(Lr),mt(mee,9))};static \u0275dir=wt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var _ee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();function jZ(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var yee=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return jZ(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new gA(r,s)}record(t,i=null){let r=this._reduceControls(t);return new KU(r,i)}control(t,i,r){let s={};return this.useNonNullable?(jZ(i)?s=i:(s.validators=i,s.asyncValidators=r),new hb(t,st(ie({},s),{nonNullable:!0}))):new hb(t,i,r)}array(t,i,r){let s=t.map(o=>this._createControl(o));return new YU(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof hb)return t;if(t instanceof Wg)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xA,useValue:t.callSetDisabledState??wA}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[_ee]})}return n})(),bee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hee,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xA,useValue:t.callSetDisabledState??wA}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[_ee]})}return n})();var xee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var AMe=["*"],MMe=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,DMe=["unscopedContent"],RMe=["text"],PMe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],kMe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var NMe=new Ee("ListOption"),lB=(()=>{class n{_elementRef=H(nn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),uB=(()=>{class n{_elementRef=H(nn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),OMe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),wee=(()=>{class n{_listOption=H(NMe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,hostVars:4,hostBindings:function(i,r){i&2&&ui("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),LMe=(()=>{class n extends wee{static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[hi]})}return n})(),dB=(()=>{class n extends wee{static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275dir=wt({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[hi]})}return n})(),FMe=new Ee("MAT_LIST_CONFIG"),cB=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Rl(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(Rl(t))}_disabled=jn(!1);_defaultOptions=H(FMe,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,hostVars:1,hostBindings:function(i,r){i&2&&Wi("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),VMe=(()=>{class n{_elementRef=H(nn);_ngZone=H(St);_listBase=H(cB,{optional:!0});_platform=H(Ki);_hostElement;_isButtonElement;_noopAnimations=va();_avatars;_icons;set lines(t){this._explicitLines=fg(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=Rl(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(Rl(t))}_disabled=jn(!1);_subscriptions=new Pn;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){H(Po).load(gg);let t=H(P0,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new pf(this,this._ngZone,this._hostElement,this._platform,H(Qt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Jd(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,contentQueries:function(i,r,s){if(i&1&&(Ds(s,LMe,4),Ds(s,dB,4)),i&2){let o;Qi(o=Ji())&&(r._avatars=o),Qi(o=Ji())&&(r._icons=o)}},hostVars:4,hostBindings:function(i,r){i&2&&(Wi("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),ui("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var Eee=(()=>{class n extends cB{static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275cmp=gt({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[Rs([{provide:cB,useExisting:n}]),hi],ngContentSelectors:AMe,decls:1,vars:0,template:function(i,r){i&1&&(fr(),Xn(0))},styles:[MMe],encapsulation:2,changeDetection:0})}return n})(),Iee=(()=>{class n extends VMe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=Rl(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275cmp=gt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,s){if(i&1&&(Ds(s,uB,5),Ds(s,lB,5),Ds(s,OMe,5)),i&2){let o;Qi(o=Ji())&&(r._lines=o),Qi(o=Ji())&&(r._titles=o),Qi(o=Ji())&&(r._meta=o)}},viewQuery:function(i,r){if(i&1&&(Kc(DMe,5),Kc(RMe,5)),i&2){let s;Qi(s=Ji())&&(r._unscopedContent=s.first),Qi(s=Ji())&&(r._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Wi("aria-current",r._getAriaCurrent()),ui("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[hi],ngContentSelectors:kMe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let s=Er();fr(PMe),Xn(0),se(1,"span",1),Xn(2,1),Xn(3,2),se(4,"span",2,0),Nn("cdkObserveContent",function(){return ri(s),si(r._updateItemLines(!0))}),Xn(6,3),ae()(),Xn(7,4),Xn(8,5),Sn(9,"div",3)}},dependencies:[bX],encapsulation:2,changeDetection:0})}return n})();var Tee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return n})();var See=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[xX,_g,xee,Di,uA]})}return n})();function BMe(n,e){if(n&1){let t=Er();se(0,"div",1)(1,"mat-card",2),Sn(2,"div",3),se(3,"div",4),Sn(4,"div",5),se(5,"div",6)(6,"h2",7),Q(7),ae(),se(8,"p",8),Q(9),ae()()(),Sn(10,"mat-divider"),se(11,"mat-card-content")(12,"mat-list")(13,"h3",9),Q(14,"Account Details"),ae(),se(15,"mat-list-item")(16,"mat-icon",10),Q(17,"fingerprint"),ae(),se(18,"div",11),Q(19,"User ID"),ae(),se(20,"div",12),Q(21),ae()(),se(22,"mat-list-item")(23,"mat-icon",10),Q(24,"verified_user"),ae(),se(25,"div",11),Q(26,"Email Verified"),ae(),se(27,"div",13),Q(28),ae()(),se(29,"mat-list-item")(30,"mat-icon",10),Q(31,"calendar_today"),ae(),se(32,"div",11),Q(33,"Last Sign In"),ae(),se(34,"div",13),Q(35),Yc(36,"date"),ae()()(),Sn(37,"mat-divider"),se(38,"div",14)(39,"button",15),Nn("click",function(){ri(t);let r=Gn();return si(r.authService.logout())}),se(40,"mat-icon"),Q(41,"logout"),ae(),Q(42," Sign Out "),ae()()()()()}if(n&2){let t=e.ngIf;Ot(4),Dy("background-image","url("+(t.photoURL||"")+")"),Ot(3),ps(t.displayName),Ot(2),ps(t.email),Ot(12),ps(t.uid),Ot(7),ps(t.emailVerified?"Yes":"No"),Ot(7),ps(ok(36,7,t.metadata.lastSignInTime,"medium"))}}var IA=class n{authService=H(Vs);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-card"],[1,"profile-cover"],[1,"profile-header"],[1,"profile-avatar"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["mat-subheader",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"uid-text"],["matListItemLine",""],[1,"profile-actions"],["mat-stroked-button","","color","warn",3,"click"]],template:function(t,i){t&1&&(Fr(0,BMe,43,10,"div",0),Yc(1,"async")),t&2&&Bn("ngIf",Cu(1,1,i.user$))},dependencies:[Os,sa,Oo,od,vg,No,yg,Fs,cc,See,Eee,Iee,dB,Tee,WU,uB,lB,uA,Eh,bk],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 20px;min-height:calc(100vh - 144px);background-color:#f5f5f5}.profile-card[_ngcontent-%COMP%]{width:100%;max-width:500px;overflow:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014}.profile-cover[_ngcontent-%COMP%]{height:120px;background:linear-gradient(135deg,#3f51b5,#5c6bc0)}.profile-header[_ngcontent-%COMP%]{position:relative;padding:0 24px 24px;text-align:center;margin-top:-60px}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background-size:cover;background-position:center;background-color:#e0e0e0;border:4px solid white;box-shadow:0 2px 10px #0000001a;margin:0 auto 16px}.profile-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.5rem;font-weight:500;color:#333}.profile-email[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem}.uid-text[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;color:#666}.profile-actions[_ngcontent-%COMP%]{padding:24px 16px 8px;display:flex;justify-content:center}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:8px}  .mat-mdc-list-item-icon{color:#757575}"]})};var hB=pt(n=>!!n),zMe=(()=>{class n{router;auth;constructor(t,i){this.router=t,this.auth=i}canActivate=(t,i)=>{let r=t.data.authGuardPipe||(()=>hB);return lT(this.auth).pipe(Hi(1),r(t,i),pt(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(i){return new(i||n)(it(Vr),it(dl))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),mb=n=>({canActivate:[zMe],data:{authGuardPipe:n}});var Cee=n=>Xd(hB,pt(e=>e||n)),Aee=n=>Xd(hB,pt(e=>e&&n||!0));var tte=0,t4=1,nte=2;var n4=1,ite=2,yc=3,Kl=0,ys=1,vc=2,bc=0,Pf=1,i4=2,r4=3,s4=4,rte=5,Rd=100,ste=101,ote=102,ate=103,cte=104,lte=200,ute=201,dte=202,hte=203,XA=204,YA=205,fte=206,pte=207,mte=208,gte=209,_te=210,yte=211,vte=212,bte=213,xte=214,IM=0,TM=1,SM=2,kf=3,CM=4,AM=5,MM=6,DM=7,RM=0,wte=1,Ete=2,Jl=0,Ite=1,Tte=2,Ste=3,Cte=4,Ate=5,Mte=6,Dte=7;var zB=300,Uf=301,Bf=302,PM=303,kM=304,tx=306,QA=1e3,gc=1001,JA=1002,Xs=1003,Rte=1004;var nx=1005;var fo=1006,NM=1007;var Ld=1008;var Ta=1009,o4=1010,a4=1011,g_=1012,OM=1013,Fd=1014,xc=1015,zf=1016,LM=1017,FM=1018,__=1020,c4=35902,l4=35899,u4=1021,d4=1022,zo=1023,s_=1026,y_=1027,h4=1028,VM=1029,UM=1030,BM=1031;var zM=1033,ix=33776,rx=33777,sx=33778,ox=33779,HM=35840,jM=35841,GM=35842,WM=35843,$M=36196,qM=37492,KM=37496,XM=37808,YM=37809,QM=37810,JM=37811,ZM=37812,eD=37813,tD=37814,nD=37815,iD=37816,rD=37817,sD=37818,oD=37819,aD=37820,cD=37821,lD=36492,uD=36494,dD=36495,hD=36283,fD=36284,pD=36285,mD=36286;var Tb=2300,ZA=2301,KA=2302,HB=2400,jB=2401,GB=2402;var Pte=3200,kte=3201;var f4=0,Nte=1,Zl="",uo="srgb",Nf="srgb-linear",Sb="linear",ei="srgb";var Mf=7680;var WB=519,Ote=512,Lte=513,Fte=514,p4=515,Vte=516,Ute=517,Bte=518,zte=519,$B=35044;var m4="300 es",Ia=2e3,Cb=2001;function g4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Ab(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Hte(){let n=Ab("canvas");return n.style.display="block",n}var Mee={},o_=null;function _4(...n){let e="THREE."+n.shift();o_?o_("log",e,...n):console.log(e,...n)}function zt(...n){let e="THREE."+n.shift();o_?o_("warn",e,...n):console.warn(e,...n)}function dn(...n){let e="THREE."+n.shift();o_?o_("error",e,...n):console.error(e,...n)}function a_(...n){let e=n.join(" ");e in Mee||(Mee[e]=!0,zt(...n))}function jte(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}var Xl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var fB=Math.PI/180,eM=180/Math.PI;function v_(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ns[n&255]+ns[n>>8&255]+ns[n>>16&255]+ns[n>>24&255]+"-"+ns[e&255]+ns[e>>8&255]+"-"+ns[e>>16&15|64]+ns[e>>24&255]+"-"+ns[t&63|128]+ns[t>>8&255]+"-"+ns[t>>16&255]+ns[t>>24&255]+ns[i&255]+ns[i>>8&255]+ns[i>>16&255]+ns[i>>24&255]).toLowerCase()}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function HMe(n,e){return(n%e+e)%e}function pB(n,e,t){return(1-t)*n+t*e}function gb(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var qe=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Yl=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],h=s[o+0],p=s[o+1],_=s[o+2],b=s[o+3];if(a<=0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a>=1){e[t+0]=h,e[t+1]=p,e[t+2]=_,e[t+3]=b;return}if(d!==b||c!==h||l!==p||u!==_){let g=c*h+l*p+u*_+d*b;g<0&&(h=-h,p=-p,_=-_,b=-b,g=-g);let v=1-a;if(g<.9995){let P=Math.acos(g),R=Math.sin(P);v=Math.sin(v*P)/R,a=Math.sin(a*P)/R,c=c*v+h*a,l=l*v+p*a,u=u*v+_*a,d=d*v+b*a}else{c=c*v+h*a,l=l*v+p*a,u=u*v+_*a,d=d*v+b*a;let P=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=P,l*=P,u*=P,d*=P}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){let a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],p=s[o+2],_=s[o+3];return e[t]=a*_+u*d+c*p-l*h,e[t+1]=c*_+u*h+l*d-a*p,e[t+2]=l*_+u*p+a*h-c*d,e[t+3]=u*_-a*d-c*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),p=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d-h*p*_;break;case"YXZ":this._x=h*u*d+l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d+h*p*_;break;case"ZXY":this._x=h*u*d-l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d-h*p*_;break;case"ZYX":this._x=h*u*d-l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d+h*p*_;break;case"YZX":this._x=h*u*d+l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d-h*p*_;break;case"XZY":this._x=h*u*d-l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d+h*p*_;break;default:zt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-c)*p,this._y=(s-l)*p,this._z=(o-r)*p}else if(i>a&&i>d){let p=2*Math.sqrt(1+i-a-d);this._w=(u-c)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+l)/p}else if(a>d){let p=2*Math.sqrt(1+a-i-d);this._w=(s-l)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(c+u)/p}else{let p=2*Math.sqrt(1+d-i-a);this._w=(o-r)/p,this._x=(s+l)/p,this._y=(c+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,s=e._z,o=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,s=-s,o=-o,a=-a);let c=1-t;if(a<.9995){let l=Math.acos(a),u=Math.sin(l);c=Math.sin(c*l)/u,t=Math.sin(t*l)/u,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},K=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Dee.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Dee.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return mB.copy(this).projectOnVector(e),this.sub(mB)}reflect(e){return this.sub(mB.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},mB=new K,Dee=new Yl,on=class n{constructor(e,t,i,r,s,o,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],p=i[5],_=i[8],b=r[0],g=r[3],v=r[6],P=r[1],R=r[4],N=r[7],U=r[2],O=r[5],I=r[8];return s[0]=o*b+a*P+c*U,s[3]=o*g+a*R+c*O,s[6]=o*v+a*N+c*I,s[1]=l*b+u*P+d*U,s[4]=l*g+u*R+d*O,s[7]=l*v+u*N+d*I,s[2]=h*b+p*P+_*U,s[5]=h*g+p*R+_*O,s[8]=h*v+p*N+_*I,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,p=l*s-o*c,_=t*d+i*h+r*p;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=d*b,e[1]=(r*l-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=h*b,e[4]=(u*t-r*c)*b,e[5]=(r*s-a*t)*b,e[6]=p*b,e[7]=(i*c-l*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){let c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(gB.makeScale(e,t)),this}rotate(e){return this.premultiply(gB.makeRotation(-e)),this}translate(e,t){return this.premultiply(gB.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},gB=new on,Ree=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Pee=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function jMe(){let n={enabled:!0,workingColorSpace:Nf,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ei&&(r.r=ql(r.r),r.g=ql(r.g),r.b=ql(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ei&&(r.r=r_(r.r),r.g=r_(r.g),r.b=r_(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Zl?Sb:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return a_("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return a_("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Nf]:{primaries:e,whitePoint:i,transfer:Sb,toXYZ:Ree,fromXYZ:Pee,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:uo},outputColorSpaceConfig:{drawingBufferColorSpace:uo}},[uo]:{primaries:e,whitePoint:i,transfer:ei,toXYZ:Ree,fromXYZ:Pee,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:uo}}}),n}var Ln=jMe();function ql(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function r_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var $g,tM=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{$g===void 0&&($g=Ab("canvas")),$g.width=e.width,$g.height=e.height;let r=$g.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=$g}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Ab("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=ql(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ql(t[i]/255)*255):t[i]=ql(t[i]);return{data:t,width:e.width,height:e.height}}else return zt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},GMe=0,c_=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:GMe++}),this.uuid=v_(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(_B(r[o].image)):s.push(_B(r[o]))}else s=_B(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function _B(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?tM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(zt("Texture: Unable to serialize Texture."),{})}var WMe=0,yB=new K,eu=(()=>{class n extends Xl{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=gc,s=gc,o=fo,a=Ld,c=zo,l=Ta,u=n.DEFAULT_ANISOTROPY,d=Zl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WMe++}),this.uuid=v_(),this.name="",this.source=new c_(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(yB).x}get height(){return this.source.getSize(yB).y}get depth(){return this.source.getSize(yB).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){zt(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let s=this[i];if(s===void 0){zt(`Texture.setValues(): property '${i}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==zB)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case QA:t.x=t.x-Math.floor(t.x);break;case gc:t.x=t.x<0?0:1;break;case JA:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case QA:t.y=t.y-Math.floor(t.y);break;case gc:t.y=t.y<0?0:1;break;case JA:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=zB,n.DEFAULT_ANISOTROPY=1,n})(),Zn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],p=c[5],_=c[9],b=c[2],g=c[6],v=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-b)<.01&&Math.abs(_-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+b)<.1&&Math.abs(_+g)<.1&&Math.abs(l+p+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let R=(l+1)/2,N=(p+1)/2,U=(v+1)/2,O=(u+h)/4,I=(d+b)/4,w=(_+g)/4;return R>N&&R>U?R<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(R),r=O/i,s=I/i):N>U?N<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(N),i=O/r,s=w/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=I/s,r=w/s),this.set(i,r,s,t),this}let P=Math.sqrt((g-_)*(g-_)+(d-b)*(d-b)+(h-u)*(h-u));return Math.abs(P)<.001&&(P=1),this.x=(g-_)/P,this.y=(d-b)/P,this.z=(h-u)/P,this.w=Math.acos((l+p+v-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this.w=gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this.w=gn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},nM=class extends Xl{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fo,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Zn(0,0,e,t),this.scissorTest=!1,this.viewport=new Zn(0,0,e,t);let r={width:e,height:t,depth:i.depth},s=new eu(r);this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:fo,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new c_(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},_c=class extends nM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Mb=class extends eu{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=gc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var iM=class extends eu{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=gc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Pd=class{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(xa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(xa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=xa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,xa):xa.fromBufferAttribute(s,o),xa.applyMatrix4(e.matrixWorld),this.expandByPoint(xa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),TA.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),TA.copy(i.boundingBox)),TA.applyMatrix4(e.matrixWorld),this.union(TA)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,xa),xa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_b),SA.subVectors(this.max,_b),qg.subVectors(e.a,_b),Kg.subVectors(e.b,_b),Xg.subVectors(e.c,_b),Id.subVectors(Kg,qg),Td.subVectors(Xg,Kg),Tf.subVectors(qg,Xg);let t=[0,-Id.z,Id.y,0,-Td.z,Td.y,0,-Tf.z,Tf.y,Id.z,0,-Id.x,Td.z,0,-Td.x,Tf.z,0,-Tf.x,-Id.y,Id.x,0,-Td.y,Td.x,0,-Tf.y,Tf.x,0];return!vB(t,qg,Kg,Xg,SA)||(t=[1,0,0,0,1,0,0,0,1],!vB(t,qg,Kg,Xg,SA))?!1:(CA.crossVectors(Id,Td),t=[CA.x,CA.y,CA.z],vB(t,qg,Kg,Xg,SA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Hl=[new K,new K,new K,new K,new K,new K,new K,new K],xa=new K,TA=new Pd,qg=new K,Kg=new K,Xg=new K,Id=new K,Td=new K,Tf=new K,_b=new K,SA=new K,CA=new K,Sf=new K;function vB(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Sf.fromArray(n,s);let a=r.x*Math.abs(Sf.x)+r.y*Math.abs(Sf.y)+r.z*Math.abs(Sf.z),c=e.dot(Sf),l=t.dot(Sf),u=i.dot(Sf);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var $Me=new Pd,yb=new K,bB=new K,Of=class{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):$Me.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;yb.subVectors(e,this.center);let t=yb.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(yb,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bB.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(yb.copy(e.center).add(bB)),this.expandByPoint(yb.copy(e.center).sub(bB))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},jl=new K,xB=new K,AA=new K,Sd=new K,wB=new K,MA=new K,EB=new K,Db=class{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=jl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jl.copy(this.origin).addScaledVector(this.direction,t),jl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){xB.copy(e).add(t).multiplyScalar(.5),AA.copy(t).sub(e).normalize(),Sd.copy(this.origin).sub(xB);let s=e.distanceTo(t)*.5,o=-this.direction.dot(AA),a=Sd.dot(this.direction),c=-Sd.dot(AA),l=Sd.lengthSq(),u=Math.abs(1-o*o),d,h,p,_;if(u>0)if(d=o*c-a,h=o*a-c,_=s*u,d>=0)if(h>=-_)if(h<=_){let b=1/u;d*=b,h*=b,p=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;else h<=-_?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),p=-d*d+h*(h+2*c)+l):h<=_?(d=0,h=Math.min(Math.max(-s,-c),s),p=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),p=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(xB).addScaledVector(AA,h),p}intersectSphere(e,t){jl.subVectors(e.center,this.origin);let i=jl.dot(this.direction),r=jl.dot(jl)-i*i,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,jl)!==null}intersectTriangle(e,t,i,r,s){wB.subVectors(t,e),MA.subVectors(i,e),EB.crossVectors(wB,MA);let o=this.direction.dot(EB),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Sd.subVectors(this.origin,e);let c=a*this.direction.dot(MA.crossVectors(Sd,MA));if(c<0)return null;let l=a*this.direction.dot(wB.cross(Sd));if(l<0||c+l>o)return null;let u=-a*Sd.dot(EB);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ti=class n{constructor(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g)}set(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g){let v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=c,v[2]=l,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=_,v[11]=b,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Yg.setFromMatrixColumn(e,0).length(),s=1/Yg.setFromMatrixColumn(e,1).length(),o=1/Yg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let h=o*u,p=o*d,_=a*u,b=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=p+_*l,t[5]=h-b*l,t[9]=-a*c,t[2]=b-h*l,t[6]=_+p*l,t[10]=o*c}else if(e.order==="YXZ"){let h=c*u,p=c*d,_=l*u,b=l*d;t[0]=h+b*a,t[4]=_*a-p,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-_,t[6]=b+h*a,t[10]=o*c}else if(e.order==="ZXY"){let h=c*u,p=c*d,_=l*u,b=l*d;t[0]=h-b*a,t[4]=-o*d,t[8]=_+p*a,t[1]=p+_*a,t[5]=o*u,t[9]=b-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){let h=o*u,p=o*d,_=a*u,b=a*d;t[0]=c*u,t[4]=_*l-p,t[8]=h*l+b,t[1]=c*d,t[5]=b*l+h,t[9]=p*l-_,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){let h=o*c,p=o*l,_=a*c,b=a*l;t[0]=c*u,t[4]=b-h*d,t[8]=_*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=p*d+_,t[10]=h-b*d}else if(e.order==="XZY"){let h=o*c,p=o*l,_=a*c,b=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+b,t[5]=o*u,t[9]=p*d-_,t[2]=_*d-p,t[6]=a*u,t[10]=b*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qMe,e,KMe)}lookAt(e,t,i){let r=this.elements;return co.subVectors(e,t),co.lengthSq()===0&&(co.z=1),co.normalize(),Cd.crossVectors(i,co),Cd.lengthSq()===0&&(Math.abs(i.z)===1?co.x+=1e-4:co.z+=1e-4,co.normalize(),Cd.crossVectors(i,co)),Cd.normalize(),DA.crossVectors(co,Cd),r[0]=Cd.x,r[4]=DA.x,r[8]=co.x,r[1]=Cd.y,r[5]=DA.y,r[9]=co.y,r[2]=Cd.z,r[6]=DA.z,r[10]=co.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],p=i[13],_=i[2],b=i[6],g=i[10],v=i[14],P=i[3],R=i[7],N=i[11],U=i[15],O=r[0],I=r[4],w=r[8],y=r[12],x=r[1],S=r[5],M=r[9],C=r[13],re=r[2],Y=r[6],le=r[10],fe=r[14],oe=r[3],we=r[7],Ae=r[11],Qe=r[15];return s[0]=o*O+a*x+c*re+l*oe,s[4]=o*I+a*S+c*Y+l*we,s[8]=o*w+a*M+c*le+l*Ae,s[12]=o*y+a*C+c*fe+l*Qe,s[1]=u*O+d*x+h*re+p*oe,s[5]=u*I+d*S+h*Y+p*we,s[9]=u*w+d*M+h*le+p*Ae,s[13]=u*y+d*C+h*fe+p*Qe,s[2]=_*O+b*x+g*re+v*oe,s[6]=_*I+b*S+g*Y+v*we,s[10]=_*w+b*M+g*le+v*Ae,s[14]=_*y+b*C+g*fe+v*Qe,s[3]=P*O+R*x+N*re+U*oe,s[7]=P*I+R*S+N*Y+U*we,s[11]=P*w+R*M+N*le+U*Ae,s[15]=P*y+R*C+N*fe+U*Qe,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],p=e[14],_=e[3],b=e[7],g=e[11],v=e[15];return _*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*p-i*c*p)+b*(+t*c*p-t*l*h+s*o*h-r*o*p+r*l*u-s*c*u)+g*(+t*l*d-t*a*p-s*o*d+i*o*p+s*a*u-i*l*u)+v*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],p=e[11],_=e[12],b=e[13],g=e[14],v=e[15],P=d*g*l-b*h*l+b*c*p-a*g*p-d*c*v+a*h*v,R=_*h*l-u*g*l-_*c*p+o*g*p+u*c*v-o*h*v,N=u*b*l-_*d*l+_*a*p-o*b*p-u*a*v+o*d*v,U=_*d*c-u*b*c-_*a*h+o*b*h+u*a*g-o*d*g,O=t*P+i*R+r*N+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let I=1/O;return e[0]=P*I,e[1]=(b*h*s-d*g*s-b*r*p+i*g*p+d*r*v-i*h*v)*I,e[2]=(a*g*s-b*c*s+b*r*l-i*g*l-a*r*v+i*c*v)*I,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*p-i*c*p)*I,e[4]=R*I,e[5]=(u*g*s-_*h*s+_*r*p-t*g*p-u*r*v+t*h*v)*I,e[6]=(_*c*s-o*g*s-_*r*l+t*g*l+o*r*v-t*c*v)*I,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*p+t*c*p)*I,e[8]=N*I,e[9]=(_*d*s-u*b*s-_*i*p+t*b*p+u*i*v-t*d*v)*I,e[10]=(o*b*s-_*a*s+_*i*l-t*b*l-o*i*v+t*a*v)*I,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*p-t*a*p)*I,e[12]=U*I,e[13]=(u*b*r-_*d*r+_*i*h-t*b*h-u*i*g+t*d*g)*I,e[14]=(_*a*r-o*b*r-_*i*c+t*b*c+o*i*g-t*a*g)*I,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*I,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,p=s*u,_=s*d,b=o*u,g=o*d,v=a*d,P=c*l,R=c*u,N=c*d,U=i.x,O=i.y,I=i.z;return r[0]=(1-(b+v))*U,r[1]=(p+N)*U,r[2]=(_-R)*U,r[3]=0,r[4]=(p-N)*O,r[5]=(1-(h+v))*O,r[6]=(g+P)*O,r[7]=0,r[8]=(_+R)*I,r[9]=(g-P)*I,r[10]=(1-(h+b))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=Yg.set(r[0],r[1],r[2]).length(),o=Yg.set(r[4],r[5],r[6]).length(),a=Yg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],wa.copy(this);let l=1/s,u=1/o,d=1/a;return wa.elements[0]*=l,wa.elements[1]*=l,wa.elements[2]*=l,wa.elements[4]*=u,wa.elements[5]*=u,wa.elements[6]*=u,wa.elements[8]*=d,wa.elements[9]*=d,wa.elements[10]*=d,t.setFromRotationMatrix(wa),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ia,c=!1){let l=this.elements,u=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),_,b;if(c)_=s/(o-s),b=o*s/(o-s);else if(a===Ia)_=-(o+s)/(o-s),b=-2*o*s/(o-s);else if(a===Cb)_=-o/(o-s),b=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=_,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ia,c=!1){let l=this.elements,u=2/(t-e),d=2/(i-r),h=-(t+e)/(t-e),p=-(i+r)/(i-r),_,b;if(c)_=1/(o-s),b=o/(o-s);else if(a===Ia)_=-2/(o-s),b=-(o+s)/(o-s);else if(a===Cb)_=-1/(o-s),b=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=d,l[9]=0,l[13]=p,l[2]=0,l[6]=0,l[10]=_,l[14]=b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Yg=new K,wa=new Ti,qMe=new K(0,0,0),KMe=new K(1,1,1),Cd=new K,DA=new K,co=new K,kee=new Ti,Nee=new Yl,kd=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],p=s[6],_=s[10];switch(i){case"XYZ":this._y=Math.asin(gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(gn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-gn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,_),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,_),this._y=0);break;default:zt("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return kee.makeRotationFromQuaternion(t),this.setFromRotationMatrix(kee,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Nee.setFromEuler(this),this.setFromQuaternion(Nee,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Rb=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},XMe=0,Oee=new K,Qg=new Yl,Gl=new Ti,RA=new K,vb=new K,YMe=new K,QMe=new Yl,Lee=new K(1,0,0),Fee=new K(0,1,0),Vee=new K(0,0,1),Uee={type:"added"},JMe={type:"removed"},Jg={type:"childadded",child:null},IB={type:"childremoved",child:null},tu=(()=>{class n extends Xl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:XMe++}),this.uuid=v_(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new K,i=new kd,r=new Yl,s=new K(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ti},normalMatrix:{value:new on}}),this.matrix=new Ti,this.matrixWorld=new Ti,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Rb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Qg.setFromAxisAngle(t,i),this.quaternion.multiply(Qg),this}rotateOnWorldAxis(t,i){return Qg.setFromAxisAngle(t,i),this.quaternion.premultiply(Qg),this}rotateX(t){return this.rotateOnAxis(Lee,t)}rotateY(t){return this.rotateOnAxis(Fee,t)}rotateZ(t){return this.rotateOnAxis(Vee,t)}translateOnAxis(t,i){return Oee.copy(t).applyQuaternion(this.quaternion),this.position.add(Oee.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Lee,t)}translateY(t){return this.translateOnAxis(Fee,t)}translateZ(t){return this.translateOnAxis(Vee,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Gl.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?RA.copy(t):RA.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),vb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gl.lookAt(vb,RA,this.up):Gl.lookAt(RA,vb,this.up),this.quaternion.setFromRotationMatrix(Gl),s&&(Gl.extractRotation(s.matrixWorld),Qg.setFromRotationMatrix(Gl),this.quaternion.premultiply(Qg.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(dn("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Uee),Jg.child=t,this.dispatchEvent(Jg),Jg.child=null):dn("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(JMe),IB.child=t,this.dispatchEvent(IB),IB.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Gl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Gl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Uee),Jg.child=t,this.dispatchEvent(Jg),Jg.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vb,t,YMe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vb,QMe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(c=>st(ie({},c),{boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(c=>ie({},c)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function o(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];s.animations.push(o(t.animations,l))}}if(i){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),p=a(t.skeletons),_=a(t.animations),b=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new K(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ea=new K,Wl=new K,TB=new K,$l=new K,Zg=new K,e_=new K,Bee=new K,SB=new K,CB=new K,AB=new K,MB=new Zn,DB=new Zn,RB=new Zn,Dd=class n{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ea.subVectors(e,t),r.cross(Ea);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ea.subVectors(r,t),Wl.subVectors(i,t),TB.subVectors(e,t);let o=Ea.dot(Ea),a=Ea.dot(Wl),c=Ea.dot(TB),l=Wl.dot(Wl),u=Wl.dot(TB),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;let h=1/d,p=(l*c-a*u)*h,_=(o*u-a*c)*h;return s.set(1-p-_,_,p)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,$l)===null?!1:$l.x>=0&&$l.y>=0&&$l.x+$l.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,$l)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,$l.x),c.addScaledVector(o,$l.y),c.addScaledVector(a,$l.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return MB.setScalar(0),DB.setScalar(0),RB.setScalar(0),MB.fromBufferAttribute(e,t),DB.fromBufferAttribute(e,i),RB.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(MB,s.x),o.addScaledVector(DB,s.y),o.addScaledVector(RB,s.z),o}static isFrontFacing(e,t,i,r){return Ea.subVectors(i,t),Wl.subVectors(e,t),Ea.cross(Wl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ea.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),Ea.cross(Wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,o,a;Zg.subVectors(r,i),e_.subVectors(s,i),SB.subVectors(e,i);let c=Zg.dot(SB),l=e_.dot(SB);if(c<=0&&l<=0)return t.copy(i);CB.subVectors(e,r);let u=Zg.dot(CB),d=e_.dot(CB);if(u>=0&&d<=u)return t.copy(r);let h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Zg,o);AB.subVectors(e,s);let p=Zg.dot(AB),_=e_.dot(AB);if(_>=0&&p<=_)return t.copy(s);let b=p*l-c*_;if(b<=0&&l>=0&&_<=0)return a=l/(l-_),t.copy(i).addScaledVector(e_,a);let g=u*_-p*d;if(g<=0&&d-u>=0&&p-_>=0)return Bee.subVectors(s,r),a=(d-u)/(d-u+(p-_)),t.copy(r).addScaledVector(Bee,a);let v=1/(g+b+h);return o=b*v,a=h*v,t.copy(i).addScaledVector(Zg,o).addScaledVector(e_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Gte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ad={h:0,s:0,l:0},PA={h:0,s:0,l:0};function PB(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var hn=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=uo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ln.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Ln.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ln.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Ln.workingColorSpace){if(e=HMe(e,1),t=gn(t,0,1),i=gn(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=PB(o,s,e+1/3),this.g=PB(o,s,e),this.b=PB(o,s,e-1/3)}return Ln.colorSpaceToWorking(this,r),this}setStyle(e,t=uo){function i(s){s!==void 0&&parseFloat(s)<1&&zt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:zt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);zt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=uo){let i=Gte[e.toLowerCase()];return i!==void 0?this.setHex(i,t):zt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ql(e.r),this.g=ql(e.g),this.b=ql(e.b),this}copyLinearToSRGB(e){return this.r=r_(e.r),this.g=r_(e.g),this.b=r_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=uo){return Ln.workingToColorSpace(is.copy(this),e),Math.round(gn(is.r*255,0,255))*65536+Math.round(gn(is.g*255,0,255))*256+Math.round(gn(is.b*255,0,255))}getHexString(e=uo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ln.workingColorSpace){Ln.workingToColorSpace(is.copy(this),t);let i=is.r,r=is.g,s=is.b,o=Math.max(i,r,s),a=Math.min(i,r,s),c,l,u=(a+o)/2;if(a===o)c=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Ln.workingColorSpace){return Ln.workingToColorSpace(is.copy(this),t),e.r=is.r,e.g=is.g,e.b=is.b,e}getStyle(e=uo){Ln.workingToColorSpace(is.copy(this),e);let t=is.r,i=is.g,r=is.b;return e!==uo?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ad),this.setHSL(Ad.h+e,Ad.s+t,Ad.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ad),e.getHSL(PA);let i=pB(Ad.h,PA.h,t),r=pB(Ad.s,PA.s,t),s=pB(Ad.l,PA.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},is=new hn;hn.NAMES=Gte;var ZMe=0,Ql=class extends Xl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZMe++}),this.uuid=v_(),this.name="",this.type="Material",this.blending=Pf,this.side=Kl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=XA,this.blendDst=YA,this.blendEquation=Rd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new hn(0,0,0),this.blendAlpha=0,this.depthFunc=kf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WB,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mf,this.stencilZFail=Mf,this.stencilZPass=Mf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){zt(`Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){zt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pf&&(i.blending=this.blending),this.side!==Kl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==XA&&(i.blendSrc=this.blendSrc),this.blendDst!==YA&&(i.blendDst=this.blendDst),this.blendEquation!==Rd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==kf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WB&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Mf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Mf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let c=s[a];delete c.metadata,o.push(c)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Pb=class extends Ql{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new hn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new kd,this.combine=RM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var ur=new K,kA=new qe,eDe=0,ho=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eDe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=$B,this.updateRanges=[],this.gpuType=xc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)kA.fromBufferAttribute(this,t),kA.applyMatrix3(e),this.setXY(t,kA.x,kA.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix3(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix4(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyNormalMatrix(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.transformDirection(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=gb(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=qs(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gb(t,this.array)),t}setX(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gb(t,this.array)),t}setY(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gb(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gb(t,this.array)),t}setW(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array),r=qs(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),i=qs(i,this.array),r=qs(r,this.array),s=qs(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$B&&(e.usage=this.usage),e}};var kb=class extends ho{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Nb=class extends ho{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Ks=class extends ho{constructor(e,t,i){super(new Float32Array(e),t,i)}},tDe=0,Uo=new Ti,kB=new tu,t_=new K,lo=new Pd,bb=new Pd,Dr=new K,po=class n extends Xl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tDe++}),this.uuid=v_(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(g4(e)?Nb:kb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new on().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Uo.makeRotationFromQuaternion(e),this.applyMatrix4(Uo),this}rotateX(e){return Uo.makeRotationX(e),this.applyMatrix4(Uo),this}rotateY(e){return Uo.makeRotationY(e),this.applyMatrix4(Uo),this}rotateZ(e){return Uo.makeRotationZ(e),this.applyMatrix4(Uo),this}translate(e,t,i){return Uo.makeTranslation(e,t,i),this.applyMatrix4(Uo),this}scale(e,t,i){return Uo.makeScale(e,t,i),this.applyMatrix4(Uo),this}lookAt(e){return kB.lookAt(e),kB.updateMatrix(),this.applyMatrix4(kB.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(t_).negate(),this.translate(t_.x,t_.y,t_.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,s=e.length;r<s;r++){let o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ks(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&zt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pd);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){dn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];lo.setFromBufferAttribute(s),this.morphTargetsRelative?(Dr.addVectors(this.boundingBox.min,lo.min),this.boundingBox.expandByPoint(Dr),Dr.addVectors(this.boundingBox.max,lo.max),this.boundingBox.expandByPoint(Dr)):(this.boundingBox.expandByPoint(lo.min),this.boundingBox.expandByPoint(lo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&dn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Of);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){dn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){let i=this.boundingSphere.center;if(lo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];bb.setFromBufferAttribute(a),this.morphTargetsRelative?(Dr.addVectors(lo.min,bb.min),lo.expandByPoint(Dr),Dr.addVectors(lo.max,bb.max),lo.expandByPoint(Dr)):(lo.expandByPoint(bb.min),lo.expandByPoint(bb.max))}lo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Dr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Dr));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Dr.fromBufferAttribute(a,l),c&&(t_.fromBufferAttribute(e,l),Dr.add(t_)),r=Math.max(r,i.distanceToSquared(Dr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&dn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){dn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ho(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],c=[];for(let w=0;w<i.count;w++)a[w]=new K,c[w]=new K;let l=new K,u=new K,d=new K,h=new qe,p=new qe,_=new qe,b=new K,g=new K;function v(w,y,x){l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,y),d.fromBufferAttribute(i,x),h.fromBufferAttribute(s,w),p.fromBufferAttribute(s,y),_.fromBufferAttribute(s,x),u.sub(l),d.sub(l),p.sub(h),_.sub(h);let S=1/(p.x*_.y-_.x*p.y);isFinite(S)&&(b.copy(u).multiplyScalar(_.y).addScaledVector(d,-p.y).multiplyScalar(S),g.copy(d).multiplyScalar(p.x).addScaledVector(u,-_.x).multiplyScalar(S),a[w].add(b),a[y].add(b),a[x].add(b),c[w].add(g),c[y].add(g),c[x].add(g))}let P=this.groups;P.length===0&&(P=[{start:0,count:e.count}]);for(let w=0,y=P.length;w<y;++w){let x=P[w],S=x.start,M=x.count;for(let C=S,re=S+M;C<re;C+=3)v(e.getX(C+0),e.getX(C+1),e.getX(C+2))}let R=new K,N=new K,U=new K,O=new K;function I(w){U.fromBufferAttribute(r,w),O.copy(U);let y=a[w];R.copy(y),R.sub(U.multiplyScalar(U.dot(y))).normalize(),N.crossVectors(O,y);let S=N.dot(c[w])<0?-1:1;o.setXYZW(w,R.x,R.y,R.z,S)}for(let w=0,y=P.length;w<y;++w){let x=P[w],S=x.start,M=x.count;for(let C=S,re=S+M;C<re;C+=3)I(e.getX(C+0)),I(e.getX(C+1)),I(e.getX(C+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ho(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);let r=new K,s=new K,o=new K,a=new K,c=new K,l=new K,u=new K,d=new K;if(e)for(let h=0,p=e.count;h<p;h+=3){let _=e.getX(h+0),b=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,b),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Dr.fromBufferAttribute(e,t),Dr.normalize(),e.setXYZ(t,Dr.x,Dr.y,Dr.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u),p=0,_=0;for(let b=0,g=c.length;b<g;b++){a.isInterleavedBufferAttribute?p=c[b]*a.data.stride+a.offset:p=c[b]*u;for(let v=0;v<u;v++)h[_++]=l[p++]}return new ho(h,u,d)}if(this.index===null)return zt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,i);t.setAttribute(a,l)}let s=this.morphAttributes;for(let a in s){let c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){let h=l[u],p=e(h,i);c.push(p)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,c=o.length;a<c;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let c in i){let l=i[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},s=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){let p=l[d];u.push(p.toJSON(e.data))}u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let s=e.morphAttributes;for(let l in s){let u=[],d=s[l];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},zee=new Ti,Cf=new Db,NA=new Of,Hee=new K,OA=new K,LA=new K,FA=new K,NB=new K,VA=new K,jee=new K,UA=new K,mo=class extends tu{constructor(e=new po,t=new Pb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){VA.set(0,0,0);for(let c=0,l=s.length;c<l;c++){let u=a[c],d=s[c];u!==0&&(NB.fromBufferAttribute(d,e),o?VA.addScaledVector(NB,u):VA.addScaledVector(NB.sub(t),u))}t.add(VA)}return t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),NA.copy(i.boundingSphere),NA.applyMatrix4(s),Cf.copy(e.ray).recast(e.near),!(NA.containsPoint(Cf.origin)===!1&&(Cf.intersectSphere(NA,Hee)===null||Cf.origin.distanceToSquared(Hee)>(e.far-e.near)**2))&&(zee.copy(s).invert(),Cf.copy(e.ray).applyMatrix4(zee),!(i.boundingBox!==null&&Cf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Cf)))}_computeIntersections(e,t,i){let r,s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,b=h.length;_<b;_++){let g=h[_],v=o[g.materialIndex],P=Math.max(g.start,p.start),R=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let N=P,U=R;N<U;N+=3){let O=a.getX(N),I=a.getX(N+1),w=a.getX(N+2);r=BA(this,v,e,i,l,u,d,O,I,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,p.start),b=Math.min(a.count,p.start+p.count);for(let g=_,v=b;g<v;g+=3){let P=a.getX(g),R=a.getX(g+1),N=a.getX(g+2);r=BA(this,o,e,i,l,u,d,P,R,N),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,b=h.length;_<b;_++){let g=h[_],v=o[g.materialIndex],P=Math.max(g.start,p.start),R=Math.min(c.count,Math.min(g.start+g.count,p.start+p.count));for(let N=P,U=R;N<U;N+=3){let O=N,I=N+1,w=N+2;r=BA(this,v,e,i,l,u,d,O,I,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,p.start),b=Math.min(c.count,p.start+p.count);for(let g=_,v=b;g<v;g+=3){let P=g,R=g+1,N=g+2;r=BA(this,o,e,i,l,u,d,P,R,N),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function nDe(n,e,t,i,r,s,o,a){let c;if(e.side===ys?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side===Kl,a),c===null)return null;UA.copy(a),UA.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(UA);return l<t.near||l>t.far?null:{distance:l,point:UA.clone(),object:n}}function BA(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,OA),n.getVertexPosition(c,LA),n.getVertexPosition(l,FA);let u=nDe(n,e,t,i,OA,LA,FA,jee);if(u){let d=new K;Dd.getBarycoord(jee,OA,LA,FA,d),r&&(u.uv=Dd.getInterpolatedAttribute(r,a,c,l,d,new qe)),s&&(u.uv1=Dd.getInterpolatedAttribute(s,a,c,l,d,new qe)),o&&(u.normal=Dd.getInterpolatedAttribute(o,a,c,l,d,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new K,materialIndex:0};Dd.getNormal(OA,LA,FA,h.normal),u.face=h,u.barycoord=d}return u}var l_=class n extends po{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let c=[],l=[],u=[],d=[],h=0,p=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ks(l,3)),this.setAttribute("normal",new Ks(u,3)),this.setAttribute("uv",new Ks(d,2));function _(b,g,v,P,R,N,U,O,I,w,y){let x=N/I,S=U/w,M=N/2,C=U/2,re=O/2,Y=I+1,le=w+1,fe=0,oe=0,we=new K;for(let Ae=0;Ae<le;Ae++){let Qe=Ae*S-C;for(let ut=0;ut<Y;ut++){let rt=ut*x-M;we[b]=rt*P,we[g]=Qe*R,we[v]=re,l.push(we.x,we.y,we.z),we[b]=0,we[g]=0,we[v]=O>0?1:-1,u.push(we.x,we.y,we.z),d.push(ut/I),d.push(1-Ae/w),fe+=1}}for(let Ae=0;Ae<w;Ae++)for(let Qe=0;Qe<I;Qe++){let ut=h+Qe+Y*Ae,rt=h+Qe+Y*(Ae+1),Vt=h+(Qe+1)+Y*(Ae+1),Ht=h+(Qe+1)+Y*Ae;c.push(ut,rt,Ht),c.push(rt,Vt,Ht),oe+=6}a.addGroup(p,oe,y),p+=oe,h+=fe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Hf(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(zt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function rs(n){let e={};for(let t=0;t<n.length;t++){let i=Hf(n[t]);for(let r in i)e[r]=i[r]}return e}function iDe(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function y4(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ln.workingColorSpace}var Wte={clone:Hf,merge:rs},rDe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sDe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Bo=class extends Ql{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rDe,this.fragmentShader=sDe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hf(e.uniforms),this.uniformsGroups=iDe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Ob=class extends tu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ti,this.projectionMatrix=new Ti,this.projectionMatrixInverse=new Ti,this.coordinateSystem=Ia,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Md=new K,Gee=new qe,Wee=new qe,zr=class extends Ob{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=eM*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(fB*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return eM*2*Math.atan(Math.tan(fB*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Md.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Md.x,Md.y).multiplyScalar(-e/Md.z),Md.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Md.x,Md.y).multiplyScalar(-e/Md.z)}getViewSize(e,t){return this.getViewBounds(e,Gee,Wee),t.subVectors(Wee,Gee)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(fB*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},n_=-90,i_=1,rM=class extends tu{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new zr(n_,i_,e,t);r.layers=this.layers,this.add(r);let s=new zr(n_,i_,e,t);s.layers=this.layers,this.add(s);let o=new zr(n_,i_,e,t);o.layers=this.layers,this.add(o);let a=new zr(n_,i_,e,t);a.layers=this.layers,this.add(a);let c=new zr(n_,i_,e,t);c.layers=this.layers,this.add(c);let l=new zr(n_,i_,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(let l of t)this.remove(l);if(e===Ia)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Cb)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;let b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}},Lb=class extends eu{constructor(e=[],t=Uf,i,r,s,o,a,c,l,u){super(e,t,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},sM=class extends _c{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Lb(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new l_(5,5,5),s=new Bo({name:"CubemapFromEquirect",uniforms:Hf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ys,blending:bc});s.uniforms.tEquirect.value=t;let o=new mo(r,s),a=t.minFilter;return t.minFilter===Ld&&(t.minFilter=fo),new rM(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}},Df=class extends tu{constructor(){super(),this.isGroup=!0,this.type="Group"}},oDe={type:"move"},u_=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Df,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Df,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Df,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let b of e.hand.values()){let g=t.getJointPose(b,i),v=this._getHandJoint(l,b);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,_=.005;l.inputState.pinching&&h>p+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=p-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(oDe)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Df;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var Fb=class extends tu{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new kd,this.environmentIntensity=1,this.environmentRotation=new kd,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var oM=class extends eu{constructor(e=null,t=1,i=1,r,s,o,a,c,l=Xs,u=Xs,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var OB=new K,aDe=new K,cDe=new on,mc=class{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=OB.subVectors(i,t).cross(aDe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(OB),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||cDe.getNormalMatrix(e),r=this.coplanarPoint(OB).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Af=new Of,lDe=new qe(.5,.5),zA=new K,d_=class{constructor(e=new mc,t=new mc,i=new mc,r=new mc,s=new mc,o=new mc){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ia,i=!1){let r=this.planes,s=e.elements,o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],d=s[5],h=s[6],p=s[7],_=s[8],b=s[9],g=s[10],v=s[11],P=s[12],R=s[13],N=s[14],U=s[15];if(r[0].setComponents(l-o,p-u,v-_,U-P).normalize(),r[1].setComponents(l+o,p+u,v+_,U+P).normalize(),r[2].setComponents(l+a,p+d,v+b,U+R).normalize(),r[3].setComponents(l-a,p-d,v-b,U-R).normalize(),i)r[4].setComponents(c,h,g,N).normalize(),r[5].setComponents(l-c,p-h,v-g,U-N).normalize();else if(r[4].setComponents(l-c,p-h,v-g,U-N).normalize(),t===Ia)r[5].setComponents(l+c,p+h,v+g,U+N).normalize();else if(t===Cb)r[5].setComponents(c,h,g,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Af.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Af.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Af)}intersectsSprite(e){Af.center.set(0,0,0);let t=lDe.distanceTo(e.center);return Af.radius=.7071067811865476+t,Af.applyMatrix4(e.matrixWorld),this.intersectsSphere(Af)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(zA.x=r.normal.x>0?e.max.x:e.min.x,zA.y=r.normal.y>0?e.max.y:e.min.y,zA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zA)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var h_=class extends Ql{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new hn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},$ee=new Ti,qB=new Db,HA=new Of,jA=new K,Vb=class extends tu{constructor(e=new po,t=new h_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),HA.copy(i.boundingSphere),HA.applyMatrix4(r),HA.radius+=s,e.ray.intersectsSphere(HA)===!1)return;$ee.copy(r).invert(),qB.copy(e.ray).applyMatrix4($ee);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(l!==null){let h=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);for(let _=h,b=p;_<b;_++){let g=l.getX(_);jA.fromBufferAttribute(d,g),qee(jA,g,c,r,e,t,this)}}else{let h=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let _=h,b=p;_<b;_++)jA.fromBufferAttribute(d,_),qee(jA,_,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function qee(n,e,t,i,r,s,o){let a=qB.distanceSqToPoint(n);if(a<t){let c=new K;qB.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}var Ub=class extends eu{constructor(e,t,i=Fd,r,s,o,a=Xs,c=Xs,l,u=s_,d=1){if(u!==s_&&u!==y_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:t,depth:d};super(h,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new c_(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},Bb=class extends eu{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}};var go=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){zt("Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,s=i.length,o;t?o=t:o=e*i[s-1];let a=0,c=s-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);let u=i[r],h=i[r+1]-u,p=(o-u)/h;return(r+p)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);let o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new qe:new K);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new K,r=[],s=[],o=[],a=new K,c=new Ti;for(let p=0;p<=e;p++){let _=p/e;r[p]=this.getTangentAt(_,new K)}s[0]=new K,o[0]=new K;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();let _=Math.acos(gn(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(c.makeRotationAxis(a,_))}o[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(gn(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],p*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},f_=class extends go{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new qe){let i=t,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);let a=this.aStartAngle+e*s,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=c-this.aX,p=l-this.aY;c=h*u-p*d+this.aX,l=h*d+p*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},aM=class extends f_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}};function v4(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,d){let h=(o-s)/l-(a-s)/(l+u)+(a-o)/u,p=(a-o)/u-(c-o)/(u+d)+(c-a)/d;h*=u,p*=u,r(o,a,h,p)},calc:function(s){let o=s*s,a=o*s;return n+e*s+t*o+i*a}}}var GA=new K,LB=new v4,FB=new v4,VB=new v4,cM=class extends go{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){let i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=r[(a-1)%s]:(GA.subVectors(r[0],r[1]).add(r[0]),l=GA);let d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(GA.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=GA),this.curveType==="centripetal"||this.curveType==="chordal"){let p=this.curveType==="chordal"?.5:.25,_=Math.pow(l.distanceToSquared(d),p),b=Math.pow(d.distanceToSquared(h),p),g=Math.pow(h.distanceToSquared(u),p);b<1e-4&&(b=1),_<1e-4&&(_=b),g<1e-4&&(g=b),LB.initNonuniformCatmullRom(l.x,d.x,h.x,u.x,_,b,g),FB.initNonuniformCatmullRom(l.y,d.y,h.y,u.y,_,b,g),VB.initNonuniformCatmullRom(l.z,d.z,h.z,u.z,_,b,g)}else this.curveType==="catmullrom"&&(LB.initCatmullRom(l.x,d.x,h.x,u.x,this.tension),FB.initCatmullRom(l.y,d.y,h.y,u.y,this.tension),VB.initCatmullRom(l.z,d.z,h.z,u.z,this.tension));return i.set(LB.calc(c),FB.calc(c),VB.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function Kee(n,e,t,i,r){let s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function uDe(n,e){let t=1-n;return t*t*e}function dDe(n,e){return 2*(1-n)*n*e}function hDe(n,e){return n*n*e}function Eb(n,e,t,i){return uDe(n,e)+dDe(n,t)+hDe(n,i)}function fDe(n,e){let t=1-n;return t*t*t*e}function pDe(n,e){let t=1-n;return 3*t*t*n*e}function mDe(n,e){return 3*(1-n)*n*n*e}function gDe(n,e){return n*n*n*e}function Ib(n,e,t,i,r){return fDe(n,e)+pDe(n,t)+mDe(n,i)+gDe(n,r)}var zb=class extends go{constructor(e=new qe,t=new qe,i=new qe,r=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new qe){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ib(e,r.x,s.x,o.x,a.x),Ib(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},lM=class extends go{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ib(e,r.x,s.x,o.x,a.x),Ib(e,r.y,s.y,o.y,a.y),Ib(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Hb=class extends go{constructor(e=new qe,t=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new qe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},uM=class extends go{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},jb=class extends go{constructor(e=new qe,t=new qe,i=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new qe){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Eb(e,r.x,s.x,o.x),Eb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},dM=class extends go{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Eb(e,r.x,s.x,o.x),Eb(e,r.y,s.y,o.y),Eb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Gb=class extends go{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new qe){let i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(Kee(a,c.x,l.x,u.x,d.x),Kee(a,c.y,l.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new qe().fromArray(r))}return this}},KB=Object.freeze({__proto__:null,ArcCurve:aM,CatmullRomCurve3:cM,CubicBezierCurve:zb,CubicBezierCurve3:lM,EllipseCurve:f_,LineCurve:Hb,LineCurve3:uM,QuadraticBezierCurve:jb,QuadraticBezierCurve3:dM,SplineCurve:Gb}),hM=class extends go{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new KB[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=i){let o=r[s]-i,a=this.curves[s],c=a.getLength(),l=c===0?0:1-o/c;return a.getPointAt(l,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,s=this.curves;r<s.length;r++){let o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){let u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new KB[r.type]().fromJSON(r))}return this}},Wb=class extends hM{constructor(e){super(),this.type="Path",this.currentPoint=new qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Hb(this.currentPoint.clone(),new qe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let s=new jb(this.currentPoint.clone(),new qe(e,t),new qe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){let a=new zb(this.currentPoint.clone(),new qe(e,t),new qe(i,r),new qe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new Gb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){let l=new f_(e,t,i,r,s,o,a,c);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Lf=class extends Wb{constructor(e){super(e),this.uuid=v_(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new Wb().fromJSON(r))}return this}};function _De(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,s=$te(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;let a,c,l;if(i&&(s=wDe(n,e,s,t)),n.length>80*t){a=n[0],c=n[1];let u=a,d=c;for(let h=t;h<r;h+=t){let p=n[h],_=n[h+1];p<a&&(a=p),_<c&&(c=_),p>u&&(u=p),_>d&&(d=_)}l=Math.max(u-a,d-c),l=l!==0?32767/l:0}return $b(s,o,t,a,c,l,0),o}function $te(n,e,t,i,r){let s;if(r===kDe(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=Xee(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=Xee(o/i|0,n[o],n[o+1],s);return s&&p_(s,s.next)&&(Kb(s),s=s.next),s}function Ff(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(p_(t,t.next)||Pi(t.prev,t,t.next)===0)){if(Kb(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function $b(n,e,t,i,r,s,o){if(!n)return;!o&&s&&CDe(n,i,r,s);let a=n;for(;n.prev!==n.next;){let c=n.prev,l=n.next;if(s?vDe(n,i,r,s):yDe(n)){e.push(c.i,n.i,l.i),Kb(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=bDe(Ff(n),e),$b(n,e,t,i,r,s,2)):o===2&&xDe(n,e,t,i,r,s):$b(Ff(n),e,t,i,r,s,1);break}}}function yDe(n){let e=n.prev,t=n,i=n.next;if(Pi(e,t,i)>=0)return!1;let r=e.x,s=t.x,o=i.x,a=e.y,c=t.y,l=i.y,u=Math.min(r,s,o),d=Math.min(a,c,l),h=Math.max(r,s,o),p=Math.max(a,c,l),_=i.next;for(;_!==e;){if(_.x>=u&&_.x<=h&&_.y>=d&&_.y<=p&&wb(r,a,s,c,o,l,_.x,_.y)&&Pi(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function vDe(n,e,t,i){let r=n.prev,s=n,o=n.next;if(Pi(r,s,o)>=0)return!1;let a=r.x,c=s.x,l=o.x,u=r.y,d=s.y,h=o.y,p=Math.min(a,c,l),_=Math.min(u,d,h),b=Math.max(a,c,l),g=Math.max(u,d,h),v=XB(p,_,e,t,i),P=XB(b,g,e,t,i),R=n.prevZ,N=n.nextZ;for(;R&&R.z>=v&&N&&N.z<=P;){if(R.x>=p&&R.x<=b&&R.y>=_&&R.y<=g&&R!==r&&R!==o&&wb(a,u,c,d,l,h,R.x,R.y)&&Pi(R.prev,R,R.next)>=0||(R=R.prevZ,N.x>=p&&N.x<=b&&N.y>=_&&N.y<=g&&N!==r&&N!==o&&wb(a,u,c,d,l,h,N.x,N.y)&&Pi(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;R&&R.z>=v;){if(R.x>=p&&R.x<=b&&R.y>=_&&R.y<=g&&R!==r&&R!==o&&wb(a,u,c,d,l,h,R.x,R.y)&&Pi(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;N&&N.z<=P;){if(N.x>=p&&N.x<=b&&N.y>=_&&N.y<=g&&N!==r&&N!==o&&wb(a,u,c,d,l,h,N.x,N.y)&&Pi(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function bDe(n,e){let t=n;do{let i=t.prev,r=t.next.next;!p_(i,r)&&Kte(i,t,t.next,r)&&qb(i,r)&&qb(r,i)&&(e.push(i.i,t.i,r.i),Kb(t),Kb(t.next),t=n=r),t=t.next}while(t!==n);return Ff(t)}function xDe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&DDe(o,a)){let c=Xte(o,a);o=Ff(o,o.next),c=Ff(c,c.next),$b(o,e,t,i,r,s,0),$b(c,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function wDe(n,e,t,i){let r=[];for(let s=0,o=e.length;s<o;s++){let a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=$te(n,a,c,i,!1);l===l.next&&(l.steiner=!0),r.push(MDe(l))}r.sort(EDe);for(let s=0;s<r.length;s++)t=IDe(r[s],t);return t}function EDe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function IDe(n,e){let t=TDe(n,e);if(!t)return e;let i=Xte(t,n);return Ff(i,i.next),Ff(t,t.next)}function TDe(n,e){let t=e,i=n.x,r=n.y,s=-1/0,o;if(p_(n,t))return t;do{if(p_(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;let a=o,c=o.x,l=o.y,u=1/0;t=o;do{if(i>=t.x&&t.x>=c&&i!==t.x&&qte(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)){let d=Math.abs(r-t.y)/(i-t.x);qb(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&SDe(o,t)))&&(o=t,u=d)}t=t.next}while(t!==a);return o}function SDe(n,e){return Pi(n.prev,n,e.prev)<0&&Pi(e.next,n,n.next)<0}function CDe(n,e,t,i){let r=n;do r.z===0&&(r.z=XB(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,ADe(r)}function ADe(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let l=0;l<t&&(a++,o=o.nextZ,!!o);l++);let c=t;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function XB(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function MDe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qte(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function wb(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&qte(n,e,t,i,r,s,o,a)}function DDe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!RDe(n,e)&&(qb(n,e)&&qb(e,n)&&PDe(n,e)&&(Pi(n.prev,n,e.prev)||Pi(n,e.prev,e))||p_(n,e)&&Pi(n.prev,n,n.next)>0&&Pi(e.prev,e,e.next)>0)}function Pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function p_(n,e){return n.x===e.x&&n.y===e.y}function Kte(n,e,t,i){let r=$A(Pi(n,e,t)),s=$A(Pi(n,e,i)),o=$A(Pi(t,i,n)),a=$A(Pi(t,i,e));return!!(r!==s&&o!==a||r===0&&WA(n,t,e)||s===0&&WA(n,i,e)||o===0&&WA(t,n,i)||a===0&&WA(t,e,i))}function WA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function $A(n){return n>0?1:n<0?-1:0}function RDe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Kte(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function qb(n,e){return Pi(n.prev,n,n.next)<0?Pi(n,e,n.next)>=0&&Pi(n,n.prev,e)>=0:Pi(n,e,n.prev)<0||Pi(n,n.next,e)<0}function PDe(n,e){let t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Xte(n,e){let t=YB(n.i,n.x,n.y),i=YB(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Xee(n,e,t,i){let r=YB(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Kb(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YB(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function kDe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}var QB=class{static triangulate(e,t,i=2){return _De(e,t,i)}},Rf=class n{static area(e){let t=e.length,i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],s=[];Yee(e),Qee(i,e);let o=e.length;t.forEach(Yee);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Qee(i,t[c]);let a=QB.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}};function Yee(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Qee(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var Xb=class n extends po{constructor(e=new Lf([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];o(l)}this.setAttribute("position",new Ks(r,3)),this.setAttribute("uv",new Ks(s,2)),this.computeVertexNormals();function o(a){let c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:p-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,v=t.extrudePath,P=t.UVGenerator!==void 0?t.UVGenerator:NDe,R,N=!1,U,O,I,w;v&&(R=v.getSpacedPoints(u),N=!0,h=!1,U=v.computeFrenetFrames(u,!1),O=new K,I=new K,w=new K),h||(g=0,p=0,_=0,b=0);let y=a.extractPoints(l),x=y.shape,S=y.holes;if(!Rf.isClockWise(x)){x=x.reverse();for(let ye=0,B=S.length;ye<B;ye++){let be=S[ye];Rf.isClockWise(be)&&(S[ye]=be.reverse())}}function C(ye){let be=10000000000000001e-36,Se=ye[0];for(let Pe=1;Pe<=ye.length;Pe++){let xe=Pe%ye.length,Fe=ye[xe],Ce=Fe.x-Se.x,Ge=Fe.y-Se.y,z=Ce*Ce+Ge*Ge,k=Math.max(Math.abs(Fe.x),Math.abs(Fe.y),Math.abs(Se.x),Math.abs(Se.y)),X=be*k*k;if(z<=X){ye.splice(xe,1),Pe--;continue}Se=Fe}}C(x),S.forEach(C);let re=S.length,Y=x;for(let ye=0;ye<re;ye++){let B=S[ye];x=x.concat(B)}function le(ye,B,be){return B||dn("ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(B,be)}let fe=x.length;function oe(ye,B,be){let Se,Pe,xe,Fe=ye.x-B.x,Ce=ye.y-B.y,Ge=be.x-ye.x,z=be.y-ye.y,k=Fe*Fe+Ce*Ce,X=Fe*z-Ce*Ge;if(Math.abs(X)>Number.EPSILON){let ce=Math.sqrt(k),he=Math.sqrt(Ge*Ge+z*z),J=B.x-Ce/ce,Ze=B.y+Fe/ce,Ue=be.x-z/he,dt=be.y+Ge/he,nt=((Ue-J)*z-(dt-Ze)*Ge)/(Fe*z-Ce*Ge);Se=J+Fe*nt-ye.x,Pe=Ze+Ce*nt-ye.y;let _e=Se*Se+Pe*Pe;if(_e<=2)return new qe(Se,Pe);xe=Math.sqrt(_e/2)}else{let ce=!1;Fe>Number.EPSILON?Ge>Number.EPSILON&&(ce=!0):Fe<-Number.EPSILON?Ge<-Number.EPSILON&&(ce=!0):Math.sign(Ce)===Math.sign(z)&&(ce=!0),ce?(Se=-Ce,Pe=Fe,xe=Math.sqrt(k)):(Se=Fe,Pe=Ce,xe=Math.sqrt(k/2))}return new qe(Se/xe,Pe/xe)}let we=[];for(let ye=0,B=Y.length,be=B-1,Se=ye+1;ye<B;ye++,be++,Se++)be===B&&(be=0),Se===B&&(Se=0),we[ye]=oe(Y[ye],Y[be],Y[Se]);let Ae=[],Qe,ut=we.concat();for(let ye=0,B=re;ye<B;ye++){let be=S[ye];Qe=[];for(let Se=0,Pe=be.length,xe=Pe-1,Fe=Se+1;Se<Pe;Se++,xe++,Fe++)xe===Pe&&(xe=0),Fe===Pe&&(Fe=0),Qe[Se]=oe(be[Se],be[xe],be[Fe]);Ae.push(Qe),ut=ut.concat(Qe)}let rt;if(g===0)rt=Rf.triangulateShape(Y,S);else{let ye=[],B=[];for(let be=0;be<g;be++){let Se=be/g,Pe=p*Math.cos(Se*Math.PI/2),xe=_*Math.sin(Se*Math.PI/2)+b;for(let Fe=0,Ce=Y.length;Fe<Ce;Fe++){let Ge=le(Y[Fe],we[Fe],xe);ft(Ge.x,Ge.y,-Pe),Se===0&&ye.push(Ge)}for(let Fe=0,Ce=re;Fe<Ce;Fe++){let Ge=S[Fe];Qe=Ae[Fe];let z=[];for(let k=0,X=Ge.length;k<X;k++){let ce=le(Ge[k],Qe[k],xe);ft(ce.x,ce.y,-Pe),Se===0&&z.push(ce)}Se===0&&B.push(z)}}rt=Rf.triangulateShape(ye,B)}let Vt=rt.length,Ht=_+b;for(let ye=0;ye<fe;ye++){let B=h?le(x[ye],ut[ye],Ht):x[ye];N?(I.copy(U.normals[0]).multiplyScalar(B.x),O.copy(U.binormals[0]).multiplyScalar(B.y),w.copy(R[0]).add(I).add(O),ft(w.x,w.y,w.z)):ft(B.x,B.y,0)}for(let ye=1;ye<=u;ye++)for(let B=0;B<fe;B++){let be=h?le(x[B],ut[B],Ht):x[B];N?(I.copy(U.normals[ye]).multiplyScalar(be.x),O.copy(U.binormals[ye]).multiplyScalar(be.y),w.copy(R[ye]).add(I).add(O),ft(w.x,w.y,w.z)):ft(be.x,be.y,d/u*ye)}for(let ye=g-1;ye>=0;ye--){let B=ye/g,be=p*Math.cos(B*Math.PI/2),Se=_*Math.sin(B*Math.PI/2)+b;for(let Pe=0,xe=Y.length;Pe<xe;Pe++){let Fe=le(Y[Pe],we[Pe],Se);ft(Fe.x,Fe.y,d+be)}for(let Pe=0,xe=S.length;Pe<xe;Pe++){let Fe=S[Pe];Qe=Ae[Pe];for(let Ce=0,Ge=Fe.length;Ce<Ge;Ce++){let z=le(Fe[Ce],Qe[Ce],Se);N?ft(z.x,z.y+R[u-1].y,R[u-1].x+be):ft(z.x,z.y,d+be)}}}ue(),me();function ue(){let ye=r.length/3;if(h){let B=0,be=fe*B;for(let Se=0;Se<Vt;Se++){let Pe=rt[Se];tt(Pe[2]+be,Pe[1]+be,Pe[0]+be)}B=u+g*2,be=fe*B;for(let Se=0;Se<Vt;Se++){let Pe=rt[Se];tt(Pe[0]+be,Pe[1]+be,Pe[2]+be)}}else{for(let B=0;B<Vt;B++){let be=rt[B];tt(be[2],be[1],be[0])}for(let B=0;B<Vt;B++){let be=rt[B];tt(be[0]+fe*u,be[1]+fe*u,be[2]+fe*u)}}i.addGroup(ye,r.length/3-ye,0)}function me(){let ye=r.length/3,B=0;Xe(Y,B),B+=Y.length;for(let be=0,Se=S.length;be<Se;be++){let Pe=S[be];Xe(Pe,B),B+=Pe.length}i.addGroup(ye,r.length/3-ye,1)}function Xe(ye,B){let be=ye.length;for(;--be>=0;){let Se=be,Pe=be-1;Pe<0&&(Pe=ye.length-1);for(let xe=0,Fe=u+g*2;xe<Fe;xe++){let Ce=fe*xe,Ge=fe*(xe+1),z=B+Se+Ce,k=B+Pe+Ce,X=B+Pe+Ge,ce=B+Se+Ge;jt(z,k,X,ce)}}}function ft(ye,B,be){c.push(ye),c.push(B),c.push(be)}function tt(ye,B,be){In(ye),In(B),In(be);let Se=r.length/3,Pe=P.generateTopUV(i,r,Se-3,Se-2,Se-1);Tt(Pe[0]),Tt(Pe[1]),Tt(Pe[2])}function jt(ye,B,be,Se){In(ye),In(B),In(Se),In(B),In(be),In(Se);let Pe=r.length/3,xe=P.generateSideWallUV(i,r,Pe-6,Pe-3,Pe-2,Pe-1);Tt(xe[0]),Tt(xe[1]),Tt(xe[3]),Tt(xe[1]),Tt(xe[2]),Tt(xe[3])}function In(ye){r.push(c[ye*3+0]),r.push(c[ye*3+1]),r.push(c[ye*3+2])}function Tt(ye){s.push(ye.x),s.push(ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return ODe(t,i,e)}static fromJSON(e,t){let i=[];for(let s=0,o=e.shapes.length;s<o;s++){let a=t[e.shapes[s]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new KB[r.type]().fromJSON(r)),new n(i,e.options)}},NDe={generateTopUV:function(n,e,t,i,r){let s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],l=e[r*3],u=e[r*3+1];return[new qe(s,o),new qe(a,c),new qe(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){let o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[r*3],p=e[r*3+1],_=e[r*3+2],b=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new qe(o,1-c),new qe(l,1-d),new qe(h,1-_),new qe(b,1-v)]:[new qe(a,1-c),new qe(u,1-d),new qe(p,1-_),new qe(g,1-v)]}};function ODe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var Yb=class n extends po{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,p=[],_=[],b=[],g=[];for(let v=0;v<u;v++){let P=v*h-o;for(let R=0;R<l;R++){let N=R*d-s;_.push(N,-P,0),b.push(0,0,1),g.push(R/a),g.push(1-v/c)}}for(let v=0;v<c;v++)for(let P=0;P<a;P++){let R=P+l*v,N=P+l*(v+1),U=P+1+l*(v+1),O=P+1+l*v;p.push(R,N,O),p.push(N,U,O)}this.setIndex(p),this.setAttribute("position",new Ks(_,3)),this.setAttribute("normal",new Ks(b,3)),this.setAttribute("uv",new Ks(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var Qb=class extends Ql{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new hn(16777215),this.specular=new hn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=f4,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new kd,this.combine=RM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var fM=class extends Ql{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Pte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},pM=class extends Ql{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function qA(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function LDe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var Vf=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){let a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},mM=class extends Vf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:HB,endingEnd:HB}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case jB:s=e,a=2*t-i;break;case GB:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case jB:o=e,c=2*i-t;break;case GB:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,_=(i-t)/(r-t),b=_*_,g=b*_,v=-h*g+2*h*b-h*_,P=(1+h)*g+(-1.5-2*h)*b+(-.5+h)*_+1,R=(-1-p)*g+(1.5+p)*b+.5*_,N=p*g-p*b;for(let U=0;U!==a;++U)s[U]=v*o[u+U]+P*o[l+U]+R*o[c+U]+N*o[d+U];return s}},gM=class extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}},_M=class extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},_o=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qA(t,this.TimeBufferType),this.values=qA(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qA(e.times,Array),values:qA(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new _M(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Tb:t=this.InterpolantFactoryMethodDiscrete;break;case ZA:t=this.InterpolantFactoryMethodLinear;break;case KA:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return zt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tb;case this.InterpolantFactoryMethodLinear:return ZA;case this.InterpolantFactoryMethodSmooth:return KA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(dn("KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(dn("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){dn("KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){dn("KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&LDe(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){dn("KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===KA,s=e.length-1,o=1;for(let a=1;a<s;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{let d=a*i,h=d-i,p=d+i;for(let _=0;_!==i;++_){let b=t[d+_];if(b!==t[h+_]||b!==t[p+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];let d=a*i,h=o*i;for(let p=0;p!==i;++p)t[h+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};_o.prototype.ValueTypeName="";_o.prototype.TimeBufferType=Float32Array;_o.prototype.ValueBufferType=Float32Array;_o.prototype.DefaultInterpolation=ZA;var Nd=class extends _o{constructor(e,t,i){super(e,t,i)}};Nd.prototype.ValueTypeName="bool";Nd.prototype.ValueBufferType=Array;Nd.prototype.DefaultInterpolation=Tb;Nd.prototype.InterpolantFactoryMethodLinear=void 0;Nd.prototype.InterpolantFactoryMethodSmooth=void 0;var yM=class extends _o{constructor(e,t,i,r){super(e,t,i,r)}};yM.prototype.ValueTypeName="color";var vM=class extends _o{constructor(e,t,i,r){super(e,t,i,r)}};vM.prototype.ValueTypeName="number";var bM=class extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t),l=e*a;for(let u=l+a;l!==u;l+=4)Yl.slerpFlat(s,0,o,l-a,o,l,c);return s}},Jb=class extends _o{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new bM(this.times,this.values,this.getValueSize(),e)}};Jb.prototype.ValueTypeName="quaternion";Jb.prototype.InterpolantFactoryMethodSmooth=void 0;var Od=class extends _o{constructor(e,t,i){super(e,t,i)}};Od.prototype.ValueTypeName="string";Od.prototype.ValueBufferType=Array;Od.prototype.DefaultInterpolation=Tb;Od.prototype.InterpolantFactoryMethodLinear=void 0;Od.prototype.InterpolantFactoryMethodSmooth=void 0;var xM=class extends _o{constructor(e,t,i,r){super(e,t,i,r)}};xM.prototype.ValueTypeName="vector";var Zb=class extends tu{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new hn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var UB=new Ti,Jee=new K,Zee=new K,JB=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.mapType=Ta,this.map=null,this.mapPass=null,this.matrix=new Ti,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new d_,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new Zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;Jee.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jee),Zee.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Zee),t.updateMatrixWorld(),UB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UB,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(UB)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var ete=new Ti,xb=new K,BB=new K,ZB=class extends JB{constructor(){super(new zr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new Zn(2,1,1,1),new Zn(0,1,1,1),new Zn(3,1,1,1),new Zn(1,1,1,1),new Zn(3,0,1,1),new Zn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),xb.setFromMatrixPosition(e.matrixWorld),i.position.copy(xb),BB.copy(i.position),BB.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(BB),i.updateMatrixWorld(),r.makeTranslation(-xb.x,-xb.y,-xb.z),ete.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ete,i.coordinateSystem,i.reversedDepth)}},m_=class extends Zb{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new ZB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},wM=class extends Ob{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};var ex=class extends Zb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var EM=class extends zr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var b4="\\[\\]\\.:\\/",FDe=new RegExp("["+b4+"]","g"),x4="[^"+b4+"]",VDe="[^"+b4.replace("\\.","")+"]",UDe=/((?:WC+[\/:])*)/.source.replace("WC",x4),BDe=/(WCOD+)?/.source.replace("WCOD",VDe),zDe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",x4),HDe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",x4),jDe=new RegExp("^"+UDe+BDe+zDe+HDe+"$"),GDe=["material","materials","bones","map"],e4=class{constructor(e,t,i){let r=i||Oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Oi=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(FDe,"")}static parseTrackName(t){let i=jDe.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);GDe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(o){for(let a=0;a<o.length;a++){let c=o[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){zt("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){dn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){dn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){dn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){dn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){dn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){dn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){dn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=i.nodeName;dn("PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){dn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){dn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=e4,n})();Oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Oi.prototype.GetterByBindingType=[Oi.prototype._getValue_direct,Oi.prototype._getValue_array,Oi.prototype._getValue_arrayElement,Oi.prototype._getValue_toArray];Oi.prototype.SetterByBindingTypeAndVersioning=[[Oi.prototype._setValue_direct,Oi.prototype._setValue_direct_setNeedsUpdate,Oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_array,Oi.prototype._setValue_array_setNeedsUpdate,Oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_arrayElement,Oi.prototype._setValue_arrayElement_setNeedsUpdate,Oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_fromArray,Oi.prototype._setValue_fromArray_setNeedsUpdate,Oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var mat=new Float32Array(1);function w4(n,e,t,i){let r=WDe(i);switch(t){case u4:return n*e;case h4:return n*e/r.components*r.byteLength;case VM:return n*e/r.components*r.byteLength;case UM:return n*e*2/r.components*r.byteLength;case BM:return n*e*2/r.components*r.byteLength;case d4:return n*e*3/r.components*r.byteLength;case zo:return n*e*4/r.components*r.byteLength;case zM:return n*e*4/r.components*r.byteLength;case ix:case rx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sx:case ox:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case jM:case WM:return Math.max(n,16)*Math.max(e,8)/4;case HM:case GM:return Math.max(n,8)*Math.max(e,8)/2;case $M:case qM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case KM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case XM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case YM:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case QM:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case JM:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case ZM:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case eD:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case tD:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case nD:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case iD:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case rD:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case sD:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case oD:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case aD:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case cD:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case lD:case uD:case dD:return Math.ceil(n/4)*Math.ceil(e/4)*16;case hD:case fD:return Math.ceil(n/4)*Math.ceil(e/4)*8;case pD:case mD:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function WDe(n){switch(n){case Ta:case o4:return{byteLength:1,components:1};case g_:case a4:case zf:return{byteLength:2,components:1};case LM:case FM:return{byteLength:2,components:4};case Fd:case OM:case xc:return{byteLength:4,components:1};case c4:case l4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"181"}}));typeof window<"u"&&(window.__THREE__?zt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="181");function yne(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qDe(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback();let p;if(l instanceof Float32Array)p=n.FLOAT;else if(typeof Float16Array<"u"&&l instanceof Float16Array)p=n.HALF_FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)p=n.SHORT;else if(l instanceof Uint32Array)p=n.UNSIGNED_INT;else if(l instanceof Int32Array)p=n.INT;else if(l instanceof Int8Array)p=n.BYTE;else if(l instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:p,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,c,l){let u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),d.length===0)n.bufferSubData(l,0,u);else{d.sort((p,_)=>p.start-_.start);let h=0;for(let p=1;p<d.length;p++){let _=d[h],b=d[p];b.start<=_.start+_.count+1?_.count=Math.max(_.count,b.start+b.count-_.start):(++h,d[h]=b)}d.length=h+1;for(let p=0,_=d.length;p<_;p++){let b=d[p];n.bufferSubData(l,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:s,update:o}}var KDe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,XDe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,YDe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,QDe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JDe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ZDe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,eRe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tRe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nRe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,iRe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,rRe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,sRe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oRe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,aRe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cRe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lRe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,uRe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dRe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hRe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fRe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pRe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mRe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,gRe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_Re=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yRe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vRe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,bRe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xRe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wRe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ERe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,IRe="gl_FragColor = linearToOutputTexel( gl_FragColor );",TRe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,SRe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,CRe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,ARe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MRe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DRe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RRe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,PRe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kRe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,NRe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ORe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,LRe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,FRe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,VRe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,URe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,BRe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,zRe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HRe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jRe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,GRe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,WRe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$Re=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qRe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,KRe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XRe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,YRe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,QRe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,JRe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZRe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,e1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,t1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,n1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,i1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,r1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,s1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,o1e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,a1e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,c1e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,l1e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,u1e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,d1e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,h1e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,f1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,p1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,m1e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,g1e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_1e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,y1e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,v1e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,b1e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,x1e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,w1e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,E1e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,I1e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,T1e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,S1e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,C1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,A1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,D1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,R1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,P1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,k1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,N1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,O1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,L1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,F1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,V1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,U1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,B1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,z1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,H1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,j1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,G1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,W1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,q1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,K1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,X1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Y1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Q1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,J1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ePe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,tPe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nPe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,iPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rPe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sPe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oPe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aPe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cPe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lPe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uPe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dPe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,hPe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fPe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pPe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,mPe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gPe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Pe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yPe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vPe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bPe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xPe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EPe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IPe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,TPe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:KDe,alphahash_pars_fragment:XDe,alphamap_fragment:YDe,alphamap_pars_fragment:QDe,alphatest_fragment:JDe,alphatest_pars_fragment:ZDe,aomap_fragment:eRe,aomap_pars_fragment:tRe,batching_pars_vertex:nRe,batching_vertex:iRe,begin_vertex:rRe,beginnormal_vertex:sRe,bsdfs:oRe,iridescence_fragment:aRe,bumpmap_pars_fragment:cRe,clipping_planes_fragment:lRe,clipping_planes_pars_fragment:uRe,clipping_planes_pars_vertex:dRe,clipping_planes_vertex:hRe,color_fragment:fRe,color_pars_fragment:pRe,color_pars_vertex:mRe,color_vertex:gRe,common:_Re,cube_uv_reflection_fragment:yRe,defaultnormal_vertex:vRe,displacementmap_pars_vertex:bRe,displacementmap_vertex:xRe,emissivemap_fragment:wRe,emissivemap_pars_fragment:ERe,colorspace_fragment:IRe,colorspace_pars_fragment:TRe,envmap_fragment:SRe,envmap_common_pars_fragment:CRe,envmap_pars_fragment:ARe,envmap_pars_vertex:MRe,envmap_physical_pars_fragment:BRe,envmap_vertex:DRe,fog_vertex:RRe,fog_pars_vertex:PRe,fog_fragment:kRe,fog_pars_fragment:NRe,gradientmap_pars_fragment:ORe,lightmap_pars_fragment:LRe,lights_lambert_fragment:FRe,lights_lambert_pars_fragment:VRe,lights_pars_begin:URe,lights_toon_fragment:zRe,lights_toon_pars_fragment:HRe,lights_phong_fragment:jRe,lights_phong_pars_fragment:GRe,lights_physical_fragment:WRe,lights_physical_pars_fragment:$Re,lights_fragment_begin:qRe,lights_fragment_maps:KRe,lights_fragment_end:XRe,logdepthbuf_fragment:YRe,logdepthbuf_pars_fragment:QRe,logdepthbuf_pars_vertex:JRe,logdepthbuf_vertex:ZRe,map_fragment:e1e,map_pars_fragment:t1e,map_particle_fragment:n1e,map_particle_pars_fragment:i1e,metalnessmap_fragment:r1e,metalnessmap_pars_fragment:s1e,morphinstance_vertex:o1e,morphcolor_vertex:a1e,morphnormal_vertex:c1e,morphtarget_pars_vertex:l1e,morphtarget_vertex:u1e,normal_fragment_begin:d1e,normal_fragment_maps:h1e,normal_pars_fragment:f1e,normal_pars_vertex:p1e,normal_vertex:m1e,normalmap_pars_fragment:g1e,clearcoat_normal_fragment_begin:_1e,clearcoat_normal_fragment_maps:y1e,clearcoat_pars_fragment:v1e,iridescence_pars_fragment:b1e,opaque_fragment:x1e,packing:w1e,premultiplied_alpha_fragment:E1e,project_vertex:I1e,dithering_fragment:T1e,dithering_pars_fragment:S1e,roughnessmap_fragment:C1e,roughnessmap_pars_fragment:A1e,shadowmap_pars_fragment:M1e,shadowmap_pars_vertex:D1e,shadowmap_vertex:R1e,shadowmask_pars_fragment:P1e,skinbase_vertex:k1e,skinning_pars_vertex:N1e,skinning_vertex:O1e,skinnormal_vertex:L1e,specularmap_fragment:F1e,specularmap_pars_fragment:V1e,tonemapping_fragment:U1e,tonemapping_pars_fragment:B1e,transmission_fragment:z1e,transmission_pars_fragment:H1e,uv_pars_fragment:j1e,uv_pars_vertex:G1e,uv_vertex:W1e,worldpos_vertex:$1e,background_vert:q1e,background_frag:K1e,backgroundCube_vert:X1e,backgroundCube_frag:Y1e,cube_vert:Q1e,cube_frag:J1e,depth_vert:Z1e,depth_frag:ePe,distanceRGBA_vert:tPe,distanceRGBA_frag:nPe,equirect_vert:iPe,equirect_frag:rPe,linedashed_vert:sPe,linedashed_frag:oPe,meshbasic_vert:aPe,meshbasic_frag:cPe,meshlambert_vert:lPe,meshlambert_frag:uPe,meshmatcap_vert:dPe,meshmatcap_frag:hPe,meshnormal_vert:fPe,meshnormal_frag:pPe,meshphong_vert:mPe,meshphong_frag:gPe,meshphysical_vert:_Pe,meshphysical_frag:yPe,meshtoon_vert:vPe,meshtoon_frag:bPe,points_vert:xPe,points_frag:wPe,shadow_vert:EPe,shadow_frag:IPe,sprite_vert:TPe,sprite_frag:SPe},$e={common:{diffuse:{value:new hn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new hn(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},wc={basic:{uniforms:rs([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:rs([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new hn(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:rs([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new hn(0)},specular:{value:new hn(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:rs([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new hn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:rs([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new hn(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:rs([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:rs([$e.points,$e.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:rs([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:rs([$e.common,$e.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:rs([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:rs([$e.sprite,$e.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:rs([$e.common,$e.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:rs([$e.lights,$e.fog,{color:{value:new hn(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};wc.physical={uniforms:rs([wc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new hn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new hn(0)},specularColor:{value:new hn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};var gD={r:0,b:0,g:0},jf=new kd,CPe=new Ti;function APe(n,e,t,i,r,s,o){let a=new hn(0),c=s===!0?0:1,l,u,d=null,h=0,p=null;function _(R){let N=R.isScene===!0?R.background:null;return N&&N.isTexture&&(N=(R.backgroundBlurriness>0?t:e).get(N)),N}function b(R){let N=!1,U=_(R);U===null?v(a,c):U&&U.isColor&&(v(U,1),N=!0);let O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||N)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(R,N){let U=_(N);U&&(U.isCubeTexture||U.mapping===tx)?(u===void 0&&(u=new mo(new l_(1,1,1),new Bo({name:"BackgroundCubeMaterial",uniforms:Hf(wc.backgroundCube.uniforms),vertexShader:wc.backgroundCube.vertexShader,fragmentShader:wc.backgroundCube.fragmentShader,side:ys,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,I,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),jf.copy(N.backgroundRotation),jf.x*=-1,jf.y*=-1,jf.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(jf.y*=-1,jf.z*=-1),u.material.uniforms.envMap.value=U,u.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(CPe.makeRotationFromEuler(jf)),u.material.toneMapped=Ln.getTransfer(U.colorSpace)!==ei,(d!==U||h!==U.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=U,h=U.version,p=n.toneMapping),u.layers.enableAll(),R.unshift(u,u.geometry,u.material,0,0,null)):U&&U.isTexture&&(l===void 0&&(l=new mo(new Yb(2,2),new Bo({name:"BackgroundMaterial",uniforms:Hf(wc.background.uniforms),vertexShader:wc.background.vertexShader,fragmentShader:wc.background.fragmentShader,side:Kl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=U,l.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,l.material.toneMapped=Ln.getTransfer(U.colorSpace)!==ei,U.matrixAutoUpdate===!0&&U.updateMatrix(),l.material.uniforms.uvTransform.value.copy(U.matrix),(d!==U||h!==U.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,d=U,h=U.version,p=n.toneMapping),l.layers.enableAll(),R.unshift(l,l.geometry,l.material,0,0,null))}function v(R,N){R.getRGB(gD,y4(n)),i.buffers.color.setClear(gD.r,gD.g,gD.b,N,o)}function P(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(R,N=1){a.set(R),c=N,v(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(R){c=R,v(a,c)},render:b,addToRenderList:g,dispose:P}}function MPe(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),s=r,o=!1;function a(x,S,M,C,re){let Y=!1,le=d(C,M,S);s!==le&&(s=le,l(s.object)),Y=p(x,C,M,re),Y&&_(x,C,M,re),re!==null&&e.update(re,n.ELEMENT_ARRAY_BUFFER),(Y||o)&&(o=!1,N(x,S,M,C),re!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(re).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function u(x){return n.deleteVertexArray(x)}function d(x,S,M){let C=M.wireframe===!0,re=i[x.id];re===void 0&&(re={},i[x.id]=re);let Y=re[S.id];Y===void 0&&(Y={},re[S.id]=Y);let le=Y[C];return le===void 0&&(le=h(c()),Y[C]=le),le}function h(x){let S=[],M=[],C=[];for(let re=0;re<t;re++)S[re]=0,M[re]=0,C[re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:S,enabledAttributes:M,attributeDivisors:C,object:x,attributes:{},index:null}}function p(x,S,M,C){let re=s.attributes,Y=S.attributes,le=0,fe=M.getAttributes();for(let oe in fe)if(fe[oe].location>=0){let Ae=re[oe],Qe=Y[oe];if(Qe===void 0&&(oe==="instanceMatrix"&&x.instanceMatrix&&(Qe=x.instanceMatrix),oe==="instanceColor"&&x.instanceColor&&(Qe=x.instanceColor)),Ae===void 0||Ae.attribute!==Qe||Qe&&Ae.data!==Qe.data)return!0;le++}return s.attributesNum!==le||s.index!==C}function _(x,S,M,C){let re={},Y=S.attributes,le=0,fe=M.getAttributes();for(let oe in fe)if(fe[oe].location>=0){let Ae=Y[oe];Ae===void 0&&(oe==="instanceMatrix"&&x.instanceMatrix&&(Ae=x.instanceMatrix),oe==="instanceColor"&&x.instanceColor&&(Ae=x.instanceColor));let Qe={};Qe.attribute=Ae,Ae&&Ae.data&&(Qe.data=Ae.data),re[oe]=Qe,le++}s.attributes=re,s.attributesNum=le,s.index=C}function b(){let x=s.newAttributes;for(let S=0,M=x.length;S<M;S++)x[S]=0}function g(x){v(x,0)}function v(x,S){let M=s.newAttributes,C=s.enabledAttributes,re=s.attributeDivisors;M[x]=1,C[x]===0&&(n.enableVertexAttribArray(x),C[x]=1),re[x]!==S&&(n.vertexAttribDivisor(x,S),re[x]=S)}function P(){let x=s.newAttributes,S=s.enabledAttributes;for(let M=0,C=S.length;M<C;M++)S[M]!==x[M]&&(n.disableVertexAttribArray(M),S[M]=0)}function R(x,S,M,C,re,Y,le){le===!0?n.vertexAttribIPointer(x,S,M,re,Y):n.vertexAttribPointer(x,S,M,C,re,Y)}function N(x,S,M,C){b();let re=C.attributes,Y=M.getAttributes(),le=S.defaultAttributeValues;for(let fe in Y){let oe=Y[fe];if(oe.location>=0){let we=re[fe];if(we===void 0&&(fe==="instanceMatrix"&&x.instanceMatrix&&(we=x.instanceMatrix),fe==="instanceColor"&&x.instanceColor&&(we=x.instanceColor)),we!==void 0){let Ae=we.normalized,Qe=we.itemSize,ut=e.get(we);if(ut===void 0)continue;let rt=ut.buffer,Vt=ut.type,Ht=ut.bytesPerElement,ue=Vt===n.INT||Vt===n.UNSIGNED_INT||we.gpuType===OM;if(we.isInterleavedBufferAttribute){let me=we.data,Xe=me.stride,ft=we.offset;if(me.isInstancedInterleavedBuffer){for(let tt=0;tt<oe.locationSize;tt++)v(oe.location+tt,me.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let tt=0;tt<oe.locationSize;tt++)g(oe.location+tt);n.bindBuffer(n.ARRAY_BUFFER,rt);for(let tt=0;tt<oe.locationSize;tt++)R(oe.location+tt,Qe/oe.locationSize,Vt,Ae,Xe*Ht,(ft+Qe/oe.locationSize*tt)*Ht,ue)}else{if(we.isInstancedBufferAttribute){for(let me=0;me<oe.locationSize;me++)v(oe.location+me,we.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let me=0;me<oe.locationSize;me++)g(oe.location+me);n.bindBuffer(n.ARRAY_BUFFER,rt);for(let me=0;me<oe.locationSize;me++)R(oe.location+me,Qe/oe.locationSize,Vt,Ae,Qe*Ht,Qe/oe.locationSize*me*Ht,ue)}}else if(le!==void 0){let Ae=le[fe];if(Ae!==void 0)switch(Ae.length){case 2:n.vertexAttrib2fv(oe.location,Ae);break;case 3:n.vertexAttrib3fv(oe.location,Ae);break;case 4:n.vertexAttrib4fv(oe.location,Ae);break;default:n.vertexAttrib1fv(oe.location,Ae)}}}}P()}function U(){w();for(let x in i){let S=i[x];for(let M in S){let C=S[M];for(let re in C)u(C[re].object),delete C[re];delete S[M]}delete i[x]}}function O(x){if(i[x.id]===void 0)return;let S=i[x.id];for(let M in S){let C=S[M];for(let re in C)u(C[re].object),delete C[re];delete S[M]}delete i[x.id]}function I(x){for(let S in i){let M=i[S];if(M[x.id]===void 0)continue;let C=M[x.id];for(let re in C)u(C[re].object),delete C[re];delete M[x.id]}}function w(){y(),o=!0,s!==r&&(s=r,l(s.object))}function y(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:w,resetDefaultState:y,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:I,initAttributes:b,enableAttribute:g,disableUnusedAttributes:P}}function DPe(n,e,t){let i;function r(l){i=l}function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)}function o(l,u,d){d!==0&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let p=0;for(let _=0;_<d;_++)p+=u[_];t.update(p,i,1)}function c(l,u,d,h){if(d===0)return;let p=e.get("WEBGL_multi_draw");if(p===null)for(let _=0;_<l.length;_++)o(l[_],u[_],h[_]);else{p.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let _=0;for(let b=0;b<d;b++)_+=u[b]*h[b];t.update(_,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function RPe(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==zo&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){let w=I===zf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Ta&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==xc&&!w)}function c(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(zt("WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,h=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),P=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),R=n.getParameter(n.MAX_VARYING_VECTORS),N=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=_>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reversedDepthBuffer:h,maxTextures:p,maxVertexTextures:_,maxTextureSize:b,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:P,maxVaryings:R,maxFragmentUniforms:N,vertexTextures:U,maxSamples:O}}function PPe(n){let e=this,t=null,i=0,r=!1,s=!1,o=new mc,a=new on,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let p=d.length!==0||h||i!==0||r;return r=h,i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){let _=d.clippingPlanes,b=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!r||_===null||_.length===0||s&&!g)s?u(null):l();else{let P=s?0:i,R=P*4,N=v.clippingState||null;c.value=N,N=u(_,h,R,p);for(let U=0;U!==R;++U)N[U]=t[U];v.clippingState=N,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=P}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,_){let b=d!==null?d.length:0,g=null;if(b!==0){if(g=c.value,_!==!0||g===null){let v=p+b*4,P=h.matrixWorldInverse;a.getNormalMatrix(P),(g===null||g.length<v)&&(g=new Float32Array(v));for(let R=0,N=p;R!==b;++R,N+=4)o.copy(d[R]).applyMatrix4(P,a),o.normal.toArray(g,N),g[N+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,g}}function kPe(n){let e=new WeakMap;function t(o,a){return a===PM?o.mapping=Uf:a===kM&&(o.mapping=Bf),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===PM||a===kM)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let l=new sM(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var Vd=4,Yte=[.125,.215,.35,.446,.526,.582],Wf=20,NPe=256,ax=new wM,Qte=new hn,E4=null,I4=0,T4=0,S4=!1,OPe=new K,yD=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,s={}){let{size:o=256,position:a=OPe}=s;E4=this._renderer.getRenderTarget(),I4=this._renderer.getActiveCubeFace(),T4=this._renderer.getActiveMipmapLevel(),S4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ene(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Zte(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(E4,I4,T4),this._renderer.xr.enabled=S4,e.scissorTest=!1,b_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Uf||e.mapping===Bf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),E4=this._renderer.getRenderTarget(),I4=this._renderer.getActiveCubeFace(),T4=this._renderer.getActiveMipmapLevel(),S4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:fo,minFilter:fo,generateMipmaps:!1,type:zf,format:zo,colorSpace:Nf,depthBuffer:!1},r=Jte(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Jte(e,t,i);let{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=LPe(s)),this._blurMaterial=VPe(s,e,t),this._ggxMaterial=FPe(s,e,t)}return r}_compileMaterial(e){let t=new mo(new po,e);this._renderer.compile(t,ax)}_sceneToCubeUV(e,t,i,r,s){let c=new zr(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(Qte),d.toneMapping=Jl,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new mo(new l_,new Pb({name:"PMREM.Background",side:ys,depthWrite:!1,depthTest:!1})));let b=this._backgroundBox,g=b.material,v=!1,P=e.background;P?P.isColor&&(g.color.copy(P),e.background=null,v=!0):(g.color.copy(Qte),v=!0);for(let R=0;R<6;R++){let N=R%3;N===0?(c.up.set(0,l[R],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[R],s.y,s.z)):N===1?(c.up.set(0,0,l[R]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[R],s.z)):(c.up.set(0,l[R],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[R]));let U=this._cubeSize;b_(r,N*U,R>2?U:0,U,U),d.setRenderTarget(r),v&&d.render(b,c),d.render(e,c)}d.toneMapping=p,d.autoClear=h,e.background=P}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Uf||e.mapping===Bf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ene()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Zte());let s=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;let a=s.uniforms;a.envMap.value=e;let c=this._cubeSize;b_(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,ax)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodMeshes.length;for(let s=1;s<r;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){let r=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,a=this._lodMeshes[i];a.material=o;let c=o.uniforms,l=i/(this._lodMeshes.length-1),u=t/(this._lodMeshes.length-1),d=Math.sqrt(l*l-u*u),h=.05+l*.95,p=d*h,{_lodMax:_}=this,b=this._sizeLods[i],g=3*b*(i>_-Vd?i-_+Vd:0),v=4*(this._cubeSize-b);c.envMap.value=e.texture,c.roughness.value=p,c.mipInt.value=_-t,b_(s,g,v,3*b,2*b),r.setRenderTarget(s),r.render(a,ax),c.envMap.value=s.texture,c.roughness.value=0,c.mipInt.value=_-i,b_(e,g,v,3*b,2*b),r.setRenderTarget(e),r.render(a,ax)}_blur(e,t,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){let c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&dn("blur direction must be either latitudinal or longitudinal!");let u=3,d=this._lodMeshes[r];d.material=l;let h=l.uniforms,p=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Wf-1),b=s/_,g=isFinite(s)?1+Math.floor(u*b):Wf;g>Wf&&zt(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Wf}`);let v=[],P=0;for(let I=0;I<Wf;++I){let w=I/b,y=Math.exp(-w*w/2);v.push(y),I===0?P+=y:I<g&&(P+=2*y)}for(let I=0;I<v.length;I++)v[I]=v[I]/P;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:R}=this;h.dTheta.value=_,h.mipInt.value=R-i;let N=this._sizeLods[r],U=3*N*(r>R-Vd?r-R+Vd:0),O=4*(this._cubeSize-N);b_(t,U,O,3*N,2*N),c.setRenderTarget(t),c.render(d,ax)}};function LPe(n){let e=[],t=[],i=[],r=n,s=n-Vd+1+Yte.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);e.push(a);let c=1/a;o>n-Vd?c=Yte[o-n+Vd-1]:o===0&&(c=0),t.push(c);let l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,_=6,b=3,g=2,v=1,P=new Float32Array(b*_*p),R=new Float32Array(g*_*p),N=new Float32Array(v*_*p);for(let O=0;O<p;O++){let I=O%3*2/3-1,w=O>2?0:-1,y=[I,w,0,I+2/3,w,0,I+2/3,w+1,0,I,w,0,I+2/3,w+1,0,I,w+1,0];P.set(y,b*_*O),R.set(h,g*_*O);let x=[O,O,O,O,O,O];N.set(x,v*_*O)}let U=new po;U.setAttribute("position",new ho(P,b)),U.setAttribute("uv",new ho(R,g)),U.setAttribute("faceIndex",new ho(N,v)),i.push(new mo(U,null)),r>Vd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function Jte(n,e,t){let i=new _c(n,e,t);return i.texture.mapping=tx,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function b_(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function FPe(n,e,t){return new Bo({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:NPe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:bD(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:bc,depthTest:!1,depthWrite:!1})}function VPe(n,e,t){let i=new Float32Array(Wf),r=new K(0,1,0);return new Bo({name:"SphericalGaussianBlur",defines:{n:Wf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bc,depthTest:!1,depthWrite:!1})}function Zte(){return new Bo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bc,depthTest:!1,depthWrite:!1})}function ene(){return new Bo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bc,depthTest:!1,depthWrite:!1})}function bD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function UPe(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===PM||c===kM,u=c===Uf||c===Bf;if(l||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new yD(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let p=a.image;return l&&p&&p.height>0||u&&p&&r(p)?(t===null&&(t=new yD(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){let c=a.target;c.removeEventListener("dispose",s);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function BPe(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&a_("WebGLRenderer: "+i+" extension not supported."),r}}}function zPe(n,e,t,i){let r={},s=new WeakMap;function o(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let _ in h.attributes)e.remove(h.attributes[_]);h.removeEventListener("dispose",o),delete r[h.id];let p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function c(d){let h=d.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER)}function l(d){let h=[],p=d.index,_=d.attributes.position,b=0;if(p!==null){let P=p.array;b=p.version;for(let R=0,N=P.length;R<N;R+=3){let U=P[R+0],O=P[R+1],I=P[R+2];h.push(U,O,O,I,I,U)}}else if(_!==void 0){let P=_.array;b=_.version;for(let R=0,N=P.length/3-1;R<N;R+=3){let U=R+0,O=R+1,I=R+2;h.push(U,O,O,I,I,U)}}else return;let g=new(g4(h)?Nb:kb)(h,1);g.version=b;let v=s.get(d);v&&e.remove(v),s.set(d,g)}function u(d){let h=s.get(d);if(h){let p=d.index;p!==null&&h.version<p.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function HPe(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function c(h,p){n.drawElements(i,p,s,h*o),t.update(p,i,1)}function l(h,p,_){_!==0&&(n.drawElementsInstanced(i,p,s,h*o,_),t.update(p,i,_))}function u(h,p,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,_);let g=0;for(let v=0;v<_;v++)g+=p[v];t.update(g,i,1)}function d(h,p,_,b){if(_===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<h.length;v++)l(h[v]/o,p[v],b[v]);else{g.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,b,0,_);let v=0;for(let P=0;P<_;P++)v+=p[P]*b[P];t.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function jPe(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:dn("WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function GPe(n,e,t){let i=new WeakMap,r=new Zn;function s(o,a,c){let l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let x=function(){w.dispose(),i.delete(a),a.removeEventListener("dispose",x)};var p=x;h!==void 0&&h.texture.dispose();let _=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],P=a.morphAttributes.normal||[],R=a.morphAttributes.color||[],N=0;_===!0&&(N=1),b===!0&&(N=2),g===!0&&(N=3);let U=a.attributes.position.count*N,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);let I=new Float32Array(U*O*4*d),w=new Mb(I,U,O,d);w.type=xc,w.needsUpdate=!0;let y=N*4;for(let S=0;S<d;S++){let M=v[S],C=P[S],re=R[S],Y=U*O*4*S;for(let le=0;le<M.count;le++){let fe=le*y;_===!0&&(r.fromBufferAttribute(M,le),I[Y+fe+0]=r.x,I[Y+fe+1]=r.y,I[Y+fe+2]=r.z,I[Y+fe+3]=0),b===!0&&(r.fromBufferAttribute(C,le),I[Y+fe+4]=r.x,I[Y+fe+5]=r.y,I[Y+fe+6]=r.z,I[Y+fe+7]=0),g===!0&&(r.fromBufferAttribute(re,le),I[Y+fe+8]=r.x,I[Y+fe+9]=r.y,I[Y+fe+10]=r.z,I[Y+fe+11]=re.itemSize===4?r.w:1)}}h={count:d,texture:w,size:new qe(U,O)},i.set(a,h),a.addEventListener("dispose",x)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let _=0;for(let g=0;g<l.length;g++)_+=l[g];let b=a.morphTargetsRelative?1:1-_;c.getUniforms().setValue(n,"morphTargetBaseInfluence",b),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function WPe(n,e,t,i){let r=new WeakMap;function s(c){let l=i.render.frame,u=c.geometry,d=e.get(c,u);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d}function o(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}var vne=new eu,tne=new Ub(1,1),bne=new Mb,xne=new iM,wne=new Lb,nne=[],ine=[],rne=new Float32Array(16),sne=new Float32Array(9),one=new Float32Array(4);function w_(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,s=nne[r];if(s===void 0&&(s=new Float32Array(r),nne[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function gr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function _r(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function xD(n,e){let t=ine[e];t===void 0&&(t=new Int32Array(e),ine[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function $Pe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function qPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2fv(this.addr,e),_r(t,e)}}function KPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gr(t,e))return;n.uniform3fv(this.addr,e),_r(t,e)}}function XPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4fv(this.addr,e),_r(t,e)}}function YPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;one.set(i),n.uniformMatrix2fv(this.addr,!1,one),_r(t,i)}}function QPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;sne.set(i),n.uniformMatrix3fv(this.addr,!1,sne),_r(t,i)}}function JPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(gr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,i))return;rne.set(i),n.uniformMatrix4fv(this.addr,!1,rne),_r(t,i)}}function ZPe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function eke(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2iv(this.addr,e),_r(t,e)}}function tke(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3iv(this.addr,e),_r(t,e)}}function nke(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4iv(this.addr,e),_r(t,e)}}function ike(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function rke(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2uiv(this.addr,e),_r(t,e)}}function ske(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3uiv(this.addr,e),_r(t,e)}}function oke(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4uiv(this.addr,e),_r(t,e)}}function ake(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(tne.compareFunction=p4,s=tne):s=vne,t.setTexture2D(e||s,r)}function cke(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||xne,r)}function lke(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||wne,r)}function uke(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||bne,r)}function dke(n){switch(n){case 5126:return $Pe;case 35664:return qPe;case 35665:return KPe;case 35666:return XPe;case 35674:return YPe;case 35675:return QPe;case 35676:return JPe;case 5124:case 35670:return ZPe;case 35667:case 35671:return eke;case 35668:case 35672:return tke;case 35669:case 35673:return nke;case 5125:return ike;case 36294:return rke;case 36295:return ske;case 36296:return oke;case 35678:case 36198:case 36298:case 36306:case 35682:return ake;case 35679:case 36299:case 36307:return cke;case 35680:case 36300:case 36308:case 36293:return lke;case 36289:case 36303:case 36311:case 36292:return uke}}function hke(n,e){n.uniform1fv(this.addr,e)}function fke(n,e){let t=w_(e,this.size,2);n.uniform2fv(this.addr,t)}function pke(n,e){let t=w_(e,this.size,3);n.uniform3fv(this.addr,t)}function mke(n,e){let t=w_(e,this.size,4);n.uniform4fv(this.addr,t)}function gke(n,e){let t=w_(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function _ke(n,e){let t=w_(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function yke(n,e){let t=w_(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function vke(n,e){n.uniform1iv(this.addr,e)}function bke(n,e){n.uniform2iv(this.addr,e)}function xke(n,e){n.uniform3iv(this.addr,e)}function wke(n,e){n.uniform4iv(this.addr,e)}function Eke(n,e){n.uniform1uiv(this.addr,e)}function Ike(n,e){n.uniform2uiv(this.addr,e)}function Tke(n,e){n.uniform3uiv(this.addr,e)}function Ske(n,e){n.uniform4uiv(this.addr,e)}function Cke(n,e,t){let i=this.cache,r=e.length,s=xD(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||vne,s[o])}function Ake(n,e,t){let i=this.cache,r=e.length,s=xD(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||xne,s[o])}function Mke(n,e,t){let i=this.cache,r=e.length,s=xD(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||wne,s[o])}function Dke(n,e,t){let i=this.cache,r=e.length,s=xD(t,r);gr(i,s)||(n.uniform1iv(this.addr,s),_r(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||bne,s[o])}function Rke(n){switch(n){case 5126:return hke;case 35664:return fke;case 35665:return pke;case 35666:return mke;case 35674:return gke;case 35675:return _ke;case 35676:return yke;case 5124:case 35670:return vke;case 35667:case 35671:return bke;case 35668:case 35672:return xke;case 35669:case 35673:return wke;case 5125:return Eke;case 36294:return Ike;case 36295:return Tke;case 36296:return Ske;case 35678:case 36198:case 36298:case 36306:case 35682:return Cke;case 35679:case 36299:case 36307:return Ake;case 35680:case 36300:case 36308:case 36293:return Mke;case 36289:case 36303:case 36311:case 36292:return Dke}}var A4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=dke(t.type)}},M4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Rke(t.type)}},D4=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(e,t[a.id],i)}}},C4=/(\w+)(\])?(\[|\.)?/g;function ane(n,e){n.seq.push(e),n.map[e.id]=e}function Pke(n,e,t){let i=n.name,r=i.length;for(C4.lastIndex=0;;){let s=C4.exec(i),o=C4.lastIndex,a=s[1],c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){ane(t,l===void 0?new A4(a,n,e):new M4(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new D4(a),ane(t,d)),t=d}}}var x_=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Pke(s,o,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){let a=t[s],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&i.push(o)}return i}};function cne(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var kke=37297,Nke=0;function Oke(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}var lne=new on;function Lke(n){Ln._getMatrix(lne,Ln.workingColorSpace,n);let e=`mat3( ${lne.elements.map(t=>t.toFixed(4))} )`;switch(Ln.getTransfer(n)){case Sb:return[e,"LinearTransferOETF"];case ei:return[e,"sRGBTransferOETF"];default:return zt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function une(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";let o=/ERROR: 0:(\d+)/.exec(s);if(o){let a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Oke(n.getShaderSource(e),a)}else return s}function Fke(n,e){let t=Lke(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Vke(n,e){let t;switch(e){case Ite:t="Linear";break;case Tte:t="Reinhard";break;case Ste:t="Cineon";break;case Cte:t="ACESFilmic";break;case Mte:t="AgX";break;case Dte:t="Neutral";break;case Ate:t="Custom";break;default:zt("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var _D=new K;function Uke(){Ln.getLuminanceCoefficients(_D);let n=_D.x.toFixed(4),e=_D.y.toFixed(4),t=_D.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Bke(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cx).join(`
`)}function zke(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Hke(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function cx(n){return n!==""}function dne(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hne(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var jke=/^[ \t]*#include +<([\w\d./]+)>/gm;function R4(n){return n.replace(jke,Wke)}var Gke=new Map;function Wke(n,e){let t=cn[e];if(t===void 0){let i=Gke.get(e);if(i!==void 0)t=cn[i],zt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return R4(t)}var $ke=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fne(n){return n.replace($ke,qke)}function qke(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pne(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Kke(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===n4?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ite?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yc&&(e="SHADOWMAP_TYPE_VSM"),e}function Xke(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Uf:case Bf:e="ENVMAP_TYPE_CUBE";break;case tx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Yke(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Bf:e="ENVMAP_MODE_REFRACTION";break}return e}function Qke(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case RM:e="ENVMAP_BLENDING_MULTIPLY";break;case wte:e="ENVMAP_BLENDING_MIX";break;case Ete:e="ENVMAP_BLENDING_ADD";break}return e}function Jke(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Zke(n,e,t,i){let r=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,c=Kke(t),l=Xke(t),u=Yke(t),d=Qke(t),h=Jke(t),p=Bke(t),_=zke(s),b=r.createProgram(),g,v,P=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(cx).join(`
`),g.length>0&&(g+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(cx).join(`
`),v.length>0&&(v+=`
`)):(g=[pne(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cx).join(`
`),v=[pne(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jl?"#define TONE_MAPPING":"",t.toneMapping!==Jl?cn.tonemapping_pars_fragment:"",t.toneMapping!==Jl?Vke("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,Fke("linearToOutputTexel",t.outputColorSpace),Uke(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cx).join(`
`)),o=R4(o),o=dne(o,t),o=hne(o,t),a=R4(a),a=dne(a,t),a=hne(a,t),o=fne(o),a=fne(a),t.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===m4?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===m4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let R=P+g+o,N=P+v+a,U=cne(r,r.VERTEX_SHADER,R),O=cne(r,r.FRAGMENT_SHADER,N);r.attachShader(b,U),r.attachShader(b,O),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function I(S){if(n.debug.checkShaderErrors){let M=r.getProgramInfoLog(b)||"",C=r.getShaderInfoLog(U)||"",re=r.getShaderInfoLog(O)||"",Y=M.trim(),le=C.trim(),fe=re.trim(),oe=!0,we=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(oe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,U,O);else{let Ae=une(r,U,"vertex"),Qe=une(r,O,"fragment");dn("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+S.name+`
Material Type: `+S.type+`

Program Info Log: `+Y+`
`+Ae+`
`+Qe)}else Y!==""?zt("WebGLProgram: Program Info Log:",Y):(le===""||fe==="")&&(we=!1);we&&(S.diagnostics={runnable:oe,programLog:Y,vertexShader:{log:le,prefix:g},fragmentShader:{log:fe,prefix:v}})}r.deleteShader(U),r.deleteShader(O),w=new x_(r,b),y=Hke(r,b)}let w;this.getUniforms=function(){return w===void 0&&I(this),w};let y;this.getAttributes=function(){return y===void 0&&I(this),y};let x=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(b,kke)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Nke++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=U,this.fragmentShader=O,this}var eNe=0,P4=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new k4(e),t.set(e,i)),i}},k4=class{constructor(e){this.id=eNe++,this.code=e,this.usedTimes=0}};function tNe(n,e,t,i,r,s,o){let a=new Rb,c=new P4,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,p=r.precision,_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(y){return l.add(y),y===0?"uv":`uv${y}`}function g(y,x,S,M,C){let re=M.fog,Y=C.geometry,le=y.isMeshStandardMaterial?M.environment:null,fe=(y.isMeshStandardMaterial?t:e).get(y.envMap||le),oe=fe&&fe.mapping===tx?fe.image.height:null,we=_[y.type];y.precision!==null&&(p=r.getMaxPrecision(y.precision),p!==y.precision&&zt("WebGLProgram.getParameters:",y.precision,"not supported, using",p,"instead."));let Ae=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,Qe=Ae!==void 0?Ae.length:0,ut=0;Y.morphAttributes.position!==void 0&&(ut=1),Y.morphAttributes.normal!==void 0&&(ut=2),Y.morphAttributes.color!==void 0&&(ut=3);let rt,Vt,Ht,ue;if(we){let Rn=wc[we];rt=Rn.vertexShader,Vt=Rn.fragmentShader}else rt=y.vertexShader,Vt=y.fragmentShader,c.update(y),Ht=c.getVertexShaderID(y),ue=c.getFragmentShaderID(y);let me=n.getRenderTarget(),Xe=n.state.buffers.depth.getReversed(),ft=C.isInstancedMesh===!0,tt=C.isBatchedMesh===!0,jt=!!y.map,In=!!y.matcap,Tt=!!fe,ye=!!y.aoMap,B=!!y.lightMap,be=!!y.bumpMap,Se=!!y.normalMap,Pe=!!y.displacementMap,xe=!!y.emissiveMap,Fe=!!y.metalnessMap,Ce=!!y.roughnessMap,Ge=y.anisotropy>0,z=y.clearcoat>0,k=y.dispersion>0,X=y.iridescence>0,ce=y.sheen>0,he=y.transmission>0,J=Ge&&!!y.anisotropyMap,Ze=z&&!!y.clearcoatMap,Ue=z&&!!y.clearcoatNormalMap,dt=z&&!!y.clearcoatRoughnessMap,nt=X&&!!y.iridescenceMap,_e=X&&!!y.iridescenceThicknessMap,Me=ce&&!!y.sheenColorMap,vt=ce&&!!y.sheenRoughnessMap,ht=!!y.specularMap,He=!!y.specularColorMap,Rt=!!y.specularIntensityMap,j=he&&!!y.transmissionMap,Be=he&&!!y.thicknessMap,ke=!!y.gradientMap,Ne=!!y.alphaMap,ge=y.alphaTest>0,pe=!!y.alphaHash,We=!!y.extensions,Ct=Jl;y.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(Ct=n.toneMapping);let Fn={shaderID:we,shaderType:y.type,shaderName:y.name,vertexShader:rt,fragmentShader:Vt,defines:y.defines,customVertexShaderID:Ht,customFragmentShaderID:ue,isRawShaderMaterial:y.isRawShaderMaterial===!0,glslVersion:y.glslVersion,precision:p,batching:tt,batchingColor:tt&&C._colorsTexture!==null,instancing:ft,instancingColor:ft&&C.instanceColor!==null,instancingMorph:ft&&C.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:me===null?n.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:Nf,alphaToCoverage:!!y.alphaToCoverage,map:jt,matcap:In,envMap:Tt,envMapMode:Tt&&fe.mapping,envMapCubeUVHeight:oe,aoMap:ye,lightMap:B,bumpMap:be,normalMap:Se,displacementMap:h&&Pe,emissiveMap:xe,normalMapObjectSpace:Se&&y.normalMapType===Nte,normalMapTangentSpace:Se&&y.normalMapType===f4,metalnessMap:Fe,roughnessMap:Ce,anisotropy:Ge,anisotropyMap:J,clearcoat:z,clearcoatMap:Ze,clearcoatNormalMap:Ue,clearcoatRoughnessMap:dt,dispersion:k,iridescence:X,iridescenceMap:nt,iridescenceThicknessMap:_e,sheen:ce,sheenColorMap:Me,sheenRoughnessMap:vt,specularMap:ht,specularColorMap:He,specularIntensityMap:Rt,transmission:he,transmissionMap:j,thicknessMap:Be,gradientMap:ke,opaque:y.transparent===!1&&y.blending===Pf&&y.alphaToCoverage===!1,alphaMap:Ne,alphaTest:ge,alphaHash:pe,combine:y.combine,mapUv:jt&&b(y.map.channel),aoMapUv:ye&&b(y.aoMap.channel),lightMapUv:B&&b(y.lightMap.channel),bumpMapUv:be&&b(y.bumpMap.channel),normalMapUv:Se&&b(y.normalMap.channel),displacementMapUv:Pe&&b(y.displacementMap.channel),emissiveMapUv:xe&&b(y.emissiveMap.channel),metalnessMapUv:Fe&&b(y.metalnessMap.channel),roughnessMapUv:Ce&&b(y.roughnessMap.channel),anisotropyMapUv:J&&b(y.anisotropyMap.channel),clearcoatMapUv:Ze&&b(y.clearcoatMap.channel),clearcoatNormalMapUv:Ue&&b(y.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dt&&b(y.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&b(y.iridescenceMap.channel),iridescenceThicknessMapUv:_e&&b(y.iridescenceThicknessMap.channel),sheenColorMapUv:Me&&b(y.sheenColorMap.channel),sheenRoughnessMapUv:vt&&b(y.sheenRoughnessMap.channel),specularMapUv:ht&&b(y.specularMap.channel),specularColorMapUv:He&&b(y.specularColorMap.channel),specularIntensityMapUv:Rt&&b(y.specularIntensityMap.channel),transmissionMapUv:j&&b(y.transmissionMap.channel),thicknessMapUv:Be&&b(y.thicknessMap.channel),alphaMapUv:Ne&&b(y.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(Se||Ge),vertexColors:y.vertexColors,vertexAlphas:y.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:C.isPoints===!0&&!!Y.attributes.uv&&(jt||Ne),fog:!!re,useFog:y.fog===!0,fogExp2:!!re&&re.isFogExp2,flatShading:y.flatShading===!0&&y.wireframe===!1,sizeAttenuation:y.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Xe,skinning:C.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:Qe,morphTextureStride:ut,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:y.dithering,shadowMapEnabled:n.shadowMap.enabled&&S.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ct,decodeVideoTexture:jt&&y.map.isVideoTexture===!0&&Ln.getTransfer(y.map.colorSpace)===ei,decodeVideoTextureEmissive:xe&&y.emissiveMap.isVideoTexture===!0&&Ln.getTransfer(y.emissiveMap.colorSpace)===ei,premultipliedAlpha:y.premultipliedAlpha,doubleSided:y.side===vc,flipSided:y.side===ys,useDepthPacking:y.depthPacking>=0,depthPacking:y.depthPacking||0,index0AttributeName:y.index0AttributeName,extensionClipCullDistance:We&&y.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(We&&y.extensions.multiDraw===!0||tt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:y.customProgramCacheKey()};return Fn.vertexUv1s=l.has(1),Fn.vertexUv2s=l.has(2),Fn.vertexUv3s=l.has(3),l.clear(),Fn}function v(y){let x=[];if(y.shaderID?x.push(y.shaderID):(x.push(y.customVertexShaderID),x.push(y.customFragmentShaderID)),y.defines!==void 0)for(let S in y.defines)x.push(S),x.push(y.defines[S]);return y.isRawShaderMaterial===!1&&(P(x,y),R(x,y),x.push(n.outputColorSpace)),x.push(y.customProgramCacheKey),x.join()}function P(y,x){y.push(x.precision),y.push(x.outputColorSpace),y.push(x.envMapMode),y.push(x.envMapCubeUVHeight),y.push(x.mapUv),y.push(x.alphaMapUv),y.push(x.lightMapUv),y.push(x.aoMapUv),y.push(x.bumpMapUv),y.push(x.normalMapUv),y.push(x.displacementMapUv),y.push(x.emissiveMapUv),y.push(x.metalnessMapUv),y.push(x.roughnessMapUv),y.push(x.anisotropyMapUv),y.push(x.clearcoatMapUv),y.push(x.clearcoatNormalMapUv),y.push(x.clearcoatRoughnessMapUv),y.push(x.iridescenceMapUv),y.push(x.iridescenceThicknessMapUv),y.push(x.sheenColorMapUv),y.push(x.sheenRoughnessMapUv),y.push(x.specularMapUv),y.push(x.specularColorMapUv),y.push(x.specularIntensityMapUv),y.push(x.transmissionMapUv),y.push(x.thicknessMapUv),y.push(x.combine),y.push(x.fogExp2),y.push(x.sizeAttenuation),y.push(x.morphTargetsCount),y.push(x.morphAttributeCount),y.push(x.numDirLights),y.push(x.numPointLights),y.push(x.numSpotLights),y.push(x.numSpotLightMaps),y.push(x.numHemiLights),y.push(x.numRectAreaLights),y.push(x.numDirLightShadows),y.push(x.numPointLightShadows),y.push(x.numSpotLightShadows),y.push(x.numSpotLightShadowsWithMaps),y.push(x.numLightProbes),y.push(x.shadowMapType),y.push(x.toneMapping),y.push(x.numClippingPlanes),y.push(x.numClipIntersection),y.push(x.depthPacking)}function R(y,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),x.gradientMap&&a.enable(22),y.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.reversedDepthBuffer&&a.enable(4),x.skinning&&a.enable(5),x.morphTargets&&a.enable(6),x.morphNormals&&a.enable(7),x.morphColors&&a.enable(8),x.premultipliedAlpha&&a.enable(9),x.shadowMapEnabled&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.decodeVideoTextureEmissive&&a.enable(20),x.alphaToCoverage&&a.enable(21),y.push(a.mask)}function N(y){let x=_[y.type],S;if(x){let M=wc[x];S=Wte.clone(M.uniforms)}else S=y.uniforms;return S}function U(y,x){let S;for(let M=0,C=u.length;M<C;M++){let re=u[M];if(re.cacheKey===x){S=re,++S.usedTimes;break}}return S===void 0&&(S=new Zke(n,x,y,s),u.push(S)),S}function O(y){if(--y.usedTimes===0){let x=u.indexOf(y);u[x]=u[u.length-1],u.pop(),y.destroy()}}function I(y){c.remove(y)}function w(){c.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:N,acquireProgram:U,releaseProgram:O,releaseShaderCache:I,programs:u,dispose:w}}function nNe(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function iNe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function mne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function gne(){let n=[],e=0,t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,h,p,_,b,g){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:p,groupOrder:_,renderOrder:d.renderOrder,z:b,group:g},n[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=p,v.groupOrder=_,v.renderOrder=d.renderOrder,v.z=b,v.group=g),e++,v}function a(d,h,p,_,b,g){let v=o(d,h,p,_,b,g);p.transmission>0?i.push(v):p.transparent===!0?r.push(v):t.push(v)}function c(d,h,p,_,b,g){let v=o(d,h,p,_,b,g);p.transmission>0?i.unshift(v):p.transparent===!0?r.unshift(v):t.unshift(v)}function l(d,h){t.length>1&&t.sort(d||iNe),i.length>1&&i.sort(h||mne),r.length>1&&r.sort(h||mne)}function u(){for(let d=e,h=n.length;d<h;d++){let p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:c,finish:u,sort:l}}function rNe(){let n=new WeakMap;function e(i,r){let s=n.get(i),o;return s===void 0?(o=new gne,n.set(i,[o])):r>=s.length?(o=new gne,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function sNe(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new hn};break;case"SpotLight":t={position:new K,direction:new K,color:new hn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new hn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new hn,groundColor:new hn};break;case"RectAreaLight":t={color:new hn,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function oNe(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var aNe=0;function cNe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function lNe(n){let e=new sNe,t=oNe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new K);let r=new K,s=new Ti,o=new Ti;function a(l){let u=0,d=0,h=0;for(let y=0;y<9;y++)i.probe[y].set(0,0,0);let p=0,_=0,b=0,g=0,v=0,P=0,R=0,N=0,U=0,O=0,I=0;l.sort(cNe);for(let y=0,x=l.length;y<x;y++){let S=l[y],M=S.color,C=S.intensity,re=S.distance,Y=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)u+=M.r*C,d+=M.g*C,h+=M.b*C;else if(S.isLightProbe){for(let le=0;le<9;le++)i.probe[le].addScaledVector(S.sh.coefficients[le],C);I++}else if(S.isDirectionalLight){let le=e.get(S);if(le.color.copy(S.color).multiplyScalar(S.intensity),S.castShadow){let fe=S.shadow,oe=t.get(S);oe.shadowIntensity=fe.intensity,oe.shadowBias=fe.bias,oe.shadowNormalBias=fe.normalBias,oe.shadowRadius=fe.radius,oe.shadowMapSize=fe.mapSize,i.directionalShadow[p]=oe,i.directionalShadowMap[p]=Y,i.directionalShadowMatrix[p]=S.shadow.matrix,P++}i.directional[p]=le,p++}else if(S.isSpotLight){let le=e.get(S);le.position.setFromMatrixPosition(S.matrixWorld),le.color.copy(M).multiplyScalar(C),le.distance=re,le.coneCos=Math.cos(S.angle),le.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),le.decay=S.decay,i.spot[b]=le;let fe=S.shadow;if(S.map&&(i.spotLightMap[U]=S.map,U++,fe.updateMatrices(S),S.castShadow&&O++),i.spotLightMatrix[b]=fe.matrix,S.castShadow){let oe=t.get(S);oe.shadowIntensity=fe.intensity,oe.shadowBias=fe.bias,oe.shadowNormalBias=fe.normalBias,oe.shadowRadius=fe.radius,oe.shadowMapSize=fe.mapSize,i.spotShadow[b]=oe,i.spotShadowMap[b]=Y,N++}b++}else if(S.isRectAreaLight){let le=e.get(S);le.color.copy(M).multiplyScalar(C),le.halfWidth.set(S.width*.5,0,0),le.halfHeight.set(0,S.height*.5,0),i.rectArea[g]=le,g++}else if(S.isPointLight){let le=e.get(S);if(le.color.copy(S.color).multiplyScalar(S.intensity),le.distance=S.distance,le.decay=S.decay,S.castShadow){let fe=S.shadow,oe=t.get(S);oe.shadowIntensity=fe.intensity,oe.shadowBias=fe.bias,oe.shadowNormalBias=fe.normalBias,oe.shadowRadius=fe.radius,oe.shadowMapSize=fe.mapSize,oe.shadowCameraNear=fe.camera.near,oe.shadowCameraFar=fe.camera.far,i.pointShadow[_]=oe,i.pointShadowMap[_]=Y,i.pointShadowMatrix[_]=S.shadow.matrix,R++}i.point[_]=le,_++}else if(S.isHemisphereLight){let le=e.get(S);le.skyColor.copy(S.color).multiplyScalar(C),le.groundColor.copy(S.groundColor).multiplyScalar(C),i.hemi[v]=le,v++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_FLOAT_1,i.rectAreaLTC2=$e.LTC_FLOAT_2):(i.rectAreaLTC1=$e.LTC_HALF_1,i.rectAreaLTC2=$e.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let w=i.hash;(w.directionalLength!==p||w.pointLength!==_||w.spotLength!==b||w.rectAreaLength!==g||w.hemiLength!==v||w.numDirectionalShadows!==P||w.numPointShadows!==R||w.numSpotShadows!==N||w.numSpotMaps!==U||w.numLightProbes!==I)&&(i.directional.length=p,i.spot.length=b,i.rectArea.length=g,i.point.length=_,i.hemi.length=v,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=N+U-O,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=I,w.directionalLength=p,w.pointLength=_,w.spotLength=b,w.rectAreaLength=g,w.hemiLength=v,w.numDirectionalShadows=P,w.numPointShadows=R,w.numSpotShadows=N,w.numSpotMaps=U,w.numLightProbes=I,i.version=aNe++)}function c(l,u){let d=0,h=0,p=0,_=0,b=0,g=u.matrixWorldInverse;for(let v=0,P=l.length;v<P;v++){let R=l[v];if(R.isDirectionalLight){let N=i.directional[d];N.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(g),d++}else if(R.isSpotLight){let N=i.spot[p];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(g),N.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(g),p++}else if(R.isRectAreaLight){let N=i.rectArea[_];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(g),o.identity(),s.copy(R.matrixWorld),s.premultiply(g),o.extractRotation(s),N.halfWidth.set(R.width*.5,0,0),N.halfHeight.set(0,R.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),_++}else if(R.isPointLight){let N=i.point[h];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(g),h++}else if(R.isHemisphereLight){let N=i.hemi[b];N.direction.setFromMatrixPosition(R.matrixWorld),N.direction.transformDirection(g),b++}}}return{setup:a,setupView:c,state:i}}function _ne(n){let e=new lNe(n),t=[],i=[];function r(u){l.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function uNe(n){let e=new WeakMap;function t(r,s=0){let o=e.get(r),a;return o===void 0?(a=new _ne(n),e.set(r,[a])):s>=o.length?(a=new _ne(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var dNe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hNe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fNe(n,e,t){let i=new d_,r=new qe,s=new qe,o=new Zn,a=new fM({depthPacking:kte}),c=new pM,l={},u=t.maxTextureSize,d={[Kl]:ys,[ys]:Kl,[vc]:vc},h=new Bo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:dNe,fragmentShader:hNe}),p=h.clone();p.defines.HORIZONTAL_PASS=1;let _=new po;_.setAttribute("position",new ho(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new mo(_,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=n4;let v=this.type;this.render=function(O,I,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||O.length===0)return;let y=n.getRenderTarget(),x=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),M=n.state;M.setBlending(bc),M.buffers.depth.getReversed()===!0?M.buffers.color.setClear(0,0,0,0):M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);let C=v!==yc&&this.type===yc,re=v===yc&&this.type!==yc;for(let Y=0,le=O.length;Y<le;Y++){let fe=O[Y],oe=fe.shadow;if(oe===void 0){zt("WebGLShadowMap:",fe,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;r.copy(oe.mapSize);let we=oe.getFrameExtents();if(r.multiply(we),s.copy(oe.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/we.x),r.x=s.x*we.x,oe.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/we.y),r.y=s.y*we.y,oe.mapSize.y=s.y)),oe.map===null||C===!0||re===!0){let Qe=this.type!==yc?{minFilter:Xs,magFilter:Xs}:{};oe.map!==null&&oe.map.dispose(),oe.map=new _c(r.x,r.y,Qe),oe.map.texture.name=fe.name+".shadowMap",oe.camera.updateProjectionMatrix()}n.setRenderTarget(oe.map),n.clear();let Ae=oe.getViewportCount();for(let Qe=0;Qe<Ae;Qe++){let ut=oe.getViewport(Qe);o.set(s.x*ut.x,s.y*ut.y,s.x*ut.z,s.y*ut.w),M.viewport(o),oe.updateMatrices(fe,Qe),i=oe.getFrustum(),N(I,w,oe.camera,fe,this.type)}oe.isPointLightShadow!==!0&&this.type===yc&&P(oe,w),oe.needsUpdate=!1}v=this.type,g.needsUpdate=!1,n.setRenderTarget(y,x,S)};function P(O,I){let w=e.update(b);h.defines.VSM_SAMPLES!==O.blurSamples&&(h.defines.VSM_SAMPLES=O.blurSamples,p.defines.VSM_SAMPLES=O.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new _c(r.x,r.y)),h.uniforms.shadow_pass.value=O.map.texture,h.uniforms.resolution.value=O.mapSize,h.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,w,h,b,null),p.uniforms.shadow_pass.value=O.mapPass.texture,p.uniforms.resolution.value=O.mapSize,p.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,w,p,b,null)}function R(O,I,w,y){let x=null,S=w.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(S!==void 0)x=S;else if(x=w.isPointLight===!0?c:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){let M=x.uuid,C=I.uuid,re=l[M];re===void 0&&(re={},l[M]=re);let Y=re[C];Y===void 0&&(Y=x.clone(),re[C]=Y,I.addEventListener("dispose",U)),x=Y}if(x.visible=I.visible,x.wireframe=I.wireframe,y===yc?x.side=I.shadowSide!==null?I.shadowSide:I.side:x.side=I.shadowSide!==null?I.shadowSide:d[I.side],x.alphaMap=I.alphaMap,x.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,x.map=I.map,x.clipShadows=I.clipShadows,x.clippingPlanes=I.clippingPlanes,x.clipIntersection=I.clipIntersection,x.displacementMap=I.displacementMap,x.displacementScale=I.displacementScale,x.displacementBias=I.displacementBias,x.wireframeLinewidth=I.wireframeLinewidth,x.linewidth=I.linewidth,w.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let M=n.properties.get(x);M.light=w}return x}function N(O,I,w,y,x){if(O.visible===!1)return;if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&x===yc)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,O.matrixWorld);let C=e.update(O),re=O.material;if(Array.isArray(re)){let Y=C.groups;for(let le=0,fe=Y.length;le<fe;le++){let oe=Y[le],we=re[oe.materialIndex];if(we&&we.visible){let Ae=R(O,we,y,x);O.onBeforeShadow(n,O,I,w,C,Ae,oe),n.renderBufferDirect(w,null,C,Ae,O,oe),O.onAfterShadow(n,O,I,w,C,Ae,oe)}}}else if(re.visible){let Y=R(O,re,y,x);O.onBeforeShadow(n,O,I,w,C,Y,null),n.renderBufferDirect(w,null,C,Y,O,null),O.onAfterShadow(n,O,I,w,C,Y,null)}}let M=O.children;for(let C=0,re=M.length;C<re;C++)N(M[C],I,w,y,x)}function U(O){O.target.removeEventListener("dispose",U);for(let w in l){let y=l[w],x=O.target.uuid;x in y&&(y[x].dispose(),delete y[x])}}}var pNe={[IM]:TM,[SM]:MM,[CM]:DM,[kf]:AM,[TM]:IM,[MM]:SM,[DM]:CM,[AM]:kf};function mNe(n,e){function t(){let j=!1,Be=new Zn,ke=null,Ne=new Zn(0,0,0,0);return{setMask:function(ge){ke!==ge&&!j&&(n.colorMask(ge,ge,ge,ge),ke=ge)},setLocked:function(ge){j=ge},setClear:function(ge,pe,We,Ct,Fn){Fn===!0&&(ge*=Ct,pe*=Ct,We*=Ct),Be.set(ge,pe,We,Ct),Ne.equals(Be)===!1&&(n.clearColor(ge,pe,We,Ct),Ne.copy(Be))},reset:function(){j=!1,ke=null,Ne.set(-1,0,0,0)}}}function i(){let j=!1,Be=!1,ke=null,Ne=null,ge=null;return{setReversed:function(pe){if(Be!==pe){let We=e.get("EXT_clip_control");pe?We.clipControlEXT(We.LOWER_LEFT_EXT,We.ZERO_TO_ONE_EXT):We.clipControlEXT(We.LOWER_LEFT_EXT,We.NEGATIVE_ONE_TO_ONE_EXT),Be=pe;let Ct=ge;ge=null,this.setClear(Ct)}},getReversed:function(){return Be},setTest:function(pe){pe?me(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(pe){ke!==pe&&!j&&(n.depthMask(pe),ke=pe)},setFunc:function(pe){if(Be&&(pe=pNe[pe]),Ne!==pe){switch(pe){case IM:n.depthFunc(n.NEVER);break;case TM:n.depthFunc(n.ALWAYS);break;case SM:n.depthFunc(n.LESS);break;case kf:n.depthFunc(n.LEQUAL);break;case CM:n.depthFunc(n.EQUAL);break;case AM:n.depthFunc(n.GEQUAL);break;case MM:n.depthFunc(n.GREATER);break;case DM:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ne=pe}},setLocked:function(pe){j=pe},setClear:function(pe){ge!==pe&&(Be&&(pe=1-pe),n.clearDepth(pe),ge=pe)},reset:function(){j=!1,ke=null,Ne=null,ge=null,Be=!1}}}function r(){let j=!1,Be=null,ke=null,Ne=null,ge=null,pe=null,We=null,Ct=null,Fn=null;return{setTest:function(Rn){j||(Rn?me(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(Rn){Be!==Rn&&!j&&(n.stencilMask(Rn),Be=Rn)},setFunc:function(Rn,Si,Hr){(ke!==Rn||Ne!==Si||ge!==Hr)&&(n.stencilFunc(Rn,Si,Hr),ke=Rn,Ne=Si,ge=Hr)},setOp:function(Rn,Si,Hr){(pe!==Rn||We!==Si||Ct!==Hr)&&(n.stencilOp(Rn,Si,Hr),pe=Rn,We=Si,Ct=Hr)},setLocked:function(Rn){j=Rn},setClear:function(Rn){Fn!==Rn&&(n.clearStencil(Rn),Fn=Rn)},reset:function(){j=!1,Be=null,ke=null,Ne=null,ge=null,pe=null,We=null,Ct=null,Fn=null}}}let s=new t,o=new i,a=new r,c=new WeakMap,l=new WeakMap,u={},d={},h=new WeakMap,p=[],_=null,b=!1,g=null,v=null,P=null,R=null,N=null,U=null,O=null,I=new hn(0,0,0),w=0,y=!1,x=null,S=null,M=null,C=null,re=null,Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),le=!1,fe=0,oe=n.getParameter(n.VERSION);oe.indexOf("WebGL")!==-1?(fe=parseFloat(/^WebGL (\d)/.exec(oe)[1]),le=fe>=1):oe.indexOf("OpenGL ES")!==-1&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),le=fe>=2);let we=null,Ae={},Qe=n.getParameter(n.SCISSOR_BOX),ut=n.getParameter(n.VIEWPORT),rt=new Zn().fromArray(Qe),Vt=new Zn().fromArray(ut);function Ht(j,Be,ke,Ne){let ge=new Uint8Array(4),pe=n.createTexture();n.bindTexture(j,pe),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let We=0;We<ke;We++)j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY?n.texImage3D(Be,0,n.RGBA,1,1,Ne,0,n.RGBA,n.UNSIGNED_BYTE,ge):n.texImage2D(Be+We,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ge);return pe}let ue={};ue[n.TEXTURE_2D]=Ht(n.TEXTURE_2D,n.TEXTURE_2D,1),ue[n.TEXTURE_CUBE_MAP]=Ht(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[n.TEXTURE_2D_ARRAY]=Ht(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ue[n.TEXTURE_3D]=Ht(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),me(n.DEPTH_TEST),o.setFunc(kf),be(!1),Se(t4),me(n.CULL_FACE),ye(bc);function me(j){u[j]!==!0&&(n.enable(j),u[j]=!0)}function Xe(j){u[j]!==!1&&(n.disable(j),u[j]=!1)}function ft(j,Be){return d[j]!==Be?(n.bindFramebuffer(j,Be),d[j]=Be,j===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Be),j===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Be),!0):!1}function tt(j,Be){let ke=p,Ne=!1;if(j){ke=h.get(Be),ke===void 0&&(ke=[],h.set(Be,ke));let ge=j.textures;if(ke.length!==ge.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let pe=0,We=ge.length;pe<We;pe++)ke[pe]=n.COLOR_ATTACHMENT0+pe;ke.length=ge.length,Ne=!0}}else ke[0]!==n.BACK&&(ke[0]=n.BACK,Ne=!0);Ne&&n.drawBuffers(ke)}function jt(j){return _!==j?(n.useProgram(j),_=j,!0):!1}let In={[Rd]:n.FUNC_ADD,[ste]:n.FUNC_SUBTRACT,[ote]:n.FUNC_REVERSE_SUBTRACT};In[ate]=n.MIN,In[cte]=n.MAX;let Tt={[lte]:n.ZERO,[ute]:n.ONE,[dte]:n.SRC_COLOR,[XA]:n.SRC_ALPHA,[_te]:n.SRC_ALPHA_SATURATE,[mte]:n.DST_COLOR,[fte]:n.DST_ALPHA,[hte]:n.ONE_MINUS_SRC_COLOR,[YA]:n.ONE_MINUS_SRC_ALPHA,[gte]:n.ONE_MINUS_DST_COLOR,[pte]:n.ONE_MINUS_DST_ALPHA,[yte]:n.CONSTANT_COLOR,[vte]:n.ONE_MINUS_CONSTANT_COLOR,[bte]:n.CONSTANT_ALPHA,[xte]:n.ONE_MINUS_CONSTANT_ALPHA};function ye(j,Be,ke,Ne,ge,pe,We,Ct,Fn,Rn){if(j===bc){b===!0&&(Xe(n.BLEND),b=!1);return}if(b===!1&&(me(n.BLEND),b=!0),j!==rte){if(j!==g||Rn!==y){if((v!==Rd||N!==Rd)&&(n.blendEquation(n.FUNC_ADD),v=Rd,N=Rd),Rn)switch(j){case Pf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i4:n.blendFunc(n.ONE,n.ONE);break;case r4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case s4:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:dn("WebGLState: Invalid blending: ",j);break}else switch(j){case Pf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i4:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case r4:dn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case s4:dn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:dn("WebGLState: Invalid blending: ",j);break}P=null,R=null,U=null,O=null,I.set(0,0,0),w=0,g=j,y=Rn}return}ge=ge||Be,pe=pe||ke,We=We||Ne,(Be!==v||ge!==N)&&(n.blendEquationSeparate(In[Be],In[ge]),v=Be,N=ge),(ke!==P||Ne!==R||pe!==U||We!==O)&&(n.blendFuncSeparate(Tt[ke],Tt[Ne],Tt[pe],Tt[We]),P=ke,R=Ne,U=pe,O=We),(Ct.equals(I)===!1||Fn!==w)&&(n.blendColor(Ct.r,Ct.g,Ct.b,Fn),I.copy(Ct),w=Fn),g=j,y=!1}function B(j,Be){j.side===vc?Xe(n.CULL_FACE):me(n.CULL_FACE);let ke=j.side===ys;Be&&(ke=!ke),be(ke),j.blending===Pf&&j.transparent===!1?ye(bc):ye(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),o.setFunc(j.depthFunc),o.setTest(j.depthTest),o.setMask(j.depthWrite),s.setMask(j.colorWrite);let Ne=j.stencilWrite;a.setTest(Ne),Ne&&(a.setMask(j.stencilWriteMask),a.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),a.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),xe(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?me(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function be(j){x!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),x=j)}function Se(j){j!==tte?(me(n.CULL_FACE),j!==S&&(j===t4?n.cullFace(n.BACK):j===nte?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),S=j}function Pe(j){j!==M&&(le&&n.lineWidth(j),M=j)}function xe(j,Be,ke){j?(me(n.POLYGON_OFFSET_FILL),(C!==Be||re!==ke)&&(n.polygonOffset(Be,ke),C=Be,re=ke)):Xe(n.POLYGON_OFFSET_FILL)}function Fe(j){j?me(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function Ce(j){j===void 0&&(j=n.TEXTURE0+Y-1),we!==j&&(n.activeTexture(j),we=j)}function Ge(j,Be,ke){ke===void 0&&(we===null?ke=n.TEXTURE0+Y-1:ke=we);let Ne=Ae[ke];Ne===void 0&&(Ne={type:void 0,texture:void 0},Ae[ke]=Ne),(Ne.type!==j||Ne.texture!==Be)&&(we!==ke&&(n.activeTexture(ke),we=ke),n.bindTexture(j,Be||ue[j]),Ne.type=j,Ne.texture=Be)}function z(){let j=Ae[we];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function k(){try{n.compressedTexImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function X(){try{n.compressedTexImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function ce(){try{n.texSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function he(){try{n.texSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function J(){try{n.compressedTexSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function Ze(){try{n.compressedTexSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function Ue(){try{n.texStorage2D(...arguments)}catch(j){j("WebGLState:",j)}}function dt(){try{n.texStorage3D(...arguments)}catch(j){j("WebGLState:",j)}}function nt(){try{n.texImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function _e(){try{n.texImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function Me(j){rt.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),rt.copy(j))}function vt(j){Vt.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),Vt.copy(j))}function ht(j,Be){let ke=l.get(Be);ke===void 0&&(ke=new WeakMap,l.set(Be,ke));let Ne=ke.get(j);Ne===void 0&&(Ne=n.getUniformBlockIndex(Be,j.name),ke.set(j,Ne))}function He(j,Be){let Ne=l.get(Be).get(j);c.get(Be)!==Ne&&(n.uniformBlockBinding(Be,Ne,j.__bindingPointIndex),c.set(Be,Ne))}function Rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},we=null,Ae={},d={},h=new WeakMap,p=[],_=null,b=!1,g=null,v=null,P=null,R=null,N=null,U=null,O=null,I=new hn(0,0,0),w=0,y=!1,x=null,S=null,M=null,C=null,re=null,rt.set(0,0,n.canvas.width,n.canvas.height),Vt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:me,disable:Xe,bindFramebuffer:ft,drawBuffers:tt,useProgram:jt,setBlending:ye,setMaterial:B,setFlipSided:be,setCullFace:Se,setLineWidth:Pe,setPolygonOffset:xe,setScissorTest:Fe,activeTexture:Ce,bindTexture:Ge,unbindTexture:z,compressedTexImage2D:k,compressedTexImage3D:X,texImage2D:nt,texImage3D:_e,updateUBOMapping:ht,uniformBlockBinding:He,texStorage2D:Ue,texStorage3D:dt,texSubImage2D:ce,texSubImage3D:he,compressedTexSubImage2D:J,compressedTexSubImage3D:Ze,scissor:Me,viewport:vt,reset:Rt}}function gNe(n,e,t,i,r,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new qe,u=new WeakMap,d,h=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(z,k){return p?new OffscreenCanvas(z,k):Ab("canvas")}function b(z,k,X){let ce=1,he=Ge(z);if((he.width>X||he.height>X)&&(ce=X/Math.max(he.width,he.height)),ce<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){let J=Math.floor(ce*he.width),Ze=Math.floor(ce*he.height);d===void 0&&(d=_(J,Ze));let Ue=k?_(J,Ze):d;return Ue.width=J,Ue.height=Ze,Ue.getContext("2d").drawImage(z,0,0,J,Ze),zt("WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+J+"x"+Ze+")."),Ue}else return"data"in z&&zt("WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),z;return z}function g(z){return z.generateMipmaps}function v(z){n.generateMipmap(z)}function P(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function R(z,k,X,ce,he=!1){if(z!==null){if(n[z]!==void 0)return n[z];zt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let J=k;if(k===n.RED&&(X===n.FLOAT&&(J=n.R32F),X===n.HALF_FLOAT&&(J=n.R16F),X===n.UNSIGNED_BYTE&&(J=n.R8)),k===n.RED_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.R8UI),X===n.UNSIGNED_SHORT&&(J=n.R16UI),X===n.UNSIGNED_INT&&(J=n.R32UI),X===n.BYTE&&(J=n.R8I),X===n.SHORT&&(J=n.R16I),X===n.INT&&(J=n.R32I)),k===n.RG&&(X===n.FLOAT&&(J=n.RG32F),X===n.HALF_FLOAT&&(J=n.RG16F),X===n.UNSIGNED_BYTE&&(J=n.RG8)),k===n.RG_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RG8UI),X===n.UNSIGNED_SHORT&&(J=n.RG16UI),X===n.UNSIGNED_INT&&(J=n.RG32UI),X===n.BYTE&&(J=n.RG8I),X===n.SHORT&&(J=n.RG16I),X===n.INT&&(J=n.RG32I)),k===n.RGB_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RGB8UI),X===n.UNSIGNED_SHORT&&(J=n.RGB16UI),X===n.UNSIGNED_INT&&(J=n.RGB32UI),X===n.BYTE&&(J=n.RGB8I),X===n.SHORT&&(J=n.RGB16I),X===n.INT&&(J=n.RGB32I)),k===n.RGBA_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RGBA8UI),X===n.UNSIGNED_SHORT&&(J=n.RGBA16UI),X===n.UNSIGNED_INT&&(J=n.RGBA32UI),X===n.BYTE&&(J=n.RGBA8I),X===n.SHORT&&(J=n.RGBA16I),X===n.INT&&(J=n.RGBA32I)),k===n.RGB&&(X===n.UNSIGNED_INT_5_9_9_9_REV&&(J=n.RGB9_E5),X===n.UNSIGNED_INT_10F_11F_11F_REV&&(J=n.R11F_G11F_B10F)),k===n.RGBA){let Ze=he?Sb:Ln.getTransfer(ce);X===n.FLOAT&&(J=n.RGBA32F),X===n.HALF_FLOAT&&(J=n.RGBA16F),X===n.UNSIGNED_BYTE&&(J=Ze===ei?n.SRGB8_ALPHA8:n.RGBA8),X===n.UNSIGNED_SHORT_4_4_4_4&&(J=n.RGBA4),X===n.UNSIGNED_SHORT_5_5_5_1&&(J=n.RGB5_A1)}return(J===n.R16F||J===n.R32F||J===n.RG16F||J===n.RG32F||J===n.RGBA16F||J===n.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function N(z,k){let X;return z?k===null||k===Fd||k===__?X=n.DEPTH24_STENCIL8:k===xc?X=n.DEPTH32F_STENCIL8:k===g_&&(X=n.DEPTH24_STENCIL8,zt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Fd||k===__?X=n.DEPTH_COMPONENT24:k===xc?X=n.DEPTH_COMPONENT32F:k===g_&&(X=n.DEPTH_COMPONENT16),X}function U(z,k){return g(z)===!0||z.isFramebufferTexture&&z.minFilter!==Xs&&z.minFilter!==fo?Math.log2(Math.max(k.width,k.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?k.mipmaps.length:1}function O(z){let k=z.target;k.removeEventListener("dispose",O),w(k),k.isVideoTexture&&u.delete(k)}function I(z){let k=z.target;k.removeEventListener("dispose",I),x(k)}function w(z){let k=i.get(z);if(k.__webglInit===void 0)return;let X=z.source,ce=h.get(X);if(ce){let he=ce[k.__cacheKey];he.usedTimes--,he.usedTimes===0&&y(z),Object.keys(ce).length===0&&h.delete(X)}i.remove(z)}function y(z){let k=i.get(z);n.deleteTexture(k.__webglTexture);let X=z.source,ce=h.get(X);delete ce[k.__cacheKey],o.memory.textures--}function x(z){let k=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let ce=0;ce<6;ce++){if(Array.isArray(k.__webglFramebuffer[ce]))for(let he=0;he<k.__webglFramebuffer[ce].length;he++)n.deleteFramebuffer(k.__webglFramebuffer[ce][he]);else n.deleteFramebuffer(k.__webglFramebuffer[ce]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[ce])}else{if(Array.isArray(k.__webglFramebuffer))for(let ce=0;ce<k.__webglFramebuffer.length;ce++)n.deleteFramebuffer(k.__webglFramebuffer[ce]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let ce=0;ce<k.__webglColorRenderbuffer.length;ce++)k.__webglColorRenderbuffer[ce]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[ce]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}let X=z.textures;for(let ce=0,he=X.length;ce<he;ce++){let J=i.get(X[ce]);J.__webglTexture&&(n.deleteTexture(J.__webglTexture),o.memory.textures--),i.remove(X[ce])}i.remove(z)}let S=0;function M(){S=0}function C(){let z=S;return z>=r.maxTextures&&zt("WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),S+=1,z}function re(z){let k=[];return k.push(z.wrapS),k.push(z.wrapT),k.push(z.wrapR||0),k.push(z.magFilter),k.push(z.minFilter),k.push(z.anisotropy),k.push(z.internalFormat),k.push(z.format),k.push(z.type),k.push(z.generateMipmaps),k.push(z.premultiplyAlpha),k.push(z.flipY),k.push(z.unpackAlignment),k.push(z.colorSpace),k.join()}function Y(z,k){let X=i.get(z);if(z.isVideoTexture&&Fe(z),z.isRenderTargetTexture===!1&&z.isExternalTexture!==!0&&z.version>0&&X.__version!==z.version){let ce=z.image;if(ce===null)zt("WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)zt("WebGLRenderer: Texture marked for update but image is incomplete");else{ue(X,z,k);return}}else z.isExternalTexture&&(X.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,X.__webglTexture,n.TEXTURE0+k)}function le(z,k){let X=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&X.__version!==z.version){ue(X,z,k);return}else z.isExternalTexture&&(X.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,X.__webglTexture,n.TEXTURE0+k)}function fe(z,k){let X=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&X.__version!==z.version){ue(X,z,k);return}t.bindTexture(n.TEXTURE_3D,X.__webglTexture,n.TEXTURE0+k)}function oe(z,k){let X=i.get(z);if(z.version>0&&X.__version!==z.version){me(X,z,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+k)}let we={[QA]:n.REPEAT,[gc]:n.CLAMP_TO_EDGE,[JA]:n.MIRRORED_REPEAT},Ae={[Xs]:n.NEAREST,[Rte]:n.NEAREST_MIPMAP_NEAREST,[nx]:n.NEAREST_MIPMAP_LINEAR,[fo]:n.LINEAR,[NM]:n.LINEAR_MIPMAP_NEAREST,[Ld]:n.LINEAR_MIPMAP_LINEAR},Qe={[Ote]:n.NEVER,[zte]:n.ALWAYS,[Lte]:n.LESS,[p4]:n.LEQUAL,[Fte]:n.EQUAL,[Bte]:n.GEQUAL,[Vte]:n.GREATER,[Ute]:n.NOTEQUAL};function ut(z,k){if(k.type===xc&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===fo||k.magFilter===NM||k.magFilter===nx||k.magFilter===Ld||k.minFilter===fo||k.minFilter===NM||k.minFilter===nx||k.minFilter===Ld)&&zt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,we[k.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,we[k.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,we[k.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,Ae[k.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,Ae[k.minFilter]),k.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,Qe[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Xs||k.minFilter!==nx&&k.minFilter!==Ld||k.type===xc&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){let X=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function rt(z,k){let X=!1;z.__webglInit===void 0&&(z.__webglInit=!0,k.addEventListener("dispose",O));let ce=k.source,he=h.get(ce);he===void 0&&(he={},h.set(ce,he));let J=re(k);if(J!==z.__cacheKey){he[J]===void 0&&(he[J]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,X=!0),he[J].usedTimes++;let Ze=he[z.__cacheKey];Ze!==void 0&&(he[z.__cacheKey].usedTimes--,Ze.usedTimes===0&&y(k)),z.__cacheKey=J,z.__webglTexture=he[J].texture}return X}function Vt(z,k,X){return Math.floor(Math.floor(z/X)/k)}function Ht(z,k,X,ce){let J=z.updateRanges;if(J.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,k.width,k.height,X,ce,k.data);else{J.sort((_e,Me)=>_e.start-Me.start);let Ze=0;for(let _e=1;_e<J.length;_e++){let Me=J[Ze],vt=J[_e],ht=Me.start+Me.count,He=Vt(vt.start,k.width,4),Rt=Vt(Me.start,k.width,4);vt.start<=ht+1&&He===Rt&&Vt(vt.start+vt.count-1,k.width,4)===He?Me.count=Math.max(Me.count,vt.start+vt.count-Me.start):(++Ze,J[Ze]=vt)}J.length=Ze+1;let Ue=n.getParameter(n.UNPACK_ROW_LENGTH),dt=n.getParameter(n.UNPACK_SKIP_PIXELS),nt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,k.width);for(let _e=0,Me=J.length;_e<Me;_e++){let vt=J[_e],ht=Math.floor(vt.start/4),He=Math.ceil(vt.count/4),Rt=ht%k.width,j=Math.floor(ht/k.width),Be=He,ke=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Rt),n.pixelStorei(n.UNPACK_SKIP_ROWS,j),t.texSubImage2D(n.TEXTURE_2D,0,Rt,j,Be,ke,X,ce,k.data)}z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ue),n.pixelStorei(n.UNPACK_SKIP_PIXELS,dt),n.pixelStorei(n.UNPACK_SKIP_ROWS,nt)}}function ue(z,k,X){let ce=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ce=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ce=n.TEXTURE_3D);let he=rt(z,k),J=k.source;t.bindTexture(ce,z.__webglTexture,n.TEXTURE0+X);let Ze=i.get(J);if(J.version!==Ze.__version||he===!0){t.activeTexture(n.TEXTURE0+X);let Ue=Ln.getPrimaries(Ln.workingColorSpace),dt=k.colorSpace===Zl?null:Ln.getPrimaries(k.colorSpace),nt=k.colorSpace===Zl||Ue===dt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let _e=b(k.image,!1,r.maxTextureSize);_e=Ce(k,_e);let Me=s.convert(k.format,k.colorSpace),vt=s.convert(k.type),ht=R(k.internalFormat,Me,vt,k.colorSpace,k.isVideoTexture);ut(ce,k);let He,Rt=k.mipmaps,j=k.isVideoTexture!==!0,Be=Ze.__version===void 0||he===!0,ke=J.dataReady,Ne=U(k,_e);if(k.isDepthTexture)ht=N(k.format===y_,k.type),Be&&(j?t.texStorage2D(n.TEXTURE_2D,1,ht,_e.width,_e.height):t.texImage2D(n.TEXTURE_2D,0,ht,_e.width,_e.height,0,Me,vt,null));else if(k.isDataTexture)if(Rt.length>0){j&&Be&&t.texStorage2D(n.TEXTURE_2D,Ne,ht,Rt[0].width,Rt[0].height);for(let ge=0,pe=Rt.length;ge<pe;ge++)He=Rt[ge],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,He.width,He.height,Me,vt,He.data):t.texImage2D(n.TEXTURE_2D,ge,ht,He.width,He.height,0,Me,vt,He.data);k.generateMipmaps=!1}else j?(Be&&t.texStorage2D(n.TEXTURE_2D,Ne,ht,_e.width,_e.height),ke&&Ht(k,_e,Me,vt)):t.texImage2D(n.TEXTURE_2D,0,ht,_e.width,_e.height,0,Me,vt,_e.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){j&&Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,ht,Rt[0].width,Rt[0].height,_e.depth);for(let ge=0,pe=Rt.length;ge<pe;ge++)if(He=Rt[ge],k.format!==zo)if(Me!==null)if(j){if(ke)if(k.layerUpdates.size>0){let We=w4(He.width,He.height,k.format,k.type);for(let Ct of k.layerUpdates){let Fn=He.data.subarray(Ct*We/He.data.BYTES_PER_ELEMENT,(Ct+1)*We/He.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,Ct,He.width,He.height,1,Me,Fn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,He.width,He.height,_e.depth,Me,He.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ge,ht,He.width,He.height,_e.depth,0,He.data,0,0);else zt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else j?ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,He.width,He.height,_e.depth,Me,vt,He.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ge,ht,He.width,He.height,_e.depth,0,Me,vt,He.data)}else{j&&Be&&t.texStorage2D(n.TEXTURE_2D,Ne,ht,Rt[0].width,Rt[0].height);for(let ge=0,pe=Rt.length;ge<pe;ge++)He=Rt[ge],k.format!==zo?Me!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,ge,0,0,He.width,He.height,Me,He.data):t.compressedTexImage2D(n.TEXTURE_2D,ge,ht,He.width,He.height,0,He.data):zt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,He.width,He.height,Me,vt,He.data):t.texImage2D(n.TEXTURE_2D,ge,ht,He.width,He.height,0,Me,vt,He.data)}else if(k.isDataArrayTexture)if(j){if(Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,ht,_e.width,_e.height,_e.depth),ke)if(k.layerUpdates.size>0){let ge=w4(_e.width,_e.height,k.format,k.type);for(let pe of k.layerUpdates){let We=_e.data.subarray(pe*ge/_e.data.BYTES_PER_ELEMENT,(pe+1)*ge/_e.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,pe,_e.width,_e.height,1,Me,vt,We)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,Me,vt,_e.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ht,_e.width,_e.height,_e.depth,0,Me,vt,_e.data);else if(k.isData3DTexture)j?(Be&&t.texStorage3D(n.TEXTURE_3D,Ne,ht,_e.width,_e.height,_e.depth),ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,Me,vt,_e.data)):t.texImage3D(n.TEXTURE_3D,0,ht,_e.width,_e.height,_e.depth,0,Me,vt,_e.data);else if(k.isFramebufferTexture){if(Be)if(j)t.texStorage2D(n.TEXTURE_2D,Ne,ht,_e.width,_e.height);else{let ge=_e.width,pe=_e.height;for(let We=0;We<Ne;We++)t.texImage2D(n.TEXTURE_2D,We,ht,ge,pe,0,Me,vt,null),ge>>=1,pe>>=1}}else if(Rt.length>0){if(j&&Be){let ge=Ge(Rt[0]);t.texStorage2D(n.TEXTURE_2D,Ne,ht,ge.width,ge.height)}for(let ge=0,pe=Rt.length;ge<pe;ge++)He=Rt[ge],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,Me,vt,He):t.texImage2D(n.TEXTURE_2D,ge,ht,Me,vt,He);k.generateMipmaps=!1}else if(j){if(Be){let ge=Ge(_e);t.texStorage2D(n.TEXTURE_2D,Ne,ht,ge.width,ge.height)}ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Me,vt,_e)}else t.texImage2D(n.TEXTURE_2D,0,ht,Me,vt,_e);g(k)&&v(ce),Ze.__version=J.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function me(z,k,X){if(k.image.length!==6)return;let ce=rt(z,k),he=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+X);let J=i.get(he);if(he.version!==J.__version||ce===!0){t.activeTexture(n.TEXTURE0+X);let Ze=Ln.getPrimaries(Ln.workingColorSpace),Ue=k.colorSpace===Zl?null:Ln.getPrimaries(k.colorSpace),dt=k.colorSpace===Zl||Ze===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let nt=k.isCompressedTexture||k.image[0].isCompressedTexture,_e=k.image[0]&&k.image[0].isDataTexture,Me=[];for(let pe=0;pe<6;pe++)!nt&&!_e?Me[pe]=b(k.image[pe],!0,r.maxCubemapSize):Me[pe]=_e?k.image[pe].image:k.image[pe],Me[pe]=Ce(k,Me[pe]);let vt=Me[0],ht=s.convert(k.format,k.colorSpace),He=s.convert(k.type),Rt=R(k.internalFormat,ht,He,k.colorSpace),j=k.isVideoTexture!==!0,Be=J.__version===void 0||ce===!0,ke=he.dataReady,Ne=U(k,vt);ut(n.TEXTURE_CUBE_MAP,k);let ge;if(nt){j&&Be&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,Rt,vt.width,vt.height);for(let pe=0;pe<6;pe++){ge=Me[pe].mipmaps;for(let We=0;We<ge.length;We++){let Ct=ge[We];k.format!==zo?ht!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We,0,0,Ct.width,Ct.height,ht,Ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We,Rt,Ct.width,Ct.height,0,Ct.data):zt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We,0,0,Ct.width,Ct.height,ht,He,Ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We,Rt,Ct.width,Ct.height,0,ht,He,Ct.data)}}}else{if(ge=k.mipmaps,j&&Be){ge.length>0&&Ne++;let pe=Ge(Me[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,Rt,pe.width,pe.height)}for(let pe=0;pe<6;pe++)if(_e){j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Me[pe].width,Me[pe].height,ht,He,Me[pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Rt,Me[pe].width,Me[pe].height,0,ht,He,Me[pe].data);for(let We=0;We<ge.length;We++){let Fn=ge[We].image[pe].image;j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We+1,0,0,Fn.width,Fn.height,ht,He,Fn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We+1,Rt,Fn.width,Fn.height,0,ht,He,Fn.data)}}else{j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ht,He,Me[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Rt,ht,He,Me[pe]);for(let We=0;We<ge.length;We++){let Ct=ge[We];j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We+1,0,0,ht,He,Ct.image[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,We+1,Rt,ht,He,Ct.image[pe])}}}g(k)&&v(n.TEXTURE_CUBE_MAP),J.__version=he.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function Xe(z,k,X,ce,he,J){let Ze=s.convert(X.format,X.colorSpace),Ue=s.convert(X.type),dt=R(X.internalFormat,Ze,Ue,X.colorSpace),nt=i.get(k),_e=i.get(X);if(_e.__renderTarget=k,!nt.__hasExternalTextures){let Me=Math.max(1,k.width>>J),vt=Math.max(1,k.height>>J);he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?t.texImage3D(he,J,dt,Me,vt,k.depth,0,Ze,Ue,null):t.texImage2D(he,J,dt,Me,vt,0,Ze,Ue,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ce,he,_e.__webglTexture,0,Pe(k)):(he===n.TEXTURE_2D||he>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ce,he,_e.__webglTexture,J),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ft(z,k,X){if(n.bindRenderbuffer(n.RENDERBUFFER,z),k.depthBuffer){let ce=k.depthTexture,he=ce&&ce.isDepthTexture?ce.type:null,J=N(k.stencilBuffer,he),Ze=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=Pe(k);xe(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,J,k.width,k.height):X?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,J,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,J,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,z)}else{let ce=k.textures;for(let he=0;he<ce.length;he++){let J=ce[he],Ze=s.convert(J.format,J.colorSpace),Ue=s.convert(J.type),dt=R(J.internalFormat,Ze,Ue,J.colorSpace),nt=Pe(k);X&&xe(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,dt,k.width,k.height):xe(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,nt,dt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,dt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function tt(z,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ce=i.get(k.depthTexture);ce.__renderTarget=k,(!ce.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Y(k.depthTexture,0);let he=ce.__webglTexture,J=Pe(k);if(k.depthTexture.format===s_)xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0);else if(k.depthTexture.format===y_)xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function jt(z){let k=i.get(z),X=z.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==z.depthTexture){let ce=z.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),ce){let he=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,ce.removeEventListener("dispose",he)};ce.addEventListener("dispose",he),k.__depthDisposeCallback=he}k.__boundDepthTexture=ce}if(z.depthTexture&&!k.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");let ce=z.texture.mipmaps;ce&&ce.length>0?tt(k.__webglFramebuffer[0],z):tt(k.__webglFramebuffer,z)}else if(X){k.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[ce]),k.__webglDepthbuffer[ce]===void 0)k.__webglDepthbuffer[ce]=n.createRenderbuffer(),ft(k.__webglDepthbuffer[ce],z,!1);else{let he=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,J=k.__webglDepthbuffer[ce];n.bindRenderbuffer(n.RENDERBUFFER,J),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,J)}}else{let ce=z.texture.mipmaps;if(ce&&ce.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),ft(k.__webglDepthbuffer,z,!1);else{let he=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,J=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,J),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,J)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function In(z,k,X){let ce=i.get(z);k!==void 0&&Xe(ce.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),X!==void 0&&jt(z)}function Tt(z){let k=z.texture,X=i.get(z),ce=i.get(k);z.addEventListener("dispose",I);let he=z.textures,J=z.isWebGLCubeRenderTarget===!0,Ze=he.length>1;if(Ze||(ce.__webglTexture===void 0&&(ce.__webglTexture=n.createTexture()),ce.__version=k.version,o.memory.textures++),J){X.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(k.mipmaps&&k.mipmaps.length>0){X.__webglFramebuffer[Ue]=[];for(let dt=0;dt<k.mipmaps.length;dt++)X.__webglFramebuffer[Ue][dt]=n.createFramebuffer()}else X.__webglFramebuffer[Ue]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){X.__webglFramebuffer=[];for(let Ue=0;Ue<k.mipmaps.length;Ue++)X.__webglFramebuffer[Ue]=n.createFramebuffer()}else X.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let Ue=0,dt=he.length;Ue<dt;Ue++){let nt=i.get(he[Ue]);nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture(),o.memory.textures++)}if(z.samples>0&&xe(z)===!1){X.__webglMultisampledFramebuffer=n.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let Ue=0;Ue<he.length;Ue++){let dt=he[Ue];X.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,X.__webglColorRenderbuffer[Ue]);let nt=s.convert(dt.format,dt.colorSpace),_e=s.convert(dt.type),Me=R(dt.internalFormat,nt,_e,dt.colorSpace,z.isXRRenderTarget===!0),vt=Pe(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,Me,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,X.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(X.__webglDepthRenderbuffer=n.createRenderbuffer(),ft(X.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(J){t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture),ut(n.TEXTURE_CUBE_MAP,k);for(let Ue=0;Ue<6;Ue++)if(k.mipmaps&&k.mipmaps.length>0)for(let dt=0;dt<k.mipmaps.length;dt++)Xe(X.__webglFramebuffer[Ue][dt],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,dt);else Xe(X.__webglFramebuffer[Ue],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);g(k)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let Ue=0,dt=he.length;Ue<dt;Ue++){let nt=he[Ue],_e=i.get(nt),Me=n.TEXTURE_2D;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Me=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Me,_e.__webglTexture),ut(Me,nt),Xe(X.__webglFramebuffer,z,nt,n.COLOR_ATTACHMENT0+Ue,Me,0),g(nt)&&v(Me)}t.unbindTexture()}else{let Ue=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Ue=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ue,ce.__webglTexture),ut(Ue,k),k.mipmaps&&k.mipmaps.length>0)for(let dt=0;dt<k.mipmaps.length;dt++)Xe(X.__webglFramebuffer[dt],z,k,n.COLOR_ATTACHMENT0,Ue,dt);else Xe(X.__webglFramebuffer,z,k,n.COLOR_ATTACHMENT0,Ue,0);g(k)&&v(Ue),t.unbindTexture()}z.depthBuffer&&jt(z)}function ye(z){let k=z.textures;for(let X=0,ce=k.length;X<ce;X++){let he=k[X];if(g(he)){let J=P(z),Ze=i.get(he).__webglTexture;t.bindTexture(J,Ze),v(J),t.unbindTexture()}}}let B=[],be=[];function Se(z){if(z.samples>0){if(xe(z)===!1){let k=z.textures,X=z.width,ce=z.height,he=n.COLOR_BUFFER_BIT,J=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(z),Ue=k.length>1;if(Ue)for(let nt=0;nt<k.length;nt++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);let dt=z.texture.mipmaps;dt&&dt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let nt=0;nt<k.length;nt++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(he|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(he|=n.STENCIL_BUFFER_BIT)),Ue){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[nt]);let _e=i.get(k[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_e,0)}n.blitFramebuffer(0,0,X,ce,0,0,X,ce,he,n.NEAREST),c===!0&&(B.length=0,be.length=0,B.push(n.COLOR_ATTACHMENT0+nt),z.depthBuffer&&z.resolveDepthBuffer===!1&&(B.push(J),be.push(J),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,be)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,B))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let nt=0;nt<k.length;nt++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[nt]);let _e=i.get(k[nt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,_e,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&c){let k=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function Pe(z){return Math.min(r.maxSamples,z.samples)}function xe(z){let k=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Fe(z){let k=o.render.frame;u.get(z)!==k&&(u.set(z,k),z.update())}function Ce(z,k){let X=z.colorSpace,ce=z.format,he=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||X!==Nf&&X!==Zl&&(Ln.getTransfer(X)===ei?(ce!==zo||he!==Ta)&&zt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):dn("WebGLTextures: Unsupported texture color space:",X)),k}function Ge(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(l.width=z.naturalWidth||z.width,l.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(l.width=z.displayWidth,l.height=z.displayHeight):(l.width=z.width,l.height=z.height),l}this.allocateTextureUnit=C,this.resetTextureUnits=M,this.setTexture2D=Y,this.setTexture2DArray=le,this.setTexture3D=fe,this.setTextureCube=oe,this.rebindTextures=In,this.setupRenderTarget=Tt,this.updateRenderTargetMipmap=ye,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=jt,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=xe}function _Ne(n,e){function t(i,r=Zl){let s,o=Ln.getTransfer(r);if(i===Ta)return n.UNSIGNED_BYTE;if(i===LM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===FM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===c4)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===l4)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===o4)return n.BYTE;if(i===a4)return n.SHORT;if(i===g_)return n.UNSIGNED_SHORT;if(i===OM)return n.INT;if(i===Fd)return n.UNSIGNED_INT;if(i===xc)return n.FLOAT;if(i===zf)return n.HALF_FLOAT;if(i===u4)return n.ALPHA;if(i===d4)return n.RGB;if(i===zo)return n.RGBA;if(i===s_)return n.DEPTH_COMPONENT;if(i===y_)return n.DEPTH_STENCIL;if(i===h4)return n.RED;if(i===VM)return n.RED_INTEGER;if(i===UM)return n.RG;if(i===BM)return n.RG_INTEGER;if(i===zM)return n.RGBA_INTEGER;if(i===ix||i===rx||i===sx||i===ox)if(o===ei)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ix)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===sx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ox)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ix)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===sx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ox)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===HM||i===jM||i===GM||i===WM)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===HM)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===jM)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===GM)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===WM)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===$M||i===qM||i===KM)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===$M||i===qM)return o===ei?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===KM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===XM||i===YM||i===QM||i===JM||i===ZM||i===eD||i===tD||i===nD||i===iD||i===rD||i===sD||i===oD||i===aD||i===cD)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===XM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===YM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===QM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===JM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ZM)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===eD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===tD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===nD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===iD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===rD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===sD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===oD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===aD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===cD)return o===ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===lD||i===uD||i===dD)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===lD)return o===ei?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===uD)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===dD)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===hD||i===fD||i===pD||i===mD)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===hD)return s.COMPRESSED_RED_RGTC1_EXT;if(i===fD)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===pD)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===mD)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===__?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var yNe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,vNe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,N4=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){let i=new Bb(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Bo({vertexShader:yNe,fragmentShader:vNe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new mo(new Yb(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},O4=class extends Xl{constructor(e,t){super();let i=this,r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,p=null,_=null,b=typeof XRWebGLBinding<"u",g=new N4,v={},P=t.getContextAttributes(),R=null,N=null,U=[],O=[],I=new qe,w=null,y=new zr;y.viewport=new Zn;let x=new zr;x.viewport=new Zn;let S=[y,x],M=new EM,C=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let me=U[ue];return me===void 0&&(me=new u_,U[ue]=me),me.getTargetRaySpace()},this.getControllerGrip=function(ue){let me=U[ue];return me===void 0&&(me=new u_,U[ue]=me),me.getGripSpace()},this.getHand=function(ue){let me=U[ue];return me===void 0&&(me=new u_,U[ue]=me),me.getHandSpace()};function Y(ue){let me=O.indexOf(ue.inputSource);if(me===-1)return;let Xe=U[me];Xe!==void 0&&(Xe.update(ue.inputSource,ue.frame,l||o),Xe.dispatchEvent({type:ue.type,data:ue.inputSource}))}function le(){r.removeEventListener("select",Y),r.removeEventListener("selectstart",Y),r.removeEventListener("selectend",Y),r.removeEventListener("squeeze",Y),r.removeEventListener("squeezestart",Y),r.removeEventListener("squeezeend",Y),r.removeEventListener("end",le),r.removeEventListener("inputsourceschange",fe);for(let ue=0;ue<U.length;ue++){let me=O[ue];me!==null&&(O[ue]=null,U[ue].disconnect(me))}C=null,re=null,g.reset();for(let ue in v)delete v[ue];e.setRenderTarget(R),p=null,h=null,d=null,r=null,N=null,Ht.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,i.isPresenting===!0&&zt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,i.isPresenting===!0&&zt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(ue){l=ue},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d===null&&b&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(ue){if(r=ue,r!==null){if(R=e.getRenderTarget(),r.addEventListener("select",Y),r.addEventListener("selectstart",Y),r.addEventListener("selectend",Y),r.addEventListener("squeeze",Y),r.addEventListener("squeezestart",Y),r.addEventListener("squeezeend",Y),r.addEventListener("end",le),r.addEventListener("inputsourceschange",fe),P.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(I),b&&"createProjectionLayer"in XRWebGLBinding.prototype){let Xe=null,ft=null,tt=null;P.depth&&(tt=P.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Xe=P.stencil?y_:s_,ft=P.stencil?__:Fd);let jt={colorFormat:t.RGBA8,depthFormat:tt,scaleFactor:s};d=this.getBinding(),h=d.createProjectionLayer(jt),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),N=new _c(h.textureWidth,h.textureHeight,{format:zo,type:Ta,depthTexture:new Ub(h.textureWidth,h.textureHeight,ft,void 0,void 0,void 0,void 0,void 0,void 0,Xe),stencilBuffer:P.stencil,colorSpace:e.outputColorSpace,samples:P.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let Xe={antialias:P.antialias,alpha:!0,depth:P.depth,stencil:P.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,Xe),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),N=new _c(p.framebufferWidth,p.framebufferHeight,{format:zo,type:Ta,colorSpace:e.outputColorSpace,stencilBuffer:P.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await r.requestReferenceSpace(a),Ht.setContext(r),Ht.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function fe(ue){for(let me=0;me<ue.removed.length;me++){let Xe=ue.removed[me],ft=O.indexOf(Xe);ft>=0&&(O[ft]=null,U[ft].disconnect(Xe))}for(let me=0;me<ue.added.length;me++){let Xe=ue.added[me],ft=O.indexOf(Xe);if(ft===-1){for(let jt=0;jt<U.length;jt++)if(jt>=O.length){O.push(Xe),ft=jt;break}else if(O[jt]===null){O[jt]=Xe,ft=jt;break}if(ft===-1)break}let tt=U[ft];tt&&tt.connect(Xe)}}let oe=new K,we=new K;function Ae(ue,me,Xe){oe.setFromMatrixPosition(me.matrixWorld),we.setFromMatrixPosition(Xe.matrixWorld);let ft=oe.distanceTo(we),tt=me.projectionMatrix.elements,jt=Xe.projectionMatrix.elements,In=tt[14]/(tt[10]-1),Tt=tt[14]/(tt[10]+1),ye=(tt[9]+1)/tt[5],B=(tt[9]-1)/tt[5],be=(tt[8]-1)/tt[0],Se=(jt[8]+1)/jt[0],Pe=In*be,xe=In*Se,Fe=ft/(-be+Se),Ce=Fe*-be;if(me.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Ce),ue.translateZ(Fe),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),tt[10]===-1)ue.projectionMatrix.copy(me.projectionMatrix),ue.projectionMatrixInverse.copy(me.projectionMatrixInverse);else{let Ge=In+Fe,z=Tt+Fe,k=Pe-Ce,X=xe+(ft-Ce),ce=ye*Tt/z*Ge,he=B*Tt/z*Ge;ue.projectionMatrix.makePerspective(k,X,ce,he,Ge,z),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function Qe(ue,me){me===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(me.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(r===null)return;let me=ue.near,Xe=ue.far;g.texture!==null&&(g.depthNear>0&&(me=g.depthNear),g.depthFar>0&&(Xe=g.depthFar)),M.near=x.near=y.near=me,M.far=x.far=y.far=Xe,(C!==M.near||re!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,re=M.far),M.layers.mask=ue.layers.mask|6,y.layers.mask=M.layers.mask&3,x.layers.mask=M.layers.mask&5;let ft=ue.parent,tt=M.cameras;Qe(M,ft);for(let jt=0;jt<tt.length;jt++)Qe(tt[jt],ft);tt.length===2?Ae(M,y,x):M.projectionMatrix.copy(y.projectionMatrix),ut(ue,M,ft)};function ut(ue,me,Xe){Xe===null?ue.matrix.copy(me.matrixWorld):(ue.matrix.copy(Xe.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(me.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(me.projectionMatrix),ue.projectionMatrixInverse.copy(me.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=eM*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(ue){c=ue,h!==null&&(h.fixedFoveation=ue),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ue)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(M)},this.getCameraTexture=function(ue){return v[ue]};let rt=null;function Vt(ue,me){if(u=me.getViewerPose(l||o),_=me,u!==null){let Xe=u.views;p!==null&&(e.setRenderTargetFramebuffer(N,p.framebuffer),e.setRenderTarget(N));let ft=!1;Xe.length!==M.cameras.length&&(M.cameras.length=0,ft=!0);for(let Tt=0;Tt<Xe.length;Tt++){let ye=Xe[Tt],B=null;if(p!==null)B=p.getViewport(ye);else{let Se=d.getViewSubImage(h,ye);B=Se.viewport,Tt===0&&(e.setRenderTargetTextures(N,Se.colorTexture,Se.depthStencilTexture),e.setRenderTarget(N))}let be=S[Tt];be===void 0&&(be=new zr,be.layers.enable(Tt),be.viewport=new Zn,S[Tt]=be),be.matrix.fromArray(ye.transform.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale),be.projectionMatrix.fromArray(ye.projectionMatrix),be.projectionMatrixInverse.copy(be.projectionMatrix).invert(),be.viewport.set(B.x,B.y,B.width,B.height),Tt===0&&(M.matrix.copy(be.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ft===!0&&M.cameras.push(be)}let tt=r.enabledFeatures;if(tt&&tt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&b){d=i.getBinding();let Tt=d.getDepthInformation(Xe[0]);Tt&&Tt.isValid&&Tt.texture&&g.init(Tt,r.renderState)}if(tt&&tt.includes("camera-access")&&b){e.state.unbindTexture(),d=i.getBinding();for(let Tt=0;Tt<Xe.length;Tt++){let ye=Xe[Tt].camera;if(ye){let B=v[ye];B||(B=new Bb,v[ye]=B);let be=d.getCameraImage(ye);B.sourceTexture=be}}}}for(let Xe=0;Xe<U.length;Xe++){let ft=O[Xe],tt=U[Xe];ft!==null&&tt!==void 0&&tt.update(ft,me,l||o)}rt&&rt(ue,me),me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:me}),_=null}let Ht=new yne;Ht.setAnimationLoop(Vt),this.setAnimationLoop=function(ue){rt=ue},this.dispose=function(){}}},Gf=new kd,bNe=new Ti;function xNe(n,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function i(g,v){v.color.getRGB(g.fogColor.value,y4(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,P,R,N){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),d(g,v)):v.isMeshPhongMaterial?(s(g,v),u(g,v)):v.isMeshStandardMaterial?(s(g,v),h(g,v),v.isMeshPhysicalMaterial&&p(g,v,N)):v.isMeshMatcapMaterial?(s(g,v),_(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),b(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(o(g,v),v.isLineDashedMaterial&&a(g,v)):v.isPointsMaterial?c(g,v,P,R):v.isSpriteMaterial?l(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===ys&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===ys&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let P=e.get(v),R=P.envMap,N=P.envMapRotation;R&&(g.envMap.value=R,Gf.copy(N),Gf.x*=-1,Gf.y*=-1,Gf.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Gf.y*=-1,Gf.z*=-1),g.envMapRotation.value.setFromMatrix4(bNe.makeRotationFromEuler(Gf)),g.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,g.lightMapTransform)),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function o(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function a(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function c(g,v,P,R){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*P,g.scale.value=R*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function l(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function d(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function h(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),v.envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function p(g,v,P){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===ys&&g.clearcoatNormalScale.value.negate())),v.dispersion>0&&(g.dispersion.value=v.dispersion),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=P.texture,g.transmissionSamplerSize.value.set(P.width,P.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function _(g,v){v.matcap&&(g.matcap.value=v.matcap)}function b(g,v){let P=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(P.matrixWorld),g.nearDistance.value=P.shadow.camera.near,g.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function wNe(n,e,t,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(P,R){let N=R.program;i.uniformBlockBinding(P,N)}function l(P,R){let N=r[P.id];N===void 0&&(_(P),N=u(P),r[P.id]=N,P.addEventListener("dispose",g));let U=R.program;i.updateUBOMapping(P,U);let O=e.render.frame;s[P.id]!==O&&(h(P),s[P.id]=O)}function u(P){let R=d();P.__bindingPointIndex=R;let N=n.createBuffer(),U=P.__size,O=P.usage;return n.bindBuffer(n.UNIFORM_BUFFER,N),n.bufferData(n.UNIFORM_BUFFER,U,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,R,N),N}function d(){for(let P=0;P<a;P++)if(o.indexOf(P)===-1)return o.push(P),P;return dn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(P){let R=r[P.id],N=P.uniforms,U=P.__cache;n.bindBuffer(n.UNIFORM_BUFFER,R);for(let O=0,I=N.length;O<I;O++){let w=Array.isArray(N[O])?N[O]:[N[O]];for(let y=0,x=w.length;y<x;y++){let S=w[y];if(p(S,O,y,U)===!0){let M=S.__offset,C=Array.isArray(S.value)?S.value:[S.value],re=0;for(let Y=0;Y<C.length;Y++){let le=C[Y],fe=b(le);typeof le=="number"||typeof le=="boolean"?(S.__data[0]=le,n.bufferSubData(n.UNIFORM_BUFFER,M+re,S.__data)):le.isMatrix3?(S.__data[0]=le.elements[0],S.__data[1]=le.elements[1],S.__data[2]=le.elements[2],S.__data[3]=0,S.__data[4]=le.elements[3],S.__data[5]=le.elements[4],S.__data[6]=le.elements[5],S.__data[7]=0,S.__data[8]=le.elements[6],S.__data[9]=le.elements[7],S.__data[10]=le.elements[8],S.__data[11]=0):(le.toArray(S.__data,re),re+=fe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,M,S.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(P,R,N,U){let O=P.value,I=R+"_"+N;if(U[I]===void 0)return typeof O=="number"||typeof O=="boolean"?U[I]=O:U[I]=O.clone(),!0;{let w=U[I];if(typeof O=="number"||typeof O=="boolean"){if(w!==O)return U[I]=O,!0}else if(w.equals(O)===!1)return w.copy(O),!0}return!1}function _(P){let R=P.uniforms,N=0,U=16;for(let I=0,w=R.length;I<w;I++){let y=Array.isArray(R[I])?R[I]:[R[I]];for(let x=0,S=y.length;x<S;x++){let M=y[x],C=Array.isArray(M.value)?M.value:[M.value];for(let re=0,Y=C.length;re<Y;re++){let le=C[re],fe=b(le),oe=N%U,we=oe%fe.boundary,Ae=oe+we;N+=we,Ae!==0&&U-Ae<fe.storage&&(N+=U-Ae),M.__data=new Float32Array(fe.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=N,N+=fe.storage}}}let O=N%U;return O>0&&(N+=U-O),P.__size=N,P.__cache={},this}function b(P){let R={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?(R.boundary=4,R.storage=4):P.isVector2?(R.boundary=8,R.storage=8):P.isVector3||P.isColor?(R.boundary=16,R.storage=12):P.isVector4?(R.boundary=16,R.storage=16):P.isMatrix3?(R.boundary=48,R.storage=48):P.isMatrix4?(R.boundary=64,R.storage=64):P.isTexture?zt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):zt("WebGLRenderer: Unsupported uniform value type.",P),R}function g(P){let R=P.target;R.removeEventListener("dispose",g);let N=o.indexOf(R.__bindingPointIndex);o.splice(N,1),n.deleteBuffer(r[R.id]),delete r[R.id],delete s[R.id]}function v(){for(let P in r)n.deleteBuffer(r[P]);o=[],r={},s={}}return{bind:c,update:l,dispose:v}}var ENe=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]),nu=null;function INe(){return nu===null&&(nu=new oM(ENe,32,32,UM,zf),nu.minFilter=fo,nu.magFilter=fo,nu.wrapS=gc,nu.wrapT=gc,nu.generateMipmaps=!1,nu.needsUpdate=!0),nu}var vD=class{constructor(e={}){let{canvas:t=Hte(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;let _=new Set([zM,BM,VM]),b=new Set([Ta,Fd,g_,__,LM,FM]),g=new Uint32Array(4),v=new Int32Array(4),P=null,R=null,N=[],U=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Jl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let O=this,I=!1;this._outputColorSpace=uo;let w=0,y=0,x=null,S=-1,M=null,C=new Zn,re=new Zn,Y=null,le=new hn(0),fe=0,oe=t.width,we=t.height,Ae=1,Qe=null,ut=null,rt=new Zn(0,0,oe,we),Vt=new Zn(0,0,oe,we),Ht=!1,ue=new d_,me=!1,Xe=!1,ft=new Ti,tt=new K,jt=new Zn,In={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Tt=!1;function ye(){return x===null?Ae:1}let B=i;function be(F,G){return t.getContext(F,G)}try{let F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${"181"}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",pe,!1),t.addEventListener("webglcontextcreationerror",We,!1),B===null){let G="webgl2";if(B=be(G,F),B===null)throw be(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw F("WebGLRenderer: "+F.message),F}let Se,Pe,xe,Fe,Ce,Ge,z,k,X,ce,he,J,Ze,Ue,dt,nt,_e,Me,vt,ht,He,Rt,j,Be;function ke(){Se=new BPe(B),Se.init(),Rt=new _Ne(B,Se),Pe=new RPe(B,Se,e,Rt),xe=new mNe(B,Se),Pe.reversedDepthBuffer&&h&&xe.buffers.depth.setReversed(!0),Fe=new jPe(B),Ce=new nNe,Ge=new gNe(B,Se,xe,Ce,Pe,Rt,Fe),z=new kPe(O),k=new UPe(O),X=new qDe(B),j=new MPe(B,X),ce=new zPe(B,X,Fe,j),he=new WPe(B,ce,X,Fe),vt=new GPe(B,Pe,Ge),nt=new PPe(Ce),J=new tNe(O,z,k,Se,Pe,j,nt),Ze=new xNe(O,Ce),Ue=new rNe,dt=new uNe(Se),Me=new APe(O,z,k,xe,he,p,c),_e=new fNe(O,he,Pe),Be=new wNe(B,Fe,Pe,xe),ht=new DPe(B,Se,Fe),He=new HPe(B,Se,Fe),Fe.programs=J.programs,O.capabilities=Pe,O.extensions=Se,O.properties=Ce,O.renderLists=Ue,O.shadowMap=_e,O.state=xe,O.info=Fe}ke();let Ne=new O4(O,B);this.xr=Ne,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let F=Se.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){let F=Se.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(F){F!==void 0&&(Ae=F,this.setSize(oe,we,!1))},this.getSize=function(F){return F.set(oe,we)},this.setSize=function(F,G,Z=!0){if(Ne.isPresenting){zt("WebGLRenderer: Can't change size while VR device is presenting.");return}oe=F,we=G,t.width=Math.floor(F*Ae),t.height=Math.floor(G*Ae),Z===!0&&(t.style.width=F+"px",t.style.height=G+"px"),this.setViewport(0,0,F,G)},this.getDrawingBufferSize=function(F){return F.set(oe*Ae,we*Ae).floor()},this.setDrawingBufferSize=function(F,G,Z){oe=F,we=G,Ae=Z,t.width=Math.floor(F*Z),t.height=Math.floor(G*Z),this.setViewport(0,0,F,G)},this.getCurrentViewport=function(F){return F.copy(C)},this.getViewport=function(F){return F.copy(rt)},this.setViewport=function(F,G,Z,ne){F.isVector4?rt.set(F.x,F.y,F.z,F.w):rt.set(F,G,Z,ne),xe.viewport(C.copy(rt).multiplyScalar(Ae).round())},this.getScissor=function(F){return F.copy(Vt)},this.setScissor=function(F,G,Z,ne){F.isVector4?Vt.set(F.x,F.y,F.z,F.w):Vt.set(F,G,Z,ne),xe.scissor(re.copy(Vt).multiplyScalar(Ae).round())},this.getScissorTest=function(){return Ht},this.setScissorTest=function(F){xe.setScissorTest(Ht=F)},this.setOpaqueSort=function(F){Qe=F},this.setTransparentSort=function(F){ut=F},this.getClearColor=function(F){return F.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor(...arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha(...arguments)},this.clear=function(F=!0,G=!0,Z=!0){let ne=0;if(F){let q=!1;if(x!==null){let De=x.texture.format;q=_.has(De)}if(q){let De=x.texture.type,ze=b.has(De),Ye=Me.getClearColor(),Ke=Me.getClearAlpha(),bt=Ye.r,At=Ye.g,ct=Ye.b;ze?(g[0]=bt,g[1]=At,g[2]=ct,g[3]=Ke,B.clearBufferuiv(B.COLOR,0,g)):(v[0]=bt,v[1]=At,v[2]=ct,v[3]=Ke,B.clearBufferiv(B.COLOR,0,v))}else ne|=B.COLOR_BUFFER_BIT}G&&(ne|=B.DEPTH_BUFFER_BIT),Z&&(ne|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",pe,!1),t.removeEventListener("webglcontextcreationerror",We,!1),Me.dispose(),Ue.dispose(),dt.dispose(),Ce.dispose(),z.dispose(),k.dispose(),he.dispose(),j.dispose(),Be.dispose(),J.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",Sa),Ne.removeEventListener("sessionend",Ho),jr.stop()};function ge(F){F.preventDefault(),_4("WebGLRenderer: Context Lost."),I=!0}function pe(){_4("WebGLRenderer: Context Restored."),I=!1;let F=Fe.autoReset,G=_e.enabled,Z=_e.autoUpdate,ne=_e.needsUpdate,q=_e.type;ke(),Fe.autoReset=F,_e.enabled=G,_e.autoUpdate=Z,_e.needsUpdate=ne,_e.type=q}function We(F){dn("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function Ct(F){let G=F.target;G.removeEventListener("dispose",Ct),Fn(G)}function Fn(F){Rn(F),Ce.remove(F)}function Rn(F){let G=Ce.get(F).programs;G!==void 0&&(G.forEach(function(Z){J.releaseProgram(Z)}),F.isShaderMaterial&&J.releaseShaderCache(F))}this.renderBufferDirect=function(F,G,Z,ne,q,De){G===null&&(G=In);let ze=q.isMesh&&q.matrixWorld.determinant()<0,Ye=Tc(F,G,Z,ne,q);xe.setMaterial(ne,ze);let Ke=Z.index,bt=1;if(ne.wireframe===!0){if(Ke=ce.getWireframeAttribute(Z),Ke===void 0)return;bt=2}let At=Z.drawRange,ct=Z.attributes.position,en=At.start*bt,Tn=(At.start+At.count)*bt;De!==null&&(en=Math.max(en,De.start*bt),Tn=Math.min(Tn,(De.start+De.count)*bt)),Ke!==null?(en=Math.max(en,0),Tn=Math.min(Tn,Ke.count)):ct!=null&&(en=Math.max(en,0),Tn=Math.min(Tn,ct.count));let wn=Tn-en;if(wn<0||wn===1/0)return;j.setup(q,ne,Ye,Z,Ke);let _n,yn=ht;if(Ke!==null&&(_n=X.get(Ke),yn=He,yn.setIndex(_n)),q.isMesh)ne.wireframe===!0?(xe.setLineWidth(ne.wireframeLinewidth*ye()),yn.setMode(B.LINES)):yn.setMode(B.TRIANGLES);else if(q.isLine){let lt=ne.linewidth;lt===void 0&&(lt=1),xe.setLineWidth(lt*ye()),q.isLineSegments?yn.setMode(B.LINES):q.isLineLoop?yn.setMode(B.LINE_LOOP):yn.setMode(B.LINE_STRIP)}else q.isPoints?yn.setMode(B.POINTS):q.isSprite&&yn.setMode(B.TRIANGLES);if(q.isBatchedMesh)if(q._multiDrawInstances!==null)a_("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount,q._multiDrawInstances);else if(Se.get("WEBGL_multi_draw"))yn.renderMultiDraw(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount);else{let lt=q._multiDrawStarts,Jn=q._multiDrawCounts,ot=q._multiDrawCount,Li=Ke?X.get(Ke).bytesPerElement:1,vs=Ce.get(ne).currentProgram.getUniforms();for(let ai=0;ai<ot;ai++)vs.setValue(B,"_gl_DrawID",ai),yn.render(lt[ai]/Li,Jn[ai])}else if(q.isInstancedMesh)yn.renderInstances(en,wn,q.count);else if(Z.isInstancedBufferGeometry){let lt=Z._maxInstanceCount!==void 0?Z._maxInstanceCount:1/0,Jn=Math.min(Z.instanceCount,lt);yn.renderInstances(en,wn,Jn)}else yn.render(en,wn)};function Si(F,G,Z){F.transparent===!0&&F.side===vc&&F.forceSinglePass===!1?(F.side=ys,F.needsUpdate=!0,yo(F,G,Z),F.side=Kl,F.needsUpdate=!0,yo(F,G,Z),F.side=vc):yo(F,G,Z)}this.compile=function(F,G,Z=null){Z===null&&(Z=F),R=dt.get(Z),R.init(G),U.push(R),Z.traverseVisible(function(q){q.isLight&&q.layers.test(G.layers)&&(R.pushLight(q),q.castShadow&&R.pushShadow(q))}),F!==Z&&F.traverseVisible(function(q){q.isLight&&q.layers.test(G.layers)&&(R.pushLight(q),q.castShadow&&R.pushShadow(q))}),R.setupLights();let ne=new Set;return F.traverse(function(q){if(!(q.isMesh||q.isPoints||q.isLine||q.isSprite))return;let De=q.material;if(De)if(Array.isArray(De))for(let ze=0;ze<De.length;ze++){let Ye=De[ze];Si(Ye,Z,q),ne.add(Ye)}else Si(De,Z,q),ne.add(De)}),R=U.pop(),ne},this.compileAsync=function(F,G,Z=null){let ne=this.compile(F,G,Z);return new Promise(q=>{function De(){if(ne.forEach(function(ze){Ce.get(ze).currentProgram.isReady()&&ne.delete(ze)}),ne.size===0){q(F);return}setTimeout(De,10)}Se.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let Hr=null;function dr(F){Hr&&Hr(F)}function Sa(){jr.stop()}function Ho(){jr.start()}let jr=new yne;jr.setAnimationLoop(dr),typeof self<"u"&&jr.setContext(self),this.setAnimationLoop=function(F){Hr=F,Ne.setAnimationLoop(F),F===null?jr.stop():jr.start()},Ne.addEventListener("sessionstart",Sa),Ne.addEventListener("sessionend",Ho),this.render=function(F,G){if(G!==void 0&&G.isCamera!==!0){dn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),G.parent===null&&G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(G),G=Ne.getCamera()),F.isScene===!0&&F.onBeforeRender(O,F,G,x),R=dt.get(F,U.length),R.init(G),U.push(R),ft.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),ue.setFromProjectionMatrix(ft,Ia,G.reversedDepth),Xe=this.localClippingEnabled,me=nt.init(this.clippingPlanes,Xe),P=Ue.get(F,N.length),P.init(),N.push(P),Ne.enabled===!0&&Ne.isPresenting===!0){let De=O.xr.getDepthSensingMesh();De!==null&&Ec(De,G,-1/0,O.sortObjects)}Ec(F,G,0,O.sortObjects),P.finish(),O.sortObjects===!0&&P.sort(Qe,ut),Tt=Ne.enabled===!1||Ne.isPresenting===!1||Ne.hasDepthSensing()===!1,Tt&&Me.addToRenderList(P,F),this.info.render.frame++,me===!0&&nt.beginShadows();let Z=R.state.shadowsArray;_e.render(Z,F,G),me===!0&&nt.endShadows(),this.info.autoReset===!0&&this.info.reset();let ne=P.opaque,q=P.transmissive;if(R.setupLights(),G.isArrayCamera){let De=G.cameras;if(q.length>0)for(let ze=0,Ye=De.length;ze<Ye;ze++){let Ke=De[ze];jo(ne,q,F,Ke)}Tt&&Me.render(F);for(let ze=0,Ye=De.length;ze<Ye;ze++){let Ke=De[ze];Ca(P,F,Ke,Ke.viewport)}}else q.length>0&&jo(ne,q,F,G),Tt&&Me.render(F),Ca(P,F,G);x!==null&&y===0&&(Ge.updateMultisampleRenderTarget(x),Ge.updateRenderTargetMipmap(x)),F.isScene===!0&&F.onAfterRender(O,F,G),j.resetDefaultState(),S=-1,M=null,U.pop(),U.length>0?(R=U[U.length-1],me===!0&&nt.setGlobalState(O.clippingPlanes,R.state.camera)):R=null,N.pop(),N.length>0?P=N[N.length-1]:P=null};function Ec(F,G,Z,ne){if(F.visible===!1)return;if(F.layers.test(G.layers)){if(F.isGroup)Z=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(G);else if(F.isLight)R.pushLight(F),F.castShadow&&R.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||ue.intersectsSprite(F)){ne&&jt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(ft);let ze=he.update(F),Ye=F.material;Ye.visible&&P.push(F,ze,Ye,Z,jt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||ue.intersectsObject(F))){let ze=he.update(F),Ye=F.material;if(ne&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),jt.copy(F.boundingSphere.center)):(ze.boundingSphere===null&&ze.computeBoundingSphere(),jt.copy(ze.boundingSphere.center)),jt.applyMatrix4(F.matrixWorld).applyMatrix4(ft)),Array.isArray(Ye)){let Ke=ze.groups;for(let bt=0,At=Ke.length;bt<At;bt++){let ct=Ke[bt],en=Ye[ct.materialIndex];en&&en.visible&&P.push(F,ze,en,Z,jt.z,ct)}}else Ye.visible&&P.push(F,ze,Ye,Z,jt.z,null)}}let De=F.children;for(let ze=0,Ye=De.length;ze<Ye;ze++)Ec(De[ze],G,Z,ne)}function Ca(F,G,Z,ne){let{opaque:q,transmissive:De,transparent:ze}=F;R.setupLightsView(Z),me===!0&&nt.setGlobalState(O.clippingPlanes,Z),ne&&xe.viewport(C.copy(ne)),q.length>0&&ss(q,G,Z),De.length>0&&ss(De,G,Z),ze.length>0&&ss(ze,G,Z),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function jo(F,G,Z,ne){if((Z.isScene===!0?Z.overrideMaterial:null)!==null)return;R.state.transmissionRenderTarget[ne.id]===void 0&&(R.state.transmissionRenderTarget[ne.id]=new _c(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?zf:Ta,minFilter:Ld,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ln.workingColorSpace}));let De=R.state.transmissionRenderTarget[ne.id],ze=ne.viewport||C;De.setSize(ze.z*O.transmissionResolutionScale,ze.w*O.transmissionResolutionScale);let Ye=O.getRenderTarget(),Ke=O.getActiveCubeFace(),bt=O.getActiveMipmapLevel();O.setRenderTarget(De),O.getClearColor(le),fe=O.getClearAlpha(),fe<1&&O.setClearColor(16777215,.5),O.clear(),Tt&&Me.render(Z);let At=O.toneMapping;O.toneMapping=Jl;let ct=ne.viewport;if(ne.viewport!==void 0&&(ne.viewport=void 0),R.setupLightsView(ne),me===!0&&nt.setGlobalState(O.clippingPlanes,ne),ss(F,Z,ne),Ge.updateMultisampleRenderTarget(De),Ge.updateRenderTargetMipmap(De),Se.has("WEBGL_multisampled_render_to_texture")===!1){let en=!1;for(let Tn=0,wn=G.length;Tn<wn;Tn++){let _n=G[Tn],{object:yn,geometry:lt,material:Jn,group:ot}=_n;if(Jn.side===vc&&yn.layers.test(ne.layers)){let Li=Jn.side;Jn.side=ys,Jn.needsUpdate=!0,Ud(yn,Z,ne,lt,Jn,ot),Jn.side=Li,Jn.needsUpdate=!0,en=!0}}en===!0&&(Ge.updateMultisampleRenderTarget(De),Ge.updateRenderTargetMipmap(De))}O.setRenderTarget(Ye,Ke,bt),O.setClearColor(le,fe),ct!==void 0&&(ne.viewport=ct),O.toneMapping=At}function ss(F,G,Z){let ne=G.isScene===!0?G.overrideMaterial:null;for(let q=0,De=F.length;q<De;q++){let ze=F[q],{object:Ye,geometry:Ke,group:bt}=ze,At=ze.material;At.allowOverride===!0&&ne!==null&&(At=ne),Ye.layers.test(Z.layers)&&Ud(Ye,G,Z,Ke,At,bt)}}function Ud(F,G,Z,ne,q,De){F.onBeforeRender(O,G,Z,ne,q,De),F.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),q.onBeforeRender(O,G,Z,ne,F,De),q.transparent===!0&&q.side===vc&&q.forceSinglePass===!1?(q.side=ys,q.needsUpdate=!0,O.renderBufferDirect(Z,G,ne,q,F,De),q.side=Kl,q.needsUpdate=!0,O.renderBufferDirect(Z,G,ne,q,F,De),q.side=vc):O.renderBufferDirect(Z,G,ne,q,F,De),F.onAfterRender(O,G,Z,ne,q,De)}function yo(F,G,Z){G.isScene!==!0&&(G=In);let ne=Ce.get(F),q=R.state.lights,De=R.state.shadowsArray,ze=q.state.version,Ye=J.getParameters(F,q.state,De,G,Z),Ke=J.getProgramCacheKey(Ye),bt=ne.programs;ne.environment=F.isMeshStandardMaterial?G.environment:null,ne.fog=G.fog,ne.envMap=(F.isMeshStandardMaterial?k:z).get(F.envMap||ne.environment),ne.envMapRotation=ne.environment!==null&&F.envMap===null?G.environmentRotation:F.envMapRotation,bt===void 0&&(F.addEventListener("dispose",Ct),bt=new Map,ne.programs=bt);let At=bt.get(Ke);if(At!==void 0){if(ne.currentProgram===At&&ne.lightsStateVersion===ze)return Aa(F,Ye),At}else Ye.uniforms=J.getUniforms(F),F.onBeforeCompile(Ye,O),At=J.acquireProgram(Ye,Ke),bt.set(Ke,At),ne.uniforms=Ye.uniforms;let ct=ne.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(ct.clippingPlanes=nt.uniform),Aa(F,Ye),ne.needsLights=Bd(F),ne.lightsStateVersion=ze,ne.needsLights&&(ct.ambientLightColor.value=q.state.ambient,ct.lightProbe.value=q.state.probe,ct.directionalLights.value=q.state.directional,ct.directionalLightShadows.value=q.state.directionalShadow,ct.spotLights.value=q.state.spot,ct.spotLightShadows.value=q.state.spotShadow,ct.rectAreaLights.value=q.state.rectArea,ct.ltc_1.value=q.state.rectAreaLTC1,ct.ltc_2.value=q.state.rectAreaLTC2,ct.pointLights.value=q.state.point,ct.pointLightShadows.value=q.state.pointShadow,ct.hemisphereLights.value=q.state.hemi,ct.directionalShadowMap.value=q.state.directionalShadowMap,ct.directionalShadowMatrix.value=q.state.directionalShadowMatrix,ct.spotShadowMap.value=q.state.spotShadowMap,ct.spotLightMatrix.value=q.state.spotLightMatrix,ct.spotLightMap.value=q.state.spotLightMap,ct.pointShadowMap.value=q.state.pointShadowMap,ct.pointShadowMatrix.value=q.state.pointShadowMatrix),ne.currentProgram=At,ne.uniformsList=null,At}function Ic(F){if(F.uniformsList===null){let G=F.currentProgram.getUniforms();F.uniformsList=x_.seqWithValue(G.seq,F.uniforms)}return F.uniformsList}function Aa(F,G){let Z=Ce.get(F);Z.outputColorSpace=G.outputColorSpace,Z.batching=G.batching,Z.batchingColor=G.batchingColor,Z.instancing=G.instancing,Z.instancingColor=G.instancingColor,Z.instancingMorph=G.instancingMorph,Z.skinning=G.skinning,Z.morphTargets=G.morphTargets,Z.morphNormals=G.morphNormals,Z.morphColors=G.morphColors,Z.morphTargetsCount=G.morphTargetsCount,Z.numClippingPlanes=G.numClippingPlanes,Z.numIntersection=G.numClipIntersection,Z.vertexAlphas=G.vertexAlphas,Z.vertexTangents=G.vertexTangents,Z.toneMapping=G.toneMapping}function Tc(F,G,Z,ne,q){G.isScene!==!0&&(G=In),Ge.resetTextureUnits();let De=G.fog,ze=ne.isMeshStandardMaterial?G.environment:null,Ye=x===null?O.outputColorSpace:x.isXRRenderTarget===!0?x.texture.colorSpace:Nf,Ke=(ne.isMeshStandardMaterial?k:z).get(ne.envMap||ze),bt=ne.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,At=!!Z.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),ct=!!Z.morphAttributes.position,en=!!Z.morphAttributes.normal,Tn=!!Z.morphAttributes.color,wn=Jl;ne.toneMapped&&(x===null||x.isXRRenderTarget===!0)&&(wn=O.toneMapping);let _n=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,yn=_n!==void 0?_n.length:0,lt=Ce.get(ne),Jn=R.state.lights;if(me===!0&&(Xe===!0||F!==M)){let Xt=F===M&&ne.id===S;nt.setState(ne,F,Xt)}let ot=!1;ne.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Jn.state.version||lt.outputColorSpace!==Ye||q.isBatchedMesh&&lt.batching===!1||!q.isBatchedMesh&&lt.batching===!0||q.isBatchedMesh&&lt.batchingColor===!0&&q.colorTexture===null||q.isBatchedMesh&&lt.batchingColor===!1&&q.colorTexture!==null||q.isInstancedMesh&&lt.instancing===!1||!q.isInstancedMesh&&lt.instancing===!0||q.isSkinnedMesh&&lt.skinning===!1||!q.isSkinnedMesh&&lt.skinning===!0||q.isInstancedMesh&&lt.instancingColor===!0&&q.instanceColor===null||q.isInstancedMesh&&lt.instancingColor===!1&&q.instanceColor!==null||q.isInstancedMesh&&lt.instancingMorph===!0&&q.morphTexture===null||q.isInstancedMesh&&lt.instancingMorph===!1&&q.morphTexture!==null||lt.envMap!==Ke||ne.fog===!0&&lt.fog!==De||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==nt.numPlanes||lt.numIntersection!==nt.numIntersection)||lt.vertexAlphas!==bt||lt.vertexTangents!==At||lt.morphTargets!==ct||lt.morphNormals!==en||lt.morphColors!==Tn||lt.toneMapping!==wn||lt.morphTargetsCount!==yn)&&(ot=!0):(ot=!0,lt.__version=ne.version);let Li=lt.currentProgram;ot===!0&&(Li=yo(ne,G,q));let vs=!1,ai=!1,Rr=!1,zn=Li.getUniforms(),Fi=lt.uniforms;if(xe.useProgram(Li.program)&&(vs=!0,ai=!0,Rr=!0),ne.id!==S&&(S=ne.id,ai=!0),vs||M!==F){xe.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),zn.setValue(B,"projectionMatrix",F.projectionMatrix),zn.setValue(B,"viewMatrix",F.matrixWorldInverse);let Vi=zn.map.cameraPosition;Vi!==void 0&&Vi.setValue(B,tt.setFromMatrixPosition(F.matrixWorld)),Pe.logarithmicDepthBuffer&&zn.setValue(B,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&zn.setValue(B,"isOrthographic",F.isOrthographicCamera===!0),M!==F&&(M=F,ai=!0,Rr=!0)}if(q.isSkinnedMesh){zn.setOptional(B,q,"bindMatrix"),zn.setOptional(B,q,"bindMatrixInverse");let Xt=q.skeleton;Xt&&(Xt.boneTexture===null&&Xt.computeBoneTexture(),zn.setValue(B,"boneTexture",Xt.boneTexture,Ge))}q.isBatchedMesh&&(zn.setOptional(B,q,"batchingTexture"),zn.setValue(B,"batchingTexture",q._matricesTexture,Ge),zn.setOptional(B,q,"batchingIdTexture"),zn.setValue(B,"batchingIdTexture",q._indirectTexture,Ge),zn.setOptional(B,q,"batchingColorTexture"),q._colorsTexture!==null&&zn.setValue(B,"batchingColorTexture",q._colorsTexture,Ge));let Pr=Z.morphAttributes;if((Pr.position!==void 0||Pr.normal!==void 0||Pr.color!==void 0)&&vt.update(q,Z,Li),(ai||lt.receiveShadow!==q.receiveShadow)&&(lt.receiveShadow=q.receiveShadow,zn.setValue(B,"receiveShadow",q.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(Fi.envMap.value=Ke,Fi.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),ne.isMeshStandardMaterial&&ne.envMap===null&&G.environment!==null&&(Fi.envMapIntensity.value=G.environmentIntensity),Fi.dfgLUT!==void 0&&(Fi.dfgLUT.value=INe()),ai&&(zn.setValue(B,"toneMappingExposure",O.toneMappingExposure),lt.needsLights&&vo(Fi,Rr),De&&ne.fog===!0&&Ze.refreshFogUniforms(Fi,De),Ze.refreshMaterialUniforms(Fi,ne,Ae,we,R.state.transmissionRenderTarget[F.id]),x_.upload(B,Ic(lt),Fi,Ge)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(x_.upload(B,Ic(lt),Fi,Ge),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&zn.setValue(B,"center",q.center),zn.setValue(B,"modelViewMatrix",q.modelViewMatrix),zn.setValue(B,"normalMatrix",q.normalMatrix),zn.setValue(B,"modelMatrix",q.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){let Xt=ne.uniformsGroups;for(let Vi=0,os=Xt.length;Vi<os;Vi++){let Ui=Xt[Vi];Be.update(Ui,Li),Be.bind(Ui,Li)}}return Li}function vo(F,G){F.ambientLightColor.needsUpdate=G,F.lightProbe.needsUpdate=G,F.directionalLights.needsUpdate=G,F.directionalLightShadows.needsUpdate=G,F.pointLights.needsUpdate=G,F.pointLightShadows.needsUpdate=G,F.spotLights.needsUpdate=G,F.spotLightShadows.needsUpdate=G,F.rectAreaLights.needsUpdate=G,F.hemisphereLights.needsUpdate=G}function Bd(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(F,G,Z){let ne=Ce.get(F);ne.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,ne.__autoAllocateDepthBuffer===!1&&(ne.__useRenderToTexture=!1),Ce.get(F.texture).__webglTexture=G,Ce.get(F.depthTexture).__webglTexture=ne.__autoAllocateDepthBuffer?void 0:Z,ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,G){let Z=Ce.get(F);Z.__webglFramebuffer=G,Z.__useDefaultFramebuffer=G===void 0};let qf=B.createFramebuffer();this.setRenderTarget=function(F,G=0,Z=0){x=F,w=G,y=Z;let ne=!0,q=null,De=!1,ze=!1;if(F){let Ke=Ce.get(F);if(Ke.__useDefaultFramebuffer!==void 0)xe.bindFramebuffer(B.FRAMEBUFFER,null),ne=!1;else if(Ke.__webglFramebuffer===void 0)Ge.setupRenderTarget(F);else if(Ke.__hasExternalTextures)Ge.rebindTextures(F,Ce.get(F.texture).__webglTexture,Ce.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){let ct=F.depthTexture;if(Ke.__boundDepthTexture!==ct){if(ct!==null&&Ce.has(ct)&&(F.width!==ct.image.width||F.height!==ct.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ge.setupDepthRenderbuffer(F)}}let bt=F.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(ze=!0);let At=Ce.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(At[G])?q=At[G][Z]:q=At[G],De=!0):F.samples>0&&Ge.useMultisampledRTT(F)===!1?q=Ce.get(F).__webglMultisampledFramebuffer:Array.isArray(At)?q=At[Z]:q=At,C.copy(F.viewport),re.copy(F.scissor),Y=F.scissorTest}else C.copy(rt).multiplyScalar(Ae).floor(),re.copy(Vt).multiplyScalar(Ae).floor(),Y=Ht;if(Z!==0&&(q=qf),xe.bindFramebuffer(B.FRAMEBUFFER,q)&&ne&&xe.drawBuffers(F,q),xe.viewport(C),xe.scissor(re),xe.setScissorTest(Y),De){let Ke=Ce.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+G,Ke.__webglTexture,Z)}else if(ze){let Ke=G;for(let bt=0;bt<F.textures.length;bt++){let At=Ce.get(F.textures[bt]);B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+bt,At.__webglTexture,Z,Ke)}}else if(F!==null&&Z!==0){let Ke=Ce.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Ke.__webglTexture,Z)}S=-1},this.readRenderTargetPixels=function(F,G,Z,ne,q,De,ze,Ye=0){if(!(F&&F.isWebGLRenderTarget)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=Ce.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&ze!==void 0&&(Ke=Ke[ze]),Ke){xe.bindFramebuffer(B.FRAMEBUFFER,Ke);try{let bt=F.textures[Ye],At=bt.format,ct=bt.type;if(!Pe.textureFormatReadable(At)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(ct)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}G>=0&&G<=F.width-ne&&Z>=0&&Z<=F.height-q&&(F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Ye),B.readPixels(G,Z,ne,q,Rt.convert(At),Rt.convert(ct),De))}finally{let bt=x!==null?Ce.get(x).__webglFramebuffer:null;xe.bindFramebuffer(B.FRAMEBUFFER,bt)}}},this.readRenderTargetPixelsAsync=async function(F,G,Z,ne,q,De,ze,Ye=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ke=Ce.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&ze!==void 0&&(Ke=Ke[ze]),Ke)if(G>=0&&G<=F.width-ne&&Z>=0&&Z<=F.height-q){xe.bindFramebuffer(B.FRAMEBUFFER,Ke);let bt=F.textures[Ye],At=bt.format,ct=bt.type;if(!Pe.textureFormatReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let en=B.createBuffer();B.bindBuffer(B.PIXEL_PACK_BUFFER,en),B.bufferData(B.PIXEL_PACK_BUFFER,De.byteLength,B.STREAM_READ),F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Ye),B.readPixels(G,Z,ne,q,Rt.convert(At),Rt.convert(ct),0);let Tn=x!==null?Ce.get(x).__webglFramebuffer:null;xe.bindFramebuffer(B.FRAMEBUFFER,Tn);let wn=B.fenceSync(B.SYNC_GPU_COMMANDS_COMPLETE,0);return B.flush(),await jte(B,wn,4),B.bindBuffer(B.PIXEL_PACK_BUFFER,en),B.getBufferSubData(B.PIXEL_PACK_BUFFER,0,De),B.deleteBuffer(en),B.deleteSync(wn),De}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,G=null,Z=0){let ne=Math.pow(2,-Z),q=Math.floor(F.image.width*ne),De=Math.floor(F.image.height*ne),ze=G!==null?G.x:0,Ye=G!==null?G.y:0;Ge.setTexture2D(F,0),B.copyTexSubImage2D(B.TEXTURE_2D,Z,0,0,ze,Ye,q,De),xe.unbindTexture()};let Ma=B.createFramebuffer(),iu=B.createFramebuffer();this.copyTextureToTexture=function(F,G,Z=null,ne=null,q=0,De=null){De===null&&(q!==0?(a_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),De=q,q=0):De=0);let ze,Ye,Ke,bt,At,ct,en,Tn,wn,_n=F.isCompressedTexture?F.mipmaps[De]:F.image;if(Z!==null)ze=Z.max.x-Z.min.x,Ye=Z.max.y-Z.min.y,Ke=Z.isBox3?Z.max.z-Z.min.z:1,bt=Z.min.x,At=Z.min.y,ct=Z.isBox3?Z.min.z:0;else{let Pr=Math.pow(2,-q);ze=Math.floor(_n.width*Pr),Ye=Math.floor(_n.height*Pr),F.isDataArrayTexture?Ke=_n.depth:F.isData3DTexture?Ke=Math.floor(_n.depth*Pr):Ke=1,bt=0,At=0,ct=0}ne!==null?(en=ne.x,Tn=ne.y,wn=ne.z):(en=0,Tn=0,wn=0);let yn=Rt.convert(G.format),lt=Rt.convert(G.type),Jn;G.isData3DTexture?(Ge.setTexture3D(G,0),Jn=B.TEXTURE_3D):G.isDataArrayTexture||G.isCompressedArrayTexture?(Ge.setTexture2DArray(G,0),Jn=B.TEXTURE_2D_ARRAY):(Ge.setTexture2D(G,0),Jn=B.TEXTURE_2D),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,G.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,G.unpackAlignment);let ot=B.getParameter(B.UNPACK_ROW_LENGTH),Li=B.getParameter(B.UNPACK_IMAGE_HEIGHT),vs=B.getParameter(B.UNPACK_SKIP_PIXELS),ai=B.getParameter(B.UNPACK_SKIP_ROWS),Rr=B.getParameter(B.UNPACK_SKIP_IMAGES);B.pixelStorei(B.UNPACK_ROW_LENGTH,_n.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,_n.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,bt),B.pixelStorei(B.UNPACK_SKIP_ROWS,At),B.pixelStorei(B.UNPACK_SKIP_IMAGES,ct);let zn=F.isDataArrayTexture||F.isData3DTexture,Fi=G.isDataArrayTexture||G.isData3DTexture;if(F.isDepthTexture){let Pr=Ce.get(F),Xt=Ce.get(G),Vi=Ce.get(Pr.__renderTarget),os=Ce.get(Xt.__renderTarget);xe.bindFramebuffer(B.READ_FRAMEBUFFER,Vi.__webglFramebuffer),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,os.__webglFramebuffer);for(let Ui=0;Ui<Ke;Ui++)zn&&(B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Ce.get(F).__webglTexture,q,ct+Ui),B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Ce.get(G).__webglTexture,De,wn+Ui)),B.blitFramebuffer(bt,At,ze,Ye,en,Tn,ze,Ye,B.DEPTH_BUFFER_BIT,B.NEAREST);xe.bindFramebuffer(B.READ_FRAMEBUFFER,null),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else if(q!==0||F.isRenderTargetTexture||Ce.has(F)){let Pr=Ce.get(F),Xt=Ce.get(G);xe.bindFramebuffer(B.READ_FRAMEBUFFER,Ma),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,iu);for(let Vi=0;Vi<Ke;Vi++)zn?B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Pr.__webglTexture,q,ct+Vi):B.framebufferTexture2D(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Pr.__webglTexture,q),Fi?B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Xt.__webglTexture,De,wn+Vi):B.framebufferTexture2D(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Xt.__webglTexture,De),q!==0?B.blitFramebuffer(bt,At,ze,Ye,en,Tn,ze,Ye,B.COLOR_BUFFER_BIT,B.NEAREST):Fi?B.copyTexSubImage3D(Jn,De,en,Tn,wn+Vi,bt,At,ze,Ye):B.copyTexSubImage2D(Jn,De,en,Tn,bt,At,ze,Ye);xe.bindFramebuffer(B.READ_FRAMEBUFFER,null),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else Fi?F.isDataTexture||F.isData3DTexture?B.texSubImage3D(Jn,De,en,Tn,wn,ze,Ye,Ke,yn,lt,_n.data):G.isCompressedArrayTexture?B.compressedTexSubImage3D(Jn,De,en,Tn,wn,ze,Ye,Ke,yn,_n.data):B.texSubImage3D(Jn,De,en,Tn,wn,ze,Ye,Ke,yn,lt,_n):F.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,De,en,Tn,ze,Ye,yn,lt,_n.data):F.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,De,en,Tn,_n.width,_n.height,yn,_n.data):B.texSubImage2D(B.TEXTURE_2D,De,en,Tn,ze,Ye,yn,lt,_n);B.pixelStorei(B.UNPACK_ROW_LENGTH,ot),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Li),B.pixelStorei(B.UNPACK_SKIP_PIXELS,vs),B.pixelStorei(B.UNPACK_SKIP_ROWS,ai),B.pixelStorei(B.UNPACK_SKIP_IMAGES,Rr),De===0&&G.generateMipmaps&&B.generateMipmap(Jn),xe.unbindTexture()},this.initRenderTarget=function(F){Ce.get(F).__webglFramebuffer===void 0&&Ge.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?Ge.setTextureCube(F,0):F.isData3DTexture?Ge.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Ge.setTexture2DArray(F,0):Ge.setTexture2D(F,0),xe.unbindTexture()},this.resetState=function(){w=0,y=0,x=null,xe.reset(),j.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ia}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Ln._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ln._getUnpackColorSpace()}};var SNe=["canvasContainer"],wD=class n{canvasContainer;scene;camera;renderer;textMesh;stars=[];animationId=0;ngOnInit(){this.initScene(),this.createStarfield(),this.createText(),this.renderer.render(this.scene,this.camera)}ngAfterViewInit(){this.canvasContainer&&this.canvasContainer.nativeElement.appendChild(this.renderer.domElement)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer.dispose()}initScene(){this.scene=new Fb,this.scene.background=new hn(17),this.camera=new zr(75,window.innerWidth/400,.1,1e3),this.camera.position.z=5,this.renderer=new vD({antialias:!0}),this.renderer.setSize(window.innerWidth,400),this.renderer.setPixelRatio(window.devicePixelRatio);let e=new ex(16777215,.5);this.scene.add(e);let t=new m_(4149685,2);t.position.set(5,5,5),this.scene.add(t);let i=new m_(16711935,1.5);i.position.set(-5,-5,5),this.scene.add(i)}createStarfield(){let e=new po,t=new h_({color:16777215,size:.05,transparent:!0}),i=[];for(let s=0;s<1e3;s++){let o=(Math.random()-.5)*100,a=(Math.random()-.5)*100,c=(Math.random()-.5)*100;i.push(o,a,c)}e.setAttribute("position",new Ks(i,3));let r=new Vb(e,t);this.scene.add(r),this.stars.push(r)}createText(){let e=[],t=new Lf;t.lineTo(0,2),t.lineTo(2,4),e.push(t);let i=new Lf;i.moveTo(1.5,0),i.lineTo(2,2),i.lineTo(2.3,2),i.lineTo(2.8,0),i.lineTo(2.5,0),i.lineTo(2.35,.8),i.lineTo(1.95,.8),i.lineTo(1.8,0),i.lineTo(1.5,0);let r=new Xb(e);r.center();let s=new Qb({color:4149685,emissive:1713022,specular:6056896,shininess:100});this.textMesh=new mo(r,s),this.scene.add(this.textMesh)}animate=()=>{this.animationId=requestAnimationFrame(this.animate),this.textMesh&&(this.textMesh.rotation.y+=.01,this.textMesh.rotation.x=Math.sin(Date.now()*.001)*.2),this.stars.forEach(e=>{e.rotation.y+=5e-4,e.rotation.x+=2e-4}),this.renderer.render(this.scene,this.camera)};onWindowResize(){this.camera.aspect=window.innerWidth/400,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,400)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-mybanner"]],viewQuery:function(t,i){if(t&1&&Kc(SNe,7),t&2){let r;Qi(r=Ji())&&(i.canvasContainer=r.first)}},decls:2,vars:0,consts:[["canvasContainer",""],[1,"banner-container"]],template:function(t,i){t&1&&fs(0,"div",1,0)},styles:[".banner-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow:hidden;position:relative;background:#001}.banner-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]})};var ED=class n{retry(){window.location.href="/"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-no-internet"]],decls:12,vars:0,consts:[[1,"no-internet-container"],[1,"message-card"],["color","warn",1,"error-icon"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){t&1&&(se(0,"div",0)(1,"mat-card",1)(2,"mat-icon",2),Q(3,"wifi_off"),ae(),se(4,"h2"),Q(5,"Unable to connect to Internet"),ae(),se(6,"p"),Q(7,"Please check your connection and try again."),ae(),se(8,"button",3),Nn("click",function(){return i.retry()}),se(9,"mat-icon"),Q(10,"refresh"),ae(),Q(11," Retry "),ae()()())},dependencies:[Os,No,yg,Oo,od,Fs,cc],styles:[".no-internet-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5;padding:20px}.message-card[_ngcontent-%COMP%]{padding:40px;text-align:center;max-width:400px;width:100%;display:flex;flex-direction:column;align-items:center;gap:20px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}h2[_ngcontent-%COMP%]{margin:0;color:#333}p[_ngcontent-%COMP%]{color:#666;margin:0}"]})};var ID=class n{constructor(e){this.firestore=e}collPath="notifications";createNotification(e){let t=QS(this.firestore,this.collPath);return nX(t,st(ie({},e),{createdAt:new Date})).then(r=>r.id)}updateNotification(e,t){let i=dg(this.firestore,`${this.collPath}/${e}`);return lX(i,t)}deleteNotification(e){let t=dg(this.firestore,`${this.collPath}/${e}`);return iX(t)}async getNotificationsPage(e=5,t){let i=QS(this.firestore,this.collPath),r;t?r=JS(i,S0("time"),cX(t),_3(e)):r=JS(i,S0("time"),_3(e));let s=await sX(r),o=[];s.forEach(c=>{o.push(ie({id:c.id},c.data()))});let a=s.docs[s.docs.length-1];return{items:o,lastDoc:a}}streamNotifications(){let e=QS(this.firestore,this.collPath),t=JS(e,S0("time"),S0("createdAt"));return eX(t,{idField:"id"})}static \u0275fac=function(t){return new(t||n)(it(Dl))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function ANe(n,e){if(n&1){let t=Er();bh(0),se(1,"div",9),Nn("click",function(){ri(t);let r=Gn();return si(r.openCreate())}),se(2,"div",10),Q(3,"+"),ae(),se(4,"p"),Q(5,"No reminders yet \u2014 tap to create one"),ae()(),xh()}}function MNe(n,e){if(n&1){let t=Er();se(0,"div",18)(1,"div",19)(2,"div",20),Q(3),ae(),se(4,"div",21),Q(5),ae()(),se(6,"div",22)(7,"div",23),Q(8),ae(),se(9,"div",24)(10,"button",25),Nn("click",function(){let r=ri(t).$implicit,s=Gn(2);return si(s.openEdit(r))}),Q(11,"\u270E"),ae(),se(12,"button",26),Nn("click",function(){let r=ri(t).$implicit,s=Gn(2);return si(s.delete(r))}),Q(13,"\u{1F5D1}"),ae()()()()}if(n&2){let t=e.$implicit;Ot(3),ps(t.title),Ot(2),IE("",t.repeat," \u2022 ",t.day),Ot(3),ps(t.time)}}function DNe(n,e){if(n&1){let t=Er();se(0,"section",11),Fr(1,MNe,14,4,"div",12),se(2,"div",13)(3,"button",14),Nn("click",function(){ri(t);let r=Gn();return si(r.loadPrevious())}),Q(4,"\u2039 Prev"),ae(),se(5,"select",15),SE("ngModelChange",function(r){ri(t);let s=Gn();return sk(s.pageSize,r)||(s.pageSize=r),si(r)}),Nn("change",function(){ri(t);let r=Gn();return si(r.loadFirstPage())}),se(6,"option",16),Q(7,"5"),ae(),se(8,"option",16),Q(9,"10"),ae(),se(10,"option",16),Q(11,"20"),ae()(),se(12,"button",14),Nn("click",function(){ri(t);let r=Gn();return si(r.loadNext())}),Q(13,"Next \u203A"),ae()(),se(14,"button",17),Nn("click",function(){ri(t);let r=Gn();return si(r.openCreate())}),Q(15,"+"),ae()()}if(n&2){let t=Gn();Ot(),Bn("ngForOf",t.notifications),Ot(2),Bn("disabled",t.loading),Ot(2),TE("ngModel",t.pageSize),Ot(),Bn("ngValue",5),Ot(2),Bn("ngValue",10),Ot(2),Bn("ngValue",20),Ot(2),Bn("disabled",t.loading)}}function RNe(n,e){n&1&&(se(0,"div",27),Q(1,"Loading\u2026"),ae())}function PNe(n,e){if(n&1){let t=Er();se(0,"div",28),Nn("click",function(){ri(t);let r=Gn();return si(r.showModal=!1)}),ae()}}function kNe(n,e){if(n&1){let t=Er();se(0,"div",29)(1,"form",30),Nn("ngSubmit",function(){ri(t);let r=Gn();return si(r.submit())}),se(2,"h3"),Q(3),ae(),se(4,"label",31)(5,"span",32),Q(6,"Reminder title"),ae(),Sn(7,"input",33),ae(),se(8,"div",34)(9,"label",31)(10,"span",32),Q(11,"Repeat"),ae(),se(12,"select",35)(13,"option"),Q(14,"Daily"),ae(),se(15,"option"),Q(16,"Weekly"),ae(),se(17,"option"),Q(18,"Monthly"),ae()()(),se(19,"label",31)(20,"span",32),Q(21,"Day"),ae(),se(22,"select",36)(23,"option"),Q(24,"Everyday"),ae(),se(25,"option"),Q(26,"Mon"),ae(),se(27,"option"),Q(28,"Tue"),ae(),se(29,"option"),Q(30,"Wed"),ae(),se(31,"option"),Q(32,"Thu"),ae(),se(33,"option"),Q(34,"Fri"),ae(),se(35,"option"),Q(36,"Sat"),ae(),se(37,"option"),Q(38,"Sun"),ae()()()(),se(39,"label",31)(40,"span",32),Q(41,"Time"),ae(),Sn(42,"input",37),ae(),se(43,"div",38)(44,"button",39),Nn("click",function(){ri(t);let r=Gn();return si(r.showModal=!1)}),Q(45,"Cancel"),ae(),se(46,"button",40),Q(47),ae()()()()}if(n&2){let t=Gn();Ot(),Bn("formGroup",t.form),Ot(2),ps(t.editing?"Edit Reminder":"New Reminder"),Ot(44),ps(t.editing?"Save":"Schedule")}}var TD=class n{constructor(e,t){this.ns=e;this.fb=t;this.form=this.fb.group({title:["",Gg.required],repeat:["Daily"],day:["Everyday"],time:["",[Gg.required,Gg.pattern(/^([01]\d|2[0-3]):([0-5]\d)$/)]]})}pageSize=5;notifications=[];loading=!1;lastDoc=null;pageStack=[];showModal=!1;editing=null;form;emptyMode=!1;ngOnInit(){this.loadFirstPage()}async loadFirstPage(){this.loading=!0,this.pageStack=[],this.lastDoc=null;let e=await this.ns.getNotificationsPage(this.pageSize);this.notifications=e.items,this.lastDoc=e.lastDoc||null,this.pageStack.push(this.lastDoc),this.emptyMode=this.notifications.length===0,this.loading=!1}async loadNext(){if(!this.lastDoc)return;this.loading=!0;let e=await this.ns.getNotificationsPage(this.pageSize,this.lastDoc);e.items.length?(this.pageStack.push(e.lastDoc||null),this.notifications=e.items,this.lastDoc=e.lastDoc||null):this.lastDoc=null,this.emptyMode=this.notifications.length===0,this.loading=!1}async loadPrevious(){if(this.pageStack.length<=1){await this.loadFirstPage();return}this.pageStack.pop();let e=this.pageStack[this.pageStack.length-1]||null;this.loading=!0;let t,i=this.pageStack.length-1,r=[];t=void 0;for(let s=0;s<=i;s++){let o=await this.ns.getNotificationsPage(this.pageSize,t);r=o.items,t=o.lastDoc||void 0}this.notifications=r,this.lastDoc=t||null,this.emptyMode=this.notifications.length===0,this.loading=!1}openCreate(){this.editing=null,this.form.reset({title:"",repeat:"Daily",day:"Everyday",time:""}),this.showModal=!0}openEdit(e){this.editing=e,this.form.patchValue({title:e.title,repeat:e.repeat,day:e.day,time:e.time}),this.showModal=!0}async submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let e={title:this.form.value.title,repeat:this.form.value.repeat,day:this.form.value.day,time:this.form.value.time};this.editing&&this.editing.id?await this.ns.updateNotification(this.editing.id,e):await this.ns.createNotification(e),await this.loadFirstPage(),this.showModal=!1}async delete(e){e.id&&confirm(`Delete "${e.title}"?`)&&(await this.ns.deleteNotification(e.id),await this.loadFirstPage())}static \u0275fac=function(t){return new(t||n)(mt(ID),mt(yee))};static \u0275cmp=gt({type:n,selectors:[["app-notifications"]],decls:11,vars:5,consts:[[1,"notifications-root"],[1,"topbar"],[1,"top-actions"],[1,"content"],[4,"ngIf"],["class","list-section",4,"ngIf"],["class","loading-strip",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true",4,"ngIf"],[1,"empty-state",3,"click"],[1,"empty-plus"],[1,"list-section"],["class","card",4,"ngFor","ngForOf"],[1,"pagination"],[1,"p-btn",3,"click","disabled"],[1,"page-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["aria-label","Add notification",1,"fab",3,"click"],[1,"card"],[1,"item-left"],[1,"title"],[1,"meta"],[1,"item-right"],[1,"time"],[1,"actions"],["title","Edit",1,"icon-btn",3,"click"],["title","Delete",1,"icon-btn",3,"click"],[1,"loading-strip"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"modal"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"label"],["type","text","formControlName","title","placeholder","e.g., Hydration reminder"],[1,"grid-2"],["formControlName","repeat"],["formControlName","day"],["type","time","formControlName","time"],[1,"modal-actions"],["type","button",1,"btn","ghost",3,"click"],["type","submit",1,"btn","primary"]],template:function(t,i){t&1&&(se(0,"div",0)(1,"header",1)(2,"h2"),Q(3,"Notifications"),ae(),Sn(4,"div",2),ae(),se(5,"main",3),Fr(6,ANe,6,0,"ng-container",4)(7,DNe,16,7,"section",5)(8,RNe,2,0,"div",6),ae(),Fr(9,PNe,1,0,"div",7)(10,kNe,48,3,"div",8),ae()),t&2&&(Ot(6),Bn("ngIf",i.emptyMode&&!i.loading),Ot(),Bn("ngIf",!i.emptyMode),Ot(),Bn("ngIf",i.loading),Ot(),Bn("ngIf",i.showModal),Ot(),Bn("ngIf",i.showModal))},dependencies:[Os,UE,sa,vee,dee,pee,gee,vA,EA,iee,ree,sB,bee,aB,oB,No,Fs,Oo],styles:[`[_nghost-%COMP%]{display:block;font-family:Inter,system-ui,-apple-system,sans-serif;color:#0f172a;--primary-color: #2563eb;--primary-hover: #1d4ed8;--bg-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);--card-bg: #ffffff;--text-main: #0f172a;--text-muted: #64748b;--border-color: #e2e8f0;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.notifications-root[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:2rem auto;padding:1.5rem;background:var(--bg-gradient);border-radius:1rem;box-shadow:var(--shadow-lg);position:relative;box-sizing:border-box}@media(max-width:640px){.notifications-root[_ngcontent-%COMP%]{margin:0;border-radius:0;min-height:100vh;padding:1rem}}.topbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:1rem;border-bottom:1px solid var(--border-color);margin-bottom:1rem}.topbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:1.5rem;color:var(--text-main);letter-spacing:-.025em}.list-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:var(--card-bg);border-radius:.75rem;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--text-main)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);display:flex;align-items:center;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-color);font-size:.875rem;background:#eff6ff;padding:.25rem .5rem;border-radius:.375rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media(max-width:400px){.card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}}.empty-state[_ngcontent-%COMP%]{min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;border:2px dashed var(--border-color);border-radius:1rem;cursor:pointer;background:#ffffff80;transition:background .2s}.empty-state[_ngcontent-%COMP%]:hover{background:#fffc}.empty-state[_ngcontent-%COMP%]   .empty-plus[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0f2fe;font-size:2rem;color:var(--primary-color);box-shadow:var(--shadow-sm)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-weight:500}.fab[_ngcontent-%COMP%]{position:fixed;right:2rem;bottom:2rem;width:3.5rem;height:3.5rem;border-radius:50%;border:none;background:var(--primary-color);color:#fff;font-size:1.75rem;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-lg);cursor:pointer;transition:transform .2s,background .2s;z-index:10}.fab[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:scale(1.05)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.p-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 1rem;border-radius:.5rem;cursor:pointer;font-weight:500;color:var(--text-main);transition:all .2s}.p-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc;border-color:#cbd5e1}.p-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-select[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 2rem .5rem 1rem;border-radius:.5rem;cursor:pointer;font-family:inherit;color:var(--text-main);outline:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .5rem center;background-size:1rem}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-size:1.1rem;padding:.5rem;border-radius:.375rem;color:var(--text-muted);transition:background .2s,color .2s}.icon-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.loading-strip[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:var(--text-muted);font-style:italic}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a99;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:40;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:90%;max-width:450px;background:#fff;border-radius:1rem;padding:1.5rem;z-index:50;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%,-40%);opacity:0}to{transform:translate(-50%,-50%);opacity:1}}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:700;color:var(--text-main)}.field[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.5rem}.field[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:.5rem;border:1px solid var(--border-color);background:#fff;outline:none;font-size:1rem;color:var(--text-main);transition:border-color .2s,box-shadow .2s;box-sizing:border-box}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #2563eb1a}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem 1.5rem;border:none;cursor:pointer;font-weight:600;font-size:.875rem;transition:all .2s}.btn.ghost[_ngcontent-%COMP%]{background:transparent;color:var(--text-muted)}.btn.ghost[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.btn.primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;box-shadow:0 4px 6px -1px #2563eb33}.btn.primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 6px 8px -1px #2563eb4d}`]})};function NNe(n,e){if(n&1){let t=Er();at(0,"button",6),wh("click",function(){ri(t);let r=Gn();return si(r.installPwa())}),at(1,"div",7),Io(),at(2,"svg",8),fs(3,"path",9),Et()(),Vc(),at(4,"span"),Q(5,"Install App"),Et()(),at(6,"p",10),Q(7," Install for the best experience on your device. "),Et()}}function ONe(n,e){if(n&1){let t=Er();at(0,"button",11),wh("click",function(){ri(t);let r=Gn();return si(r.openApp())}),at(1,"span"),Q(2,"Open App"),Et(),Io(),at(3,"svg",8),fs(4,"path",12),Et()()}}var SD=class n{router=H(Vr);deferredPrompt;showInstallButton=jn(!1,{});ngOnInit(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.showInstallButton.set(!0)})}async installPwa(){if(this.deferredPrompt){this.deferredPrompt.prompt();let{outcome:e}=await this.deferredPrompt.userChoice;console.log(e==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null,this.showInstallButton.set(!1)}}openApp(){window.location.href=window.location.origin}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-install-app"]],decls:10,vars:1,consts:[[1,"install-container"],[1,"install-card"],["src","icons/la-logo.png","alt","Lifestyle Adapter Logo",1,"app-logo"],[1,"subtitle"],[1,"actions"],[1,"install-button","secondary"],[1,"install-button","primary",3,"click"],[1,"icon-wrapper"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentColor"],["d","M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"],[1,"install-note"],[1,"install-button","secondary",3,"click"],["d","M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"]],template:function(t,i){t&1&&(at(0,"div",0)(1,"div",1),fs(2,"img",2),at(3,"h1"),Q(4,"Lifestyle Adapter"),Et(),at(5,"p",3),Q(6,"Your personal growth companion for a better lifestyle."),Et(),at(7,"div",4),Fp(8,NNe,8,0)(9,ONe,5,0,"button",5),Et()()()),t&2&&(Ot(8),Vp(i.showInstallButton()?8:9))},styles:["[_nghost-%COMP%]{display:block;height:100%}.install-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100dvh;padding:20px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);background:radial-gradient(circle at 50% 10%,#fff,#eef2f3)}.install-card[_ngcontent-%COMP%]{background:#ffffffe6;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:40px;border-radius:24px;box-shadow:0 10px 30px #00000014,0 1px 3px #0000000d;text-align:center;max-width:420px;width:100%;border:1px solid rgba(255,255,255,.5);display:flex;flex-direction:column;align-items:center;transition:transform .3s ease}.install-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.app-logo[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:contain;margin-bottom:24px;border-radius:24px;box-shadow:0 8px 16px #0000001a;background:#fff;padding:10px}h1[_ngcontent-%COMP%]{font-size:clamp(1.5rem,5vw,2.2rem);margin-bottom:.5rem;color:#1a1a2e;font-weight:800;line-height:1.2;letter-spacing:-.02em;width:100%}.subtitle[_ngcontent-%COMP%]{margin-bottom:2.5rem;color:#5d6d7e;font-size:1rem;line-height:1.6;font-weight:500}.actions[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:16px;align-items:center}.install-button[_ngcontent-%COMP%]{width:100%;padding:14px 24px;border-radius:16px;font-size:1.05rem;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.2,.8,.2,1);display:flex;align-items:center;justify-content:center;gap:12px;border:none;outline:none;position:relative;overflow:hidden}.install-button.primary[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;box-shadow:0 4px 12px #3f51b540}.install-button.primary[_ngcontent-%COMP%]:hover{background-color:#303f9f;box-shadow:0 6px 16px #3f51b559;transform:translateY(-2px)}.install-button.primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.install-button.secondary[_ngcontent-%COMP%]{background-color:#fff;color:#3f51b5;border:2px solid #3f51b5}.install-button.secondary[_ngcontent-%COMP%]:hover{background-color:#f0f2ff}.icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.install-note[_ngcontent-%COMP%]{font-size:.85rem;color:#8c9eff;margin:0;font-weight:500}@media(max-width:480px){.install-container[_ngcontent-%COMP%]{padding:16px;align-items:flex-end;align-items:center}.install-card[_ngcontent-%COMP%]{padding:32px 24px;border-radius:20px}.app-logo[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:20px}h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem}}"]})};var CD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-privacy-policy"]],decls:44,vars:0,consts:[[1,"policy-container"],[1,"last-updated"]],template:function(t,i){t&1&&(at(0,"div",0)(1,"h1"),Q(2,"Privacy Policy"),Et(),at(3,"p",1),Q(4,"Last Updated: December 7, 2025"),Et(),at(5,"section")(6,"h2"),Q(7,"1. Introduction"),Et(),at(8,"p"),Q(9,"Welcome to Lifestyle Adapter. We value your privacy and are committed to protecting your personal information. This Privacy Policy explains how we collect, use, and safeguard your data when you use our application."),Et()(),at(10,"section")(11,"h2"),Q(12,"2. Data Collection"),Et(),at(13,"p"),Q(14,"We collect minimal data necessary to provide our services, including:"),Et(),at(15,"ul")(16,"li"),Q(17,"Account information (via Google Sign-In)"),Et(),at(18,"li"),Q(19,"Usage data to improve user experience"),Et(),at(20,"li"),Q(21,"Device information for optimization"),Et()()(),at(22,"section")(23,"h2"),Q(24,"3. Use of Data"),Et(),at(25,"p"),Q(26,"Your data is used solely to:"),Et(),at(27,"ul")(28,"li"),Q(29,"Authenticate your identity"),Et(),at(30,"li"),Q(31,"Provide personalized lifestyle recommendations"),Et(),at(32,"li"),Q(33,"Analyze application performance"),Et()()(),at(34,"section")(35,"h2"),Q(36,"4. Data Security"),Et(),at(37,"p"),Q(38,"We implement robust security measures to protect your data. We do not sell your personal information to third parties."),Et()(),at(39,"section")(40,"h2"),Q(41,"5. Contact Us"),Et(),at(42,"p"),Q(43,"If you have any questions about this Privacy Policy, please contact us at support@lifestyleadapter.com."),Et()()())},styles:[".policy-container[_ngcontent-%COMP%]{padding:40px 20px;max-width:800px;margin:0 auto;font-family:Roboto,sans-serif;line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:#1a237e}.last-updated[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:40px;font-style:italic}section[_ngcontent-%COMP%]{margin-bottom:30px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#283593;margin-bottom:15px;border-bottom:2px solid #e8eaf6;padding-bottom:8px}p[_ngcontent-%COMP%]{margin-bottom:15px}ul[_ngcontent-%COMP%]{padding-left:20px;margin-bottom:15px}li[_ngcontent-%COMP%]{margin-bottom:8px}"]})};var AD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-terms-of-service"]],decls:35,vars:0,consts:[[1,"policy-container"],[1,"last-updated"]],template:function(t,i){t&1&&(at(0,"div",0)(1,"h1"),Q(2,"Terms of Service"),Et(),at(3,"p",1),Q(4,"Last Updated: December 7, 2025"),Et(),at(5,"section")(6,"h2"),Q(7,"1. Agreement to Terms"),Et(),at(8,"p"),Q(9,"By accessing and using Lifestyle Adapter, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our services."),Et()(),at(10,"section")(11,"h2"),Q(12,"2. User Accounts"),Et(),at(13,"p"),Q(14,"You are responsible for maintaining the confidentiality of your account and password. You agree to accept responsibility for all activities that occur under your account."),Et()(),at(15,"section")(16,"h2"),Q(17,"3. Acceptable Use"),Et(),at(18,"p"),Q(19,"You agree not to use the application for any unlawful purpose or in any way that could damage, disable, overburden, or impair the service."),Et()(),at(20,"section")(21,"h2"),Q(22,"4. Intellectual Property"),Et(),at(23,"p"),Q(24,"The content, features, and functionality of Lifestyle Adapter are owned by us and are protected by international copyright, trademark, and other intellectual property laws."),Et()(),at(25,"section")(26,"h2"),Q(27,"5. Termination"),Et(),at(28,"p"),Q(29,"We reserve the right to terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."),Et()(),at(30,"section")(31,"h2"),Q(32,"6. Changes to Terms"),Et(),at(33,"p"),Q(34,"We reserve the right to modify or replace these Terms at any time. We will provide notice of any significant changes."),Et()()())},styles:[".policy-container[_ngcontent-%COMP%]{padding:40px 20px;max-width:800px;margin:0 auto;font-family:Roboto,sans-serif;line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:#1a237e}.last-updated[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:40px;font-style:italic}section[_ngcontent-%COMP%]{margin-bottom:30px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#283593;margin-bottom:15px;border-bottom:2px solid #e8eaf6;padding-bottom:8px}p[_ngcontent-%COMP%]{margin-bottom:15px}"]})};var Ene=()=>Cee(["login"]),Ine=()=>Aee(["dashboard"]),Tne=[ie({path:"",component:uC},mb(Ine)),ie({path:"login",component:dC},mb(Ine)),{path:"logout",component:hC},ie({path:"dashboard",component:lA},mb(Ene)),ie({path:"profile",component:IA},mb(Ene)),{path:"banner",component:wD},{path:"no-internet",component:ED},{path:"notifications",component:TD},{path:"install-app",component:SD},{path:"privacy-policy",component:CD},{path:"terms-of-service",component:AD},{path:"**",redirectTo:""}];var L4="Service workers are disabled or not supported by this browser",E_=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new _t(i=>i.error(new Oe(5601,!1)));else{let i=null,r=new Dt;this.worker=new _t(l=>(i!==null&&l.next(i),r.subscribe(u=>l.next(u))));let s=()=>{let{controller:l}=e;l!==null&&(i=l,r.next(i))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(bi(()=>e.getRegistration().then(l=>{if(!l)throw new Oe(5601,!1);return l})));let o=new Dt;this.events=o.asObservable();let a=l=>{let{data:u}=l;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(wr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(i=>{this.worker.pipe(Hi(1)).subscribe(r=>{r.postMessage(ie({action:e},t)),i()})})}postMessageWithOperation(e,t,i){let r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=i=>i.type===e:t=i=>e.includes(i.type),this.events.pipe(ni(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Hi(1))}waitForOperationCompleted(e){return new Promise((t,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(ni(r=>r.nonce===e),Hi(1),pt(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:i})})}get isEnabled(){return!!this.serviceWorker}},LNe=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Dt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Dc,this.notificationClicks=Dc,this.notificationCloses=Dc,this.pushSubscriptionChanges=Dc,this.subscription=Dc;return}this.messages=this.sw.eventsOfType("PUSH").pipe(pt(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(pt(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(pt(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(pt(r=>r.data)),this.pushManager=this.sw.registration.pipe(pt(r=>r.pushManager));let i=this.pushManager.pipe(bi(r=>r.getSubscription()));this.subscription=new _t(r=>{let s=i.subscribe(r),o=this.subscriptionChanges.subscribe(r);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(L4));let i={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(bi(c=>c.subscribe(i)),Hi(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(L4));let t=i=>{if(i===null)throw new Oe(5602,!1);return i.unsubscribe().then(r=>{if(!r)throw new Oe(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,r)=>{this.subscription.pipe(Hi(1),bi(t)).subscribe({next:i,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||n)(it(E_))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),FNe=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Dc,this.unrecoverable=Dc;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(L4));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Oe(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||n)(it(E_))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),Cne=new Ee("");function VNe(){let n=H(lx);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=H(Cne),t=H(St),i=H(wr);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,s=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",s),i.onDestroy(()=>{r.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:s}=n;if(typeof s=="function")r=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Sne(+a[0]||0);break;case"registerWhenStable":r=Promise.race([i.whenStable(),Sne(+a[0])]);break;default:throw new Oe(5600,!1)}}r.then(()=>{i.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(La(5604,!1)))})})}function Sne(n){return new Promise(e=>setTimeout(e,n))}function UNe(){let n=H(lx),e=H(Qt),t=!0;return new E_(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var lx=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ane(n,e={}){return vr([LNe,FNe,{provide:Cne,useValue:n},{provide:lx,useValue:e},{provide:E_,useFactory:UNe},Lp(VNe)])}var MD=class n{constructor(e){this.router=e}isPwa=jn(!1,{});isMobile=jn(!1,{});isDesktop=jn(!1,{});isOnline=jn(!0,{});initialize(){return new Promise(e=>{this.checkPwa(),this.checkDeviceType(),this.checkNetwork(),e()})}checkPwa(){let e=window.matchMedia("(display-mode: standalone)").matches,t=window.navigator.standalone;this.isPwa.set(e||t||!1),this.isPwa()||this.router.navigate(["/install-app"])}checkNetwork(){this.isOnline.set(navigator.onLine),window.addEventListener("online",()=>{this.isOnline.set(!0)}),window.addEventListener("offline",()=>{this.isOnline.set(!1),this.router.navigate(["/no-internet"])}),navigator.onLine||this.router.navigate(["/no-internet"])}checkDeviceType(){let e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e);this.isMobile.set(t),this.isDesktop.set(!t)}static \u0275fac=function(t){return new(t||n)(it(Vr))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mne={providers:[P1(),rN(Tne),I9(()=>T9(C0.firebase)),dW(()=>hW()),ZK(()=>oX()),Ane("ngsw-worker.js",{enabled:!Ny(),registrationStrategy:"registerWhenStable:30000"}),Lp(()=>H(MD).initialize())]};var BNe=["*",[["mat-toolbar-row"]]],zNe=["*","mat-toolbar-row"],HNe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),Dne=(()=>{class n{_elementRef=H(nn);_platform=H(Ki);_document=H(Wt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Ds(s,HNe,5),i&2){let o;Qi(o=Ji())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Xc(r.color?"mat-"+r.color:""),ui("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:zNe,decls:2,vars:0,template:function(i,r){i&1&&(fr(BNe),Xn(0),Xn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return n})();var DD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var ux=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},F4=class extends ux{component;viewContainerRef;injector;projectableNodes;constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=r}},I_=class extends ux{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},V4=class extends ux{element;constructor(e){super(),this.element=e instanceof nn?e.nativeElement:e}},U4=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof F4)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof I_)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof V4)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},dx=class extends U4{outletElement;_appRef;_defaultInjector;constructor(e,t,i){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=i}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(Hc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||Qt.NULL,s=r.get(ii,i.injector);t=DE(e.component,{elementInjector:r,environmentInjector:s,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Rne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();var GNe=20,PD=(()=>{class n{_ngZone=H(St);_platform=H(Ki);_renderer=H(br).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Dt;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=GNe){return this._platform.isBrowser?new _t(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(sw(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):xt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ni(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_scrollableContainsElement(t,i){let r=Ro(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WNe=20,T_=(()=>{class n{_platform=H(Ki);_listeners;_viewportSize;_change=new Dt;_document=H(Wt);constructor(){let t=H(St),i=H(br).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(t=WNe){return t>0?this._change.pipe(sw(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var RD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})(),B4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di,RD,Di,RD]})}return n})();var Pne=IX();function Une(n){return new kD(n.get(T_),n.get(Wt))}var kD=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Xi(-this._previousScrollPosition.left),e.style.top=Xi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Pne&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Pne&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};function Bne(n,e){return new ND(n.get(PD),n.get(St),n.get(T_),e)}var ND=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ni(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var hx=class{enable(){}disable(){}attach(){}};function z4(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function kne(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}function BD(n,e){return new OD(n.get(PD),n.get(T_),n.get(St),e)}var OD=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();z4(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},zne=(()=>{class n{_injector=H(Qt);constructor(){}noop=()=>new hx;close=t=>Bne(this._injector,t);block=()=>Une(this._injector);reposition=t=>BD(this._injector,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S_=class{positionStrategy;scrollStrategy=new hx;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var LD=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var Hne=(()=>{class n{_attachedOverlays=[];_document=H(Wt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jne=(()=>{class n extends Hne{_ngZone=H(St);_renderer=H(br).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gne=(()=>{class n extends Hne{_platform=H(Ki);_ngZone=H(St);_renderer=H(br).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0},s=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[s.listen(i,"pointerdown",this._pointerDownListener,r),s.listen(i,"click",this._clickListener,r),s.listen(i,"auxclick",this._clickListener,r),s.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=Ls(t)};_clickListener=t=>{let i=Ls(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Nne(a.overlayElement,i)||Nne(a.overlayElement,r))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=xr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nne(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Wne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return n})(),$ne=(()=>{class n{_platform=H(Ki);_containerElement;_document=H(Wt);_styleLoader=H(Po);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||C3()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),C3()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Wne)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H4=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function j4(n){return n&&n.nodeType===1}var FD=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Dt;_attachments=new Dt;_detachments=new Dt;_positionStrategy;_scrollStrategy;_locationChanges=Pn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Dt;_outsidePointerEvents=new Dt;_afterNextRenderRef;constructor(e,t,i,r,s,o,a,c,l,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){this._attachHost();let t=this._portalOutlet.attach(e);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ja(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ie(ie({},this._config),e),this._updateElementSize()}setDirection(e){this._config=st(ie({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Xi(this._config.width),e.height=Xi(this._config.height),e.minWidth=Xi(this._config.minWidth),e.minHeight=Xi(this._config.minHeight),e.maxWidth=Xi(this._config.maxWidth),e.maxHeight=Xi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachHost(){if(!this._host.parentElement){let e=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;j4(e)?e.after(this._host):e?.type==="parent"?e.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new H4(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=w3(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=ja(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},One="cdk-overlay-connected-position-bounding-box",$Ne=/([A-Za-z%]+)$/;function zD(n,e){return new VD(e,n.get(T_),n.get(Wt),n.get(Ki),n.get($ne))}var VD=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Dt;_resizeSubscription=Pn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(One),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$f(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(One),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}withPopoverLocation(e){return this._popoverLocation=e,this}getPopoverInsertionPoint(){return this._popoverLocation==="global"?null:this._popoverLocation!=="inline"?this._popoverLocation:this._origin instanceof nn?this._origin.nativeElement:j4(this._origin)?this._origin:null}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=Fne(t),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,p=a+s.height-i.height,_=this._subtractOverflows(s.width,u,d),b=this._subtractOverflows(s.height,h,p),g=_*b;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=Lne(this._overlayRef.getConfig().minHeight),a=Lne(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=Fne(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._getViewportMarginStart()?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._getViewportMarginTop()?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!qNe(this._lastScrollVisibility,i)){let r=new LD(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(t.overlayY==="top")o=e.y,s=i.height-o+this._getViewportMarginBottom();else if(t.overlayY==="bottom")a=i.height-e.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),s=i.height-a+this._getViewportMarginTop();else{let p=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=p*2,o=e.y-p,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,l=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),u=e.x-this._getViewportMarginStart();else if(c)d=e.x,u=i.right-e.x-this._getViewportMarginEnd();else{let p=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;u=p*2,d=e.x-p,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-_/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="auto",r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.width=Xi(i.width),r.height=Xi(i.height),r.top=Xi(i.top)||"auto",r.bottom=Xi(i.bottom)||"auto",r.left=Xi(i.left)||"auto",r.right=Xi(i.right)||"auto",t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Xi(s)),o&&(r.maxWidth=Xi(o))}this._lastBoundingBoxSize=i,$f(this._boundingBox.style,r)}_resetBoundingBoxStyles(){$f(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$f(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();$f(i,this._getExactOverlayY(t,e,u)),$f(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Xi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Xi(o.maxWidth):s&&(i.maxWidth="")),$f(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Xi(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Xi(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kne(e,i),isOriginOutsideView:z4(e,i),isOverlayClipped:kne(t,i),isOverlayOutsideView:z4(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._getViewportMarginTop(),left:i.left+this._getViewportMarginStart(),right:i.left+e-this._getViewportMarginEnd(),bottom:i.top+t-this._getViewportMarginBottom(),width:e-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:t-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&w3(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){let e=this._origin;if(e instanceof nn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function $f(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Lne(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split($Ne);return!t||t==="px"?parseFloat(e):null}return n||null}function Fne(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function qNe(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var Vne="cdk-global-overlay-wrapper";function qne(n){return new UD}var UD=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Vne),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",_="",b="";c?b="flex-start":u==="center"?(b="center",h?_=d:p=d):h?u==="left"||u==="end"?(b="flex-end",p=d):(u==="right"||u==="start")&&(b="flex-start",_=d):u==="left"||u==="start"?(b="flex-start",p=d):(u==="right"||u==="end")&&(b="flex-end",_=d),e.position=this._cssPosition,e.marginLeft=c?"0":p,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=b,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Vne),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Kne=(()=>{class n{_injector=H(Qt);constructor(){}global(){return qne()}flexibleConnectedTo(t){return zD(this._injector,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xne=new Ee("OVERLAY_DEFAULT_CONFIG");function HD(n,e){n.get(Po).load(Wne);let t=n.get($ne),i=n.get(Wt),r=n.get(hf),s=n.get(wr),o=n.get(k0),a=n.get(Lr,null,{optional:!0})||n.get(br).createRenderer(null,null),c=new S_(e),l=n.get(Xne,null,{optional:!0})?.usePopover??!0;c.direction=c.direction||o.value,"showPopover"in i.body?c.usePopover=e?.usePopover??l:c.usePopover=!1;let u=i.createElement("div"),d=i.createElement("div");u.id=r.getId("cdk-overlay-"),u.classList.add("cdk-overlay-pane"),d.appendChild(u),c.usePopover&&(d.setAttribute("popover","manual"),d.classList.add("cdk-overlay-popover"));let h=c.usePopover?c.positionStrategy?.getPopoverInsertionPoint?.():null;return t.getContainerElement().appendChild(d),j4(h)?h.after(d):h?.type==="parent"&&h.element.appendChild(d),new FD(new dx(u,s,n),d,u,c,n.get(St),n.get(jne),i,n.get(Mu),n.get(Gne),e?.disableAnimations??n.get(wy,null,{optional:!0})==="NoopAnimations",n.get(ii),a)}var Yne=(()=>{class n{scrollStrategies=H(zne);_positionBuilder=H(Kne);_injector=H(Qt);constructor(){}create(t){return HD(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var G4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({providers:[Yne],imports:[Di,Rne,B4,B4]})}return n})();var QNe=["mat-menu-item",""],JNe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],ZNe=["mat-icon, [matMenuItemIcon]","*"];function eOe(n,e){n&1&&(Io(),se(0,"svg",2),Sn(1,"polygon",3),ae())}var tOe=["*"];function nOe(n,e){if(n&1){let t=Er();at(0,"div",0),wh("click",function(){ri(t);let r=Gn();return si(r.closed.emit("click"))})("animationstart",function(r){ri(t);let s=Gn();return si(s._onAnimationStart(r.animationName))})("animationend",function(r){ri(t);let s=Gn();return si(s._onAnimationDone(r.animationName))})("animationcancel",function(r){ri(t);let s=Gn();return si(s._onAnimationDone(r.animationName))}),at(1,"div",1),Xn(2),Et()()}if(n&2){let t=Gn();Xc(t._classList),ui("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation",t._panelAnimationState==="void")("mat-menu-panel-animating",t._isAnimating()),wE("id",t.panelId),Wi("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var $4=new Ee("MAT_MENU_PANEL"),fx=(()=>{class n{_elementRef=H(nn);_document=H(Wt);_focusMonitor=H(pg);_parentMenu=H($4,{optional:!0});_changeDetectorRef=H(ks);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new Dt;_focused=new Dt;_highlighted=!1;_triggersSubmenu=!1;constructor(){H(Po).load(gg),this._parentMenu?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&Nn("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(Wi("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),ui("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",ki],disableRipple:[2,"disableRipple","disableRipple",ki]},exportAs:["matMenuItem"],attrs:QNe,ngContentSelectors:ZNe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(fr(JNe),Xn(0),se(1,"span",0),Xn(2,1),ae(),Sn(3,"div",1),Fp(4,eOe,2,0,":svg:svg",2)),i&2&&(Ot(3),Bn("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),Ot(),Vp(r._triggersSubmenu?4:-1))},dependencies:[DX],encapsulation:2,changeDetection:0})}return n})();var iOe=new Ee("MatMenuContent");var rOe=new Ee("mat-menu-default-options",{providedIn:"root",factory:()=>({overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"})}),W4="_mat-menu-enter",jD="_mat-menu-exit",A_=(()=>{class n{_elementRef=H(nn);_changeDetectorRef=H(ks);_injector=H(Qt);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=va();_allItems;_directDescendantItems=new Bc;_classList={};_panelAnimationState="void";_animationDone=new Dt;_isAnimating=jn(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){let i=this._previousPanelClass,r=ie({},this._classList);i&&i.length&&i.split(" ").forEach(s=>{r[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{r[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new vn;close=this.closed;panelId=H(hf).getId("mat-menu-panel-");constructor(){let t=H(rOe);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new D0(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Pc(this._directDescendantItems),bi(t=>Jd(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Pc(this._directDescendantItems),bi(i=>Jd(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let i=t.keyCode,r=this._keyManager;switch(i){case 27:nC(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(t);return}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=ja(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,i=this.yPosition){this._classList=st(ie({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(t){let i=t===jD;(i||t===W4)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(t){(t===W4||t===jD)&&this._isAnimating.set(!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(jD),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?W4:jD)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Pc(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=gt({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,s){if(i&1&&(Ds(s,iOe,5),Ds(s,fx,5),Ds(s,fx,4)),i&2){let o;Qi(o=Ji())&&(r.lazyContent=o.first),Qi(o=Ji())&&(r._allItems=o),Qi(o=Ji())&&(r.items=o)}},viewQuery:function(i,r){if(i&1&&Kc(Zs,5),i&2){let s;Qi(s=Ji())&&(r.templateRef=s.first)}},hostVars:3,hostBindings:function(i,r){i&2&&Wi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",ki],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:ki(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Rs([{provide:$4,useExisting:n}])],ngContentSelectors:tOe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(fr(),yE(0,nOe,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{border-top-color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),sOe=new Ee("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=H(Qt);return()=>BD(n)}});var C_=new WeakMap,oOe=(()=>{class n{_canHaveBackdrop;_element=H(nn);_viewContainerRef=H(Ms);_menuItemInstance=H(fx,{optional:!0,self:!0});_dir=H(k0,{optional:!0});_focusMonitor=H(pg);_ngZone=H(St);_injector=H(Qt);_scrollStrategy=H(sOe);_changeDetectorRef=H(ks);_animationsDisabled=va();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Pn.EMPTY;_menuCloseSubscription=Pn.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(t){t!==this._menuInternal&&(this._menuInternal=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(t){this._canHaveBackdrop=t;let i=H($4,{optional:!0});this._parentMaterialMenu=i instanceof A_?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&C_.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(t){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let r=C_.get(i);C_.set(i,this),r&&r!==this&&r._closeMenu();let s=this._createOverlay(i),o=s.getConfig(),a=o.positionStrategy;this._setPosition(i,a),this._canHaveBackdrop?o.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:o.hasBackdrop=!1,s.hasAttached()||(s.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,t&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof A_&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Na(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}_destroyMenu(t){let i=this._overlayRef,r=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),r instanceof A_&&this._ownsMenu(r)?(this._pendingRemoval=r._animationDone.pipe(Hi(1)).subscribe(()=>{i.detach(),C_.has(r)||r.lazyContent?.detach()}),r._setIsOpen(!1)):(i.detach(),r?.lazyContent?.detach()),r&&this._ownsMenu(r)&&C_.delete(r),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=HD(this._injector,i),this._overlayRef.keydownEvents().subscribe(r=>{this._menu instanceof A_&&this._menu._handleKeydown(r)})}return this._overlayRef}_getOverlayConfig(t){return new S_({positionStrategy:zD(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{this._ngZone.run(()=>{let s=r.connectionPair.overlayX==="start"?"after":"before",o=r.connectionPair.overlayY==="top"?"below":"above";t.setPositionClasses(s,o)})})}_setPosition(t,i){let[r,s]=t.xPosition==="before"?["end","start"]:["start","end"],[o,a]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,d]=[r,s],h=0;if(this._triggersSubmenu()){if(d=r=t.xPosition==="before"?"start":"end",s=u=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let p=this._parentMaterialMenu.items.first;this._parentInnerPadding=p?p._getHostElement().offsetTop:0}h=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c=o==="top"?"bottom":"top",l=a==="top"?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:h},{originX:s,originY:c,overlayX:d,overlayY:o,offsetY:h},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-h},{originX:s,originY:l,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){let t=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:xt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ni(o=>this._menuOpen&&o!==this._menuItemInstance)):xt();return Jd(t,r,s,i)}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new I_(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return C_.get(t)===this}static \u0275fac=function(i){pE()};static \u0275dir=wt({type:n})}return n})(),Qne=(()=>{class n extends oOe{_cleanupTouchstart;_hoverSubscription=Pn.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){this._menu=t}menuData;restoreFocus=!0;menuOpened=new vn;onMenuOpen=this.menuOpened;menuClosed=new vn;onMenuClose=this.menuClosed;constructor(){super(!0);let t=H(Lr);this._cleanupTouchstart=t.listen(this._element.nativeElement,"touchstart",i=>{uf(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(t){return t.backdropClick()}_handleMousedown(t){lf(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let i=t.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=wt({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&Nn("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),i&2&&Wi("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu==null?null:r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[hi]})}return n})();var Jne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[_g,G4,Di,RD]})}return n})();function cOe(n,e){n&1&&(bh(0),se(1,"a",13)(2,"mat-icon"),Q(3,"dashboard"),ae(),Q(4," Dashboard "),ae(),se(5,"a",14)(6,"mat-icon"),Q(7,"person"),ae(),Q(8," Profile "),ae(),se(9,"a",15)(10,"mat-icon"),Q(11,"notifications"),ae(),Q(12," Notifications "),ae(),xh())}function lOe(n,e){n&1&&(bh(0),se(1,"a",16)(2,"mat-icon"),Q(3,"dashboard"),ae(),se(4,"span"),Q(5,"Dashboard"),ae()(),se(6,"a",17)(7,"mat-icon"),Q(8,"person"),ae(),se(9,"span"),Q(10,"Profile"),ae()(),se(11,"a",18)(12,"mat-icon"),Q(13,"notifications"),ae(),se(14,"span"),Q(15,"Notifications"),ae()(),xh())}var GD=class n{authService=H(Vs);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-header"]],decls:26,vars:7,consts:[["menu","matMenu"],["color","primary",1,"app-header"],["routerLink","/",1,"logo"],["src","icons/la-logo.png","alt","LA Logo",1,"logo-img"],[1,"logo-text"],[1,"spacer"],[1,"desktop-nav"],["mat-button","","href","https://la.vvsk.in","target","_blank"],[4,"ngIf"],[1,"mobile-nav"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","","href","https://la.vvsk.in","target","_blank"],["mat-button","","routerLink","/dashboard"],["mat-button","","routerLink","/profile"],["mat-button","","routerLink","/notifications"],["mat-menu-item","","routerLink","/dashboard"],["mat-menu-item","","routerLink","/profile"],["mat-menu-item","","routerLink","/notifications"]],template:function(t,i){if(t&1&&(se(0,"mat-toolbar",1)(1,"div",2),Sn(2,"img",3),se(3,"span",4),Q(4,"Lifestyle Adapter"),ae()(),Sn(5,"span",5),se(6,"div",6)(7,"a",7)(8,"mat-icon"),Q(9,"library_books"),ae(),Q(10," LA Framework 1.0 "),ae(),Fr(11,cOe,13,0,"ng-container",8),Yc(12,"async"),ae(),se(13,"div",9)(14,"button",10)(15,"mat-icon"),Q(16,"menu"),ae()(),se(17,"mat-menu",11,0)(19,"a",12)(20,"mat-icon"),Q(21,"library_books"),ae(),se(22,"span"),Q(23,"LA Framework 1.0"),ae()(),Fr(24,lOe,16,0,"ng-container",8),Yc(25,"async"),ae()()()),t&2){let r=EE(18);Ot(11),Bn("ngIf",Cu(12,3,i.user$)),Ot(3),Bn("matMenuTriggerFor",r),Ot(10),Bn("ngIf",Cu(25,5,i.user$))}},dependencies:[DD,Dne,No,yg,k3,nm,Os,sa,Fs,cc,Jne,A_,fx,Qne,Eh],styles:[".app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer}.logo-img[_ngcontent-%COMP%]{height:40px;width:auto}.logo-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;letter-spacing:.5px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mobile-nav[_ngcontent-%COMP%]{display:none}@media(max-width:768px){.desktop-nav[_ngcontent-%COMP%]{display:none}.mobile-nav[_ngcontent-%COMP%]{display:block}.logo-text[_ngcontent-%COMP%]{font-size:1rem}.logo-img[_ngcontent-%COMP%]{height:32px}}"]})};var WD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/privacy-policy"],["routerLink","/terms-of-service"]],template:function(t,i){t&1&&(se(0,"footer",0)(1,"div",1)(2,"p"),Q(3,"\xA9 2025 Lifestyle Adapter. All rights reserved."),ae(),se(4,"div",2)(5,"a",3),Q(6,"Privacy Policy"),ae(),se(7,"a",4),Q(8,"Terms of Service"),ae()()()())},dependencies:[DD,nm],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:20px 0;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;margin-left:20px;font-size:.9rem;transition:color .3s}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px}}"]})};var $D=class n{title="lifestyle-adapter";router=H(Vr);ngOnInit(){window.matchMedia("(display-mode: standalone)").matches&&(navigator.onLine||this.router.navigate(["/no-internet"]))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=gt({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"content"]],template:function(t,i){t&1&&(Sn(0,"app-header"),se(1,"main",0),Sn(2,"router-outlet"),ae(),Sn(3,"app-footer"))},dependencies:[ov,GD,WD],styles:[".content[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);padding:20px}"]})};Mk($D,Mne).catch(n=>console.error(n));
