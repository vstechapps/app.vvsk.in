var Ane=Object.defineProperty,Mne=Object.defineProperties;var Dne=Object.getOwnPropertyDescriptors;var yx=Object.getOwnPropertySymbols;var F4=Object.prototype.hasOwnProperty,V4=Object.prototype.propertyIsEnumerable;var L4=(n,e,t)=>e in n?Ane(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ie=(n,e)=>{for(var t in e||={})F4.call(e,t)&&L4(n,t,e[t]);if(yx)for(var t of yx(e))V4.call(e,t)&&L4(n,t,e[t]);return n},lt=(n,e)=>Mne(n,Dne(e));var vx=(n,e)=>{var t={};for(var i in n)F4.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&yx)for(var i of yx(n))e.indexOf(i)<0&&V4.call(n,i)&&(t[i]=n[i]);return t};var Kr=null,bx=!1,UD=1,Rne=null,ls=Symbol("SIGNAL");function Nt(n){let e=Kr;return Kr=n,e}function wx(){return Kr}var Zf={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function O_(n){if(bx)throw new Error("");if(Kr===null)return;Kr.consumerOnSignalRead(n);let e=Kr.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Kr.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Kr.producers,t!==void 0&&t.producer===n)){Kr.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Kr&&(!i||kne(r,Kr)))return;let s=tp(Kr),o={producer:n,consumer:Kr,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Kr.producersTail=o,e!==void 0?e.nextProducer=o:Kr.producers=o,s&&H4(n,o)}function U4(){UD++}function BD(n){if(!(tp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===UD)){if(!n.producerMustRecompute(n)&&!F_(n)){VD(n);return}n.producerRecomputeValue(n),VD(n)}}function zD(n){if(n.consumers===void 0)return;let e=bx;bx=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||Pne(i)}}finally{bx=e}}function HD(){return Kr?.consumerAllowSignalWrites!==!1}function Pne(n){n.dirty=!0,zD(n),n.consumerMarkedDirty?.(n)}function VD(n){n.dirty=!1,n.lastCleanEpoch=UD}function ep(n){return n&&B4(n),Nt(n)}function B4(n){n.producersTail=void 0,n.recomputing=!0}function L_(n,e){Nt(e),n&&z4(n)}function z4(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(tp(n))do t=jD(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function F_(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(BD(t),i!==t.version))return!0}return!1}function Ud(n){if(tp(n)){let e=n.producers;for(;e!==void 0;)e=jD(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function H4(n,e){let t=n.consumersTail,i=tp(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)H4(r.producer,r)}function jD(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!tp(e)){let s=e.producers;for(;s!==void 0;)s=jD(s)}return t}function tp(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function GD(n){Rne?.(n)}function kne(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function WD(n,e){return Object.is(n,e)}function Ex(n,e){let t=Object.create(Nne);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(BD(t),O_(t),t.value===xx)throw t.error;return t.value};return i[ls]=t,GD(t),i}var LD=Symbol("UNSET"),FD=Symbol("COMPUTING"),xx=Symbol("ERRORED"),Nne=lt(ie({},Zf),{value:LD,dirty:!0,error:null,equal:WD,kind:"computed",producerMustRecompute(n){return n.value===LD||n.value===FD},producerRecomputeValue(n){if(n.value===FD)throw new Error("");let e=n.value;n.value=FD;let t=ep(n),i,r=!1;try{i=n.computation(),Nt(null),r=e!==LD&&e!==xx&&i!==xx&&n.equal(e,i)}catch(s){i=xx,n.error=s}finally{L_(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function One(){throw new Error}var j4=One;function G4(n){j4(n)}function $D(n){j4=n}var Lne=null;function qD(n,e){let t=Object.create(Ix);t.value=n,e!==void 0&&(t.equal=e);let i=()=>W4(t);return i[ls]=t,GD(t),[i,o=>V_(t,o),o=>$4(t,o)]}function W4(n){return O_(n),n.value}function V_(n,e){HD()||G4(n),n.equal(n.value,e)||(n.value=e,Fne(n))}function $4(n,e){HD()||G4(n),V_(n,e(n.value))}var Ix=lt(ie({},Zf),{equal:WD,value:void 0,kind:"signal"});function Fne(n){n.version++,U4(),zD(n),Lne?.(n)}function KD(n){let e=Nt(null);try{return n()}finally{Nt(e)}}var XD=lt(ie({},Zf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function YD(n){if(n.dirty=!1,n.version>0&&!F_(n))return;n.version++;let e=ep(n);try{n.cleanup(),n.fn()}finally{L_(n,e)}}function Yt(n){return typeof n=="function"}function np(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Sx=np(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Bd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Nn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Yt(i))try{i()}catch(s){e=s instanceof Sx?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{q4(s)}catch(o){e=e??[],o instanceof Sx?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sx(e)}}add(e){var t;if(e&&e!==this)if(this.closed)q4(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Bd(t,e)}remove(e){let{_finalizers:t}=this;t&&Bd(t,e),e instanceof n&&e._removeParent(this)}};Nn.EMPTY=(()=>{let n=new Nn;return n.closed=!0,n})();var QD=Nn.EMPTY;function Tx(n){return n instanceof Nn||n&&"closed"in n&&Yt(n.remove)&&Yt(n.add)&&Yt(n.unsubscribe)}function q4(n){Yt(n)?n():n.unsubscribe()}var jo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ip={setTimeout(n,e,...t){let{delegate:i}=ip;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ip;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cx(n){ip.setTimeout(()=>{let{onUnhandledError:e}=jo;if(e)e(n);else throw n})}function zd(){}var K4=JD("C",void 0,void 0);function X4(n){return JD("E",void 0,n)}function Y4(n){return JD("N",n,void 0)}function JD(n,e,t){return{kind:n,value:e,error:t}}var Hd=null;function rp(n){if(jo.useDeprecatedSynchronousErrorHandling){let e=!Hd;if(e&&(Hd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Hd;if(Hd=null,t)throw i}}else n()}function Q4(n){jo.useDeprecatedSynchronousErrorHandling&&Hd&&(Hd.errorThrown=!0,Hd.error=n)}var jd=class extends Nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tx(e)&&e.add(this)):this.destination=Bne}static create(e,t,i){return new Sc(e,t,i)}next(e){this.isStopped?eR(Y4(e),this):this._next(e)}error(e){this.isStopped?eR(X4(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eR(K4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Vne=Function.prototype.bind;function ZD(n,e){return Vne.call(n,e)}var tR=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ax(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ax(i)}else Ax(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ax(t)}}},Sc=class extends jd{constructor(e,t,i){super();let r;if(Yt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&jo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ZD(e.next,s),error:e.error&&ZD(e.error,s),complete:e.complete&&ZD(e.complete,s)}):r=e}this.destination=new tR(r)}};function Ax(n){jo.useDeprecatedSynchronousErrorHandling?Q4(n):Cx(n)}function Une(n){throw n}function eR(n,e){let{onStoppedNotification:t}=jo;t&&ip.setTimeout(()=>t(n,e))}var Bne={closed:!0,next:zd,error:Une,complete:zd};var sp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $s(n){return n}function Gd(...n){return nR(n)}function nR(n){return n.length===0?$s:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var bt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=Hne(t)?t:new Sc(t,i,r);return rp(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=J4(i),new i((r,s)=>{let o=new Sc({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[sp](){return this}pipe(...t){return nR(t)(this)}toPromise(t){return t=J4(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function J4(n){var e;return(e=n??jo.Promise)!==null&&e!==void 0?e:Promise}function zne(n){return n&&Yt(n.next)&&Yt(n.error)&&Yt(n.complete)}function Hne(n){return n&&n instanceof jd||zne(n)&&Tx(n)}function jne(n){return Yt(n?.lift)}function un(n){return e=>{if(jne(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function fn(n,e,t,i,r){return new iR(n,e,t,i,r)}var iR=class extends jd{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Z4=np(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pt=(()=>{class n extends bt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Mx(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Z4}next(t){rp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){rp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){rp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?QD:(this.currentObservers=null,s.push(t),new Nn(()=>{this.currentObservers=null,Bd(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new bt;return t.source=this,t}}return n.create=(e,t)=>new Mx(e,t),n})(),Mx=class extends Pt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:QD}};var Hi=class extends Pt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var rR={now(){return(rR.delegate||Date).now()},delegate:void 0};var Dx=class extends Nn{constructor(e,t){super()}schedule(e,t=0){return this}};var U_={setInterval(n,e,...t){let{delegate:i}=U_;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=U_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var op=class extends Dx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return U_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&U_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Bd(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ap=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};ap.now=rR.now;var cp=class extends ap{constructor(e,t=ap.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var tu=new cp(op),sR=tu;var Rx=class extends op{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var Px=class extends cp{};var oR=new Px(Rx);var Xr=new bt(n=>n.complete());function kx(n){return n&&Yt(n.schedule)}function aR(n){return n[n.length-1]}function Nx(n){return Yt(aR(n))?n.pop():void 0}function Ca(n){return kx(aR(n))?n.pop():void 0}function ez(n,e){return typeof aR(n)=="number"?n.pop():e}function Ox(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function nz(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function tz(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wd(n){return this instanceof Wd?(this.v=n,this):new Wd(n)}function iz(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){i[p]&&(r[p]=function(b){return new Promise(function(g,v){s.push([p,b,g,v])>1||c(p,b)})},_&&(r[p]=_(r[p])))}function c(p,_){try{l(i[p](_))}catch(b){h(s[0][3],b)}}function l(p){p.value instanceof Wd?Promise.resolve(p.value.v).then(u,d):h(s[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,_){p(_),s.shift(),s.length&&c(s[0][0],s[0][1])}}function rz(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tz=="function"?tz(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Lx=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fx(n){return Yt(n?.then)}function Vx(n){return Yt(n[sp])}function Ux(n){return Symbol.asyncIterator&&Yt(n?.[Symbol.asyncIterator])}function Bx(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Gne(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zx=Gne();function Hx(n){return Yt(n?.[zx])}function jx(n){return iz(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Wd(t.read());if(r)return yield Wd(void 0);yield yield Wd(i)}}finally{t.releaseLock()}})}function Gx(n){return Yt(n?.getReader)}function ci(n){if(n instanceof bt)return n;if(n!=null){if(Vx(n))return Wne(n);if(Lx(n))return $ne(n);if(Fx(n))return qne(n);if(Ux(n))return sz(n);if(Hx(n))return Kne(n);if(Gx(n))return Xne(n)}throw Bx(n)}function Wne(n){return new bt(e=>{let t=n[sp]();if(Yt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $ne(n){return new bt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function qne(n){return new bt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cx)})}function Kne(n){return new bt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sz(n){return new bt(e=>{Yne(n,e).catch(t=>e.error(t))})}function Xne(n){return sz(jx(n))}function Yne(n,e){var t,i,r,s;return nz(this,void 0,void 0,function*(){try{for(t=rz(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function ws(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function nu(n,e=0){return un((t,i)=>{t.subscribe(fn(i,r=>ws(i,n,()=>i.next(r),e),()=>ws(i,n,()=>i.complete(),e),r=>ws(i,n,()=>i.error(r),e)))})}function iu(n,e=0){return un((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function oz(n,e){return ci(n).pipe(iu(e),nu(e))}function az(n,e){return ci(n).pipe(iu(e),nu(e))}function cz(n,e){return new bt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function lz(n,e){return new bt(t=>{let i;return ws(t,e,()=>{i=n[zx](),ws(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>Yt(i?.return)&&i.return()})}function Wx(n,e){if(!n)throw new Error("Iterable cannot be null");return new bt(t=>{ws(t,e,()=>{let i=n[Symbol.asyncIterator]();ws(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function uz(n,e){return Wx(jx(n),e)}function dz(n,e){if(n!=null){if(Vx(n))return oz(n,e);if(Lx(n))return cz(n,e);if(Fx(n))return az(n,e);if(Ux(n))return Wx(n,e);if(Hx(n))return lz(n,e);if(Gx(n))return uz(n,e)}throw Bx(n)}function di(n,e){return e?dz(n,e):ci(n)}function Et(...n){let e=Ca(n);return di(n,e)}function B_(n,e){let t=Yt(n)?n:()=>n,i=r=>r.error(t());return new bt(e?r=>e.schedule(i,0,r):i)}function z_(n){return!!n&&(n instanceof bt||Yt(n.lift)&&Yt(n.subscribe))}var $d=np(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function hz(n){return n instanceof Date&&!isNaN(n)}function yt(n,e){return un((t,i)=>{let r=0;t.subscribe(fn(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:Qne}=Array;function Jne(n,e){return Qne(e)?n(...e):n(e)}function $x(n){return yt(e=>Jne(n,e))}var{isArray:Zne}=Array,{getPrototypeOf:eie,prototype:tie,keys:nie}=Object;function qx(n){if(n.length===1){let e=n[0];if(Zne(e))return{args:e,keys:null};if(iie(e)){let t=nie(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function iie(n){return n&&typeof n=="object"&&eie(n)===tie}function Kx(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function cR(...n){let e=Ca(n),t=Nx(n),{args:i,keys:r}=qx(n);if(i.length===0)return di([],e);let s=new bt(rie(i,e,r?o=>Kx(r,o):$s));return t?s.pipe($x(t)):s}function rie(n,e,t=$s){return i=>{fz(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)fz(e,()=>{let l=di(n[c],e),u=!1;l.subscribe(fn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function fz(n,e,t){n?ws(t,n,e):e()}function pz(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},p=b=>l<i?_(b):c.push(b),_=b=>{s&&e.next(b),l++;let g=!1;ci(t(b,u++)).subscribe(fn(e,v=>{r?.(v),s?p(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let v=c.shift();o?ws(e,o,()=>_(v)):_(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(fn(e,p,()=>{d=!0,h()})),()=>{a?.()}}function us(n,e,t=1/0){return Yt(e)?us((i,r)=>yt((s,o)=>e(i,s,r,o))(ci(n(i,r))),t):(typeof e=="number"&&(t=e),un((i,r)=>pz(i,r,n,t)))}function Xx(n=1/0){return us($s,n)}function mz(){return Xx(1)}function lp(...n){return mz()(di(n,Ca(n)))}function H_(n){return new bt(e=>{ci(n()).subscribe(e)})}function j_(...n){let e=Nx(n),{args:t,keys:i}=qx(n),r=new bt(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;ci(t[u]).subscribe(fn(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?Kx(i,a):a),s.complete())}))}});return e?r.pipe($x(e)):r}function gz(n=0,e,t=sR){let i=-1;return e!=null&&(kx(e)?t=e:i=e),new bt(r=>{let s=hz(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function qd(...n){let e=Ca(n),t=ez(n,1/0),i=n;return i.length?i.length===1?ci(i[0]):Xx(t)(di(i,e)):Xr}var Tc=new bt(zd);function ri(n,e){return un((t,i)=>{let r=0;t.subscribe(fn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function _z(n){return un((e,t)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(fn(t,l=>{i=!0,r=l,s||ci(n(l)).subscribe(s=fn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}function Yx(n,e=tu){return _z(()=>gz(n,e))}function Kd(n){return un((e,t)=>{let i=null,r=!1,s;i=e.subscribe(fn(t,void 0,void 0,o=>{s=ci(n(o,Kd(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function up(n,e){return Yt(e)?us(n,e,1):us(n,1)}function G_(n,e=tu){return un((t,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}t.subscribe(fn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function lR(n){return un((e,t)=>{let i=!1;e.subscribe(fn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ji(n){return n<=0?()=>Xr:un((e,t)=>{let i=0;e.subscribe(fn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Xd(n,e=$s){return n=n??sie,un((t,i)=>{let r,s=!0;t.subscribe(fn(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function sie(n,e){return n===e}function yz(n=oie){return un((e,t)=>{let i=!1;e.subscribe(fn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function oie(){return new $d}function Yd(n){return un((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Cc(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ri((r,s)=>n(r,s,i)):$s,ji(1),t?lR(e):yz(()=>new $d))}function Qx(n){return n<=0?()=>Xr:un((e,t)=>{let i=[];e.subscribe(fn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function dR(n={}){let{connector:e=()=>new Pt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),o=c=void 0,u=d=!1},_=()=>{let b=o;p(),b?.unsubscribe()};return un((b,g)=>{l++,!d&&!u&&h();let v=c=c??e();g.add(()=>{l--,l===0&&!d&&!u&&(a=uR(_,r))}),v.subscribe(g),!o&&l>0&&(o=new Sc({next:R=>v.next(R),error:R=>{d=!0,h(),a=uR(p,t,R),v.error(R)},complete:()=>{u=!0,h(),a=uR(p,i),v.complete()}}),ci(b).subscribe(o))})(s)}}function uR(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Sc({next:()=>{i.unsubscribe(),n()}});return ci(e(...t)).subscribe(i)}function hR(n){return ri((e,t)=>n<=t)}function Ac(...n){let e=Ca(n);return un((t,i)=>{(e?lp(n,t,e):lp(n,t)).subscribe(i)})}function hi(n,e){return un((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(fn(i,c=>{r?.unsubscribe();let l=0,u=s++;ci(n(c,u)).subscribe(r=fn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Aa(n){return un((e,t)=>{ci(n).subscribe(fn(t,()=>t.complete(),zd)),!t.closed&&e.subscribe(t)})}function Gi(n,e,t){let i=Yt(n)||e||t?{next:n,error:e,complete:t}:n;return i?un((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(fn(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):$s}var fR;function Jx(){return fR}function Ma(n){let e=fR;return fR=n,e}var vz=Symbol("NotFound");function dp(n){return n===vz||n?.name==="\u0275NotFound"}var ru=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},CR=new ru("21.0.1");var sw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ze=class extends Error{code;constructor(e,t){super(Da(e,t)),this.code=e}};function aie(n){return`NG0${Math.abs(n)}`}function Da(n,e){return`${aie(n)}${e?": "+e:""}`}var cu=globalThis;function Xn(n){for(let e in n)if(n[e]===Xn)return e;throw Error("")}function Iz(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Dc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Dc).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function ow(n,e){return n?e?`${n} ${e}`:n:e||""}var cie=Xn({__forward_ref__:Xn});function qs(n){return n.__forward_ref__=qs,n.toString=function(){return Dc(this())},n}function kr(n){return AR(n)?n():n}function AR(n){return typeof n=="function"&&n.hasOwnProperty(cie)&&n.__forward_ref__===qs}function ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Q_(n){return lie(n,aw)}function MR(n){return Q_(n)!==null}function lie(n,e){return n.hasOwnProperty(e)&&n[e]||null}function uie(n){let e=n?.[aw]??null;return e||null}function mR(n){return n&&n.hasOwnProperty(ew)?n[ew]:null}var aw=Xn({\u0275prov:Xn}),ew=Xn({\u0275inj:Xn}),Ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DR(n){return n&&!!n.\u0275providers}var RR=Xn({\u0275cmp:Xn}),PR=Xn({\u0275dir:Xn}),kR=Xn({\u0275pipe:Xn}),NR=Xn({\u0275mod:Xn}),$_=Xn({\u0275fac:Xn}),th=Xn({__NG_ELEMENT_ID__:Xn}),bz=Xn({__NG_ENV_ID__:Xn});function nh(n){return typeof n=="string"?n:n==null?"":String(n)}function Sz(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():nh(n)}var Tz=Xn({ngErrorCode:Xn}),die=Xn({ngErrorMessage:Xn}),hie=Xn({ngTokenPath:Xn});function OR(n,e){return Cz("",-200,e)}function cw(n,e){throw new ze(-201,!1)}function Cz(n,e,t){let i=new ze(e,n);return i[Tz]=e,i[die]=n,t&&(i[hie]=t),i}function fie(n){return n[Tz]}var gR;function Az(){return gR}function ds(n){let e=gR;return gR=n,e}function LR(n,e,t){let i=Q_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;cw(n,"Injector")}var pie={},Qd=pie,_R="__NG_DI_FLAG__",yR=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Jd(t)||0;try{return this.injector.get(e,i&8?null:Qd,i)}catch(r){if(dp(r))return r;throw r}}};function mie(n,e=0){let t=Jx();if(t===void 0)throw new ze(-203,!1);if(t===null)return LR(n,void 0,e);{let i=gie(e),r=t.retrieve(n,i);if(dp(r)){if(i.optional)return null;throw r}return r}}function st(n,e=0){return(Az()||mie)(kr(n),e)}function H(n,e){return st(n,Jd(e))}function Jd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gie(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function vR(n){let e=[];for(let t=0;t<n.length;t++){let i=kr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ze(900,!1);let r,s=0;for(let o=0;o<i.length;o++){let a=i[o],c=_ie(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(st(r,s))}else e.push(st(i))}return e}function Mz(n,e){return n[_R]=e,n.prototype[_R]=e,n}function _ie(n){return n[_R]}function su(n,e){let t=n.hasOwnProperty($_);return t?n[$_]:null}function Dz(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function Rz(n){return n.flat(Number.POSITIVE_INFINITY)}function lw(n,e){n.forEach(t=>Array.isArray(t)?lw(t,e):e(t))}function FR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function J_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pz(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function kz(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function uw(n,e,t){let i=fp(n,e);return i>=0?n[i|1]=t:(i=~i,kz(n,i,e,t)),i}function dw(n,e){let t=fp(n,e);if(t>=0)return n[t|1]}function fp(n,e){return yie(n,e,1)}function yie(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var lu={},hs=[],uu=new Ce(""),VR=new Ce("",-1),UR=new Ce(""),q_=class{get(e,t=Qd){if(t===Qd){let r=Cz("",-201);throw r.name="\u0275NotFound",r}return t}};function BR(n){return n[NR]||null}function Pc(n){return n[RR]||null}function zR(n){return n[PR]||null}function Nz(n){return n[kR]||null}function br(n){return{\u0275providers:n}}function Oz(n){return br([{provide:uu,multi:!0,useValue:n}])}function Lz(...n){return{\u0275providers:HR(!0,n),\u0275fromNgModule:!0}}function HR(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return lw(e,o=>{let a=o;tw(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Fz(r,s),t}function Fz(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];jR(r,s=>{e(s,i)})}}function tw(n,e,t,i){if(n=kr(n),!n)return!1;let r=null,s=mR(n),o=!s&&Pc(n);if(!s&&!o){let c=n.ngModule;if(s=mR(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)tw(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{lw(s.imports,u=>{tw(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Fz(l,e)}if(!a){let l=su(r)||(()=>new r);e({provide:r,useFactory:l,deps:hs},r),e({provide:UR,useValue:r,multi:!0},r),e({provide:uu,useValue:()=>st(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;jR(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function jR(n,e){for(let t of n)DR(t)&&(t=t.\u0275providers),Array.isArray(t)?jR(t,e):e(t)}var vie=Xn({provide:String,useValue:Xn});function Vz(n){return n!==null&&typeof n=="object"&&vie in n}function bie(n){return!!(n&&n.useExisting)}function xie(n){return!!(n&&n.useFactory)}function Zd(n){return typeof n=="function"}function Uz(n){return!!n.useClass}var Z_=new Ce(""),Zx={},xz={},pR;function pp(){return pR===void 0&&(pR=new q_),pR}var si=class{},eh=class extends si{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,xR(e,o=>this.processProvider(o)),this.records.set(VR,hp(void 0,this)),r.has("environment")&&this.records.set(si,hp(void 0,this));let s=this.records.get(Z_);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(UR,hs,{self:!0}))}retrieve(e,t){let i=Jd(t)||0;try{return this.get(e,Qd,i)}catch(r){if(dp(r))return r;throw r}}destroy(){W_(this),this._destroyed=!0;let e=Nt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Nt(e)}}onDestroy(e){return W_(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){W_(this);let t=Ma(this),i=ds(void 0),r;try{return e()}finally{Ma(t),ds(i)}}get(e,t=Qd,i){if(W_(this),e.hasOwnProperty(bz))return e[bz](this);let r=Jd(i),s,o=Ma(this),a=ds(void 0);try{if(!(r&4)){let l=this.records.get(e);if(l===void 0){let u=Tie(e)&&Q_(e);u&&this.injectableDefInScope(u)?l=hp(bR(e),Zx):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&2?pp():this.parent;return t=r&8&&t===Qd?null:t,c.get(e,t)}catch(c){let l=fie(c);throw l===-200||l===-201?new ze(l,null):c}finally{ds(a),Ma(o)}}resolveInjectorInitializers(){let e=Nt(null),t=Ma(this),i=ds(void 0),r;try{let s=this.get(uu,hs,{self:!0});for(let o of s)o()}finally{Ma(t),ds(i),Nt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Dc(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=kr(e);let t=Zd(e)?e:kr(e&&e.provide),i=Eie(e);if(!Zd(e)&&e.multi===!0){let r=this.records.get(t);r||(r=hp(void 0,Zx,!0),r.factory=()=>vR(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=Nt(null);try{if(t.value===xz)throw OR(Dc(e));return t.value===Zx&&(t.value=xz,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&Sie(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Nt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bR(n){let e=Q_(n),t=e!==null?e.factory:su(n);if(t!==null)return t;if(n instanceof Ce)throw new ze(204,!1);if(n instanceof Function)return wie(n);throw new ze(204,!1)}function wie(n){if(n.length>0)throw new ze(204,!1);let t=uie(n);return t!==null?()=>t.factory(n):()=>new n}function Eie(n){if(Vz(n))return hp(void 0,n.useValue);{let e=GR(n);return hp(e,Zx)}}function GR(n,e,t){let i;if(Zd(n)){let r=kr(n);return su(r)||bR(r)}else if(Vz(n))i=()=>kr(n.useValue);else if(xie(n))i=()=>n.useFactory(...vR(n.deps||[]));else if(bie(n))i=(r,s)=>st(kr(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=kr(n&&(n.useClass||n.provide));if(Iie(n))i=()=>new r(...vR(n.deps));else return su(r)||bR(r)}return i}function W_(n){if(n.destroyed)throw new ze(205,!1)}function hp(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Iie(n){return!!n.deps}function Sie(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Tie(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function xR(n,e){for(let t of n)Array.isArray(t)?xR(t,e):t&&DR(t)?xR(t.\u0275providers,e):e(t)}function Wi(n,e){let t;n instanceof eh?(W_(n),t=n):t=new yR(n);let i,r=Ma(t),s=ds(void 0);try{return e()}finally{Ma(r),ds(s)}}function Bz(){return Az()!==void 0||Jx()!=null}var Go=0,Dt=1,zt=2,hr=3,_o=4,fs=5,ih=6,mp=7,$i=8,kc=9,Ra=10,oi=11,gp=12,WR=13,rh=14,ps=15,du=16,sh=17,Pa=18,ey=19,$R=20,Mc=21,hw=22,ou=23,Ks=24,oh=25,ah=26,bi=27,zz=1,qR=6,hu=7,ty=8,ch=9,ki=10;function ka(n){return Array.isArray(n)&&typeof n[zz]=="object"}function Wo(n){return Array.isArray(n)&&n[zz]===!0}function KR(n){return(n.flags&4)!==0}function fu(n){return n.componentOffset>-1}function _p(n){return(n.flags&1)===1}function Na(n){return!!n.template}function yp(n){return(n[zt]&512)!==0}function lh(n){return(n[zt]&256)===256}var XR="svg",Hz="math";function yo(n){for(;Array.isArray(n);)n=n[Go];return n}function YR(n,e){return yo(e[n])}function $o(n,e){return yo(e[n.index])}function ny(n,e){return n.data[e]}function QR(n,e){return n[e]}function JR(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function vo(n,e){let t=e[n];return ka(t)?t:t[Go]}function jz(n){return(n[zt]&4)===4}function fw(n){return(n[zt]&128)===128}function Gz(n){return Wo(n[hr])}function Xs(n,e){return e==null?null:n[e]}function ZR(n){n[sh]=0}function e1(n){n[zt]&1024||(n[zt]|=1024,fw(n)&&uh(n))}function Wz(n,e){for(;n>0;)e=e[rh],n--;return e}function iy(n){return!!(n[zt]&9216||n[Ks]?.dirty)}function pw(n){n[Ra].changeDetectionScheduler?.notify(8),n[zt]&64&&(n[zt]|=1024),iy(n)&&uh(n)}function uh(n){n[Ra].changeDetectionScheduler?.notify(0);let e=au(n);for(;e!==null&&!(e[zt]&8192||(e[zt]|=8192,!fw(e)));)e=au(e)}function t1(n,e){if(lh(n))throw new ze(911,!1);n[Mc]===null&&(n[Mc]=[]),n[Mc].push(e)}function $z(n,e){if(n[Mc]===null)return;let t=n[Mc].indexOf(e);t!==-1&&n[Mc].splice(t,1)}function au(n){let e=n[hr];return Wo(e)?e[hr]:e}function n1(n){return n[mp]??=[]}function i1(n){return n.cleanup??=[]}function qz(n,e,t,i){let r=n1(e);r.push(t),n.firstCreatePass&&i1(n).push(i,r.length-1)}var tn={lFrame:o5(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wR=!1;function Kz(){return tn.lFrame.elementDepthCount}function Xz(){tn.lFrame.elementDepthCount++}function r1(){tn.lFrame.elementDepthCount--}function mw(){return tn.bindingsEnabled}function s1(){return tn.skipHydrationRootTNode!==null}function o1(n){return tn.skipHydrationRootTNode===n}function a1(){tn.skipHydrationRootTNode=null}function Lt(){return tn.lFrame.lView}function fi(){return tn.lFrame.tView}function Gn(n){return tn.lFrame.contextLView=n,n[$i]}function Wn(n){return tn.lFrame.contextLView=null,n}function fr(){let n=c1();for(;n!==null&&n.type===64;)n=n.parent;return n}function c1(){return tn.lFrame.currentTNode}function Yz(){let n=tn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function vp(n,e){let t=tn.lFrame;t.currentTNode=n,t.isParent=e}function l1(){return tn.lFrame.isParent}function u1(){tn.lFrame.isParent=!1}function Qz(){return tn.lFrame.contextLView}function d1(){return wR}function K_(n){let e=wR;return wR=n,e}function Jz(){let n=tn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Zz(){return tn.lFrame.bindingIndex}function e5(n){return tn.lFrame.bindingIndex=n}function pu(){return tn.lFrame.bindingIndex++}function gw(n){let e=tn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function t5(){return tn.lFrame.inI18n}function n5(n,e){let t=tn.lFrame;t.bindingIndex=t.bindingRootIndex=n,_w(e)}function i5(){return tn.lFrame.currentDirectiveIndex}function _w(n){tn.lFrame.currentDirectiveIndex=n}function r5(n){let e=tn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function h1(){return tn.lFrame.currentQueryIndex}function yw(n){tn.lFrame.currentQueryIndex=n}function Cie(n){let e=n[Dt];return e.type===2?e.declTNode:e.type===1?n[fs]:null}function f1(n,e,t){if(t&4){let r=e,s=n;for(;r=r.parent,r===null&&!(t&1);)if(r=Cie(s),r===null||(s=s[rh],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=tn.lFrame=s5();return i.currentTNode=e,i.lView=n,!0}function vw(n){let e=s5(),t=n[Dt];tn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function s5(){let n=tn.lFrame,e=n===null?null:n.child;return e===null?o5(n):e}function o5(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function a5(){let n=tn.lFrame;return tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var p1=a5;function bw(){let n=a5();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function c5(n){return(tn.lFrame.contextLView=Wz(n,tn.lFrame.contextLView))[$i]}function Oa(){return tn.lFrame.selectedIndex}function mu(n){tn.lFrame.selectedIndex=n}function ry(){let n=tn.lFrame;return ny(n.tView,n.selectedIndex)}function Yr(){tn.lFrame.currentNamespace=XR}function Ys(){Aie()}function Aie(){tn.lFrame.currentNamespace=null}function l5(){return tn.lFrame.currentNamespace}var u5=!0;function xw(){return u5}function sy(n){u5=n}function ER(n,e=null,t=null,i){let r=m1(n,e,t,i);return r.resolveInjectorInitializers(),r}function m1(n,e=null,t=null,i,r=new Set){let s=[t||hs,Lz(n)];return i=i||(typeof n=="object"?void 0:Dc(n)),new eh(s,e||pp(),i||null,r)}var Qt=class n{static THROW_IF_NOT_FOUND=Qd;static NULL=new q_;static create(e,t){if(Array.isArray(e))return ER({name:""},t,e,"");{let i=e.name??"";return ER({name:i},e.parent,e.providers,i)}}static \u0275prov=ve({token:n,providedIn:"any",factory:()=>st(VR)});static __NG_ELEMENT_ID__=-1},Wt=new Ce(""),Is=(()=>{class n{static __NG_ELEMENT_ID__=Mie;static __NG_ENV_ID__=t=>t}return n})(),nw=class extends Is{_lView;constructor(e){super(),this._lView=e}get destroyed(){return lh(this._lView)}onDestroy(e){let t=this._lView;return t1(t,e),()=>$z(t,e)}};function Mie(){return new nw(Lt())}var d5=!1,Nc=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Hi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new bt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),IR=class extends Pt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Bz()&&(this.destroyRef=H(Is,{optional:!0})??void 0,this.pendingTasks=H(Nc,{optional:!0})??void 0)}emit(e){let t=Nt(null);try{super.next(e)}finally{Nt(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Nn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},vn=IR;function iw(...n){}function g1(n){let e,t;function i(){n=iw;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function _1(n){return queueMicrotask(()=>n()),()=>{n=iw}}var y1="isAngularZone",X_=y1+"_ID",Die=0,Ct=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vn(!1);onMicrotaskEmpty=new vn(!1);onStable=new vn(!1);onError=new vn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=d5}=e;if(typeof Zone>"u")throw new ze(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,kie(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(y1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ze(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ze(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Rie,iw,iw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Rie={};function v1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Pie(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){g1(()=>{n.callbackScheduled=!1,SR(n),n.isCheckStableRunning=!0,v1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),SR(n)}function kie(n){let e=()=>{Pie(n)},t=Die++;n._inner=n._inner.fork({name:"angular",properties:{[y1]:!0,[X_]:t,[X_+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(Nie(c))return i.invokeTask(s,o,a,c);try{return wz(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Ez(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return wz(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Oie(c)&&e(),Ez(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,SR(n),v1(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function SR(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wz(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ez(n){n._nesting--,v1(n)}var Y_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vn;onMicrotaskEmpty=new vn;onStable=new vn;onError=new vn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Nie(n){return h5(n,"__ignore_ng_zone__")}function Oie(n){return h5(n,"__scheduler_tick__")}function h5(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Es=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ss=new Ce("",{factory:()=>{let n=H(Ct),e=H(si),t;return i=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw i}):(t??=e.get(Es),t.handleError(i))})}}}),f5={provide:uu,useValue:()=>{let n=H(Es,{optional:!0})},multi:!0},Lie=new Ce("",{factory:()=>{let n=H(Wt).defaultView;if(!n)return;let e=H(Ss),t=s=>{e(s.reason),s.preventDefault()},i=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),H(Is).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function b1(){return br([Oz(()=>void H(Lie))])}function $n(n,e){let[t,i,r]=qD(n,e?.equal),s=t,o=s[ls];return s.set=i,s.update=r,s.asReadonly=p5.bind(s),s}function p5(){let n=this[ls];if(n.readonlyFn===void 0){let e=()=>this();e[ls]=n,n.readonlyFn=e}return n.readonlyFn}var oy=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=Fie}return n})();function Fie(){return new oy(Lt(),fr())}var Rc=class{},ay=new Ce("",{factory:()=>!0});var x1=new Ce(""),gu=(()=>{class n{internalPendingTasks=H(Nc);scheduler=H(Rc);errorHandler=H(Ss);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),ww=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new TR})}return n})(),TR=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}},rw=class{[ls];constructor(e){this[ls]=e}destroy(){this[ls].destroy()}};function cy(n,e){let t=e?.injector??H(Qt),i=e?.manualCleanup!==!0?t.get(Is):null,r,s=t.get(oy,null,{optional:!0}),o=t.get(Rc);return s!==null?(r=Bie(s.view,o,n),i instanceof nw&&i._lView===s.view&&(i=null)):r=zie(n,t.get(ww),o),r.injector=t,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new rw(r)}var m5=lt(ie({},XD),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=K_(!1);try{YD(this)}finally{K_(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=Nt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Nt(n)}}}),Vie=lt(ie({},m5),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Ud(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),Uie=lt(ie({},m5),{consumerMarkedDirty(){this.view[zt]|=8192,uh(this.view),this.notifier.notify(13)},destroy(){if(Ud(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[ou]?.delete(this)}});function Bie(n,e,t){let i=Object.create(Uie);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=g5(i,t),n[ou]??=new Set,n[ou].add(i),i.consumerMarkedDirty(i),i}function zie(n,e,t){let i=Object.create(Vie);return i.fn=g5(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function g5(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ti(n){return KD(n)}function Cp(n){return{toString:n}.toString()}var Ew="__parameters__";function qie(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function Kie(n,e,t){return Cp(()=>{let i=qie(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Ew)?c[Ew]:Object.defineProperty(c,Ew,{value:[]})[Ew];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Ts=Mz(Kie("Optional"),8);function Xie(n){return typeof n=="function"}function q5(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var kw=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}},pr=(()=>{let n=()=>K5;return n.ngInherit=!0,n})();function K5(n){return n.type.prototype.ngOnChanges&&(n.setInput=Qie),Yie}function Yie(){let n=Y5(this),e=n?.current;if(e){let t=n.previous;if(t===lu)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Qie(n,e,t,i,r){let s=this.declaredInputs[i],o=Y5(n)||Jie(n,{previous:lu,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new kw(l&&l.currentValue,t,c===lu),q5(n,e,r,t)}var X5="__ngSimpleChanges__";function Y5(n){return n[X5]||null}function Jie(n,e){return n[X5]=e}var _5=[];var Yn=function(n,e=null,t){for(let i=0;i<_5.length;i++){let r=_5[i];r(n,e,t)}},On=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(On||{});function Zie(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=K5(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Q5(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Aw(n,e,t){J5(n,e,3,t)}function Mw(n,e,t,i){(n[zt]&3)===t&&J5(n,e,t,i)}function w1(n,e){let t=n[zt];(t&3)===e&&(t&=16383,t+=1,n[zt]=t)}function J5(n,e,t,i){let r=i!==void 0?n[sh]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[sh]+=65536),(a<s||s==-1)&&(ere(n,t,e,c),n[sh]=(n[sh]&4294901760)+c+2),c++}function y5(n,e){Yn(On.LifecycleHookStart,n,e);let t=Nt(null);try{e.call(n)}finally{Nt(t),Yn(On.LifecycleHookEnd,n,e)}}function ere(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[zt]>>14<n[sh]>>16&&(n[zt]&3)===e&&(n[zt]+=16384,y5(a,s)):y5(a,s)}var xp=-1,hh=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function tre(n){return(n.flags&8)!==0}function nre(n){return(n.flags&16)!==0}function ire(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];rre(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Z5(n){return n===3||n===4||n===6}function rre(n){return n.charCodeAt(0)===64}function wp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?v5(n,t,r,null,e[++i]):v5(n,t,r,null,null))}}return n}function v5(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}function eH(n){return n!==xp}function Nw(n){return n&32767}function sre(n){return n>>16}function Ow(n,e){let t=sre(n),i=e;for(;t>0;)i=i[rh],t--;return i}var P1=!0;function Lw(n){let e=P1;return P1=n,e}var ore=256,tH=ore-1,nH=5,are=0,La={};function cre(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(th)&&(i=t[th]),i==null&&(i=t[th]=are++);let r=i&tH,s=1<<r;e.data[n+(r>>nH)]|=s}function Fw(n,e){let t=iH(n,e);if(t!==-1)return t;let i=e[Dt];i.firstCreatePass&&(n.injectorIndex=e.length,E1(i.data,n),E1(e,null),E1(i.blueprint,null));let r=fP(n,e),s=n.injectorIndex;if(eH(r)){let o=Nw(r),a=Ow(r,e),c=a[Dt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function E1(n,e){n.push(0,0,0,0,0,0,0,0,e)}function iH(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function fP(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=cH(r),i===null)return xp;if(t++,r=r[rh],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return xp}function k1(n,e,t){cre(n,e,t)}function lre(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(Z5(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function rH(n,e,t){if(t&8||n!==void 0)return n;cw(e,"NodeInjector")}function sH(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[kc],s=ds(void 0);try{return r?r.get(e,i,t&8):LR(e,i,t&8)}finally{ds(s)}}return rH(i,e,t)}function oH(n,e,t,i=0,r){if(n!==null){if(e[zt]&2048&&!(i&2)){let o=fre(n,e,t,i,La);if(o!==La)return o}let s=aH(n,e,t,i,La);if(s!==La)return s}return sH(e,t,i,r)}function aH(n,e,t,i,r){let s=dre(t);if(typeof s=="function"){if(!f1(e,n,i))return i&1?rH(r,t,i):sH(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&8))cw(t);else return o}finally{p1()}}else if(typeof s=="number"){let o=null,a=iH(n,e),c=xp,l=i&1?e[ps][fs]:null;for((a===-1||i&4)&&(c=a===-1?fP(n,e):e[a+8],c===xp||!x5(i,!1)?a=-1:(o=e[Dt],a=Nw(c),e=Ow(c,e)));a!==-1;){let u=e[Dt];if(b5(s,a,u.data)){let d=ure(a,e,t,o,i,l);if(d!==La)return d}c=e[a+8],c!==xp&&x5(i,e[Dt].data[a+8]===l)&&b5(s,a,e)?(o=u,a=Nw(c),e=Ow(c,e)):a=-1}}return r}function ure(n,e,t,i,r,s){let o=e[Dt],a=o.data[n+8],c=i==null?fu(a)&&P1:i!=o&&(a.type&3)!==0,l=r&1&&s===a,u=Dw(a,o,t,c,l);return u!==null?dy(e,o,u,a,r):La}function Dw(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let p=d;p<h;p++){let _=o[p];if(p<c&&t===_||p>=c&&_.type===t)return p}if(r){let p=o[c];if(p&&Na(p)&&p.type===t)return c}return null}function dy(n,e,t,i,r){let s=n[t],o=e.data;if(s instanceof hh){let a=s;if(a.resolving){let p=Sz(o[t]);throw OR(p)}let c=Lw(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],u,d=a.injectImpl?ds(a.injectImpl):null,h=f1(n,i,0);try{s=n[t]=a.factory(void 0,r,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Zie(t,o[t],e)}finally{d!==null&&ds(d),Lw(c),a.resolving=!1,p1()}}return s}function dre(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(th)?n[th]:void 0;return typeof e=="number"?e>=0?e&tH:hre:e}function b5(n,e,t){let i=1<<n;return!!(t[e+(n>>nH)]&i)}function x5(n,e){return!(n&2)&&!(n&1&&e)}var dh=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return oH(this._tNode,this._lView,e,Jd(i),t)}};function hre(){return new dh(fr(),Lt())}function wr(n){return Cp(()=>{let e=n.prototype.constructor,t=e[$_]||N1(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[$_]||N1(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function N1(n){return AR(n)?()=>{let e=N1(kr(n));return e&&e()}:su(n)}function fre(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[zt]&2048&&!yp(o);){let a=aH(s,o,t,i|2,La);if(a!==La)return a;let c=s.parent;if(!c){let l=o[$R];if(l){let u=l.get(t,La,i);if(u!==La)return u}c=cH(o),o=o[rh]}s=c}return r}function cH(n){let e=n[Dt],t=e.type;return t===2?e.declTNode:t===1?n[fs]:null}function gy(n){return lre(fr(),n)}function pre(){return Ap(fr(),Lt())}function Ap(n,e){return new nn($o(n,e))}var nn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=pre}return n})();function mre(n){return n instanceof nn?n.nativeElement:n}function gre(){return this._results[Symbol.iterator]()}var Oc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Pt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Rz(e);(this._changesDetected=!Dz(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=gre};function lH(n){return(n.flags&128)===128}var pP=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(pP||{}),uH=new Map,_re=0;function yre(){return _re++}function vre(n){uH.set(n[ey],n)}function O1(n){uH.delete(n[ey])}var w5="__ngContext__";function Ep(n,e){ka(e)?(n[w5]=e[ey],vre(e)):n[w5]=e}function dH(n){return fH(n[gp])}function hH(n){return fH(n[_o])}function fH(n){for(;n!==null&&!Wo(n);)n=n[_o];return n}var bre;function mP(n){bre=n}var Mp=new Ce("",{factory:()=>xre}),xre="ng";var Qw=new Ce(""),Vc=new Ce("",{providedIn:"platform",factory:()=>"unknown"}),_y=new Ce(""),Dp=new Ce("",{factory:()=>H(Wt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pH="r";var mH="di";var gH=!1,_H=new Ce("",{factory:()=>gH});var wre=(n,e,t,i)=>{};function Ere(n,e,t,i){wre(n,e,t,i)}function Jw(n){return(n.flags&32)===32}var Ire=()=>null;function yH(n,e,t=!1){return Ire(n,e,t)}function vH(n,e){let t=n.contentQueries;if(t!==null){let i=Nt(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];yw(s),a.contentQueries(2,e[o],o)}}}finally{Nt(i)}}}function L1(n,e,t){yw(0);let i=Nt(null);try{e(n,t)}finally{Nt(i)}}function gP(n,e,t){if(KR(e)){let i=Nt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Nt(i)}}}var Xo=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Xo||{}),Iw;function Sre(){if(Iw===void 0&&(Iw=null,cu.trustedTypes))try{Iw=cu.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Iw}function Zw(n){return Sre()?.createHTML(n)||n}var Sw;function Tre(){if(Sw===void 0&&(Sw=null,cu.trustedTypes))try{Sw=cu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sw}function E5(n){return Tre()?.createScriptURL(n)||n}var Lc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sw})`}},F1=class extends Lc{getTypeName(){return"HTML"}},V1=class extends Lc{getTypeName(){return"Style"}},U1=class extends Lc{getTypeName(){return"Script"}},B1=class extends Lc{getTypeName(){return"URL"}},z1=class extends Lc{getTypeName(){return"ResourceURL"}};function Yo(n){return n instanceof Lc?n.changingThisBreaksApplicationSecurity:n}function Uc(n,e){let t=bH(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sw})`)}return t===e}function bH(n){return n instanceof Lc&&n.getTypeName()||null}function _P(n){return new F1(n)}function yP(n){return new V1(n)}function vP(n){return new U1(n)}function bP(n){return new B1(n)}function xP(n){return new z1(n)}function Cre(n){let e=new j1(n);return Are()?new H1(e):e}var H1=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Zw(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},j1=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Zw(e),t}};function Are(){try{return!!new window.DOMParser().parseFromString(Zw(""),"text/html")}catch{return!1}}var Mre=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yy(n){return n=String(n),n.match(Mre)?n:"unsafe:"+n}function Bc(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function vy(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var xH=Bc("area,br,col,hr,img,wbr"),wH=Bc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),EH=Bc("rp,rt"),Dre=vy(EH,wH),Rre=vy(wH,Bc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pre=vy(EH,Bc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),I5=vy(xH,Rre,Pre,Dre),IH=Bc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kre=Bc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nre=Bc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Ore=vy(IH,kre,Nre),Lre=Bc("script,style,template"),G1=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=Ure(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Vre(t);if(s){t=s;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=S5(e).toLowerCase();if(!I5.hasOwnProperty(t))return this.sanitizedSomething=!0,!Lre.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!Ore.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;IH[a]&&(c=yy(c)),this.buf.push(" ",o,'="',T5(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=S5(e).toLowerCase();I5.hasOwnProperty(t)&&!xH.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(T5(e))}};function Fre(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Vre(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw SH(e);return e}function Ure(n){let e=n.firstChild;if(e&&Fre(n,e))throw SH(e);return e}function S5(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function SH(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Bre=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zre=/([^\#-~ |!])/g;function T5(n){return n.replace(/&/g,"&amp;").replace(Bre,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(zre,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Tw;function wP(n,e){let t=null;try{Tw=Tw||Cre(n);let i=e?String(e):"";t=Tw.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Tw.getInertBodyElement(i)}while(i!==s);let a=new G1().sanitizeChildren(C5(t)||t);return Zw(a)}finally{if(t){let i=C5(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function C5(n){return"content"in n&&Hre(n)?n.content:null}function Hre(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Nr=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Nr||{});function TH(n){let e=AH();return e?e.sanitize(Nr.URL,n)||"":Uc(n,"URL")?Yo(n):yy(nh(n))}function CH(n){let e=AH();if(e)return E5(e.sanitize(Nr.RESOURCE_URL,n)||"");if(Uc(n,"ResourceURL"))return E5(Yo(n));throw new ze(904,!1)}function jre(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?CH:TH}function EP(n,e,t){return jre(e,t)(n)}function AH(){let n=Lt();return n&&n[Ra].sanitizer}var Gre=/^>|^->|<!--|-->|--!>|<!-$/g,Wre=/(<|>)/g,$re="\u200B$1\u200B";function qre(n){return n.replace(Gre,e=>e.replace(Wre,$re))}function MH(n){return n instanceof Function?n():n}function Kre(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var DH="ng-template";function Xre(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&Kre(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(IP(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function IP(n){return n.type===4&&n.value!==DH}function Yre(n,e,t){let i=n.type===4&&!t?DH:n.value;return e===i}function Qre(n,e,t){let i=4,r=n.attrs,s=r!==null?ese(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!qo(i)&&!qo(c))return!1;if(o&&qo(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!Yre(n,c,t)||c===""&&e.length===1){if(qo(i))return!1;o=!0}}else if(i&8){if(r===null||!Xre(n,r,c,t)){if(qo(i))return!1;o=!0}}else{let l=e[++a],u=Jre(c,r,IP(n),t);if(u===-1){if(qo(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(qo(i))return!1;o=!0}}}}return qo(i)||o}function qo(n){return(n&1)===0}function Jre(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return tse(e,n)}function RH(n,e,t=!1){for(let i=0;i<e.length;i++)if(Qre(n,e[i],t))return!0;return!1}function Zre(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function ese(n){for(let e=0;e<n.length;e++){let t=n[e];if(Z5(t))return e}return n.length}function tse(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function nse(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function A5(n,e){return n?":not("+e.trim()+")":e}function ise(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!qo(o)&&(e+=A5(s,r),r=""),i=o,s=s||!qo(i);t++}return r!==""&&(e+=A5(s,r)),e}function rse(n){return n.map(ise).join(",")}function sse(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!qo(r))break;r=s}i++}return t.length&&e.push(1,...t),e}var Cs={};function ose(n,e){return n.createText(e)}function ase(n,e,t){n.setValue(e,t)}function cse(n,e){return n.createComment(qre(e))}function PH(n,e,t){return n.createElement(e,t)}function Vw(n,e,t,i,r){n.insertBefore(e,t,i,r)}function kH(n,e,t){n.appendChild(e,t)}function M5(n,e,t,i,r){i!==null?Vw(n,e,t,i,r):kH(n,e,t)}function NH(n,e,t,i){n.removeChild(null,e,t,i)}function lse(n,e,t){n.setAttribute(e,"style",t)}function use(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OH(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&ire(n,e,i),r!==null&&use(n,e,r),s!==null&&lse(n,e,s)}function SP(n,e,t,i,r,s,o,a,c,l,u){let d=bi+i,h=d+r,p=dse(d,h),_=typeof l=="function"?l():l;return p[Dt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:u}}function dse(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Cs);return t}function hse(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=SP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function TP(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Go]=r,d[zt]=i|4|128|8|64|1024,(l!==null||n&&n[zt]&2048)&&(d[zt]|=2048),ZR(d),d[hr]=d[rh]=n,d[$i]=t,d[Ra]=o||n&&n[Ra],d[oi]=a||n&&n[oi],d[kc]=c||n&&n[kc]||null,d[fs]=s,d[ey]=yre(),d[ih]=u,d[$R]=l,d[ps]=e.type==2?n[ps]:d,d}function fse(n,e,t){let i=$o(e,n),r=hse(t),s=n[Ra].rendererFactory,o=CP(n,TP(n,r,null,LH(t),i,e,null,s.createRenderer(i,t),null,null,null));return n[e.index]=o}function LH(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function FH(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function CP(n,e){return n[gp]?n[WR][_o]=e:n[gp]=e,n[WR]=e,e}function ot(n=1){VH(fi(),Lt(),Oa()+n,!1)}function VH(n,e,t,i){if(!i)if((e[zt]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Aw(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Mw(e,s,0,t)}mu(t)}var eE=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(eE||{});function W1(n,e,t,i){let r=Nt(null);try{let[s,o,a]=n.inputs[t],c=null;(o&eE.SignalBased)!==0&&(c=e[s][ls]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,s):q5(e,c,s,i)}finally{Nt(r)}}var Fa=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Fa||{}),pse;function AP(n,e){return pse(n,e)}var fh=new Set,tE=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(tE||{}),zc=new Ce(""),D5=new Set;function yu(n){D5.has(n)||(D5.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var MP=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),UH=[0,1,2,3],BH=(()=>{class n{ngZone=H(Ct);scheduler=H(Rc);errorHandler=H(Es,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H(zc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Yn(On.AfterRenderHooksStart),this.executing=!0;for(let i of UH)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Yn(On.AfterRenderHooksEnd)}register(t){let{view:i}=t;i!==void 0?((i[oh]??=[]).push(t),uh(i),i[zt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(tE.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Uw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,s,o=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[oh];e&&(this.view[oh]=e.filter(t=>t!==this))}};function Va(n,e){let t=e?.injector??H(Qt);return yu("NgAfterNextRender"),gse(n,t,e,!0)}function mse(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function gse(n,e,t,i){let r=e.get(MP);r.impl??=e.get(BH);let s=e.get(zc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Is):null,a=e.get(oy,null,{optional:!0}),c=new Uw(r.impl,mse(n),a?.view,i,o,s?.snapshot(null));return r.impl.register(c),c}var zH=new Ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function HH(n,e,t){let i=n.get(zH);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function _se(n,e){let t=n.get(zH);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function yse(n,e){for(let[t,i]of e)HH(n,i.animateFns)}function R5(n,e,t,i){let r=n?.[ah]?.enter;e!==null&&r&&r.has(t.index)&&yse(i,r)}function bp(n,e,t,i,r,s,o,a){if(r!=null){let c,l=!1;Wo(r)?c=r:ka(r)&&(l=!0,r=r[Go]);let u=yo(r);n===0&&i!==null?(R5(a,i,s,t),o==null?kH(e,i,u):Vw(e,i,u,o||null,!0)):n===1&&i!==null?(R5(a,i,s,t),Vw(e,i,u,o||null,!0)):n===2?P5(a,s,t,d=>{NH(e,u,l,d)}):n===3&&P5(a,s,t,()=>{e.destroyNode(u)}),c!=null&&Mse(e,n,t,c,s,i,o)}}function vse(n,e){jH(n,e),e[Go]=null,e[fs]=null}function bse(n,e,t,i,r,s){i[Go]=r,i[fs]=e,iE(n,i,t,1,r,s)}function jH(n,e){e[Ra].changeDetectionScheduler?.notify(9),iE(n,e,e[oi],2,null,null)}function xse(n){let e=n[gp];if(!e)return I1(n[Dt],n);for(;e;){let t=null;if(ka(e))t=e[gp];else{let i=e[ki];i&&(t=i)}if(!t){for(;e&&!e[_o]&&e!==n;)ka(e)&&I1(e[Dt],e),e=e[hr];e===null&&(e=n),ka(e)&&I1(e[Dt],e),t=e&&e[_o]}e=t}}function DP(n,e){let t=n[ch],i=t.indexOf(e);t.splice(i,1)}function nE(n,e){if(lh(e))return;let t=e[oi];t.destroyNode&&iE(n,e,t,3,null,null),xse(e)}function I1(n,e){if(lh(e))return;let t=Nt(null);try{e[zt]&=-129,e[zt]|=256,e[Ks]&&Ud(e[Ks]),Ise(n,e),Ese(n,e),e[Dt].type===1&&e[oi].destroy();let i=e[du];if(i!==null&&Wo(e[hr])){i!==e[hr]&&DP(i,e);let r=e[Pa];r!==null&&r.detachView(n)}O1(e)}finally{Nt(t)}}function P5(n,e,t,i){let r=n?.[ah];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&fh.add(n),HH(t,()=>{if(r.leave&&r.leave.has(e.index)){let o=r.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:u}=l();a.push(u)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),wse(n,i)}else n&&fh.delete(n),i(!1)},r)}function wse(n,e){let t=n[ah]?.running;if(t){t.then(()=>{n[ah].running=void 0,fh.delete(n),e(!0)});return}e(!1)}function Ese(n,e){let t=n.cleanup,i=e[mp];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[mp]=null);let r=e[Mc];if(r!==null){e[Mc]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[ou];if(s!==null){e[ou]=null;for(let o of s)o.destroy()}}function Ise(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof hh)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Yn(On.LifecycleHookStart,a,c);try{c.call(a)}finally{Yn(On.LifecycleHookEnd,a,c)}}else{Yn(On.LifecycleHookStart,r,s);try{s.call(r)}finally{Yn(On.LifecycleHookEnd,r,s)}}}}}function GH(n,e,t){return Sse(n,e.parent,t)}function Sse(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Go];if(fu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Xo.None||r===Xo.Emulated)return null}return $o(i,t)}function WH(n,e,t){return Cse(n,e,t)}function Tse(n,e,t){return n.type&40?$o(n,t):null}var Cse=Tse,k5;function RP(n,e,t,i){let r=GH(n,i,e),s=e[oi],o=i.parent||e[fs],a=WH(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)M5(s,r,t[c],a,!1);else M5(s,r,t,a,!1);k5!==void 0&&k5(s,i,e,t,r)}function ly(n,e){if(e!==null){let t=e.type;if(t&3)return $o(e,n);if(t&4)return $1(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return ly(n,i);{let r=n[e.index];return Wo(r)?$1(-1,r):yo(r)}}else{if(t&128)return ly(n,e.next);if(t&32)return AP(e,n)()||yo(n[e.index]);{let i=$H(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=au(n[ps]);return ly(r,i)}else return ly(n,e.next)}}}return null}function $H(n,e){if(e!==null){let i=n[ps][fs],r=e.projection;return i.projection[r]}return null}function $1(n,e){let t=ki+n+1;if(t<e.length){let i=e[t],r=i[Dt].firstChild;if(r!==null)return ly(i,r)}return e[hu]}function PP(n,e,t,i,r,s,o){for(;t!=null;){let a=i[kc];if(t.type===128){t=t.next;continue}let c=i[t.index],l=t.type;if(o&&e===0&&(c&&Ep(yo(c),i),t.flags|=2),!Jw(t))if(l&8)PP(n,e,t.child,i,r,s,!1),bp(e,n,a,r,c,t,s,i);else if(l&32){let u=AP(t,i),d;for(;d=u();)bp(e,n,a,r,d,t,s,i);bp(e,n,a,r,c,t,s,i)}else l&16?qH(n,e,i,t,r,s):bp(e,n,a,r,c,t,s,i);t=o?t.projectionNext:t.next}}function iE(n,e,t,i,r,s){PP(t,i,n.firstChild,e,r,s,!1)}function Ase(n,e,t){let i=e[oi],r=GH(n,t,e),s=t.parent||e[fs],o=WH(s,t,e);qH(i,0,e,t,r,o)}function qH(n,e,t,i,r,s){let o=t[ps],c=o[fs].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];bp(e,n,t[kc],r,u,i,s,t)}else{let l=c,u=o[hr];lH(i)&&(l.flags|=128),PP(n,e,l,u,r,s,!0)}}function Mse(n,e,t,i,r,s,o){let a=i[hu],c=yo(i);a!==c&&bp(e,n,t,s,a,r,o);for(let l=ki;l<i.length;l++){let u=i[l];iE(u[Dt],u,n,e,s,a)}}function Dse(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Fa.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Fa.Important),n.setStyle(t,i,r,s))}}function KH(n,e,t,i,r){let s=Oa(),o=i&2;try{mu(-1),o&&e.length>bi&&VH(n,e,bi,!1);let a=o?On.TemplateUpdateStart:On.TemplateCreateStart;Yn(a,r,t),t(i,r)}finally{mu(s);let a=o?On.TemplateUpdateEnd:On.TemplateCreateEnd;Yn(a,r,t)}}function rE(n,e,t){Lse(n,e,t),(t.flags&64)===64&&Fse(n,e,t)}function by(n,e,t=$o){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function Rse(n,e,t,i){let s=i.get(_H,gH)||t===Xo.ShadowDom||t===Xo.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return Pse(o),o}function Pse(n){kse(n)}var kse=()=>null;function Nse(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function XH(n,e,t,i,r,s){let o=e[Dt];if(LP(n,o,e,t,i)){fu(n)&&Ose(e,n.index);return}n.type&3&&(t=Nse(t)),YH(n,e,t,i,r,s)}function YH(n,e,t,i,r,s){if(n.type&3){let o=$o(n,e);i=s!=null?s(i,n.value||"",t):i,r.setProperty(o,t,i)}else n.type&12}function Ose(n,e){let t=vo(e,n);t[zt]&16||(t[zt]|=64)}function Lse(n,e,t){let i=t.directiveStart,r=t.directiveEnd;fu(t)&&fse(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fw(t,e);let s=t.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],c=dy(e,n,o,t);if(Ep(c,e),s!==null&&zse(e,o-i,c,a,t,s),Na(a)){let l=vo(t.index,e);l[$i]=dy(e,n,o,t)}}}function Fse(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=i5();try{mu(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];_w(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Vse(c,l)}}finally{mu(-1),_w(o)}}function Vse(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kP(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];RH(e,s.selectors,!1)&&(i??=[],Na(s)?i.unshift(s):i.push(s))}return i}function Use(n,e,t,i,r,s){let o=$o(n,e);Bse(e[oi],o,s,n.value,t,i,r)}function Bse(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?nh(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function zse(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];W1(i,t,c,l)}}function NP(n,e,t,i,r){let s=bi+t,o=e[Dt],a=r(o,e,n,i,t);e[s]=a,vp(n,!0);let c=n.type===2;return c?(OH(e[oi],a,n),(Kz()===0||_p(n))&&Ep(a,e),Xz()):Ep(a,e),xw()&&(!c||!Jw(n))&&RP(o,e,a,n),n}function OP(n){let e=n;return l1()?u1():(e=e.parent,vp(e,!1)),e}function Hse(n,e){let t=n[kc];if(!t)return;let i;try{i=t.get(Ss,null)}catch{i=null}i?.(e)}function LP(n,e,t,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],d=e.data[l];W1(d,t[l],u,r),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];W1(u,l,i,r),a=!0}return a}function jse(n,e){let t=vo(e,n),i=t[Dt];Gse(i,t);let r=t[Go];r!==null&&t[ih]===null&&(t[ih]=yH(r,t[kc])),Yn(On.ComponentStart);try{FP(i,t,t[$i])}finally{Yn(On.ComponentEnd,t[$i])}}function Gse(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function FP(n,e,t){vw(e);try{let i=n.viewQuery;i!==null&&L1(1,i,t);let r=n.template;r!==null&&KH(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Pa]?.finishViewCreation(n),n.staticContentQueries&&vH(n,e),n.staticViewQueries&&L1(2,n.viewQuery,t);let s=n.components;s!==null&&Wse(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[zt]&=-5,bw()}}function Wse(n,e){for(let t=0;t<e.length;t++)jse(n,e[t])}function xy(n,e,t,i){let r=Nt(null);try{let s=e.tView,a=n[zt]&4096?4096:16,c=TP(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[du]=l;let u=n[Pa];return u!==null&&(c[Pa]=u.createEmbeddedView(s)),FP(s,c,t),c}finally{Nt(r)}}function Ip(n,e){return!e||e.firstChild===null||lH(n)}function hy(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(yo(s)),Wo(s)&&QH(s,i);let o=t.type;if(o&8)hy(n,e,t.child,i);else if(o&32){let a=AP(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=$H(e,t);if(Array.isArray(a))i.push(...a);else{let c=au(e[ps]);hy(c[Dt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function QH(n,e){for(let t=ki;t<n.length;t++){let i=n[t],r=i[Dt].firstChild;r!==null&&hy(i[Dt],i,r,e)}n[hu]!==n[Go]&&e.push(n[hu])}function JH(n){if(n[oh]!==null){for(let e of n[oh])e.impl.addSequence(e);n[oh].length=0}}var ZH=[];function $se(n){return n[Ks]??qse(n)}function qse(n){let e=ZH.pop()??Object.create(Xse);return e.lView=n,e}function Kse(n){n.lView[Ks]!==n&&(n.lView=null,ZH.push(n))}var Xse=lt(ie({},Zf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{uh(n.lView)},consumerOnSignalRead(){this.lView[Ks]=this}});function Yse(n){let e=n[Ks]??Object.create(Qse);return e.lView=n,e}var Qse=lt(ie({},Zf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=au(n.lView);for(;e&&!ej(e[Dt]);)e=au(e);e&&e1(e)},consumerOnSignalRead(){this.lView[Ks]=this}});function ej(n){return n.type!==2}function tj(n){if(n[ou]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[ou])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[zt]&8192)}}var Jse=100;function nj(n,e=0){let i=n[Ra].rendererFactory,r=!1;r||i.begin?.();try{Zse(n,e)}finally{r||i.end?.()}}function Zse(n,e){let t=d1();try{K_(!0),q1(n,e);let i=0;for(;iy(n);){if(i===Jse)throw new ze(103,!1);i++,q1(n,1)}}finally{K_(t)}}function eoe(n,e,t,i){if(lh(e))return;let r=e[zt],s=!1,o=!1;vw(e);let a=!0,c=null,l=null;s||(ej(n)?(l=$se(e),c=ep(l)):wx()===null?(a=!1,l=Yse(e),c=ep(l)):e[Ks]&&(Ud(e[Ks]),e[Ks]=null));try{ZR(e),e5(n.bindingStartIndex),t!==null&&KH(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&Aw(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Mw(e,p,0,null),w1(e,0)}if(o||toe(e),tj(e),ij(e,0),n.contentQueries!==null&&vH(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&Aw(e,p)}else{let p=n.contentHooks;p!==null&&Mw(e,p,1),w1(e,1)}ioe(n,e);let d=n.components;d!==null&&sj(e,d,0);let h=n.viewQuery;if(h!==null&&L1(2,h,i),!s)if(u){let p=n.viewCheckHooks;p!==null&&Aw(e,p)}else{let p=n.viewHooks;p!==null&&Mw(e,p,2),w1(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[hw]){for(let p of e[hw])p();e[hw]=null}s||(JH(e),e[zt]&=-73)}catch(u){throw s||uh(e),u}finally{l!==null&&(L_(l,c),a&&Kse(l)),bw()}}function ij(n,e){for(let t=dH(n);t!==null;t=hH(t))for(let i=ki;i<t.length;i++){let r=t[i];rj(r,e)}}function toe(n){for(let e=dH(n);e!==null;e=hH(e)){if(!(e[zt]&2))continue;let t=e[ch];for(let i=0;i<t.length;i++){let r=t[i];e1(r)}}}function noe(n,e,t){Yn(On.ComponentStart);let i=vo(e,n);try{rj(i,t)}finally{Yn(On.ComponentEnd,i[$i])}}function rj(n,e){fw(n)&&q1(n,e)}function q1(n,e){let i=n[Dt],r=n[zt],s=n[Ks],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&F_(s)),o||=!1,s&&(s.dirty=!1),n[zt]&=-9217,o)eoe(i,n,i.template,n[$i]);else if(r&8192){let a=Nt(null);try{tj(n),ij(n,1);let c=i.components;c!==null&&sj(n,c,1),JH(n)}finally{Nt(a)}}}function sj(n,e,t){for(let i=0;i<e.length;i++)noe(n,e[i],t)}function ioe(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)mu(~r);else{let s=r,o=t[++i],a=t[++i];n5(o,s);let c=e[s];Yn(On.HostBindingsUpdateStart,c);try{a(2,c)}finally{Yn(On.HostBindingsUpdateEnd,c)}}}}finally{mu(-1)}}function VP(n,e){let t=d1()?64:1088;for(n[Ra].changeDetectionScheduler?.notify(e);n;){n[zt]|=t;let i=au(n);if(yp(n)&&!i)return n;n=i}return null}function oj(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function aj(n,e){let t=ki+e;if(t<n.length)return n[t]}function wy(n,e,t,i=!0){let r=e[Dt];if(roe(r,e,n,t),i){let o=$1(t,n),a=e[oi],c=a.parentNode(n[hu]);c!==null&&bse(r,n[fs],a,e,c,o)}let s=e[ih];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function cj(n,e){let t=fy(n,e);return t!==void 0&&nE(t[Dt],t),t}function fy(n,e){if(n.length<=ki)return;let t=ki+e,i=n[t];if(i){let r=i[du];r!==null&&r!==n&&DP(r,i),e>0&&(n[t-1][_o]=i[_o]);let s=J_(n,ki+e);vse(i[Dt],i);let o=s[Pa];o!==null&&o.detachView(s[Dt]),i[hr]=null,i[_o]=null,i[zt]&=-129}return i}function roe(n,e,t,i){let r=ki+i,s=t.length;i>0&&(t[r-1][_o]=e),i<s-ki?(e[_o]=t[r],FR(t,ki+i,e)):(t.push(e),e[_o]=null),e[hr]=t;let o=e[du];o!==null&&t!==o&&lj(o,e);let a=e[Pa];a!==null&&a.insertView(n),pw(e),e[zt]|=128}function lj(n,e){let t=n[ch],i=e[hr];if(ka(i))n[zt]|=2;else{let r=i[hr][ps];e[ps]!==r&&(n[zt]|=2)}t===null?n[ch]=[e]:t.push(e)}var _u=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Dt];return hy(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$i]}set context(e){this._lView[$i]=e}get destroyed(){return lh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[hr];if(Wo(e)){let t=e[ty],i=t?t.indexOf(this):-1;i>-1&&(fy(e,i),J_(t,i))}this._attachedToViewContainer=!1}nE(this._lView[Dt],this._lView)}onDestroy(e){t1(this._lView,e)}markForCheck(){VP(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[zt]&=-129}reattach(){pw(this._lView),this._lView[zt]|=128}detectChanges(){this._lView[zt]|=1024,nj(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=yp(this._lView),t=this._lView[du];t!==null&&!e&&DP(t,this._lView),jH(this._lView[Dt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ze(902,!1);this._appRef=e;let t=yp(this._lView),i=this._lView[du];i!==null&&!t&&lj(i,this._lView),pw(this._lView)}};var Qs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=soe;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let s=xy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new _u(s)}}return n})();function soe(){return UP(fr(),Lt())}function UP(n,e){return n.type&4?new Qs(e,n,Ap(n,e)):null}function Rp(n,e,t,i,r){let s=n.data[e];if(s===null)s=ooe(n,e,t,i,r),t5()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=Yz();s.injectorIndex=o===null?-1:o.injectorIndex}return vp(s,!0),s}function ooe(n,e,t,i,r){let s=c1(),o=l1(),a=o?s:s&&s.parent,c=n.data[e]=coe(n,a,t,e,i,r);return aoe(n,c,s,o),c}function aoe(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function coe(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return s1()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function loe(n){let e=n[qR]??[],i=n[hr][oi],r=[];for(let s of e)s.data[mH]!==void 0?r.push(s):uoe(s,i);n[qR]=r}function uoe(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[pH];for(;t<r;){let s=i.nextSibling;NH(e,i,!1),i=s,t++}}}var doe=()=>null,hoe=()=>null;function Bw(n,e){return doe(n,e)}function uj(n,e,t){return hoe(n,e,t)}var dj=class{},sE=class{},K1=class{resolveComponentFactory(e){throw new ze(917,!1)}},Ey=class{static NULL=new K1},xr=class{},Or=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>foe()}return n})();function foe(){let n=Lt(),e=fr(),t=vo(e.index,n);return(ka(t)?t:n)[oi]}var hj=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>null})}return n})();var Rw={},X1=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,Rw,i);return r!==Rw||t===Rw?r:this.parentInjector.get(e,t,i)}};function zw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=ow(r,a);else if(s==2){let c=a,l=e[++o];i=ow(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function vt(n,e=0){let t=Lt();if(t===null)return st(n,e);let i=fr();return oH(i,t,kr(n),e)}function oE(){let n="invalid";throw new Error(n)}function fj(n,e,t,i,r){let s=i===null?null:{"":-1},o=r(n,t);if(o!==null){let a=o,c=null,l=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(o);break}goe(n,e,t,a,s,c,l)}s!==null&&i!==null&&poe(t,i,s)}function poe(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new ze(-301,!1);i.push(e[r],s)}}function moe(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function goe(n,e,t,i,r,s,o){let a=i.length,c=!1;for(let h=0;h<a;h++){let p=i[h];!c&&Na(p)&&(c=!0,moe(n,t,h)),k1(Fw(t,e),n,p.type)}woe(t,n.data.length,a);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,d=FH(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(t.mergedAttrs=wp(t.mergedAttrs,p.hostAttrs),yoe(n,t,e,d,p),xoe(d,p,r),o!==null&&o.has(p)){let[b,g]=o.get(p);t.directiveToIndex.set(p.type,[d,b+t.directiveStart,g+t.directiveStart])}else(s===null||!s.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let _=p.type.prototype;!l&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}_oe(n,t,s)}function _oe(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))N5(0,e,r,i),N5(1,e,r,i),L5(e,i,!1);else{let s=t.get(r);O5(0,e,s,i),O5(1,e,s,i),L5(e,i,!0)}}}function N5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(i),pj(e,s)}}function O5(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),pj(e,o)}}function pj(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function L5(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!t&&r===null||t&&s===null||IP(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===e){o??=[],o.push(c,i[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function yoe(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=su(r.type,!0)),o=new hh(s,Na(r),vt,null);n.blueprint[i]=o,t[i]=o,voe(n,e,i,FH(n,t,r.hostVars,Cs),r)}function voe(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;boe(o)!=a&&o.push(a),o.push(t,i,s)}}function boe(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xoe(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Na(e)&&(t[""]=n)}}function woe(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function BP(n,e,t,i,r,s,o,a){let c=e[Dt],l=c.consts,u=Xs(l,o),d=Rp(c,n,t,i,u);return s&&fj(c,e,d,Xs(l,a),r),d.mergedAttrs=wp(d.mergedAttrs,d.attrs),d.attrs!==null&&zw(d,d.attrs,!1),d.mergedAttrs!==null&&zw(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function zP(n,e){Q5(n,e),KR(e)&&n.queries.elementEnd(e)}function Eoe(n,e,t,i,r,s){let o=e.consts,a=Xs(o,r),c=Rp(e,n,t,i,a);if(c.mergedAttrs=wp(c.mergedAttrs,c.attrs),s!=null){let l=Xs(o,s);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&zw(c,c.attrs,!1),c.mergedAttrs!==null&&zw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function HP(n){return gj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function mj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function gj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ioe(n,e,t){return n[e]=t}function bo(n,e,t){if(t===Cs)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Soe(n,e,t,i){let r=bo(n,e,t);return bo(n,e+1,i)||r}function Pw(n,e,t){return function i(r){let s=fu(n)?vo(n.index,e):e;VP(s,5);let o=e[$i],a=F5(e,o,t,r),c=i.__ngNextListenerFn__;for(;c;)a=F5(e,o,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function F5(n,e,t,i){let r=Nt(null);try{return Yn(On.OutputStart,e,t),t(i)!==!1}catch(s){return Hse(n,s),!1}finally{Yn(On.OutputEnd,e,t),Nt(r)}}function _j(n,e,t,i,r,s,o,a){let c=_p(n),l=!1,u=null;if(!i&&c&&(u=Coe(e,t,s,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,l=!0}else{let d=$o(n,t),h=i?i(d):d;Ere(t,h,s,a);let p=r.listen(h,s,a);if(!Toe(s)){let _=i?b=>i(yo(b[n.index])):n.index;yj(_,e,t,s,a,p,!1)}}return l}function Toe(n){return n.startsWith("animation")||n.startsWith("transition")}function Coe(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[mp],c=r[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function yj(n,e,t,i,r,s,o){let a=e.firstCreatePass?i1(e):null,c=n1(t),l=c.length;c.push(r,s),a&&a.push(i,n,l,(l+1)*(o?-1:1))}function V5(n,e,t,i,r,s){let o=e[t],a=e[Dt],l=a.data[t].outputs[i],d=o[l].subscribe(s);yj(n.index,a,e,r,s,d,!0)}var Y1=Symbol("BINDING");var Hw=class extends Ey{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Pc(e);return new ph(t,this.ngModule)}};function Aoe(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:(i&eE.SignalBased)!==0};return r&&(s.transform=r),s})}function Moe(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Doe(n,e,t){let i=e instanceof si?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new X1(t,i):t}function Roe(n){let e=n.get(xr,null);if(e===null)throw new ze(407,!1);let t=n.get(hj,null),i=n.get(Rc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function Poe(n,e){let t=vj(n);return PH(e,t,t==="svg"?XR:t==="math"?Hz:null)}function vj(n){return(n.selectors[0][0]||"div").toLowerCase()}var ph=class extends sE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Aoe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Moe(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=rse(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,s,o){Yn(On.DynamicComponentStart);let a=Nt(null);try{let c=this.componentDef,l=koe(i,c,o,s),u=Doe(c,r||this.ngModule,e),d=Roe(u),h=d.rendererFactory.createRenderer(null,c),p=i?Rse(h,i,c.encapsulation,u):Poe(c,h),_=o?.some(U5)||s?.some(v=>typeof v!="function"&&v.bindings.some(U5)),b=TP(null,l,null,512|LH(c),null,null,d,h,u,null,yH(p,u,!0));b[bi]=p,vw(b);let g=null;try{let v=BP(bi,b,2,"#host",()=>l.directiveRegistry,!0,0);OH(h,p,v),Ep(p,b),rE(l,b,v),gP(l,v,b),zP(l,v),t!==void 0&&Ooe(v,this.ngContentSelectors,t),g=vo(v.index,b),b[$i]=g[$i],FP(l,b,null)}catch(v){throw g!==null&&O1(g),O1(b),v}finally{Yn(On.DynamicComponentEnd),bw()}return new jw(this.componentType,b,!!_)}finally{Nt(a)}}};function koe(n,e,t,i){let r=n?["ng-version","21.0.1"]:sse(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[Y1].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Y1].requiredVars;let p=u+1;h.create&&(h.targetIdx=p,(s??=[]).push(h)),h.update&&(h.targetIdx=p,(o??=[]).push(h))}}let c=[e];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=zR(d);c.push(h)}return SP(0,null,Noe(s,o),1,a,c,null,null,null,[r],null)}function Noe(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function U5(n){let e=n[Y1].kind;return e==="input"||e==="twoWay"}var jw=class extends dj{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=ny(t[Dt],bi),this.location=Ap(this._tNode,t),this.instance=vo(this._tNode.index,t)[$i],this.hostView=this.changeDetectorRef=new _u(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,s=LP(i,r[Dt],r,e,t);this.previousInputValues.set(e,t);let o=vo(i.index,r);VP(o,1)}get injector(){return new dh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ooe(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}var As=(()=>{class n{static __NG_ELEMENT_ID__=Loe}return n})();function Loe(){let n=fr();return xj(n,Lt())}var Foe=As,bj=class extends Foe{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ap(this._hostTNode,this._hostLView)}get injector(){return new dh(this._hostTNode,this._hostLView)}get parentInjector(){let e=fP(this._hostTNode,this._hostLView);if(eH(e)){let t=Ow(e,this._hostLView),i=Nw(e),r=t[Dt].data[i+8];return new dh(r,t)}else return new dh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=B5(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ki}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Bw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,Ip(this._hostTNode,o)),a}createComponent(e,t,i,r,s,o,a){let c=e&&!Xie(e),l;if(c)l=t;else{let g=t||{};l=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef,o=g.directives,a=g.bindings}let u=c?e:new ph(Pc(e)),d=i||this.parentInjector;if(!s&&u.ngModule==null){let v=(c?d:this.parentInjector).get(si,null);v&&(s=v)}let h=Pc(u.componentType??{}),p=Bw(this._lContainer,h?.id??null),_=p?.firstChild??null,b=u.create(d,r,_,s,o,a);return this.insertImpl(b.hostView,l,Ip(this._hostTNode,p)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(Gz(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[hr],l=new bj(c,c[fs],c[hr]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return wy(o,r,s,i),e.attachToViewContainerRef(),FR(S1(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=B5(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=fy(this._lContainer,t);i&&(J_(S1(this._lContainer),t),nE(i[Dt],i))}detach(e){let t=this._adjustIndex(e,-1),i=fy(this._lContainer,t);return i&&J_(S1(this._lContainer),t)!=null?new _u(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function B5(n){return n[ty]}function S1(n){return n[ty]||(n[ty]=[])}function xj(n,e){let t,i=e[n.index];return Wo(i)?t=i:(t=oj(i,e,null,n),e[n.index]=t,CP(e,t)),Uoe(t,e,n,i),new bj(t,n,e)}function Voe(n,e){let t=n[oi],i=t.createComment(""),r=$o(e,n),s=t.parentNode(r);return Vw(t,s,i,t.nextSibling(r),!1),i}var Uoe=Hoe,Boe=()=>!1;function zoe(n,e,t){return Boe(n,e,t)}function Hoe(n,e,t,i){if(n[hu])return;let r;t.type&8?r=yo(i):r=Voe(e,t),n[hu]=r}var Q1=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},J1=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)jP(e,t).matches!==null&&this.queries[t].setDirty()}},Gw=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Yoe(e):this.predicate=e}},Z1=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},eP=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,joe(t,s)),this.matchTNodeWithReadOption(e,t,Dw(t,e,s,!1,!1))}else i===Qs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Dw(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===nn||r===As||r===Qs&&t.type&4)this.addMatch(t.index,-2);else{let s=Dw(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function joe(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function Goe(n,e){return n.type&11?Ap(n,e):n.type&4?UP(n,e):null}function Woe(n,e,t,i){return t===-1?Goe(e,n):t===-2?$oe(n,e,i):dy(n,n[Dt],t,e)}function $oe(n,e,t){if(t===nn)return Ap(e,n);if(t===Qs)return UP(e,n);if(t===As)return xj(e,n)}function wj(n,e,t,i){let r=e[Pa].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(Woe(e,u,o[c+1],t.metadata.read))}}r.matches=a}return r.matches}function tP(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=wj(n,e,r,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=ki;d<u.length;d++){let h=u[d];h[du]===h[hr]&&tP(h[Dt],h,l,i)}if(u[ch]!==null){let d=u[ch];for(let h=0;h<d.length;h++){let p=d[h];tP(p[Dt],p,l,i)}}}}}return i}function qoe(n,e){return n[Pa].queries[e].queryList}function Ej(n,e,t){let i=new Oc((t&4)===4);return qz(n,e,i,i.destroy),(e[Pa]??=new J1).queries.push(new Q1(i))-1}function Koe(n,e,t){let i=fi();return i.firstCreatePass&&(Ij(i,new Gw(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),Ej(i,Lt(),e)}function Xoe(n,e,t,i){let r=fi();if(r.firstCreatePass){let s=fr();Ij(r,new Gw(e,t,i),s.index),Qoe(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return Ej(r,Lt(),t)}function Yoe(n){return n.split(",").map(e=>e.trim())}function Ij(n,e,t){n.queries===null&&(n.queries=new Z1),n.queries.track(new eP(e,t))}function Qoe(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function jP(n,e){return n.queries.getByIndex(e)}function Joe(n,e){let t=n[Dt],i=jP(t,e);return i.crossesNgTemplate?tP(t,n,e,[]):wj(t,n,i,e)}var Fc=class{},aE=class{};var Ww=class extends Fc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hw(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let s=BR(e);this._bootstrapComponents=MH(s.bootstrap),this._r3Injector=m1(e,t,[{provide:Fc,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver},...i],Dc(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$w=class extends aE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ww(this.moduleType,e,[])}};var py=class extends Fc{injector;componentFactoryResolver=new Hw(this);instance=null;constructor(e){super();let t=new eh([...e.providers,{provide:Fc,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],e.parent||pp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Iy(n,e,t=null){return new py({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Zoe=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=HR(!1,t.type),r=i.length>0?Iy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(st(si))})}return n})();function at(n){return Cp(()=>{let e=Sj(n),t=lt(ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Zoe).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xo.Emulated,styles:n.styles||hs,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&yu("NgStandalone"),Tj(t);let i=n.dependencies;return t.directiveDefs=z5(i,eae),t.pipeDefs=z5(i,Nz),t.id=iae(t),t})}function eae(n){return Pc(n)||zR(n)}function rn(n){return Cp(()=>({type:n.type,bootstrap:n.bootstrap||hs,declarations:n.declarations||hs,imports:n.imports||hs,exports:n.exports||hs,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tae(n,e){if(n==null)return lu;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,c;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,c=r[3]||null):(s=r,o=r,a=eE.None,c=null),t[s]=[i,a,c],e[s]=o}return t}function nae(n){if(n==null)return lu;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function It(n){return Cp(()=>{let e=Sj(n);return Tj(e),e})}function GP(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Sj(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||lu,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||hs,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:tae(n.inputs,e),outputs:nae(n.outputs),debugInfo:null}}function Tj(n){n.features?.forEach(e=>e(n))}function z5(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let s=e(r);s!==null&&i.push(s)}return i}:null}function iae(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rae(n){return Object.getPrototypeOf(n.prototype).constructor}function pi(n){let e=rae(n.type),t=!0,i=[n];for(;e;){let r;if(Na(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ze(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=T1(n.inputs),o.declaredInputs=T1(n.declaredInputs),o.outputs=T1(n.outputs);let a=r.hostBindings;a&&lae(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&aae(n,c),l&&cae(n,l),sae(n,r),Iz(n.outputs,r.outputs),Na(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===pi&&(t=!1)}}e=Object.getPrototypeOf(e)}oae(i)}function sae(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function oae(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=wp(r.hostAttrs,t=wp(t,r.hostAttrs))}}function T1(n){return n===lu?{}:n===hs?[]:n}function aae(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function cae(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function lae(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Cj(n,e,t,i,r,s,o,a){if(t.firstCreatePass){n.mergedAttrs=wp(n.mergedAttrs,n.attrs);let u=n.tView=SP(2,n,r,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),vp(n,!1);let c=dae(t,e,n,i);xw()&&RP(t,e,c,n),Ep(c,e);let l=oj(c,e,c,n);e[i+bi]=l,CP(e,l),zoe(l,n,e)}function uae(n,e,t,i,r,s,o,a,c,l,u){let d=t+bi,h;return e.firstCreatePass?(h=Rp(e,d,4,o||null,a||null),mw()&&fj(e,n,h,Xs(e.consts,l),kP),Q5(e,h)):h=e.data[d],Cj(h,n,e,t,i,r,s,c),_p(h)&&rE(e,n,h),l!=null&&by(n,h,u),h}function Sp(n,e,t,i,r,s,o,a,c,l,u){let d=t+bi,h;if(e.firstCreatePass){if(h=Rp(e,d,4,o||null,a||null),l!=null){let p=Xs(e.consts,l);h.localNames=[];for(let _=0;_<p.length;_+=2)h.localNames.push(p[_],-1)}}else h=e.data[d];return Cj(h,n,e,t,i,r,s,c),l!=null&&by(n,h,u),h}function Lr(n,e,t,i,r,s,o,a){let c=Lt(),l=fi(),u=Xs(l.consts,s);return uae(c,l,n,e,t,i,r,u,void 0,o,a),Lr}function cE(n,e,t,i,r,s,o,a){let c=Lt(),l=fi(),u=Xs(l.consts,s);return Sp(c,l,n,e,t,i,r,u,void 0,o,a),cE}var dae=hae;function hae(n,e,t,i){return sy(!0),e[oi].createComment("")}var lE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Sy(n){return typeof n=="function"&&n[ls]!==void 0}function WP(n){return Sy(n)&&typeof n.set=="function"}var $P=new Ce("");function Hc(n){return!!n&&typeof n.then=="function"}function uE(n){return!!n&&typeof n.subscribe=="function"}var qP=new Ce("");function Pp(n){return br([{provide:qP,multi:!0,useValue:n}])}var KP=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=H(qP,{optional:!0})??[];injector=H(Qt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=Wi(this.injector,r);if(Hc(s))t.push(s);else if(uE(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dE=new Ce("");function Aj(){$D(()=>{let n="";throw new ze(600,n)})}function Mj(n){return n.isBoundToModule}var fae=10;var Er=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(Ss);afterRenderManager=H(MP);zonelessEnabled=H(ay);rootEffectScheduler=H(ww);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Pt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H(Nc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(yt(t=>!t))}constructor(){H(zc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=H(si);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Qt.NULL){return this._injector.get(Ct).run(()=>{Yn(On.BootstrapComponentStart);let o=t instanceof sE;if(!this._injector.get(KP).done){let _="";throw new ze(405,_)}let c;o?c=t:c=this._injector.get(Ey).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=Mj(c)?void 0:this._injector.get(Fc),u=i||c.selector,d=c.create(r,[],u,l),h=d.location.nativeElement,p=d.injector.get($P,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),uy(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),Yn(On.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Yn(On.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(tE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Yn(On.ChangeDetectionEnd),new ze(101,!1);let t=Nt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Nt(t),this.afterTick.next(),Yn(On.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<fae;){Yn(On.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Yn(On.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!iy(r))continue;let s=i&&!this.zonelessEnabled?0:1;nj(r,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>iy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;uy(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(dE,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ze(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function gi(n,e,t,i){let r=Lt(),s=pu();if(bo(r,s,e)){let o=fi(),a=ry();Use(a,r,n,e,t,i)}return gi}var $Be=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var nP=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,t){this.attach(t,this.detach(e))}};function C1(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function pae(n,e,t,i){let r,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){Nt(i);let l=e.length-1;for(Nt(null);o<=a&&o<=l;){let u=n.at(o),d=e[o],h=C1(o,u,o,d,t);if(h!==0){h<0&&n.updateValue(o,d),o++;continue}let p=n.at(a),_=e[l],b=C1(a,p,l,_,t);if(b!==0){b<0&&n.updateValue(a,_),a--,l--;continue}let g=t(o,u),v=t(a,p),R=t(o,d);if(Object.is(R,v)){let P=t(l,_);Object.is(P,g)?(n.swap(o,a),n.updateValue(a,_),l--,a--):n.move(a,o),n.updateValue(o,d),o++;continue}if(r??=new qw,s??=j5(n,o,a,t),iP(n,r,o,R))n.updateValue(o,d),o++,a++;else if(s.has(R))r.set(g,n.detach(o)),a--;else{let P=n.create(o,e[o]);n.attach(o,P),o++,a++}}for(;o<=l;)H5(n,r,t,o,e[o]),o++}else if(e!=null){Nt(i);let l=e[Symbol.iterator]();Nt(null);let u=l.next();for(;!u.done&&o<=a;){let d=n.at(o),h=u.value,p=C1(o,d,o,h,t);if(p!==0)p<0&&n.updateValue(o,h),o++,u=l.next();else{r??=new qw,s??=j5(n,o,a,t);let _=t(o,h);if(iP(n,r,o,_))n.updateValue(o,h),o++,a++,u=l.next();else if(!s.has(_))n.attach(o,n.create(o,h)),o++,a++,u=l.next();else{let b=t(o,d);r.set(b,n.detach(o)),a--}}}for(;!u.done;)H5(n,r,t,n.length,u.value),u=l.next()}for(;o<=a;)n.destroy(n.detach(a--));r?.forEach(l=>{n.destroy(l)})}function iP(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function H5(n,e,t,i,r){if(iP(n,e,i,t(i,r)))n.updateValue(i,r);else{let s=n.create(i,r);n.attach(i,s)}}function j5(n,e,t,i){let r=new Set;for(let s=e;s<=t;s++)r.add(i(s,n.at(s)));return r}var qw=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function kp(n,e,t,i,r,s,o,a){yu("NgControlFlow");let c=Lt(),l=fi(),u=Xs(l.consts,s);return Sp(c,l,n,e,t,i,r,u,256,o,a),XP}function XP(n,e,t,i,r,s,o,a){yu("NgControlFlow");let c=Lt(),l=fi(),u=Xs(l.consts,s);return Sp(c,l,n,e,t,i,r,u,512,o,a),XP}function Np(n,e){yu("NgControlFlow");let t=Lt(),i=pu(),r=t[i]!==Cs?t[i]:-1,s=r!==-1?Kw(t,bi+r):void 0,o=0;if(bo(t,i,n)){let a=Nt(null);try{if(s!==void 0&&cj(s,o),n!==-1){let c=bi+n,l=Kw(t,c),u=aP(t[Dt],c),d=uj(l,u,t),h=xy(t,u,e,{dehydratedView:d});wy(l,h,o,Ip(u,d))}}finally{Nt(a)}}else if(s!==void 0){let a=aj(s,o);a!==void 0&&(a[$i]=e)}}var rP=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-ki}};var sP=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function YP(n,e,t,i,r,s,o,a,c,l,u,d,h){yu("NgControlFlow");let p=Lt(),_=fi(),b=c!==void 0,g=Lt(),v=a?o.bind(g[ps][$i]):o,R=new sP(b,v);g[bi+n]=R,Sp(p,_,n+1,e,t,i,r,Xs(_.consts,s),256),b&&Sp(p,_,n+2,c,l,u,d,Xs(_.consts,h),512)}var oP=class extends nP{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-ki}at(e){return this.getLView(e)[$i].$implicit}attach(e,t){let i=t[ih];this.needsIndexUpdate||=e!==this.length,wy(this.lContainer,t,e,Ip(this.templateTNode,i)),mae(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,gae(this.lContainer,e),_ae(this.lContainer,e)}create(e,t){let i=Bw(this.lContainer,this.templateTNode.tView.ssrId),r=xy(this.hostLView,this.templateTNode,new rP(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){nE(e[Dt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[$i].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$i].$index=e}getLView(e){return yae(this.lContainer,e)}};function QP(n){let e=Nt(null),t=Oa();try{let i=Lt(),r=i[Dt],s=i[t],o=t+1,a=Kw(i,o);if(s.liveCollection===void 0){let l=aP(r,o);s.liveCollection=new oP(a,i,l)}else s.liveCollection.reset();let c=s.liveCollection;if(pae(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let l=pu(),u=c.length===0;if(bo(i,l,u)){let d=t+2,h=Kw(i,d);if(u){let p=aP(r,d),_=uj(h,p,i),b=xy(i,p,void 0,{dehydratedView:_});wy(h,b,0,Ip(p,_))}else r.firstUpdatePass&&loe(h),cj(h,0)}}}finally{Nt(e)}}function Kw(n,e){return n[e]}function mae(n,e){if(n.length<=ki)return;let t=ki+e,i=n[t],r=i?i[ah]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let s=i[kc];_se(s,r),fh.delete(i),r.detachedLeaveAnimationFns=void 0}}function gae(n,e){if(n.length<=ki)return;let t=ki+e,i=n[t],r=i?i[ah]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function _ae(n,e){return fy(n,e)}function yae(n,e){return aj(n,e)}function aP(n,e){return ny(n,e)}function Cn(n,e,t){let i=Lt(),r=pu();if(bo(i,r,e)){let s=fi(),o=ry();XH(o,i,n,e,i[oi],t)}return Cn}function cP(n,e,t,i,r){LP(e,n,t,r?"class":"style",i)}function ce(n,e,t,i){let r=Lt(),s=r[Dt],o=n+bi,a=s.firstCreatePass?BP(o,r,2,e,kP,mw(),t,i):s.data[o];if(NP(a,r,n,e,Dj),_p(a)){let c=r[Dt];rE(c,r,a),gP(c,a,r)}return i!=null&&by(r,a),ce}function le(){let n=fi(),e=fr(),t=OP(e);return n.firstCreatePass&&zP(n,t),o1(t)&&a1(),r1(),t.classesWithoutHost!=null&&tre(t)&&cP(n,t,Lt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&nre(t)&&cP(n,t,Lt(),t.stylesWithoutHost,!1),le}function En(n,e,t,i){return ce(n,e,t,i),le(),En}function Oe(n,e,t,i){let r=Lt(),s=r[Dt],o=n+bi,a=s.firstCreatePass?Eoe(o,s,2,e,t,i):s.data[o];return NP(a,r,n,e,Dj),i!=null&&by(r,a),Oe}function Ge(){let n=fr(),e=OP(n);return o1(e)&&a1(),r1(),Ge}function Ci(n,e,t,i){return Oe(n,e,t,i),Ge(),Ci}var Dj=(n,e,t,i,r)=>(sy(!0),PH(e[oi],i,l5()));function gh(n,e,t){let i=Lt(),r=i[Dt],s=n+bi,o=r.firstCreatePass?BP(s,i,8,"ng-container",kP,mw(),e,t):r.data[s];if(NP(o,i,n,"ng-container",vae),_p(o)){let a=i[Dt];rE(a,i,o),gP(a,o,i)}return t!=null&&by(i,o),gh}function _h(){let n=fi(),e=fr(),t=OP(e);return n.firstCreatePass&&zP(n,t),_h}var vae=(n,e,t,i,r)=>(sy(!0),cse(e[oi],""));function Qi(){return Lt()}function hE(n,e,t){let i=Lt(),r=pu();if(bo(i,r,e)){let s=fi(),o=ry();YH(o,i,n,e,i[oi],t)}return hE}var Ty="en-US";var bae=Ty;function Rj(n){typeof n=="string"&&(bae=n.toLowerCase().replace(/_/g,"-"))}function Ln(n,e,t){let i=Lt(),r=fi(),s=fr();return Pj(r,i,i[oi],s,n,e,t),Ln}function Ua(n,e,t){let i=Lt(),r=fi(),s=fr();return(s.type&3||t)&&_j(s,r,i,t,i[oi],n,e,Pw(s,i,e)),Ua}function Pj(n,e,t,i,r,s,o){let a=!0,c=null;if((i.type&3||o)&&(c??=Pw(i,e,s),_j(i,n,e,o,t,r,s,c)&&(a=!1)),a){let l=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],p=u[d+1];c??=Pw(i,e,s),V5(i,e,h,p,r,c)}if(l&&l.length)for(let d of l)c??=Pw(i,e,s),V5(i,e,d,r,r,c)}}function An(n=1){return c5(n)}function xae(n,e){let t=null,i=Zre(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?RH(n,s,!0):nse(i,s))return r}return t}function mr(n){let e=Lt()[ps][fs];if(!e.projection){let t=n?n.length:1,i=e.projection=Pz(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?xae(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Qn(n,e=0,t,i,r,s){let o=Lt(),a=fi(),c=i?n+1:null;c!==null&&Sp(o,a,c,i,r,s,null,t);let l=Rp(a,bi+n,16,null,t||null);l.projection===null&&(l.projection=e),u1();let d=!o[ih]||s1();o[ps][fs].projection[l.projection]===null&&c!==null?wae(o,a,c):d&&!Jw(l)&&Ase(a,o,l)}function wae(n,e,t){let i=bi+t,r=e.data[i],s=n[i],o=Bw(s,r.tView.ssrId),a=xy(n,r,void 0,{dehydratedView:o});wy(s,a,0,Ip(r,o))}function Ms(n,e,t,i){Xoe(n,e,t,i)}function jc(n,e,t){Koe(n,e,t)}function Ji(n){let e=Lt(),t=fi(),i=h1();yw(i+1);let r=jP(t,i);if(n.dirty&&jz(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=Joe(e,i);n.reset(s,mre),n.notifyOnChanges()}return!0}return!1}function Zi(){return qoe(Lt(),h1())}function fE(n){let e=Qz();return QR(e,bi+n)}function Cw(n,e){return n<<17|e<<2}function mh(n){return n>>17&32767}function Eae(n){return(n&2)==2}function Iae(n,e){return n&131071|e<<17}function lP(n){return n|2}function Tp(n){return(n&131068)>>2}function A1(n,e){return n&-131069|e<<2}function Sae(n){return(n&1)===1}function uP(n){return n|1}function Tae(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=mh(o),c=Tp(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||fp(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=mh(n[a+1]);n[i+1]=Cw(h,a),h!==0&&(n[h+1]=A1(n[h+1],i)),n[a+1]=Iae(n[a+1],i)}else n[i+1]=Cw(a,0),a!==0&&(n[a+1]=A1(n[a+1],i)),a=i;else n[i+1]=Cw(c,0),a===0?a=i:n[c+1]=A1(n[c+1],i),c=i;l&&(n[i+1]=lP(n[i+1])),G5(n,u,i,!0),G5(n,u,i,!1),Cae(e,u,n,i,s),o=Cw(a,c),s?e.classBindings=o:e.styleBindings=o}function Cae(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&fp(s,e)>=0&&(t[i+1]=uP(t[i+1]))}function G5(n,e,t,i){let r=n[t+1],s=e===null,o=i?mh(r):Tp(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];Aae(c,e)&&(a=!0,n[o+1]=i?uP(l):lP(l)),o=i?mh(l):Tp(l)}a&&(n[t+1]=i?lP(r):uP(r))}function Aae(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?fp(n,e)>=0:!1}var Ko={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Mae(n){return n.substring(Ko.key,Ko.keyEnd)}function Dae(n){return Rae(n),kj(n,Nj(n,0,Ko.textEnd))}function kj(n,e){let t=Ko.textEnd;return t===e?-1:(e=Ko.keyEnd=Pae(n,Ko.key=e,t),Nj(n,e,t))}function Rae(n){Ko.key=0,Ko.keyEnd=0,Ko.value=0,Ko.valueEnd=0,Ko.textEnd=n.length}function Nj(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Pae(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function yh(n,e,t){return Oj(n,e,t,!1),yh}function li(n,e){return Oj(n,e,null,!0),li}function Gc(n){Nae(Bae,kae,n,!0)}function kae(n,e){for(let t=Dae(e);t>=0;t=kj(e,t))uw(n,Mae(e),!0)}function Oj(n,e,t,i){let r=Lt(),s=fi(),o=gw(2);if(s.firstUpdatePass&&Fj(s,n,o,i),e!==Cs&&bo(r,o,e)){let a=s.data[Oa()];Vj(s,a,r,r[oi],n,r[o+1]=Hae(e,t),i,o)}}function Nae(n,e,t,i){let r=fi(),s=gw(2);r.firstUpdatePass&&Fj(r,null,s,i);let o=Lt();if(t!==Cs&&bo(o,s,t)){let a=r.data[Oa()];if(Uj(a,i)&&!Lj(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ow(c,t||"")),cP(r,a,o,t,i)}else zae(r,a,o,o[oi],o[s+1],o[s+1]=Uae(n,e,t),i,s)}}function Lj(n,e){return e>=n.expandoStartIndex}function Fj(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Oa()],o=Lj(n,t);Uj(s,i)&&e===null&&!o&&(e=!1),e=Oae(r,s,e,i),Tae(r,s,e,t,o,i)}}function Oae(n,e,t,i){let r=r5(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=M1(null,n,e,t,i),t=my(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=M1(r,n,e,t,i),s===null){let c=Lae(n,e,i);c!==void 0&&Array.isArray(c)&&(c=M1(null,n,e,c[1],i),c=my(c,e.attrs,i),Fae(n,e,i,c))}else s=Vae(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function Lae(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Tp(i)!==0)return n[mh(i)]}function Fae(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[mh(r)]=i}function Vae(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=my(i,o,t)}return my(i,e.attrs,t)}function M1(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=my(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function my(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),uw(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Uae(n,e,t){if(t==null||t==="")return hs;let i=[],r=Yo(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function Bae(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&uw(n,i,t)}function zae(n,e,t,i,r,s,o,a){r===Cs&&(r=hs);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,p=l<s.length?s[l+1]:void 0,_=null,b;u===d?(c+=2,l+=2,h!==p&&(_=d,b=p)):d===null||u!==null&&u<d?(c+=2,_=u):(l+=2,_=d,b=p),_!==null&&Vj(n,e,t,i,_,b,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function Vj(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=Sae(l)?W5(c,e,t,r,Tp(l),o):void 0;if(!Xw(u)){Xw(s)||Eae(l)&&(s=W5(c,null,t,r,a,o));let d=YR(Oa(),t);Dse(i,o,d,r,s)}}function W5(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===Cs&&(h=d?hs:void 0);let p=d?dw(h,i):u===i?h:void 0;if(l&&!Xw(p)&&(p=dw(c,i)),Xw(p)&&(a=p,o))return a;let _=n[r+1];r=o?mh(_):Tp(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=dw(c,i))}return a}function Xw(n){return n!==void 0}function Hae(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Dc(Yo(n)))),n}function Uj(n,e){return(n.flags&(e?8:16))!==0}function Y(n,e=""){let t=Lt(),i=fi(),r=n+bi,s=i.firstCreatePass?Rp(i,r,1,e,null):i.data[r],o=jae(i,t,s,e,n);t[r]=o,xw()&&RP(i,t,o,s),vp(s,!1)}var jae=(n,e,t,i,r)=>(sy(!0),ose(e[oi],i));function Gae(n,e,t,i=""){return bo(n,pu(),t)?e+nh(t)+i:Cs}function Wae(n,e,t,i,r,s=""){let o=Zz(),a=Soe(n,o,t,r);return gw(2),a?e+nh(t)+i+nh(r)+s:Cs}function Fr(n){return Ds("",n),Fr}function Ds(n,e,t){let i=Lt(),r=Gae(i,n,e,t);return r!==Cs&&Bj(i,Oa(),r),Ds}function pE(n,e,t,i,r){let s=Lt(),o=Wae(s,n,e,t,i,r);return o!==Cs&&Bj(s,Oa(),o),pE}function Bj(n,e,t){let i=YR(e,n);ase(n[oi],i,t)}function mE(n,e,t){WP(e)&&(e=e());let i=Lt(),r=pu();if(bo(i,r,e)){let s=fi(),o=ry();XH(o,i,n,e,i[oi],t)}return mE}function JP(n,e){let t=WP(n);return t&&n.set(e),t}function gE(n,e){let t=Lt(),i=fi(),r=fr();return Pj(i,t,t[oi],r,n,e),gE}function $ae(n,e,t){let i=fi();if(i.firstCreatePass){let r=Na(n);dP(t,i.data,i.blueprint,r,!0),dP(e,i.data,i.blueprint,r,!1)}}function dP(n,e,t,i,r){if(n=kr(n),Array.isArray(n))for(let s=0;s<n.length;s++)dP(n[s],e,t,i,r);else{let s=fi(),o=Lt(),a=fr(),c=Zd(n)?n:kr(n.provide),l=GR(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Zd(n)||!n.multi){let p=new hh(l,r,vt,null),_=R1(c,e,r?u:u+h,d);_===-1?(k1(Fw(a,o),s,c),D1(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),o.push(p)):(t[_]=p,o[_]=p)}else{let p=R1(c,e,u+h,d),_=R1(c,e,u,u+h),b=p>=0&&t[p],g=_>=0&&t[_];if(r&&!g||!r&&!b){k1(Fw(a,o),s,c);let v=Xae(r?Kae:qae,t.length,r,i,l,n);!r&&g&&(t[_].providerFactory=v),D1(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),o.push(v)}else{let v=zj(t[r?_:p],l,!r&&i);D1(s,n,p>-1?p:_,v)}!r&&i&&g&&t[_].componentProviders++}}}function D1(n,e,t,i){let r=Zd(e),s=Uz(e);if(r||s){let c=(s?kr(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function zj(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function R1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function qae(n,e,t,i,r){return hP(this.multi,[])}function Kae(n,e,t,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=dy(i,i[Dt],this.providerFactory.index,r);o=c.slice(0,a),hP(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],hP(s,o);return o}function hP(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Xae(n,e,t,i,r,s){let o=new hh(n,t,vt,null);return o.multi=[],o.index=e,o.componentProviders=0,zj(o,r,i&&!t),o}function Rs(n,e=[]){return t=>{t.providersResolver=(i,r)=>$ae(i,r?r(n):n,e)}}function Yae(n,e){let t=n[e];return t===Cs?void 0:t}function Qae(n,e,t,i,r,s){let o=e+t;return bo(n,o,r)?Ioe(n,o+1,s?i.call(s,r):i(r)):Yae(n,o+1)}function vu(n,e){let t=fi(),i,r=n+bi;t.firstCreatePass?(i=Jae(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=su(i.type,!0)),o,a=ds(vt);try{let c=Lw(!1),l=s();return Lw(c),JR(t,Lt(),r,l),l}finally{ds(a)}}function Jae(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function bu(n,e,t){let i=n+bi,r=Lt(),s=QR(r,i);return Zae(r,i)?Qae(r,Jz(),e,s.transform,t,s):s.transform(t)}function Zae(n,e){return n[Dt].data[e].pure}var Yw=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ZP=(()=>{class n{compileModuleSync(t){return new $w(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=BR(t),s=MH(r.declarations).reduce((o,a)=>{let c=Pc(a);return c&&o.push(new ph(c)),o},[]);return new Yw(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Hj=(()=>{class n{applicationErrorHandler=H(Ss);appRef=H(Er);taskService=H(Nc);ngZone=H(Ct);zonelessEnabled=H(ay);tracing=H(zc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Nn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(X_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(x1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?_1:g1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(X_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jj(){return[{provide:Rc,useExisting:Hj},{provide:Ct,useClass:Y_},{provide:ay,useValue:!0}]}function ece(){return typeof $localize<"u"&&$localize.locale||Ty}var _E=new Ce("",{factory:()=>H(_E,{optional:!0,skipSelf:!0})||ece()});function Op(n,e){return Ex(n,e?.equal)}var Kj=Symbol("InputSignalNode#UNSET"),fce=lt(ie({},Ix),{transformFn:void 0,applyValueToInputSignal(n,e){V_(n,e)}});function Xj(n,e){let t=Object.create(fce);t.value=n,t.transformFn=e?.transform;function i(){if(O_(t),t.value===Kj){let r=null;throw new ze(-950,r)}return t.value}return i[ls]=t,i}var Lp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>gy(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Gj(n,e){return Xj(n,e)}function pce(n){return Xj(Kj,n)}var Yj=(Gj.required=pce,Gj);var ek=new Ce(""),mce=new Ce("");function Cy(n){return!n.moduleRef}function gce(n){let e=Cy(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ct);return t.run(()=>{Cy(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ss),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Cy(n)){let s=()=>e.destroy(),o=n.platformInjector.get(ek);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ek);o.add(s),n.moduleRef.onDestroy(()=>{uy(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return yce(i,t,()=>{let s=e.get(Nc),o=s.add(),a=e.get(KP);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(_E,Ty);if(Rj(c||Ty),!e.get(mce,!0))return Cy(n)?e.get(Er):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Cy(n)){let u=e.get(Er);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return _ce?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var _ce;function yce(n,e,t){try{let i=t();return Hc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var yE=null;function vce(n=[],e){return Qt.create({name:e,providers:[{provide:Z_,useValue:"platform"},{provide:ek,useValue:new Set([()=>yE=null])},...n]})}function bce(n=[]){if(yE)return yE;let e=vce(n);return yE=e,Aj(),xce(e),e}function xce(n){let e=n.get(Qw,null);Wi(n,()=>{e?.forEach(t=>t())})}function Ay(){return!1}var Qr=(()=>{class n{static __NG_ELEMENT_ID__=wce}return n})();function wce(n){return Ece(fr(),Lt(),(n&16)===16)}function Ece(n,e,t){if(fu(n)&&!t){let i=vo(n.index,e);return new _u(i,i)}else if(n.type&175){let i=e[ps];return new _u(i,e)}return null}var tk=class{constructor(){}supports(e){return HP(e)}create(e){return new nk(e)}},Ice=(n,e)=>e,nk=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Ice}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<Wj(i,r,s)?t:i,a=Wj(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let p=h<s.length?s[h]:s[h]=0,_=p+h;u<=_&&_<l&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!HP(e))throw new ze(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,mj(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new ik(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vE),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ik=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},rk=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},vE=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new rk,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Wj(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function $j(){return new bE([new tk])}var bE=(()=>{class n{factories;static \u0275prov=ve({token:n,providedIn:"root",factory:$j});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=H(n,{optional:!0,skipSelf:!0});return n.create(t,i||$j())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ze(901,!1)}}return n})();function Qj(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Yn(On.BootstrapApplicationStart);try{let s=r?.injector??bce(i),o=[jj(),f5,...t||[]],a=new py({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return gce({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Yn(On.BootstrapApplicationEnd)}}function Ni(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Jj(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function xE(n,e){let t=Pc(n),i=e.elementInjector||pp();return new ph(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var t6=null;function xo(){return t6}function sk(n){t6??=n}var My=class{},ok=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(n6),providedIn:"platform"})}return n})();var n6=(()=>{class n extends ok{_location;_history;_doc=H(Wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xo().getBaseHref(this._doc)}onPopState(t){let i=xo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=xo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function i6(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Zj(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function xu(n){return n&&n[0]!=="?"?`?${n}`:n}var Fp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(s6),providedIn:"root"})}return n})(),r6=new Ce(""),s6=(()=>{class n extends Fp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return i6(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+xu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+xu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+xu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(st(ok),st(r6,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wu=(()=>{class n{_subject=new Pt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=Cce(Zj(e6(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+xu(i))}normalize(t){return n.stripTrailingSlash(Tce(this._basePath,e6(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xu(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=xu;static joinWithSlash=i6;static stripTrailingSlash=Zj;static \u0275fac=function(i){return new(i||n)(st(Fp))};static \u0275prov=ve({token:n,factory:()=>Sce(),providedIn:"root"})}return n})();function Sce(){return new wu(st(Fp))}function Tce(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function e6(n){return n.replace(/\/index.html$/,"")}function Cce(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var wE=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},IE=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new wE(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),o6(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);o6(s,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(vt(As),vt(Qs),vt(bE))};static \u0275dir=It({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function o6(n,e){n.context.$implicit=e.item}var Qo=(()=>{class n{_viewContainer;_context=new EE;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){a6(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){a6(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(vt(As),vt(Qs))};static \u0275dir=It({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),EE=class{$implicit=null;ngIf=null};function a6(n,e){if(n&&!n.createEmbeddedView)throw new ze(2020,!1)}function Ace(n,e){return new ze(2100,!1)}var ak=class{createSubscription(e,t,i){return Ti(()=>e.subscribe({next:t,error:i}))}dispose(e){Ti(()=>e.unsubscribe())}},ck=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},Mce=new ck,Dce=new ak,vh=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=H(Ss);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(Hc(t))return Mce;if(uE(t))return Dce;throw Ace(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(vt(Qr,16))};static \u0275pipe=GP({name:"async",type:n,pure:!1})}return n})();var Ps=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();function SE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var bh=class{};var lk="browser";function c6(n){return n===lk}var Dy=class{_doc;constructor(e){this._doc=e}manager},TE=(()=>{class n extends Dy{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(st(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),ME=new Ce(""),fk=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(o=>{o.manager=this});let r=t.filter(o=>!(o instanceof TE));this._plugins=r.slice().reverse();let s=t.find(o=>o instanceof TE);s&&this._plugins.push(s)}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ze(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(st(ME),st(Ct))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),uk="ng-app-id";function l6(n){for(let e of n)e.remove()}function u6(n,e){let t=e.createElement("style");return t.textContent=n,t}function Rce(n,e,t,i){let r=n.head?.querySelectorAll(`style[${uk}="${e}"],link[${uk}="${e}"]`);if(r)for(let s of r)s.removeAttribute(uk),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function hk(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var pk=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,Rce(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,u6);i?.forEach(r=>this.addUsage(r,this.external,hk))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(l6(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])l6(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,u6(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,hk(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(st(Wt),st(Mp),st(Dp,8),st(Vc))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),dk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mk=/%COMP%/g;var h6="%COMP%",Pce=`_nghost-${h6}`,kce=`_ngcontent-${h6}`,Nce=!0,Oce=new Ce("",{factory:()=>Nce});function Lce(n){return kce.replace(mk,n)}function Fce(n){return Pce.replace(mk,n)}function f6(n,e){return e.map(t=>t.replace(mk,n))}var gk=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Ry(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof AE?r.applyToHost(t):r instanceof Py&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case Xo.Emulated:s=new AE(c,l,i,this.appId,u,o,a,d,h);break;case Xo.ShadowDom:return new CE(c,t,i,o,a,this.nonce,d,h,l);case Xo.ExperimentalIsolatedShadowDom:return new CE(c,t,i,o,a,this.nonce,d,h);default:s=new Py(c,l,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(st(fk),st(pk),st(Mp),st(Oce),st(Wt),st(Ct),st(Dp),st(zc,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),Ry=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(dk[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(d6(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(d6(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ze(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=dk[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=dk[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Fa.DashCase|Fa.Important)?e.style.setProperty(t,i,r&Fa.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Fa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=xo().getGlobalEventTarget(this.doc,e),!e))throw new ze(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function d6(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var CE=class extends Ry{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,i,r,s,o,a,c,l){super(e,r,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=f6(i.id,u);for(let h of u){let p=document.createElement("style");o&&p.setAttribute("nonce",o),p.textContent=h,this.shadowRoot.appendChild(p)}let d=i.getExternalStyles?.();if(d)for(let h of d){let p=hk(h,r);o&&p.setAttribute("nonce",o),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Py=class extends Ry{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?f6(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&fh.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},AE=class extends Py{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,c,l){let u=r+"-"+i.id;super(e,t,i,s,o,a,c,l,u),this.contentAttr=Lce(u),this.hostAttr=Fce(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var DE=class n extends My{supportsDOMEvents=!0;static makeCurrent(){sk(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Vce();return t==null?null:Uce(t)}resetBaseElement(){ky=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return SE(document.cookie,e)}},ky=null;function Vce(){return ky=ky||document.head.querySelector("base"),ky?ky.getAttribute("href"):null}function Uce(n){return new URL(n,document.baseURI).pathname}var Bce=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),p6=["alt","control","meta","shift"],zce={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hce={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},m6=(()=>{class n extends Dy{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xo().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),p6.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=zce[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),p6.forEach(o=>{if(o!==r){let a=Hce[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(st(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();function _k(n,e,t){let i=ie({rootComponent:n,platformRef:t?.platformRef},jce(e));return Qj(i)}function jce(n){return{appProviders:[...Kce,...n?.providers??[]],platformProviders:qce}}function Gce(){DE.makeCurrent()}function Wce(){return new Es}function $ce(){return mP(document),document}var qce=[{provide:Vc,useValue:lk},{provide:Qw,useValue:Gce,multi:!0},{provide:Wt,useFactory:$ce}];var Kce=[{provide:Z_,useValue:"root"},{provide:Es,useFactory:Wce},{provide:ME,useClass:TE,multi:!0},{provide:ME,useClass:m6,multi:!0},gk,pk,fk,{provide:xr,useExisting:gk},{provide:bh,useClass:Bce},[]];var Eu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var vk=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},bk=class{encodeKey(e){return g6(e)}encodeValue(e){return g6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Xce(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var Yce=/%(\d[a-f0-9])/gi,Qce={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function g6(n){return encodeURIComponent(n).replace(Yce,(e,t)=>Qce[t]??e)}function RE(n){return`${n}`}var Wc=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new bk,e.fromString){if(e.fromObject)throw new ze(2805,!1);this.map=Xce(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(RE):[RE(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(RE(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(RE(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function Jce(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function _6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function y6(n){return typeof Blob<"u"&&n instanceof Blob}function v6(n){return typeof FormData<"u"&&n instanceof FormData}function Zce(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var b6="Content-Type",x6="Accept",w6="text/plain",E6="application/json",ele=`${E6}, ${w6}, */*`,Up=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let s;if(Jce(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new ze(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Eu,this.context??=new vk,!this.params)this.params=new Wc,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||_6(this.body)||y6(this.body)||v6(this.body)||Zce(this.body)?this.body:this.body instanceof Wc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||v6(this.body)?null:y6(this.body)?this.body.type||null:_6(this.body)?null:typeof this.body=="string"?w6:this.body instanceof Wc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?E6:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,h=e.integrity||this.integrity,p=e.referrerPolicy||this.referrerPolicy,_=e.transferCache??this.transferCache,b=e.timeout??this.timeout,g=e.body!==void 0?e.body:this.body,v=e.withCredentials??this.withCredentials,R=e.reportProgress??this.reportProgress,P=e.headers||this.headers,N=e.params||this.params,U=e.context??this.context;return e.setHeaders!==void 0&&(P=Object.keys(e.setHeaders).reduce((O,I)=>O.set(I,e.setHeaders[I]),P)),e.setParams&&(N=Object.keys(e.setParams).reduce((O,I)=>O.set(I,e.setParams[I]),N)),new n(t,i,g,{params:N,headers:P,context:U,reportProgress:R,responseType:r,withCredentials:v,transferCache:_,keepalive:s,cache:a,priority:o,timeout:b,mode:c,redirect:l,credentials:u,referrer:d,integrity:h,referrerPolicy:p})}},xh=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(xh||{}),Ny=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,i="OK"){this.headers=e.headers||new Eu,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},xk=class n extends Ny{constructor(e={}){super(e)}type=xh.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Oy=class n extends Ny{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=xh.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Bp=class extends Ny{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},tle=200,nle=204;var ile=/^\)\]\}',?\n/;var rle=(()=>{class n{xhrFactory;tracingService=H(zc,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new ze(-2800,!1);let i=this.xhrFactory;return Et(null).pipe(hi(()=>new bt(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),t.headers.has(x6)||o.setRequestHeader(x6,ele),!t.headers.has(b6)){let g=t.detectContentTypeHeader();g!==null&&o.setRequestHeader(b6,g)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let g=t.responseType.toLowerCase();o.responseType=g!=="json"?g:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=o.statusText||"OK",v=new Eu(o.getAllResponseHeaders()),R=o.responseURL||t.url;return c=new xk({headers:v,status:o.status,statusText:g,url:R}),c},u=this.maybePropagateTrace(()=>{let{headers:g,status:v,statusText:R,url:P}=l(),N=null;v!==nle&&(N=typeof o.response>"u"?o.responseText:o.response),v===0&&(v=N?tle:0);let U=v>=200&&v<300;if(t.responseType==="json"&&typeof N=="string"){let O=N;N=N.replace(ile,"");try{N=N!==""?JSON.parse(N):null}catch(I){N=O,U&&(U=!1,N={error:I,text:N})}}U?(s.next(new Oy({body:N,headers:g,status:v,statusText:R,url:P||void 0})),s.complete()):s.error(new Bp({error:N,headers:g,status:v,statusText:R,url:P||void 0}))}),d=this.maybePropagateTrace(g=>{let{url:v}=l(),R=new Bp({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(R)}),h=d;t.timeout&&(h=this.maybePropagateTrace(g=>{let{url:v}=l(),R=new Bp({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:v||void 0});s.error(R)}));let p=!1,_=this.maybePropagateTrace(g=>{p||(s.next(l()),p=!0);let v={type:xh.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),t.responseType==="text"&&o.responseText&&(v.partialText=o.responseText),s.next(v)}),b=this.maybePropagateTrace(g=>{let v={type:xh.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),s.next(v)});return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",h),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",_),a!==null&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:xh.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",_),a!==null&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(st(bh))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sle(n,e){return e(n)}function ole(n,e,t){return(i,r)=>Wi(t,()=>e(i,s=>n(s,r)))}var ale=new Ce("",{factory:()=>[]}),I6=new Ce(""),cle=new Ce("",{providedIn:"root",factory:()=>!0});var lle=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(rle),r},providedIn:"root"})}return n})();var ule=(()=>{class n{backend;injector;chain=null;pendingTasks=H(gu);contributeToStability=H(cle);constructor(t,i){this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ale),...this.injector.get(I6,[])]));this.chain=i.reduceRight((r,s)=>ole(r,s,this.injector),sle)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Yd(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(st(lle),st(si))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dle=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(ule),r},providedIn:"root"})}return n})();function yk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var wk=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Up)s=t;else{let c;r.headers instanceof Eu?c=r.headers:c=new Eu(r.headers);let l;r.params&&(r.params instanceof Wc?l=r.params:l=new Wc({fromObject:r.params})),s=new Up(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let o=Et(s).pipe(up(c=>this.handler.handle(c)));if(t instanceof Up||r.observe==="events")return o;let a=o.pipe(ri(c=>c instanceof Oy));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(yt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ze(2806,!1);return c.body}));case"blob":return a.pipe(yt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ze(2807,!1);return c.body}));case"text":return a.pipe(yt(c=>{if(c.body!==null&&typeof c.body!="string")throw new ze(2808,!1);return c.body}));case"json":default:return a.pipe(yt(c=>c.body))}case"response":return a;default:throw new ze(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Wc().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,yk(r,i))}post(t,i,r={}){return this.request("POST",t,yk(r,i))}put(t,i,r={}){return this.request("PUT",t,yk(r,i))}static \u0275fac=function(i){return new(i||n)(st(dle))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S6=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(st(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ek=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=st(fle),r},providedIn:"root"})}return n})(),fle=(()=>{class n extends Ek{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Nr.NONE:return i;case Nr.HTML:return Uc(i,"HTML")?Yo(i):wP(this._doc,String(i)).toString();case Nr.STYLE:return Uc(i,"Style")?Yo(i):i;case Nr.SCRIPT:if(Uc(i,"Script"))return Yo(i);throw new ze(5200,!1);case Nr.URL:return Uc(i,"URL")?Yo(i):yy(String(i));case Nr.RESOURCE_URL:if(Uc(i,"ResourceURL"))return Yo(i);throw new ze(5201,!1);default:throw new ze(5202,!1)}}bypassSecurityTrustHtml(t){return _P(t)}bypassSecurityTrustStyle(t){return yP(t)}bypassSecurityTrustScript(t){return vP(t)}bypassSecurityTrustUrl(t){return bP(t)}bypassSecurityTrustResourceUrl(t){return xP(t)}static \u0275fac=function(i){return new(i||n)(st(Wt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $t="primary",Ky=Symbol("RouteTitle"),Ak=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sh(n){return new Ak(n)}function O6(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function FE(n){return new Promise((e,t)=>{n.pipe(Cc()).subscribe({next:i=>e(i),error:i=>t(i)})})}function mle(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ba(n[t],e[t]))return!1;return!0}function Ba(n,e){let t=n?Mk(n):void 0,i=e?Mk(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!L6(n[r],e[r]))return!1;return!0}function Mk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function L6(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function F6(n){return n.length>0?n[n.length-1]:null}function Ch(n){return z_(n)?n:Hc(n)?di(Promise.resolve(n)):Et(n)}function V6(n){return z_(n)?FE(n):Promise.resolve(n)}var gle={exact:B6,subset:z6},U6={exact:_le,subset:yle,ignored:()=>!0};function C6(n,e,t){return gle[t.paths](n.root,e.root,t.matrixParams)&&U6[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _le(n,e){return Ba(n,e)}function B6(n,e,t){if(!Eh(n.segments,e.segments)||!NE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!B6(n.children[i],e.children[i],t))return!1;return!0}function yle(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>L6(n[t],e[t]))}function z6(n,e,t){return H6(n,e,e.segments,t)}function H6(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Eh(r,t)||e.hasChildren()||!NE(r,t,i))}else if(n.segments.length===t.length){if(!Eh(n.segments,t)||!NE(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!z6(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Eh(n.segments,r)||!NE(n.segments,r,i)||!n.children[$t]?!1:H6(n.children[$t],e,s,i)}}function NE(n,e,t){return e.every((i,r)=>U6[t](n[r].parameters,i.parameters))}var Zo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new qn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Sh(this.queryParams),this._queryParamMap}toString(){return xle.serialize(this)}},qn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return OE(this)}},Iu=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sh(this.parameters),this._parameterMap}toString(){return G6(this)}};function vle(n,e){return Eh(n,e)&&n.every((t,i)=>Ba(t.parameters,e[i].parameters))}function Eh(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function ble(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===$t&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==$t&&(t=t.concat(e(r,i)))}),t}var Xy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>new Su,providedIn:"root"})}return n})(),Su=class{parse(e){let t=new Rk(e);return new Zo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ly(e.root,!0)}`,i=Ile(e.queryParams),r=typeof e.fragment=="string"?`#${wle(e.fragment)}`:"";return`${t}${i}${r}`}},xle=new Su;function OE(n){return n.segments.map(e=>G6(e)).join("/")}function Ly(n,e){if(!n.hasChildren())return OE(n);if(e){let t=n.children[$t]?Ly(n.children[$t],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==$t&&i.push(`${r}:${Ly(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=ble(n,(i,r)=>r===$t?[Ly(n.children[$t],!1)]:[`${r}:${Ly(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[$t]!=null?`${OE(n)}/${t[0]}`:`${OE(n)}/(${t.join("//")})`}}function j6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function PE(n){return j6(n).replace(/%3B/gi,";")}function wle(n){return encodeURI(n)}function Dk(n){return j6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function LE(n){return decodeURIComponent(n)}function A6(n){return LE(n.replace(/\+/g,"%20"))}function G6(n){return`${Dk(n.path)}${Ele(n.parameters)}`}function Ele(n){return Object.entries(n).map(([e,t])=>`;${Dk(e)}=${Dk(t)}`).join("")}function Ile(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${PE(t)}=${PE(r)}`).join("&"):`${PE(t)}=${PE(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Sle=/^[^\/()?;#]+/;function Ik(n){let e=n.match(Sle);return e?e[0]:""}var Tle=/^[^\/()?;=#]+/;function Cle(n){let e=n.match(Tle);return e?e[0]:""}var Ale=/^[^=?&#]+/;function Mle(n){let e=n.match(Ale);return e?e[0]:""}var Dle=/^[^&#]+/;function Rle(n){let e=n.match(Dle);return e?e[0]:""}var Rk=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qn([],{}):new qn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[$t]=new qn(e,t)),i}parseSegment(){let e=Ik(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ze(4009,!1);return this.capture(e),new Iu(LE(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Cle(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Ik(this.remaining);r&&(i=r,this.capture(i))}e[LE(t)]=LE(i)}parseQueryParam(e){let t=Mle(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=Rle(this.remaining);o&&(i=o,this.capture(i))}let r=A6(t),s=A6(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Ik(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ze(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=$t);let o=this.parseChildren();t[s??$t]=Object.keys(o).length===1&&o[$t]?o[$t]:new qn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ze(4011,!1)}};function W6(n){return n.segments.length>0?new qn([],{[$t]:n}):n}function $6(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=$6(r);if(i===$t&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new qn(n.segments,e);return Ple(t)}function Ple(n){if(n.numberOfChildren===1&&n.children[$t]){let e=n.children[$t];return new qn(n.segments.concat(e.segments),e.children)}return n}function Tu(n){return n instanceof Zo}function q6(n,e,t=null,i=null,r=new Su){let s=K6(n);return X6(s,e,t,i,r)}function K6(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new qn(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=W6(i);return e??r}function X6(n,e,t,i,r){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Sk(s,s,s,t,i,r);let o=kle(e);if(o.toRoot())return Sk(s,s,new qn([],{}),t,i,r);let a=Nle(o,s,n),c=a.processChildren?Vy(a.segmentGroup,a.index,o.commands):Q6(a.segmentGroup,a.index,o.commands);return Sk(s,a.segmentGroup,c,t,i,r)}function VE(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zy(n){return typeof n=="object"&&n!=null&&n.outlets}function M6(n,e,t){n||="\u0275";let i=new Zo;return i.queryParams={[n]:e},t.parse(t.serialize(i)).queryParams[n]}function Sk(n,e,t,i,r,s){let o={};for(let[l,u]of Object.entries(i??{}))o[l]=Array.isArray(u)?u.map(d=>M6(l,d,s)):M6(l,u,s);let a;n===e?a=t:a=Y6(n,e,t);let c=W6($6(a));return new Zo(c,o,r)}function Y6(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Y6(s,e,t)}),new qn(n.segments,i)}var UE=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&VE(i[0]))throw new ze(4003,!1);let r=i.find(zy);if(r&&r!==F6(i))throw new ze(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kle(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new UE(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new UE(t,e,i)}var Hp=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Nle(n,e,t){if(n.isAbsolute)return new Hp(e,!0,0);if(!t)return new Hp(e,!1,NaN);if(t.parent===null)return new Hp(t,!0,0);let i=VE(n.commands[0])?0:1,r=t.segments.length-1+i;return Ole(t,r,n.numberOfDoubleDots)}function Ole(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ze(4005,!1);r=i.segments.length}return new Hp(i,!1,r-s)}function Lle(n){return zy(n[0])?n[0].outlets:{[$t]:n}}function Q6(n,e,t){if(n??=new qn([],{}),n.segments.length===0&&n.hasChildren())return Vy(n,e,t);let i=Fle(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new qn(n.segments.slice(0,i.pathIndex),{});return s.children[$t]=new qn(n.segments.slice(i.pathIndex),n.children),Vy(s,0,r)}else return i.match&&r.length===0?new qn(n.segments,{}):i.match&&!n.hasChildren()?Pk(n,e,t):i.match?Vy(n,0,r):Pk(n,e,t)}function Vy(n,e,t){if(t.length===0)return new qn(n.segments,{});{let i=Lle(t),r={};if(Object.keys(i).some(s=>s!==$t)&&n.children[$t]&&n.numberOfChildren===1&&n.children[$t].segments.length===0){let s=Vy(n.children[$t],e,t);return new qn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Q6(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new qn(n.segments,r)}}function Fle(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(zy(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!R6(c,l,o))return s;i+=2}else{if(!R6(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Pk(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(zy(s)){let c=Vle(s.outlets);return new qn(i,c)}if(r===0&&VE(t[0])){let c=n.segments[e];i.push(new Iu(c.path,D6(t[0]))),r++;continue}let o=zy(s)?s.outlets[$t]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&VE(a)?(i.push(new Iu(o,D6(a))),r+=2):(i.push(new Iu(o,{})),r++)}return new qn(i,{})}function Vle(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Pk(new qn([],{}),0,i))}),e}function D6(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function R6(n,e,t){return n==t.path&&Ba(e,t.parameters)}var Uy="imperative",Ir=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ir||{}),Zs=class{id;url;constructor(e,t){this.id=e,this.url=t}},Th=class extends Zs{type=Ir.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ha=class extends Zs{urlAfterRedirects;type=Ir.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ms=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ms||{}),Hy=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Hy||{}),za=class extends Zs{reason;code;type=Ir.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$c=class extends Zs{reason;code;type=Ir.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Gp=class extends Zs{error;target;type=Ir.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jy=class extends Zs{urlAfterRedirects;state;type=Ir.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},BE=class extends Zs{urlAfterRedirects;state;type=Ir.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zE=class extends Zs{urlAfterRedirects;state;shouldActivate;type=Ir.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},HE=class extends Zs{urlAfterRedirects;state;type=Ir.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jE=class extends Zs{urlAfterRedirects;state;type=Ir.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},GE=class{route;type=Ir.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},WE=class{route;type=Ir.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$E=class{snapshot;type=Ir.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qE=class{snapshot;type=Ir.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},KE=class{snapshot;type=Ir.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},XE=class{snapshot;type=Ir.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Gy=class{},Wp=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Ule(n){return!(n instanceof Gy)&&!(n instanceof Wp)}function Ble(n,e){return n.providers&&!n._injector&&(n._injector=Iy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jo(n){return n.outlet||$t}function zle(n,e){let t=n.filter(i=>Jo(i)===e);return t.push(...n.filter(i=>Jo(i)!==e)),t}function Kp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var YE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Kp(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xp(this.rootInjector)}},Xp=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new YE(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(st(si))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QE=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kk(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=kk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Nk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Nk(e,this._root).map(t=>t.value)}};function kk(n,e){if(n===e.value)return e;for(let t of e.children){let i=kk(n,t);if(i)return i}return null}function Nk(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Nk(n,t);if(i.length)return i.unshift(e),i}return[]}var Js=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zp(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Wy=class extends QE{snapshot;constructor(e,t){super(e),this.snapshot=t,Bk(this,e)}toString(){return this.snapshot.toString()}};function J6(n){let e=Hle(n),t=new Hi([new Iu("",{})]),i=new Hi({}),r=new Hi({}),s=new Hi({}),o=new Hi(""),a=new qc(t,i,s,o,r,$t,n,e.root);return a.snapshot=e.root,new Wy(new Js(a,[]),e)}function Hle(n){let e={},t={},i={},s=new Ih([],e,i,"",t,$t,n,null,{});return new $y("",new Js(s,[]))}var qc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(yt(l=>l[Ky]))??Et(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(yt(e=>Sh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(yt(e=>Sh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function JE(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ie(ie({},e.params),n.params),data:ie(ie({},e.data),n.data),resolve:ie(ie(ie(ie({},n.data),e.data),r?.data),n._resolvedData)}:i={params:ie({},n.params),data:ie({},n.data),resolve:ie(ie({},n.data),n._resolvedData??{})},r&&e8(r)&&(i.resolve[Ky]=r.title),i}var Ih=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ky]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},$y=class extends QE{url;constructor(e,t){super(t),this.url=e,Bk(this,t)}toString(){return Z6(this._root)}};function Bk(n,e){e.value._routerState=n,e.children.forEach(t=>Bk(n,t))}function Z6(n){let e=n.children.length>0?` { ${n.children.map(Z6).join(", ")} } `:"";return`${n.value}${e}`}function Tk(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ba(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ba(e.params,t.params)||n.paramsSubject.next(t.params),mle(e.url,t.url)||n.urlSubject.next(t.url),Ba(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ok(n,e){let t=Ba(n.params,e.params)&&vle(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Ok(n.parent,e.parent))}function e8(n){return typeof n.title=="string"||n.title===null}var t8=new Ce(""),Yy=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=$t;activateEvents=new vn;deactivateEvents=new vn;attachEvents=new vn;detachEvents=new vn;routerOutletData=Yj(void 0,{});parentContexts=H(Xp);location=H(As);changeDetector=H(Qr);inputBinder=H(nI,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ze(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ze(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ze(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ze(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Lk(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pr]})}return n})(),Lk=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===qc?this.route:e===Xp?this.childContexts:e===t8?this.outletData:this.parent.get(e,t)}},nI=new Ce("");var zk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&En(0,"router-outlet")},dependencies:[Yy],encapsulation:2})}return n})();function Hk(n){let e=n.children&&n.children.map(Hk),t=e?lt(ie({},n),{children:e}):ie({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=zk),t}function jle(n,e,t){let i=qy(n,e._root,t?t._root:void 0);return new Wy(i,e)}function qy(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Gle(n,e,t);return new Js(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qy(n,a)),o}}let i=Wle(e.value),r=e.children.map(s=>qy(n,s));return new Js(i,r)}}function Gle(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qy(n,i,r);return qy(n,i)})}function Wle(n){return new qc(new Hi(n.url),new Hi(n.params),new Hi(n.queryParams),new Hi(n.fragment),new Hi(n.data),n.outlet,n.component,n)}var $p=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},n8="ngNavigationCancelingError";function ZE(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Tu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=i8(!1,ms.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function i8(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[n8]=!0,t.cancellationCode=e,t}function $le(n){return r8(n)&&Tu(n.url)}function r8(n){return!!n&&n[n8]}var qle=(n,e,t,i)=>yt(r=>(new Fk(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Fk=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Tk(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=zp(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=zp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=zp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=zp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new XE(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qE(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Tk(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Tk(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},eI=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jp=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Kle(n,e,t){let i=n._root,r=e?e._root:null;return Fy(i,r,t,[i.value])}function Xle(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yp(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!MR(n)?n:e.get(n):i}function Fy(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=zp(e);return n.children.forEach(o=>{Yle(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>By(a,t.getContext(o),r)),r}function Yle(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Qle(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new eI(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Fy(n,e,a?a.children:null,i,r):Fy(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new jp(a.outlet.component,o))}else o&&By(e,a,r),r.canActivateChecks.push(new eI(i)),s.component?Fy(n,null,a?a.children:null,i,r):Fy(n,null,t,i,r);return r}function Qle(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Eh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Eh(n.url,e.url)||!Ba(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ok(n,e)||!Ba(n.queryParams,e.queryParams);case"paramsChange":default:return!Ok(n,e)}}function By(n,e,t){let i=zp(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?By(o,e.children.getContext(s),t):By(o,null,t):By(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jp(e.outlet.component,r)):t.canDeactivateChecks.push(new jp(null,r)):t.canDeactivateChecks.push(new jp(null,r))}function Qy(n){return typeof n=="function"}function Jle(n){return typeof n=="boolean"}function Zle(n){return n&&Qy(n.canLoad)}function eue(n){return n&&Qy(n.canActivate)}function tue(n){return n&&Qy(n.canActivateChild)}function nue(n){return n&&Qy(n.canDeactivate)}function iue(n){return n&&Qy(n.canMatch)}function s8(n){return n instanceof $d||n?.name==="EmptyError"}var kE=Symbol("INITIAL_VALUE");function qp(){return hi(n=>cR(n.map(e=>e.pipe(ji(1),Ac(kE)))).pipe(yt(e=>{for(let t of e)if(t!==!0){if(t===kE)return kE;if(t===!1||rue(t))return t}return!0}),ri(e=>e!==kE),ji(1)))}function rue(n){return Tu(n)||n instanceof $p}function o8(n){return n.aborted?Et(void 0).pipe(ji(1)):new bt(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function a8(n){return Aa(o8(n))}function sue(n,e){return us(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Et(lt(ie({},t),{guardsResult:!0})):oue(o,i,r,n).pipe(us(a=>a&&Jle(a)?aue(i,s,n,e):Et(a)),yt(a=>lt(ie({},t),{guardsResult:a})))})}function oue(n,e,t,i){return di(n).pipe(us(r=>hue(r.component,r.route,t,e,i)),Cc(r=>r!==!0,!0))}function aue(n,e,t,i){return di(e).pipe(up(r=>lp(lue(r.route.parent,i),cue(r.route,i),due(n,r.path,t),uue(n,r.route,t))),Cc(r=>r!==!0,!0))}function cue(n,e){return n!==null&&e&&e(new KE(n)),Et(!0)}function lue(n,e){return n!==null&&e&&e(new $E(n)),Et(!0)}function uue(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Et(!0);let r=i.map(s=>H_(()=>{let o=Kp(e)??t,a=Yp(s,o),c=eue(a)?a.canActivate(e,n):Wi(o,()=>a(e,n));return Ch(c).pipe(Cc())}));return Et(r).pipe(qp())}function due(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Xle(o)).filter(o=>o!==null).map(o=>H_(()=>{let a=o.guards.map(c=>{let l=Kp(o.node)??t,u=Yp(c,l),d=tue(u)?u.canActivateChild(i,n):Wi(l,()=>u(i,n));return Ch(d).pipe(Cc())});return Et(a).pipe(qp())}));return Et(s).pipe(qp())}function hue(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Et(!0);let o=s.map(a=>{let c=Kp(e)??r,l=Yp(a,c),u=nue(l)?l.canDeactivate(n,e,t,i):Wi(c,()=>l(n,e,t,i));return Ch(u).pipe(Cc())});return Et(o).pipe(qp())}function fue(n,e,t,i,r){let s=e.canLoad;if(s===void 0||s.length===0)return Et(!0);let o=s.map(a=>{let c=Yp(a,n),l=Zle(c)?c.canLoad(e,t):Wi(n,()=>c(e,t)),u=Ch(l);return r?u.pipe(a8(r)):u});return Et(o).pipe(qp(),c8(i))}function c8(n){return Gd(Gi(e=>{if(typeof e!="boolean")throw ZE(n,e)}),yt(e=>e===!0))}function pue(n,e,t,i,r){let s=e.canMatch;if(!s||s.length===0)return Et(!0);let o=s.map(a=>{let c=Yp(a,n),l=iue(c)?c.canMatch(e,t):Wi(n,()=>c(e,t)),u=Ch(l);return r?u.pipe(a8(r)):u});return Et(o).pipe(qp(),c8(i))}var wh=class l8 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,l8.prototype)}},Vk=class u8 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,u8.prototype)}};function mue(n){throw new ze(4e3,!1)}function gue(n){throw i8(!1,ms.GuardRejected)}var _ue=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[$t])throw mue(`${e.redirectTo}`);r=r.children[$t]}}async applyRedirectCommands(e,t,i,r,s){let o=await yue(t,r,s);if(o instanceof Zo)throw new Vk(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,i);if(o[0]==="/")throw new Vk(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Zo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new qn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ze(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function yue(n,e,t){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:u,title:d}=e;return FE(Ch(Wi(t,()=>i({params:l,data:u,queryParams:r,fragment:s,routeConfig:o,url:a,outlet:c,title:d}))))}var Uk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vue(n,e,t,i,r,s){let o=d8(n,e,t);return o.matched?(i=Ble(e,i),pue(i,e,t,r,s).pipe(yt(a=>a===!0?o:ie({},Uk)))):Et(o)}function d8(n,e,t){if(e.path==="**")return bue(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ie({},Uk):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||O6)(t,n,e);if(!r)return ie({},Uk);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?ie(ie({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function bue(n){return{matched:!0,parameters:n.length>0?F6(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function P6(n,e,t,i){return t.length>0&&Eue(n,t,i)?{segmentGroup:new qn(e,wue(i,new qn(t,n.children))),slicedSegments:[]}:t.length===0&&Iue(n,t,i)?{segmentGroup:new qn(n.segments,xue(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new qn(n.segments,n.children),slicedSegments:t}}function xue(n,e,t,i){let r={};for(let s of t)if(iI(n,e,s)&&!i[Jo(s)]){let o=new qn([],{});r[Jo(s)]=o}return ie(ie({},i),r)}function wue(n,e){let t={};t[$t]=e;for(let i of n)if(i.path===""&&Jo(i)!==$t){let r=new qn([],{});t[Jo(i)]=r}return t}function Eue(n,e,t){return t.some(i=>iI(n,e,i)&&Jo(i)!==$t)}function Iue(n,e,t){return t.some(i=>iI(n,e,i))}function iI(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Sue(n,e,t){return e.length===0&&!n.children[t]}var Tue=class{};async function Cue(n,e,t,i,r,s,o="emptyOnly",a){return new Mue(n,e,t,i,r,o,s,a).recognize()}var Aue=31,Mue=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new _ue(this.urlSerializer,this.urlTree)}noMatchError(e){return new ze(4002,`'${e.segmentGroup}'`)}async recognize(){let e=P6(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:i}=await this.match(e),r=new Js(i,t),s=new $y("",r),o=q6(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Ih([],Object.freeze({}),Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$t,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,$t,t),rootSnapshot:t}}catch(i){if(i instanceof Vk)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof wh?this.noMatchError(i):i}}async processSegmentGroup(e,t,i,r,s){if(i.segments.length===0&&i.hasChildren())return this.processChildren(e,t,i,s);let o=await this.processSegment(e,t,i,i.segments,r,!0,s);return o instanceof Js?[o]:[]}async processChildren(e,t,i,r){let s=[];for(let c of Object.keys(i.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=i.children[c],u=zle(t,c),d=await this.processSegmentGroup(e,u,l,c,r);o.push(...d)}let a=h8(o);return Due(a),a}async processSegment(e,t,i,r,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a)}catch(l){if(l instanceof wh||s8(l))continue;throw l}if(Sue(i,r,s))return new Tue;throw new wh(i)}async processSegmentAgainstRoute(e,t,i,r,s,o,a,c){if(Jo(i)!==o&&(o===$t||!iI(r,s,i)))throw new wh(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,r,i,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c);throw new wh(r)}async expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=d8(t,r,s);if(!c)throw new wh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Aue&&(this.allowRedirects=!1));let p=new Ih(s,l,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,k6(r),Jo(r),r.component??r._loadedComponent??null,r,N6(r)),_=JE(p,a,this.paramsInheritanceStrategy);if(p.params=Object.freeze(_.params),p.data=Object.freeze(_.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let b=await this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,e),g=await this.applyRedirects.lineralizeSegments(r,b);return this.processSegment(e,i,t,g.concat(h),o,!1,a)}async matchSegmentAgainstRoute(e,t,i,r,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await FE(vue(t,i,r,e,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(t.children={}),!a?.matched)throw new wh(t);e=i._injector??e;let{routes:c}=await this.getChildConfig(e,i,r),l=i._loadedInjector??e,{parameters:u,consumedSegments:d,remainingSegments:h}=a,p=new Ih(d,u,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,k6(i),Jo(i),i.component??i._loadedComponent??null,i,N6(i)),_=JE(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(_.params),p.data=Object.freeze(_.data);let{segmentGroup:b,slicedSegments:g}=P6(t,d,h,c);if(g.length===0&&b.hasChildren()){let P=await this.processChildren(l,c,b,p);return new Js(p,P)}if(c.length===0&&g.length===0)return new Js(p,[]);let v=Jo(i)===s,R=await this.processSegment(l,c,b,g,v?$t:s,!0,p);return new Js(p,R instanceof Js?[R]:[])}async getChildConfig(e,t,i){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await FE(fue(e,t,i,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw gue(t)}return{routes:[],injector:e}}};function Due(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}function Rue(n){let e=n.value.routeConfig;return e&&e.path===""}function h8(n){let e=[],t=new Set;for(let i of n){if(!Rue(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=h8(i.children);e.push(new Js(i.value,r))}return e.filter(i=>!t.has(i))}function k6(n){return n.data||{}}function N6(n){return n.resolve||{}}var Pue=new Ce("",{factory:()=>Cue});function kue(n,e,t,i,r,s,o){let a=n.get(Pue);return us(c=>Et(c).pipe(hi(l=>a(n,e,t,i,l.extractedUrl,r,s,o)),yt(({state:l,tree:u})=>lt(ie({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function Nue(n,e){return us(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Et(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of f8(c))o.add(l);let a=0;return di(o).pipe(up(c=>s.has(c)?Oue(c,i,n,e):(c.data=JE(c,c.parent,n).resolve,Et(void 0))),Gi(()=>a++),Qx(1),us(c=>a===o.size?Et(t):Xr))})}function f8(n){let e=n.children.map(t=>f8(t)).flat();return[n,...e]}function Oue(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!e8(r)&&(s[Ky]=r.title),H_(()=>(n.data=JE(n,n.parent,t).resolve,Lue(s,n,e,i).pipe(yt(o=>(n._resolvedData=o,n.data=ie(ie({},n.data),o),null)))))}function Lue(n,e,t,i){let r=Mk(n);if(r.length===0)return Et({});let s={};return di(r).pipe(us(o=>Fue(n[o],e,t,i).pipe(Cc(),Gi(a=>{if(a instanceof $p)throw ZE(new Su,a);s[o]=a}))),Qx(1),yt(()=>s),Kd(o=>s8(o)?Xr:B_(o)))}function Fue(n,e,t,i){let r=Kp(e)??i,s=Yp(n,r),o=s.resolve?s.resolve(e,t):Wi(r,()=>s(e,t));return Ch(o)}function Ck(n){return hi(e=>{let t=n(e);return t?di(t).pipe(yt(()=>e)):Et(e)})}var jk=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===$t);return i}getResolvedTitleForRoute(t){return t.data[Ky]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(p8),providedIn:"root"})}return n})(),p8=(()=>{class n extends jk{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(st(S6))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qp=new Ce("",{factory:()=>({})}),Jy=new Ce(""),m8=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(ZP);async loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await V6(Wi(t,()=>i.loadComponent())),o=await y8(_8(s));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o,o}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let s=await g8(i,this.compiler,t,this.onLoadEndListener);return i._loadedRoutes=s.routes,i._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function g8(n,e,t,i){let r=await V6(Wi(t,()=>n.loadChildren())),s=await y8(_8(r)),o;s instanceof aE||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),i&&i(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(Jy,[],{optional:!0,self:!0}).flat()),{routes:c.map(Hk),injector:a}}function Vue(n){return n&&typeof n=="object"&&"default"in n}function _8(n){return Vue(n)?n.default:n}async function y8(n){return n}var rI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(Uue),providedIn:"root"})}return n})(),Uue=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v8=new Ce("");var Bue=()=>{},b8=new Ce(""),x8=(()=>{class n{currentNavigation=$n(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=$n(null,{});events=new Pt;transitionAbortWithErrorSubject=new Pt;configLoader=H(m8);environmentInjector=H(si);destroyRef=H(Is);urlSerializer=H(Xy);rootContexts=H(Xp);location=H(wu);inputBindingEnabled=H(nI,{optional:!0})!==null;titleStrategy=H(jk);options=H(Qp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(rI);createViewTransition=H(v8,{optional:!0});navigationErrorHandler=H(b8,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Et(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new GE(r)),i=r=>this.events.next(new WE(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;Ti(()=>{this.transitions?.next(lt(ie({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(t){return this.transitions=new Hi(null),this.transitions.pipe(ri(i=>i!==null),hi(i=>{let r=!1,s=new AbortController;return Et(i).pipe(hi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ms.SupersededByNewNavigation),Xr;this.currentTransition=i;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?lt(ie({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new $c(o.id,this.urlSerializer.serialize(o.rawUrl),"",Hy.IgnoredSameUrlNavigation)),o.resolve(!1),Xr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Et(o).pipe(hi(u=>(this.events.next(new Th(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Xr:Promise.resolve(u))),kue(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Gi(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new jy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:p,extras:_}=o,b=new Th(u,this.urlSerializer.serialize(d),h,p);this.events.next(b);let g=J6(this.rootComponentType).snapshot;return this.currentTransition=i=lt(ie({},o),{targetSnapshot:g,urlAfterRedirects:d,extras:lt(ie({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(v=>(v.finalUrl=d,v)),Et(i)}else return this.events.next(new $c(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Hy.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Xr}),Gi(o=>{let a=new BE(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),yt(o=>(this.currentTransition=i=lt(ie({},o),{guards:Kle(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),sue(this.environmentInjector,o=>this.events.next(o)),Gi(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ZE(this.urlSerializer,o.guardsResult);let a=new zE(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ri(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ms.GuardRejected),!1)),Ck(o=>{if(o.guards.canActivateChecks.length!==0)return Et(o).pipe(Gi(a=>{let c=new HE(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),hi(a=>{let c=!1;return Et(a).pipe(Nue(this.paramsInheritanceStrategy,this.environmentInjector),Gi({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ms.NoDataFromResolver)}}))}),Gi(a=>{let c=new jE(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Ck(o=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=Kp(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(o.targetSnapshot.root);return c.length===0?Et(o):di(Promise.all(c).then(()=>o))}),Ck(()=>this.afterPreactivation()),hi(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?di(c).pipe(yt(()=>i)):Et(i)}),yt(o=>{let a=jle(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=lt(ie({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),i}),Gi(()=>{this.events.next(new Gy)}),qle(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ji(1),Aa(o8(s.signal).pipe(ri(()=>!r&&!i.targetRouterState),Gi(()=>{this.cancelNavigationTransition(i,s.signal.reason+"",ms.Aborted)}))),Gi({next:o=>{r=!0,this.currentNavigation.update(a=>(a.abort=Bue,a)),this.lastSuccessfulNavigation.set(Ti(this.currentNavigation)),this.events.next(new Ha(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Aa(this.transitionAbortWithErrorSubject.pipe(Gi(o=>{throw o}))),Yd(()=>{s.abort(),r||this.cancelNavigationTransition(i,"",ms.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Kd(o=>{if(this.destroyed)return i.resolve(!1),Xr;if(r=!0,r8(o))this.events.next(new za(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),$le(o)?this.events.next(new Wp(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Gp(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let c=Wi(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof $p){let{message:l,cancellationCode:u}=ZE(this.urlSerializer,c);this.events.next(new za(i.id,this.urlSerializer.serialize(i.extractedUrl),l,u)),this.events.next(new Wp(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return Xr}))}))}cancelNavigationTransition(t,i,r){let s=new za(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ti(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zue(n){return n!==Uy}var w8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(Hue),providedIn:"root"})}return n})(),tI=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Hue=(()=>{class n extends tI{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gk=(()=>{class n{urlSerializer=H(Xy);options=H(Qp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(wu);urlHandlingStrategy=H(rI);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof Zo?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=J6(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:()=>H(E8),providedIn:"root"})}return n})(),E8=(()=>{class n extends Gk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Th?this.updateStateMemento():t instanceof $c?this.commitTransition(i):t instanceof jy?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Gy?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof za&&t.code!==ms.SupersededByNewNavigation&&t.code!==ms.Redirect?this.restoreHistory(i):t instanceof Gp?this.restoreHistory(i,!0):t instanceof Ha&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=ie(ie({},o),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=ie(ie({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wk(n,e){n.events.pipe(ri(t=>t instanceof Ha||t instanceof za||t instanceof Gp||t instanceof $c),yt(t=>t instanceof Ha||t instanceof $c?0:(t instanceof za?t.code===ms.Redirect||t.code===ms.SupersededByNewNavigation:!1)?2:1),ri(t=>t!==2),ji(1)).subscribe(()=>{e()})}var jue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ur=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(lE);stateManager=H(Gk);options=H(Qp,{optional:!0})||{};pendingTasks=H(Nc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(x8);urlSerializer=H(Xy);location=H(wu);urlHandlingStrategy=H(rI);injector=H(si);_events=new Pt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(w8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(Jy,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(nI,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Nn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=Ti(this.navigationTransitions.currentNavigation);if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof za&&i.code!==ms.Redirect&&i.code!==ms.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ha)this.navigated=!0;else if(i instanceof Wp){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zue(r.source)},o);this.scheduleNavigation(a,Uy,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Ule(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Uy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=ie({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s).catch(c=>{this.disposed||this.injector.get(Ss)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ti(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hk),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ie(ie({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=K6(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return X6(d,t,u,l??null,this.urlSerializer)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Tu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Uy,null,i)}navigate(t,i={skipLocationChange:!1}){return Wue(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Da(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=ie({},jue):i===!1?r=ie({},Gue):r=i,Tu(t))return C6(this.currentUrlTree,t,r);let s=this.parseUrl(t);return C6(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Wk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wue(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ze(4008,!1)}var Jp=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=$n(null,{});get href(){return Ti(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pt;applicationErrorHandler=H(Ss);options=H(Qp,{optional:!0});constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(H(new Lp("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Ha&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Tu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Tu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(vt(Ur),vt(qc),gy("tabindex"),vt(Or),vt(nn),vt(Fp))};static \u0275dir=It({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&Ln("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&gi("href",r.reactiveHref(),EP)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ni],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ni],replaceUrl:[2,"replaceUrl","replaceUrl",Ni],routerLink:"routerLink"},features:[pr]})}return n})();var que=new Ce("");function $k(n,...e){return br([{provide:Jy,multi:!0,useValue:n},[],{provide:qc,useFactory:Kue},{provide:dE,multi:!0,useFactory:Xue},e.map(t=>t.\u0275providers)])}function Kue(){return H(Ur).routerState.root}function Xue(){let n=H(Qt);return e=>{let t=n.get(Er);if(e!==t.components[0])return;let i=n.get(Ur),r=n.get(Yue);n.get(Que)===1&&i.initialNavigation(),n.get(Jue,null,{optional:!0})?.setUpPreloading(),n.get(que,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Yue=new Ce("",{factory:()=>new Pt}),Que=new Ce("",{factory:()=>1});var Jue=new Ce("");var S8=()=>{};var A8=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Zue=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},sI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(h=64)),i.push(t[u],t[d],t[h],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(A8(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Zue(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new Kk;let h=s<<2|a>>4;if(i.push(h),l!==64){let p=a<<4&240|l>>2;if(i.push(p),d!==64){let _=l<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Kk=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ede=function(n){let e=A8(n);return sI.encodeByteArray(e,!0)},ev=function(n){return ede(n).replace(/\./g,"")},oI=function(n){try{return sI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tde=()=>Yk().__FIREBASE_DEFAULTS__,nde=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ide=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&oI(n[1]);return e&&JSON.parse(e)},aI=()=>{try{return S8()||tde()||nde()||ide()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qk=n=>{var e,t;return(t=(e=aI())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},M8=n=>{let e=Qk(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Jk=()=>{var n;return(n=aI())===null||n===void 0?void 0:n.config},Zk=n=>{var e;return(e=aI())===null||e===void 0?void 0:e[`_${n}`]};var Ah=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Cu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cI(n){return(await fetch(n,{credentials:"include"})).ok}function D8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ev(JSON.stringify(t)),ev(JSON.stringify(o)),""].join(".")}var Zy={};function rde(){let n={prod:[],emulator:[]};for(let e of Object.keys(Zy))Zy[e]?n.emulator.push(e):n.prod.push(e);return n}function sde(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var T8=!1;function lI(n,e){if(typeof window>"u"||typeof document>"u"||!Cu(window.location.host)||Zy[n]===e||Zy[n]||T8)return;Zy[n]=e;function t(h){return`__firebase__banner__${h}`}let i="__firebase__banner",s=rde().prod.length>0;function o(){let h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{T8=!0,o()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=sde(i),p=t("text"),_=document.getElementById(p)||document.createElement("span"),b=t("learnmore"),g=document.getElementById(b)||document.createElement("a"),v=t("preprendIcon"),R=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let P=h.element;a(P),u(g,b);let N=l();c(R,v),P.append(R,_,g,N),document.body.appendChild(P)}s?(_.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Sr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sr())}function ode(){var n;let e=(n=aI())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k8(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function N8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O8(){let n=Sr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function L8(){return!ode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tv(){try{return typeof indexedDB=="object"}catch{return!1}}function F8(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ade="FirebaseError",eo=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ade,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ea.prototype.create)}},ea=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?cde(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new eo(r,a,i)}};function cde(n,e){return n.replace(lde,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var lde=/\{\$([^}]+)}/g;function V8(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ja(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(C8(s)&&C8(o)){if(!ja(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function C8(n){return n!==null&&typeof n=="object"}function Zp(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function U8(n,e){let t=new Xk(n,e);return t.subscribe.bind(t)}var Xk=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ude(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=qk),r.error===void 0&&(r.error=qk),r.complete===void 0&&(r.complete=qk);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ude(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qk(){}var vWe=14400*1e3;function er(n){return n&&n._delegate?n._delegate:n}var gs=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mh="[DEFAULT]";var eN=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Ah;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hde(e))try{this.getOrInitializeService({instanceIdentifier:Mh})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Mh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mh){return this.instances.has(e)}getOptions(e=Mh){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dde(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Mh){return this.component?this.component.multipleInstances?e:Mh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dde(n){return n===Mh?void 0:n}function hde(n){return n.instantiationMode==="EAGER"}var uI=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fde=[],pn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(pn||{}),pde={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},mde=pn.INFO,gde={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},_de=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=gde[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ga=class{constructor(e){this.name=e,this._logLevel=mde,this._logHandler=_de,this._userLogHandler=null,fde.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...e),this._logHandler(this,pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...e),this._logHandler(this,pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pn.INFO,...e),this._logHandler(this,pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pn.WARN,...e),this._logHandler(this,pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...e),this._logHandler(this,pn.ERROR,...e)}};var yde=(n,e)=>e.some(t=>n instanceof t),B8,z8;function vde(){return B8||(B8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bde(){return z8||(z8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var H8=new WeakMap,nN=new WeakMap,j8=new WeakMap,tN=new WeakMap,rN=new WeakMap;function xde(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Wa(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&H8.set(t,n)}).catch(()=>{}),rN.set(e,n),e}function wde(n){if(nN.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});nN.set(n,e)}var iN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nN.get(n);if(e==="objectStoreNames")return n.objectStoreNames||j8.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function G8(n){iN=n(iN)}function Ede(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(dI(this),e,...t);return j8.set(i,e.sort?e.sort():[e]),Wa(i)}:bde().includes(n)?function(...e){return n.apply(dI(this),e),Wa(H8.get(this))}:function(...e){return Wa(n.apply(dI(this),e))}}function Ide(n){return typeof n=="function"?Ede(n):(n instanceof IDBTransaction&&wde(n),yde(n,vde())?new Proxy(n,iN):n)}function Wa(n){if(n instanceof IDBRequest)return xde(n);if(tN.has(n))return tN.get(n);let e=Ide(n);return e!==n&&(tN.set(n,e),rN.set(e,n)),e}var dI=n=>rN.get(n);function hI(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=Wa(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Wa(o.result),c.oldVersion,c.newVersion,Wa(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Sde=["get","getKey","getAll","getAllKeys","count"],Tde=["put","add","delete","clear"],sN=new Map;function W8(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sN.get(e))return sN.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Tde.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Sde.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),r&&c.done]))[0]};return sN.set(e,s),s}G8(n=>lt(ie({},n),{get:(e,t,i)=>W8(e,t)||n.get(e,t,i),has:(e,t)=>!!W8(e,t)||n.has(e,t)}));var aN=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Cde(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Cde(n){let e=n.getComponent();return e?.type==="VERSION"}var cN="@firebase/app",$8="0.13.2";var Kc=new Ga("@firebase/app"),Ade="@firebase/app-compat",Mde="@firebase/analytics-compat",Dde="@firebase/analytics",Rde="@firebase/app-check-compat",Pde="@firebase/app-check",kde="@firebase/auth",Nde="@firebase/auth-compat",Ode="@firebase/database",Lde="@firebase/data-connect",Fde="@firebase/database-compat",Vde="@firebase/functions",Ude="@firebase/functions-compat",Bde="@firebase/installations",zde="@firebase/installations-compat",Hde="@firebase/messaging",jde="@firebase/messaging-compat",Gde="@firebase/performance",Wde="@firebase/performance-compat",$de="@firebase/remote-config",qde="@firebase/remote-config-compat",Kde="@firebase/storage",Xde="@firebase/storage-compat",Yde="@firebase/firestore",Qde="@firebase/ai",Jde="@firebase/firestore-compat",Zde="firebase",ehe="11.10.0";var lN="[DEFAULT]",the={[cN]:"fire-core",[Ade]:"fire-core-compat",[Dde]:"fire-analytics",[Mde]:"fire-analytics-compat",[Pde]:"fire-app-check",[Rde]:"fire-app-check-compat",[kde]:"fire-auth",[Nde]:"fire-auth-compat",[Ode]:"fire-rtdb",[Lde]:"fire-data-connect",[Fde]:"fire-rtdb-compat",[Vde]:"fire-fn",[Ude]:"fire-fn-compat",[Bde]:"fire-iid",[zde]:"fire-iid-compat",[Hde]:"fire-fcm",[jde]:"fire-fcm-compat",[Gde]:"fire-perf",[Wde]:"fire-perf-compat",[$de]:"fire-rc",[qde]:"fire-rc-compat",[Kde]:"fire-gcs",[Xde]:"fire-gcs-compat",[Yde]:"fire-fst",[Jde]:"fire-fst-compat",[Qde]:"fire-vertex","fire-js":"fire-js",[Zde]:"fire-js-all"};var nv=new Map,nhe=new Map,uN=new Map;function q8(n,e){try{n.container.addComponent(e)}catch(t){Kc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ta(n){let e=n.name;if(uN.has(e))return Kc.debug(`There were multiple attempts to register component ${e}.`),!1;uN.set(e,n);for(let t of nv.values())q8(t,n);for(let t of nhe.values())q8(t,n);return!0}function em(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function to(n){return n==null?!1:n.settings!==void 0}var ihe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Au=new ea("app","Firebase",ihe);var dN=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Au.create("app-deleted",{appName:this._name})}};var Mu=ehe;function pN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:lN,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Au.create("bad-app-name",{appName:String(r)});if(t||(t=Jk()),!t)throw Au.create("no-options");let s=nv.get(r);if(s){if(ja(t,s.options)&&ja(i,s.config))return s;throw Au.create("duplicate-app",{appName:r})}let o=new uI(r);for(let c of uN.values())o.addComponent(c);let a=new dN(t,i,o);return nv.set(r,a),a}function Dh(n=lN){let e=nv.get(n);if(!e&&n===lN&&Jk())return pN();if(!e)throw Au.create("no-app",{appName:n});return e}function fI(){return Array.from(nv.values())}function Ai(n,e,t){var i;let r=(i=the[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kc.warn(a.join(" "));return}ta(new gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var rhe="firebase-heartbeat-database",she=1,iv="firebase-heartbeat-store",oN=null;function Q8(){return oN||(oN=hI(rhe,she,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iv)}catch(t){console.warn(t)}}}}).catch(n=>{throw Au.create("idb-open",{originalErrorMessage:n.message})})),oN}async function ohe(n){try{let t=(await Q8()).transaction(iv),i=await t.objectStore(iv).get(J8(n));return await t.done,i}catch(e){if(e instanceof eo)Kc.warn(e.message);else{let t=Au.create("idb-get",{originalErrorMessage:e?.message});Kc.warn(t.message)}}}async function K8(n,e){try{let i=(await Q8()).transaction(iv,"readwrite");await i.objectStore(iv).put(e,J8(n)),await i.done}catch(t){if(t instanceof eo)Kc.warn(t.message);else{let i=Au.create("idb-set",{originalErrorMessage:t?.message});Kc.warn(i.message)}}}function J8(n){return`${n.name}!${n.options.appId}`}var ahe=1024,che=30,hN=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new fN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=X8();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>che){let o=uhe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Kc.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=X8(),{heartbeatsToSend:i,unsentEntries:r}=lhe(this._heartbeatsCache.heartbeats),s=ev(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Kc.warn(t),""}}};function X8(){return new Date().toISOString().substring(0,10)}function lhe(n,e=ahe){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Y8(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Y8(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var fN=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tv()?F8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await ohe(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return K8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return K8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Y8(n){return ev(JSON.stringify({version:2,heartbeats:n})).length}function uhe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function dhe(n){ta(new gs("platform-logger",e=>new aN(e),"PRIVATE")),ta(new gs("heartbeat",e=>new hN(e),"PRIVATE")),Ai(cN,$8,n),Ai(cN,$8,"esm2017"),Ai("fire-js","")}dhe("");var hhe="firebase",fhe="11.10.0";Ai(hhe,fhe,"app");function Z8(n){n===void 0&&(n=H(Qt));let e=n.get(gu);return t=>new bt(i=>{let r=e.add(),s=!1;function o(){s||(r(),s=!0)}let a=t.subscribe({next:c=>{i.next(c),o()},complete:()=>{i.complete(),o()},error:c=>{i.error(c),o()}});return a.add(()=>{i.unsubscribe(),o()}),a})}var Du=new ru("ANGULARFIRE2_VERSION");function rv(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var nm=(n,e)=>{let t=e?[e]:fI(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},tm=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(tm||{}),e9=Ay()&&typeof Zone<"u"?tm.WARN:tm.SILENT;var pI=class{zone;delegate;constructor(e,t=oR){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r?r.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,i)}},Ru=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=H(Ct);this.outsideAngular=t.runOutsideAngular(()=>new pI(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new pI(typeof Zone>"u"?void 0:Zone.current,tu))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t9=!1;function phe(n,e){!t9&&(e9>tm.SILENT||Ay())&&(t9=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),e9>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function mhe(n){let e=H(Ct,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Rh(n){let e=H(Ct,{optional:!0});return e?e.run(()=>n()):n()}var ghe=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),Wi(t,()=>Rh(()=>n.apply(void 0,i)))),xi=(n,e,t)=>(t||=e?tm.WARN:tm.VERBOSE,function(){let i,r=arguments,s,o,a;try{s=H(Ru),o=H(gu),a=H(si)}catch{return phe(n,t),n.apply(this,r)}for(let l=0;l<arguments.length;l++)typeof r[l]=="function"&&(e&&(i||=Rh(()=>o.add())),r[l]=ghe(r[l],i,a));let c=mhe(()=>n.apply(this,r));return e?c instanceof bt?c.pipe(iu(s.outsideAngular),nu(s.insideAngular),Z8(a)):c instanceof Promise?Rh(()=>{let l=o.add();return new Promise((u,d)=>{c.then(h=>Wi(a,()=>Rh(()=>u(h))),h=>Wi(a,()=>Rh(()=>d(h)))).finally(l)})}):typeof c=="function"&&i?function(){return setTimeout(i,0),c.apply(this,arguments)}:Rh(()=>c):c instanceof bt?c.pipe(iu(s.outsideAngular),nu(s.insideAngular)):Rh(()=>c)});var Xc=class{constructor(e){return e}},Ph=class{constructor(){return fI()}};function _he(n){return n&&n.length===1?n[0]:new Xc(Dh())}var mN=new Ce("angularfire2._apps"),yhe={provide:Xc,useFactory:_he,deps:[[new Ts,mN]]},vhe={provide:Ph,deps:[[new Ts,mN]]};function bhe(n){return(e,t)=>{let i=t.get(Vc);Ai("angularfire",Du.full,"core"),Ai("angularfire",Du.full,"app"),Ai("angular",CR.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Xc(r)}}function n9(n,...e){return br([yhe,vhe,{provide:mN,useFactory:bhe(n),multi:!0,deps:[Ct,Qt,Ru,...e]}])}var i9=xi(pN,!0);var xhe=new Map,whe={activated:!1,tokenObservers:[]},Ehe={initialized:!1,enabled:!1};function na(n){return xhe.get(n)||Object.assign({},whe)}function a9(){return Ehe}var Ihe="https://content-firebaseappcheck.googleapis.com/v1";var She="exchangeDebugToken",r9={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},v$e=1440*60*1e3;var yN=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ah,this.pending.promise.catch(t=>{}),await The(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ah,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function The(n){return new Promise(e=>{setTimeout(e,n)})}var Che={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pu=new ea("appCheck","AppCheck",Che);function c9(n){if(!na(n).activated)throw Pu.create("use-before-activation",{appName:n.name})}async function l9({url:n,body:e},t){let i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){let d=await r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}let s={method:"POST",body:JSON.stringify(e),headers:i},o;try{o=await fetch(n,s)}catch(d){throw Pu.create("fetch-network-error",{originalErrorMessage:d?.message})}if(o.status!==200)throw Pu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Pu.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Pu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function u9(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Ihe}/projects/${t}/apps/${i}:${She}?key=${r}`,body:{debug_token:e}}}var Ahe="firebase-app-check-database",Mhe=1,vN="firebase-app-check-store";var mI=null;function Dhe(){return mI||(mI=new Promise((n,e)=>{try{let t=indexedDB.open(Ahe,Mhe);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Pu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(vN,{keyPath:"compositeKey"})}}}catch(t){e(Pu.create("storage-open",{originalErrorMessage:t?.message}))}}),mI)}function Rhe(n,e){return Phe(khe(n),e)}async function Phe(n,e){let i=(await Dhe()).transaction(vN,"readwrite"),s=i.objectStore(vN).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(Pu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function khe(n){return`${n.options.appId}-${n.name}`}var sv=new Ga("@firebase/app-check");function gN(n,e){return tv()?Rhe(n,e).catch(t=>{sv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function d9(){return a9().enabled}async function h9(){let n=a9();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Nhe={error:"UNKNOWN_ERROR"};function Ohe(n){return sI.encodeString(JSON.stringify(n),!1)}async function bN(n,e=!1,t=!1){let i=n.app;c9(i);let r=na(i),s=r.token,o;if(s&&!ov(s)&&(r.token=void 0,s=void 0),!s){let l=await r.cachedTokenPromise;l&&(ov(l)?s=l:await gN(i,void 0))}if(!e&&s&&ov(s))return{token:s.token};let a=!1;if(d9())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=l9(u9(i,await h9()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let l=await r.exchangeTokenPromise;return await gN(i,l),r.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sv.warn(l.message):t&&sv.error(l),_N(l)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),s=await na(i).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sv.warn(l.message):t&&sv.error(l),o=l}let c;return s?o?ov(s)?c={token:s.token,internalError:o}:c=_N(o):(c={token:s.token},r.token=s,await gN(i,s)):c=_N(o),a&&Uhe(i,c),c}async function Lhe(n){let e=n.app;c9(e);let{provider:t}=na(e);if(d9()){let i=await h9(),{token:r}=await l9(u9(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=await t.getToken();return{token:i}}}function Fhe(n,e,t,i){let{app:r}=n,s=na(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ov(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),s9(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>s9(n))}function f9(n,e){let t=na(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function s9(n){let{app:e}=n,t=na(e),i=t.tokenRefresher;i||(i=Vhe(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Vhe(n){let{app:e}=n;return new yN(async()=>{let t=na(e),i;if(t.token?i=await bN(n,!0):i=await bN(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let t=na(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},r9.RETRIAL_MIN_WAIT,r9.RETRIAL_MAX_WAIT)}function Uhe(n,e){let t=na(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ov(n){return n.expireTimeMillis-Date.now()>0}function _N(n){return{token:Ohe(Nhe),error:n}}var xN=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=na(this.app);for(let t of e)f9(this.app,t.next);return Promise.resolve()}};function Bhe(n,e){return new xN(n,e)}function zhe(n){return{getToken:e=>bN(n,e),getLimitedUseToken:()=>Lhe(n),addTokenListener:e=>Fhe(n,"INTERNAL",e),removeTokenListener:e=>f9(n.app,e)}}var Hhe="@firebase/app-check",jhe="0.10.1";var Ghe="app-check",o9="app-check-internal";function Whe(){ta(new gs(Ghe,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Bhe(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(o9).initialize()})),ta(new gs(o9,n=>{let e=n.getProvider("app-check").getImmediate();return zhe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ai(Hhe,jhe)}Whe();var $he="app-check";var im=class{constructor(){return nm($he)}};var qhe=["localhost","0.0.0.0","127.0.0.1"],R$e=typeof window<"u"&&qhe.includes(window.location.hostname);var p9=()=>{};var m9=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Khe=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},g9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(h=64)),i.push(t[u],t[d],t[h],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(m9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Khe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new EN;let h=s<<2|a>>4;if(i.push(h),l!==64){let p=a<<4&240|l>>2;if(i.push(p),d!==64){let _=l<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},EN=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Xhe=function(n){let e=m9(n);return g9.encodeByteArray(e,!0)},SN=function(n){return Xhe(n).replace(/\./g,"")},gI=function(n){try{return g9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Yhe=()=>_9().__FIREBASE_DEFAULTS__,Qhe=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Jhe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&gI(n[1]);return e&&JSON.parse(e)},y9=()=>{try{return p9()||Yhe()||Qhe()||Jhe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var v9=n=>y9()?.[`_${n}`];function av(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function no(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(no())}function Zhe(){let n=y9()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w9(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function E9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I9(){return!Zhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TN(){try{return typeof indexedDB=="object"}catch{return!1}}function S9(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var efe="FirebaseError",wo=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=efe,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}},Yc=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?tfe(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new wo(r,a,i)}};function tfe(n,e){return n.replace(nfe,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var nfe=/\{\$([^}]+)}/g;function CN(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function T9(n,e){let t=new IN(n,e);return t.subscribe.bind(t)}var IN=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ife(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=wN),r.error===void 0&&(r.error=wN),r.complete===void 0&&(r.complete=wN);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ife(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wN(){}var L$e=14400*1e3;function ku(n){return n&&n._delegate?n._delegate:n}var ia=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rfe=[],mn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(mn||{}),sfe={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},ofe=mn.INFO,afe={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},cfe=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=afe[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nu=class{constructor(e){this.name=e,this._logLevel=ofe,this._logHandler=cfe,this._userLogHandler=null,rfe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}};var MN=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lfe(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function lfe(n){return n.getComponent()?.type==="VERSION"}var DN="@firebase/app",C9="0.14.6";var Jc=new Nu("@firebase/app"),ufe="@firebase/app-compat",dfe="@firebase/analytics-compat",hfe="@firebase/analytics",ffe="@firebase/app-check-compat",pfe="@firebase/app-check",mfe="@firebase/auth",gfe="@firebase/auth-compat",_fe="@firebase/database",yfe="@firebase/data-connect",vfe="@firebase/database-compat",bfe="@firebase/functions",xfe="@firebase/functions-compat",wfe="@firebase/installations",Efe="@firebase/installations-compat",Ife="@firebase/messaging",Sfe="@firebase/messaging-compat",Tfe="@firebase/performance",Cfe="@firebase/performance-compat",Afe="@firebase/remote-config",Mfe="@firebase/remote-config-compat",Dfe="@firebase/storage",Rfe="@firebase/storage-compat",Pfe="@firebase/firestore",kfe="@firebase/ai",Nfe="@firebase/firestore-compat",Ofe="firebase",Lfe="12.6.0";var Ffe={[DN]:"fire-core",[ufe]:"fire-core-compat",[hfe]:"fire-analytics",[dfe]:"fire-analytics-compat",[pfe]:"fire-app-check",[ffe]:"fire-app-check-compat",[mfe]:"fire-auth",[gfe]:"fire-auth-compat",[_fe]:"fire-rtdb",[yfe]:"fire-data-connect",[vfe]:"fire-rtdb-compat",[bfe]:"fire-fn",[xfe]:"fire-fn-compat",[wfe]:"fire-iid",[Efe]:"fire-iid-compat",[Ife]:"fire-fcm",[Sfe]:"fire-fcm-compat",[Tfe]:"fire-perf",[Cfe]:"fire-perf-compat",[Afe]:"fire-rc",[Mfe]:"fire-rc-compat",[Dfe]:"fire-gcs",[Rfe]:"fire-gcs-compat",[Pfe]:"fire-fst",[Nfe]:"fire-fst-compat",[kfe]:"fire-vertex","fire-js":"fire-js",[Ofe]:"fire-js-all"};var Vfe=new Map,Ufe=new Map,A9=new Map;function M9(n,e){try{n.container.addComponent(e)}catch(t){Jc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ou(n){let e=n.name;if(A9.has(e))return Jc.debug(`There were multiple attempts to register component ${e}.`),!1;A9.set(e,n);for(let t of Vfe.values())M9(t,n);for(let t of Ufe.values())M9(t,n);return!0}function Zc(n){return n==null?!1:n.settings!==void 0}var Bfe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kN=new Yc("app","Firebase",Bfe);var rm=Lfe;function Qc(n,e,t){let i=Ffe[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){let o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jc.warn(o.join(" "));return}Ou(new ia(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var zfe="firebase-heartbeat-database",Hfe=1,cv="firebase-heartbeat-store",AN=null;function N9(){return AN||(AN=hI(zfe,Hfe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cv)}catch(t){console.warn(t)}}}}).catch(n=>{throw kN.create("idb-open",{originalErrorMessage:n.message})})),AN}async function jfe(n){try{let t=(await N9()).transaction(cv),i=await t.objectStore(cv).get(O9(n));return await t.done,i}catch(e){if(e instanceof wo)Jc.warn(e.message);else{let t=kN.create("idb-get",{originalErrorMessage:e?.message});Jc.warn(t.message)}}}async function D9(n,e){try{let i=(await N9()).transaction(cv,"readwrite");await i.objectStore(cv).put(e,O9(n)),await i.done}catch(t){if(t instanceof wo)Jc.warn(t.message);else{let i=kN.create("idb-set",{originalErrorMessage:t?.message});Jc.warn(i.message)}}}function O9(n){return`${n.name}!${n.options.appId}`}var Gfe=1024,Wfe=30,RN=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new PN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R9();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Wfe){let r=qfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=R9(),{heartbeatsToSend:t,unsentEntries:i}=$fe(this._heartbeatsCache.heartbeats),r=SN(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Jc.warn(e),""}}};function R9(){return new Date().toISOString().substring(0,10)}function $fe(n,e=Gfe){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),P9(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),P9(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var PN=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TN()?S9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await jfe(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return D9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return D9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function P9(n){return SN(JSON.stringify({version:2,heartbeats:n})).length}function qfe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Kfe(n){Ou(new ia("platform-logger",e=>new MN(e),"PRIVATE")),Ou(new ia("heartbeat",e=>new RN(e),"PRIVATE")),Qc(DN,C9,n),Qc(DN,C9,"esm2020"),Qc("fire-js","")}Kfe("");function j9(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var G9=j9,W9=new Yc("auth","Firebase",j9());var bI=new Nu("@firebase/auth");function Zfe(n,...e){bI.logLevel<=mn.WARN&&bI.warn(`Auth (${rm}): ${n}`,...e)}function yI(n,...e){bI.logLevel<=mn.ERROR&&bI.error(`Auth (${rm}): ${n}`,...e)}function L9(n,...e){throw WN(n,...e)}function GN(n,...e){return WN(n,...e)}function $9(n,e,t){let i=lt(ie({},G9()),{[e]:t});return new Yc("auth","Firebase",i).create(e,{appName:n.name})}function vI(n){return $9(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WN(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return W9.create(n,...e)}function Kn(n,e,...t){if(!n)throw WN(e,...t)}function lv(n){let e="INTERNAL ASSERTION FAILED: "+n;throw yI(e),new Error(e)}function xI(n,e){n||lv(e)}function epe(){return F9()==="http:"||F9()==="https:"}function F9(){return typeof self<"u"&&self.location?.protocol||null}function tpe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(epe()||w9()||"connection"in navigator)?navigator.onLine:!0}function npe(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Oh=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,xI(t>e,"Short delay should be less than long delay!"),this.isMobile=b9()||E9()}get(){return tpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ipe(n,e){xI(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wI=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var spe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ope=new Oh(3e4,6e4);function q9(n,e){return n.tenantId&&!e.tenantId?lt(ie({},e),{tenantId:n.tenantId}):e}async function CI(n,e,t,i,r={}){return K9(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=CN(ie({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=ie({method:e,headers:c},s);return x9()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&av(n.emulatorConfig.host)&&(l.credentials="include"),wI.fetch()(await X9(n,n.config.apiHost,t,a),l)})}async function K9(n,e,t){n._canInitEmulator=!1;let i=ie(ie({},rpe),e);try{let r=new LN(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw _I(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _I(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw _I(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw _I(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $9(n,u,l);L9(n,u)}}catch(r){if(r instanceof wo)throw r;L9(n,"network-request-failed",{message:String(r)})}}async function X9(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?ipe(n.config,r):`${n.config.apiScheme}://${r}`;return spe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var LN=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(GN(this.auth,"network-request-failed")),ope.get())})}};function _I(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=GN(n,e,i);return r.customData._tokenResponse=t,r}async function ape(n,e){return CI(n,"POST","/v1/accounts:delete",e)}async function EI(n,e){return CI(n,"POST","/v1/accounts:lookup",e)}function uv(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y9(n,e=!1){let t=ku(n),i=await t.getIdToken(e),r=Q9(i);Kn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:uv(NN(r.auth_time)),issuedAtTime:uv(NN(r.iat)),expirationTime:uv(NN(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function NN(n){return Number(n)*1e3}function Q9(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return yI("JWT malformed, contained fewer than 3 sections"),null;try{let r=gI(t);return r?JSON.parse(r):(yI("Failed to decode base64 JWT payload"),null)}catch(r){return yI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function V9(n){let e=Q9(n);return Kn(e,"internal-error"),Kn(typeof e.exp<"u","internal-error"),Kn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function FN(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof wo&&cpe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function cpe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var VN=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var hv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uv(this.lastLoginAt),this.creationTime=uv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function II(n){let e=n.auth,t=await n.getIdToken(),i=await FN(n,EI(e,{idToken:t}));Kn(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let s=r.providerUserInfo?.length?Z9(r.providerUserInfo):[],o=lpe(n.providerData,s),a=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!o?.length,l=a?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new hv(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function J9(n){let e=ku(n);await II(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lpe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Z9(n){return n.map(i=>{var r=i,{providerId:e}=r,t=vx(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function upe(n,e){let t=await K9(n,{},async()=>{let i=CN({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await X9(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&av(n.emulatorConfig.host)&&(c.credentials="include"),wI.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dpe(n,e){return CI(n,"POST","/v2/accounts:revokeToken",q9(n,e))}var dv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kn(e.idToken,"internal-error"),Kn(typeof e.idToken<"u","internal-error"),Kn(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kn(e.length!==0,"internal-error");let t=V9(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await upe(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Kn(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Kn(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Kn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return lv("not implemented")}};function Lu(n,e){Kn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var kh=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:i}=o,r=vx(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new hv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await FN(this,this.stsTokenManager.getToken(this.auth,e));return Kn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Y9(this,e)}reload(){return J9(this)}_assign(e){this!==e&&(Kn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>ie({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(lt(ie({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Kn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await II(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zc(this.auth.app))return Promise.reject(vI(this.auth));let e=await this.getIdToken();return await FN(this,ape(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return lt(ie({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>ie({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:_,stsTokenManager:b}=t;Kn(d&&b,e,"internal-error");let g=dv.fromJSON(this.name,b);Kn(typeof d=="string",e,"internal-error"),Lu(i,e.name),Lu(r,e.name),Kn(typeof h=="boolean",e,"internal-error"),Kn(typeof p=="boolean",e,"internal-error"),Lu(s,e.name),Lu(o,e.name),Lu(a,e.name),Lu(c,e.name),Lu(l,e.name),Lu(u,e.name);let v=new n({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:g,createdAt:l,lastLoginAt:u});return _&&Array.isArray(_)&&(v.providerData=_.map(R=>ie({},R))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,t,i=!1){let r=new dv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await II(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];Kn(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Z9(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new dv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new hv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var U9=new Map;function Nh(n){xI(n instanceof Function,"Expected a class definition");let e=U9.get(n);return e?(xI(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,U9.set(n,e),e)}var hpe=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),UN=hpe;function ON(n,e,t){return`firebase:${n}:${e}:${t}`}var SI=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=ON(this.userKey,r.apiKey,s),this.fullPersistenceKey=ON("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await EI(this.auth,{idToken:e}).catch(()=>{});return t?kh._fromGetAccountInfoResponse(this.auth,t,e):null}return kh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(Nh(UN),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||Nh(UN),o=ON(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await EI(e,{idToken:u}).catch(()=>{});if(!h)break;d=await kh._fromGetAccountInfoResponse(e,h,u)}else d=kh._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function B9(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gpe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fpe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ype(e))return"Blackberry";if(vpe(e))return"Webos";if(ppe(e))return"Safari";if((e.includes("chrome/")||mpe(e))&&!e.includes("edge/"))return"Chrome";if(_pe(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function fpe(n=no()){return/firefox\//i.test(n)}function ppe(n=no()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mpe(n=no()){return/crios\//i.test(n)}function gpe(n=no()){return/iemobile/i.test(n)}function _pe(n=no()){return/android/i.test(n)}function ype(n=no()){return/blackberry/i.test(n)}function vpe(n=no()){return/webos/i.test(n)}function eG(n,e=[]){let t;switch(n){case"Browser":t=B9(no());break;case"Worker":t=`${B9(no())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rm}/${i}`}var BN=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function bpe(n,e={}){return CI(n,"GET","/v2/passwordPolicy",q9(n,e))}var xpe=6,zN=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xpe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var HN=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TI(this),this.idTokenSubscription=new TI(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W9,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nh(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await SI.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await EI(this,{idToken:e}),i=await kh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zc(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Kn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await II(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=npe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zc(this.app))return Promise.reject(vI(this));let t=e?ku(e):null;return t&&Kn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zc(this.app)?Promise.reject(vI(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zc(this.app)?Promise.reject(vI(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await bpe(this),t=new zN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dpe(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Nh(e)||this._popupRedirectResolver;Kn(t,this,"argument-error"),this.redirectPersistenceManager=await SI.create(this,[Nh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Zc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Zfe(`Error while retrieving App Check token: ${e.error}`),e?.token}};function wpe(n){return ku(n)}var TI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=T9(t=>this.observer=t)}get next(){return Kn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Epe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ipe(n){Epe=n}function Spe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Tpe(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Nh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function $N(n,e,t,i){return ku(n).onIdTokenChanged(e,t,i)}var dqe=Spe("rcb"),hqe=new Oh(3e4,6e4);var fqe=new Oh(2e3,1e4);var pqe=600*1e3;var mqe=new Oh(3e4,6e4);var gqe=new Oh(5e3,15e3);var _qe=encodeURIComponent("fac");var z9="@firebase/auth",H9="1.11.1";var jN=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Cpe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ape(n){Ou(new ia("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Kn(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eG(n)},l=new HN(i,r,s,c);return Tpe(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ou(new ia("auth-internal",e=>{let t=wpe(e.getProvider("auth").getImmediate());return(i=>new jN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qc(z9,H9,Cpe(n)),Qc(z9,H9,"esm2020")}var Mpe=300,yqe=v9("authIdTokenMaxAge")||Mpe;function Dpe(){return document.getElementsByTagName("head")?.[0]??document}Ipe({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=GN("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Dpe().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ape("Browser");function tG(n){return new bt(function(e){var t=$N(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function gG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _G=gG,yG=new ea("auth","Firebase",gG());var kI=new Ga("@firebase/auth");function kpe(n,...e){kI.logLevel<=pn.WARN&&kI.warn(`Auth (${Mu}): ${n}`,...e)}function MI(n,...e){kI.logLevel<=pn.ERROR&&kI.error(`Auth (${Mu}): ${n}`,...e)}function qa(n,...e){throw uO(n,...e)}function ra(n,...e){return uO(n,...e)}function lO(n,e,t){let i=Object.assign(Object.assign({},_G()),{[e]:t});return new ea("auth","Firebase",i).create(e,{appName:n.name})}function Lh(n){return lO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Npe(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&qa(n,"argument-error"),lO(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uO(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yG.create(n,...e)}function Vt(n,e,...t){if(!n)throw uO(e,...t)}function el(n){let e="INTERNAL ASSERTION FAILED: "+n;throw MI(e),new Error(e)}function nl(n,e){n||el(e)}function XN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Ope(){return nG()==="http:"||nG()==="https:"}function nG(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Lpe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ope()||k8()||"connection"in navigator)?navigator.onLine:!0}function Fpe(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Fh=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,nl(t>e,"Short delay should be less than long delay!"),this.isMobile=R8()||N8()}get(){return Lpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dO(n,e){nl(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var NI=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;el("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;el("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;el("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Vpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Upe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bpe=new Fh(3e4,6e4);function hO(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function om(n,e,t,i,r={}){return vG(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});let a=Zp(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return P8()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Cu(n.emulatorConfig.host)&&(l.credentials="include"),NI.fetch()(await bG(n,n.config.apiHost,t,a),l)})}async function vG(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Vpe),e);try{let r=new YN(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw AI(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw AI(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw AI(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw AI(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lO(n,u,l);qa(n,u)}}catch(r){if(r instanceof eo)throw r;qa(n,"network-request-failed",{message:String(r)})}}async function zpe(n,e,t,i,r={}){let s=await om(n,e,t,i,r);return"mfaPendingCredential"in s&&qa(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function bG(n,e,t,i){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?dO(n.config,r):`${n.config.apiScheme}://${r}`;return Upe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var YN=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ra(this.auth,"network-request-failed")),Bpe.get())})}};function AI(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=ra(n,e,i);return r.customData._tokenResponse=t,r}async function Hpe(n,e){return om(n,"POST","/v1/accounts:delete",e)}async function OI(n,e){return om(n,"POST","/v1/accounts:lookup",e)}function fv(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fO(n,e=!1){let t=er(n),i=await t.getIdToken(e),r=pO(i);Vt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:fv(qN(r.auth_time)),issuedAtTime:fv(qN(r.iat)),expirationTime:fv(qN(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function qN(n){return Number(n)*1e3}function pO(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return MI("JWT malformed, contained fewer than 3 sections"),null;try{let r=oI(t);return r?JSON.parse(r):(MI("Failed to decode base64 JWT payload"),null)}catch(r){return MI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function iG(n){let e=pO(n);return Vt(e,"internal-error"),Vt(typeof e.exp<"u","internal-error"),Vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mv(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof eo&&jpe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function jpe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var QN=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var gv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fv(this.lastLoginAt),this.creationTime=fv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function LI(n){var e;let t=n.auth,i=await n.getIdToken(),r=await mv(n,OI(t,{idToken:i}));Vt(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xG(s.providerUserInfo):[],a=Gpe(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function mO(n){let e=er(n);await LI(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gpe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function xG(n){return n.map(e=>{var{providerId:t}=e,i=Ox(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Wpe(n,e){let t=await vG(n,{},async()=>{let i=Zp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=await bG(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&Cu(n.emulatorConfig.host)&&(c.credentials="include"),NI.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $pe(n,e){return om(n,"POST","/v2/accounts:revokeToken",hO(n,e))}var pv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vt(e.idToken,"internal-error"),Vt(typeof e.idToken<"u","internal-error"),Vt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Vt(e.length!==0,"internal-error");let t=iG(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await Wpe(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Vt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Vt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Vt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return el("not implemented")}};function Fu(n,e){Vt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Vu=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Ox(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await mv(this,this.stsTokenManager.getToken(this.auth,e));return Vt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fO(this,e)}reload(){return mO(this)}_assign(e){this!==e&&(Vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await LI(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(to(this.auth.app))return Promise.reject(Lh(this.auth));let e=await this.getIdToken();return await mv(this,Hpe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;let d=(i=t.displayName)!==null&&i!==void 0?i:void 0,h=(r=t.email)!==null&&r!==void 0?r:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(a=t.tenantId)!==null&&a!==void 0?a:void 0,g=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=t.createdAt)!==null&&l!==void 0?l:void 0,R=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:P,emailVerified:N,isAnonymous:U,providerData:O,stsTokenManager:I}=t;Vt(P&&I,e,"internal-error");let w=pv.fromJSON(this.name,I);Vt(typeof P=="string",e,"internal-error"),Fu(d,e.name),Fu(h,e.name),Vt(typeof N=="boolean",e,"internal-error"),Vt(typeof U=="boolean",e,"internal-error"),Fu(p,e.name),Fu(_,e.name),Fu(b,e.name),Fu(g,e.name),Fu(v,e.name),Fu(R,e.name);let y=new n({uid:P,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:U,photoURL:_,phoneNumber:p,tenantId:b,stsTokenManager:w,createdAt:v,lastLoginAt:R});return O&&Array.isArray(O)&&(y.providerData=O.map(x=>Object.assign({},x))),g&&(y._redirectEventId=g),y}static async _fromIdTokenResponse(e,t,i=!1){let r=new pv;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await LI(s),s}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];Vt(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?xG(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new pv;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new gv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var rG=new Map;function tl(n){nl(n instanceof Function,"Expected a class definition");let e=rG.get(n);return e?(nl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rG.set(n,e),e)}var qpe=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),JN=qpe;function DI(n,e,t){return`firebase:${n}:${e}:${t}`}var FI=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=DI(this.userKey,r.apiKey,s),this.fullPersistenceKey=DI("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await OI(this.auth,{idToken:e}).catch(()=>{});return t?Vu._fromGetAccountInfoResponse(this.auth,t,e):null}return Vu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(tl(JN),e,i);let r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=r[0]||tl(JN),o=DI(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let d;if(typeof u=="string"){let h=await OI(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Vu._fromGetAccountInfoResponse(e,h,u)}else d=Vu._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,i))}};function sG(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CG(e))return"Blackberry";if(AG(e))return"Webos";if(EG(e))return"Safari";if((e.includes("chrome/")||IG(e))&&!e.includes("edge/"))return"Chrome";if(TG(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function wG(n=Sr()){return/firefox\//i.test(n)}function EG(n=Sr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IG(n=Sr()){return/crios\//i.test(n)}function SG(n=Sr()){return/iemobile/i.test(n)}function TG(n=Sr()){return/android/i.test(n)}function CG(n=Sr()){return/blackberry/i.test(n)}function AG(n=Sr()){return/webos/i.test(n)}function gO(n=Sr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Kpe(n=Sr()){var e;return gO(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xpe(){return O8()&&document.documentMode===10}function MG(n=Sr()){return gO(n)||TG(n)||AG(n)||CG(n)||/windows phone/i.test(n)||SG(n)}function DG(n,e=[]){let t;switch(n){case"Browser":t=sG(Sr());break;case"Worker":t=`${sG(Sr())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mu}/${i}`}var ZN=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Ype(n,e={}){return om(n,"GET","/v2/passwordPolicy",hO(n,e))}var Qpe=6,eO=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Qpe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var tO=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VI(this),this.idTokenSubscription=new VI(this),this.beforeStateQueue=new ZN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tl(t)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await FI.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await OI(this,{idToken:e}),i=await Vu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(to(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await LI(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fpe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(to(this.app))return Promise.reject(Lh(this));let t=e?er(e):null;return t&&Vt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return to(this.app)?Promise.reject(Lh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return to(this.app)?Promise.reject(Lh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Ype(this),t=new eO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ea("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await $pe(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&tl(e)||this._popupRedirectResolver;Vt(t,this,"argument-error"),this.redirectPersistenceManager=await FI.create(this,[tl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(to(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&kpe(`Error while retrieving App Check token: ${t.error}`),t?.token}};function $I(n){return er(n)}var VI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=U8(t=>this.observer=t)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _O={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jpe(n){_O=n}function Zpe(n){return _O.loadJS(n)}function eme(){return _O.gapiScript}function RG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function yO(n,e){let t=em(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(ja(s,e??{}))return r;qa(r,"already-initialized")}return t.initialize({options:e})}function tme(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(tl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function vO(n,e,t){let i=$I(n);Vt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=PG(e),{host:o,port:a}=nme(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Vt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Vt(ja(l,i.config.emulator)&&ja(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Cu(o)?(cI(`${s}//${o}${c}`),lI("Auth",!0)):r||ime()}function PG(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nme(n){let e=PG(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:oG(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:oG(o)}}}function oG(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ime(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var _v=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return el("not implemented")}_getIdTokenResponse(e){return el("not implemented")}_linkToIdToken(e,t){return el("not implemented")}_getReauthenticationResolver(e){return el("not implemented")}};async function sm(n,e){return zpe(n,"POST","/v1/accounts:signInWithIdp",hO(n,e))}var rme="http://localhost",UI=class n extends _v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Ox(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return sm(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,sm(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,sm(e,t)}buildRequest(){let e={requestUri:rme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zp(t)}return e}};var yv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var BI=class extends yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var bO=(()=>{class n extends BI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return UI._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var vv=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){let s=await Vu._fromIdTokenResponse(e,i,r),o=aG(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let r=aG(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})}};function aG(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var nO=class n extends eo{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function kG(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nO._fromErrorAndOperation(n,s,e,i):s})}async function sme(n,e,t=!1){let i=await mv(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return vv._forOperation(n,"link",i)}async function ome(n,e,t=!1){let{auth:i}=n;if(to(i.app))return Promise.reject(Lh(i));let r="reauthenticate";try{let s=await mv(n,kG(i,r,e,n),t);Vt(s.idToken,i,"internal-error");let o=pO(s.idToken);Vt(o,i,"internal-error");let{sub:a}=o;return Vt(n.uid===a,i,"user-mismatch"),vv._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&qa(i,"user-mismatch"),s}}async function ame(n,e,t=!1){if(to(n.app))return Promise.reject(Lh(n));let i="signIn",r=await kG(n,i,e),s=await vv._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}function xO(n,e,t,i){return er(n).onIdTokenChanged(e,t,i)}function wO(n,e,t){return er(n).beforeAuthStateChanged(e,t)}function EO(n){return er(n).signOut()}var zI="__sak";var HI=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zI,"1"),this.storage.removeItem(zI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cme=1e3,lme=10,ume=(()=>{class n extends HI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MG(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);Xpe()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,lme):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},cme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){let i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),NG=ume;var dme=(()=>{class n extends HI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),IO=dme;function hme(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var fme=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(async u=>u(i.origin,o)),l=await hme(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function SO(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var iO=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=SO("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function $a(){return window}function pme(n){$a().location.href=n}function OG(){return typeof $a().WorkerGlobalScope<"u"&&typeof $a().importScripts=="function"}async function mme(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gme(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _me(){return OG()?self:null}var LG="firebaseLocalStorageDb",yme=1,jI="firebaseLocalStorage",FG="fbase_key",Vh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function qI(n,e){return n.transaction([jI],e?"readwrite":"readonly").objectStore(jI)}function vme(){let n=indexedDB.deleteDatabase(LG);return new Vh(n).toPromise()}function rO(){let n=indexedDB.open(LG,yme);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(jI,{keyPath:FG})}catch(r){t(r)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(jI)?e(i):(i.close(),await vme(),e(await rO()))})})}async function cG(n,e,t){let i=qI(n,!0).put({[FG]:e,value:t});return new Vh(i).toPromise()}async function bme(n,e){let t=qI(n,!1).get(e),i=await new Vh(t).toPromise();return i===void 0?null:i.value}function lG(n,e){let t=qI(n,!0).delete(e);return new Vh(t).toPromise()}var xme=800,wme=3,Eme=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rO(),this.db)}async _withRetries(t){let i=0;for(;;)try{let r=await this._openDb();return await t(r)}catch(r){if(i++>wme)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fme._getInstance(_me()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await mme(),!this.activeServiceWorker)return;this.sender=new iO(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await rO();return await cG(t,zI,"1"),await lG(t,zI),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>cG(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){let i=await this._withRetries(r=>bme(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lG(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=qI(s,!1).getAll();return new Vh(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),VG=Eme;var lKe=RG("rcb"),uKe=new Fh(3e4,6e4);function UG(n,e){return e?tl(e):(Vt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var bv=class extends _v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Ime(n){return ame(n.auth,new bv(n),n.bypassAuthState)}function Sme(n){let{auth:e,user:t}=n;return Vt(t,e,"internal-error"),ome(t,new bv(n),n.bypassAuthState)}async function Tme(n){let{auth:e,user:t}=n;return Vt(t,e,"internal-error"),sme(t,new bv(n),n.bypassAuthState)}var GI=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ime;case"linkViaPopup":case"linkViaRedirect":return Tme;case"reauthViaPopup":case"reauthViaRedirect":return Sme;default:qa(this.auth,"internal-error")}}resolve(e){nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Cme=new Fh(2e3,1e4);async function TO(n,e,t){if(to(n.app))return Promise.reject(ra(n,"operation-not-supported-in-this-environment"));let i=$I(n);Npe(n,e,yv);let r=UG(i,t);return new Ame(i,"signInViaPopup",e,r).executeNotNull()}var Ame=(()=>{class n extends GI{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Vt(t,this.auth,"internal-error"),t}async onExecution(){nl(this.filter.length===1,"Popup operations only handle one event");let t=SO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ra(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ra(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Cme.get())};t()}}n.currentPopupAction=null;return n})(),Mme="pendingRedirect",RI=new Map,sO=class extends GI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=RI.get(this.auth._key());if(!e){try{let i=await Dme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}RI.set(this.auth._key(),e)}return this.bypassAuthState||RI.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Dme(n,e){let t=kme(e),i=Pme(n);if(!await i._isAvailable())return!1;let r=await i._get(t)==="true";return await i._remove(t),r}function Rme(n,e){RI.set(n._key(),e)}function Pme(n){return tl(n._redirectPersistence)}function kme(n){return DI(Mme,n.config.apiKey,n.name)}async function Nme(n,e,t=!1){if(to(n.app))return Promise.reject(Lh(n));let i=$I(n),r=UG(i,e),o=await new sO(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}var Ome=600*1e3,oO=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lme(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!BG(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ra(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ome&&this.cachedEventUids.clear(),this.cachedEventUids.has(uG(e))}saveEventToCache(e){this.cachedEventUids.add(uG(e)),this.lastProcessedEventTime=Date.now()}};function uG(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BG({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Lme(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BG(n);default:return!1}}async function Fme(n,e={}){return om(n,"GET","/v1/projects",e)}var Vme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ume=/^https?/;async function Bme(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Fme(n);for(let t of e)try{if(zme(t))return}catch{}qa(n,"unauthorized-domain")}function zme(n){let e=XN(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Ume.test(t))return!1;if(Vme.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var Hme=new Fh(3e4,6e4);function dG(){let n=$a().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jme(n){return new Promise((e,t)=>{var i,r,s;function o(){dG(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dG(),t(ra(n,"network-request-failed"))},timeout:Hme.get()})}if(!((r=(i=$a().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=$a().gapi)===null||s===void 0)&&s.load)o();else{let a=RG("iframefcb");return $a()[a]=()=>{gapi.load?o():t(ra(n,"network-request-failed"))},Zpe(`${eme()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw PI=null,e})}var PI=null;function Gme(n){return PI=PI||jme(n),PI}var Wme=new Fh(5e3,15e3),$me="__/auth/iframe",qme="emulator/auth/iframe",Kme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yme(n){let e=n.config;Vt(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?dO(e,qme):`https://${n.config.authDomain}/${$me}`,i={apiKey:e.apiKey,appName:n.name,v:Mu},r=Xme.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Zp(i).slice(1)}`}async function Qme(n){let e=await Gme(n),t=$a().gapi;return Vt(t,n,"internal-error"),e.open({where:document.body,url:Yme(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kme,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});let o=ra(n,"network-request-failed"),a=$a().setTimeout(()=>{s(o)},Wme.get());function c(){$a().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}var Jme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zme=500,ege=600,tge="_blank",nge="http://localhost",WI=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ige(n,e,t,i=Zme,r=ege){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},Jme),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Sr().toLowerCase();t&&(a=IG(l)?tge:t),wG(l)&&(e=e||nge,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,_])=>`${h}${p}=${_},`,"");if(Kpe(l)&&a!=="_self")return rge(e||"",a),new WI(null);let d=window.open(e||"",a,u);Vt(d,n,"popup-blocked");try{d.focus()}catch{}return new WI(d)}function rge(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var sge="__/auth/handler",oge="emulator/auth/handler",age=encodeURIComponent("fac");async function hG(n,e,t,i,r,s){Vt(n.config.authDomain,n,"auth-domain-config-required"),Vt(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Mu,eventId:r};if(e instanceof yv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",V8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof BI){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=await n._getAppCheckToken(),l=c?`#${age}=${encodeURIComponent(c)}`:"";return`${cge(n)}?${Zp(a).slice(1)}${l}`}function cge({config:n}){return n.emulator?dO(n,oge):`https://${n.authDomain}/${sge}`}var KN="webStorageSupport",aO=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IO,this._completeRedirectFn=Nme,this._overrideRedirectResult=Rme}async _openPopup(e,t,i,r){var s;nl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await hG(e,t,i,XN(),r);return ige(e,o,SO())}async _openRedirect(e,t,i,r){await this._originValidation(e);let s=await hG(e,t,i,XN(),r);return pme(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(nl(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Qme(e),i=new oO(e);return t.register("authEvent",r=>(Vt(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(KN,{type:KN},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[KN];o!==void 0&&t(!!o),qa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Bme(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MG()||EG()||gO()}},zG=aO;var fG="@firebase/auth",pG="1.10.8";var cO=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lge(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uge(n){ta(new gs("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Vt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DG(n)},l=new tO(i,r,s,c);return tme(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ta(new gs("auth-internal",e=>{let t=$I(e.getProvider("auth").getImmediate());return(i=>new cO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(fG,pG,lge(n)),Ai(fG,pG,"esm2017")}var dge=300,hge=Zk("authIdTokenMaxAge")||dge,mG=null,fge=n=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hge)return;let r=t?.token;mG!==r&&(mG=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function CO(n=Dh()){let e=em(n,"auth");if(e.isInitialized())return e.getImmediate();let t=yO(n,{popupRedirectResolver:zG,persistence:[VG,NG,IO]}),i=Zk("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=fge(s.toString());wO(t,o,()=>o(t.currentUser)),xO(t,a=>o(a))}}let r=Qk("auth");return r&&vO(t,`http://${r}`),t}function pge(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Jpe({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=ra("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",pge().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uge("Browser");var HG="auth",sa=class{constructor(e){return e}},xv=class{constructor(){return nm(HG)}};var AO=new Ce("angularfire2.auth-instances");function s_e(n,e){let t=rv(HG,n,e);return t&&new sa(t)}function o_e(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new sa(i)}}var a_e={provide:xv,deps:[[new Ts,AO]]},c_e={provide:sa,useFactory:s_e,deps:[[new Ts,AO],Xc]};function jG(n,...e){return Ai("angularfire",Du.full,"auth"),br([c_e,a_e,{provide:AO,useFactory:o_e(n),multi:!0,deps:[Ct,Qt,Ru,Ph,[new Ts,im],...e]}])}var KI=xi(tG,!0);var GG=xi(CO,!0);var WG=xi(TO,!0,2);var $G=xi(EO,!0,2);var qG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KG={};var il,MO;(function(){var n;function e(I,w){function y(){}y.prototype=w.prototype,I.F=w.prototype,I.prototype=new y,I.prototype.constructor=I,I.D=function(x,T,M){for(var C=Array(arguments.length-2),re=2;re<arguments.length;re++)C[re-2]=arguments[re];return w.prototype[T].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,y){y||(y=0);let x=Array(16);if(typeof w=="string")for(var T=0;T<16;++T)x[T]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(T=0;T<16;++T)x[T]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=I.g[0],y=I.g[1],T=I.g[2];let M=I.g[3],C;C=w+(M^y&(T^M))+x[0]+3614090360&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[2]+606105819&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[3]+3250441966&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[6]+2821735955&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[7]+4249261313&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[10]+4294925233&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[11]+2304563134&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[14]+2792965006&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[15]+1236535329&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(T^M&(y^T))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[11]+643717713&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[0]+3921069994&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[15]+3634488961&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[4]+3889429448&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[3]+4107603335&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[8]+1163531501&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[7]+1735328473&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[12]+2368359562&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(y^T^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[11]+1839030562&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[14]+4259657740&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[7]+4139469664&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[10]+3200236656&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[3]+3572445317&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[6]+76029189&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[15]+530742520&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[2]+3299628645&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(T^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[14]+2878612391&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[5]+4237533241&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[10]+4293915773&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[1]+2240044497&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[6]+2734768916&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[13]+1309151649&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[2]+718787259&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(T+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+M&4294967295}i.prototype.v=function(I,w){w===void 0&&(w=I.length);let y=w-this.blockSize,x=this.C,T=this.h,M=0;for(;M<w;){if(T==0)for(;M<=y;)r(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<w;)if(x[T++]=I.charCodeAt(M++),T==this.blockSize){r(this,x),T=0;break}}else for(;M<w;)if(x[T++]=I[M++],T==this.blockSize){r(this,x),T=0;break}}this.h=T,this.o+=w},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,y=0;y<4;++y)for(let x=0;x<32;x+=8)I[w++]=this.g[y]>>>x&255;return I};function s(I,w){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=w(I)}function o(I,w){this.h=w;let y=[],x=!0;for(let T=I.length-1;T>=0;T--){let M=I[T]|0;x&&M==w||(y[T]=M,x=!1)}this.g=y}var a={};function c(I){return-128<=I&&I<128?s(I,function(w){return new o([w|0],w<0?-1:0)}):new o([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return g(l(-I));let w=[],y=1;for(let x=0;I>=y;x++)w[x]=I/y|0,y*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return g(u(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let y=l(Math.pow(w,8)),x=d;for(let M=0;M<I.length;M+=8){var T=Math.min(8,I.length-M);let C=parseInt(I.substring(M,M+T),w);T<8?(T=l(Math.pow(w,T)),x=x.j(T).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),p=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-g(this).m();let I=0,w=1;for(let y=0;y<this.g.length;y++){let x=this.i(y);I+=(x>=0?x:4294967296+x)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(b(this))return"-"+g(this).toString(I);let w=l(Math.pow(I,6));var y=this;let x="";for(;;){let T=N(y,w).g;y=v(y,T.j(w));let M=((y.g.length>0?y.g[0]:y.h)>>>0).toString(I);if(y=T,_(y))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=v(this,I),b(I)?-1:_(I)?0:1};function g(I){let w=I.g.length,y=[];for(let x=0;x<w;x++)y[x]=~I.g[x];return new o(y,~I.h).add(h)}n.abs=function(){return b(this)?g(this):this},n.add=function(I){let w=Math.max(this.g.length,I.g.length),y=[],x=0;for(let T=0;T<=w;T++){let M=x+(this.i(T)&65535)+(I.i(T)&65535),C=(M>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);x=C>>>16,M&=65535,C&=65535,y[T]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function v(I,w){return I.add(g(w))}n.j=function(I){if(_(this)||_(I))return d;if(b(this))return b(I)?g(this).j(g(I)):g(g(this).j(I));if(b(I))return g(this.j(g(I)));if(this.l(p)<0&&I.l(p)<0)return l(this.m()*I.m());let w=this.g.length+I.g.length,y=[];for(var x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(let T=0;T<I.g.length;T++){let M=this.i(x)>>>16,C=this.i(x)&65535,re=I.i(T)>>>16,Q=I.i(T)&65535;y[2*x+2*T]+=C*Q,R(y,2*x+2*T),y[2*x+2*T+1]+=M*Q,R(y,2*x+2*T+1),y[2*x+2*T+1]+=C*re,R(y,2*x+2*T+1),y[2*x+2*T+2]+=M*re,R(y,2*x+2*T+2)}for(I=0;I<w;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=w;I<2*w;I++)y[I]=0;return new o(y,0)};function R(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function P(I,w){this.g=I,this.h=w}function N(I,w){if(_(w))throw Error("division by zero");if(_(I))return new P(d,d);if(b(I))return w=N(g(I),w),new P(g(w.g),g(w.h));if(b(w))return w=N(I,g(w)),new P(g(w.g),w.h);if(I.g.length>30){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;x.l(I)<=0;)y=U(y),x=U(x);var T=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!_(x);){var C=M.add(x);C.l(I)<=0&&(T=T.add(y),M=C),x=O(x,1),y=O(y,1)}return w=v(I,T.j(w)),new P(T,w)}for(T=d;I.l(w)>=0;){for(y=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=l(y),C=M.j(w);b(C)||C.l(I)>0;)y-=x,M=l(y),C=M.j(w);_(M)&&(M=h),T=T.add(M),I=v(I,C)}return new P(T,I)}n.B=function(I){return N(this,I).h},n.and=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)&I.i(x);return new o(y,this.h&I.h)},n.or=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)|I.i(x);return new o(y,this.h|I.h)},n.xor=function(I){let w=Math.max(this.g.length,I.g.length),y=[];for(let x=0;x<w;x++)y[x]=this.i(x)^I.i(x);return new o(y,this.h^I.h)};function U(I){let w=I.g.length+1,y=[];for(let x=0;x<w;x++)y[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(y,I.h)}function O(I,w){let y=w>>5;w%=32;let x=I.g.length-y,T=[];for(let M=0;M<x;M++)T[M]=w>0?I.i(M+y)>>>w|I.i(M+y+1)<<32-w:I.i(M+y);return new o(T,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,MO=KG.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,il=KG.Integer=o}).apply(typeof qG<"u"?qG:typeof self<"u"?self:typeof window<"u"?window:{});var XI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rl={};var DO,u_e,am,RO,wv,YI,PO,kO,NO;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof XI=="object"&&XI];for(var S=0;S<m.length;++S){var D=m[S];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=t(this);function r(m,S){if(S)e:{var D=i;m=m.split(".");for(var V=0;V<m.length-1;V++){var W=m[V];if(!(W in D))break e;D=D[W]}m=m[m.length-1],V=D[m],S=S(V),S!=V&&S!=null&&e(D,m,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(S){var D=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&D.push([V,S[V]]);return D}});var s=s||{},o=this||self;function a(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function c(m,S,D){return m.call.apply(m.bind,arguments)}function l(m,S,D){return l=c,l.apply(null,arguments)}function u(m,S){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function d(m,S){function D(){}D.prototype=S.prototype,m.Z=S.prototype,m.prototype=new D,m.prototype.constructor=m,m.Ob=function(V,W,ee){for(var Le=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)Le[Ft-2]=arguments[Ft];return S.prototype[W].apply(V,Le)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function p(m){let S=m.length;if(S>0){let D=Array(S);for(let V=0;V<S;V++)D[V]=m[V];return D}return[]}function _(m,S){for(let V=1;V<arguments.length;V++){let W=arguments[V];var D=typeof W;if(D=D!="object"?D:W?Array.isArray(W)?"array":D:"null",D=="array"||D=="object"&&typeof W.length=="number"){D=m.length||0;let ee=W.length||0;m.length=D+ee;for(let Le=0;Le<ee;Le++)m[D+Le]=W[Le]}else m.push(W)}}class b{constructor(S,D){this.i=S,this.j=D,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function g(m){o.setTimeout(()=>{throw m},0)}function v(){var m=I;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class R{constructor(){this.h=this.g=null}add(S,D){let V=P.get();V.set(S,D),this.h?this.h.next=V:this.g=V,this.h=V}}var P=new b(()=>new N,m=>m.reset());class N{constructor(){this.next=this.g=this.h=null}set(S,D){this.h=S,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,O=!1,I=new R,w=()=>{let m=Promise.resolve(void 0);U=()=>{m.then(y)}};function y(){for(var m;m=v();){try{m.h.call(m.g)}catch(D){g(D)}var S=P;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}O=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{let D=()=>{};o.addEventListener("test",D,S),o.removeEventListener("test",D,S)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function re(m,S){T.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}d(re,T),re.prototype.init=function(m,S){let D=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(D=="mouseover"?S=m.fromElement:D=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);let m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),ae=0;function fe(m,S,D,V,W){this.listener=m,this.proxy=null,this.src=S,this.type=D,this.capture=!!V,this.ha=W,this.key=++ae,this.da=this.fa=!1}function se(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function we(m,S,D){for(let V in m)S.call(D,m[V],V,m)}function Ae(m,S){for(let D in m)S.call(void 0,m[D],D,m)}function Ze(m){let S={};for(let D in m)S[D]=m[D];return S}let pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(m,S){let D,V;for(let W=1;W<arguments.length;W++){V=arguments[W];for(D in V)m[D]=V[D];for(let ee=0;ee<pt.length;ee++)D=pt[ee],Object.prototype.hasOwnProperty.call(V,D)&&(m[D]=V[D])}}function Bt(m){this.src=m,this.g={},this.h=0}Bt.prototype.add=function(m,S,D,V,W){let ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);let Le=ue(m,S,V,W);return Le>-1?(S=m[Le],D||(S.fa=!1)):(S=new fe(S,this.src,ee,!!V,W),S.fa=D,m.push(S)),S};function jt(m,S){let D=S.type;if(D in m.g){var V=m.g[D],W=Array.prototype.indexOf.call(V,S,void 0),ee;(ee=W>=0)&&Array.prototype.splice.call(V,W,1),ee&&(se(S),m.g[D].length==0&&(delete m.g[D],m.h--))}}function ue(m,S,D,V){for(let W=0;W<m.length;++W){let ee=m[W];if(!ee.da&&ee.listener==S&&ee.capture==!!D&&ee.ha==V)return W}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Qe={};function _t(m,S,D,V,W){if(V&&V.once)return Sn(m,S,D,V,W);if(Array.isArray(S)){for(let ee=0;ee<S.length;ee++)_t(m,S[ee],D,V,W);return null}return D=xe(D),m&&m[Q]?m.J(S,D,a(V)?!!V.capture:!!V,W):it(m,S,D,!1,V,W)}function it(m,S,D,V,W,ee){if(!S)throw Error("Invalid event type");let Le=a(W)?!!W.capture:!!W,Ft=Se(m);if(Ft||(m[me]=Ft=new Bt(m)),D=Ft.add(S,D,V,Le,ee),D.proxy)return D;if(V=Gt(),D.proxy=V,V.src=m,V.listener=D,m.addEventListener)M||(W=Le),W===void 0&&(W=!1),m.addEventListener(S.toString(),V,W);else if(m.attachEvent)m.attachEvent(B(S.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Gt(){function m(D){return S.call(m.src,m.listener,D)}let S=be;return m}function Sn(m,S,D,V,W){if(Array.isArray(S)){for(let ee=0;ee<S.length;ee++)Sn(m,S[ee],D,V,W);return null}return D=xe(D),m&&m[Q]?m.K(S,D,a(V)?!!V.capture:!!V,W):it(m,S,D,!0,V,W)}function Tt(m,S,D,V,W){if(Array.isArray(S))for(var ee=0;ee<S.length;ee++)Tt(m,S[ee],D,V,W);else V=a(V)?!!V.capture:!!V,D=xe(D),m&&m[Q]?(m=m.i,ee=String(S).toString(),ee in m.g&&(S=m.g[ee],D=ue(S,D,V,W),D>-1&&(se(S[D]),Array.prototype.splice.call(S,D,1),S.length==0&&(delete m.g[ee],m.h--)))):m&&(m=Se(m))&&(S=m.g[S.toString()],m=-1,S&&(m=ue(S,D,V,W)),(D=m>-1?S[m]:null)&&ye(D))}function ye(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Q])jt(S.i,m);else{var D=m.type,V=m.proxy;S.removeEventListener?S.removeEventListener(D,V,m.capture):S.detachEvent?S.detachEvent(B(D),V):S.addListener&&S.removeListener&&S.removeListener(V),(D=Se(S))?(jt(D,m),D.h==0&&(D.src=null,S[me]=null)):se(m)}}}function B(m){return m in Qe?Qe[m]:Qe[m]="on"+m}function be(m,S){if(m.da)m=!0;else{S=new re(S,this);let D=m.listener,V=m.ha||m.src;m.fa&&ye(m),m=D.call(V,S)}return m}function Se(m){return m=m[me],m instanceof Bt?m:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function xe(m){return typeof m=="function"?m:(m[Pe]||(m[Pe]=function(S){return m.handleEvent(S)}),m[Pe])}function Fe(){x.call(this),this.i=new Bt(this),this.M=this,this.G=null}d(Fe,x),Fe.prototype[Q]=!0,Fe.prototype.removeEventListener=function(m,S,D,V){Tt(this,m,S,D,V)};function Te(m,S){var D,V=m.G;if(V)for(D=[];V;V=V.G)D.push(V);if(m=m.M,V=S.type||S,typeof S=="string")S=new T(S,m);else if(S instanceof T)S.target=S.target||m;else{var W=S;S=new T(V,m),ct(S,W)}W=!0;let ee,Le;if(D)for(Le=D.length-1;Le>=0;Le--)ee=S.g=D[Le],W=$e(ee,V,!0,S)&&W;if(ee=S.g=m,W=$e(ee,V,!0,S)&&W,W=$e(ee,V,!1,S)&&W,D)for(Le=0;Le<D.length;Le++)ee=S.g=D[Le],W=$e(ee,V,!1,S)&&W}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var m=this.i;for(let S in m.g){let D=m.g[S];for(let V=0;V<D.length;V++)se(D[V]);delete m.g[S],m.h--}}this.G=null},Fe.prototype.J=function(m,S,D,V){return this.i.add(String(m),S,!1,D,V)},Fe.prototype.K=function(m,S,D,V){return this.i.add(String(m),S,!0,D,V)};function $e(m,S,D,V){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let W=!0;for(let ee=0;ee<S.length;++ee){let Le=S[ee];if(Le&&!Le.da&&Le.capture==D){let Ft=Le.listener,f=Le.ha||Le.src;Le.fa&&jt(m.i,Le),W=Ft.call(f,V)!==!1&&W}}return W&&!V.defaultPrevented}function z(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=l(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:o.setTimeout(m,S||0)}function k(m){m.g=z(()=>{m.g=null,m.i&&(m.i=!1,k(m))},m.l);let S=m.h;m.h=null,m.m.apply(null,S)}class X extends x{constructor(S,D){super(),this.m=S,this.l=D,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:k(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(m){x.call(this),this.h=m,this.g={}}d(oe,x);var he=[];function J(m){we(m.g,function(S,D){this.g.hasOwnProperty(D)&&ye(S)},m),m.g={}}oe.prototype.N=function(){oe.Z.N.call(this),J(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=o.JSON.stringify,Ue=o.JSON.parse,mt=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function rt(){}function _e(){}var Me={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xt(){T.call(this,"d")}d(xt,T);function gt(){T.call(this,"c")}d(gt,T);var je={},kt=null;function j(){return kt=kt||new Fe}je.Ia="serverreachability";function Be(m){T.call(this,je.Ia,m)}d(Be,T);function ke(m){let S=j();Te(S,new Be(S))}je.STAT_EVENT="statevent";function Ne(m,S){T.call(this,je.STAT_EVENT,m),this.stat=S}d(Ne,T);function ge(m){let S=j();Te(S,new Ne(S,m))}je.Ja="timingevent";function pe(m,S){T.call(this,je.Ja,m),this.size=S}d(pe,T);function qe(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},S)}function At(){this.g=!0}At.prototype.ua=function(){this.g=!1};function Un(m,S,D,V,W,ee){m.info(function(){if(m.g)if(ee){var Le="",Ft=ee.split("&");for(let E=0;E<Ft.length;E++){var f=Ft[E].split("=");if(f.length>1){let A=f[0];f=f[1];let L=A.split("_");Le=L.length>=2&&L[1]=="type"?Le+(A+"="+f+"&"):Le+(A+"=redacted&")}}}else Le=null;else Le=ee;return"XMLHTTP REQ ("+V+") [attempt "+W+"]: "+S+`
`+D+`
`+Le})}function kn(m,S,D,V,W,ee,Le){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+W+"]: "+S+`
`+D+`
`+ee+" "+Le})}function Si(m,S,D,V){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+dr(m,D)+(V?" "+V:"")})}function jr(m,S){m.info(function(){return"TIMEOUT: "+S})}At.prototype.info=function(){};function dr(m,S){if(!m.g)return S;if(!S)return null;try{let ee=JSON.parse(S);if(ee){for(m=0;m<ee.length;m++)if(Array.isArray(ee[m])){var D=ee[m];if(!(D.length<2)){var V=D[1];if(Array.isArray(V)&&!(V.length<1)){var W=V[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Le=1;Le<V.length;Le++)V[Le]=""}}}}return tt(ee)}catch{return S}}var ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gr;function vc(){}d(vc,rt),vc.prototype.g=function(){return new XMLHttpRequest},Gr=new vc;function xa(m){return encodeURIComponent(String(m))}function Vo(m){var S=1;m=m.split(":");let D=[];for(;S>0&&m.length;)D.push(m.shift()),S--;return m.length&&D.push(m.join(":")),D}function as(m,S,D,V){this.j=m,this.i=S,this.l=D,this.S=V||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nd}function Nd(){this.i=null,this.g="",this.h=!1}var mo={},bc={};function wa(m,S,D){m.M=1,m.A=Fi(_n(S)),m.u=D,m.R=!0,xc(m,null)}function xc(m,S){m.F=Date.now(),Ea(m),m.B=_n(m.A);var D=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),ax(D.i,"t",V),m.C=0,D=m.j.L,m.h=new Nd,m.g=Qf(m.j,D?S:null,!m.u),m.P>0&&(m.O=new X(l(m.Y,m,m.g),m.P)),S=m.V,D=m.g,V=m.ba;var W="readystatechange";Array.isArray(W)||(W&&(he[0]=W.toString()),W=he);for(let ee=0;ee<W.length;ee++){let Le=_t(D,W[ee],V||S.handleEvent,!1,S.h||S);if(!Le)break;S.g[Le.key]=Le}S=m.J?Ze(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),ke(),Un(m.i,m.v,m.B,m.l,m.S,m.u)}as.prototype.ba=function(m){m=m.target;let S=this.O;S&&jn(m)==3?S.j():this.Y(m)},as.prototype.Y=function(m){try{if(m==this.g)e:{let Ft=jn(this.g),f=this.g.ya(),E=this.g.ca();if(!(Ft<3)&&(Ft!=3||this.g&&(this.h.h||this.g.la()||px(this.g)))){this.K||Ft!=4||f==7||(f==8||E<=0?ke(3):ke(2)),F(this);var S=this.g.ca();this.X=S;var D=go(this);if(this.o=S==200,kn(this.i,this.v,this.B,this.l,this.S,Ft,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,W=this.g;if((V=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(V)){var ee=V;break t}}ee=null}if(m=ee)Si(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ne(this,m);else{this.o=!1,this.m=3,ge(12),Z(this),G(this);break e}}if(this.R){m=!0;let A;for(;!this.K&&this.C<D.length;)if(A=jf(this,D),A==bc){Ft==4&&(this.m=4,ge(14),m=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(A==mo){this.m=4,ge(15),Si(this.i,this.l,D,"[Invalid Chunk]"),m=!1;break}else Si(this.i,this.l,A,null),ne(this,A);if(Od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||D.length!=0||this.h.h||(this.m=1,ge(16),m=!1),this.o=this.o&&m,!m)Si(this.i,this.l,D,"[Invalid Chunked Response]"),Z(this),G(this);else if(D.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Kf(Le),Le.P=!0,ge(11))}}else Si(this.i,this.l,D,null),ne(this,D);Ft==4&&Z(this),this.o&&!this.K&&(Ft==4?R_(this.j,this):(this.o=!1,Ea(this)))}else ND(this.g),S==400&&D.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),Z(this),G(this)}}}catch{}finally{}};function go(m){if(!Od(m))return m.g.la();let S=px(m.g);if(S==="")return"";let D="",V=S.length,W=jn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Z(m),G(m),"";m.h.i=new o.TextDecoder}for(let ee=0;ee<V;ee++)m.h.h=!0,D+=m.h.i.decode(S[ee],{stream:!(W&&ee==V-1)});return S.length=0,m.h.g+=D,m.C=0,m.h.g}function Od(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function jf(m,S){var D=m.C,V=S.indexOf(`
`,D);return V==-1?bc:(D=Number(S.substring(D,V)),isNaN(D)?mo:(V+=1,V+D>S.length?bc:(S=S.slice(V,V+D),m.C=V+D,S)))}as.prototype.cancel=function(){this.K=!0,Z(this)};function Ea(m){m.T=Date.now()+m.H,ql(m,m.H)}function ql(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=qe(l(m.aa,m),S)}function F(m){m.D&&(o.clearTimeout(m.D),m.D=null)}as.prototype.aa=function(){this.D=null;let m=Date.now();m-this.T>=0?(jr(this.i,this.B),this.M!=2&&(ke(),ge(17)),Z(this),this.m=2,G(this)):ql(this,this.T-m)};function G(m){m.j.I==0||m.K||R_(m.j,m)}function Z(m){F(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,J(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function ne(m,S){try{var D=m.j;if(D.I!=0&&(D.g==m||Ye(D.h,m))){if(!m.L&&Ye(D.h,m)&&D.I==3){try{var V=D.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var W=V;if(W[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<m.F)Xf(D),wc(D);else break e;Zl(D),ge(18)}}else D.xa=W[1],0<D.xa-D.K&&W[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=qe(l(D.Va,D),6e3));Je(D.h)<=1&&D.ta&&(D.ta=void 0)}else Sa(D,11)}else if((m.L||D.g==m)&&Xf(D),!C(S))for(W=D.Ba.g.parse(S),S=0;S<W.length;S++){let E=W[S],A=E[0];if(!(A<=D.K))if(D.K=A,E=E[1],D.I==2)if(E[0]=="c"){D.M=E[1],D.ba=E[2];let L=E[3];L!=null&&(D.ka=L,D.j.info("VER="+D.ka));let $=E[4];$!=null&&(D.za=$,D.j.info("SVER="+D.za));let te=E[5];te!=null&&typeof te=="number"&&te>0&&(V=1.5*te,D.O=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;let Re=m.g;if(Re){let Bn=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var ee=V.h;ee.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(wt(ee,ee.h),ee.h=null))}if(V.G){let zi=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;zi&&(V.wa=zi,ut(V.J,V.G,zi))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-m.F,D.j.info("Handshake RTT: "+D.T+"ms")),V=D;var Le=m;if(V.na=Yf(V,V.L?V.ba:null,V.W),Le.L){Mt(V.h,Le);var Ft=Le,f=V.O;f&&(Ft.H=f),Ft.D&&(F(Ft),Ea(Ft)),V.g=Le}else qf(V);D.i.length>0&&xs(D)}else E[0]!="stop"&&E[0]!="close"||Sa(D,7);else D.I==3&&(E[0]=="stop"||E[0]=="close"?E[0]=="stop"?Sa(D,7):$f(D):E[0]!="noop"&&D.l&&D.l.qa(E),D.A=0)}}ke(4)}catch{}}var q=class{constructor(m,S){this.g=m,this.map=S}};function De(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function He(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Je(m){return m.h?1:m.g?m.g.size:0}function Ye(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function wt(m,S){m.g?m.g.add(S):m.h=S}function Mt(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}De.prototype.cancel=function(){if(this.i=dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let m of this.g.values())m.cancel();this.g.clear()}};function dt(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(let D of m.g.values())S=S.concat(D.G);return S}return p(m.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(m,S){if(m){m=m.split("&");for(let D=0;D<m.length;D++){let V=m[D].indexOf("="),W,ee=null;V>=0?(W=m[D].substring(0,V),ee=m[D].substring(V+1)):W=m[D],S(W,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function wn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof wn?(this.l=m.l,yn(this,m.j),this.o=m.o,this.g=m.g,ht(this,m.u),this.h=m.h,ei(this,cx(m.i)),this.m=m.m):m&&(S=String(m).match(en))?(this.l=!1,yn(this,S[1]||"",!0),this.o=vs(S[2]||""),this.g=vs(S[3]||"",!0),ht(this,S[4]),this.h=vs(S[5]||"",!0),ei(this,S[6]||"",!0),this.m=vs(S[7]||"")):(this.l=!1,this.i=new cs(null,this.l))}wn.prototype.toString=function(){let m=[];var S=this.j;S&&m.push(ai(S,Hn,!0),":");var D=this.g;return(D||S=="file")&&(m.push("//"),(S=this.o)&&m.push(ai(S,Hn,!0),"@"),m.push(xa(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&m.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&m.push("/"),m.push(ai(D,D.charAt(0)=="/"?Pr:Vi,!0))),(D=this.i.toString())&&m.push("?",D),(D=this.m)&&m.push("#",ai(D,Ui)),m.join("")},wn.prototype.resolve=function(m){let S=_n(this),D=!!m.j;D?yn(S,m.j):D=!!m.o,D?S.o=m.o:D=!!m.g,D?S.g=m.g:D=m.u!=null;var V=m.h;if(D)ht(S,m.u);else if(D=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var W=S.h.lastIndexOf("/");W!=-1&&(V=S.h.slice(0,W+1)+V)}if(W=V,W==".."||W==".")V="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){V=W.lastIndexOf("/",0)==0,W=W.split("/");let ee=[];for(let Le=0;Le<W.length;){let Ft=W[Le++];Ft=="."?V&&Le==W.length&&ee.push(""):Ft==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),V&&Le==W.length&&ee.push("")):(ee.push(Ft),V=!0)}V=ee.join("/")}else V=W}return D?S.h=V:D=m.i.toString()!=="",D?ei(S,cx(m.i)):D=!!m.m,D&&(S.m=m.m),S};function _n(m){return new wn(m)}function yn(m,S,D){m.j=D?vs(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function ht(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function ei(m,S,D){S instanceof cs?(m.i=S,Ld(m.i,m.l)):(D||(S=ai(S,Xt)),m.i=new cs(S,m.l))}function ut(m,S,D){m.i.set(S,D)}function Fi(m){return ut(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function vs(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,S,D){return typeof m=="string"?(m=encodeURI(m).replace(S,Rr),D&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Rr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Hn=/[#\/\?@]/g,Vi=/[#\?:]/g,Pr=/[#\?]/g,Xt=/[#\?@]/g,Ui=/#/g;function cs(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Bi(m){m.g||(m.g=new Map,m.h=0,m.i&&Tn(m.i,function(S,D){m.add(decodeURIComponent(S.replace(/\+/g," ")),D)}))}n=cs.prototype,n.add=function(m,S){Bi(this),this.i=null,m=Kl(this,m);let D=this.g.get(m);return D||this.g.set(m,D=[]),D.push(S),this.h+=1,this};function sx(m,S){Bi(m),S=Kl(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function S_(m,S){return Bi(m),S=Kl(m,S),m.g.has(S)}n.forEach=function(m,S){Bi(this),this.g.forEach(function(D,V){D.forEach(function(W){m.call(S,W,V,this)},this)},this)};function ox(m,S){Bi(m);let D=[];if(typeof S=="string")S_(m,S)&&(D=D.concat(m.g.get(Kl(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)D=D.concat(m[S]);return D}n.set=function(m,S){return Bi(this),this.i=null,m=Kl(this,m),S_(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=ox(this,m),m.length>0?String(m[0]):S):S};function ax(m,S,D){sx(m,S),D.length>0&&(m.i=null,m.g.set(Kl(m,S),p(D)),m.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let m=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var D=S[V];let W=xa(D);D=ox(this,D);for(let ee=0;ee<D.length;ee++){let Le=W;D[ee]!==""&&(Le+="="+xa(D[ee])),m.push(Le)}}return this.i=m.join("&")};function cx(m){let S=new cs;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Kl(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Ld(m,S){S&&!m.j&&(Bi(m),m.i=null,m.g.forEach(function(D,V){let W=V.toLowerCase();V!=W&&(sx(this,V),ax(this,W,D))},m)),m.j=S}function Ia(m,S){let D=new At;if(o.Image){let V=new Image;V.onload=u(Uo,D,"TestLoadImage: loaded",!0,S,V),V.onerror=u(Uo,D,"TestLoadImage: error",!1,S,V),V.onabort=u(Uo,D,"TestLoadImage: abort",!1,S,V),V.ontimeout=u(Uo,D,"TestLoadImage: timeout",!1,S,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else S(!1)}function lx(m,S){let D=new At,V=new AbortController,W=setTimeout(()=>{V.abort(),Uo(D,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:V.signal}).then(ee=>{clearTimeout(W),ee.ok?Uo(D,"TestPingServer: ok",!0,S):Uo(D,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(W),Uo(D,"TestPingServer: error",!1,S)})}function Uo(m,S,D,V,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),V(D)}catch{}}function ux(){this.g=new mt}function Bo(m){this.i=m.Sb||null,this.h=m.ab||!1}d(Bo,rt),Bo.prototype.g=function(){return new Gf(this.i,this.h)};function Gf(m,S){Fe.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Gf,Fe),n=Gf.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,bs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||o).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fd(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dx(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function dx(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Fd(this):bs(this),this.readyState==3&&dx(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Fd(this))},n.Na=function(m){this.g&&(this.response=m,Fd(this))},n.ga=function(){this.g&&Fd(this)};function Fd(m){m.readyState=4,m.l=null,m.j=null,m.B=null,bs(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let m=[],S=this.h.entries();for(var D=S.next();!D.done;)D=D.value,m.push(D[0]+": "+D[1]),D=S.next();return m.join(`\r
`)};function bs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Gf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function hx(m){let S="";return we(m,function(D,V){S+=V,S+=":",S+=D,S+=`\r
`}),S}function T_(m,S,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=hx(D),typeof m=="string"?D!=null&&xa(D):ut(m,S,D))}function ii(m){Fe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ii,Fe);var Wf=/^https?$/i,fx=["POST","PUT"];n=ii.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gr.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ee){Xl(this,ee);return}if(m=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var W in V)D.set(W,V[W]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(let ee of V.keys())D.set(ee,V.get(ee));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(ee=>ee.toLowerCase()=="content-type"),W=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(fx,S,void 0)>=0)||V||W||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ee,Le]of D)this.g.setRequestHeader(ee,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ee){Xl(this,ee)}};function Xl(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Yl(m),Ql(m)}function Yl(m){m.A||(m.A=!0,Te(m,"complete"),Te(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Te(this,"complete"),Te(this,"abort"),Ql(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),ii.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?C_(this):this.Xa())},n.Xa=function(){C_(this)};function C_(m){if(m.h&&typeof s<"u"){if(m.v&&jn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Te(m,"readystatechange"),jn(m)==4){m.h=!1;try{let ee=m.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var D;if(!(D=S)){var V;if(V=ee===0){let Le=String(m.D).match(en)[1]||null;!Le&&o.self&&o.self.location&&(Le=o.self.location.protocol.slice(0,-1)),V=!Wf.test(Le?Le.toLowerCase():"")}D=V}if(D)Te(m,"complete"),Te(m,"success");else{m.o=6;try{var W=jn(m)>2?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.ca()+"]",Yl(m)}}finally{Ql(m)}}}}function Ql(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);let D=m.g;m.g=null,S||Te(m,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Ue(S)}};function px(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ND(m){let S={};m=(m.g&&jn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(C(m[V]))continue;var D=Vo(m[V]);let W=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();let ee=S[W]||[];S[W]=ee,ee.push(D)}Ae(S,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jl(m,S,D){return D&&D.internalChannelParams&&D.internalChannelParams[m]||S}function A_(m){this.za=0,this.i=[],this.j=new At,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jl("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jl("baseRetryDelayMs",5e3,m),this.Za=Jl("retryDelaySeedMs",1e4,m),this.Ta=Jl("forwardChannelMaxRetries",2,m),this.va=Jl("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new De(m&&m.concurrentRequestLimit),this.Ba=new ux,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=A_.prototype,n.ka=8,n.I=1,n.connect=function(m,S,D,V){ge(0),this.W=m,this.H=S||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.J=Yf(this,null,this.W),xs(this)};function $f(m){if(M_(m),m.I==3){var S=m.V++,D=_n(m.J);if(ut(D,"SID",m.M),ut(D,"RID",S),ut(D,"TYPE","terminate"),zo(m,D),S=new as(m,m.j,S),S.M=2,S.A=Fi(_n(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(S.A.toString(),"")}catch{}!D&&o.Image&&(new Image().src=S.A,D=!0),D||(S.g=Qf(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ea(S)}P_(m)}function wc(m){m.g&&(Kf(m),m.g.cancel(),m.g=null)}function M_(m){wc(m),m.v&&(o.clearTimeout(m.v),m.v=null),Xf(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function xs(m){if(!He(m.h)&&!m.m){m.m=!0;var S=m.Ea;U||w(),O||(U(),O=!0),I.add(S,m),m.D=0}}function mx(m,S){return Je(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=qe(l(m.Ea,m,S),eu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;let W=new as(this,this.j,m),ee=this.o;if(this.U&&(ee?(ee=Ze(ee),ct(ee,this.U)):ee=this.U),this.u!==null||this.R||(W.J=ee,ee=null),this.S)e:{for(var S=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=D;break e}if(S===4096||D===this.i.length-1){S=D+1;break e}}S=1e3}else S=1e3;S=D_(this,W,S),D=_n(this.J),ut(D,"RID",m),ut(D,"CVER",22),this.G&&ut(D,"X-HTTP-Session-Id",this.G),zo(this,D),ee&&(this.R?S="headers="+xa(hx(ee))+"&"+S:this.u&&T_(D,this.u,ee)),wt(this.h,W),this.Ra&&ut(D,"TYPE","init"),this.S?(ut(D,"$req",S),ut(D,"SID","null"),W.U=!0,wa(W,D,null)):wa(W,D,S),this.I=2}}else this.I==3&&(m?gx(this,m):this.i.length==0||He(this.h)||gx(this))};function gx(m,S){var D;S?D=S.l:D=m.V++;let V=_n(m.J);ut(V,"SID",m.M),ut(V,"RID",D),ut(V,"AID",m.K),zo(m,V),m.u&&m.o&&T_(V,m.u,m.o),D=new as(m,m.j,D,m.D+1),m.u===null&&(D.J=m.o),S&&(m.i=S.G.concat(m.i)),S=D_(m,D,1e3),D.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),wt(m.h,D),wa(D,V,S)}function zo(m,S){m.H&&we(m.H,function(D,V){ut(S,V,D)}),m.l&&we({},function(D,V){ut(S,V,D)})}function D_(m,S,D){D=Math.min(m.i.length,D);let V=m.l?l(m.l.Ka,m.l,m):null;e:{var W=m.i;let Ft=-1;for(;;){let f=["count="+D];Ft==-1?D>0?(Ft=W[0].g,f.push("ofs="+Ft)):Ft=0:f.push("ofs="+Ft);let E=!0;for(let A=0;A<D;A++){var ee=W[A].g;let L=W[A].map;if(ee-=Ft,ee<0)Ft=Math.max(0,W[A].g-100),E=!1;else try{ee="req"+ee+"_"||"";try{var Le=L instanceof Map?L:Object.entries(L);for(let[$,te]of Le){let Re=te;a(te)&&(Re=tt(te)),f.push(ee+$+"="+encodeURIComponent(Re))}}catch($){throw f.push(ee+"type="+encodeURIComponent("_badmap")),$}}catch{V&&V(L)}}if(E){Le=f.join("&");break e}}Le=void 0}return m=m.i.splice(0,D),S.G=m,Le}function qf(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;U||w(),O||(U(),O=!0),I.add(S,m),m.A=0}}function Zl(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=qe(l(m.Da,m),eu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=qe(l(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),wc(this),Vd(this))};function Kf(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function Vd(m){m.g=new as(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=_n(m.na);ut(S,"RID","rpc"),ut(S,"SID",m.M),ut(S,"AID",m.K),ut(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&ut(S,"TO",m.ia),ut(S,"TYPE","xmlhttp"),zo(m,S),m.u&&m.o&&T_(S,m.u,m.o),m.O&&(m.g.H=m.O);var D=m.g;m=m.ba,D.M=1,D.A=Fi(_n(S)),D.u=null,D.R=!0,xc(D,m)}n.Va=function(){this.C!=null&&(this.C=null,wc(this),Zl(this),ge(19))};function Xf(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function R_(m,S){var D=null;if(m.g==S){Xf(m),Kf(m),m.g=null;var V=2}else if(Ye(m.h,S))D=S.G,Mt(m.h,S),V=1;else return;if(m.I!=0){if(S.o)if(V==1){D=S.u?S.u.length:0,S=Date.now()-S.F;var W=m.D;V=j(),Te(V,new pe(V,D)),xs(m)}else qf(m);else if(W=S.m,W==3||W==0&&S.X>0||!(V==1&&mx(m,S)||V==2&&Zl(m)))switch(D&&D.length>0&&(S=m.h,S.i=S.i.concat(D)),W){case 1:Sa(m,5);break;case 4:Sa(m,10);break;case 3:Sa(m,6);break;default:Sa(m,2)}}}function eu(m,S){let D=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(D*=2),D*S}function Sa(m,S){if(m.j.info("Error code "+S),S==2){var D=l(m.bb,m),V=m.Ua;let W=!V;V=new wn(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yn(V,"https"),Fi(V),W?Ia(V.toString(),D):lx(V.toString(),D)}else ge(2);m.I=0,m.l&&m.l.pa(S),P_(m),M_(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function P_(m){if(m.I=0,m.ja=[],m.l){let S=dt(m.h);(S.length!=0||m.i.length!=0)&&(_(m.ja,S),_(m.ja,m.i),m.h.i.length=0,p(m.i),m.i.length=0),m.l.oa()}}function Yf(m,S,D){var V=D instanceof wn?_n(D):new wn(D);if(V.g!="")S&&(V.g=S+"."+V.g),ht(V,V.u);else{var W=o.location;V=W.protocol,S=S?S+"."+W.hostname:W.hostname,W=+W.port;let ee=new wn(null);V&&yn(ee,V),S&&(ee.g=S),W&&ht(ee,W),D&&(ee.h=D),V=ee}return D=m.G,S=m.wa,D&&S&&ut(V,D,S),ut(V,"VER",m.ka),zo(m,V),V}function Qf(m,S,D){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new ii(new Bo({ab:D})):new ii(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function k_(){}n=k_.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ec(){}Ec.prototype.g=function(m,S){return new Wr(m,S)};function Wr(m,S){Fe.call(this),this.g=new A_(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!C(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!C(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Ic(this)}d(Wr,Fe),Wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wr.prototype.close=function(){$f(this.g)},Wr.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var D={};D.__data__=m,m=D}else this.v&&(D={},D.__data__=tt(m),m=D);S.i.push(new q(S.Ya++,m)),S.I==3&&xs(S)},Wr.prototype.N=function(){this.g.l=null,delete this.j,$f(this.g),delete this.g,Wr.Z.N.call(this)};function N_(m){xt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(let D in S){m=D;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}d(N_,xt);function Ta(){gt.call(this),this.status=1}d(Ta,gt);function Ic(m){this.g=m}d(Ic,k_),Ic.prototype.ra=function(){Te(this.g,"a")},Ic.prototype.qa=function(m){Te(this.g,new N_(m))},Ic.prototype.pa=function(m){Te(this.g,new Ta)},Ic.prototype.oa=function(){Te(this.g,"b")},Ec.prototype.createWebChannel=Ec.prototype.g,Wr.prototype.send=Wr.prototype.o,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,NO=rl.createWebChannelTransport=function(){return new Ec},kO=rl.getStatEventTarget=function(){return j()},PO=rl.Event=je,YI=rl.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,wv=rl.ErrorCode=ba,Fo.COMPLETE="complete",RO=rl.EventType=Fo,_e.EventType=Me,Me.OPEN="a",Me.CLOSE="b",Me.ERROR="c",Me.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,am=rl.WebChannel=_e,u_e=rl.FetchXmlHttpFactory=Bo,ii.prototype.listenOnce=ii.prototype.K,ii.prototype.getLastError=ii.prototype.Ha,ii.prototype.getLastErrorCode=ii.prototype.ya,ii.prototype.getStatus=ii.prototype.ca,ii.prototype.getResponseJson=ii.prototype.La,ii.prototype.getResponseText=ii.prototype.la,ii.prototype.send=ii.prototype.ea,ii.prototype.setWithCredentials=ii.prototype.Fa,DO=rl.XhrIo=ii}).apply(typeof XI<"u"?XI:typeof self<"u"?self:typeof window<"u"?window:{});var XG="@firebase/firestore",YG="4.9.2";var Zr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");var Pm="12.3.0";var Gh=new Nu("@firebase/firestore");function cm(){return Gh.logLevel}function nt(n,...e){if(Gh.logLevel<=mn.DEBUG){let t=e.map(vF);Gh.debug(`Firestore (${Pm}): ${n}`,...t)}}function al(n,...e){if(Gh.logLevel<=mn.ERROR){let t=e.map(vF);Gh.error(`Firestore (${Pm}): ${n}`,...t)}}function Mv(n,...e){if(Gh.logLevel<=mn.WARN){let t=e.map(vF);Gh.warn(`Firestore (${Pm}): ${n}`,...t)}}function vF(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function qt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,VW(n,i,t)}function VW(n,e,t){let i=`FIRESTORE (${Pm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw al(i),new Error(i)}function Mi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||VW(e,r,i)}function Dn(n,e){return n}var We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rt=class extends wo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Uu=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var HO=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jO=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}};var GO=class{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mi(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new Uu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Uu,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Uu)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Mi(typeof i.accessToken=="string",31837,{l:i}),new HO(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Mi(e===null||typeof e=="string",2055,{h:e}),new Zr(e)}},WO=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},$O=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new WO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nS=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qO=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mi(this.o===void 0,3512);let i=s=>{s.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nS(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function d_e(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var iS=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=d_e(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function In(n,e){return n<e?-1:n>e?1:0}function KO(n,e){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++){let r=n.charAt(i),s=e.charAt(i);if(r!==s)return OO(r)===OO(s)?In(r,s):OO(r)?1:-1}return In(n.length,e.length)}var h_e=55296,f_e=57343;function OO(n){let e=n.charCodeAt(0);return e>=h_e&&e<=f_e}function bm(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var QG="__name__",rS=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&qt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&qt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return In(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):KO(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}},gr=class n extends rS{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Rt(We.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},p_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oa=class n extends rS{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return p_e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QG}static keyField(){return new n([QG])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Rt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Rt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Rt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Rt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ut=class n{constructor(e){this.path=e}static fromPath(e){return new n(gr.fromString(e))}static fromName(e){return new n(gr.fromString(e).popFirst(5))}static empty(){return new n(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gr(e.slice()))}};function m_e(n,e,t,i){if(e===!0&&i===!0)throw new Rt(We.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function g_e(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function __e(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qt(12329,{type:typeof n})}function LO(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Rt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=__e(n);throw new Rt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ir(n,e){let t={typeString:n};return e&&(t.value=e),t}function jv(n,e){if(!g_e(n))throw new Rt(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Rt(We.INVALID_ARGUMENT,t);return!0}var JG=-62135596800,ZG=1e6,_s=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ZG);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Rt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Rt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<JG)throw new Rt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ZG}_compareTo(e){return this.seconds===e.seconds?In(this.nanoseconds,e.nanoseconds):In(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jv(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-JG;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};_s._jsonSchemaVersion="firestore/timestamp/1.0",_s._jsonSchema={type:ir("string",_s._jsonSchemaVersion),seconds:ir("number"),nanoseconds:ir("number")};var sn=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new _s(0,0))}static max(){return new n(new _s(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Dv=-1,XO=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};XO.UNKNOWN_ID=-1;function y_e(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=sn.fromTimestamp(i===1e9?new _s(t+1,0):new _s(t,i));return new Wh(r,Ut.empty(),e)}function v_e(n){return new Wh(n.readTime,n.key,Dv)}var Wh=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(sn.min(),Ut.empty(),Dv)}static max(){return new n(sn.max(),Ut.empty(),Dv)}};function b_e(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ut.comparator(n.documentKey,e.documentKey),t!==0?t:In(n.largestBatchId,e.largestBatchId))}var x_e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",YO=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function DS(n){if(n.code!==We.FAILED_PRECONDITION||n.message!==x_e)throw n;nt("LocalStore","Unexpectedly lost primary lease")}var Ie=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function w_e(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function km(n){return n.name==="IndexedDbTransactionError"}var bF=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),E_e=-1;function RS(n){return n==null}function sS(n){return n===0&&1/n==-1/0}var UW="";function I_e(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eW(e)),e=S_e(n.get(t),e);return eW(e)}function S_e(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case UW:t+="";break;default:t+=s}}return t}function eW(n){return n+UW+""}var T_e="remoteDocuments",BW="owner";var zW="mutationQueues";var HW="mutations";var jW="documentMutations",C_e="remoteDocumentsV14";var GW="remoteDocumentGlobal";var WW="targets";var $W="targetDocuments";var qW="targetGlobal",KW="collectionParents";var XW="clientMetadata";var YW="bundles";var QW="namedQueries";var A_e="indexConfiguration";var M_e="indexState";var D_e="indexEntries";var JW="documentOverlays";var R_e="globals";var P_e=[zW,HW,jW,T_e,WW,BW,qW,$W,XW,GW,KW,YW,QW],pXe=[...P_e,JW],k_e=[zW,HW,jW,C_e,WW,BW,qW,$W,XW,GW,KW,YW,QW,JW],N_e=k_e,O_e=[...N_e,A_e,M_e,D_e];var mXe=[...O_e,R_e];function tW(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gv(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L_e(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qi=class n{constructor(e,t){this.comparator=e,this.root=t||Ka.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ka.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ka.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hm(this.root,e,this.comparator,!1)}getReverseIterator(){return new hm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hm(this.root,e,this.comparator,!0)}},hm=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ka=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw qt(27949);return e+(this.isRed()?0:1)}};Ka.EMPTY=null,Ka.RED=!0,Ka.BLACK=!1;Ka.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ka(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tr=class n{constructor(e){this.comparator=e,this.data=new qi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oS(this.data.getIterator())}getIteratorFrom(e){return new oS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},oS=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Uh=class n{constructor(e){this.fields=e,e.sort(oa.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tr(oa.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bm(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var aS=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var es=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aS("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return In(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};es.EMPTY_BYTE_STRING=new es("");var F_e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cl(n){if(Mi(!!n,39018),typeof n=="string"){let e=0,t=F_e.exec(n);if(Mi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wi(n.seconds),nanos:wi(n.nanos)}}function wi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ll(n){return typeof n=="string"?es.fromBase64String(n):es.fromUint8Array(n)}var ZW="server_timestamp",e$="__type__",t$="__previous_value__",n$="__local_write_time__";function xF(n){return(n?.mapValue?.fields||{})[e$]?.stringValue===ZW}function PS(n){let e=n.mapValue.fields[t$];return xF(e)?PS(e):e}function Rv(n){let e=cl(n.mapValue.fields[n$].timestampValue);return new _s(e.seconds,e.nanos)}var QO=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},JO="(default)",cS=class n{constructor(e,t){this.projectId=e,this.database=t||JO}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===JO}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var i$="__type__",r$="__max__",QI={mapValue:{fields:{__type__:{stringValue:r$}}}},s$="__vector__",Pv="value";function Bu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xF(n)?4:a$(n)?9007199254740991:o$(n)?10:11:qt(28295,{value:n})}function Ya(n,e){if(n===e)return!0;let t=Bu(n);if(t!==Bu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rv(n).isEqual(Rv(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=cl(r.timestampValue),a=cl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return ll(r.bytesValue).isEqual(ll(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return wi(r.geoPointValue.latitude)===wi(s.geoPointValue.latitude)&&wi(r.geoPointValue.longitude)===wi(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return wi(r.integerValue)===wi(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=wi(r.doubleValue),a=wi(s.doubleValue);return o===a?sS(o)===sS(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return bm(n.arrayValue.values||[],e.arrayValue.values||[],Ya);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(tW(o)!==tW(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ya(o[c],a[c])))return!1;return!0})(n,e);default:return qt(52216,{left:n})}}function kv(n,e){return(n.values||[]).find(t=>Ya(t,e))!==void 0}function xm(n,e){if(n===e)return 0;let t=Bu(n),i=Bu(e);if(t!==i)return In(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return In(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=wi(s.integerValue||s.doubleValue),c=wi(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return nW(n.timestampValue,e.timestampValue);case 4:return nW(Rv(n),Rv(e));case 5:return KO(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=ll(s),c=ll(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=In(a[l],c[l]);if(u!==0)return u}return In(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=In(wi(s.latitude),wi(o.latitude));return a!==0?a:In(wi(s.longitude),wi(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iW(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[Pv]?.arrayValue,u=c[Pv]?.arrayValue,d=In(l?.values?.length||0,u?.values?.length||0);return d!==0?d:iW(l,u)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===QI.mapValue&&o===QI.mapValue)return 0;if(s===QI.mapValue)return 1;if(o===QI.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=KO(c[d],u[d]);if(h!==0)return h;let p=xm(a[c[d]],l[u[d]]);if(p!==0)return p}return In(c.length,u.length)})(n.mapValue,e.mapValue);default:throw qt(23264,{he:t})}}function nW(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return In(n,e);let t=cl(n),i=cl(e),r=In(t.seconds,i.seconds);return r!==0?r:In(t.nanos,i.nanos)}function iW(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=xm(t[r],i[r]);if(s)return s}return In(t.length,i.length)}function wm(n){return ZO(n)}function ZO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=cl(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ll(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ut.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=ZO(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${ZO(t.fields[o])}`;return r+"}"})(n.mapValue):qt(61005,{value:n})}function eS(n){switch(Bu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=PS(n);return e?16+eS(e):16;case 5:return 2*n.stringValue.length;case 6:return ll(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+eS(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Gv(i.fields,(s,o)=>{r+=s.length+eS(o)}),r})(n.mapValue);default:throw qt(13486,{value:n})}}function eL(n){return!!n&&"integerValue"in n}function wF(n){return!!n&&"arrayValue"in n}function rW(n){return!!n&&"nullValue"in n}function sW(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function FO(n){return!!n&&"mapValue"in n}function o$(n){return(n?.mapValue?.fields||{})[i$]?.stringValue===s$}function Iv(n){if(n.geoPointValue)return{geoPointValue:ie({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:ie({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gv(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Iv(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iv(n.arrayValue.values[t]);return e}return ie({},n)}function a$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===r$}var _Xe={mapValue:{fields:{[i$]:{stringValue:s$},[Pv]:{arrayValue:{}}}}};var sl=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!FO(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iv(t)}setAll(e){let t=oa.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Iv(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());FO(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];FO(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Gv(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Iv(this.value))}};var aa=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,sn.min(),sn.min(),sn.min(),sl.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,sn.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,sn.min(),sn.min(),sl.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,sn.min(),sn.min(),sl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Em=class{constructor(e,t){this.position=e,this.inclusive=t}};function oW(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Ut.comparator(Ut.fromName(o.referenceValue),t.key):i=xm(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function aW(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ya(n.position[t],e.position[t]))return!1;return!0}var Im=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function V_e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var lS=class{},_r=class n extends lS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nL(e,t,i):t==="array-contains"?new sL(e,i):t==="in"?new oL(e,i):t==="not-in"?new aL(e,i):t==="array-contains-any"?new cL(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new iL(e,i):new rL(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xm(t,this.value)):t!==null&&Bu(this.value)===Bu(t)&&this.matchesComparison(xm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qa=class n extends lS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return c$(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function c$(n){return n.op==="and"}function l$(n){return U_e(n)&&c$(n)}function U_e(n){for(let e of n.filters)if(e instanceof Qa)return!1;return!0}function tL(n){if(n instanceof _r)return n.field.canonicalString()+n.op.toString()+wm(n.value);if(l$(n))return n.filters.map(e=>tL(e)).join(",");{let e=n.filters.map(t=>tL(t)).join(",");return`${n.op}(${e})`}}function u$(n,e){return n instanceof _r?(function(i,r){return r instanceof _r&&i.op===r.op&&i.field.isEqual(r.field)&&Ya(i.value,r.value)})(n,e):n instanceof Qa?(function(i,r){return r instanceof Qa&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&u$(o,r.filters[a]),!0):!1})(n,e):void qt(19439)}function d$(n){return n instanceof _r?(function(t){return`${t.field.canonicalString()} ${t.op} ${wm(t.value)}`})(n):n instanceof Qa?(function(t){return t.op.toString()+" {"+t.getFilters().map(d$).join(" ,")+"}"})(n):"Filter"}var nL=class extends _r{constructor(e,t,i){super(e,t,i),this.key=Ut.fromName(i.referenceValue)}matches(e){let t=Ut.comparator(e.key,this.key);return this.matchesComparison(t)}},iL=class extends _r{constructor(e,t){super(e,"in",t),this.keys=h$("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},rL=class extends _r{constructor(e,t){super(e,"not-in",t),this.keys=h$("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function h$(n,e){return(e.arrayValue?.values||[]).map(t=>Ut.fromName(t.referenceValue))}var sL=class extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wF(t)&&kv(t.arrayValue,this.value)}},oL=class extends _r{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&kv(this.value.arrayValue,t)}},aL=class extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kv(this.value.arrayValue,t)}},cL=class extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wF(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>kv(this.value.arrayValue,i))}};var lL=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function cW(n,e=null,t=[],i=[],r=null,s=null,o=null){return new lL(n,e,t,i,r,s,o)}function EF(n){let e=Dn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>tL(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),RS(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>wm(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>wm(i)).join(",")),e.Te=t}return e.Te}function IF(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V_e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!u$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aW(n.startAt,e.startAt)&&aW(n.endAt,e.endAt)}function uL(n){return Ut.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Sm=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function B_e(n,e,t,i,r,s,o,a){return new Sm(n,e,t,i,r,s,o,a)}function SF(n){return new Sm(n)}function lW(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z_e(n){return n.collectionGroup!==null}function Sv(n){let e=Dn(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tr(oa.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Im(s,i))}),t.has(oa.keyField().canonicalString())||e.Ie.push(new Im(oa.keyField(),i))}return e.Ie}function Xa(n){let e=Dn(n);return e.Ee||(e.Ee=H_e(e,Sv(n))),e.Ee}function H_e(n,e){if(n.limitType==="F")return cW(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Im(r.field,s)});let t=n.endAt?new Em(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Em(n.startAt.position,n.startAt.inclusive):null;return cW(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function dL(n,e,t){return new Sm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kS(n,e){return IF(Xa(n),Xa(e))&&n.limitType===e.limitType}function f$(n){return`${EF(Xa(n))}|lt:${n.limitType}`}function lm(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>d$(r)).join(", ")}]`),RS(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>wm(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>wm(r)).join(",")),`Target(${i})`})(Xa(n))}; limitType=${n.limitType})`}function NS(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ut.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of Sv(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=oW(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,Sv(i),r)||i.endAt&&!(function(o,a,c){let l=oW(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,Sv(i),r))})(n,e)}function j_e(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function p$(n){return(e,t)=>{let i=!1;for(let r of Sv(n)){let s=G_e(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function G_e(n,e,t){let i=n.field.isKeyField()?Ut.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?xm(c,l):qt(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt(19790,{direction:n.dir})}}var ul=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gv(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return L_e(this.inner)}size(){return this.innerSize}};var W_e=new qi(Ut.comparator);function zu(){return W_e}var m$=new qi(Ut.comparator);function Ev(...n){let e=m$;for(let t of n)e=e.insert(t.key,t);return e}function $_e(n){let e=m$;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Bh(){return Tv()}function g$(){return Tv()}function Tv(){return new ul(n=>n.toString(),(n,e)=>n.isEqual(e))}var yXe=new qi(Ut.comparator),q_e=new Tr(Ut.comparator);function Fn(...n){let e=q_e;for(let t of n)e=e.add(t);return e}var K_e=new Tr(In);function X_e(){return K_e}function Y_e(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sS(e)?"-0":e}}function Q_e(n){return{integerValue:""+n}}var Tm=class{constructor(){this._=void 0}};function J_e(n,e,t){return n instanceof Nv?(function(r,s){let o={fields:{[e$]:{stringValue:ZW},[n$]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&xF(s)&&(s=PS(s)),s&&(o.fields[t$]=s),{mapValue:o}})(t,e):n instanceof Cm?_$(n,e):n instanceof Am?y$(n,e):(function(r,s){let o=eye(r,s),a=uW(o)+uW(r.Ae);return eL(o)&&eL(r.Ae)?Q_e(a):Y_e(r.serializer,a)})(n,e)}function Z_e(n,e,t){return n instanceof Cm?_$(n,e):n instanceof Am?y$(n,e):t}function eye(n,e){return n instanceof Ov?(function(i){return eL(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var Nv=class extends Tm{},Cm=class extends Tm{constructor(e){super(),this.elements=e}};function _$(n,e){let t=v$(e);for(let i of n.elements)t.some(r=>Ya(r,i))||t.push(i);return{arrayValue:{values:t}}}var Am=class extends Tm{constructor(e){super(),this.elements=e}};function y$(n,e){let t=v$(e);for(let i of n.elements)t=t.filter(r=>!Ya(r,i));return{arrayValue:{values:t}}}var Ov=class extends Tm{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function uW(n){return wi(n.integerValue||n.doubleValue)}function v$(n){return wF(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function tye(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Cm&&r instanceof Cm||i instanceof Am&&r instanceof Am?bm(i.elements,r.elements,Ya):i instanceof Ov&&r instanceof Ov?Ya(i.Ae,r.Ae):i instanceof Nv&&r instanceof Nv})(n.transform,e.transform)}var Cv=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function tS(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lv=class{};function b$(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hL(n.key,Cv.none()):new Fv(n.key,n.data,Cv.none());{let t=n.data,i=sl.empty(),r=new Tr(oa.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Mm(n.key,i,new Uh(r.toArray()),Cv.none())}}function nye(n,e,t){n instanceof Fv?(function(r,s,o){let a=r.value.clone(),c=hW(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Mm?(function(r,s,o){if(!tS(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=hW(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(x$(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Av(n,e,t,i){return n instanceof Fv?(function(s,o,a,c){if(!tS(s.precondition,o))return a;let l=s.value.clone(),u=fW(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof Mm?(function(s,o,a,c){if(!tS(s.precondition,o))return a;let l=fW(s.fieldTransforms,c,o),u=o.data;return u.setAll(x$(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return tS(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function dW(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&bm(i,r,(s,o)=>tye(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fv=class extends Lv{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Mm=class extends Lv{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function x$(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function hW(n,e,t){let i=new Map;Mi(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Z_e(o,a,t[r]))}return i}function fW(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,J_e(s,o,e))}return i}var hL=class extends Lv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var fL=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&nye(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Av(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Av(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=g$();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=b$(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(sn.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fn())}isEqual(e){return this.batchId===e.batchId&&bm(this.mutations,e.mutations,(t,i)=>dW(t,i))&&bm(this.baseMutations,e.baseMutations,(t,i)=>dW(t,i))}};var pL=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mL=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tr,Mn;function w$(n){if(n===void 0)return al("GRPC error has no .code"),We.UNKNOWN;switch(n){case tr.OK:return We.OK;case tr.CANCELLED:return We.CANCELLED;case tr.UNKNOWN:return We.UNKNOWN;case tr.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case tr.INTERNAL:return We.INTERNAL;case tr.UNAVAILABLE:return We.UNAVAILABLE;case tr.UNAUTHENTICATED:return We.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case tr.NOT_FOUND:return We.NOT_FOUND;case tr.ALREADY_EXISTS:return We.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return We.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case tr.ABORTED:return We.ABORTED;case tr.OUT_OF_RANGE:return We.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return We.UNIMPLEMENTED;case tr.DATA_LOSS:return We.DATA_LOSS;default:return qt(39323,{code:n})}}(Mn=tr||(tr={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";var iye=null;function rye(){return new TextEncoder}var sye=new il([4294967295,4294967295],0);function pW(n){let e=rye().encode(n),t=new MO;return t.update(e),new Uint8Array(t.digest())}function mW(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new il([t,i],0),new il([r,s],0)]}var gL=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new zh(`Invalid padding: ${t}`);if(i<0)throw new zh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new zh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new zh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=il.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(il.fromNumber(i)));return r.compare(sye)===1&&(r=new il([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=pW(e),[i,r]=mW(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);if(!this.we(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=pW(e),[i,r]=mW(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(i,r,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},zh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uS=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Vv.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(sn.min(),r,new qi(In),zu(),Fn())}},Vv=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Fn(),Fn(),Fn())}};var fm=class{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}},dS=class{constructor(e,t){this.targetId=e,this.Ce=t}},hS=class{constructor(e,t,i=es.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},fS=class{constructor(){this.ve=0,this.Fe=gW(),this.Me=es.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fn(),t=Fn(),i=Fn();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:qt(38017,{changeType:s})}}),new Vv(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=gW()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},_L=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zu(),this.Je=JI(),this.He=JI(),this.Ye=new qi(In)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:qt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,r)=>{this.rt(r)&&t(r)})}st(e){let t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){let s=r.target;if(uL(s))if(i===0){let o=new Ut(s.path);this.et(t,o,aa.newNoDocument(o,sn.min()))}else Mi(i===1,20013,{expectedCount:i});else{let o=this._t(t);if(o!==i){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}iye?.lt((function(u,d,h,p,_){let b={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},g=d.unchangedNames;return g&&(b.bloomFilter={applied:_===0,hashCount:g?.hashCount??0,bitmapLength:g?.bits?.bitmap?.length??0,padding:g?.bits?.padding??0,mightContain:v=>p?.mightContain(v)??!1}),b})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=ll(i).toUint8Array()}catch(c){if(c instanceof aS)return Mv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new gL(o,r,s)}catch(c){return Mv(c instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){let i=this.Ge.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),r++)}),r}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&uL(a.target)){let c=new Ut(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,aa.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let i=Fn();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let r=new uS(e,t,this.Ye,this.je,i);return this.je=zu(),this.Je=JI(),this.He=JI(),this.Ye=new qi(In),r}Xe(e,t){if(!this.rt(e))return;let i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tr(In),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tr(In),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||nt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fS),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function JI(){return new qi(Ut.comparator)}function gW(){return new qi(Ut.comparator)}var oye={asc:"ASCENDING",desc:"DESCENDING"},aye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cye={and:"AND",or:"OR"},yL=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function vL(n,e){return n.useProto3Json||RS(e)?e:{value:e}}function lye(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uye(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pm(n){return Mi(!!n,49232),sn.fromTimestamp((function(t){let i=cl(t);return new _s(i.seconds,i.nanos)})(n))}function dye(n,e){return bL(n,e).canonicalString()}function bL(n,e){let t=(function(r){return new gr(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function E$(n){let e=gr.fromString(n);return Mi(A$(e),10190,{key:e.toString()}),e}function VO(n,e){let t=E$(e);if(t.get(1)!==n.databaseId.projectId)throw new Rt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Rt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ut(S$(t))}function I$(n,e){return dye(n.databaseId,e)}function hye(n){let e=E$(n);return e.length===4?gr.emptyPath():S$(e)}function _W(n){return new gr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function S$(n){return Mi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fye(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:qt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Mi(u===void 0||typeof u=="string",58123),es.fromBase64String(u||"")):(Mi(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),es.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?We.UNKNOWN:w$(l.code);return new Rt(u,l.message||"")})(o);t=new hS(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=VO(n,i.document.name),s=pm(i.document.updateTime),o=i.document.createTime?pm(i.document.createTime):sn.min(),a=new sl({mapValue:{fields:i.document.fields}}),c=aa.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new fm(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=VO(n,i.document),s=i.readTime?pm(i.readTime):sn.min(),o=aa.newNoDocument(r,s),a=i.removedTargetIds||[];t=new fm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=VO(n,i.document),s=i.removedTargetIds||[];t=new fm([],s,r,null)}else{if(!("filter"in e))return qt(11601,{Rt:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new mL(r,s),a=i.targetId;t=new dS(a,o)}}return t}function pye(n,e){return{documents:[I$(n,e.path)]}}function mye(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=I$(n,r);let s=(function(l){if(l.length!==0)return C$(Qa.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:um(h.field),direction:yye(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=vL(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:r}}function gye(n){let e=hye(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Mi(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=T$(d);return h instanceof Qa&&l$(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(_){return new Im(dm(_.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,RS(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,p=d.values||[];return new Em(p,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,p=d.values||[];return new Em(p,h)})(t.endAt)),B_e(e,r,o,s,a,"F",c,l)}function _ye(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function T$(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=dm(t.unaryFilter.field);return _r.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=dm(t.unaryFilter.field);return _r.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=dm(t.unaryFilter.field);return _r.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=dm(t.unaryFilter.field);return _r.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _r.create(dm(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qa.create(t.compositeFilter.filters.map(i=>T$(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(t.compositeFilter.op))})(n):qt(30097,{filter:n})}function yye(n){return oye[n]}function vye(n){return aye[n]}function bye(n){return cye[n]}function um(n){return{fieldPath:n.canonicalString()}}function dm(n){return oa.fromServerFormat(n.fieldPath)}function C$(n){return n instanceof _r?(function(t){if(t.op==="=="){if(sW(t.value))return{unaryFilter:{field:um(t.field),op:"IS_NAN"}};if(rW(t.value))return{unaryFilter:{field:um(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sW(t.value))return{unaryFilter:{field:um(t.field),op:"IS_NOT_NAN"}};if(rW(t.value))return{unaryFilter:{field:um(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:um(t.field),op:vye(t.op),value:t.value}}})(n):n instanceof Qa?(function(t){let i=t.getFilters().map(r=>C$(r));return i.length===1?i[0]:{compositeFilter:{op:bye(t.op),filters:i}}})(n):qt(54877,{filter:n})}function A$(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Uv=class n{constructor(e,t,i,r,s=sn.min(),o=sn.min(),a=es.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xL=class{constructor(e){this.yt=e}};function xye(n){let e=gye({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dL(e,e.limit,"L"):e}var pS=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wi(e.integerValue));else if("doubleValue"in e){let i=wi(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),sS(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=cl(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ll(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?a$(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):o$(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):qt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};this.Ft(t,55);for(let r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=Pv,s=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(wi(s)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){let i=e.values||[];this.Ft(t,50);for(let r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ut.fromName(e).path.forEach(i=>{this.Ft(t,60),this.Ut(i,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};pS.Kt=new pS;var wL=class{constructor(){this.Cn=new EL}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(Wh.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(Wh.min())}updateCollectionGroup(e,t,i){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}},EL=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Tr(gr.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Tr(gr.comparator)).toArray()}};var vXe=new Uint8Array(0);var yW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M$=41943040,Eo=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Eo.DEFAULT_COLLECTION_PERCENTILE=10,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eo.DEFAULT=new Eo(M$,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eo.DISABLED=new Eo(-1,0,0);var Bv=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var vW="LruGarbageCollector",wye=1048576;function bW([n,e],[t,i]){let r=In(n,t);return r===0?In(e,i):r}var IL=class{constructor(e){this.Ir=e,this.buffer=new Tr(bW),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();bW(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},SL=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){nt(vW,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){km(t)?nt(vW,"Ignoring IndexedDB error during garbage collection: ",t):await DS(t)}await this.Vr(3e5)})}},TL=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(bF.ce);let i=new IL(t);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(yW)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yW):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),cm()<=mn.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function Eye(n,e){return new TL(n,e)}var CL=class{constructor(){this.changes=new ul(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,aa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var AL=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ML=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Av(i.mutation,r,Uh.empty(),_s.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Fn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Fn()){let r=Bh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ev();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Bh();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Fn()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=zu(),o=Tv(),a=(function(){return Tv()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Mm)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Av(u.mutation,l,u.mutation.getFieldMask(),_s.now())):o.set(l.key,Uh.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>a.set(l,new AL(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let i=Tv(),r=new qi((o,a)=>o-a),s=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||Uh.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||Fn()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=g$();u.forEach(h=>{if(!s.has(h)){let p=b$(t.get(h),i.get(h));p!==null&&d.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ie.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z_e(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ie.resolve(Bh()),a=Dv,c=s;return o.next(l=>Ie.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ie.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Fn())).next(u=>({batchId:a,changes:$_e(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ut(t)).next(i=>{let r=Ev();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Ev();return this.indexManager.getCollectionParents(e,s).next(a=>Ie.forEach(a,c=>{let l=(function(d,h){return new Sm(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,aa.newInvalidDocument(u)))});let a=Ev();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Av(u.mutation,l,Uh.empty(),_s.now()),NS(t,l)&&(a=a.insert(c,l))}),a})}};var DL=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:pm(r.createTime)}})(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:xye(r.bundledQuery),readTime:pm(r.readTime)}})(t)),Ie.resolve()}};var RL=class{constructor(){this.overlays=new qi(Ut.comparator),this.qr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Bh();return Ie.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.St(e,t,s)}),Ie.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),Ie.resolve()}getOverlaysForCollection(e,t,i){let r=Bh(),s=t.length+1,o=new Ut(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new qi((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Bh(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Bh(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Ie.resolve(a)}St(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new pL(t,i));let s=this.qr.get(t);s===void 0&&(s=Fn(),this.qr.set(t,s)),this.qr.set(t,s.add(i.key))}};var PL=class{constructor(){this.sessionToken=es.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}};var zv=class{constructor(){this.Qr=new Tr(nr.$r),this.Ur=new Tr(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new nr(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new nr(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){let t=new Ut(new gr([])),i=new nr(t,e),r=new nr(t,e+1),s=[];return this.Ur.forEachInRange([i,r],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ut(new gr([])),i=new nr(t,e),r=new nr(t,e+1),s=Fn();return this.Ur.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nr(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nr=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ut.comparator(e.key,t.key)||In(e.Yr,t.Yr)}static Kr(e,t){return In(e.Yr,t.Yr)||Ut.comparator(e.key,t.key)}};var kL=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tr(nr.$r)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new fL(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Zr=this.Zr.add(new nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,t){return Ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.ei(i),s=r<0?0:r;return Ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?E_e:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nr(t,0),r=new nr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],o=>{let a=this.Xr(o.Yr);s.push(a)}),Ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tr(In);return t.forEach(r=>{let s=new nr(r,0),o=new nr(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{i=i.add(a.Yr)})}),Ie.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Ut.isDocumentKey(s)||(s=s.child(""));let o=new nr(new Ut(s),0),a=new Tr(In);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Yr)),!0)},o),Ie.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(i=>{let r=this.Xr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Mi(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Ie.forEach(t.mutations,r=>{let s=new nr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new nr(t,0),r=this.Zr.firstAfterOrEqual(i);return Ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var NL=class{constructor(e){this.ri=e,this.docs=(function(){return new qi(Ut.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Ie.resolve(i?i.document.mutableCopy():aa.newInvalidDocument(t))}getEntries(e,t){let i=zu();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():aa.newInvalidDocument(r))}),Ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=zu(),o=t.path,a=new Ut(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||b_e(v_e(u),i)<=0||(r.has(u.key)||NS(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ie.resolve(s)}getAllFromCollectionGroup(e,t,i,r){qt(9500)}ii(e,t){return Ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new OL(this)}getSize(e){return Ie.resolve(this.size)}},OL=class extends CL{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var LL=class{constructor(e){this.persistence=e,this.si=new ul(t=>EF(t),IF),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.oi=0,this._i=new zv,this.targetCount=0,this.ai=Bv.ur()}forEachTarget(e,t){return this.si.forEach((i,r)=>t(r)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Ie.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Bv(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.Pr(t),Ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ie.waitFor(s).next(()=>r)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return Ie.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Ie.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return Ie.resolve(i)}containsKey(e,t){return Ie.resolve(this._i.containsKey(t))}};var mS=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new bF(0),this.li=!1,this.li=!0,this.hi=new PL,this.referenceDelegate=e(this),this.Pi=new LL(this),this.indexManager=new wL,this.remoteDocumentCache=(function(r){return new NL(r)})(i=>this.referenceDelegate.Ti(i)),this.serializer=new xL(t),this.Ii=new DL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new kL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){nt("MemoryPersistence","Starting transaction:",e);let r=new FL(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,t){return Ie.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}},FL=class extends YO{constructor(e){super(),this.currentSequenceNumber=e}},VL=class n{constructor(e){this.persistence=e,this.Ri=new zv,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw qt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(r=>this.fi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,i=>{let r=Ut.fromPath(i);return this.gi(e,r).next(s=>{s||t.removeEntry(r,sn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},gS=class n{constructor(e,t){this.persistence=e,this.pi=new ul(i=>I_e(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Eye(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return Ie.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?Ie.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,t).next(a=>{a||(i++,s.removeEntry(o,sn.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eS(e.data.value)),t}br(e,t,i){return Ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.pi.get(t);return Ie.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var UL=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Fn(),r=Fn();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var BL=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zL=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return I9()?8:w_e(no())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new BL;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(cm()<=mn.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",lm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(cm()<=mn.DEBUG&&nt("QueryEngine","Query:",lm(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(cm()<=mn.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",lm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xa(t))):Ie.resolve())}ys(e,t){if(lW(t))return Ie.resolve(null);let i=Xa(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=dL(t,null,"F"),i=Xa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Fn(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,dL(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,i,r){return lW(t)||r.isEqual(sn.min())?Ie.resolve(null):this.ps.getDocuments(e,i).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,i,r)?Ie.resolve(null):(cm()<=mn.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lm(t)),this.vs(e,o,t,y_e(r,Dv)).next(a=>a))})}Ds(e,t){let i=new Tr(p$(e));return t.forEach((r,s)=>{NS(e,s)&&(i=i.add(s))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,i){return cm()<=mn.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",lm(t)),this.ps.getDocumentsMatchingQuery(e,t,Wh.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var TF="LocalStore",Iye=3e8,HL=class{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new qi(In),this.xs=new ul(s=>EF(s),IF),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ML(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Sye(n,e,t,i){return new HL(n,e,t,i)}async function D$(n,e){let t=Dn(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=Fn();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function R$(n){let e=Dn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Tye(n,e){let t=Dn(n),i=e.snapshotVersion,r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,d)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(es.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),(function(b,g,v){return b.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Iye?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(h,p,u)&&a.push(t.Pi.updateTargetData(s,p))});let c=zu(),l=Fn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Cye(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!i.isEqual(sn.min())){let u=t.Pi.getLastRemoteSnapshotVersion(s).next(d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ie.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=r,s))}function Cye(n,e,t){let i=Fn(),r=Fn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=zu();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(sn.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):nt(TF,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:r}})}function Aye(n,e){let t=Dn(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Pi.getTargetData(i,e).next(s=>s?(r=s,Ie.resolve(r)):t.Pi.allocateTargetId(i).next(o=>(r=new Uv(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function jL(n,e,t){let i=Dn(n),r=i.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!km(o))throw o;nt(TF,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function xW(n,e,t){let i=Dn(n),r=sn.min(),s=Fn();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=Dn(c),h=d.xs.get(u);return h!==void 0?Ie.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)})(i,o,Xa(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,e,t?r:sn.min(),t?s:Fn())).next(a=>(Mye(i,j_e(e),a),{documents:a,Qs:s})))}function Mye(n,e,t){let i=n.Os.get(e)||sn.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Os.set(e,i)}var _S=class{constructor(){this.activeTargetIds=X_e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var GL=class{constructor(){this.Mo=new _S,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _S,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var WL=class{Oo(e){}shutdown(){}};var wW="ConnectivityMonitor",yS=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nt(wW,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){nt(wW,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ZI=null;function $L(){return ZI===null?ZI=(function(){return 268435456+Math.round(2147483648*Math.random())})():ZI++,"0x"+ZI.toString(16)}var UO="RestConnection",Dye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qL=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===JO?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,s){let o=$L(),a=this.zo(e,t.toUriEncodedString());nt(UO,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,s);let{host:l}=new URL(a),u=av(l);return this.Jo(e,a,c,i,u).then(d=>(nt(UO,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Mv(UO,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Ho(e,t,i,r,s,o){return this.Go(e,t,i,r,s)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,t){let i=Dye[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}};var KL=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Jr="WebChannelConnection",XL=class extends qL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,s){let o=$L();return new Promise((a,c)=>{let l=new DO;l.setWithCredentials(!0),l.listenOnce(RO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case wv.NO_ERROR:let d=l.getResponseJson();nt(Jr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case wv.TIMEOUT:nt(Jr,`RPC '${e}' ${o} timed out`),c(new Rt(We.DEADLINE_EXCEEDED,"Request time out"));break;case wv.HTTP_ERROR:let h=l.getStatus();if(nt(Jr,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let b=(function(v){let R=v.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(R)>=0?R:We.UNKNOWN})(_.status);c(new Rt(b,_.message))}else c(new Rt(We.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Rt(We.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{nt(Jr,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);nt(Jr,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}T_(e,t,i){let r=$L(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NO(),a=kO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");nt(Jr,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.I_(d);let h=!1,p=!1,_=new KL({Yo:g=>{p?nt(Jr,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(nt(Jr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),nt(Jr,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},Zo:()=>d.close()}),b=(g,v,R)=>{g.listen(v,P=>{try{R(P)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,am.EventType.OPEN,()=>{p||(nt(Jr,`RPC '${e}' stream ${r} transport opened.`),_.o_())}),b(d,am.EventType.CLOSE,()=>{p||(p=!0,nt(Jr,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(d))}),b(d,am.EventType.ERROR,g=>{p||(p=!0,Mv(Jr,`RPC '${e}' stream ${r} transport errored. Name:`,g.name,"Message:",g.message),_.a_(new Rt(We.UNAVAILABLE,"The operation could not be completed")))}),b(d,am.EventType.MESSAGE,g=>{if(!p){let v=g.data[0];Mi(!!v,16349);let R=v,P=R?.error||R[0]?.error;if(P){nt(Jr,`RPC '${e}' stream ${r} received error:`,P);let N=P.status,U=(function(w){let y=tr[w];if(y!==void 0)return w$(y)})(N),O=P.message;U===void 0&&(U=We.INTERNAL,O="Unknown error status: "+N+" with message "+P.message),p=!0,_.a_(new Rt(U,O)),d.close()}else nt(Jr,`RPC '${e}' stream ${r} received:`,v),_.u_(v)}}),b(a,PO.STAT_EVENT,g=>{g.stat===YI.PROXY?nt(Jr,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===YI.NOPROXY&&nt(Jr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function BO(){return typeof document<"u"?document:null}function P$(n){return new yL(n,!0)}var vS=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&nt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var EW="PersistentStream",YL=class{constructor(e,t,i,r,s,o,a,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(al(t.toString()),al("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===t&&this.G_(i,r)},i=>{e(()=>{let r=new Rt(We.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,t){let i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return nt(EW,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(nt(EW,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},QL=class extends YL{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=fye(this.serializer,e),i=(function(s){if(!("targetChange"in s))return sn.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?sn.min():o.readTime?pm(o.readTime):sn.min()})(e);return this.listener.H_(t,i)}Y_(e){let t={};t.database=_W(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=uL(c)?{documents:pye(s,c)}:{query:mye(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uye(s,o.resumeToken);let l=vL(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(sn.min())>0){a.readTime=lye(s,o.snapshotVersion.toTimestamp());let l=vL(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=_ye(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){let t={};t.database=_W(this.serializer),t.removeTarget=e,this.q_(t)}};var JL=class{},ZL=class extends JL{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Rt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,bL(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Rt(We.UNKNOWN,s.toString())})}Ho(e,t,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,bL(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Rt(We.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},eF=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(al(t),this.aa=!1):nt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Dm="RemoteStore",tF=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{$v(this)&&(nt(Dm,"Restarting streams for network reachability change."),await(async function(c){let l=Dn(c);l.Ea.add(4),await Wv(l),l.Ra.set("Unknown"),l.Ea.delete(4),await OS(l)})(this))})}),this.Ra=new eF(i,r)}};async function OS(n){if($v(n))for(let e of n.da)await e(!0)}async function Wv(n){for(let e of n.da)await e(!1)}function k$(n,e){let t=Dn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),DF(t)?MF(t):Nm(t).O_()&&AF(t,e))}function CF(n,e){let t=Dn(n),i=Nm(t);t.Ia.delete(e),i.O_()&&N$(t,e),t.Ia.size===0&&(i.O_()?i.L_():$v(t)&&t.Ra.set("Unknown"))}function AF(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nm(n).Y_(e)}function N$(n,e){n.Va.Ue(e),Nm(n).Z_(e)}function MF(n){n.Va=new _L({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Nm(n).start(),n.Ra.ua()}function DF(n){return $v(n)&&!Nm(n).x_()&&n.Ia.size>0}function $v(n){return Dn(n).Ea.size===0}function O$(n){n.Va=void 0}async function Rye(n){n.Ra.set("Online")}async function Pye(n){n.Ia.forEach((e,t)=>{AF(n,e)})}async function kye(n,e){O$(n),DF(n)?(n.Ra.ha(e),MF(n)):n.Ra.set("Unknown")}async function Nye(n,e,t){if(n.Ra.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(i){nt(Dm,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await IW(n,i)}else if(e instanceof fm?n.Va.Ze(e):e instanceof dS?n.Va.st(e):n.Va.tt(e),!t.isEqual(sn.min()))try{let i=await R$(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(es.EMPTY_BYTE_STRING,u.snapshotVersion)),N$(s,c);let d=new Uv(u.target,c,l,u.sequenceNumber);AF(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){nt(Dm,"Failed to raise snapshot:",i),await IW(n,i)}}async function IW(n,e,t){if(!km(e))throw e;n.Ea.add(1),await Wv(n),n.Ra.set("Offline"),t||(t=()=>R$(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{nt(Dm,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await OS(n)})}async function SW(n,e){let t=Dn(n);t.asyncQueue.verifyOperationInProgress(),nt(Dm,"RemoteStore received new credentials");let i=$v(t);t.Ea.add(3),await Wv(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await OS(t)}async function Oye(n,e){let t=Dn(n);e?(t.Ea.delete(2),await OS(t)):e||(t.Ea.add(2),await Wv(t),t.Ra.set("Unknown"))}function Nm(n){return n.ma||(n.ma=(function(t,i,r){let s=Dn(t);return s.sa(),new QL(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Xo:Rye.bind(null,n),t_:Pye.bind(null,n),r_:kye.bind(null,n),H_:Nye.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),DF(n)?MF(n):n.Ra.set("Unknown")):(await n.ma.stop(),O$(n))})),n.ma}var nF=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Uu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function L$(n,e){if(al("AsyncQueue",`${e}: ${n}`),km(n))return new Rt(We.UNAVAILABLE,`${e}: ${n}`);throw n}var bS=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ut.comparator(t.key,i.key):(t,i)=>Ut.comparator(t.key,i.key),this.keyedMap=Ev(),this.sortedSet=new qi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var xS=class{constructor(){this.ga=new qi(Ut.comparator)}track(e){let t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qt(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}},Rm=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,bS.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var iF=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},rF=class{constructor(){this.queries=TW(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){let r=Dn(t),s=r.queries;r.queries=TW(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(i)})})(this,new Rt(We.ABORTED,"Firestore shutting down"))}};function TW(){return new ul(n=>f$(n),kS)}async function Lye(n,e){let t=Dn(n),i=3,r=e.query,s=t.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new iF,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await t.onListen(r,!0);break;case 1:s.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=L$(o,`Initialization of query '${lm(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&RF(t)}async function Fye(n,e){let t=Dn(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Vye(n,e){let t=Dn(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(r)&&(i=!0);o.wa=r}}i&&RF(t)}function Uye(n,e,t){let i=Dn(n),r=i.queries.get(e);if(r)for(let s of r.Sa)s.onError(t);i.queries.delete(e)}function RF(n){n.Ca.forEach(e=>{e.next()})}var sF,CW;(CW=sF||(sF={})).Ma="default",CW.Cache="cache";var oF=class{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Rm(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sF.Cache}};var wS=class{constructor(e){this.key=e}},ES=class{constructor(e){this.key=e}},aF=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fn(),this.mutatedKeys=Fn(),this.eu=p$(e),this.tu=new bS(this.eu)}get nu(){return this.Ya}ru(e,t){let i=t?t.iu:new xS,r=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),p=NS(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),g=!1;h&&p?h.data.isEqual(p.data)?_!==b&&(i.track({type:3,doc:p}),g=!0):this.su(h,p)||(i.track({type:2,doc:p}),g=!0,(c&&this.eu(p,c)>0||l&&this.eu(p,l)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),g=!0):h&&!p&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(p?(o=o.add(p),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{tu:o,iu:i,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((u,d)=>(function(p,_){let b=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Rt:g})}};return b(p)-b(_)})(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(i),r=r??!1;let a=t&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new Rm(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Fn(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});let t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new ES(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new wS(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=Fn();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},PF="SyncEngine",cF=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},lF=class{constructor(e){this.key=e,this.hu=!1}},uF=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ul(a=>f$(a),kS),this.Iu=new Map,this.Eu=new Set,this.du=new qi(Ut.comparator),this.Au=new Map,this.Ru=new zv,this.Vu={},this.mu=new Map,this.fu=Bv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function Bye(n,e,t=!0){let i=z$(n),r,s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await F$(i,e,t,!0),r}async function zye(n,e){let t=z$(n);await F$(t,e,!0,!1)}async function F$(n,e,t,i){let r=await Aye(n.localStore,Xa(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await Hye(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&k$(n.remoteStore,r),a}async function Hye(n,e,t,i,r){n.pu=(d,h,p)=>(async function(b,g,v,R){let P=g.view.ru(v);P.Cs&&(P=await xW(b.localStore,g.query,!1).then(({documents:I})=>g.view.ru(I,P)));let N=R&&R.targetChanges.get(g.targetId),U=R&&R.targetMismatches.get(g.targetId)!=null,O=g.view.applyChanges(P,b.isPrimaryClient,N,U);return MW(b,g.targetId,O.au),O.snapshot})(n,d,h,p);let s=await xW(n.localStore,e,!0),o=new aF(e,s.Qs),a=o.ru(s.documents),c=Vv.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);MW(n,t,l.au);let u=new cF(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function jye(n,e,t){let i=Dn(n),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(o=>!kS(o,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await jL(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&CF(i.remoteStore,r.targetId),dF(i,r.targetId)}).catch(DS)):(dF(i,r.targetId),await jL(i.localStore,r.targetId,!0))}async function Gye(n,e){let t=Dn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),CF(t.remoteStore,i.targetId))}async function V$(n,e){let t=Dn(n);try{let i=await Tye(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Au.get(s);o&&(Mi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Mi(o.hu,14607):r.removedDocuments.size>0&&(Mi(o.hu,42227),o.hu=!1))}),await B$(t,i,e)}catch(i){await DS(i)}}function AW(n,e,t){let i=Dn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=Dn(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Sa)h.va(a)&&(l=!0)}),l&&RF(c)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Wye(n,e,t){let i=Dn(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Au.get(e),s=r&&r.key;if(s){let o=new qi(Ut.comparator);o=o.insert(s,aa.newNoDocument(s,sn.min()));let a=Fn().add(s),c=new uS(sn.min(),new Map,new qi(In),o,a);await V$(i,c),i.du=i.du.remove(s),i.Au.delete(e),kF(i)}else await jL(i.localStore,e,!1).then(()=>dF(i,e,t)).catch(DS)}function dF(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||U$(n,i)})}function U$(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(CF(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),kF(n))}function MW(n,e,t){for(let i of t)i instanceof wS?(n.Ru.addReference(i.key,e),$ye(n,i)):i instanceof ES?(nt(PF,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||U$(n,i.key)):qt(19791,{wu:i})}function $ye(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(nt(PF,"New document in limbo: "+t),n.Eu.add(i),kF(n))}function kF(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ut(gr.fromString(e)),i=n.fu.next();n.Au.set(i,new lF(t)),n.du=n.du.insert(t,i),k$(n.remoteStore,new Uv(Xa(SF(t.path)),i,"TargetPurposeLimboResolution",bF.ce))}}async function B$(n,e,t){let i=Dn(n),r=[],s=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,c)=>{o.push(i.pu(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient){let u=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;i.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){r.push(l);let u=UL.As(c.targetId,l);s.push(u)}}))}),await Promise.all(o),i.Pu.H_(r),await(async function(c,l){let u=Dn(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ie.forEach(l,h=>Ie.forEach(h.Es,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>Ie.forEach(h.ds,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!km(d))throw d;nt(TF,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let p=u.Ms.get(h),_=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(h,b)}}})(i.localStore,s))}async function qye(n,e){let t=Dn(n);if(!t.currentUser.isEqual(e)){nt(PF,"User change. New user:",e.toKey());let i=await D$(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Rt(We.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await B$(t,i.Ls)}}function Kye(n,e){let t=Dn(n),i=t.Au.get(e);if(i&&i.hu)return Fn().add(i.key);{let r=Fn(),s=t.Iu.get(e);if(!s)return r;for(let o of s){let a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function z$(n){let e=Dn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wye.bind(null,e),e.Pu.H_=Vye.bind(null,e.eventManager),e.Pu.yu=Uye.bind(null,e.eventManager),e}var H$=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=P$(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return Sye(this.persistence,new zL,t.initialUser,this.serializer)}Cu(t){return new mS(VL.mi,this.serializer)}Du(t){return new GL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),hF=class extends H${constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mi(this.persistence.referenceDelegate instanceof gS,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new SL(i,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Eo.withCacheSize(this.cacheSizeBytes):Eo.DEFAULT;return new mS(i=>gS.mi(i,t),this.serializer)}};var Xye=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AW(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qye.bind(null,this.syncEngine),await Oye(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new rF})()}createDatastore(t){let i=P$(t.databaseInfo.databaseId),r=(function(o){return new XL(o)})(t.databaseInfo);return(function(o,a,c,l){return new ZL(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new tF(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>AW(this.syncEngine,i,0),(function(){return yS.v()?new yS:new WL})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new uF(s,o,a,c,l,u);return d&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){let r=Dn(i);nt(Dm,"RemoteStore shutting down."),r.Ea.add(5),await Wv(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var fF=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):al("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Hu="FirestoreClient",pF=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Zr.UNAUTHENTICATED,this.clientId=iS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{nt(Hu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(nt(Hu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Uu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=L$(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function zO(n,e){n.asyncQueue.verifyOperationInProgress(),nt(Hu,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await D$(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function DW(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Yye(n);nt(Hu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>SW(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>SW(e.remoteStore,r)),n._onlineComponents=e}async function Yye(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){nt(Hu,"Using user provided OfflineComponentProvider");try{await zO(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===We.FAILED_PRECONDITION||r.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Mv("Error using user provided cache. Falling back to memory cache: "+t),await zO(n,new H$)}}else nt(Hu,"Using default OfflineComponentProvider"),await zO(n,new hF(void 0));return n._offlineComponents}async function Qye(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(nt(Hu,"Using user provided OnlineComponentProvider"),await DW(n,n._uninitializedComponentsProvider._online)):(nt(Hu,"Using default OnlineComponentProvider"),await DW(n,new Xye))),n._onlineComponents}async function RW(n){let e=await Qye(n),t=e.eventManager;return t.onListen=Bye.bind(null,e.syncEngine),t.onUnlisten=jye.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zye.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Gye.bind(null,e.syncEngine),t}function j$(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var PW=new Map;var Jye="firestore.googleapis.com",kW=!0,IS=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Rt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jye,this.ssl=kW}else this.host=e.host,this.ssl=e.ssl??kW;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=M$;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wye)throw new Rt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m_e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j$(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Rt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Rt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Rt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mF=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Rt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jO;switch(i.type){case"firstParty":return new $O(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Rt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=PW.get(t);i&&(nt("ComponentProvider","Removing Datastore"),PW.delete(t),i.terminate())})(this),Promise.resolve()}};var SS=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ol=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gF(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(jv(t,n._jsonSchema))return new n(e,i||null,new Ut(gr.fromString(t.referencePath)))}};ol._jsonSchemaVersion="firestore/documentReference/1.0",ol._jsonSchema={type:ir("string",ol._jsonSchemaVersion),referencePath:ir("string")};var gF=class n extends SS{constructor(e,t,i){super(e,t,SF(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ol(this.firestore,null,new Ut(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var NW="AsyncQueue",TS=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vS(this,"async_queue_retry"),this._c=()=>{let i=BO();i&&nt(NW,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let t=BO();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=BO();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Uu;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!km(e))throw e;nt(NW,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,al("INTERNAL UNHANDLED ERROR: ",OW(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=nF.createAndSchedule(this,e,t,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&qt(47125,{Pc:OW(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function OW(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function LW(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Hv=class extends mF{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new TS,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new TS(e),this._firestoreClient=void 0,await e}}};function Zye(n){if(n._terminated)throw new Rt(We.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eve(n),n._firestoreClient}function eve(n){let e=n._freezeSettings(),t=(function(r,s,o,a){return new QO(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,j$(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new pF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){let s=r?._online.build();return{_offline:r?._offline.build(s),_online:s}})(n._componentsProvider))}var mm=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(es.fromBase64String(e))}catch(t){throw new Rt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jv(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};mm._jsonSchemaVersion="firestore/bytes/1.0",mm._jsonSchema={type:ir("string",mm._jsonSchemaVersion),bytes:ir("string")};var CS=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Rt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gm=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Rt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Rt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return In(this._lat,e._lat)||In(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(jv(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};gm._jsonSchemaVersion="firestore/geoPoint/1.0",gm._jsonSchema={type:ir("string",gm._jsonSchemaVersion),latitude:ir("number"),longitude:ir("number")};var _m=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jv(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Rt(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};_m._jsonSchemaVersion="firestore/vectorValue/1.0",_m._jsonSchema={type:ir("string",_m._jsonSchemaVersion),vectorValues:ir("object")};var tve=new RegExp("[~\\*/\\[\\]]");function nve(n,e,t){if(e.search(tve)>=0)throw FW(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new CS(...e.split("."))._internalPath}catch{throw FW(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FW(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Rt(We.INVALID_ARGUMENT,a+n+c)}var AS=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ol(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _F(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(G$("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},_F=class extends AS{data(){return super.data()}};function G$(n,e){return typeof e=="string"?nve(n,e):e instanceof CS?e._internalPath:e._delegate._internalPath}function ive(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Rt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yF=class{convertValue(e,t="none"){switch(Bu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Gv(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){let t=e.fields?.[Pv].arrayValue?.values?.map(i=>wi(i.doubleValue));return new _m(t)}convertGeoPoint(e){return new gm(wi(e.latitude),wi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=PS(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Rv(e));default:return null}}convertTimestamp(e){let t=cl(e);return new _s(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=gr.fromString(e);Mi(A$(i),9688,{name:e});let r=new cS(i.get(1),i.get(3)),s=new Ut(i.popFirst(5));return r.isEqual(t)||al(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Hh=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jh=class n extends AS{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(G$("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};jh._jsonSchemaVersion="firestore/documentSnapshot/1.0",jh._jsonSchema={type:ir("string",jh._jsonSchemaVersion),bundleSource:ir("string","DocumentSnapshot"),bundleName:ir("string"),bundle:ir("string")};var ym=class extends jh{data(e={}){return super.data(e)}},vm=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Hh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ym(this._firestore,this._userDataWriter,i.key,i,new Hh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new ym(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ym(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:rve(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function rve(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:n})}}vm._jsonSchemaVersion="firestore/querySnapshot/1.0",vm._jsonSchema={type:ir("string",vm._jsonSchemaVersion),bundleSource:ir("string","QuerySnapshot"),bundleName:ir("string"),bundle:ir("string")};var MS=class extends yF{constructor(e){super(),this.firestore=e}convertBytes(e){return new mm(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ol(this.firestore,null,t)}};function W$(n,...e){n=ku(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||LW(e[i])||(t=e[i++]);let r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(LW(e[i])){let c=e[i];e[i]=c.next?.bind(c),e[i+1]=c.error?.bind(c),e[i+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof ol)o=LO(n.firestore,Hv),a=SF(n._key.path),s={next:c=>{e[i]&&e[i](sve(o,n,c))},error:e[i+1],complete:e[i+2]};else{let c=LO(n,SS);o=LO(c.firestore,Hv),a=c._query;let l=new MS(o);s={next:u=>{e[i]&&e[i](new vm(o,l,c,u))},error:e[i+1],complete:e[i+2]},ive(n._query)}return(function(l,u,d,h){let p=new fF(h),_=new oF(u,p,d);return l.asyncQueue.enqueueAndForget(async()=>Lye(await RW(l),_)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>Fye(await RW(l),_))}})(Zye(o),a,r,s)}function sve(n,e,t){let i=t.docs.get(e._key),r=new MS(n);return new jh(n,r,e._key,i,new Hh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Pm=r})(rm),Ou(new ia("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Hv(new GO(i.getProvider("auth-internal")),new qO(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Rt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cS(l.options.projectId,u)})(o,r),o);return s=ie({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qc(XG,YG,e),Qc(XG,YG,"esm2020")})();var LS=function(){return LS=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},LS.apply(this,arguments)};var ave={includeMetadataChanges:!1};function NF(n,e){return e===void 0&&(e=ave),new bt(function(t){var i=W$(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function $$(n){return NF(n,{includeMetadataChanges:!0})}function q$(n,e){return e===void 0&&(e={}),$$(n).pipe(yt(function(t){return OF(t,e)}))}function OF(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:LS(LS({},i),(t={},t[e.idField]=n.id,t))}function K$(n){return NF(n,{includeMetadataChanges:!0}).pipe(yt(function(e){return e.docs}))}function X$(n,e){return e===void 0&&(e={}),K$(n).pipe(yt(function(t){return t.map(function(i){return OF(i,e)})}))}var Y$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q$={};var dl,LF;(function(){var n;function e(I,w){function y(){}y.prototype=w.prototype,I.D=w.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(x,T,M){for(var C=Array(arguments.length-2),re=2;re<arguments.length;re++)C[re-2]=arguments[re];return w.prototype[T].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,y){y||(y=0);var x=Array(16);if(typeof w=="string")for(var T=0;16>T;++T)x[T]=w.charCodeAt(y++)|w.charCodeAt(y++)<<8|w.charCodeAt(y++)<<16|w.charCodeAt(y++)<<24;else for(T=0;16>T;++T)x[T]=w[y++]|w[y++]<<8|w[y++]<<16|w[y++]<<24;w=I.g[0],y=I.g[1],T=I.g[2];var M=I.g[3],C=w+(M^y&(T^M))+x[0]+3614090360&4294967295;w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[2]+606105819&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[3]+3250441966&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[4]+4118548399&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[6]+2821735955&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[7]+4249261313&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[8]+1770035416&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[10]+4294925233&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[11]+2304563134&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(M^y&(T^M))+x[12]+1804603682&4294967295,w=y+(C<<7&4294967295|C>>>25),C=M+(T^w&(y^T))+x[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=T+(y^M&(w^y))+x[14]+2792965006&4294967295,T=M+(C<<17&4294967295|C>>>15),C=y+(w^T&(M^w))+x[15]+1236535329&4294967295,y=T+(C<<22&4294967295|C>>>10),C=w+(T^M&(y^T))+x[1]+4129170786&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[11]+643717713&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[0]+3921069994&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[5]+3593408605&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[15]+3634488961&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[4]+3889429448&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[9]+568446438&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[3]+4107603335&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[8]+1163531501&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(T^M&(y^T))+x[13]+2850285829&4294967295,w=y+(C<<5&4294967295|C>>>27),C=M+(y^T&(w^y))+x[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=T+(w^y&(M^w))+x[7]+1735328473&4294967295,T=M+(C<<14&4294967295|C>>>18),C=y+(M^w&(T^M))+x[12]+2368359562&4294967295,y=T+(C<<20&4294967295|C>>>12),C=w+(y^T^M)+x[5]+4294588738&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[11]+1839030562&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[14]+4259657740&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[1]+2763975236&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[7]+4139469664&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[10]+3200236656&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[13]+681279174&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[3]+3572445317&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[6]+76029189&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(y^T^M)+x[9]+3654602809&4294967295,w=y+(C<<4&4294967295|C>>>28),C=M+(w^y^T)+x[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=T+(M^w^y)+x[15]+530742520&4294967295,T=M+(C<<16&4294967295|C>>>16),C=y+(T^M^w)+x[2]+3299628645&4294967295,y=T+(C<<23&4294967295|C>>>9),C=w+(T^(y|~M))+x[0]+4096336452&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[14]+2878612391&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[5]+4237533241&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[12]+1700485571&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[10]+4293915773&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[1]+2240044497&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[8]+1873313359&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[6]+2734768916&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[13]+1309151649&4294967295,y=T+(C<<21&4294967295|C>>>11),C=w+(T^(y|~M))+x[4]+4149444226&4294967295,w=y+(C<<6&4294967295|C>>>26),C=M+(y^(w|~T))+x[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=T+(w^(M|~y))+x[2]+718787259&4294967295,T=M+(C<<15&4294967295|C>>>17),C=y+(M^(T|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(T+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+M&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var y=w-this.blockSize,x=this.B,T=this.h,M=0;M<w;){if(T==0)for(;M<=y;)r(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<w;)if(x[T++]=I.charCodeAt(M++),T==this.blockSize){r(this,x),T=0;break}}else for(;M<w;)if(x[T++]=I[M++],T==this.blockSize){r(this,x),T=0;break}}this.h=T,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var y=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=y&255,y/=256;for(this.u(I),I=Array(16),w=y=0;4>w;++w)for(var x=0;32>x;x+=8)I[y++]=this.g[w]>>>x&255;return I};function s(I,w){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=w(I)}function o(I,w){this.h=w;for(var y=[],x=!0,T=I.length-1;0<=T;T--){var M=I[T]|0;x&&M==w||(y[T]=M,x=!1)}this.g=y}var a={};function c(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return g(l(-I));for(var w=[],y=1,x=0;I>=y;x++)w[x]=I/y|0,y*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return g(u(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=l(Math.pow(w,8)),x=d,T=0;T<I.length;T+=8){var M=Math.min(8,I.length-T),C=parseInt(I.substring(T,T+M),w);8>M?(M=l(Math.pow(w,M)),x=x.j(M).add(l(C))):(x=x.j(y),x=x.add(l(C)))}return x}var d=c(0),h=c(1),p=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-g(this).m();for(var I=0,w=1,y=0;y<this.g.length;y++){var x=this.i(y);I+=(0<=x?x:4294967296+x)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(b(this))return"-"+g(this).toString(I);for(var w=l(Math.pow(I,6)),y=this,x="";;){var T=N(y,w).g;y=v(y,T.j(w));var M=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=T,_(y))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=v(this,I),b(I)?-1:_(I)?0:1};function g(I){for(var w=I.g.length,y=[],x=0;x<w;x++)y[x]=~I.g[x];return new o(y,~I.h).add(h)}n.abs=function(){return b(this)?g(this):this},n.add=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0,T=0;T<=w;T++){var M=x+(this.i(T)&65535)+(I.i(T)&65535),C=(M>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);x=C>>>16,M&=65535,C&=65535,y[T]=C<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function v(I,w){return I.add(g(w))}n.j=function(I){if(_(this)||_(I))return d;if(b(this))return b(I)?g(this).j(g(I)):g(g(this).j(I));if(b(I))return g(this.j(g(I)));if(0>this.l(p)&&0>I.l(p))return l(this.m()*I.m());for(var w=this.g.length+I.g.length,y=[],x=0;x<2*w;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var T=0;T<I.g.length;T++){var M=this.i(x)>>>16,C=this.i(x)&65535,re=I.i(T)>>>16,Q=I.i(T)&65535;y[2*x+2*T]+=C*Q,R(y,2*x+2*T),y[2*x+2*T+1]+=M*Q,R(y,2*x+2*T+1),y[2*x+2*T+1]+=C*re,R(y,2*x+2*T+1),y[2*x+2*T+2]+=M*re,R(y,2*x+2*T+2)}for(x=0;x<w;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=w;x<2*w;x++)y[x]=0;return new o(y,0)};function R(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function P(I,w){this.g=I,this.h=w}function N(I,w){if(_(w))throw Error("division by zero");if(_(I))return new P(d,d);if(b(I))return w=N(g(I),w),new P(g(w.g),g(w.h));if(b(w))return w=N(I,g(w)),new P(g(w.g),w.h);if(30<I.g.length){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var y=h,x=w;0>=x.l(I);)y=U(y),x=U(x);var T=O(y,1),M=O(x,1);for(x=O(x,2),y=O(y,2);!_(x);){var C=M.add(x);0>=C.l(I)&&(T=T.add(y),M=C),x=O(x,1),y=O(y,1)}return w=v(I,T.j(w)),new P(T,w)}for(T=d;0<=I.l(w);){for(y=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=l(y),C=M.j(w);b(C)||0<C.l(I);)y-=x,M=l(y),C=M.j(w);_(M)&&(M=h),T=T.add(M),I=v(I,C)}return new P(T,I)}n.A=function(I){return N(this,I).h},n.and=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)&I.i(x);return new o(y,this.h&I.h)},n.or=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)|I.i(x);return new o(y,this.h|I.h)},n.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),y=[],x=0;x<w;x++)y[x]=this.i(x)^I.i(x);return new o(y,this.h^I.h)};function U(I){for(var w=I.g.length+1,y=[],x=0;x<w;x++)y[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(y,I.h)}function O(I,w){var y=w>>5;w%=32;for(var x=I.g.length-y,T=[],M=0;M<x;M++)T[M]=0<w?I.i(M+y)>>>w|I.i(M+y+1)<<32-w:I.i(M+y);return new o(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,LF=Q$.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,dl=Q$.Integer=o}).apply(typeof Y$<"u"?Y$:typeof self<"u"?self:typeof window<"u"?window:{});var FS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hl={};var FF,cve,Om,VF,qv,VS,UF,BF,zF;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,A){return f==Array.prototype||f==Object.prototype||(f[E]=A.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof FS=="object"&&FS];for(var E=0;E<f.length;++E){var A=f[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function r(f,E){if(E)e:{var A=i;f=f.split(".");for(var L=0;L<f.length-1;L++){var $=f[L];if(!($ in A))break e;A=A[$]}f=f[f.length-1],L=A[f],E=E(L),E!=L&&E!=null&&e(A,f,{configurable:!0,writable:!0,value:E})}}function s(f,E){f instanceof String&&(f+="");var A=0,L=!1,$={next:function(){if(!L&&A<f.length){var te=A++;return{value:E(te,f[te]),done:!1}}return L=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}r("Array.prototype.values",function(f){return f||function(){return s(this,function(E,A){return A})}});var o=o||{},a=this||self;function c(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function l(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function u(f,E,A){return f.call.apply(f.bind,arguments)}function d(f,E,A){if(!f)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,L),f.apply(E,$)}}return function(){return f.apply(E,arguments)}}function h(f,E,A){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(f,E){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function _(f,E){function A(){}A.prototype=E.prototype,f.aa=E.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(L,$,te){for(var Re=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)Re[Bn-2]=arguments[Bn];return E.prototype[$].apply(L,Re)}}function b(f){let E=f.length;if(0<E){let A=Array(E);for(let L=0;L<E;L++)A[L]=f[L];return A}return[]}function g(f,E){for(let A=1;A<arguments.length;A++){let L=arguments[A];if(c(L)){let $=f.length||0,te=L.length||0;f.length=$+te;for(let Re=0;Re<te;Re++)f[$+Re]=L[Re]}else f.push(L)}}class v{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function R(f){return/^[\s\xa0]*$/.test(f)}function P(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function N(f){return N[" "](f),f}N[" "]=function(){};var U=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function O(f,E,A){for(let L in f)E.call(A,f[L],L,f)}function I(f,E){for(let A in f)E.call(void 0,f[A],A,f)}function w(f){let E={};for(let A in f)E[A]=f[A];return E}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(f,E){let A,L;for(let $=1;$<arguments.length;$++){L=arguments[$];for(A in L)f[A]=L[A];for(let te=0;te<y.length;te++)A=y[te],Object.prototype.hasOwnProperty.call(L,A)&&(f[A]=L[A])}}function T(f){var E=1;f=f.split(":");let A=[];for(;0<E&&f.length;)A.push(f.shift()),E--;return f.length&&A.push(f.join(":")),A}function M(f){a.setTimeout(()=>{throw f},0)}function C(){var f=we;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class re{constructor(){this.h=this.g=null}add(E,A){let L=Q.get();L.set(E,A),this.h?this.h.next=L:this.g=L,this.h=L}}var Q=new v(()=>new ae,f=>f.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,se=!1,we=new re,Ae=()=>{let f=a.Promise.resolve(void 0);fe=()=>{f.then(Ze)}};var Ze=()=>{for(var f;f=C();){try{f.h.call(f.g)}catch(A){M(A)}var E=Q;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}se=!1};function pt(){this.s=this.s,this.C=this.C}pt.prototype.s=!1,pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var Bt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let A=()=>{};a.addEventListener("test",A,E),a.removeEventListener("test",A,E)}catch{}return f})();function jt(f,E){if(ct.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(U){e:{try{N(E.nodeName);var $=!0;break e}catch{}$=!1}$||(E=null)}}else A=="mouseover"?E=f.fromElement:A=="mouseout"&&(E=f.toElement);this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ue[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&jt.aa.h.call(this)}}_(jt,ct);var ue={2:"touch",3:"pen",4:"mouse"};jt.prototype.h=function(){jt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function _t(f,E,A,L,$){this.listener=f,this.proxy=null,this.src=E,this.type=A,this.capture=!!L,this.ha=$,this.key=++Qe,this.da=this.fa=!1}function it(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Gt(f){this.src=f,this.g={},this.h=0}Gt.prototype.add=function(f,E,A,L,$){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var Re=Tt(f,E,L,$);return-1<Re?(E=f[Re],A||(E.fa=!1)):(E=new _t(E,this.src,te,!!L,$),E.fa=A,f.push(E)),E};function Sn(f,E){var A=E.type;if(A in f.g){var L=f.g[A],$=Array.prototype.indexOf.call(L,E,void 0),te;(te=0<=$)&&Array.prototype.splice.call(L,$,1),te&&(it(E),f.g[A].length==0&&(delete f.g[A],f.h--))}}function Tt(f,E,A,L){for(var $=0;$<f.length;++$){var te=f[$];if(!te.da&&te.listener==E&&te.capture==!!A&&te.ha==L)return $}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),B={};function be(f,E,A,L,$){if(L&&L.once)return xe(f,E,A,L,$);if(Array.isArray(E)){for(var te=0;te<E.length;te++)be(f,E[te],A,L,$);return null}return A=oe(A),f&&f[me]?f.K(E,A,l(L)?!!L.capture:!!L,$):Se(f,E,A,!1,L,$)}function Se(f,E,A,L,$,te){if(!E)throw Error("Invalid event type");var Re=l($)?!!$.capture:!!$,Bn=k(f);if(Bn||(f[ye]=Bn=new Gt(f)),A=Bn.add(E,A,L,Re,te),A.proxy)return A;if(L=Pe(),A.proxy=L,L.src=f,L.listener=A,f.addEventListener)Bt||($=Re),$===void 0&&($=!1),f.addEventListener(E.toString(),L,$);else if(f.attachEvent)f.attachEvent($e(E.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Pe(){function f(A){return E.call(f.src,f.listener,A)}let E=z;return f}function xe(f,E,A,L,$){if(Array.isArray(E)){for(var te=0;te<E.length;te++)xe(f,E[te],A,L,$);return null}return A=oe(A),f&&f[me]?f.L(E,A,l(L)?!!L.capture:!!L,$):Se(f,E,A,!0,L,$)}function Fe(f,E,A,L,$){if(Array.isArray(E))for(var te=0;te<E.length;te++)Fe(f,E[te],A,L,$);else L=l(L)?!!L.capture:!!L,A=oe(A),f&&f[me]?(f=f.i,E=String(E).toString(),E in f.g&&(te=f.g[E],A=Tt(te,A,L,$),-1<A&&(it(te[A]),Array.prototype.splice.call(te,A,1),te.length==0&&(delete f.g[E],f.h--)))):f&&(f=k(f))&&(E=f.g[E.toString()],f=-1,E&&(f=Tt(E,A,L,$)),(A=-1<f?E[f]:null)&&Te(A))}function Te(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[me])Sn(E.i,f);else{var A=f.type,L=f.proxy;E.removeEventListener?E.removeEventListener(A,L,f.capture):E.detachEvent?E.detachEvent($e(A),L):E.addListener&&E.removeListener&&E.removeListener(L),(A=k(E))?(Sn(A,f),A.h==0&&(A.src=null,E[ye]=null)):it(f)}}}function $e(f){return f in B?B[f]:B[f]="on"+f}function z(f,E){if(f.da)f=!0;else{E=new jt(E,this);var A=f.listener,L=f.ha||f.src;f.fa&&Te(f),f=A.call(L,E)}return f}function k(f){return f=f[ye],f instanceof Gt?f:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(f){return typeof f=="function"?f:(f[X]||(f[X]=function(E){return f.handleEvent(E)}),f[X])}function he(){pt.call(this),this.i=new Gt(this),this.M=this,this.F=null}_(he,pt),he.prototype[me]=!0,he.prototype.removeEventListener=function(f,E,A,L){Fe(this,f,E,A,L)};function J(f,E){var A,L=f.F;if(L)for(A=[];L;L=L.F)A.push(L);if(f=f.M,L=E.type||E,typeof E=="string")E=new ct(E,f);else if(E instanceof ct)E.target=E.target||f;else{var $=E;E=new ct(L,f),x(E,$)}if($=!0,A)for(var te=A.length-1;0<=te;te--){var Re=E.g=A[te];$=tt(Re,L,!0,E)&&$}if(Re=E.g=f,$=tt(Re,L,!0,E)&&$,$=tt(Re,L,!1,E)&&$,A)for(te=0;te<A.length;te++)Re=E.g=A[te],$=tt(Re,L,!1,E)&&$}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var A=f.g[E],L=0;L<A.length;L++)it(A[L]);delete f.g[E],f.h--}}this.F=null},he.prototype.K=function(f,E,A,L){return this.i.add(String(f),E,!1,A,L)},he.prototype.L=function(f,E,A,L){return this.i.add(String(f),E,!0,A,L)};function tt(f,E,A,L){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var $=!0,te=0;te<E.length;++te){var Re=E[te];if(Re&&!Re.da&&Re.capture==A){var Bn=Re.listener,zi=Re.ha||Re.src;Re.fa&&Sn(f.i,Re),$=Bn.call(zi,L)!==!1&&$}}return $&&!L.defaultPrevented}function Ue(f,E,A){if(typeof f=="function")A&&(f=h(f,A));else if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function mt(f){f.g=Ue(()=>{f.g=null,f.i&&(f.i=!1,mt(f))},f.l);let E=f.h;f.h=null,f.m.apply(null,E)}class rt extends pt{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(f){pt.call(this),this.h=f,this.g={}}_(_e,pt);var Me=[];function xt(f){O(f.g,function(E,A){this.g.hasOwnProperty(A)&&Te(E)},f),f.g={}}_e.prototype.N=function(){_e.aa.N.call(this),xt(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=a.JSON.stringify,je=a.JSON.parse,kt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function j(){}j.prototype.h=null;function Be(f){return f.h||(f.h=f.i())}function ke(){}var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){ct.call(this,"d")}_(ge,ct);function pe(){ct.call(this,"c")}_(pe,ct);var qe={},At=null;function Un(){return At=At||new he}qe.La="serverreachability";function kn(f){ct.call(this,qe.La,f)}_(kn,ct);function Si(f){let E=Un();J(E,new kn(E))}qe.STAT_EVENT="statevent";function jr(f,E){ct.call(this,qe.STAT_EVENT,f),this.stat=E}_(jr,ct);function dr(f){let E=Un();J(E,new jr(E,f))}qe.Ma="timingevent";function ba(f,E){ct.call(this,qe.Ma,f),this.size=E}_(ba,ct);function Fo(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function vc(f,E,A,L,$,te){f.info(function(){if(f.g)if(te)for(var Re="",Bn=te.split("&"),zi=0;zi<Bn.length;zi++){var zn=Bn[zi].split("=");if(1<zn.length){var $r=zn[0];zn=zn[1];var qr=$r.split("_");Re=2<=qr.length&&qr[1]=="type"?Re+($r+"="+zn+"&"):Re+($r+"=redacted&")}}else Re=null;else Re=te;return"XMLHTTP REQ ("+L+") [attempt "+$+"]: "+E+`
`+A+`
`+Re})}function xa(f,E,A,L,$,te,Re){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+$+"]: "+E+`
`+A+`
`+te+" "+Re})}function Vo(f,E,A,L){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nd(f,A)+(L?" "+L:"")})}function as(f,E){f.info(function(){return"TIMEOUT: "+E})}Gr.prototype.info=function(){};function Nd(f,E){if(!f.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var L=A[f];if(!(2>L.length)){var $=L[1];if(Array.isArray($)&&!(1>$.length)){var te=$[0];if(te!="noop"&&te!="stop"&&te!="close")for(var Re=1;Re<$.length;Re++)$[Re]=""}}}}return gt(A)}catch{return E}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wa;function xc(){}_(xc,j),xc.prototype.g=function(){return new XMLHttpRequest},xc.prototype.i=function(){return{}},wa=new xc;function go(f,E,A,L){this.j=f,this.i=E,this.l=A,this.R=L||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Od}function Od(){this.i=null,this.g="",this.h=!1}var jf={},Ea={};function ql(f,E,A){f.L=1,f.v=Ui(Rr(E)),f.m=A,f.P=!0,F(f,null)}function F(f,E){f.F=Date.now(),ne(f),f.A=Rr(f.v);var A=f.A,L=f.R;Array.isArray(L)||(L=[String(L)]),ux(A.i,"t",L),f.C=0,A=f.j.J,f.h=new Od,f.g=S(f.j,A?E:null,!f.m),0<f.O&&(f.M=new rt(h(f.Y,f,f.g),f.O)),E=f.U,A=f.g,L=f.ca;var $="readystatechange";Array.isArray($)||($&&(Me[0]=$.toString()),$=Me);for(var te=0;te<$.length;te++){var Re=be(A,$[te],L||E.handleEvent,!1,E.h||E);if(!Re)break;E.g[Re.key]=Re}E=f.H?w(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Si(),vc(f.i,f.u,f.A,f.l,f.R,f.m)}go.prototype.ca=function(f){f=f.target;let E=this.M;E&&xs(f)==3?E.j():this.Y(f)},go.prototype.Y=function(f){try{if(f==this.g)e:{let qr=xs(this.g);var E=this.g.Ba();let Jf=this.g.Z();if(!(3>qr)&&(qr!=3||this.g&&(this.h.h||this.g.oa()||mx(this.g)))){this.J||qr!=4||E==7||(E==8||0>=Jf?Si(3):Si(2)),De(this);var A=this.g.Z();this.X=A;t:if(G(this)){var L=mx(this.g);f="";var $=L.length,te=xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Je(this),He(this);var Re="";break t}this.h.i=new a.TextDecoder}for(E=0;E<$;E++)this.h.h=!0,f+=this.h.i.decode(L[E],{stream:!(te&&E==$-1)});L.length=0,this.h.g+=f,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=A==200,xa(this.i,this.u,this.A,this.l,this.R,qr,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Bn,zi=this.g;if((Bn=zi.g?zi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Bn)){var zn=Bn;break t}}zn=null}if(A=zn)Vo(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,A);else{this.o=!1,this.s=3,dr(12),Je(this),He(this);break e}}if(this.P){A=!0;let Ho;for(;!this.J&&this.C<Re.length;)if(Ho=Z(this,Re),Ho==Ea){qr==4&&(this.s=4,dr(14),A=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ho==jf){this.s=4,dr(15),Vo(this.i,this.l,Re,"[Invalid Chunk]"),A=!1;break}else Vo(this.i,this.l,Ho,null),Ye(this,Ho);if(G(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qr!=4||Re.length!=0||this.h.h||(this.s=1,dr(16),A=!1),this.o=this.o&&A,!A)Vo(this.i,this.l,Re,"[Invalid Chunked Response]"),Je(this),He(this);else if(0<Re.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),Qf($r),$r.M=!0,dr(11))}}else Vo(this.i,this.l,Re,null),Ye(this,Re);qr==4&&Je(this),this.o&&!this.J&&(qr==4?Wr(this.j,this):(this.o=!1,ne(this)))}else gx(this.g),A==400&&0<Re.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Je(this),He(this)}}}catch{}finally{}};function G(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Z(f,E){var A=f.C,L=E.indexOf(`
`,A);return L==-1?Ea:(A=Number(E.substring(A,L)),isNaN(A)?jf:(L+=1,L+A>E.length?Ea:(E=E.slice(L,L+A),f.C=L+A,E)))}go.prototype.cancel=function(){this.J=!0,Je(this)};function ne(f){f.S=Date.now()+f.I,q(f,f.I)}function q(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Fo(h(f.ba,f),E)}function De(f){f.B&&(a.clearTimeout(f.B),f.B=null)}go.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(as(this.i,this.A),this.L!=2&&(Si(),dr(17)),Je(this),this.s=2,He(this)):q(this,this.S-f)};function He(f){f.j.G==0||f.J||Wr(f.j,f)}function Je(f){De(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,xt(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function Ye(f,E){try{var A=f.j;if(A.G!=0&&(A.g==f||Tn(A.h,f))){if(!f.K&&Tn(A.h,f)&&A.G==3){try{var L=A.Da.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var $=L;if($[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)Ec(A),Zl(A);else break e;Yf(A),dr(18)}}else A.za=$[1],0<A.za-A.T&&37500>$[2]&&A.F&&A.v==0&&!A.C&&(A.C=Fo(h(A.Za,A),6e3));if(1>=en(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ta(A,11)}else if((f.K||A.g==f)&&Ec(A),!R(E))for($=A.Da.g.parse(E),E=0;E<$.length;E++){let zn=$[E];if(A.T=zn[0],zn=zn[1],A.G==2)if(zn[0]=="c"){A.K=zn[1],A.ia=zn[2];let $r=zn[3];$r!=null&&(A.la=$r,A.j.info("VER="+A.la));let qr=zn[4];qr!=null&&(A.Aa=qr,A.j.info("SVER="+A.Aa));let Jf=zn[5];Jf!=null&&typeof Jf=="number"&&0<Jf&&(L=1.5*Jf,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;let Ho=f.g;if(Ho){let _x=Ho.g?Ho.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_x){var te=L.h;te.g||_x.indexOf("spdy")==-1&&_x.indexOf("quic")==-1&&_x.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(wn(te,te.h),te.h=null))}if(L.D){let OD=Ho.g?Ho.g.getResponseHeader("X-HTTP-Session-Id"):null;OD&&(L.ya=OD,Xt(L.I,L.D,OD))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var Re=f;if(L.qa=m(L,L.J?L.ia:null,L.W),Re.K){_n(L.h,Re);var Bn=Re,zi=L.L;zi&&(Bn.I=zi),Bn.B&&(De(Bn),ne(Bn)),L.g=Re}else P_(L);0<A.i.length&&Vd(A)}else zn[0]!="stop"&&zn[0]!="close"||Ta(A,7);else A.G==3&&(zn[0]=="stop"||zn[0]=="close"?zn[0]=="stop"?Ta(A,7):qf(A):zn[0]!="noop"&&A.l&&A.l.ta(zn),A.v=0)}}Si(4)}catch{}}var wt=class{constructor(f,E){this.g=f,this.map=E}};function Mt(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dt(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function en(f){return f.h?1:f.g?f.g.size:0}function Tn(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function wn(f,E){f.g?f.g.add(E):f.h=E}function _n(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}Mt.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function yn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(let A of f.g.values())E=E.concat(A.D);return E}return b(f.i)}function ht(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var E=[],A=f.length,L=0;L<A;L++)E.push(f[L]);return E}E=[],A=0;for(L in f)E[A++]=f[L];return E}function ei(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var E=[];f=f.length;for(var A=0;A<f;A++)E.push(A);return E}E=[],A=0;for(let L in f)E[A++]=L;return E}}}function ut(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var A=ei(f),L=ht(f),$=L.length,te=0;te<$;te++)E.call(void 0,L[te],A&&A[te],f)}var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vs(f,E){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var L=f[A].indexOf("="),$=null;if(0<=L){var te=f[A].substring(0,L);$=f[A].substring(L+1)}else te=f[A];E(te,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ai(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ai){this.h=f.h,Hn(this,f.j),this.o=f.o,this.g=f.g,Vi(this,f.s),this.l=f.l;var E=f.i,A=new Ld;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),Pr(this,A),this.m=f.m}else f&&(E=String(f).match(Fi))?(this.h=!1,Hn(this,E[1]||"",!0),this.o=cs(E[2]||""),this.g=cs(E[3]||"",!0),Vi(this,E[4]),this.l=cs(E[5]||"",!0),Pr(this,E[6]||"",!0),this.m=cs(E[7]||"")):(this.h=!1,this.i=new Ld(null,this.h))}ai.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Bi(E,S_,!0),":");var A=this.g;return(A||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Bi(E,S_,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(Bi(A,A.charAt(0)=="/"?ax:ox,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",Bi(A,Kl)),f.join("")};function Rr(f){return new ai(f)}function Hn(f,E,A){f.j=A?cs(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Vi(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Pr(f,E,A){E instanceof Ld?(f.i=E,Gf(f.i,f.h)):(A||(E=Bi(E,cx)),f.i=new Ld(E,f.h))}function Xt(f,E,A){f.i.set(E,A)}function Ui(f){return Xt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function cs(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Bi(f,E,A){return typeof f=="string"?(f=encodeURI(f).replace(E,sx),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function sx(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var S_=/[#\/\?@]/g,ox=/[#\?:]/g,ax=/[#\?]/g,cx=/[#\?@]/g,Kl=/#/g;function Ld(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function Ia(f){f.g||(f.g=new Map,f.h=0,f.i&&vs(f.i,function(E,A){f.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=Ld.prototype,n.add=function(f,E){Ia(this),this.i=null,f=Bo(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(E),this.h+=1,this};function lx(f,E){Ia(f),E=Bo(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function Uo(f,E){return Ia(f),E=Bo(f,E),f.g.has(E)}n.forEach=function(f,E){Ia(this),this.g.forEach(function(A,L){A.forEach(function($){f.call(E,$,L,this)},this)},this)},n.na=function(){Ia(this);let f=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let L=0;L<E.length;L++){let $=f[L];for(let te=0;te<$.length;te++)A.push(E[L])}return A},n.V=function(f){Ia(this);let E=[];if(typeof f=="string")Uo(this,f)&&(E=E.concat(this.g.get(Bo(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)E=E.concat(f[A])}return E},n.set=function(f,E){return Ia(this),this.i=null,f=Bo(this,f),Uo(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},n.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function ux(f,E,A){lx(f,E),0<A.length&&(f.i=null,f.g.set(Bo(f,E),b(A)),f.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var L=E[A];let te=encodeURIComponent(String(L)),Re=this.V(L);for(L=0;L<Re.length;L++){var $=te;Re[L]!==""&&($+="="+encodeURIComponent(String(Re[L]))),f.push($)}}return this.i=f.join("&")};function Bo(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Gf(f,E){E&&!f.j&&(Ia(f),f.i=null,f.g.forEach(function(A,L){var $=L.toLowerCase();L!=$&&(lx(this,L),ux(this,$,A))},f)),f.j=E}function dx(f,E){let A=new Gr;if(a.Image){let L=new Image;L.onload=p(bs,A,"TestLoadImage: loaded",!0,E,L),L.onerror=p(bs,A,"TestLoadImage: error",!1,E,L),L.onabort=p(bs,A,"TestLoadImage: abort",!1,E,L),L.ontimeout=p(bs,A,"TestLoadImage: timeout",!1,E,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else E(!1)}function Fd(f,E){let A=new Gr,L=new AbortController,$=setTimeout(()=>{L.abort(),bs(A,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:L.signal}).then(te=>{clearTimeout($),te.ok?bs(A,"TestPingServer: ok",!0,E):bs(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout($),bs(A,"TestPingServer: error",!1,E)})}function bs(f,E,A,L,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),L(A)}catch{}}function hx(){this.g=new kt}function T_(f,E,A){let L=A||"";try{ut(f,function($,te){let Re=$;l($)&&(Re=gt($)),E.push(L+te+"="+encodeURIComponent(Re))})}catch($){throw E.push(L+"type="+encodeURIComponent("_badmap")),$}}function ii(f){this.l=f.Ub||null,this.j=f.eb||!1}_(ii,j),ii.prototype.g=function(){return new Wf(this.l,this.j)},ii.prototype.i=(function(f){return function(){return f}})({});function Wf(f,E){he.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Wf,he),n=Wf.prototype,n.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,Yl(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xl(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fx(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function fx(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?Xl(this):Yl(this),this.readyState==3&&fx(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Xl(this))},n.Qa=function(f){this.g&&(this.response=f,Xl(this))},n.ga=function(){this.g&&Xl(this)};function Xl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Yl(f)}n.setRequestHeader=function(f,E){this.u.append(f,E)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=E.next();return f.join(`\r
`)};function Yl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function C_(f){let E="";return O(f,function(A,L){E+=L,E+=":",E+=A,E+=`\r
`}),E}function Ql(f,E,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=C_(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):Xt(f,E,A))}function jn(f){he.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(jn,he);var px=/^https?$/i,ND=["POST","PUT"];n=jn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,E,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wa.g(),this.v=this.o?Be(this.o):Be(wa),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(te){Jl(this,te);return}if(f=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var $ in L)A.set($,L[$]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(let te of L.keys())A.set(te,L.get(te));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(te=>te.toLowerCase()=="content-type"),$=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ND,E,void 0))||L||$||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[te,Re]of A)this.g.setRequestHeader(te,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{M_(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){Jl(this,te)}};function Jl(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,A_(f),wc(f)}function A_(f){f.A||(f.A=!0,J(f,"complete"),J(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,J(this,"complete"),J(this,"abort"),wc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wc(this,!0)),jn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$f(this):this.bb())},n.bb=function(){$f(this)};function $f(f){if(f.h&&typeof o<"u"&&(!f.v[1]||xs(f)!=4||f.Z()!=2)){if(f.u&&xs(f)==4)Ue(f.Ea,0,f);else if(J(f,"readystatechange"),xs(f)==4){f.h=!1;try{let Re=f.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var L;if(L=Re===0){var $=String(f.D).match(Fi)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),L=!px.test($?$.toLowerCase():"")}A=L}if(A)J(f,"complete"),J(f,"success");else{f.m=6;try{var te=2<xs(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",A_(f)}}finally{wc(f)}}}}function wc(f,E){if(f.g){M_(f);let A=f.g,L=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||J(f,"ready");try{A.onreadystatechange=L}catch{}}}function M_(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function xs(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<xs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),je(E)}};function mx(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function gx(f){let E={};f=(f.g&&2<=xs(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(R(f[L]))continue;var A=T(f[L]);let $=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();let te=E[$]||[];E[$]=te,te.push(A)}I(E,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(f,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||E}function D_(f){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,f),this.cb=zo("retryDelaySeedMs",1e4,f),this.Wa=zo("forwardChannelMaxRetries",2,f),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Mt(f&&f.concurrentRequestLimit),this.Da=new hx,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=D_.prototype,n.la=8,n.G=1,n.connect=function(f,E,A,L){dr(0),this.W=f,this.H=E||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=m(this,null,this.W),Vd(this)};function qf(f){if(Kf(f),f.G==3){var E=f.U++,A=Rr(f.I);if(Xt(A,"SID",f.K),Xt(A,"RID",E),Xt(A,"TYPE","terminate"),eu(f,A),E=new go(f,f.j,E),E.L=2,E.v=Ui(Rr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=E.v,A=!0),A||(E.g=S(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ne(E)}Ic(f)}function Zl(f){f.g&&(Qf(f),f.g.cancel(),f.g=null)}function Kf(f){Zl(f),f.u&&(a.clearTimeout(f.u),f.u=null),Ec(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Vd(f){if(!dt(f.h)&&!f.s){f.s=!0;var E=f.Ga;fe||Ae(),se||(fe(),se=!0),we.add(E,f),f.B=0}}function Xf(f,E){return en(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Fo(h(f.Ga,f,E),N_(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let $=new go(this,this.j,f),te=this.o;if(this.S&&(te?(te=w(te),x(te,this.S)):te=this.S),this.m!==null||this.O||($.H=te,te=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Sa(this,$,E),A=Rr(this.I),Xt(A,"RID",f),Xt(A,"CVER",22),this.D&&Xt(A,"X-HTTP-Session-Id",this.D),eu(this,A),te&&(this.O?E="headers="+encodeURIComponent(String(C_(te)))+"&"+E:this.m&&Ql(A,this.m,te)),wn(this.h,$),this.Ua&&Xt(A,"TYPE","init"),this.P?(Xt(A,"$req",E),Xt(A,"SID","null"),$.T=!0,ql($,A,null)):ql($,A,E),this.G=2}}else this.G==3&&(f?R_(this,f):this.i.length==0||dt(this.h)||R_(this))};function R_(f,E){var A;E?A=E.l:A=f.U++;let L=Rr(f.I);Xt(L,"SID",f.K),Xt(L,"RID",A),Xt(L,"AID",f.T),eu(f,L),f.m&&f.o&&Ql(L,f.m,f.o),A=new go(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),E&&(f.i=E.D.concat(f.i)),E=Sa(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),wn(f.h,A),ql(A,L,E)}function eu(f,E){f.H&&O(f.H,function(A,L){Xt(E,L,A)}),f.l&&ut({},function(A,L){Xt(E,L,A)})}function Sa(f,E,A){A=Math.min(f.i.length,A);var L=f.l?h(f.l.Na,f.l,f):null;e:{var $=f.i;let te=-1;for(;;){let Re=["count="+A];te==-1?0<A?(te=$[0].g,Re.push("ofs="+te)):te=0:Re.push("ofs="+te);let Bn=!0;for(let zi=0;zi<A;zi++){let zn=$[zi].g,$r=$[zi].map;if(zn-=te,0>zn)te=Math.max(0,$[zi].g-100),Bn=!1;else try{T_($r,Re,"req"+zn+"_")}catch{L&&L($r)}}if(Bn){L=Re.join("&");break e}}}return f=f.i.splice(0,A),E.D=f,L}function P_(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;fe||Ae(),se||(fe(),se=!0),we.add(E,f),f.v=0}}function Yf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Fo(h(f.Fa,f),N_(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,k_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Fo(h(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),Zl(this),k_(this))};function Qf(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function k_(f){f.g=new go(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=Rr(f.qa);Xt(E,"RID","rpc"),Xt(E,"SID",f.K),Xt(E,"AID",f.T),Xt(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Xt(E,"TO",f.ja),Xt(E,"TYPE","xmlhttp"),eu(f,E),f.m&&f.o&&Ql(E,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=Ui(Rr(E)),A.m=null,A.P=!0,F(A,f)}n.Za=function(){this.C!=null&&(this.C=null,Zl(this),Yf(this),dr(19))};function Ec(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Wr(f,E){var A=null;if(f.g==E){Ec(f),Qf(f),f.g=null;var L=2}else if(Tn(f.h,E))A=E.D,_n(f.h,E),L=1;else return;if(f.G!=0){if(E.o)if(L==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var $=f.B;L=Un(),J(L,new ba(L,A)),Vd(f)}else P_(f);else if($=E.s,$==3||$==0&&0<E.X||!(L==1&&Xf(f,E)||L==2&&Yf(f)))switch(A&&0<A.length&&(E=f.h,E.i=E.i.concat(A)),$){case 1:Ta(f,5);break;case 4:Ta(f,10);break;case 3:Ta(f,6);break;default:Ta(f,2)}}}function N_(f,E){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*E}function Ta(f,E){if(f.j.info("Error code "+E),E==2){var A=h(f.fb,f),L=f.Xa;let $=!L;L=new ai(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hn(L,"https"),Ui(L),$?dx(L.toString(),A):Fd(L.toString(),A)}else dr(2);f.G=0,f.l&&f.l.sa(E),Ic(f),Kf(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function Ic(f){if(f.G=0,f.ka=[],f.l){let E=yn(f.h);(E.length!=0||f.i.length!=0)&&(g(f.ka,E),g(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function m(f,E,A){var L=A instanceof ai?Rr(A):new ai(A);if(L.g!="")E&&(L.g=E+"."+L.g),Vi(L,L.s);else{var $=a.location;L=$.protocol,E=E?E+"."+$.hostname:$.hostname,$=+$.port;var te=new ai(null);L&&Hn(te,L),E&&(te.g=E),$&&Vi(te,$),A&&(te.l=A),L=te}return A=f.D,E=f.ya,A&&E&&Xt(L,A,E),Xt(L,"VER",f.la),eu(f,L),L}function S(f,E,A){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new jn(new ii({eb:A})):new jn(f.pa),E.Ha(f.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function D(){}n=D.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function V(){}V.prototype.g=function(f,E){return new W(f,E)};function W(f,E){he.call(this),this.g=new D_(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!R(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!R(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Ft(this)}_(W,he),W.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},W.prototype.close=function(){qf(this.g)},W.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=gt(f),f=A);E.i.push(new wt(E.Ya++,f)),E.G==3&&Vd(E)},W.prototype.N=function(){this.g.l=null,delete this.j,qf(this.g),delete this.g,W.aa.N.call(this)};function ee(f){ge.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(let A in E){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}_(ee,ge);function Le(){pe.call(this),this.status=1}_(Le,pe);function Ft(f){this.g=f}_(Ft,D),Ft.prototype.ua=function(){J(this.g,"a")},Ft.prototype.ta=function(f){J(this.g,new ee(f))},Ft.prototype.sa=function(f){J(this.g,new Le)},Ft.prototype.ra=function(){J(this.g,"b")},V.prototype.createWebChannel=V.prototype.g,W.prototype.send=W.prototype.o,W.prototype.open=W.prototype.m,W.prototype.close=W.prototype.close,zF=hl.createWebChannelTransport=function(){return new V},BF=hl.getStatEventTarget=function(){return Un()},UF=hl.Event=qe,VS=hl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,qv=hl.ErrorCode=mo,bc.COMPLETE="complete",VF=hl.EventType=bc,ke.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,Om=hl.WebChannel=ke,cve=hl.FetchXmlHttpFactory=ii,jn.prototype.listenOnce=jn.prototype.L,jn.prototype.getLastError=jn.prototype.Ka,jn.prototype.getLastErrorCode=jn.prototype.Ba,jn.prototype.getStatus=jn.prototype.Z,jn.prototype.getResponseJson=jn.prototype.Oa,jn.prototype.getResponseText=jn.prototype.oa,jn.prototype.send=jn.prototype.ea,jn.prototype.setWithCredentials=jn.prototype.Ha,FF=hl.XhrIo=jn}).apply(typeof FS<"u"?FS:typeof self<"u"?self:typeof window<"u"?window:{});var J$="@firebase/firestore",Z$="4.8.0";var Cr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");var ig="11.10.0";var Yh=new Ga("@firebase/firestore");function Lm(){return Yh.logLevel}function et(n,...e){if(Yh.logLevel<=pn.DEBUG){let t=e.map(RV);Yh.debug(`Firestore (${ig}): ${n}`,...t)}}function fl(n,...e){if(Yh.logLevel<=pn.ERROR){let t=e.map(RV);Yh.error(`Firestore (${ig}): ${n}`,...t)}}function qu(n,...e){if(Yh.logLevel<=pn.WARN){let t=e.map(RV);Yh.warn(`Firestore (${ig}): ${n}`,...t)}}function RV(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ot(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,jq(n,i,t)}function jq(n,e,t){let i=`FIRESTORE (${ig}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw fl(i),new Error(i)}function Jn(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||jq(e,r,i)}function Kt(n,e){return n}var de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ca=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var WS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$F=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}},qF=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},KF=class{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jn(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ca,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ca)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Jn(typeof i.accessToken=="string",31837,{l:i}),new WS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Jn(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}},XF=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},YF=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new XF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$S=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QF=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,to(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Jn(this.o===void 0,3512);let i=s=>{s.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $S(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $S(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lve(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function Gq(){return new TextEncoder}var Jv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=lve(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function ln(n,e){return n<e?-1:n>e?1:0}function JF(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return ln(i,r);{let s=Gq(),o=uve(s.encode(eq(n,t)),s.encode(eq(e,t)));return o!==0?o:ln(i,r)}}t+=i>65535?2:1}return ln(n.length,e.length)}function eq(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function uve(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ln(n[t],e[t]);return ln(n.length,e.length)}function Wm(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var tq="__name__",qS=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ot(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ot(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return ln(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):JF(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dl.fromString(e.substring(4,e.length-2))}},_i=class n extends qS{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ve(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},dve=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ro=class n extends qS{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return dve.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tq}static keyField(){return new n([tq])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var St=class n{constructor(e){this.path=e}static fromPath(e){return new n(_i.fromString(e))}static fromName(e){return new n(_i.fromString(e).popFirst(5))}static empty(){return new n(_i.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_i.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _i.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _i(e.slice()))}};function Wq(n,e,t){if(!t)throw new Ve(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hve(n,e,t,i){if(e===!0&&i===!0)throw new Ve(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nq(n){if(!St.isDocumentKey(n))throw new Ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iq(n){if(St.isDocumentKey(n))throw new Ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $q(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function TT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ot(12329,{type:typeof n})}function la(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=TT(n);throw new Ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fve(n,e){if(e<=0)throw new Ve(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ar(n,e){let t={typeString:n};return e&&(t.value=e),t}function d0(n,e){if(!$q(n))throw new Ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let o=n[i];if(r&&typeof o!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${i}' field to equal '${s.value}'`;break}}if(t)throw new Ve(de.INVALID_ARGUMENT,t);return!0}var rq=-62135596800,sq=1e6,cr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sq);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rq)throw new Ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sq}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(d0(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rq;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:ar("string",cr._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};var Zt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new cr(0,0))}static max(){return new n(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zv=-1,ZF=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};ZF.UNKNOWN_ID=-1;function pve(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(i===1e9?new cr(t+1,0):new cr(t,i));return new Qh(r,St.empty(),e)}function mve(n){return new Qh(n.readTime,n.key,Zv)}var Qh=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Zt.min(),St.empty(),Zv)}static max(){return new n(Zt.max(),St.empty(),Zv)}};function gve(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=St.comparator(n.documentKey,e.documentKey),t!==0?t:ln(n.largestBatchId,e.largestBatchId))}var _ve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",e2=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function rg(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==_ve)throw n;et("LocalStore","Unexpectedly lost primary lease")}var Ee=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function yve(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sg(n){return n.name==="IndexedDbTransactionError"}var PV=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),kV=-1;function CT(n){return n==null}function e0(n){return n===0&&1/n==-1/0}function vve(n){return typeof n=="number"&&Number.isInteger(n)&&!e0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var qq="";function bve(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oq(e)),e=xve(n.get(t),e);return oq(e)}function xve(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case qq:t+="";break;default:t+=s}}return t}function oq(n){return n+qq+""}var wve="remoteDocuments",Kq="owner";var Xq="mutationQueues";var Yq="mutations";var Qq="documentMutations",Eve="remoteDocumentsV14";var Jq="remoteDocumentGlobal";var Zq="targets";var e7="targetDocuments";var t7="targetGlobal",n7="collectionParents";var i7="clientMetadata";var r7="bundles";var s7="namedQueries";var Ive="indexConfiguration";var Sve="indexState";var Tve="indexEntries";var o7="documentOverlays";var Cve="globals";var Ave=[Xq,Yq,Qq,wve,Zq,Kq,t7,e7,i7,Jq,n7,r7,s7],HXe=[...Ave,o7],Mve=[Xq,Yq,Qq,Eve,Zq,Kq,t7,e7,i7,Jq,n7,r7,s7,o7],Dve=Mve,Rve=[...Dve,Ive,Sve,Tve];var jXe=[...Rve,Cve];function aq(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ju(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a7(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oi=class n{constructor(e,t){this.comparator=e,this.root=t||Ja.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ja.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ja.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bm(this.root,e,this.comparator,!0)}},Bm=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ja=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ot(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ot(27949);return e+(this.isRed()?0:1)}};Ja.EMPTY=null,Ja.RED=!0,Ja.BLACK=!1;Ja.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot(57766)}get value(){throw Ot(16141)}get color(){throw Ot(16727)}get left(){throw Ot(29726)}get right(){throw Ot(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ja(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ar=class n{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KS(this.data.getIterator())}getIteratorFrom(e){return new KS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},KS=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var So=class n{constructor(e){this.fields=e,e.sort(ro.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ar(ro.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wm(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var XS=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ns=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new XS("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ns.EMPTY_BYTE_STRING=new ns("");var Pve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pl(n){if(Jn(!!n,39018),typeof n=="string"){let e=0,t=Pve.exec(n);if(Jn(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ei(n.seconds),nanos:Ei(n.nanos)}}function Ei(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ml(n){return typeof n=="string"?ns.fromBase64String(n):ns.fromUint8Array(n)}var c7="server_timestamp",l7="__type__",u7="__previous_value__",d7="__local_write_time__";function AT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[l7])===null||t===void 0?void 0:t.stringValue)===c7}function MT(n){let e=n.mapValue.fields[u7];return AT(e)?MT(e):e}function t0(n){let e=pl(n.mapValue.fields[d7].timestampValue);return new cr(e.seconds,e.nanos)}var t2=class{constructor(e,t,i,r,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},YS="(default)",QS=class n{constructor(e,t){this.projectId=e,this.database=t||YS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===YS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var NV="__type__",h7="__max__",US={mapValue:{fields:{__type__:{stringValue:h7}}}},OV="__vector__",$m="value";function Ku(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AT(n)?4:p7(n)?9007199254740991:f7(n)?10:11:Ot(28295,{value:n})}function nc(n,e){if(n===e)return!0;let t=Ku(n);if(t!==Ku(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return t0(n).isEqual(t0(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=pl(r.timestampValue),a=pl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,s){return ml(r.bytesValue).isEqual(ml(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ei(r.geoPointValue.latitude)===Ei(s.geoPointValue.latitude)&&Ei(r.geoPointValue.longitude)===Ei(s.geoPointValue.longitude)})(n,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ei(r.integerValue)===Ei(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ei(r.doubleValue),a=Ei(s.doubleValue);return o===a?e0(o)===e0(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Wm(n.arrayValue.values||[],e.arrayValue.values||[],nc);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(aq(o)!==aq(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!nc(o[c],a[c])))return!1;return!0})(n,e);default:return Ot(52216,{left:n})}}function n0(n,e){return(n.values||[]).find(t=>nc(t,e))!==void 0}function qm(n,e){if(n===e)return 0;let t=Ku(n),i=Ku(e);if(t!==i)return ln(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ln(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ei(s.integerValue||s.doubleValue),c=Ei(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return cq(n.timestampValue,e.timestampValue);case 4:return cq(t0(n),t0(e));case 5:return JF(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=ml(s),c=ml(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ln(a[l],c[l]);if(u!==0)return u}return ln(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ln(Ei(s.latitude),Ei(o.latitude));return a!==0?a:ln(Ei(s.longitude),Ei(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lq(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,u;let d=s.fields||{},h=o.fields||{},p=(a=d[$m])===null||a===void 0?void 0:a.arrayValue,_=(c=h[$m])===null||c===void 0?void 0:c.arrayValue,b=ln(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=_?.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:lq(p,_)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===US.mapValue&&o===US.mapValue)return 0;if(s===US.mapValue)return 1;if(o===US.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=JF(c[d],u[d]);if(h!==0)return h;let p=qm(a[c[d]],l[u[d]]);if(p!==0)return p}return ln(c.length,u.length)})(n.mapValue,e.mapValue);default:throw Ot(23264,{le:t})}}function cq(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ln(n,e);let t=pl(n),i=pl(e),r=ln(t.seconds,i.seconds);return r!==0?r:ln(t.nanos,i.nanos)}function lq(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=qm(t[r],i[r]);if(s)return s}return ln(t.length,i.length)}function Km(n){return n2(n)}function n2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=pl(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ml(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return St.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=n2(s);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${n2(t.fields[o])}`;return r+"}"})(n.mapValue):Ot(61005,{value:n})}function HS(n){switch(Ku(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=MT(n);return e?16+HS(e):16;case 5:return 2*n.stringValue.length;case 6:return ml(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,s)=>r+HS(s),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ju(i.fields,(s,o)=>{r+=s.length+HS(o)}),r})(n.mapValue);default:throw Ot(13486,{value:n})}}function JS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function i2(n){return!!n&&"integerValue"in n}function LV(n){return!!n&&"arrayValue"in n}function uq(n){return!!n&&"nullValue"in n}function dq(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jS(n){return!!n&&"mapValue"in n}function f7(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[NV])===null||t===void 0?void 0:t.stringValue)===OV}function Xv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ju(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Xv(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function p7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===h7}var WXe={mapValue:{fields:{[NV]:{stringValue:OV},[$m]:{arrayValue:{}}}}};var io=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xv(t)}setAll(e){let t=ro.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Xv(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());jS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];jS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ju(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Xv(this.value))}};function m7(n){let e=[];return Ju(n.fields,(t,i)=>{let r=new ro([t]);if(jS(i)){let s=m7(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new So(e)}var ua=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Zt.min(),Zt.min(),Zt.min(),io.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Zt.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Zt.min(),Zt.min(),io.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Zt.min(),Zt.min(),io.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xu=class{constructor(e,t){this.position=e,this.inclusive=t}};function hq(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=St.comparator(St.fromName(o.referenceValue),t.key):i=qm(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function fq(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nc(n.position[t],e.position[t]))return!1;return!0}var Jh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function kve(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ZS=class{},or=class n extends ZS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new s2(e,t,i):t==="array-contains"?new c2(e,i):t==="in"?new l2(e,i):t==="not-in"?new u2(e,i):t==="array-contains-any"?new d2(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new o2(e,i):new a2(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qm(t,this.value)):t!==null&&Ku(this.value)===Ku(t)&&this.matchesComparison(qm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},da=class n extends ZS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return g7(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function g7(n){return n.op==="and"}function _7(n){return Nve(n)&&g7(n)}function Nve(n){for(let e of n.filters)if(e instanceof da)return!1;return!0}function r2(n){if(n instanceof or)return n.field.canonicalString()+n.op.toString()+Km(n.value);if(_7(n))return n.filters.map(e=>r2(e)).join(",");{let e=n.filters.map(t=>r2(t)).join(",");return`${n.op}(${e})`}}function y7(n,e){return n instanceof or?(function(i,r){return r instanceof or&&i.op===r.op&&i.field.isEqual(r.field)&&nc(i.value,r.value)})(n,e):n instanceof da?(function(i,r){return r instanceof da&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&y7(o,r.filters[a]),!0):!1})(n,e):void Ot(19439)}function v7(n){return n instanceof or?(function(t){return`${t.field.canonicalString()} ${t.op} ${Km(t.value)}`})(n):n instanceof da?(function(t){return t.op.toString()+" {"+t.getFilters().map(v7).join(" ,")+"}"})(n):"Filter"}var s2=class extends or{constructor(e,t,i){super(e,t,i),this.key=St.fromName(i.referenceValue)}matches(e){let t=St.comparator(e.key,this.key);return this.matchesComparison(t)}},o2=class extends or{constructor(e,t){super(e,"in",t),this.keys=b7("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},a2=class extends or{constructor(e,t){super(e,"not-in",t),this.keys=b7("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function b7(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>St.fromName(i.referenceValue))}var c2=class extends or{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return LV(t)&&n0(t.arrayValue,this.value)}},l2=class extends or{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&n0(this.value.arrayValue,t)}},u2=class extends or{constructor(e,t){super(e,"not-in",t)}matches(e){if(n0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!n0(this.value.arrayValue,t)}},d2=class extends or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!LV(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>n0(this.value.arrayValue,i))}};var h2=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function pq(n,e=null,t=[],i=[],r=null,s=null,o=null){return new h2(n,e,t,i,r,s,o)}function FV(n){let e=Kt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>r2(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(s){return s.field.canonicalString()+s.dir})(i)).join(","),CT(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Km(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Km(i)).join(",")),e.Pe=t}return e.Pe}function VV(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kve(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!y7(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fq(n.startAt,e.startAt)&&fq(n.endAt,e.endAt)}function f2(n){return St.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var gl=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Ove(n,e,t,i,r,s,o,a){return new gl(n,e,t,i,r,s,o,a)}function UV(n){return new gl(n)}function mq(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BV(n){return n.collectionGroup!==null}function zm(n){let e=Kt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ar(ro.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Jh(s,i))}),t.has(ro.keyField().canonicalString())||e.Te.push(new Jh(ro.keyField(),i))}return e.Te}function Za(n){let e=Kt(n);return e.Ie||(e.Ie=Lve(e,zm(n))),e.Ie}function Lve(n,e){if(n.limitType==="F")return pq(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Jh(r.field,s)});let t=n.endAt?new Xu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Xu(n.startAt.position,n.startAt.inclusive):null;return pq(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function p2(n,e){let t=n.filters.concat([e]);return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function eT(n,e,t){return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function DT(n,e){return VV(Za(n),Za(e))&&n.limitType===e.limitType}function x7(n){return`${FV(Za(n))}|lt:${n.limitType}`}function Fm(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>v7(r)).join(", ")}]`),CT(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Km(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Km(r)).join(",")),`Target(${i})`})(Za(n))}; limitType=${n.limitType})`}function RT(n,e){return e.isFoundDocument()&&(function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):St.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(n,e)&&(function(i,r){for(let s of zm(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(o,a,c){let l=hq(o,a,c);return o.inclusive?l<=0:l<0})(i.startAt,zm(i),r)||i.endAt&&!(function(o,a,c){let l=hq(o,a,c);return o.inclusive?l>=0:l>0})(i.endAt,zm(i),r))})(n,e)}function Fve(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function w7(n){return(e,t)=>{let i=!1;for(let r of zm(n)){let s=Vve(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Vve(n,e,t){let i=n.field.isKeyField()?St.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?qm(c,l):Ot(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ot(19790,{direction:n.dir})}}var _l=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ju(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return a7(this.inner)}size(){return this.innerSize}};var Uve=new Oi(St.comparator);function yl(){return Uve}var E7=new Oi(St.comparator);function Kv(...n){let e=E7;for(let t of n)e=e.insert(t.key,t);return e}function I7(n){let e=E7;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function $h(){return Yv()}function S7(){return Yv()}function Yv(){return new _l(n=>n.toString(),(n,e)=>n.isEqual(e))}var Bve=new Oi(St.comparator),zve=new Ar(St.comparator);function bn(...n){let e=zve;for(let t of n)e=e.add(t);return e}var Hve=new Ar(ln);function jve(){return Hve}function zV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e0(e)?"-0":e}}function T7(n){return{integerValue:""+n}}function Gve(n,e){return vve(e)?T7(e):zV(n,e)}var Xm=class{constructor(){this._=void 0}};function Wve(n,e,t){return n instanceof Ym?(function(r,s){let o={fields:{[l7]:{stringValue:c7},[d7]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&AT(s)&&(s=MT(s)),s&&(o.fields[u7]=s),{mapValue:o}})(t,e):n instanceof Zh?A7(n,e):n instanceof ef?M7(n,e):(function(r,s){let o=C7(r,s),a=gq(o)+gq(r.Ee);return i2(o)&&i2(r.Ee)?T7(a):zV(r.serializer,a)})(n,e)}function $ve(n,e,t){return n instanceof Zh?A7(n,e):n instanceof ef?M7(n,e):t}function C7(n,e){return n instanceof Qm?(function(i){return i2(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}var Ym=class extends Xm{},Zh=class extends Xm{constructor(e){super(),this.elements=e}};function A7(n,e){let t=D7(e);for(let i of n.elements)t.some(r=>nc(r,i))||t.push(i);return{arrayValue:{values:t}}}var ef=class extends Xm{constructor(e){super(),this.elements=e}};function M7(n,e){let t=D7(e);for(let i of n.elements)t=t.filter(r=>!nc(r,i));return{arrayValue:{values:t}}}var Qm=class extends Xm{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function gq(n){return Ei(n.integerValue||n.doubleValue)}function D7(n){return LV(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qve(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Zh&&r instanceof Zh||i instanceof ef&&r instanceof ef?Wm(i.elements,r.elements,nc):i instanceof Qm&&r instanceof Qm?nc(i.Ee,r.Ee):i instanceof Ym&&r instanceof Ym})(n.transform,e.transform)}var m2=class{constructor(e,t){this.version=e,this.transformResults=t}},ec=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function GS(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Jm=class{};function R7(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new i0(n.key,ec.none()):new tf(n.key,n.data,ec.none());{let t=n.data,i=io.empty(),r=new Ar(ro.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ic(n.key,i,new So(r.toArray()),ec.none())}}function Kve(n,e,t){n instanceof tf?(function(r,s,o){let a=r.value.clone(),c=yq(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ic?(function(r,s,o){if(!GS(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=yq(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(P7(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Qv(n,e,t,i){return n instanceof tf?(function(s,o,a,c){if(!GS(s.precondition,o))return a;let l=s.value.clone(),u=vq(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof ic?(function(s,o,a,c){if(!GS(s.precondition,o))return a;let l=vq(s.fieldTransforms,c,o),u=o.data;return u.setAll(P7(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))})(n,e,t,i):(function(s,o,a){return GS(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Xve(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=C7(i.transform,r||null);s!=null&&(t===null&&(t=io.empty()),t.set(i.field,s))}return t||null}function _q(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Wm(i,r,(s,o)=>qve(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var tf=class extends Jm{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ic=class extends Jm{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function P7(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function yq(n,e,t){let i=new Map;Jn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,$ve(o,a,t[r]))}return i}function vq(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,Wve(s,o,e))}return i}var i0=class extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},g2=class extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _2=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&Kve(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qv(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Qv(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=S7();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=R7(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Zt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&Wm(this.mutations,e.mutations,(t,i)=>_q(t,i))&&Wm(this.baseMutations,e.baseMutations,(t,i)=>_q(t,i))}},y2=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Jn(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Bve})(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var v2=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var b2=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rr,Rn;function Yve(n){switch(n){case de.OK:return Ot(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ot(15467,{code:n})}}function k7(n){if(n===void 0)return fl("GRPC error has no .code"),de.UNKNOWN;switch(n){case rr.OK:return de.OK;case rr.CANCELLED:return de.CANCELLED;case rr.UNKNOWN:return de.UNKNOWN;case rr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case rr.INTERNAL:return de.INTERNAL;case rr.UNAVAILABLE:return de.UNAVAILABLE;case rr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case rr.NOT_FOUND:return de.NOT_FOUND;case rr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case rr.ABORTED:return de.ABORTED;case rr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case rr.DATA_LOSS:return de.DATA_LOSS;default:return Ot(39323,{code:n})}}(Rn=rr||(rr={}))[Rn.OK=0]="OK",Rn[Rn.CANCELLED=1]="CANCELLED",Rn[Rn.UNKNOWN=2]="UNKNOWN",Rn[Rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rn[Rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rn[Rn.NOT_FOUND=5]="NOT_FOUND",Rn[Rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rn[Rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rn[Rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rn[Rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rn[Rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rn[Rn.ABORTED=10]="ABORTED",Rn[Rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rn[Rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rn[Rn.INTERNAL=13]="INTERNAL",Rn[Rn.UNAVAILABLE=14]="UNAVAILABLE",Rn[Rn.DATA_LOSS=15]="DATA_LOSS";var bq=null;var Qve=new dl([4294967295,4294967295],0);function xq(n){let e=Gq().encode(n),t=new LF;return t.update(e),new Uint8Array(t.digest())}function wq(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new dl([t,i],0),new dl([r,s],0)]}var x2=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qh(`Invalid padding: ${t}`);if(i<0)throw new qh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=dl.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(dl.fromNumber(i)));return r.compare(Qve)===1&&(r=new dl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=xq(e),[i,r]=wq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=xq(e),[i,r]=wq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(i,r,s);this.we(o)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},qh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var tT=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,r0.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Zt.min(),r,new Oi(ln),yl(),bn())}},r0=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,bn(),bn(),bn())}};var Hm=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},nT=class{constructor(e,t){this.targetId=e,this.De=t}},iT=class{constructor(e,t,i=ns.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},rT=class{constructor(){this.ve=0,this.Ce=Eq(),this.Fe=ns.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=bn(),t=bn(),i=bn();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ot(38017,{changeType:s})}}),new r0(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Eq()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Jn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},w2=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=yl(),this.je=BS(),this.Je=BS(),this.He=new Oi(ln)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ot(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let s=r.target;if(f2(s))if(i===0){let o=new St(s.path);this.Xe(t,o,ua.newNoDocument(o,Zt.min()))}else Jn(i===1,20013,{expectedCount:i});else{let o=this.ot(t);if(o!==i){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}bq?.ct((function(u,d,h,p,_){var b,g,v,R,P,N;let U={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},O=d.unchangedNames;return O&&(U.bloomFilter={applied:_===0,hashCount:(b=O?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(R=(v=(g=O?.bits)===null||g===void 0?void 0:g.bitmap)===null||v===void 0?void 0:v.length)!==null&&R!==void 0?R:0,padding:(N=(P=O?.bits)===null||P===void 0?void 0:P.padding)!==null&&N!==void 0?N:0,mightContain:I=>{var w;return(w=p?.mightContain(I))!==null&&w!==void 0&&w}}),U})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=ml(i).toUint8Array()}catch(c){if(c instanceof XS)return qu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new x2(o,r,s)}catch(c){return qu(c instanceof qh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&f2(a.target)){let c=new St(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,ua.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let i=bn();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let r=new tT(e,t,this.He,this.ze,i);return this.ze=yl(),this.je=BS(),this.Je=BS(),this.He=new Oi(ln),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new rT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ar(ln),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ar(ln),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||et("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rT),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function BS(){return new Oi(St.comparator)}function Eq(){return new Oi(St.comparator)}var Jve={asc:"ASCENDING",desc:"DESCENDING"},Zve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e0e={and:"AND",or:"OR"},E2=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function I2(n,e){return n.useProto3Json||CT(e)?e:{value:e}}function sT(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N7(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t0e(n,e){return sT(n,e.toTimestamp())}function tc(n){return Jn(!!n,49232),Zt.fromTimestamp((function(t){let i=pl(t);return new cr(i.seconds,i.nanos)})(n))}function HV(n,e){return S2(n,e).canonicalString()}function S2(n,e){let t=(function(r){return new _i(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function O7(n){let e=_i.fromString(n);return Jn(B7(e),10190,{key:e.toString()}),e}function T2(n,e){return HV(n.databaseId,e.path)}function HF(n,e){let t=O7(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new St(F7(t))}function L7(n,e){return HV(n.databaseId,e)}function n0e(n){let e=O7(n);return e.length===4?_i.emptyPath():F7(e)}function C2(n){return new _i(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F7(n){return Jn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Iq(n,e,t){return{name:T2(n,e),fields:t.value.mapValue.fields}}function i0e(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Ot(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(l,u){return l.useProto3Json?(Jn(u===void 0||typeof u=="string",58123),ns.fromBase64String(u||"")):(Jn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ns.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let u=l.code===void 0?de.UNKNOWN:k7(l.code);return new Ve(u,l.message||"")})(o);t=new iT(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=HF(n,i.document.name),s=tc(i.document.updateTime),o=i.document.createTime?tc(i.document.createTime):Zt.min(),a=new io({mapValue:{fields:i.document.fields}}),c=ua.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new Hm(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=HF(n,i.document),s=i.readTime?tc(i.readTime):Zt.min(),o=ua.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Hm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=HF(n,i.document),s=i.removedTargetIds||[];t=new Hm([],s,r,null)}else{if(!("filter"in e))return Ot(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new b2(r,s),a=i.targetId;t=new nT(a,o)}}return t}function r0e(n,e){let t;if(e instanceof tf)t={update:Iq(n,e.key,e.value)};else if(e instanceof i0)t={delete:T2(n,e.key)};else if(e instanceof ic)t={update:Iq(n,e.key,e.data),updateMask:f0e(e.fieldMask)};else{if(!(e instanceof g2))return Ot(16599,{Rt:e.type});t={verify:T2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(s,o){let a=o.transform;if(a instanceof Ym)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ef)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qm)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ot(20930,{transform:o.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:t0e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ot(27497)})(n,e.precondition)),t}function s0e(n,e){return n&&n.length>0?(Jn(e!==void 0,14353),n.map(t=>(function(r,s){let o=r.updateTime?tc(r.updateTime):tc(s);return o.isEqual(Zt.min())&&(o=tc(s)),new m2(o,r.transformResults||[])})(t,e))):[]}function o0e(n,e){return{documents:[L7(n,e.path)]}}function a0e(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=L7(n,r);let s=(function(l){if(l.length!==0)return U7(da.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(u=>(function(h){return{field:Vm(h.field),direction:u0e(h.dir)}})(u))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=I2(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:r}}function c0e(n){let e=n0e(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Jn(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=(function(d){let h=V7(d);return h instanceof da&&_7(h)?h.getFilters():[h]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map(h=>(function(_){return new Jh(Um(_.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(h))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,CT(h)?null:h})(t.limit));let c=null;t.startAt&&(c=(function(d){let h=!!d.before,p=d.values||[];return new Xu(p,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){let h=!d.before,p=d.values||[];return new Xu(p,h)})(t.endAt)),Ove(e,r,o,s,a,"F",c,l)}function l0e(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function V7(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Um(t.unaryFilter.field);return or.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Um(t.unaryFilter.field);return or.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Um(t.unaryFilter.field);return or.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Um(t.unaryFilter.field);return or.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ot(61313);default:return Ot(60726)}})(n):n.fieldFilter!==void 0?(function(t){return or.create(Um(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ot(58110);default:return Ot(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return da.create(t.compositeFilter.filters.map(i=>V7(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ot(1026)}})(t.compositeFilter.op))})(n):Ot(30097,{filter:n})}function u0e(n){return Jve[n]}function d0e(n){return Zve[n]}function h0e(n){return e0e[n]}function Vm(n){return{fieldPath:n.canonicalString()}}function Um(n){return ro.fromServerFormat(n.fieldPath)}function U7(n){return n instanceof or?(function(t){if(t.op==="=="){if(dq(t.value))return{unaryFilter:{field:Vm(t.field),op:"IS_NAN"}};if(uq(t.value))return{unaryFilter:{field:Vm(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dq(t.value))return{unaryFilter:{field:Vm(t.field),op:"IS_NOT_NAN"}};if(uq(t.value))return{unaryFilter:{field:Vm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vm(t.field),op:d0e(t.op),value:t.value}}})(n):n instanceof da?(function(t){let i=t.getFilters().map(r=>U7(r));return i.length===1?i[0]:{compositeFilter:{op:h0e(t.op),filters:i}}})(n):Ot(54877,{filter:n})}function f0e(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B7(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var s0=class n{constructor(e,t,i,r,s=Zt.min(),o=Zt.min(),a=ns.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var A2=class{constructor(e){this.gt=e}};function p0e(n){let e=c0e({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?eT(e,e.limit,"L"):e}var oT=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ei(e.integerValue));else if("doubleValue"in e){let i=Ei(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),e0(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=pl(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ml(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?p7(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):f7(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Ot(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let s=e.fields||{};this.Ct(t,53);let o=$m,a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(Ei(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),St.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};oT.Ut=new oT;var M2=class{constructor(){this.Dn=new D2}addToCollectionParentIndex(e,t){return this.Dn.add(t),Ee.resolve()}getCollectionParents(e,t){return Ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Ee.resolve()}deleteFieldIndex(e,t){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,t){return Ee.resolve()}getDocumentsMatchingTarget(e,t){return Ee.resolve(null)}getIndexType(e,t){return Ee.resolve(0)}getFieldIndexes(e,t){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,t){return Ee.resolve(Qh.min())}getMinOffsetFromCollectionGroup(e,t){return Ee.resolve(Qh.min())}updateCollectionGroup(e,t,i){return Ee.resolve()}updateIndexEntries(e,t){return Ee.resolve()}},D2=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ar(_i.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ar(_i.comparator)).toArray()}};var $Xe=new Uint8Array(0);var Sq={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z7=41943040,Io=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Io.DEFAULT_COLLECTION_PERCENTILE=10,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Io.DEFAULT=new Io(z7,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Io.DISABLED=new Io(-1,0,0);var o0=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Tq="LruGarbageCollector",m0e=1048576;function Cq([n,e],[t,i]){let r=ln(n,t);return r===0?ln(e,i):r}var R2=class{constructor(e){this.Tr=e,this.buffer=new Ar(Cq),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();Cq(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},P2=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){et(Tq,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sg(t)?et(Tq,"Ignoring IndexedDB error during garbage collection: ",t):await rg(t)}await this.Rr(3e5)})}},k2=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ee.resolve(PV.ue);let i=new R2(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(Sq)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sq):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Lm()<=pn.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function g0e(n,e){return new k2(n,e)}var N2=class{constructor(){this.changes=new _l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ua.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var O2=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var L2=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Qv(i.mutation,r,So.empty(),cr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,bn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=bn()){let r=$h();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Kv();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=$h();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,bn()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=yl(),o=Yv(),a=(function(){return Yv()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof ic)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Qv(u.mutation,l,u.mutation.getFieldMask(),cr.now())):o.set(l.key,So.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new O2(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Yv(),r=new Oi((o,a)=>o-a),s=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||So.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||bn()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=S7();u.forEach(h=>{if(!s.has(h)){let p=R7(t.get(h),i.get(h));p!==null&&d.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ee.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(o){return St.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ee.resolve($h()),a=Zv,c=s;return o.next(l=>Ee.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ee.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,bn())).next(u=>({batchId:a,changes:I7(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new St(t)).next(i=>{let r=Kv();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Kv();return this.indexManager.getCollectionParents(e,s).next(a=>Ee.forEach(a,c=>{let l=(function(d,h){return new gl(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,ua.newInvalidDocument(u)))});let a=Kv();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Qv(u.mutation,l,So.empty(),cr.now()),RT(t,l)&&(a=a.insert(c,l))}),a})}};var F2=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:tc(r.createTime)}})(t)),Ee.resolve()}getNamedQuery(e,t){return Ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:p0e(r.bundledQuery),readTime:tc(r.readTime)}})(t)),Ee.resolve()}};var V2=class{constructor(){this.overlays=new Oi(St.comparator),this.kr=new Map}getOverlay(e,t){return Ee.resolve(this.overlays.get(t))}getOverlays(e,t){let i=$h();return Ee.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.wt(e,t,s)}),Ee.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),Ee.resolve()}getOverlaysForCollection(e,t,i){let r=$h(),s=t.length+1,o=new St(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Ee.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Oi((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=$h(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=$h(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return Ee.resolve(a)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new v2(t,i));let s=this.kr.get(t);s===void 0&&(s=bn(),this.kr.set(t,s)),this.kr.set(t,s.add(i.key))}};var U2=class{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ee.resolve()}};var a0=class{constructor(){this.qr=new Ar(sr.Qr),this.$r=new Ar(sr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new sr(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new sr(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new St(new _i([])),i=new sr(t,e),r=new sr(t,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new St(new _i([])),i=new sr(t,e),r=new sr(t,e+1),s=bn();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new sr(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},sr=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return St.comparator(e.key,t.key)||ln(e.Hr,t.Hr)}static Ur(e,t){return ln(e.Hr,t.Hr)||St.comparator(e.key,t.key)}};var B2=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ar(sr.Qr)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new _2(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Yr=this.Yr.add(new sr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ee.resolve(o)}lookupMutationBatch(e,t){return Ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),s=r<0?0:r;return Ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?kV:this.er-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{let a=this.Zr(o.Hr);s.push(a)}),Ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ar(ln);return t.forEach(r=>{let s=new sr(r,0),o=new sr(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),Ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;St.isDocumentKey(s)||(s=s.child(""));let o=new sr(new St(s),0),a=new Ar(ln);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Hr)),!0)},o),Ee.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Jn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Ee.forEach(t.mutations,r=>{let s=new sr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new sr(t,0),r=this.Yr.firstAfterOrEqual(i);return Ee.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var z2=class{constructor(e){this.ni=e,this.docs=(function(){return new Oi(St.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Ee.resolve(i?i.document.mutableCopy():ua.newInvalidDocument(t))}getEntries(e,t){let i=yl();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ua.newInvalidDocument(r))}),Ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=yl(),o=t.path,a=new St(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||gve(mve(u),i)<=0||(r.has(u.key)||RT(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ee.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Ot(9500)}ri(e,t){return Ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new H2(this)}getSize(e){return Ee.resolve(this.size)}},H2=class extends N2{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),Ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var j2=class{constructor(e){this.persistence=e,this.ii=new _l(t=>FV(t),VV),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.si=0,this.oi=new a0,this.targetCount=0,this._i=o0.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Ee.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new o0(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Ee.resolve()}updateTargetData(e,t){return this.hr(t),Ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ee.waitFor(s).next(()=>r)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return Ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ee.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Ee.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return Ee.resolve(i)}containsKey(e,t){return Ee.resolve(this.oi.containsKey(t))}};var aT=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new PV(0),this.ci=!1,this.ci=!0,this.li=new U2,this.referenceDelegate=e(this),this.hi=new j2(this),this.indexManager=new M2,this.remoteDocumentCache=(function(r){return new z2(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new A2(t),this.Ti=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new V2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new B2(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){et("MemoryPersistence","Starting transaction:",e);let r=new G2(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,t){return Ee.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},G2=class extends e2{constructor(e){super(),this.currentSequenceNumber=e}},W2=class n{constructor(e){this.persistence=e,this.Ai=new a0,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Ot(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.mi,i=>{let r=St.fromPath(i);return this.fi(e,r).next(s=>{s||t.removeEntry(r,Zt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Ee.or([()=>Ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},cT=class n{constructor(e,t){this.persistence=e,this.gi=new _l(i=>bve(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=g0e(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return Ee.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?Ee.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Zt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Ee.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=HS(e.data.value)),t}Sr(e,t,i){return Ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return Ee.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var $2=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=bn(),r=bn();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var q2=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var K2=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return L8()?8:yve(Sr())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new q2;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Lm()<=pn.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Fm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ee.resolve()):(Lm()<=pn.DEBUG&&et("QueryEngine","Query:",Fm(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Lm()<=pn.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Fm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Za(t))):Ee.resolve())}ps(e,t){if(mq(t))return Ee.resolve(null);let i=Za(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=eT(t,null,"F"),i=Za(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=bn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,eT(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,i,r){return mq(t)||r.isEqual(Zt.min())?Ee.resolve(null):this.gs.getDocuments(e,i).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,i,r)?Ee.resolve(null):(Lm()<=pn.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fm(t)),this.vs(e,o,t,pve(r,Zv)).next(a=>a))})}bs(e,t){let i=new Ar(w7(e));return t.forEach((r,s)=>{RT(e,s)&&(i=i.add(s))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,i){return Lm()<=pn.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Fm(t)),this.gs.getDocumentsMatchingQuery(e,t,Qh.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var jV="LocalStore",_0e=3e8,X2=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Oi(ln),this.Ms=new _l(s=>FV(s),VV),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new L2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function y0e(n,e,t,i){return new X2(n,e,t,i)}async function H7(n,e){let t=Kt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=bn();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function v0e(n,e){let t=Kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let d=l.batch,h=d.keys(),p=Ee.resolve();return h.forEach(_=>{p=p.next(()=>u.getEntry(c,_)).next(b=>{let g=l.docVersions.get(_);Jn(g!==null,48541),b.version.compareTo(g)<0&&(d.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),u.addEntry(b)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,d))})(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let c=bn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function j7(n){let e=Kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function b0e(n,e){let t=Kt(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,d)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ns.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),(function(b,g,v){return b.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=_0e?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(h,p,u)&&a.push(t.hi.updateTargetData(s,p))});let c=yl(),l=bn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(x0e(s,o,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!i.isEqual(Zt.min())){let u=t.hi.getLastRemoteSnapshotVersion(s).next(d=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ee.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=r,s))}function x0e(n,e,t){let i=bn(),r=bn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=yl();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Zt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):et(jV,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function w0e(n,e){let t=Kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=kV),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function E0e(n,e){let t=Kt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(s=>s?(r=s,Ee.resolve(r)):t.hi.allocateTargetId(i).next(o=>(r=new s0(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function Y2(n,e,t){let i=Kt(n),r=i.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!sg(o))throw o;et(jV,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function Aq(n,e,t){let i=Kt(n),r=Zt.min(),s=bn();return i.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,u){let d=Kt(c),h=d.Ms.get(u);return h!==void 0?Ee.resolve(d.Fs.get(h)):d.hi.getTargetData(l,u)})(i,o,Za(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,t?r:Zt.min(),t?s:bn())).next(a=>(I0e(i,Fve(e),a),{documents:a,qs:s})))}function I0e(n,e,t){let i=n.xs.get(e)||Zt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.xs.set(e,i)}var lT=class{constructor(){this.activeTargetIds=jve()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Q2=class{constructor(){this.Fo=new lT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var J2=class{xo(e){}shutdown(){}};var Mq="ConnectivityMonitor",uT=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){et(Mq,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){et(Mq,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zS=null;function Z2(){return zS===null?zS=(function(){return 268435456+Math.round(2147483648*Math.random())})():zS++,"0x"+zS.toString(16)}var jF="RestConnection",S0e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eV=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===YS?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,s){let o=Z2(),a=this.Go(e,t.toUriEncodedString());et(jF,`Sending RPC '${e}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);let{host:l}=new URL(a),u=Cu(l);return this.jo(e,a,c,i,u).then(d=>(et(jF,`Received RPC '${e}' ${o}: `,d),d),d=>{throw qu(jF,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Jo(e,t,i,r,s,o){return this.Wo(e,t,i,r,s)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ig})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,t){let i=S0e[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var tV=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ts="WebChannelConnection",nV=class extends eV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,s){let o=Z2();return new Promise((a,c)=>{let l=new FF;l.setWithCredentials(!0),l.listenOnce(VF.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qv.NO_ERROR:let d=l.getResponseJson();et(ts,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case qv.TIMEOUT:et(ts,`RPC '${e}' ${o} timed out`),c(new Ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:let h=l.getStatus();if(et(ts,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let b=(function(v){let R=v.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(R)>=0?R:de.UNKNOWN})(_.status);c(new Ve(b,_.message))}else c(new Ve(de.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ve(de.UNAVAILABLE,"Connection failed."));break;default:Ot(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{et(ts,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);et(ts,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}P_(e,t,i){let r=Z2(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zF(),a=BF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");et(ts,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c);this.T_(d);let h=!1,p=!1,_=new tV({Ho:g=>{p?et(ts,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(et(ts,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),et(ts,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},Yo:()=>d.close()}),b=(g,v,R)=>{g.listen(v,P=>{try{R(P)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,Om.EventType.OPEN,()=>{p||(et(ts,`RPC '${e}' stream ${r} transport opened.`),_.s_())}),b(d,Om.EventType.CLOSE,()=>{p||(p=!0,et(ts,`RPC '${e}' stream ${r} transport closed`),_.__(),this.I_(d))}),b(d,Om.EventType.ERROR,g=>{p||(p=!0,qu(ts,`RPC '${e}' stream ${r} transport errored. Name:`,g.name,"Message:",g.message),_.__(new Ve(de.UNAVAILABLE,"The operation could not be completed")))}),b(d,Om.EventType.MESSAGE,g=>{var v;if(!p){let R=g.data[0];Jn(!!R,16349);let P=R,N=P?.error||((v=P[0])===null||v===void 0?void 0:v.error);if(N){et(ts,`RPC '${e}' stream ${r} received error:`,N);let U=N.status,O=(function(y){let x=rr[y];if(x!==void 0)return k7(x)})(U),I=N.message;O===void 0&&(O=de.INTERNAL,I="Unknown error status: "+U+" with message "+N.message),p=!0,_.__(new Ve(O,I)),d.close()}else et(ts,`RPC '${e}' stream ${r} received:`,R),_.a_(R)}}),b(a,UF.STAT_EVENT,g=>{g.stat===VS.PROXY?et(ts,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===VS.NOPROXY&&et(ts,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function GF(){return typeof document<"u"?document:null}function PT(n){return new E2(n,!0)}var dT=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Dq="PersistentStream",hT=class{constructor(e,t,i,r,s,o,a,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new dT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(fl(t.toString()),fl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new Ve(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return et(Dq,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(et(Dq,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iV=class extends hT{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=i0e(this.serializer,e),i=(function(s){if(!("targetChange"in s))return Zt.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Zt.min():o.readTime?tc(o.readTime):Zt.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=C2(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=f2(c)?{documents:o0e(s,c)}:{query:a0e(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=N7(s,o.resumeToken);let l=I2(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Zt.min())>0){a.readTime=sT(s,o.snapshotVersion.toTimestamp());let l=I2(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=l0e(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=C2(this.serializer),t.removeTarget=e,this.k_(t)}},rV=class extends hT{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Jn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Jn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Jn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=s0e(e.writeResults,e.commitTime),i=tc(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=C2(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>r0e(this.serializer,i))};this.k_(t)}};var sV=class{},oV=class extends sV{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,S2(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(de.UNKNOWN,s.toString())})}Jo(e,t,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,S2(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(de.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},aV=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(fl(t),this._a=!1):et("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var nf="RemoteStore",cV=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{rf(this)&&(et(nf,"Restarting streams for network reachability change."),await(async function(c){let l=Kt(c);l.Ia.add(4),await h0(l),l.Aa.set("Unknown"),l.Ia.delete(4),await kT(l)})(this))})}),this.Aa=new aV(i,r)}};async function kT(n){if(rf(n))for(let e of n.da)await e(!0)}async function h0(n){for(let e of n.da)await e(!1)}function G7(n,e){let t=Kt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),qV(t)?$V(t):og(t).x_()&&WV(t,e))}function GV(n,e){let t=Kt(n),i=og(t);t.Ta.delete(e),i.x_()&&W7(t,e),t.Ta.size===0&&(i.x_()?i.B_():rf(t)&&t.Aa.set("Unknown"))}function WV(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}og(n).H_(e)}function W7(n,e){n.Ra.$e(e),og(n).Y_(e)}function $V(n){n.Ra=new w2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),og(n).start(),n.Aa.aa()}function qV(n){return rf(n)&&!og(n).M_()&&n.Ta.size>0}function rf(n){return Kt(n).Ia.size===0}function $7(n){n.Ra=void 0}async function T0e(n){n.Aa.set("Online")}async function C0e(n){n.Ta.forEach((e,t)=>{WV(n,e)})}async function A0e(n,e){$7(n),qV(n)?(n.Aa.la(e),$V(n)):n.Aa.set("Unknown")}async function M0e(n,e,t){if(n.Aa.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await(async function(r,s){let o=s.cause;for(let a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))})(n,e)}catch(i){et(nf,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fT(n,i)}else if(e instanceof Hm?n.Ra.Ye(e):e instanceof nT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Zt.min()))try{let i=await j7(n.localStore);t.compareTo(i)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.Ta.get(l);u&&s.Ta.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.Ta.get(c);if(!u)return;s.Ta.set(c,u.withResumeToken(ns.EMPTY_BYTE_STRING,u.snapshotVersion)),W7(s,c);let d=new s0(u.target,c,l,u.sequenceNumber);WV(s,d)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){et(nf,"Failed to raise snapshot:",i),await fT(n,i)}}async function fT(n,e,t){if(!sg(e))throw e;n.Ia.add(1),await h0(n),n.Aa.set("Offline"),t||(t=()=>j7(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{et(nf,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await kT(n)})}function q7(n,e){return e().catch(t=>fT(n,t,e))}async function NT(n){let e=Kt(n),t=Yu(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kV;for(;D0e(e);)try{let r=await w0e(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,R0e(e,r)}catch(r){await fT(e,r)}K7(e)&&X7(e)}function D0e(n){return rf(n)&&n.Pa.length<10}function R0e(n,e){n.Pa.push(e);let t=Yu(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function K7(n){return rf(n)&&!Yu(n).M_()&&n.Pa.length>0}function X7(n){Yu(n).start()}async function P0e(n){Yu(n).na()}async function k0e(n){let e=Yu(n);for(let t of n.Pa)e.X_(t.mutations)}async function N0e(n,e,t){let i=n.Pa.shift(),r=y2.from(i,e,t);await q7(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await NT(n)}async function O0e(n,e){e&&Yu(n).Z_&&await(async function(i,r){if((function(o){return Yve(o)&&o!==de.ABORTED})(r.code)){let s=i.Pa.shift();Yu(i).N_(),await q7(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await NT(i)}})(n,e),K7(n)&&X7(n)}async function Rq(n,e){let t=Kt(n);t.asyncQueue.verifyOperationInProgress(),et(nf,"RemoteStore received new credentials");let i=rf(t);t.Ia.add(3),await h0(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await kT(t)}async function L0e(n,e){let t=Kt(n);e?(t.Ia.delete(2),await kT(t)):e||(t.Ia.add(2),await h0(t),t.Aa.set("Unknown"))}function og(n){return n.Va||(n.Va=(function(t,i,r){let s=Kt(t);return s.ia(),new iV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:T0e.bind(null,n),e_:C0e.bind(null,n),n_:A0e.bind(null,n),J_:M0e.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),qV(n)?$V(n):n.Aa.set("Unknown")):(await n.Va.stop(),$7(n))})),n.Va}function Yu(n){return n.ma||(n.ma=(function(t,i,r){let s=Kt(t);return s.ia(),new rV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:P0e.bind(null,n),n_:O0e.bind(null,n),ea:k0e.bind(null,n),ta:N0e.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await NT(n)):(await n.ma.stop(),n.Pa.length>0&&(et(nf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var lV=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KV(n,e){if(fl("AsyncQueue",`${e}: ${n}`),sg(n))return new Ve(de.UNAVAILABLE,`${e}: ${n}`);throw n}var pT=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||St.comparator(t.key,i.key):(t,i)=>St.comparator(t.key,i.key),this.keyedMap=Kv(),this.sortedSet=new Oi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var mT=class{constructor(){this.fa=new Oi(St.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ot(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},Zm=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,pT.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&DT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var uV=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},dV=class{constructor(){this.queries=Pq(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=Kt(t),s=r.queries;r.queries=Pq(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(i)})})(this,new Ve(de.ABORTED,"Firestore shutting down"))}};function Pq(){return new _l(n=>x7(n),DT)}async function Y7(n,e){let t=Kt(n),i=3,r=e.query,s=t.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new uV,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await t.onListen(r,!0);break;case 1:s.ya=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){let a=KV(o,`Initialization of query '${Fm(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&XV(t)}async function Q7(n,e){let t=Kt(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function F0e(n,e){let t=Kt(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&XV(t)}function V0e(n,e,t){let i=Kt(n),r=i.queries.get(e);if(r)for(let s of r.wa)s.onError(t);i.queries.delete(e)}function XV(n){n.Da.forEach(e=>{e.next()})}var hV,kq;(kq=hV||(hV={})).Fa="default",kq.Cache="cache";var gT=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Zm(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hV.Cache}};var _T=class{constructor(e){this.key=e}},yT=class{constructor(e){this.key=e}},fV=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=bn(),this.mutatedKeys=bn(),this.Xa=w7(e),this.eu=new pT(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new mT,r=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),p=RT(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),g=!1;h&&p?h.data.isEqual(p.data)?_!==b&&(i.track({type:3,doc:p}),g=!0):this.iu(h,p)||(i.track({type:2,doc:p}),g=!0,(c&&this.Xa(p,c)>0||l&&this.Xa(p,l)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),g=!0):h&&!p&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(p?(o=o.add(p),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((u,d)=>(function(p,_){let b=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot(20277,{At:g})}};return b(p)-b(_)})(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(i),r=r!=null&&r;let a=t&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new Zm(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=bn(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new yT(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new _T(i))}),t}uu(e){this.Ha=e.qs,this.Za=bn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zm.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},YV="SyncEngine",pV=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},mV=class{constructor(e){this.key=e,this.lu=!1}},gV=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new _l(a=>x7(a),DT),this.Tu=new Map,this.Iu=new Set,this.du=new Oi(St.comparator),this.Eu=new Map,this.Au=new a0,this.Ru={},this.Vu=new Map,this.mu=o0.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function U0e(n,e,t=!0){let i=iK(n),r,s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await J7(i,e,t,!0),r}async function B0e(n,e){let t=iK(n);await J7(t,e,!0,!1)}async function J7(n,e,t,i){let r=await E0e(n.localStore,Za(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=await z0e(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&G7(n.remoteStore,r),a}async function z0e(n,e,t,i,r){n.gu=(d,h,p)=>(async function(b,g,v,R){let P=g.view.nu(v);P.Ds&&(P=await Aq(b.localStore,g.query,!1).then(({documents:I})=>g.view.nu(I,P)));let N=R&&R.targetChanges.get(g.targetId),U=R&&R.targetMismatches.get(g.targetId)!=null,O=g.view.applyChanges(P,b.isPrimaryClient,N,U);return Oq(b,g.targetId,O._u),O.snapshot})(n,d,h,p);let s=await Aq(n.localStore,e,!0),o=new fV(e,s.qs),a=o.nu(s.documents),c=r0.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);Oq(n,t,l._u);let u=new pV(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function H0e(n,e,t){let i=Kt(n),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!DT(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Y2(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&GV(i.remoteStore,r.targetId),_V(i,r.targetId)}).catch(rg)):(_V(i,r.targetId),await Y2(i.localStore,r.targetId,!0))}async function j0e(n,e){let t=Kt(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),GV(t.remoteStore,i.targetId))}async function G0e(n,e,t){let i=Q0e(n);try{let r=await(function(o,a){let c=Kt(o),l=cr.now(),u=a.reduce((p,_)=>p.add(_.key),bn()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=yl(),b=bn();return c.Os.getEntries(p,u).next(g=>{_=g,_.forEach((v,R)=>{R.isValidDocument()||(b=b.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(g=>{d=g;let v=[];for(let R of a){let P=Xve(R,d.get(R.key).overlayedDocument);P!=null&&v.push(new ic(R.key,P,m7(P.value.mapValue),ec.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,v,a)}).next(g=>{h=g;let v=g.applyToLocalDocumentSet(d,b);return c.documentOverlayCache.saveOverlays(p,g.batchId,v)})}).then(()=>({batchId:h.batchId,changes:I7(d)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Oi(ln)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(i,r.batchId,t),await f0(i,r.changes),await NT(i.remoteStore)}catch(r){let s=KV(r,"Failed to persist write");t.reject(s)}}async function Z7(n,e){let t=Kt(n);try{let i=await b0e(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Eu.get(s);o&&(Jn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?Jn(o.lu,14607):r.removedDocuments.size>0&&(Jn(o.lu,42227),o.lu=!1))}),await f0(t,i,e)}catch(i){await rg(i)}}function Nq(n,e,t){let i=Kt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(o,a){let c=Kt(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.wa)h.va(a)&&(l=!0)}),l&&XV(c)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function W0e(n,e,t){let i=Kt(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),s=r&&r.key;if(s){let o=new Oi(St.comparator);o=o.insert(s,ua.newNoDocument(s,Zt.min()));let a=bn().add(s),c=new tT(Zt.min(),new Map,new Oi(ln),o,a);await Z7(i,c),i.du=i.du.remove(s),i.Eu.delete(e),QV(i)}else await Y2(i.localStore,e,!1).then(()=>_V(i,e,t)).catch(rg)}async function $0e(n,e){let t=Kt(n),i=e.batch.batchId;try{let r=await v0e(t.localStore,e);tK(t,i,null),eK(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await f0(t,r)}catch(r){await rg(r)}}async function q0e(n,e,t){let i=Kt(n);try{let r=await(function(o,a){let c=Kt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Jn(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(i.localStore,e);tK(i,e,t),eK(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await f0(i,r)}catch(r){await rg(r)}}function eK(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function tK(n,e,t){let i=Kt(n),r=i.Ru[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function _V(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||nK(n,i)})}function nK(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(GV(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),QV(n))}function Oq(n,e,t){for(let i of t)i instanceof _T?(n.Au.addReference(i.key,e),K0e(n,i)):i instanceof yT?(et(YV,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||nK(n,i.key)):Ot(19791,{yu:i})}function K0e(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(et(YV,"New document in limbo: "+t),n.Iu.add(i),QV(n))}function QV(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new St(_i.fromString(e)),i=n.mu.next();n.Eu.set(i,new mV(t)),n.du=n.du.insert(t,i),G7(n.remoteStore,new s0(Za(UV(t.path)),i,"TargetPurposeLimboResolution",PV.ue))}}async function f0(n,e,t){let i=Kt(n),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,c)=>{o.push(i.gu(c,e,t).then(l=>{var u;if((l||t)&&i.isPrimaryClient){let d=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){r.push(l);let d=$2.Es(c.targetId,l);s.push(d)}}))}),await Promise.all(o),i.hu.J_(r),await(async function(c,l){let u=Kt(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ee.forEach(l,h=>Ee.forEach(h.Is,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>Ee.forEach(h.ds,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!sg(d))throw d;et(jV,"Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let p=u.Fs.get(h),_=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(_);u.Fs=u.Fs.insert(h,b)}}})(i.localStore,s))}async function X0e(n,e){let t=Kt(n);if(!t.currentUser.isEqual(e)){et(YV,"User change. New user:",e.toKey());let i=await H7(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ve(de.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await f0(t,i.Bs)}}function Y0e(n,e){let t=Kt(n),i=t.Eu.get(e);if(i&&i.lu)return bn().add(i.key);{let r=bn(),s=t.Tu.get(e);if(!s)return r;for(let o of s){let a=t.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function iK(n){let e=Kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y0e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W0e.bind(null,e),e.hu.J_=F0e.bind(null,e.eventManager),e.hu.pu=V0e.bind(null,e.eventManager),e}function Q0e(n){let e=Kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$0e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q0e.bind(null,e),e}var rK=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=PT(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,i){return null}Fu(t,i){return null}vu(t){return y0e(this.persistence,new K2,t.initialUser,this.serializer)}Du(t){return new aT(W2.Vi,this.serializer)}bu(t){return new Q2}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),yV=class extends rK{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Jn(this.persistence.referenceDelegate instanceof cT,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new P2(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Io.withCacheSize(this.cacheSizeBytes):Io.DEFAULT;return new aT(i=>cT.Vi(i,t),this.serializer)}};var J0e=(()=>{class n{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nq(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X0e.bind(null,this.syncEngine),await L0e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dV})()}createDatastore(t){let i=PT(t.databaseInfo.databaseId),r=(function(o){return new nV(o)})(t.databaseInfo);return(function(o,a,c,l){return new oV(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,s,o,a,c){return new cV(r,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>Nq(this.syncEngine,i,0),(function(){return uT.C()?new uT:new J2})())}createSyncEngine(t,i){return(function(s,o,a,c,l,u,d){let h=new gV(s,o,a,c,l,u);return d&&(h.fu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(s){let o=Kt(s);et(nf,"RemoteStore shutting down."),o.Ia.add(5),await h0(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}return n.provider={build:()=>new n},n})();var vT=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):fl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Qu="FirestoreClient",vV=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Cr.UNAUTHENTICATED,this.clientId=Jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{et(Qu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(et(Qu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=KV(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function WF(n,e){n.asyncQueue.verifyOperationInProgress(),et(Qu,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await H7(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{qu("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{et("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{qu("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e}async function Lq(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Z0e(n);et(Qu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Rq(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Rq(e.remoteStore,r)),n._onlineComponents=e}async function Z0e(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){et(Qu,"Using user provided OfflineComponentProvider");try{await WF(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qu("Error using user provided cache. Falling back to memory cache: "+t),await WF(n,new rK)}}else et(Qu,"Using default OfflineComponentProvider"),await WF(n,new yV(void 0));return n._offlineComponents}async function sK(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(et(Qu,"Using user provided OnlineComponentProvider"),await Lq(n,n._uninitializedComponentsProvider._online)):(et(Qu,"Using default OnlineComponentProvider"),await Lq(n,new J0e))),n._onlineComponents}function ebe(n){return sK(n).then(e=>e.syncEngine)}async function oK(n){let e=await sK(n),t=e.eventManager;return t.onListen=U0e.bind(null,e.syncEngine),t.onUnlisten=H0e.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=B0e.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j0e.bind(null,e.syncEngine),t}function tbe(n,e,t={}){let i=new ca;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new vT({next:h=>{u.Ou(),o.enqueueAndForget(()=>Q7(s,d));let p=h.docs.has(a);!p&&h.fromCache?l.reject(new Ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?l.reject(new Ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new gT(UV(a.path),u,{includeMetadataChanges:!0,ka:!0});return Y7(s,d)})(await oK(n),n.asyncQueue,e,t,i)),i.promise}function nbe(n,e,t={}){let i=new ca;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let u=new vT({next:h=>{u.Ou(),o.enqueueAndForget(()=>Q7(s,d)),h.fromCache&&c.source==="server"?l.reject(new Ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new gT(a,u,{includeMetadataChanges:!0,ka:!0});return Y7(s,d)})(await oK(n),n.asyncQueue,e,t,i)),i.promise}function aK(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Fq=new Map;var cK="firestore.googleapis.com",Vq=!0,bT=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cK,this.ssl=Vq}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vq;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m0e)throw new Ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hve("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aK((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},eg=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new $F;switch(i.type){case"firstParty":return new YF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=Fq.get(t);i&&(et("ComponentProvider","Removing Datastore"),Fq.delete(t),i.terminate())})(this),Promise.resolve()}};function lK(n,e,t,i={}){var r;n=la(n,eg);let s=Cu(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(cI(`https://${c}`),lI("Firestore",!0)),o.host!==cK&&o.host!==c&&qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:i});if(!ja(l,a)&&(n._setSettings(l),i.mockUserToken)){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Cr.MOCK_USER;else{u=D8(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Cr(h)}n._authCredentials=new qF(new WS(u,d))}}var vl=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Mr=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(d0(t,n._jsonSchema))return new n(e,i||null,new St(_i.fromString(t.referencePath)))}};Mr._jsonSchemaVersion="firestore/documentReference/1.0",Mr._jsonSchema={type:ar("string",Mr._jsonSchemaVersion),referencePath:ar("string")};var ju=class n extends vl{constructor(e,t,i){super(e,t,UV(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new St(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uK(n,e,...t){if(n=er(n),Wq("collection","path",e),n instanceof eg){let i=_i.fromString(e,...t);return iq(i),new ju(n,null,i)}{if(!(n instanceof Mr||n instanceof ju))throw new Ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(_i.fromString(e,...t));return iq(i),new ju(n.firestore,null,i)}}function JV(n,e,...t){if(n=er(n),arguments.length===1&&(e=Jv.newId()),Wq("doc","path",e),n instanceof eg){let i=_i.fromString(e,...t);return nq(i),new Mr(n,null,new St(i))}{if(!(n instanceof Mr||n instanceof ju))throw new Ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(_i.fromString(e,...t));return nq(i),new Mr(n.firestore,n instanceof ju?n.converter:null,new St(i))}}var Uq="AsyncQueue",xT=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new dT(this,"async_queue_retry"),this.oc=()=>{let i=GF();i&&et(Uq,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=GF();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=GF();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ca;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!sg(e))throw e;et(Uq,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,fl("INTERNAL UNHANDLED ERROR: ",Bq(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=lV.createAndSchedule(this,e,t,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&Ot(47125,{hc:Bq(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Bq(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var bl=class extends eg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new xT,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xT(e),this._firestoreClient=void 0,await e}}};function dK(n,e){let t=typeof n=="object"?n:Dh(),i=typeof n=="string"?n:e||YS,r=em(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=M8("firestore");s&&lK(r,...s)}return r}function ZV(n){if(n._terminated)throw new Ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ibe(n),n._firestoreClient}function ibe(n){var e,t,i;let r=n._freezeSettings(),s=(function(a,c,l,u){return new t2(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aK(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new vV(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Gu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ns.fromBase64String(e))}catch(t){throw new Ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(d0(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Gu._jsonSchemaVersion="firestore/bytes/1.0",Gu._jsonSchema={type:ar("string",Gu._jsonSchemaVersion),bytes:ar("string")};var tg=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ro(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var c0=class{constructor(e){this._methodName=e}};var Wu=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(d0(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Wu._jsonSchemaVersion="firestore/geoPoint/1.0",Wu._jsonSchema={type:ar("string",Wu._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};var $u=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(d0(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};$u._jsonSchemaVersion="firestore/vectorValue/1.0",$u._jsonSchema={type:ar("string",$u._jsonSchemaVersion),vectorValues:ar("object")};var rbe=/^__.*__$/,bV=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new tf(e,this.data,t,this.fieldTransforms)}},wT=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hK(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot(40011,{Ec:n})}}var xV=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return IT(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hK(this.Ec)&&rbe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},wV=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||PT(e)}Dc(e,t,i,r=!1){return new xV({Ec:e,methodName:t,bc:i,path:ro.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function p0(n){let e=n._freezeSettings(),t=PT(n._databaseId);return new wV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fK(n,e,t,i,r,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,r);e3("Data must be an object, but it was:",o,i);let a=mK(i,o),c,l;if(s.merge)c=new So(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=EV(e,d,t);if(!o.contains(h))throw new Ve(de.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);_K(u,h)||u.push(h)}c=new So(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new bV(new io(a),c,l)}var ET=class n extends c0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function sbe(n,e,t,i){let r=n.Dc(1,e,t);e3("Data must be an object, but it was:",r,i);let s=[],o=io.empty();Ju(i,(c,l)=>{let u=t3(e,c,t);l=er(l);let d=r.gc(u);if(l instanceof ET)s.push(u);else{let h=m0(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new So(s);return new wT(o,a,r.fieldTransforms)}function obe(n,e,t,i,r,s){let o=n.Dc(1,e,t),a=[EV(e,i,t)],c=[r];if(s.length%2!=0)throw new Ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(EV(e,s[h])),c.push(s[h+1]);let l=[],u=io.empty();for(let h=a.length-1;h>=0;--h)if(!_K(l,a[h])){let p=a[h],_=c[h];_=er(_);let b=o.gc(p);if(_ instanceof ET)l.push(p);else{let g=m0(_,b);g!=null&&(l.push(p),u.set(p,g))}}let d=new So(l);return new wT(u,d,o.fieldTransforms)}function pK(n,e,t,i=!1){return m0(t,n.Dc(i?4:3,e))}function m0(n,e){if(gK(n=er(n)))return e3("Unsupported field value:",e,n),mK(n,e);if(n instanceof c0)return(function(i,r){if(!hK(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let s=[],o=0;for(let a of i){let c=m0(a,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(i,r){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Gve(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=cr.fromDate(i);return{timestampValue:sT(r.serializer,s)}}if(i instanceof cr){let s=new cr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sT(r.serializer,s)}}if(i instanceof Wu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gu)return{bytesValue:N7(r.serializer,i._byteString)};if(i instanceof Mr){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:HV(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $u)return(function(o,a){return{mapValue:{fields:{[NV]:{stringValue:OV},[$m]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return zV(a.serializer,l)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${TT(i)}`)})(n,e)}function mK(n,e){let t={};return a7(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ju(n,(i,r)=>{let s=m0(r,e.Vc(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function gK(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof Wu||n instanceof Gu||n instanceof Mr||n instanceof c0||n instanceof $u)}function e3(n,e,t){if(!gK(t)||!$q(t)){let i=TT(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function EV(n,e,t){if((e=er(e))instanceof tg)return e._internalPath;if(typeof e=="string")return t3(n,e);throw IT("Field path arguments must be of type string or ",n,!1,void 0,t)}var abe=new RegExp("[~\\*/\\[\\]]");function t3(n,e,t){if(e.search(abe)>=0)throw IT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tg(...e.split("."))._internalPath}catch{throw IT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function IT(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ve(de.INVALID_ARGUMENT,a+n+c)}function _K(n,e){return n.some(t=>t.isEqual(e))}var l0=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new IV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(n3("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},IV=class extends l0{data(){return super.data()}};function n3(n,e){return typeof e=="string"?t3(n,e):e instanceof tg?e._internalPath:e._delegate._internalPath}function cbe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var u0=class{},ng=class extends u0{};function yK(n,e,...t){let i=[];e instanceof u0&&i.push(e),i=i.concat(t),(function(s){let o=s.filter(c=>c instanceof TV).length,a=s.filter(c=>c instanceof SV).length;if(o>1||o>0&&a>0)throw new Ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var SV=class n extends ng{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return wK(e._query,t),new vl(e.firestore,e.converter,p2(e._query,t))}_parse(e){let t=p0(e.firestore);return(function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Hq(d,u);let _=[];for(let b of d)_.push(zq(c,s,b));h={arrayValue:{values:_}}}else h=zq(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Hq(d,u),h=pK(a,o,d,u==="in"||u==="not-in");return or.create(l,u,h)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var TV=class n extends u0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:da.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)wK(o,c),o=p2(o,c)})(e._query,t),new vl(e.firestore,e.converter,p2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var CV=class n extends ng{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,s,o){if(r.startAt!==null)throw new Ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jh(s,o)})(e._query,this._field,this._direction);return new vl(e.firestore,e.converter,(function(r,s){let o=r.explicitOrderBy.concat([s]);return new gl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function vK(n,e="asc"){let t=e,i=n3("orderBy",n);return CV._create(i,t)}var AV=class n extends ng{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new vl(e.firestore,e.converter,eT(e._query,this._limit,this._limitType))}};function bK(n){return fve("limit",n),AV._create("limit",n,"F")}var MV=class n extends ng{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=lbe(e,this.type,this._docOrFields,this._inclusive);return new vl(e.firestore,e.converter,(function(r,s){return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)})(e._query,t))}};function xK(...n){return MV._create("startAfter",n,!1)}function lbe(n,e,t,i){if(t[0]=er(t[0]),t[0]instanceof l0)return(function(s,o,a,c,l){if(!c)throw new Ve(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of zm(s))if(d.field.isKeyField())u.push(JS(o,c.key));else{let h=c.data.field(d.field);if(AT(h))throw new Ve(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let p=d.field.canonicalString();throw new Ve(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new Xu(u,l)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=p0(n.firestore);return(function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new Ve(de.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let p=[];for(let _=0;_<u.length;_++){let b=u[_];if(h[_].field.isKeyField()){if(typeof b!="string")throw new Ve(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!BV(o)&&b.indexOf("/")!==-1)throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let g=o.path.child(_i.fromString(b));if(!St.isDocumentKey(g))throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let v=new St(g);p.push(JS(a,v))}else{let g=pK(c,l,b);p.push(g)}}return new Xu(p,d)})(n._query,n.firestore._databaseId,r,e,t,i)}}function zq(n,e,t){if(typeof(t=er(t))=="string"){if(t==="")throw new Ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BV(e)&&t.indexOf("/")!==-1)throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(_i.fromString(t));if(!St.isDocumentKey(i))throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JS(n,new St(i))}if(t instanceof Mr)return JS(n,t._key);throw new Ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TT(t)}.`)}function Hq(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wK(n,e){let t=(function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var DV=class{convertValue(e,t="none"){switch(Ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ot(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Ju(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[$m].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ei(o.doubleValue));return new $u(s)}convertGeoPoint(e){return new Wu(Ei(e.latitude),Ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=MT(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(t0(e));default:return null}}convertTimestamp(e){let t=pl(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=_i.fromString(e);Jn(B7(i),9688,{name:e});let r=new QS(i.get(1),i.get(3)),s=new St(i.popFirst(5));return r.isEqual(t)||fl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function EK(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Kh=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xh=class n extends l0{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(n3("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xh._jsonSchema={type:ar("string",Xh._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};var jm=class extends Xh{data(e={}){return super.data(e)}},Gm=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Kh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new jm(this._firestore,this._userDataWriter,i.key,i,new Kh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new jm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Kh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new jm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Kh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:ube(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ube(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot(61501,{type:n})}}function IK(n){n=la(n,Mr);let e=la(n.firestore,bl);return tbe(ZV(e),n._key).then(t=>dbe(e,n,t))}Gm._jsonSchemaVersion="firestore/querySnapshot/1.0",Gm._jsonSchema={type:ar("string",Gm._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};var ST=class extends DV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,t)}};function SK(n){n=la(n,vl);let e=la(n.firestore,bl),t=ZV(e),i=new ST(e);return cbe(n._query),nbe(t,n._query).then(r=>new Gm(e,i,n,r))}function TK(n,e,t){n=la(n,Mr);let i=la(n.firestore,bl),r=EK(n.converter,e,t);return OT(i,[fK(p0(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ec.none())])}function CK(n,e,t,...i){n=la(n,Mr);let r=la(n.firestore,bl),s=p0(r),o;return o=typeof(e=er(e))=="string"||e instanceof tg?obe(s,"updateDoc",n._key,e,t,i):sbe(s,"updateDoc",n._key,e),OT(r,[o.toMutation(n._key,ec.exists(!0))])}function AK(n){return OT(la(n.firestore,bl),[new i0(n._key,ec.none())])}function MK(n,e){let t=la(n.firestore,bl),i=JV(n),r=EK(n.converter,e);return OT(t,[fK(p0(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ec.exists(!1))]).then(()=>i)}function OT(n,e){return(function(i,r){let s=new ca;return i.asyncQueue.enqueueAndForget(async()=>G0e(await ebe(i),r,s)),s.promise})(ZV(n),e)}function dbe(n,e,t){let i=t.docs.get(e._key),r=new ST(n);return new Xh(n,r,e._key,i,new Kh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ig=r})(Mu),ta(new gs("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new bl(new KF(i.getProvider("auth-internal")),new QF(o,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new QS(l.options.projectId,u)})(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ai(J$,Z$,e),Ai(J$,Z$,"esm2017")})();var ha=class{constructor(e){return e}},DK="firestore",i3=class{constructor(){return nm(DK)}};var r3=new Ce("angularfire2.firestore-instances");function hbe(n,e){let t=rv(DK,n,e);return t&&new ha(t)}function fbe(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new ha(i)}}var pbe={provide:i3,deps:[[new Ts,r3]]},mbe={provide:ha,useFactory:hbe,deps:[[new Ts,r3],Xc]};function RK(n,...e){return Ai("angularfire",Du.full,"fst"),br([mbe,pbe,{provide:r3,useFactory:fbe(n),multi:!0,deps:[Ct,Qt,Ru,Ph,[new Ts,xv],[new Ts,im],...e]}])}var PK=xi(X$,!0);var kK=xi(q$,!0);var NK=xi(MK,!0,2);var g0=xi(uK,!0,2);var OK=xi(AK,!0,2);var Zu=xi(JV,!0,2);var LT=xi(IK,!0);var s3=xi(SK,!0);var LK=xi(dK,!0);var o3=xi(bK,!0,2);var _0=xi(vK,!0,2),y0=xi(yK,!0,2);var FT=xi(TK,!0,2);var FK=xi(xK,!0,2);var VK=xi(CK,!0,2);var ed={production:!0,test:!1,firebase:{apiKey:"AIzaSyBAO3O7xMC8HoyDEiqvKuYzAB1XyYaDpYg",authDomain:"lifestyleadapter.firebaseapp.com",projectId:"lifestyleadapter",storageBucket:"lifestyleadapter.firebasestorage.app",messagingSenderId:"391283581586",appId:"1:391283581586:web:c2296efb45ba65e2c4bc4b",measurementId:"G-Y01W5VQR7N"},githubToken:""};function sf(n){return n.buttons===0||n.detail===0}function of(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var a3;function UK(){if(a3==null){let n=typeof document<"u"?document.head:null;a3=!!(n&&(n.createShadowRoot||n.attachShadow))}return a3}function c3(n){if(UK()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ks(n){return n.composedPath?n.composedPath()[0]:n.target}var l3;try{l3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{l3=!1}var Ki=(()=>{class n{_platformId=H(Vc);isBrowser=this._platformId?c6(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||l3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v0;function BK(){if(v0==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>v0=!0}))}finally{v0=v0||!1}return v0}function ag(n){return BK()?n:!!n.capture}function cg(n,e=0){return zK(n)?Number(n):arguments.length===2?e:0}function zK(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function To(n){return n instanceof nn?n.nativeElement:n}var HK=new Ce("cdk-input-modality-detector-options"),jK={ignoreKeys:[18,17,224,91,16]},GK=650,u3={passive:!0,capture:!0},WK=(()=>{class n{_platform=H(Ki);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Hi(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ks(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<GK||(this._modality.next(sf(t)?"keyboard":"mouse"),this._mostRecentTarget=ks(t))};_onTouchstart=t=>{if(of(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ks(t)};constructor(){let t=H(Ct),i=H(Wt),r=H(HK,{optional:!0});if(this._options=ie(ie({},jK),r),this.modalityDetected=this._modality.pipe(hR(1)),this.modalityChanged=this.modalityDetected.pipe(Xd()),this._platform.isBrowser){let s=H(xr).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(i,"keydown",this._onKeydown,u3),s.listen(i,"mousedown",this._onMousedown,u3),s.listen(i,"touchstart",this._onTouchstart,u3)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b0=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(b0||{}),$K=new Ce("cdk-focus-monitor-default-options"),VT=ag({passive:!0,capture:!0}),lg=(()=>{class n{_ngZone=H(Ct);_platform=H(Ki);_inputModalityDetector=H(WK);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=H(Wt);_stopInputModalityDetector=new Pt;constructor(){let t=H($K,{optional:!0});this._detectionMode=t?.detectionMode||b0.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=ks(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=To(t);if(!this._platform.isBrowser||r.nodeType!==1)return Et();let s=c3(r)||this._document,o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let a={checkChildren:i,subject:new Pt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=To(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=To(t),o=this._document.activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===b0.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===b0.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?GK:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=ks(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,VT),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,VT)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Aa(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,VT),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,VT),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UT=new WeakMap,Co=(()=>{class n{_appRef;_injector=H(Qt);_environmentInjector=H(si);load(t){let i=this._appRef=this._appRef||this._injector.get(Er),r=UT.get(i);r||(r={loaders:new Set,refs:[]},UT.set(i,r),i.onDestroy(()=>{UT.get(i)?.refs.forEach(s=>s.destroy()),UT.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(xE(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d3(n){return Array.isArray(n)?n:[n]}var qK=new Set,af,h3=(()=>{class n{_platform=H(Ki);_nonce=H(Dp,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_be}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&gbe(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gbe(n,e){if(!qK.has(n))try{af||(af=document.createElement("style"),e&&af.setAttribute("nonce",e),af.setAttribute("type","text/css"),document.head.appendChild(af)),af.sheet&&(af.sheet.insertRule(`@media ${n} {body{ }}`,0),qK.add(n))}catch(t){console.error(t)}}function _be(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}function ybe(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var KK=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vbe=(()=>{class n{_mutationObserverFactory=H(KK);_observedElements=new Map;_ngZone=H(Ct);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){let i=To(t);return new bt(r=>{let o=this._observeElement(i).pipe(yt(a=>a.filter(c=>!ybe(c))),ri(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let i=new Pt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XK=(()=>{class n{_contentObserver=H(vbe);_elementRef=H(nn);event=new vn;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=cg(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(G_(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Ni],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),YK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({providers:[KK]})}return n})();var f3={},cf=class n{_appId=H(Mp);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),f3.hasOwnProperty(e)||(f3[e]=0),`${e}${t?n._infix+"-":""}${f3[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var bbe=200,BT=class{_letterKeyStream=new Pt;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Pt;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:bbe;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Gi(t=>this._pressedLetters.push(t)),G_(e),ri(()=>this._pressedLetters.length>0),yt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}};function zT(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var HT=class{_items;_activeItemIndex=$n(-1);_activeItem=$n(null);_wrap=!1;_typeaheadSubscription=Nn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Oc?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Sy(e)&&(this._effectRef=cy(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new Pt;change=new Pt;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new BT(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex()+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||zT(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex()+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return Sy(this._items)?this._items():this._items instanceof Oc?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var x0=class extends HT{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var jT;function xbe(){if(jT===void 0&&(jT=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(jT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return jT}function ug(n){return xbe()?.createHTML(n)||n}var lf;function ZK(){if(lf==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return lf=!1,lf;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)lf=!0;else{let n=Element.prototype.scrollTo;n?lf=!/\{\s*\[native code\]\s*\}/.test(n.toString()):lf=!1}}return lf}function g3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Ebe=new Ce("MATERIAL_ANIMATIONS"),eX=null;function Ibe(){return H(Ebe,{optional:!0})?.animationsDisabled||H(_y,{optional:!0})==="NoopAnimations"?"di-disabled":(eX??=H(h3).matchMedia("(prefers-reduced-motion)").matches,eX?"reduced-motion":"enabled")}function fa(){return Ibe()!=="enabled"}function Xi(n){return n==null?"":typeof n=="string"?n:`${n}px`}function xl(n){return n!=null&&`${n}`!="false"}var Ao=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(Ao||{}),_3=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ao.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},tX=ag({passive:!0,capture:!0}),y3=class{_events=new Map;addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,tX)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,tX)))}_delegateEventHandler=e=>{let t=ks(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}},w0={enterDuration:225,exitDuration:150},Sbe=800,nX=ag({passive:!0,capture:!0}),iX=["mousedown","touchstart"],rX=["mouseup","mouseleave","touchend","touchcancel"],Tbe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),uf=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new y3;constructor(e,t,i,r,s){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=To(i)),s&&s.get(Co).load(Tbe)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ie(ie({},w0),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||Cbe(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,_=h==="none"||p==="0s"||p==="0s, 0s"||r.width===0&&r.height===0,b=new _3(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",b.state=Ao.FADING_IN,i.persistent||(this._mostRecentTransientRipple=b);let g=null;return!_&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let v=()=>{g&&(g.fallbackTimer=null),clearTimeout(P),this._finishRippleTransition(b)},R=()=>this._destroyRipple(b),P=setTimeout(R,l+100);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",R),g={onTransitionEnd:v,onTransitionCancel:R,fallbackTimer:P}}),this._activeRipples.set(b,g),(_||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(e.state===Ao.FADING_OUT||e.state===Ao.HIDDEN)return;let t=e.element,i=ie(ie({},w0),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Ao.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=To(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,iX.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{rX.forEach(t=>{this._triggerElement.addEventListener(t,this,nX)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ao.FADING_IN?this._startFadeOutTransition(e):e.state===Ao.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ao.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ao.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=sf(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Sbe;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!of(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ao.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ao.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(iX.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(rX.forEach(t=>e.removeEventListener(t,this,nX)),this._pointerUpEventsRegistered=!1))}};function Cbe(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var E0=new Ce("mat-ripple-global-options"),sX=(()=>{class n{_elementRef=H(nn);_animationsDisabled=fa();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=H(Ct),i=H(Ki),r=H(E0,{optional:!0}),s=H(Qt);this._globalOptions=r||{},this._rippleRenderer=new uf(this,t,this._elementRef,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ie(ie(ie({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,ie(ie({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ie(ie({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&li("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var Abe={capture:!0},Mbe=["focus","mousedown","mouseenter","touchstart"],v3="mat-ripple-loader-uninitialized",b3="mat-ripple-loader-class-name",oX="mat-ripple-loader-centered",GT="mat-ripple-loader-disabled",aX=(()=>{class n{_document=H(Wt);_animationsDisabled=fa();_globalRippleOptions=H(E0,{optional:!0});_platform=H(Ki);_ngZone=H(Ct);_injector=H(Qt);_eventCleanups;_hosts=new Map;constructor(){let t=H(xr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Mbe.map(i=>t.listen(this._document,i,this._onInteraction,Abe)))}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(t,i){t.setAttribute(v3,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(b3))&&t.setAttribute(b3,i.className||""),i.centered&&t.setAttribute(oX,""),i.disabled&&t.setAttribute(GT,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(GT,""):t.removeAttribute(GT)}_onInteraction=t=>{let i=ks(t);if(i instanceof HTMLElement){let r=i.closest(`[${v3}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(b3)),t.append(i);let r=this._globalRippleOptions,s=this._animationsDisabled?0:r?.animation?.enterDuration??w0.enterDuration,o=this._animationsDisabled?0:r?.animation?.exitDuration??w0.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||t.hasAttribute(GT),rippleConfig:{centered:t.hasAttribute(oX),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:o}}},c=new uf(a,this._ngZone,i,this._platform,this._injector),l=!a.rippleDisabled;l&&c.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:c,hasSetUpEvents:l}),t.removeAttribute(v3)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var Dbe=["mat-icon-button",""],Rbe=["*"],Pbe=new Ce("MAT_BUTTON_CONFIG");function cX(n){return n==null?void 0:Jj(n)}var x3=(()=>{class n{_elementRef=H(nn);_ngZone=H(Ct);_animationsDisabled=fa();_config=H(Pbe,{optional:!0});_focusMonitor=H(lg);_cleanupClick;_renderer=H(Or);_rippleLoader=H(aX);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){H(Co).load(dg);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(gi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Gc(r.color?"mat-"+r.color:""),li("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Ni],disabled:[2,"disabled","disabled",Ni],ariaDisabled:[2,"aria-disabled","ariaDisabled",Ni],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ni],tabIndex:[2,"tabIndex","tabIndex",cX],_tabindex:[2,"tabindex","_tabindex",cX]}})}return n})(),w3=(()=>{class n extends x3{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[pi],attrs:Dbe,ngContentSelectors:Rbe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(mr(),Ci(0,"span",0),Qn(1),Ci(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var kbe=new Ce("cdk-dir-doc",{providedIn:"root",factory:()=>H(Wt)}),Nbe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function lX(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Nbe.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var I0=(()=>{class n{get value(){return this.valueSignal()}valueSignal=$n("ltr");change=new vn;constructor(){let t=H(kbe,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(lX(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Di=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();var hg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var Obe=["matButton",""],Lbe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Fbe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var uX=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),fg=(()=>{class n extends x3{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=Vbe(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?uX.get(this._appearance):null,s=uX.get(t);r&&i.remove(...r),i.add(...s),this._appearance=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[pi],attrs:Obe,ngContentSelectors:Fbe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(mr(Lbe),Ci(0,"span",0),Qn(1),Oe(2,"span",1),Qn(3,1),Ge(),Qn(4,2),Ci(5,"span",2)(6,"span",3)),i&2&&li("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Vbe(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var Mo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[hg,Di]})}return n})();var Ube=["*"];var Bbe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],zbe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],Hbe=new Ce("MAT_CARD_CONFIG"),td=(()=>{class n{appearance;constructor(){let t=H(Hbe,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(i,r){i&2&&li("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")("mat-mdc-card-filled",r.appearance==="filled")("mdc-card--filled",r.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Ube,decls:1,vars:0,template:function(i,r){i&1&&(mr(),Qn(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),WT=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var pg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),dX=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var $T=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:zbe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(mr(Bbe),Qn(0),Oe(1,"div",0),Qn(2,1),Ge(),Qn(3,2))},encapsulation:2,changeDetection:0})}return n})();var Do=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();function hX(n){return Error(`Unable to find icon with the name "${n}"`)}function jbe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function fX(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function pX(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var wl=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},gX=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new wl(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(Nr.HTML,r);if(!o)throw pX(r);let a=ug(o);return this._addSvgIconConfig(t,i,new wl("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new wl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(Nr.HTML,i);if(!s)throw pX(i);let o=ug(s);return this._addSvgIconSetConfig(t,new wl("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Nr.RESOURCE_URL,t);if(!i)throw fX(t);let r=this._cachedIconsByUrl.get(i);return r?Et(KT(r)):this._loadSvgIconFromConfig(new wl(t,null)).pipe(Gi(s=>this._cachedIconsByUrl.set(i,s)),yt(s=>KT(s)))}getNamedSvgIcon(t,i=""){let r=mX(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):B_(hX(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Et(KT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(yt(i=>KT(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return Et(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Kd(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Nr.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),Et(null)})));return j_(s).pipe(yt(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw hX(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Gi(i=>t.svgText=i),yt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Et(null):this._fetchIcon(t).pipe(Gi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(ug("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(ug("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw jbe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(Nr.RESOURCE_URL,i);if(!o)throw fX(i);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(yt(l=>ug(l)),Yd(()=>this._inProgressUrlFetches.delete(o)),dR());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(mX(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return Gbe(s)?new wl(s.url,null,s.options):new wl(s,null)}}static \u0275fac=function(i){return new(i||n)(st(wk,8),st(Ek),st(Wt,8),st(Es))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KT(n){return n.cloneNode(!0)}function mX(n,e){return n+":"+e}function Gbe(n){return!!(n.url&&n.options)}var Wbe=["*"],$be=new Ce("MAT_ICON_DEFAULT_OPTIONS"),qbe=new Ce("mat-icon-location",{providedIn:"root",factory:()=>{let n=H(Wt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),_X=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Kbe=_X.map(n=>`[${n}]`).join(", "),Xbe=/^url\(['"]?#(.*?)['"]?\)$/,rc=(()=>{class n{_elementRef=H(nn);_iconRegistry=H(gX);_location=H(qbe);_errorHandler=H(Es);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Nn.EMPTY;constructor(){let t=H(new Lp("aria-hidden"),{optional:!0}),i=H($be,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(Kbe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)_X.forEach(o=>{let a=i[s],c=a.getAttribute(o),l=c?c.match(Xbe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ji(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(gi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Gc(r.color?"mat-"+r.color:""),li("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ni],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:Wbe,decls:1,vars:0,template:function(i,r){i&1&&(mr(),Qn(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Ns=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var is=class n{auth=H(sa);router=H(Ur);firestore=H(ha);user$=KI(this.auth).pipe(hi(e=>{if(!e)return Et(null);let t=Zu(this.firestore,`users/${e.uid}`);return di(LT(t)).pipe(hi(async i=>{if(!i.exists()){let r={id:e.uid,uid:e.uid,name:e.displayName,email:e.email,pic:e.photoURL,role:"USER",laScore:0,emailVerified:e.emailVerified};return await FT(t,r),r}return i.data()}))}));constructor(){}async loginWithGoogle(){let e=new bO;try{await WG(this.auth,e),await new Promise(t=>setTimeout(t,100)),this.router.navigate(["/dashboard"])}catch(t){console.error("Login failed",t)}}async logout(){await $G(this.auth),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qbe(n,e){if(n&1){let t=Qi();ce(0,"button",15),Ln("click",function(){Gn(t);let r=An();return Wn(r.authService.loginWithGoogle())}),En(1,"div",16),ce(2,"div",17)(3,"div",18),Yr(),ce(4,"svg",19),En(5,"path",20)(6,"path",21)(7,"path",22)(8,"path",23)(9,"path",24),le()(),Ys(),ce(10,"span",25),Y(11,"Sign in with Google"),le(),ce(12,"span",26),Y(13,"Sign in with Google"),le()()()}}function Jbe(n,e){n&1&&(ce(0,"p",27),Y(1,"Join thousands of users optimizing their lifestyle today."),le())}function Zbe(n,e){n&1&&(ce(0,"p",27),Y(1,"Sign in to access your personalized dashboard."),le())}var XT=class n{authService=H(is);router=H(Ur);isStandalone=!1;ngOnInit(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||!ed.production&&!ed.test,this.isStandalone&&this.authService.user$.subscribe(e=>{e&&this.router.navigate(["/dashboard"])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-home"]],decls:37,vars:3,consts:[[1,"home-container"],[1,"hero-section"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"cta-container"],["class","gsi-material-button",3,"click",4,"ngIf"],["class","hero-note",4,"ngIf"],[1,"value-prop-section"],[1,"features-grid"],[1,"feature-item"],[1,"icon-wrapper"],["color","primary"],["color","accent"],["color","warn"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"],[1,"hero-note"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),Y(4,"Lifestyle Adapter"),le(),ce(5,"p",4),Y(6," Your personal growth companion for a better lifestyle. "),le(),ce(7,"div",5),Lr(8,Qbe,14,0,"button",6),le(),Lr(9,Jbe,2,0,"p",7)(10,Zbe,2,0,"p",7),le()(),ce(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"mat-icon",12),Y(16,"insights"),le()(),ce(17,"h3"),Y(18,"Personalized Analysis"),le(),ce(19,"p"),Y(20,"Unlock deep insights into your daily routines and discover clear paths to optimization."),le()(),ce(21,"div",10)(22,"div",11)(23,"mat-icon",13),Y(24,"schedule"),le()(),ce(25,"h3"),Y(26,"Habit Formation"),le(),ce(27,"p"),Y(28,"Build streaks and track consistency to turn positive actions into automatic behaviors."),le()(),ce(29,"div",10)(30,"div",11)(31,"mat-icon",14),Y(32,"trending_up"),le()(),ce(33,"h3"),Y(34,"Measurable Progress"),le(),ce(35,"p"),Y(36,"Watch your LA Score rise as you improve your sleep, activity, and focus."),le()()()()()),t&2&&(ot(8),Cn("ngIf",i.isStandalone),ot(),Cn("ngIf",!i.isStandalone),ot(),Cn("ngIf",i.isStandalone))},dependencies:[Ps,Qo,Mo,Do,Ns,rc],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a237e,#283593);color:#fff;padding:100px 20px;text-align:center;display:flex;justify-content:center;align-items:center;min-height:400px}.hero-content[_ngcontent-%COMP%]{max-width:800px;width:100%}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:24px;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300;margin-bottom:48px;opacity:.9;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto}.cta-container[_ngcontent-%COMP%]{margin-bottom:24px;display:flex;flex-direction:column;align-items:center;gap:16px;width:100%}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-appearance:none;appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}.hero-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7;margin-top:16px}.value-prop-section[_ngcontent-%COMP%]{padding:80px 20px;background-color:#f5f5f5;text-align:center}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:60px}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:32px;max-width:1200px;margin:0 auto;padding:0 10px}.feature-item[_ngcontent-%COMP%]{background:#fff;padding:32px 24px;border-radius:20px;box-shadow:0 10px 30px #0000000a;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid rgba(0,0,0,.02);display:flex;flex-direction:column;align-items:center;text-align:center}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #00000014;border-color:#1a237e1a}.icon-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;width:64px;height:64px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 auto 24px}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:16px;color:#333}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}@media(max-width:768px){.hero-section[_ngcontent-%COMP%]{padding:60px 20px;min-height:auto}.hero-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:16px}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:32px}.value-prop-section[_ngcontent-%COMP%]{padding:60px 20px}.value-prop-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:40px}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:24px;padding:0}.feature-item[_ngcontent-%COMP%]{padding:24px 20px}.icon-wrapper[_ngcontent-%COMP%]{width:56px;height:56px;margin-bottom:16px}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:12px}}@media(max-width:480px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1rem}.install-button[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]{width:100%}}"]})};var YT=class n{authService=H(is);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-container"],[1,"login-card"],[1,"gsi-material-button",3,"click"],[1,"gsi-material-button-state"],[1,"gsi-material-button-content-wrapper"],[1,"gsi-material-button-icon"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"display","block"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"],["fill","#4285F4","d","M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"],["fill","#FBBC05","d","M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"],["fill","#34A853","d","M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"],["fill","none","d","M0 0h48v48H0z"],[1,"gsi-material-button-contents"],[2,"display","none"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),Y(4,"Welcome to Lifestyle Adapter"),le(),ce(5,"mat-card-subtitle"),Y(6,"Sign in to continue"),le()(),ce(7,"mat-card-content")(8,"button",2),Ln("click",function(){return i.authService.loginWithGoogle()}),En(9,"div",3),ce(10,"div",4)(11,"div",5),Yr(),ce(12,"svg",6),En(13,"path",7)(14,"path",8)(15,"path",9)(16,"path",10)(17,"path",11),le()(),Ys(),ce(18,"span",12),Y(19,"Sign in with Google"),le(),ce(20,"span",13),Y(21,"Sign in with Google"),le()()()()()())},dependencies:[Mo,Do,td,pg,$T,dX,WT,Ns],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{padding:30px;text-align:center;max-width:400px;width:100%}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:100%;max-width:400px;min-width:min-content;margin-top:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}@media(max-width:480px){.login-container[_ngcontent-%COMP%]{padding:16px;height:auto;min-height:calc(100vh - 64px)}.login-card[_ngcontent-%COMP%]{padding:20px;box-shadow:none!important;border:1px solid #e0e0e0}}"]})};var QT=class n{authService=H(is);ngOnInit(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,i){t&1&&(Oe(0,"p"),Y(1,"Logging out..."),Ge())},encapsulation:2})};function A0(n){return n+.5|0}var nd=(n,e,t)=>Math.max(Math.min(n,t),e);function T0(n){return nd(A0(n*2.55),0,255)}function id(n){return nd(A0(n*255),0,255)}function El(n){return nd(A0(n/2.55)/100,0,1)}function yX(n){return nd(A0(n*100),0,100)}var Ro={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},S3=[..."0123456789ABCDEF"],exe=n=>S3[n&15],txe=n=>S3[(n&240)>>4]+S3[n&15],JT=n=>(n&240)>>4===(n&15),nxe=n=>JT(n.r)&&JT(n.g)&&JT(n.b)&&JT(n.a);function ixe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ro[n[1]]*17,g:255&Ro[n[2]]*17,b:255&Ro[n[3]]*17,a:e===5?Ro[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ro[n[1]]<<4|Ro[n[2]],g:Ro[n[3]]<<4|Ro[n[4]],b:Ro[n[5]]<<4|Ro[n[6]],a:e===9?Ro[n[7]]<<4|Ro[n[8]]:255})),t}var rxe=(n,e)=>n<255?e(n):"";function sxe(n){var e=nxe(n)?exe:txe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+rxe(n.a,e):void 0}var oxe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wX(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function axe(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function cxe(n,e,t){let i=wX(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function lxe(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function T3(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=lxe(t,i,r,u,s),c=c*60+.5),[c|0,l||0,a]}function C3(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(id)}function A3(n,e,t){return C3(wX,n,e,t)}function uxe(n,e,t){return C3(cxe,n,e,t)}function dxe(n,e,t){return C3(axe,n,e,t)}function EX(n){return(n%360+360)%360}function hxe(n){let e=oxe.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?T0(+e[5]):id(+e[5]));let r=EX(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=uxe(r,s,o):e[1]==="hsv"?i=dxe(r,s,o):i=A3(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function fxe(n,e){var t=T3(n);t[0]=EX(t[0]+e),t=A3(t),n.r=t[0],n.g=t[1],n.b=t[2]}function pxe(n){if(!n)return;let e=T3(n),t=e[0],i=yX(e[1]),r=yX(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${El(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var vX={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bX={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mxe(){let n={},e=Object.keys(bX),t=Object.keys(vX),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,vX[s]);s=parseInt(bX[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var ZT;function gxe(n){ZT||(ZT=mxe(),ZT.transparent=[0,0,0,0]);let e=ZT[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var _xe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yxe(n){let e=_xe.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?T0(o):nd(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?T0(i):nd(i,0,255)),r=255&(e[4]?T0(r):nd(r,0,255)),s=255&(e[6]?T0(s):nd(s,0,255)),{r:i,g:r,b:s,a:t}}}function vxe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${El(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var I3=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,mg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function bxe(n,e,t){let i=mg(El(n.r)),r=mg(El(n.g)),s=mg(El(n.b));return{r:id(I3(i+t*(mg(El(e.r))-i))),g:id(I3(r+t*(mg(El(e.g))-r))),b:id(I3(s+t*(mg(El(e.b))-s))),a:n.a+t*(e.a-n.a)}}function eC(n,e,t){if(n){let i=T3(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=A3(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function IX(n,e){return n&&Object.assign(e||{},n)}function xX(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=id(n[3]))):(e=IX(n,{r:0,g:0,b:0,a:1}),e.a=id(e.a)),e}function xxe(n){return n.charAt(0)==="r"?yxe(n):hxe(n)}var C0=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=xX(e):t==="string"&&(i=ixe(e)||gxe(e)||xxe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=IX(this._rgb);return e&&(e.a=El(e.a)),e}set rgb(e){this._rgb=xX(e)}rgbString(){return this._valid?vxe(this._rgb):void 0}hexString(){return this._valid?sxe(this._rgb):void 0}hslString(){return this._valid?pxe(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=bxe(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=id(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=A0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return eC(this._rgb,2,e),this}darken(e){return eC(this._rgb,2,-e),this}saturate(e){return eC(this._rgb,1,e),this}desaturate(e){return eC(this._rgb,1,-e),this}rotate(e){return fxe(this._rgb,e),this}};function oc(){}var OX=(()=>{let n=0;return()=>n++})();function Pn(n){return n==null}function mi(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ri(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Us(n,e){return Ri(n)?n:e}function an(n,e){return typeof n>"u"?e:n}var LX=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ui(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Zn(n,e,t,i){let r,s,o;if(mi(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(xn(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function R0(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function rC(n){if(mi(n))return n.map(rC);if(xn(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=rC(n[t[r]]);return e}return n}function FX(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function wxe(n,e,t,i){if(!FX(n))return;let r=e[n],s=t[n];xn(r)&&xn(s)?_g(r,s,i):e[n]=rC(s)}function _g(n,e,t){let i=mi(e)?e:[e],r=i.length;if(!xn(n))return n;t=t||{};let s=t.merger||wxe,o;for(let a=0;a<r;++a){if(o=i[a],!xn(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function vg(n,e){return _g(n,e,{merger:Exe})}function Exe(n,e,t){if(!FX(n))return;let i=e[n],r=t[n];xn(i)&&xn(r)?vg(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=rC(r))}var SX={"":n=>n,x:n=>n.x,y:n=>n.y};function Ixe(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Sxe(n){let e=Ixe(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function pf(n,e){return(SX[e]||(SX[e]=Sxe(e)))(n)}function cC(n){return n.charAt(0).toUpperCase()+n.slice(1)}var bg=n=>typeof n<"u",Il=n=>typeof n=="function",P3=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function VX(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Yi=Math.PI,Fs=2*Yi,Txe=Fs+Yi,sC=Number.POSITIVE_INFINITY,Cxe=Yi/180,Ls=Yi/2,df=Yi/4,TX=Yi*2/3,Sl=Math.log10,pa=Math.sign;function xg(n,e,t){return Math.abs(n-e)<t}function k3(n){let e=Math.round(n);n=xg(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Sl(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function UX(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Axe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function wg(n){return!Axe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function BX(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function N3(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Tl(n){return n*(Yi/180)}function lC(n){return n*(180/Yi)}function O3(n){if(!Ri(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function zX(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*Yi&&(s+=Fs),{angle:s,distance:r}}function oC(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Mxe(n,e){return(n-e+Txe)%Fs-Yi}function Os(n){return(n%Fs+Fs)%Fs}function L3(n,e,t,i){let r=Os(n),s=Os(e),o=Os(t),a=Os(s-r),c=Os(o-r),l=Os(r-s),u=Os(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Vs(n,e,t){return Math.max(e,Math.min(t,n))}function HX(n){return Vs(n,-32768,32767)}function Cl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function uC(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var sd=(n,e,t,i)=>uC(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),jX=(n,e,t)=>uC(n,t,i=>n[i][e]>=t);function GX(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var WX=["push","pop","shift","splice","unshift"];function $X(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),WX.forEach(t=>{let i="_onData"+cC(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function F3(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(WX.forEach(s=>{delete n[s]}),delete n._chartjs)}function V3(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var U3=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function B3(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,U3.call(window,()=>{i=!1,n.apply(e,t)}))}}function qX(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var dC=n=>n==="start"?"left":n==="end"?"right":"center",Br=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,KX=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function XX(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:_}=o.getUserBounds();if(p){if(r=Math.min(sd(c,u,d).lo,t?i:sd(e,u,o.getPixelForValue(d)).lo),l){let b=c.slice(0,r+1).reverse().findIndex(g=>!Pn(g[a.axis]));r-=Math.max(0,b)}r=Vs(r,0,i-1)}if(_){let b=Math.max(sd(c,o.axis,h,!0).hi+1,t?0:sd(e,u,o.getPixelForValue(h),!0).hi+1);if(l){let g=c.slice(b-1).findIndex(v=>!Pn(v[a.axis]));b+=Math.max(0,g)}s=Vs(b,r,i)-r}else s=i-r}return{start:r,count:s}}function YX(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var tC=n=>n===0||n===1,CX=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Fs/t)),AX=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Fs/t)+1,gg={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ls)+1,easeOutSine:n=>Math.sin(n*Ls),easeInOutSine:n=>-.5*(Math.cos(Yi*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>tC(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>tC(n)?n:CX(n,.075,.3),easeOutElastic:n=>tC(n)?n:AX(n,.075,.3),easeInOutElastic(n){return tC(n)?n:n<.5?.5*CX(n*2,.1125,.45):.5+.5*AX(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-gg.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?gg.easeInBounce(n*2)*.5:gg.easeOutBounce(n*2-1)*.5+.5};function z3(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function H3(n){return z3(n)?n:new C0(n)}function M3(n){return z3(n)?n:new C0(n).saturate(.5).darken(.1).hexString()}var Dxe=["x","y","borderWidth","radius","tension"],Rxe=["color","borderColor","backgroundColor"];function Pxe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Rxe},numbers:{type:"number",properties:Dxe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kxe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var MX=new Map;function Nxe(n,e){e=e||{};let t=n+JSON.stringify(e),i=MX.get(t);return i||(i=new Intl.NumberFormat(n,e),MX.set(t,i)),i}function hC(n,e,t){return Nxe(e,t).format(n)}var QX={values(n){return mi(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=Oxe(n,t)}let o=Sl(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),hC(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Sl(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?QX.numeric.call(this,n,e,t):""}};function Oxe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var P0={formatters:QX};function Lxe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:P0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ad=Object.create(null),fC=Object.create(null);function M0(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function D3(n,e,t){return typeof e=="string"?_g(M0(n,e),t):_g(M0(n,""),e)}var R3=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>M3(r.backgroundColor),this.hoverBorderColor=(i,r)=>M3(r.borderColor),this.hoverColor=(i,r)=>M3(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return D3(this,e,t)}get(e){return M0(this,e)}describe(e,t){return D3(fC,e,t)}override(e,t){return D3(ad,e,t)}route(e,t,i,r){let s=M0(this,e),o=M0(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return xn(c)?Object.assign({},l,c):an(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},yi=new R3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Pxe,kxe,Lxe]);function Fxe(n){return!n||Pn(n.size)||Pn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function D0(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function JX(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!mi(d))o=D0(n,r,s,o,d);else if(mi(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!mi(h)&&(o=D0(n,r,s,o,h));n.restore();let p=s.length/2;if(p>t.length){for(c=0;c<p;c++)delete r[s[c]];s.splice(0,p)}return o}function cd(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function j3(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function pC(n,e,t,i){G3(n,e,t,i,null)}function G3(n,e,t,i,r){let s,o,a,c,l,u,d,h,p=e.pointStyle,_=e.rotation,b=e.radius,g=(_||0)*Cxe;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(g),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),p){default:r?n.ellipse(t,i,r/2,b,0,0,Fs):n.arc(t,i,b,0,Fs),n.closePath();break;case"triangle":u=r?r/2:b,n.moveTo(t+Math.sin(g)*u,i-Math.cos(g)*b),g+=TX,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*b),g+=TX,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*b),n.closePath();break;case"rectRounded":l=b*.516,c=b-l,o=Math.cos(g+df)*c,d=Math.cos(g+df)*(r?r/2-l:c),a=Math.sin(g+df)*c,h=Math.sin(g+df)*(r?r/2-l:c),n.arc(t-d,i-a,l,g-Yi,g-Ls),n.arc(t+h,i-o,l,g-Ls,g),n.arc(t+d,i+a,l,g,g+Ls),n.arc(t-h,i+o,l,g+Ls,g+Yi),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*b,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}g+=df;case"rectRot":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":g+=df;case"cross":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),g+=df,d=Math.cos(g)*(r?r/2:b),o=Math.cos(g)*b,a=Math.sin(g)*b,h=Math.sin(g)*(r?r/2:b),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(g)*b,a=Math.sin(g)*b,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*(r?r/2:b),i+Math.sin(g)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function sc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function k0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function N0(n){n.restore()}function ZX(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function eY(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Vxe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Pn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Uxe(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Bxe(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function ld(n,e,t,i,r,s={}){let o=mi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,Vxe(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&Bxe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Pn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),Uxe(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function Eg(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Yi,Yi,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Yi,Ls,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ls,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Ls,!0),n.lineTo(t+o.topLeft,i)}var zxe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Hxe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jxe(n,e){let t=(""+n).match(zxe);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Gxe=n=>+n||0;function W3(n,e){let t={},i=xn(e),r=i?Object.keys(e):e,s=xn(n)?i?o=>an(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=Gxe(s(o));return t}function $3(n){return W3(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ud(n){return W3(n,["topLeft","topRight","bottomLeft","bottomRight"])}function zr(n){let e=$3(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lr(n,e){n=n||{},e=e||yi.font;let t=an(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=an(n.style,e.style);i&&!(""+i).match(Hxe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:an(n.family,e.family),lineHeight:jxe(an(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:an(n.weight,e.weight),string:""};return r.string=Fxe(r),r}function O0(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&mi(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function tY(n,e,t){let{min:i,max:r}=n,s=LX(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Al(n,e){return Object.assign(Object.create(n),e)}function mC(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=rY("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>mC([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return nY(a,c,()=>Jxe(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return RX(a).includes(c)},ownKeys(a){return RX(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function ff(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:q3(n,i),setContext:s=>ff(n,s,t,i),override:s=>ff(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return nY(s,o,()=>$xe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function q3(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Il(t)?t:()=>t,isIndexable:Il(i)?i:()=>i}}var Wxe=(n,e)=>n?n+cC(e):e,K3=(n,e)=>xn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nY(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function $xe(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Il(a)&&o.isScriptable(e)&&(a=qxe(e,a,n,t)),mi(a)&&a.length&&(a=Kxe(e,a,n,o.isIndexable)),K3(e,a)&&(a=ff(a,r,s&&s[e],o)),a}function qxe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),K3(n,c)&&(c=X3(r._scopes,r,n,c)),c}function Kxe(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(xn(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=X3(l,r,n,u);e.push(ff(d,s,o&&o[n],a))}}return e}function iY(n,e,t){return Il(n)?n(e,t):n}var Xxe=(n,e)=>n===!0?e:typeof n=="string"?pf(e,n):void 0;function Yxe(n,e,t,i,r){for(let s of e){let o=Xxe(t,s);if(o){n.add(o);let a=iY(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function X3(n,e,t,i){let r=e._rootScopes,s=iY(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=DX(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=DX(a,o,s,c,i),c===null)?!1:mC(Array.from(a),[""],r,s,()=>Qxe(e,t,i))}function DX(n,e,t,i,r){for(;t;)t=Yxe(n,e,t,i,r);return t}function Qxe(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return mi(r)&&xn(t)?t:r||{}}function Jxe(n,e,t,i){let r;for(let s of e)if(r=rY(Wxe(s,n),t),typeof r<"u")return K3(n,r)?X3(t,i,n,r):r}function rY(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function RX(n){let e=n._keys;return e||(e=n._keys=Zxe(n._scopes)),e}function Zxe(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}var ewe=Number.EPSILON||1e-14,yg=(n,e)=>e<n.length&&!n[e].skip&&n[e],sY=n=>n==="x"?"y":"x";function twe(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=oC(s,r),c=oC(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=i*l,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function nwe(n,e,t){let i=n.length,r,s,o,a,c,l=yg(n,0);for(let u=0;u<i-1;++u)if(c=l,l=yg(n,u+1),!(!c||!l)){if(xg(e[u],0,ewe)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function iwe(n,e,t="x"){let i=sY(t),r=n.length,s,o,a,c=yg(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=yg(n,l+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[l])}}function rwe(n,e="x"){let t=sY(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=yg(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=yg(n,o+1),!!c){if(l){let u=l[e]-c[e];r[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?pa(r[o-1])!==pa(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}nwe(n,r,s),iwe(n,s,e)}function nC(n,e,t){return Math.max(Math.min(n,t),e)}function swe(n,e){let t,i,r,s,o,a=sc(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&sc(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=nC(r.cp1x,e.left,e.right),r.cp1y=nC(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=nC(r.cp2x,e.left,e.right),r.cp2y=nC(r.cp2y,e.top,e.bottom)))}function oY(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")rwe(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=twe(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&swe(n,t)}function gC(){return typeof window<"u"&&typeof document<"u"}function _C(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function aC(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var yC=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function owe(n,e){return yC(n).getPropertyValue(e)}var awe=["top","right","bottom","left"];function hf(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=awe[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var cwe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function lwe(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(cwe(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function dd(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=yC(t),s=r.boxSizing==="border-box",o=hf(r,"padding"),a=hf(r,"border","width"),{x:c,y:l,box:u}=lwe(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:p,height:_}=e;return s&&(p-=o.width+a.width,_-=o.height+a.height),{x:Math.round((c-d)/p*t.width/i),y:Math.round((l-h)/_*t.height/i)}}function uwe(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&_C(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=yC(s),c=hf(a,"border","width"),l=hf(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=aC(a.maxWidth,s,"clientWidth"),r=aC(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||sC,maxHeight:r||sC}}var od=n=>Math.round(n*10)/10;function aY(n,e,t,i){let r=yC(n),s=hf(r,"margin"),o=aC(r.maxWidth,n,"clientWidth")||sC,a=aC(r.maxHeight,n,"clientHeight")||sC,c=uwe(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let h=hf(r,"border","width"),p=hf(r,"padding");l-=p.width+h.width,u-=p.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=od(Math.min(l,o,c.maxWidth)),u=od(Math.min(u,a,c.maxHeight)),l&&!u&&(u=od(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=od(Math.floor(u*i))),{width:l,height:u}}function Y3(n,e,t){let i=e||1,r=od(n.height*i),s=od(n.width*i);n.height=od(n.height),n.width=od(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var cY=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};gC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Q3(n,e){let t=owe(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function rd(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function lY(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function uY(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=rd(n,r,t),a=rd(r,s,t),c=rd(s,e,t),l=rd(o,a,t),u=rd(a,c,t);return rd(l,u,t)}var dwe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},hwe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function mf(n,e,t){return n?dwe(e,t):hwe()}function J3(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Z3(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function dY(n){return n==="angle"?{between:L3,compare:Mxe,normalize:Os}:{between:Cl,compare:(e,t)=>e-t,normalize:e=>e}}function PX({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function fwe(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=dY(i),c=e.length,{start:l,end:u,loop:d}=n,h,p;if(d){for(l+=c,u+=c,h=0,p=c;h<p&&o(a(e[l%c][i]),r,s);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:n.style}}function eU(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=dY(i),{start:u,end:d,loop:h,style:p}=fwe(n,e,t),_=[],b=!1,g=null,v,R,P,N=()=>c(r,P,v)&&a(r,P)!==0,U=()=>a(s,v)===0||c(s,P,v),O=()=>b||N(),I=()=>!b||U();for(let w=u,y=u;w<=d;++w)R=e[w%o],!R.skip&&(v=l(R[i]),v!==P&&(b=c(v,r,s),g===null&&O()&&(g=a(v,r)===0?w:y),g!==null&&I()&&(_.push(PX({start:g,end:w,loop:h,count:o,style:p})),g=null),y=w,P=v));return g!==null&&_.push(PX({start:g,end:d,loop:h,count:o,style:p})),_}function tU(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=eU(i[r],n.points,e);s.length&&t.push(...s)}return t}function pwe(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function mwe(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function hY(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=pwe(t,r,s,i);if(i===!0)return kX(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return kX(n,mwe(t,o,c,l),t,e)}function kX(n,e,t,i){return!i||!i.setContext||!t?e:gwe(n,e,t,i)}function gwe(n,e,t,i){let r=n._chart.getContext(),s=NX(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,d=e[0].start,h=d;function p(_,b,g,v){let R=a?-1:1;if(_!==b){for(_+=c;t[_%c].skip;)_-=R;for(;t[b%c].skip;)b+=R;_%c!==b%c&&(l.push({start:_%c,end:b%c,loop:g,style:v}),u=v,d=b%c)}}for(let _ of e){d=a?d:_.start;let b=t[d%c],g;for(h=d+1;h<=_.end;h++){let v=t[h%c];g=NX(i.setContext(Al(r,{type:"segment",p0:b,p1:v,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),_we(g,u)&&p(d,h-1,_.loop,u),b=v,u=g}d<h-1&&p(d,h-1,_.loop,u)}return l}function NX(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function _we(n,e){if(!e)return!1;let t=[],i=function(r,s){return z3(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function iC(n,e,t){return n.options.clip?n[t]:e[t]}function ywe(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:iC(t,e,"left"),right:iC(t,e,"right"),top:iC(i,e,"top"),bottom:iC(i,e,"bottom")}:e}function nU(n,e){let t=e._clip;if(t.disabled)return!1;let i=ywe(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var pU=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=U3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Ml=new pU,fY="transparent",vwe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=H3(n||fY),r=i.valid&&H3(e||fY);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},mU=class{constructor(e,t,i,r){let s=t[i];r=O0([e.to,r,s,e.from]);let o=O0([e.from,s,r]);this._active=!0,this._fn=e.fn||vwe[e.type||typeof o],this._easing=gg[e.easing]||gg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=O0([e.to,t,r,e.from]),this._from=O0([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},TC=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xn(e))return;let t=Object.keys(yi.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!xn(s))return;let o={};for(let a of t)o[a]=s[a];(mi(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=xwe(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&bwe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],h=i.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new mU(h,e,l,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Ml.add(this._chart,i),!0}};function bwe(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function xwe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function pY(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function wwe(n,e,t){if(t===!1)return!1;let i=pY(n,t),r=pY(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Ewe(n){let e,t,i,r;return xn(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function pQ(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function mY(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(u=!0,i.all)continue;break}l=n.values[c],Ri(l)&&(s||e===0||pa(e)===pa(l))&&(e+=l)}return!u&&!i.all?0:e}function Iwe(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[r]:u,[s]:n[u]};return a}function iU(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Swe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Twe(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function Cwe(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function gY(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function _Y(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=Swe(s,o,i),d=e.length,h;for(let p=0;p<d;++p){let _=e[p],{[c]:b,[l]:g}=_,v=_._stacks||(_._stacks={});h=v[l]=Cwe(r,u,b),h[a]=g,h._top=gY(h,o,!0,i.type),h._bottom=gY(h,o,!1,i.type);let R=h._visualValues||(h._visualValues={});R[a]=g}}function rU(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Awe(n,e){return Al(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Mwe(n,e,t){return Al(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function L0(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var sU=n=>n==="reset"||n==="none",yY=(n,e)=>e?n:Object.assign({},n),Dwe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:pQ(t,!0),values:null},CU=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=iU(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&L0(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,p,_,b)=>h==="x"?p:h==="r"?b:_,o=i.xAxisID=an(r.xAxisID,rU(t,"x")),a=i.yAxisID=an(r.yAxisID,rU(t,"y")),c=i.rAxisID=an(r.rAxisID,rU(t,"r")),l=i.indexAxis,u=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&F3(this._data,this),t._stacked&&L0(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(xn(i)){let s=this._cachedMeta;this._data=Iwe(i,s)}else if(r!==i){if(r){F3(r,this);let s=this._cachedMeta;L0(s),s._parsed=[]}i&&Object.isExtensible(i)&&$X(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=iU(i.vScale,i),i.stack!==r.stack&&(s=!0,L0(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&(_Y(this,i._parsed),i._stacked=iU(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{mi(s[t])?p=this.parseArrayData(r,s,t,i):xn(s[t])?p=this.parseObjectData(r,s,t,i):p=this.parsePrimitiveData(r,s,t,i);let _=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<i;++d)r._parsed[d+t]=h=p[d],l&&(_()&&(l=!1),u=h);r._sorted=l}a&&_Y(this,p)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),p,_,b;for(p=0,_=s;p<_;++p)b=p+r,h[p]={[c]:d||o.parse(u[b],b),[l]:a.parse(i[b],b)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+r,h=i[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,p,_;for(d=0,h=s;d<h;++d)p=d+r,_=i[p],u[d]={x:o.parse(pf(_,c),p),y:a.parse(pf(_,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:pQ(s,!0),values:i._stacks[t.axis]._visualValues};return mY(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=mY(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=Dwe(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Twe(c),p,_;function b(){_=s[p];let g=_[c.axis];return!Ri(_[t.axis])||d>g||h<g}for(p=0;p<a&&!(!b()&&(this.updateRangeFromParsed(u,t,_,l),o));++p);if(o){for(p=a-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(u,t,_,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Ri(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Ewe(an(this.options.clip,wwe(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=Mwe(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Awe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&bg(r);if(c)return yY(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),_=Object.keys(yi.elements[t]),b=()=>this.getContext(r,s,i),g=u.resolveNamedOptions(p,_,b,h);return g.$shared&&(g.$shared=l,o[a]=Object.freeze(yY(g,l))),g}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),p=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(p,this.getContext(t,r,i))}let u=new TC(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||sU(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){sU(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!sU(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&L0(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Rwe(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=V3(i.sort((r,s)=>r-s))}return n._cache.$bar}function Pwe(n){let e=n.iScale,t=Rwe(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(bg(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function kwe(n,e,t,i){let r=t.barThickness,s,o;return Pn(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function Nwe(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function Owe(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function mQ(n,e,t,i){return mi(n)?Owe(n,e,t,i):e[t.axis]=t.parse(n,i),e}function vY(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,u,d,h;for(l=t,u=t+i;l<u;++l)h=e[l],d={},d[r.axis]=a||r.parse(o[l],l),c.push(mQ(h,d,s,l));return c}function oU(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Lwe(n,e,t){return n!==0?pa(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Fwe(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function Vwe(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=Fwe(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=u:(s[bY(u,o,a,c)]=!0,r=l)),s[bY(r,o,a,c)]=!0,n.borderSkipped=s}function bY(n,e,t,i){return i?(n=Uwe(n,e,t),n=xY(n,t,e)):n=xY(n,e,t),n}function Uwe(n,e,t){return n===e?t:n===t?e:n}function xY(n,e,t){return n==="start"?e:n==="end"?t:n}function Bwe(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var gQ=(()=>{class n extends CU{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return vY(t,i,r,s)}parseArrayData(t,i,r,s){return vY(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],p,_,b,g;for(p=r,_=r+s;p<_;++p)g=i[p],b={},b[o.axis]=o.parse(pf(g,u),p),h.push(mQ(pf(g,d),b,a,p));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=oU(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let _=i;_<i+r;_++){let b=this.getParsed(_),g=o||Pn(b[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(_),v=this._calculateBarIndexPixels(_,d),R=(b._stacks||{})[c.axis],P={horizontal:u,base:g.base,enableBorderRadius:!R||oU(b._custom)||a===R._top||a===R._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};p&&(P.options=h||this.resolveDataElementOptions(_,t[_].active?"active":s));let N=P.options||t[_].options;Vwe(P,N,R,a),Bwe(P,N,d.ratio),this.updateElement(t[_],_,P,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],u=d=>{let h=d._parsed.find(_=>_[r.axis]===l),p=h&&h[d.vScale.axis];if(Pn(p)||isNaN(p))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===i).shift()}_getAxis(){let t={},i=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)t[an(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||Pwe(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,d=oU(u),h=l[i.axis],p=0,_=r?this.applyStack(i,l,r):h,b,g;_!==h&&(p=_-h,_=h),d&&(h=u.barStart,_=u.barEnd-u.barStart,h!==0&&pa(h)!==pa(u.barEnd)&&(p=0),p+=h);let v=!Pn(o)&&!d?o:p,R=i.getPixelForValue(v);if(this.chart.getDataVisibility(t)?b=i.getPixelForValue(p+_):b=R,g=b-R,Math.abs(g)<a){g=Lwe(g,i,c)*a,h===c&&(R-=g/2);let P=i.getPixelForDecimal(0),N=i.getPixelForDecimal(1),U=Math.min(P,N),O=Math.max(P,N);R=Math.max(Math.min(R,O),U),b=R+g,r&&!d&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(b)-i.getValueForPixel(R))}if(R===i.getPixelForValue(c)){let P=pa(g)*i.getLineWidthForValue(c)/2;R+=P,g-=P}return{size:g,base:R,head:b,center:b+g/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=an(s.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(i.grouped){let d=o?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?Nwe(t,i,s,d*u):kwe(t,i,s,d*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(an(p,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+_;c=h.start+h.chunk*b+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})();var _Q=(()=>{class n extends CU{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=XX(i,s,a);this._drawStart=c,this._drawCount=l,YX(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),p=a.axis,_=c.axis,{spanGaps:b,segment:g}=this.options,v=wg(b)?b:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||s==="none",P=i+r,N=t.length,U=i>0&&this.getParsed(i-1);for(let O=0;O<N;++O){let I=t[O],w=R?I:{};if(O<i||O>=P){w.skip=!0;continue}let y=this.getParsed(O),x=Pn(y[_]),T=w[p]=a.getPixelForValue(y[p],O),M=w[_]=o||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,y,l):y[_],O);w.skip=isNaN(T)||isNaN(M)||x,w.stop=O>0&&Math.abs(y[p]-U[p])>v,g&&(w.parsed=y,w.raw=u.data[O]),h&&(w.options=d||this.resolveDataElementOptions(O,I.active?"active":s)),R||this.updateElement(I,O,w,s),U=y}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function gf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var gU=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return gf()}parse(){return gf()}format(){return gf()}add(){return gf()}diff(){return gf()}startOf(){return gf()}endOf(){return gf()}},zwe={_date:gU};function Hwe(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?jX:sd;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){let h=l(s,e,t-d),p=l(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(b=>!Pn(b[d.axis]));u.lo-=Math.max(0,p);let _=h.slice(u.hi).findIndex(b=>!Pn(b[d.axis]));u.hi+=Math.max(0,_)}return u}}return{lo:0,hi:s.length-1}}function W0(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=Hwe(s[a],e,o,r);for(let p=d;p<=h;++p){let _=u[p];_.skip||i(_,l,p)}}}function jwe(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function aU(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||W0(n,t,e,function(a,c,l){!r&&!sc(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function Gwe(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=zX(o,{x:e.x,y:e.y});L3(d,l,u)&&r.push({element:o,datasetIndex:a,index:c})}return W0(n,t,e,s),r}function Wwe(n,e,t,i,r,s){let o=[],a=jwe(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let p=u.inRange(e.x,e.y,r);if(i&&!p)return;let _=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(_))&&!p)return;let g=a(e,_);g<c?(o=[{element:u,datasetIndex:d,index:h}],c=g):g===c&&o.push({element:u,datasetIndex:d,index:h})}return W0(n,t,e,l),o}function cU(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Gwe(n,e,t,r):Wwe(n,e,t,i,r,s)}function wY(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return W0(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var $we={evaluateInteractionItems:W0,modes:{index(n,e,t,i){let r=dd(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?aU(n,r,s,i,o):cU(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?aU(n,r,s,i,o):cU(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return aU(n,r,s,i,o)},nearest(n,e,t,i){let r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return cU(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=dd(e,n);return wY(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=dd(e,n);return wY(n,r,"y",t.intersect,i)}}},yQ=["left","top","right","bottom"];function F0(n,e){return n.filter(t=>t.pos===e)}function EY(n,e){return n.filter(t=>yQ.indexOf(t.pos)===-1&&t.box.axis===e)}function V0(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function qwe(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Kwe(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!yQ.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Xwe(n,e){let t=Kwe(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function Ywe(n){let e=qwe(n),t=V0(e.filter(l=>l.box.fullSize),!0),i=V0(F0(e,"left"),!0),r=V0(F0(e,"right")),s=V0(F0(e,"top"),!0),o=V0(F0(e,"bottom")),a=EY(e,"x"),c=EY(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:F0(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function IY(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function vQ(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Qwe(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!xn(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&vQ(o,s.getPadding());let a=Math.max(0,e.outerWidth-IY(o,n,"left","right")),c=Math.max(0,e.outerHeight-IY(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function Jwe(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Zwe(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function z0(n,e,t,i){let r=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,Zwe(a.horizontal,e));let{same:d,other:h}=Qwe(e,t,a,i);l|=d&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&z0(r,e,t,i)||u}function vC(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function SY(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;bg(l.start)&&(o=l.start),c.fullSize?vC(c,r.left,o,t.outerWidth-r.right-r.left,h):vC(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;bg(l.start)&&(s=l.start),c.fullSize?vC(c,s,r.top,h,t.outerHeight-r.bottom-r.top):vC(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Po={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=zr(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=Ywe(n.boxes),c=a.vertical,l=a.horizontal;Zn(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let u=c.reduce((b,g)=>g.box.options&&g.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);vQ(h,zr(i));let p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),_=Xwe(c.concat(l),d);z0(a.fullSize,p,d,_),z0(c,p,d,_),z0(l,p,d,_)&&z0(c,p,d,_),Jwe(p),SY(a.leftAndTop,p,d,_),p.x+=p.w,p.y+=p.h,SY(a.rightAndBottom,p,d,_),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Zn(a.chartArea,b=>{let g=b.box;Object.assign(g,n.chartArea),g.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},CC=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},_U=class extends CC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},IC="$chartjs",eEe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},TY=n=>n===null||n==="";function tEe(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[IC]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",TY(r)){let s=Q3(n,"width");s!==void 0&&(n.width=s)}if(TY(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=Q3(n,"height");s!==void 0&&(n.height=s)}return n}var bQ=cY?{passive:!0}:!1;function nEe(n,e,t){n&&n.addEventListener(e,t,bQ)}function iEe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,bQ)}function rEe(n,e){let t=eEe[n.type]||n.type,{x:i,y:r}=dd(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function AC(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function sEe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||AC(a.addedNodes,i),o=o&&!AC(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function oEe(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||AC(a.removedNodes,i),o=o&&!AC(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var j0=new Map,CY=0;function xQ(){let n=window.devicePixelRatio;n!==CY&&(CY=n,j0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function aEe(n,e){j0.size||window.addEventListener("resize",xQ),j0.set(n,e)}function cEe(n){j0.delete(n),j0.size||window.removeEventListener("resize",xQ)}function lEe(n,e,t){let i=n.canvas,r=i&&_C(i);if(!r)return;let s=B3((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(r),aEe(n,s),o}function lU(n,e,t){t&&t.disconnect(),e==="resize"&&cEe(n)}function uEe(n,e,t){let i=n.canvas,r=B3(s=>{n.ctx!==null&&t(rEe(s,n))},n);return nEe(i,e,r),r}var yU=class extends CC{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(tEe(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[IC])return!1;let i=t[IC].initial;["height","width"].forEach(s=>{let o=i[s];Pn(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[IC],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:sEe,detach:oEe,resize:lEe}[t]||uEe;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:lU,detach:lU,resize:lU}[t]||iEe)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return aY(e,t,i,r)}isAttached(e){let t=e&&_C(e);return!!(t&&t.isConnected)}};function dEe(n){return!gC()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?_U:yU}var lc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return wg(this.x)&&wg(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function hEe(n,e){let t=n.options.ticks,i=fEe(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?mEe(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return gEe(e,l,s,o/r),l;let u=pEe(s,e,r);if(o>0){let d,h,p=o>1?Math.round((c-a)/(o-1)):null;for(bC(e,l,u,Pn(p)?0:a-p,a),d=0,h=o-1;d<h;d++)bC(e,l,u,s[d],s[d+1]);return bC(e,l,u,c,Pn(p)?e.length:c+p),l}return bC(e,l,u),l}function fEe(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function pEe(n,e,t){let i=_Ee(n),r=e.length/t;if(!i)return Math.max(r,1);let s=UX(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function mEe(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function gEe(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function bC(n,e,t,i,r){let s=an(i,0),o=Math.min(an(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function _Ee(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var yEe=n=>n==="left"?"right":n==="right"?"left":n,AY=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,MY=(n,e)=>Math.min(e||n,n);function DY(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function vEe(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function bEe(n,e){Zn(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function U0(n){return n.drawTicks?n.tickLength:0}function RY(n,e){if(!n.display)return 0;let t=lr(n.font,e),i=zr(n.padding);return(mi(n.text)?n.text.length:1)*t.lineHeight+i.height}function xEe(n,e){return Al(n,{scale:e,type:"scale"})}function wEe(n,e,t){return Al(n,{tick:t,index:e,type:"tick"})}function EEe(n,e,t){let i=dC(n);return(t&&e!=="right"||!t&&e==="right")&&(i=yEe(i)),i}function IEe(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,h,p,_,b=o-r,g=a-s;if(n.isHorizontal()){if(p=Br(i,s,a),xn(t)){let v=Object.keys(t)[0],R=t[v];_=u[v].getPixelForValue(R)+b-e}else t==="center"?_=(l.bottom+l.top)/2+b-e:_=AY(n,t,e);h=a-s}else{if(xn(t)){let v=Object.keys(t)[0],R=t[v];p=u[v].getPixelForValue(R)-g+e}else t==="center"?p=(l.left+l.right)/2-g+e:p=AY(n,t,e);_=Br(i,o,r),d=t==="left"?-Ls:Ls}return{titleX:p,titleY:_,maxWidth:h,rotation:d}}var yf=class n extends lc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Us(e,Number.POSITIVE_INFINITY),t=Us(t,Number.NEGATIVE_INFINITY),i=Us(i,Number.POSITIVE_INFINITY),r=Us(r,Number.NEGATIVE_INFINITY),{min:Us(e,i),max:Us(t,r),minDefined:Ri(e),maxDefined:Ri(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Us(t,Us(i,t)),max:Us(i,Us(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ui(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tY(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?DY(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hEe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ui(this.options.afterUpdate,[this])}beforeSetDimensions(){ui(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ui(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ui(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ui(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ui(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ui(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ui(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=MY(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Vs(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(e.offset?.5:1)),c=this.maxHeight-U0(e.grid)-t.padding-RY(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=lC(Math.min(Math.asin(Vs((u.highest.height+6)/a,-1,1)),Math.asin(Vs(c/l,-1,1))-Math.asin(Vs(h/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ui(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ui(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=RY(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=U0(s)+c):(e.height=this.maxHeight,e.width=U0(s)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,_=Tl(this.labelRotation),b=Math.cos(_),g=Math.sin(_);if(a){let v=i.mirror?0:g*d.width+b*h.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{let v=i.mirror?0:b*d.width+g*h.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(l,u,g,b)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;c?l?(h=r*e.width,p=i*t.height):(h=i*e.height,p=r*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ui(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Pn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=DY(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/MY(t,i)),l=0,u=0,d,h,p,_,b,g,v,R,P,N,U;for(d=0;d<t;d+=c){if(_=e[d].label,b=this._resolveTickFontOptions(d),r.font=g=b.string,v=s[g]=s[g]||{data:{},gc:[]},R=b.lineHeight,P=N=0,!Pn(_)&&!mi(_))P=D0(r,v.data,v.gc,P,_),N=R;else if(mi(_))for(h=0,p=_.length;h<p;++h)U=_[h],!Pn(U)&&!mi(U)&&(P=D0(r,v.data,v.gc,P,U),N+=R);o.push(P),a.push(N),l=Math.max(P,l),u=Math.max(N,u)}bEe(s,t);let O=o.indexOf(l),I=a.indexOf(u),w=y=>({width:o[y]||0,height:a[y]||0});return{first:w(0),last:w(t-1),widest:w(O),highest:w(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return HX(this._alignToPixels?cd(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=wEe(this.getContext(),e,i))}return this.$context||(this.$context=xEe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Tl(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=U0(s),p=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,g=b/2,v=function(ae){return cd(i,ae,b)},R,P,N,U,O,I,w,y,x,T,M,C;if(o==="top")R=v(this.bottom),I=this.bottom-h,y=R-g,T=v(e.top)+g,C=e.bottom;else if(o==="bottom")R=v(this.top),T=e.top,C=v(e.bottom)-g,I=R+g,y=this.top+h;else if(o==="left")R=v(this.right),O=this.right-h,w=R-g,x=v(e.left)+g,M=e.right;else if(o==="right")R=v(this.left),x=e.left,M=v(e.right)-g,O=R+g,w=this.left+h;else if(t==="x"){if(o==="center")R=v((e.top+e.bottom)/2+.5);else if(xn(o)){let ae=Object.keys(o)[0],fe=o[ae];R=v(this.chart.scales[ae].getPixelForValue(fe))}T=e.top,C=e.bottom,I=R+g,y=I+h}else if(t==="y"){if(o==="center")R=v((e.left+e.right)/2);else if(xn(o)){let ae=Object.keys(o)[0],fe=o[ae];R=v(this.chart.scales[ae].getPixelForValue(fe))}O=R-g,w=O-h,x=e.left,M=e.right}let re=an(r.ticks.maxTicksLimit,d),Q=Math.max(1,Math.ceil(d/re));for(P=0;P<d;P+=Q){let ae=this.getContext(P),fe=s.setContext(ae),se=a.setContext(ae),we=fe.lineWidth,Ae=fe.color,Ze=se.dash||[],pt=se.dashOffset,ct=fe.tickWidth,Bt=fe.tickColor,jt=fe.tickBorderDash||[],ue=fe.tickBorderDashOffset;N=vEe(this,P,c),N!==void 0&&(U=cd(i,N,we),l?O=w=x=M=U:I=y=T=C=U,p.push({tx1:O,ty1:I,tx2:w,ty2:y,x1:x,y1:T,x2:M,y2:C,width:we,color:Ae,borderDash:Ze,borderDashOffset:pt,tickWidth:ct,tickColor:Bt,tickBorderDash:jt,tickBorderDashOffset:ue}))}return this._ticksLength=d,this._borderValue=R,p}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=U0(i.grid),p=h+u,_=d?-u:p,b=-Tl(this.labelRotation),g=[],v,R,P,N,U,O,I,w,y,x,T,M,C="middle";if(r==="top")O=this.bottom-_,I=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+_,I=this._getXAxisLabelAlignment();else if(r==="left"){let Q=this._getYAxisLabelAlignment(h);I=Q.textAlign,U=Q.x}else if(r==="right"){let Q=this._getYAxisLabelAlignment(h);I=Q.textAlign,U=Q.x}else if(t==="x"){if(r==="center")O=(e.top+e.bottom)/2+p;else if(xn(r)){let Q=Object.keys(r)[0],ae=r[Q];O=this.chart.scales[Q].getPixelForValue(ae)+p}I=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")U=(e.left+e.right)/2-p;else if(xn(r)){let Q=Object.keys(r)[0],ae=r[Q];U=this.chart.scales[Q].getPixelForValue(ae)}I=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?C="top":c==="end"&&(C="bottom"));let re=this._getLabelSizes();for(v=0,R=a.length;v<R;++v){P=a[v],N=P.label;let Q=s.setContext(this.getContext(v));w=this.getPixelForTick(v)+s.labelOffset,y=this._resolveTickFontOptions(v),x=y.lineHeight,T=mi(N)?N.length:1;let ae=T/2,fe=Q.color,se=Q.textStrokeColor,we=Q.textStrokeWidth,Ae=I;o?(U=w,I==="inner"&&(v===R-1?Ae=this.options.reverse?"left":"right":v===0?Ae=this.options.reverse?"right":"left":Ae="center"),r==="top"?l==="near"||b!==0?M=-T*x+x/2:l==="center"?M=-re.highest.height/2-ae*x+x:M=-re.highest.height+x/2:l==="near"||b!==0?M=x/2:l==="center"?M=re.highest.height/2-ae*x:M=re.highest.height-T*x,d&&(M*=-1),b!==0&&!Q.showLabelBackdrop&&(U+=x/2*Math.sin(b))):(O=w,M=(1-T)*x/2);let Ze;if(Q.showLabelBackdrop){let pt=zr(Q.backdropPadding),ct=re.heights[v],Bt=re.widths[v],jt=M-pt.top,ue=0-pt.left;switch(C){case"middle":jt-=ct/2;break;case"bottom":jt-=ct;break}switch(I){case"center":ue-=Bt/2;break;case"right":ue-=Bt;break;case"inner":v===R-1?ue-=Bt:v>0&&(ue-=Bt/2);break}Ze={left:ue,top:jt,width:Bt+pt.width,height:ct+pt.height,color:Q.backdropColor}}g.push({label:N,font:y,textOffset:M,options:{rotation:b,color:fe,strokeColor:se,strokeWidth:we,textAlign:Ae,textBaseline:C,translation:[U,O],backdrop:Ze}})}return g}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Tl(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?r?(u=this.right+s,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=cd(e,this.left,o)-o/2,u=cd(e,this.right,a)+a/2,d=h=c):(d=cd(e,this.top,o)-o/2,h=cd(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&k0(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;ld(i,l,0,u,c,a)}r&&N0(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=lr(i.font),o=zr(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||xn(t)?(c+=o.bottom,mi(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=IEe(this,c,t,a);ld(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:EEe(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=an(e.grid&&e.grid.z,-1),r=an(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return lr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Ig=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;CEe(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,SEe(e,o,i),this.override&&yi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in yi[r]&&(delete yi[r][i],this.override&&delete ad[i])}};function SEe(n,e,t){let i=_g(Object.create(null),[t?yi.get(t):{},yi.get(e),n.defaults]);yi.set(e,i),n.defaultRoutes&&TEe(e,n.defaultRoutes),n.descriptors&&yi.describe(e,n.descriptors)}function TEe(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");yi.route(s,r,c,a)})}function CEe(n){return"id"in n&&"defaults"in n}var vU=class{constructor(){this.controllers=new Ig(CU,"datasets",!0),this.elements=new Ig(lc,"elements"),this.plugins=new Ig(Object,"plugins"),this.scales=new Ig(yf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Zn(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=cC(e);ui(i["before"+r],[],i),t[e](i),ui(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},cc=new vU,bU=class{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(ui(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Pn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=an(i.options&&i.options.plugins,{}),s=AEe(i);return r===!1&&!t?[]:DEe(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function AEe(n){let e={},t=[],i=Object.keys(cc.plugins.items);for(let s=0;s<i.length;s++)t.push(cc.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function MEe(n,e){return!e&&n===!1?null:n===!0?{}:n}function DEe(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=MEe(i[c],r);l!==null&&s.push({plugin:a,options:REe(n.config,{plugin:a,local:t[c]},l,o)})}return s}function REe(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xU(n,e){let t=yi.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function PEe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function kEe(n,e){return n===e?"_index_":"_value_"}function PY(n){if(n==="x"||n==="y"||n==="r")return n}function NEe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function wU(n,...e){if(PY(n))return n;for(let t of e){let i=t.axis||NEe(t.position)||n.length>1&&PY(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function kY(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function OEe(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return kY(n,"x",t[0])||kY(n,"y",t[0])}return{}}function LEe(n,e){let t=ad[n.type]||{scales:{}},i=e.scales||{},r=xU(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!xn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=wU(o,a,OEe(o,n),yi.scales[a.type]),l=kEe(c,r),u=t.scales||{};s[o]=vg(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||xU(a,e),u=(ad[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=PEe(d,c),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),vg(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];vg(a,[yi.scales[a.type],yi.scale])}),s}function wQ(n){let e=n.options||(n.options={});e.plugins=an(e.plugins,{}),e.scales=LEe(n,e)}function EQ(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function FEe(n){return n=n||{},n.data=EQ(n.data),wQ(n),n}var NY=new Map,IQ=new Set;function xC(n,e){let t=NY.get(n);return t||(t=e(),NY.set(n,t),IQ.add(t)),t}var B0=(n,e,t)=>{let i=pf(e,t);i!==void 0&&n.add(i)},EU=class{constructor(e){this._config=FEe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=EQ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),wQ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xC(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return xC(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return xC(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return xC(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>B0(c,e,d))),u.forEach(d=>B0(c,r,d)),u.forEach(d=>B0(c,ad[s]||{},d)),u.forEach(d=>B0(c,yi,d)),u.forEach(d=>B0(c,fC,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),IQ.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,ad[t]||{},yi.datasets[t]||{},{type:t},yi,fC]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=OY(this._resolverCache,e,r),c=o;if(UEe(o,t)){s.$shared=!1,i=Il(i)?i():i;let l=this.createResolver(e,i,a);c=ff(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=OY(this._resolverCache,e,i);return xn(t)?ff(s,t,void 0,r):s}};function OY(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:mC(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var VEe=n=>xn(n)&&Object.getOwnPropertyNames(n).some(e=>Il(n[e]));function UEe(n,e){let{isScriptable:t,isIndexable:i}=q3(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Il(a)||VEe(a))||o&&mi(a))return!0}return!1}var BEe="4.5.1",zEe=["top","bottom","left","right","chartArea"];function LY(n,e){return n==="top"||n==="bottom"||zEe.indexOf(n)===-1&&e==="x"}function FY(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function VY(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ui(t&&t.onComplete,[n],e)}function HEe(n){let e=n.chart,t=e.options.animation;ui(t&&t.onProgress,[n],e)}function SQ(n){return gC()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var SC={},UY=n=>{let e=SQ(n);return Object.values(SC).filter(t=>t.canvas===e).pop()};function jEe(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function GEe(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Tg=(()=>{class n{static defaults=yi;static instances=SC;static overrides=ad;static registry=cc;static version=BEe;static getChart=UY;static register(...t){cc.add(...t),BY()}static unregister(...t){cc.remove(...t),BY()}constructor(t,i){let r=this.config=new EU(i),s=SQ(t),o=UY(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||dEe(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=OX(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=qX(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],SC[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ml.listen(this,"complete",VY),Ml.listen(this,"progress",HEe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Pn(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return cc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Y3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j3(this.canvas,this.ctx),this}stop(){return Ml.stop(this),this}resize(t,i){Ml.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Y3(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ui(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Zn(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=wU(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Zn(o,a=>{let c=a.options,l=c.id,u=wU(l,c),d=an(c.type,a.dtype);(c.position===void 0||LY(c.position,u)!==LY(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===d)h=r[l];else{let p=cc.getScale(d);h=new p({id:l,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(c,t)}),Zn(s,(a,c)=>{a||delete r[c]}),Zn(r,a=>{Po.configure(this,a,a.options),Po.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(FY("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||xU(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=cc.getController(c),{datasetElementType:u,dataElementType:d}=yi.datasets[c];Object.assign(l,{dataElementType:cc.getElement(d),datasetElementType:u&&cc.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Zn(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Zn(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FY("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Zn(this.scales,t=>{Po.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!P3(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;jEe(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!P3(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Po.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Zn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Il(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ml.has(this)?this.attached&&!Ml.running(this)&&Ml.start(this):(this.draw(),VY({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=nU(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&k0(i,s),t.controller.draw(),s&&N0(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return sc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=$we.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Al(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);bg(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Ml.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),j3(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete SC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Zn(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){Zn(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Zn(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!R0(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=VX(t),u=GEe(t,this._lastEvent,r,l);r&&(this._lastEvent=null,ui(o.onHover,[t,c,this],this),l&&ui(o.onClick,[t,c,this],this));let d=!R0(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function BY(){return Zn(Tg.instances,n=>n._plugins.invalidate())}function TQ(n,e,t=e){n.lineCap=an(t.borderCapStyle,e.borderCapStyle),n.setLineDash(an(t.borderDash,e.borderDash)),n.lineDashOffset=an(t.borderDashOffset,e.borderDashOffset),n.lineJoin=an(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=an(t.borderWidth,e.borderWidth),n.strokeStyle=an(t.borderColor,e.borderColor)}function WEe(n,e,t){n.lineTo(t.x,t.y)}function $Ee(n){return n.stepped?ZX:n.tension||n.cubicInterpolationMode==="monotone"?eY:WEe}function CQ(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function qEe(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=CQ(r,t,i),u=$Ee(s),{move:d=!0,reverse:h}=i||{},p,_,b;for(p=0;p<=l;++p)_=r[(a+(h?l-p:p))%o],!_.skip&&(d?(n.moveTo(_.x,_.y),d=!1):u(n,b,_,h,s.stepped),b=_);return c&&(_=r[(a+(h?l:0))%o],u(n,b,_,h,s.stepped)),!!c}function KEe(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=CQ(r,t,i),{move:c=!0,reverse:l}=i||{},u=0,d=0,h,p,_,b,g,v,R=N=>(o+(l?a-N:N))%s,P=()=>{b!==g&&(n.lineTo(u,g),n.lineTo(u,b),n.lineTo(u,v))};for(c&&(p=r[R(0)],n.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[R(h)],p.skip)continue;let N=p.x,U=p.y,O=N|0;O===_?(U<b?b=U:U>g&&(g=U),u=(d*u+N)/++d):(P(),n.lineTo(N,U),_=O,d=0,b=g=U),v=U}P()}function IU(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?KEe:qEe}function XEe(n){return n.stepped?lY:n.tension||n.cubicInterpolationMode==="monotone"?uY:rd}function YEe(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),TQ(n,e.options),n.stroke(r)}function QEe(n,e,t,i){let{segments:r,options:s}=e,o=IU(e);for(let a of r)TQ(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var JEe=typeof Path2D=="function";function ZEe(n,e,t,i){JEe&&!e.options.segment?YEe(n,e,t,i):QEe(n,e,t,i)}var $0=(()=>{class n extends lc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;oY(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hY(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=tU(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=XEe(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:p}=a[u],_=o[h],b=o[p];if(_===b){c.push(_);continue}let g=Math.abs((s-_[i])/(b[i]-_[i])),v=l(_,b,g,r.stepped);v[i]=t[i],c.push(v)}return c.length===1?c[0]:c}pathSegment(t,i,r){return IU(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=IU(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),ZEe(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function zY(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var AQ=(()=>{class n extends lc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return zY(this,t,"x",i)}inYRange(t,i){return zY(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!sc(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,pC(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function MQ(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-d,u=i+d):(d=s/2,a=t-d,c=t+d,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function hd(n,e,t,i){return n?0:Vs(e,t,i)}function eIe(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=$3(i);return{t:hd(r.top,s.top,0,t),r:hd(r.right,s.right,0,e),b:hd(r.bottom,s.bottom,0,t),l:hd(r.left,s.left,0,e)}}function tIe(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=ud(r),o=Math.min(e,t),a=n.borderSkipped,c=i||xn(r);return{topLeft:hd(!c||a.top||a.left,s.topLeft,0,o),topRight:hd(!c||a.top||a.right,s.topRight,0,o),bottomLeft:hd(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:hd(!c||a.bottom||a.right,s.bottomRight,0,o)}}function nIe(n){let e=MQ(n),t=e.right-e.left,i=e.bottom-e.top,r=eIe(n,t/2,i/2),s=tIe(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function uU(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&MQ(n,i);return a&&(r||Cl(e,a.left,a.right))&&(s||Cl(t,a.top,a.bottom))}function iIe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function rIe(n,e){n.rect(e.x,e.y,e.w,e.h)}function dU(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var MC=class extends lc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=nIe(this),a=iIe(o.radius)?Eg:rIe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,dU(o,t,s)),e.clip(),a(e,dU(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,dU(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return uU(this,e,t,i)}inXRange(e,t){return uU(this,e,null,t)}inYRange(e,t){return uU(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};function sIe(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=NC(c,l,r);let u=SU(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[c],end:r[l]});continue}let d=tU(e,u);for(let h of d){let p=SU(t,s[h.start],s[h.end],h.loop),_=eU(a,r,p);for(let b of _)o.push({source:b,target:h,start:{[t]:HY(u,p,"start",Math.max)},end:{[t]:HY(u,p,"end",Math.min)}})}}return o}function SU(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Os(r),s=Os(s)),{property:n,start:r,end:s}}function oIe(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=NC(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function NC(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function HY(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function DQ(n,e){let t=[],i=!1;return mi(n)?(i=!0,t=n):t=oIe(n,e),t.length?new $0({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function jY(n){return n&&n.fill!==!1}function aIe(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ri(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function cIe(n,e,t){let i=hIe(n);if(xn(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ri(r)&&Math.floor(r)===r?lIe(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function lIe(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function uIe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:xn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function dIe(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:xn(n)?i=n.value:i=e.getBaseValue(),i}function hIe(n){let e=n.options,t=e.fill,i=an(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function fIe(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=pIe(e,t);a.push(DQ({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)mIe(r,o[u],a)}return new $0({points:r,options:{}})}function pIe(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function mIe(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=gIe(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function gIe(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][t],h=o[u.end][t];if(Cl(r,d,h)){a=r===d,c=r===h;break}}return{first:a,last:c,point:i}}var DC=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:Fs},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function _Ie(n){let{chart:e,fill:t,line:i}=n;if(Ri(t))return yIe(e,t);if(t==="stack")return fIe(n);if(t==="shape")return!0;let r=vIe(n);return r instanceof DC?r:DQ(r,i)}function yIe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function vIe(n){return(n.scale||{}).getPointPositionForValue?xIe(n):bIe(n)}function bIe(n){let{scale:e={},fill:t}=n,i=uIe(t,e);if(Ri(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function xIe(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=dIe(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new DC({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function hU(n,e,t){let i=_Ie(e),{chart:r,index:s,line:o,scale:a,axis:c}=e,l=o.options,u=l.fill,d=l.backgroundColor,{above:h=d,below:p=d}=u||{},_=r.getDatasetMeta(s),b=nU(r,_);i&&o.points.length&&(k0(n,t),wIe(n,{line:o,target:i,above:h,below:p,area:t,scale:a,axis:c,clip:b}),N0(n))}function wIe(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=s;s!==r&&(l==="x"?(GY(n,i,o.top),fU(n,{line:t,target:i,color:r,scale:a,property:l,clip:c}),n.restore(),n.save(),GY(n,i,o.bottom)):l==="y"&&(WY(n,i,o.left),fU(n,{line:t,target:i,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),WY(n,i,o.right),u=r)),fU(n,{line:t,target:i,color:u,scale:a,property:l,clip:c}),n.restore()}function GY(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[NC(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function WY(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[NC(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,d.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function fU(n,e){let{line:t,target:i,property:r,color:s,scale:o,clip:a}=e,c=sIe(t,i,r);for(let{source:l,target:u,start:d,end:h}of c){let{style:{backgroundColor:p=s}={}}=l,_=i!==!0;n.save(),n.fillStyle=p,EIe(n,o,a,_&&SU(r,d,h)),n.beginPath();let b=!!t.pathSegment(n,l),g;if(_){b?n.closePath():$Y(n,i,h,r);let v=!!i.pathSegment(n,u,{move:b,reverse:!0});g=b&&v,g||$Y(n,i,d,r)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function EIe(n,e,t,i){let r=e.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let c,l,u,d;s==="x"?(c=o,l=r.top,u=a,d=r.bottom):(c=r.left,l=o,u=r.right,d=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),d=Math.min(d,t.bottom)),n.rect(c,l,u-c,d-l),n.clip()}}function $Y(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var RQ={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof $0&&(c={visible:n.isDatasetVisible(o),index:o,fill:cIe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=aIe(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&hU(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;jY(s)&&hU(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!jY(i)||t.drawTime!=="beforeDatasetDraw"||hU(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},qY=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},IIe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,RC=class extends lc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ui(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=lr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=qY(i,s),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((_,b)=>{let g=i+t/2+s.measureText(_.text).width;(b===0||l[l.length-1]+g+2*a>o)&&(d+=u,l[l.length-(b>0?0:1)]=0,p+=u,h++),c[b]={left:0,top:p,row:h,width:g,height:r},l[l.length-1]+=g+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,p=0,_=0,b=0;return this.legendItems.forEach((g,v)=>{let{itemWidth:R,itemHeight:P}=SIe(i,t,s,g,r);v>0&&p+P+2*a>u&&(d+=h+a,l.push({width:h,height:p}),_+=h+a,b++,h=p=0),c[v]={left:_,top:p,col:b,width:R,height:P},h=Math.max(h,R),p+=P+a}),d+=h,l.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=mf(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Br(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Br(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=Br(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Br(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;k0(e,this),this._draw(),N0(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=yi.color,c=mf(e.rtl,this.left,this.width),l=lr(o.font),{padding:u}=o,d=l.size,h=d/2,p;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:_,boxHeight:b,itemHeight:g}=qY(o,d),v=function(O,I,w){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;r.save();let y=an(w.lineWidth,1);if(r.fillStyle=an(w.fillStyle,a),r.lineCap=an(w.lineCap,"butt"),r.lineDashOffset=an(w.lineDashOffset,0),r.lineJoin=an(w.lineJoin,"miter"),r.lineWidth=y,r.strokeStyle=an(w.strokeStyle,a),r.setLineDash(an(w.lineDash,[])),o.usePointStyle){let x={radius:b*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:y},T=c.xPlus(O,_/2),M=I+h;G3(r,x,T,M,o.pointStyleWidth&&_)}else{let x=I+Math.max((d-b)/2,0),T=c.leftForLtr(O,_),M=ud(w.borderRadius);r.beginPath(),Object.values(M).some(C=>C!==0)?Eg(r,{x:T,y:x,w:_,h:b,radius:M}):r.rect(T,x,_,b),r.fill(),y!==0&&r.stroke()}r.restore()},R=function(O,I,w){ld(r,w.text,O,I+g/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},P=this.isHorizontal(),N=this._computeTitleHeight();P?p={x:Br(s,this.left+u,this.right-i[0]),y:this.top+u+N,line:0}:p={x:this.left+u,y:Br(s,this.top+N+u,this.bottom-t[0].height),line:0},J3(this.ctx,e.textDirection);let U=g+u;this.legendItems.forEach((O,I)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;let w=r.measureText(O.text).width,y=c.textAlign(O.textAlign||(O.textAlign=o.textAlign)),x=_+h+w,T=p.x,M=p.y;c.setWidth(this.width),P?I>0&&T+x+u>this.right&&(M=p.y+=U,p.line++,T=p.x=Br(s,this.left+u,this.right-i[p.line])):I>0&&M+U>this.bottom&&(T=p.x=T+t[p.line].width+u,p.line++,M=p.y=Br(s,this.top+N+u,this.bottom-t[p.line].height));let C=c.x(T);if(v(C,M,O),T=KX(y,T+_+h,P?T+x:this.right,e.rtl),R(c.x(T),M,O),P)p.x+=x+u;else if(typeof O.text!="string"){let re=l.lineHeight;p.y+=PQ(O,re)+u}else p.y+=U}),Z3(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=lr(t.font),r=zr(t.padding);if(!t.display)return;let s=mf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=Br(e.align,d,this.right-h);else{let _=this.columnSizes.reduce((b,g)=>Math.max(b,g.height),0);u=l+Br(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}let p=Br(a,d,d+h);o.textAlign=s.textAlign(dC(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,ld(o,t.text,p,u,i)}_computeTitleHeight(){let e=this.options.title,t=lr(e.font),i=zr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Cl(e,this.left,this.right)&&Cl(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Cl(e,r.left,r.left+r.width)&&Cl(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!AIe(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=IIe(r,i);r&&!s&&ui(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ui(t.onHover,[e,i,this],this)}else i&&ui(t.onClick,[e,i,this],this)}};function SIe(n,e,t,i,r){let s=TIe(i,n,e,t),o=CIe(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function TIe(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function CIe(n,e,t){let i=n;return typeof e.text!="string"&&(i=PQ(e,t)),i}function PQ(n,e){let t=n.text?n.text.length:0;return e*t}function AIe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var kQ={id:"legend",_element:RC,start(n,e,t){let i=n.legend=new RC({ctx:n.ctx,options:t,chart:n});Po.configure(n,i,t),Po.addBox(n,i)},stop(n){Po.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Po.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=zr(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},PC=class extends lc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=mi(i.text)?i.text.length:1;this._padding=zr(i.padding);let s=r*lr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=Br(a,i,s),d=t+e,l=s-i):(o.position==="left"?(u=i+e,d=Br(a,r,t),c=Yi*-.5):(u=s-e,d=Br(a,t,r),c=Yi*.5),l=r-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=lr(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);ld(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:dC(t.align),textBaseline:"middle",translation:[o,a]})}};function MIe(n,e){let t=new PC({ctx:n.ctx,options:e,chart:n});Po.configure(n,t,e),Po.addBox(n,t),n.titleBlock=t}var NQ={id:"title",_element:PC,start(n,e,t){MIe(n,t)},stop(n){let e=n.titleBlock;Po.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Po.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var H0={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=oC(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function ac(n,e){return e&&(mi(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Dl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function DIe(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function KY(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=lr(e.bodyFont),l=lr(e.titleFont),u=lr(e.footerFont),d=s.length,h=r.length,p=i.length,_=zr(e.padding),b=_.height,g=0,v=i.reduce((N,U)=>N+U.before.length+U.lines.length+U.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){let N=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;b+=p*N+(v-p)*c.lineHeight+(v-1)*e.bodySpacing}h&&(b+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let R=0,P=function(N){g=Math.max(g,t.measureText(N).width+R)};return t.save(),t.font=l.string,Zn(n.title,P),t.font=c.string,Zn(n.beforeBody.concat(n.afterBody),P),R=e.displayColors?o+2+e.boxPadding:0,Zn(i,N=>{Zn(N.before,P),Zn(N.lines,P),Zn(N.after,P)}),R=0,t.font=u.string,Zn(n.footer,P),t.restore(),g+=_.width,{width:g,height:b}}function RIe(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function PIe(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function kIe(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),PIe(l,n,e,t)&&(l="center"),l}function XY(n,e,t){let i=t.yAlign||e.yAlign||RIe(n,t);return{xAlign:t.xAlign||e.xAlign||kIe(n,e,t,i),yAlign:i}}function NIe(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function OIe(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function YY(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=ud(o),_=NIe(e,a),b=OIe(e,c,l);return c==="center"?a==="left"?_+=l:a==="right"&&(_-=l):a==="left"?_-=Math.max(u,h)+r:a==="right"&&(_+=Math.max(d,p)+r),{x:Vs(_,0,i.width-e.width),y:Vs(b,0,i.height-e.height)}}function wC(n,e,t){let i=zr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function QY(n){return ac([],Dl(n))}function LIe(n,e,t){return Al(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function JY(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var OQ={beforeTitle:oc,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:oc,beforeBody:oc,beforeLabel:oc,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Pn(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:oc,afterBody:oc,beforeFooter:oc,footer:oc,afterFooter:oc};function Bs(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?OQ[e].call(t,i):r}var ZY=(()=>{class n extends lc{static positioners=H0;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new TC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=LIe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Bs(r,"beforeTitle",this,t),o=Bs(r,"title",this,t),a=Bs(r,"afterTitle",this,t),c=[];return c=ac(c,Dl(s)),c=ac(c,Dl(o)),c=ac(c,Dl(a)),c}getBeforeBody(t,i){return QY(Bs(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return Zn(t,o=>{let a={before:[],lines:[],after:[]},c=JY(r,o);ac(a.before,Dl(Bs(c,"beforeLabel",this,o))),ac(a.lines,Bs(c,"label",this,o)),ac(a.after,Dl(Bs(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return QY(Bs(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Bs(r,"beforeFooter",this,t),o=Bs(r,"footer",this,t),a=Bs(r,"afterFooter",this,t),c=[];return c=ac(c,Dl(s)),c=ac(c,Dl(o)),c=ac(c,Dl(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(DIe(this.chart,i[l]));return t.filter&&(c=c.filter((d,h,p)=>t.filter(d,h,p,r))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,r))),Zn(c,d=>{let h=JY(t.callbacks,d);s.push(Bs(h,"labelColor",this,d)),o.push(Bs(h,"labelPointStyle",this,d)),a.push(Bs(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=H0[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=KY(this,r),u=Object.assign({},c,l),d=XY(this.chart,r,u),h=YY(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=ud(c),{x:p,y:_}=t,{width:b,height:g}=i,v,R,P,N,U,O;return o==="center"?(U=_+g/2,s==="left"?(v=p,R=v-a,N=U+a,O=U-a):(v=p+b,R=v+a,N=U-a,O=U+a),P=v):(s==="left"?R=p+Math.max(l,d)+a:s==="right"?R=p+b-Math.max(u,h)-a:R=this.caretX,o==="top"?(N=_,U=N-a,v=R-a,P=R+a):(N=_+g,U=N+a,v=R+a,P=R-a),O=N),{x1:v,x2:R,x3:P,y1:N,y2:U,y3:O}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let u=mf(r.rtl,this.x,this.width);for(t.x=wC(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=lr(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,d=lr(o.bodyFont),h=wC(this,"left",o),p=s.x(h),_=l<d.lineHeight?(d.lineHeight-l)/2:0,b=i.y+_;if(o.usePointStyle){let g={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},v=s.leftForLtr(p,u)+u/2,R=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,pC(t,g,v,R),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,pC(t,g,v,R)}else{t.lineWidth=xn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let g=s.leftForLtr(p,u),v=s.leftForLtr(s.xPlus(p,1),u-2),R=ud(a.borderRadius);Object.values(R).some(P=>P!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Eg(t,{x:g,y:b,w:u,h:l,radius:R}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Eg(t,{x:v,y:b+1,w:u-2,h:l-2,radius:R}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,b,u,l),t.strokeRect(g,b,u,l),t.fillStyle=a.backgroundColor,t.fillRect(v,b+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=r,h=lr(r.bodyFont),p=h.lineHeight,_=0,b=mf(r.rtl,this.x,this.width),g=function(y){i.fillText(y,b.x(t.x+_),t.y+p/2),t.y+=p+o},v=b.textAlign(a),R,P,N,U,O,I,w;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=wC(this,v,r),i.fillStyle=r.bodyColor,Zn(this.beforeBody,g),_=c&&v!=="right"?a==="center"?u/2+d:u+2+d:0,U=0,I=s.length;U<I;++U){for(R=s[U],P=this.labelTextColors[U],i.fillStyle=P,Zn(R.before,g),N=R.lines,c&&N.length&&(this._drawColorBox(i,t,U,b,r),p=Math.max(h.lineHeight,l)),O=0,w=N.length;O<w;++O)g(N[O]),p=h.lineHeight;Zn(R.after,g)}_=0,p=h.lineHeight,Zn(this.afterBody,g),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=mf(r.rtl,this.x,this.width);for(t.x=wC(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=lr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=r,{topLeft:h,topRight:p,bottomLeft:_,bottomRight:b}=ud(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+h,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+u-p,l),i.quadraticCurveTo(c+u,l,c+u,l+p),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+u,l+d-b),i.quadraticCurveTo(c+u,l+d,c+u-b,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+_,l+d),i.quadraticCurveTo(c,l+d,c,l+d-_),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+h),i.quadraticCurveTo(c,l,c+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=H0[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=KY(this,t),l=Object.assign({},a,this._size),u=XY(i,t,l),d=YY(t,l,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=zr(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),J3(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),Z3(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!R0(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!R0(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=H0[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),LQ={id:"tooltip",_element:ZY,positioners:H0,afterInit(n,e,t){t&&(n.tooltip=new ZY({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",lt(ie({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var FIe=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function VIe(n,e,t,i){let r=n.indexOf(e);if(r===-1)return FIe(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var UIe=(n,e)=>n===null?null:Vs(Math.round(n),0,e);function eQ(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var FQ=(()=>{class n extends yf{static id="category";static defaults={ticks:{callback:eQ}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Pn(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:VIe(r,t,an(i,t),this._addedLabels),UIe(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return eQ.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function BIe(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,_=u-1,{min:b,max:g}=e,v=!Pn(o),R=!Pn(a),P=!Pn(l),N=(g-b)/(d+1),U=k3((g-b)/_/p)*p,O,I,w,y;if(U<1e-14&&!v&&!R)return[{value:b},{value:g}];y=Math.ceil(g/U)-Math.floor(b/U),y>_&&(U=k3(y*U/_/p)*p),Pn(c)||(O=Math.pow(10,c),U=Math.ceil(U*O)/O),r==="ticks"?(I=Math.floor(b/U)*U,w=Math.ceil(g/U)*U):(I=b,w=g),v&&R&&s&&BX((a-o)/s,U/1e3)?(y=Math.round(Math.min((a-o)/U,u)),U=(a-o)/y,I=o,w=a):P?(I=v?o:I,w=R?a:w,y=l-1,U=(w-I)/y):(y=(w-I)/U,xg(y,Math.round(y),U/1e3)?y=Math.round(y):y=Math.ceil(y));let x=Math.max(O3(U),O3(I));O=Math.pow(10,Pn(c)?x:c),I=Math.round(I*O)/O,w=Math.round(w*O)/O;let T=0;for(v&&(h&&I!==o?(t.push({value:o}),I<o&&T++,xg(Math.round((I+T*U)*O)/O,o,tQ(o,N,n))&&T++):I<o&&T++);T<y;++T){let M=Math.round((I+T*U)*O)/O;if(R&&M>a)break;t.push({value:M})}return R&&h&&w!==a?t.length&&xg(t[t.length-1].value,a,tQ(a,N,n))?t[t.length-1].value=a:t.push({value:a}):(!R||w===a)&&t.push({value:w}),t}function tQ(n,e,{horizontal:t,minRotation:i}){let r=Tl(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Sg=class extends yf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Pn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=pa(r),l=pa(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=BIe(r,s);return e.bounds==="ticks"&&N3(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return hC(e,this.chart.options.locale,this.options.ticks.format)}},kC=class extends Sg{static id="linear";static defaults={ticks:{callback:P0.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ri(e)?e:0,this.max=Ri(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Tl(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},G0=n=>Math.floor(Sl(n)),_f=(n,e)=>Math.pow(10,G0(n)+e);function nQ(n){return n/Math.pow(10,G0(n))===1}function iQ(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function zIe(n,e){let t=e-n,i=G0(t);for(;iQ(n,e,i)>10;)i++;for(;iQ(n,e,i)<10;)i--;return Math.min(i,G0(n))}function HIe(n,{min:e,max:t}){e=Us(n.min,e);let i=[],r=G0(e),s=zIe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=Us(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:nQ(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let p=Us(n.max,h);return i.push({value:p,major:nQ(p),significand:d}),i}var rQ=class extends yf{static id="logarithmic";static defaults={ticks:{callback:P0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Sg.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ri(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ri(e)?Math.max(0,e):null,this.max=Ri(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ri(this._userMin)&&(this.min=e===_f(this.min,0)?_f(this.min,-1):_f(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(_f(i,-1)),o(_f(r,1)))),i<=0&&s(_f(r,-1)),r<=0&&o(_f(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=HIe(t,this);return e.bounds==="ticks"&&N3(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":hC(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Sl(e),this._valueRange=Sl(this.max)-Sl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Sl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function TU(n){let e=n.ticks;if(e.display&&n.display){let t=zr(e.backdropPadding);return an(e.font&&e.font.size,yi.font.size)+t.height}return 0}function jIe(n,e,t){return t=mi(t)?t:[t],{w:JX(n,e.string,t),h:t.length*e.lineHeight}}function sQ(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function GIe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Yi/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),d=lr(l.font),h=jIe(n.ctx,d,n._pointLabels[c]);i[c]=h;let p=Os(n.getIndexAngle(c)+a),_=Math.round(lC(p)),b=sQ(_,u.x,h.w,0,180),g=sQ(_,u.y,h.h,90,270);WIe(t,e,p,b,g)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=KIe(n,i,r)}function WIe(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function $Ie(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(lC(Os(c.angle+Ls))),u=QIe(c.y,a.h,l),d=XIe(l),h=YIe(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function qIe(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(sc({x:t,y:i},e)||sc({x:t,y:s},e)||sc({x:r,y:i},e)||sc({x:r,y:s},e))}function KIe(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:TU(s)/2,additionalAngle:o?Yi/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let d=$Ie(n,u,c);i.push(d),a==="auto"&&(d.visible=qIe(d,l),d.visible&&(l=d))}return i}function XIe(n){return n===0||n===180?"center":n<180?"left":"right"}function YIe(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function QIe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function JIe(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Pn(a)){let c=ud(e.borderRadius),l=zr(e.backdropPadding);n.fillStyle=a;let u=i-l.left,d=r-l.top,h=s-i+l.width,p=o-r+l.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),Eg(n,{x:u,y:d,w:h,h:p,radius:c}),n.fill()):n.fillRect(u,d,h,p)}}function ZIe(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));JIe(t,o,s);let a=lr(o.font),{x:c,y:l,textAlign:u}=s;ld(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function VQ(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Fs);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function eSe(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),VQ(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function tSe(n,e,t){return Al(n,{label:t,index:e,type:"pointLabel"})}var oQ=class extends Sg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:P0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=zr(TU(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ri(e)&&!isNaN(e)?e:0,this.max=Ri(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/TU(this.options))}generateTickLabels(e){Sg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=ui(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?GIe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=Fs/(this._pointLabels.length||1),i=this.options.startAngle||0;return Os(e*t+Tl(i))}getDistanceFromCenterForValue(e){if(Pn(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Pn(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return tSe(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-Ls+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),VQ(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&ZIe(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),p=r.setContext(h),_=s.setContext(h);eSe(this,p,c,o,_)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=lr(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=zr(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}ld(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},OC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zs=Object.keys(OC);function aQ(n,e){return n-e}function cQ(n,e){if(Pn(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Ri(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(wg(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function lQ(n,e,t,i){let r=zs.length;for(let s=zs.indexOf(n);s<r-1;++s){let o=OC[zs[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return zs[s]}return zs[r-1]}function nSe(n,e,t,i,r){for(let s=zs.length-1;s>=zs.indexOf(t);s--){let o=zs[s];if(OC[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return zs[t?zs.indexOf(t):0]}function iSe(n){for(let e=zs.indexOf(n)+1,t=zs.length;e<t;++e)if(OC[zs[e]].common)return zs[e]}function uQ(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=uC(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function rSe(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function dQ(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:rSe(n,i,r,t)}var hQ=(()=>{class n extends yf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new zwe._date(t.adapters.date);s.init(i),vg(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:cQ(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ri(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Ri(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=GX(s,o,a);return this._unit=i.unit||(r.autoSkip?lQ(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):nSe(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:iSe(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),dQ(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Vs(i,0,a),r=Vs(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||lQ(o.minUnit,i,r,this._getLabelCapacity(i)),c=an(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=wg(l)||l===!0,d={},h=i,p,_;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let b=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,_=0;p<r;p=+t.add(p,c,a),_++)uQ(d,p,b);return(p===r||s.bounds==="ticks"||_===1)&&uQ(d,p,b),Object.keys(d).sort(aQ).map(g=>+g)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return ui(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],p=r[i],_=u&&h&&p&&p.major;return this._adapter.format(t,s||(_?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Tl(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,dQ(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(cQ(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return V3(t.sort(aQ))}}return n})();function EC(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=sd(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=sd(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var fQ=class extends hQ{static id="timeseries";static defaults=hQ.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=EC(t,this.min),this._tableRange=EC(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],c=r[o-1],l=r[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(EC(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return EC(this._table,i*this._tableRange+this._minPos,!0)}};var sSe=typeof global=="object"&&global&&global.Object===Object&&global,LC=sSe;var oSe=typeof self=="object"&&self&&self.Object===Object&&self,aSe=LC||oSe||Function("return this")(),ko=aSe;var cSe=ko.Symbol,Cg=cSe;var UQ=Object.prototype,lSe=UQ.hasOwnProperty,uSe=UQ.toString,q0=Cg?Cg.toStringTag:void 0;function dSe(n){var e=lSe.call(n,q0),t=n[q0];try{n[q0]=void 0;var i=!0}catch{}var r=uSe.call(n);return i&&(e?n[q0]=t:delete n[q0]),r}var BQ=dSe;var hSe=Object.prototype,fSe=hSe.toString;function pSe(n){return fSe.call(n)}var zQ=pSe;var mSe="[object Null]",gSe="[object Undefined]",HQ=Cg?Cg.toStringTag:void 0;function _Se(n){return n==null?n===void 0?gSe:mSe:HQ&&HQ in Object(n)?BQ(n):zQ(n)}var fd=_Se;function ySe(n){return n!=null&&typeof n=="object"}var uc=ySe;var vSe=Array.isArray,K0=vSe;function bSe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Hs=bSe;function xSe(n){return n}var FC=xSe;var wSe="[object AsyncFunction]",ESe="[object Function]",ISe="[object GeneratorFunction]",SSe="[object Proxy]";function TSe(n){if(!Hs(n))return!1;var e=fd(n);return e==ESe||e==ISe||e==wSe||e==SSe}var Ag=TSe;var CSe=ko["__core-js_shared__"],VC=CSe;var jQ=(function(){var n=/[^.]+$/.exec(VC&&VC.keys&&VC.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function ASe(n){return!!jQ&&jQ in n}var GQ=ASe;var MSe=Function.prototype,DSe=MSe.toString;function RSe(n){if(n!=null){try{return DSe.call(n)}catch{}try{return n+""}catch{}}return""}var WQ=RSe;var PSe=/[\\^$.*+?()[\]{}|]/g,kSe=/^\[object .+?Constructor\]$/,NSe=Function.prototype,OSe=Object.prototype,LSe=NSe.toString,FSe=OSe.hasOwnProperty,VSe=RegExp("^"+LSe.call(FSe).replace(PSe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function USe(n){if(!Hs(n)||GQ(n))return!1;var e=Ag(n)?VSe:kSe;return e.test(WQ(n))}var $Q=USe;function BSe(n,e){return n?.[e]}var qQ=BSe;function zSe(n,e){var t=qQ(n,e);return $Q(t)?t:void 0}var Mg=zSe;var KQ=Object.create,HSe=(function(){function n(){}return function(e){if(!Hs(e))return{};if(KQ)return KQ(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})(),XQ=HSe;function jSe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var YQ=jSe;function GSe(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var QQ=GSe;var WSe=800,$Se=16,qSe=Date.now;function KSe(n){var e=0,t=0;return function(){var i=qSe(),r=$Se-(i-t);if(t=i,r>0){if(++e>=WSe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var JQ=KSe;function XSe(n){return function(){return n}}var ZQ=XSe;var YSe=(function(){try{var n=Mg(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Dg=YSe;var QSe=Dg?function(n,e){return Dg(n,"toString",{configurable:!0,enumerable:!1,value:ZQ(e),writable:!0})}:FC,eJ=QSe;var JSe=JQ(eJ),tJ=JSe;var ZSe=9007199254740991,eTe=/^(?:0|[1-9]\d*)$/;function tTe(n,e){var t=typeof n;return e=e??ZSe,!!e&&(t=="number"||t!="symbol"&&eTe.test(n))&&n>-1&&n%1==0&&n<e}var UC=tTe;function nTe(n,e,t){e=="__proto__"&&Dg?Dg(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Rg=nTe;function iTe(n,e){return n===e||n!==n&&e!==e}var pd=iTe;var rTe=Object.prototype,sTe=rTe.hasOwnProperty;function oTe(n,e,t){var i=n[e];(!(sTe.call(n,e)&&pd(i,t))||t===void 0&&!(e in n))&&Rg(n,e,t)}var nJ=oTe;function aTe(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=i?i(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),r?Rg(t,a,c):nJ(t,a,c)}return t}var iJ=aTe;var rJ=Math.max;function cTe(n,e,t){return e=rJ(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=rJ(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),YQ(n,this,a)}}var sJ=cTe;function lTe(n,e){return tJ(sJ(n,e,FC),n+"")}var oJ=lTe;var uTe=9007199254740991;function dTe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=uTe}var BC=dTe;function hTe(n){return n!=null&&BC(n.length)&&!Ag(n)}var Pg=hTe;function fTe(n,e,t){if(!Hs(t))return!1;var i=typeof e;return(i=="number"?Pg(t)&&UC(e,t.length):i=="string"&&e in t)?pd(t[e],n):!1}var aJ=fTe;function pTe(n){return oJ(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&aJ(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var cJ=pTe;var mTe=Object.prototype;function gTe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||mTe;return n===t}var zC=gTe;function _Te(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var lJ=_Te;var yTe="[object Arguments]";function vTe(n){return uc(n)&&fd(n)==yTe}var AU=vTe;var uJ=Object.prototype,bTe=uJ.hasOwnProperty,xTe=uJ.propertyIsEnumerable,wTe=AU((function(){return arguments})())?AU:function(n){return uc(n)&&bTe.call(n,"callee")&&!xTe.call(n,"callee")},X0=wTe;function ETe(){return!1}var dJ=ETe;var pJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hJ=pJ&&typeof module=="object"&&module&&!module.nodeType&&module,ITe=hJ&&hJ.exports===pJ,fJ=ITe?ko.Buffer:void 0,STe=fJ?fJ.isBuffer:void 0,TTe=STe||dJ,HC=TTe;var CTe="[object Arguments]",ATe="[object Array]",MTe="[object Boolean]",DTe="[object Date]",RTe="[object Error]",PTe="[object Function]",kTe="[object Map]",NTe="[object Number]",OTe="[object Object]",LTe="[object RegExp]",FTe="[object Set]",VTe="[object String]",UTe="[object WeakMap]",BTe="[object ArrayBuffer]",zTe="[object DataView]",HTe="[object Float32Array]",jTe="[object Float64Array]",GTe="[object Int8Array]",WTe="[object Int16Array]",$Te="[object Int32Array]",qTe="[object Uint8Array]",KTe="[object Uint8ClampedArray]",XTe="[object Uint16Array]",YTe="[object Uint32Array]",vi={};vi[HTe]=vi[jTe]=vi[GTe]=vi[WTe]=vi[$Te]=vi[qTe]=vi[KTe]=vi[XTe]=vi[YTe]=!0;vi[CTe]=vi[ATe]=vi[BTe]=vi[MTe]=vi[zTe]=vi[DTe]=vi[RTe]=vi[PTe]=vi[kTe]=vi[NTe]=vi[OTe]=vi[LTe]=vi[FTe]=vi[VTe]=vi[UTe]=!1;function QTe(n){return uc(n)&&BC(n.length)&&!!vi[fd(n)]}var mJ=QTe;function JTe(n){return function(e){return n(e)}}var gJ=JTe;var _J=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y0=_J&&typeof module=="object"&&module&&!module.nodeType&&module,ZTe=Y0&&Y0.exports===_J,MU=ZTe&&LC.process,eCe=(function(){try{var n=Y0&&Y0.require&&Y0.require("util").types;return n||MU&&MU.binding&&MU.binding("util")}catch{}})(),DU=eCe;var yJ=DU&&DU.isTypedArray,tCe=yJ?gJ(yJ):mJ,jC=tCe;var nCe=Object.prototype,iCe=nCe.hasOwnProperty;function rCe(n,e){var t=K0(n),i=!t&&X0(n),r=!t&&!i&&HC(n),s=!t&&!i&&!r&&jC(n),o=t||i||r||s,a=o?lJ(n.length,String):[],c=a.length;for(var l in n)(e||iCe.call(n,l))&&!(o&&(l=="length"||r&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||UC(l,c)))&&a.push(l);return a}var vJ=rCe;function sCe(n,e){return function(t){return n(e(t))}}var bJ=sCe;function oCe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var xJ=oCe;var aCe=Object.prototype,cCe=aCe.hasOwnProperty;function lCe(n){if(!Hs(n))return xJ(n);var e=zC(n),t=[];for(var i in n)i=="constructor"&&(e||!cCe.call(n,i))||t.push(i);return t}var wJ=lCe;function uCe(n){return Pg(n)?vJ(n,!0):wJ(n)}var GC=uCe;var dCe=Mg(Object,"create"),Rl=dCe;function hCe(){this.__data__=Rl?Rl(null):{},this.size=0}var EJ=hCe;function fCe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var IJ=fCe;var pCe="__lodash_hash_undefined__",mCe=Object.prototype,gCe=mCe.hasOwnProperty;function _Ce(n){var e=this.__data__;if(Rl){var t=e[n];return t===pCe?void 0:t}return gCe.call(e,n)?e[n]:void 0}var SJ=_Ce;var yCe=Object.prototype,vCe=yCe.hasOwnProperty;function bCe(n){var e=this.__data__;return Rl?e[n]!==void 0:vCe.call(e,n)}var TJ=bCe;var xCe="__lodash_hash_undefined__";function wCe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Rl&&e===void 0?xCe:e,this}var CJ=wCe;function kg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}kg.prototype.clear=EJ;kg.prototype.delete=IJ;kg.prototype.get=SJ;kg.prototype.has=TJ;kg.prototype.set=CJ;var RU=kg;function ECe(){this.__data__=[],this.size=0}var AJ=ECe;function ICe(n,e){for(var t=n.length;t--;)if(pd(n[t][0],e))return t;return-1}var md=ICe;var SCe=Array.prototype,TCe=SCe.splice;function CCe(n){var e=this.__data__,t=md(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():TCe.call(e,t,1),--this.size,!0}var MJ=CCe;function ACe(n){var e=this.__data__,t=md(e,n);return t<0?void 0:e[t][1]}var DJ=ACe;function MCe(n){return md(this.__data__,n)>-1}var RJ=MCe;function DCe(n,e){var t=this.__data__,i=md(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var PJ=DCe;function Ng(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ng.prototype.clear=AJ;Ng.prototype.delete=MJ;Ng.prototype.get=DJ;Ng.prototype.has=RJ;Ng.prototype.set=PJ;var gd=Ng;var RCe=Mg(ko,"Map"),WC=RCe;function PCe(){this.size=0,this.__data__={hash:new RU,map:new(WC||gd),string:new RU}}var kJ=PCe;function kCe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var NJ=kCe;function NCe(n,e){var t=n.__data__;return NJ(e)?t[typeof e=="string"?"string":"hash"]:t.map}var _d=NCe;function OCe(n){var e=_d(this,n).delete(n);return this.size-=e?1:0,e}var OJ=OCe;function LCe(n){return _d(this,n).get(n)}var LJ=LCe;function FCe(n){return _d(this,n).has(n)}var FJ=FCe;function VCe(n,e){var t=_d(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var VJ=VCe;function Og(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Og.prototype.clear=kJ;Og.prototype.delete=OJ;Og.prototype.get=LJ;Og.prototype.has=FJ;Og.prototype.set=VJ;var UJ=Og;var UCe=bJ(Object.getPrototypeOf,Object),$C=UCe;var BCe="[object Object]",zCe=Function.prototype,HCe=Object.prototype,BJ=zCe.toString,jCe=HCe.hasOwnProperty,GCe=BJ.call(Object);function WCe(n){if(!uc(n)||fd(n)!=BCe)return!1;var e=$C(n);if(e===null)return!0;var t=jCe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&BJ.call(t)==GCe}var zJ=WCe;function $Ce(){this.__data__=new gd,this.size=0}var HJ=$Ce;function qCe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var jJ=qCe;function KCe(n){return this.__data__.get(n)}var GJ=KCe;function XCe(n){return this.__data__.has(n)}var WJ=XCe;var YCe=200;function QCe(n,e){var t=this.__data__;if(t instanceof gd){var i=t.__data__;if(!WC||i.length<YCe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new UJ(i)}return t.set(n,e),this.size=t.size,this}var $J=QCe;function Lg(n){var e=this.__data__=new gd(n);this.size=e.size}Lg.prototype.clear=HJ;Lg.prototype.delete=jJ;Lg.prototype.get=GJ;Lg.prototype.has=WJ;Lg.prototype.set=$J;var qJ=Lg;var QJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,KJ=QJ&&typeof module=="object"&&module&&!module.nodeType&&module,JCe=KJ&&KJ.exports===QJ,XJ=JCe?ko.Buffer:void 0,YJ=XJ?XJ.allocUnsafe:void 0;function ZCe(n,e){if(e)return n.slice();var t=n.length,i=YJ?YJ(t):new n.constructor(t);return n.copy(i),i}var JJ=ZCe;var eAe=ko.Uint8Array,PU=eAe;function tAe(n){var e=new n.constructor(n.byteLength);return new PU(e).set(new PU(n)),e}var ZJ=tAe;function nAe(n,e){var t=e?ZJ(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var eZ=nAe;function iAe(n){return typeof n.constructor=="function"&&!zC(n)?XQ($C(n)):{}}var tZ=iAe;function rAe(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var c=o[n?a:++r];if(t(s[c],c,s)===!1)break}return e}}var nZ=rAe;var sAe=nZ(),iZ=sAe;function oAe(n,e,t){(t!==void 0&&!pd(n[e],t)||t===void 0&&!(e in n))&&Rg(n,e,t)}var Q0=oAe;function aAe(n){return uc(n)&&Pg(n)}var rZ=aAe;function cAe(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var J0=cAe;function lAe(n){return iJ(n,GC(n))}var sZ=lAe;function uAe(n,e,t,i,r,s,o){var a=J0(n,t),c=J0(e,t),l=o.get(c);if(l){Q0(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=K0(c),p=!h&&HC(c),_=!h&&!p&&jC(c);u=c,h||p||_?K0(a)?u=a:rZ(a)?u=QQ(a):p?(d=!1,u=JJ(c,!0)):_?(d=!1,u=eZ(c,!0)):u=[]:zJ(c)||X0(c)?(u=a,X0(a)?u=sZ(a):(!Hs(a)||Ag(a))&&(u=tZ(c))):d=!1}d&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),Q0(n,t,u)}var oZ=uAe;function aZ(n,e,t,i,r){n!==e&&iZ(e,function(s,o){if(r||(r=new qJ),Hs(s))oZ(n,e,o,t,aZ,i,r);else{var a=i?i(J0(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),Q0(n,o,a)}},GC)}var cZ=aZ;var dAe=cJ(function(n,e,t){cZ(n,e,t)}),kU=dAe;var hAe=new Ce("Configuration for ngCharts");var fAe=(()=>{class n{constructor(){this.colorschemesOptions=new Hi(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lZ=(()=>{class n{constructor(t,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new vn,this.chartHover=new vn,this.subs=[],this.themeOverrides={},s?.registerables&&Tg.register(...s.registerables),s?.defaults&&yi.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Xd()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let i=["type"],r=Object.getOwnPropertyNames(t);if(r.some(s=>i.includes(s))||r.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Tg(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return kU({onHover:(t,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(vt(nn),vt(Ct),vt(fAe),vt(hAe,8))}}static{this.\u0275dir=It({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[pr]})}}return n})();var qC=class n{firestore=H(ha);constructor(){}getUserData(e){let t=Zu(this.firestore,`users/${e}`);return kK(t)}async initUserData(e,t){let i=Zu(this.firestore,`users/${e}`);(await LT(i)).exists()||await FT(i,{id:e,email:t,laScore:0,createdAt:new Date})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var pAe=(n,e)=>e.id;function mAe(n,e){if(n&1){let t=Qi();Oe(0,"div",10)(1,"div",11)(2,"div",6),Y(3),Ge(),Oe(4,"div",5),Y(5),Ge()(),Oe(6,"div",12)(7,"button",13),Ua("click",function(){let r=Gn(t).$implicit,s=An();return Wn(s.toggleSkip(r))}),Y(8),Ge(),Oe(9,"button",14),Ua("click",function(){let r=Gn(t).$implicit,s=An();return Wn(s.toggleDone(r))}),Y(10),Ge()()()}if(n&2){let t=e.$implicit;ot(3),Fr(t.name),ot(2),Ds(" ",t.status==="done"?"Completed":t.status==="skipped"?"Skipped":"Pending"," "),ot(3),Ds(" ",t.status==="skipped"?"Skipped":"Skip"," "),ot(2),Ds(" ",(t.status==="done","Done")," ")}}var KC=class n{habits=[{id:"h1",name:"Hydration (8 glasses)",status:"pending"},{id:"h2",name:"Morning Walk - 20m",status:"pending"},{id:"h3",name:"Meditation - 10m",status:"pending"}];ngOnInit(){let e=localStorage.getItem("la_habits");if(e)try{this.habits=JSON.parse(e)}catch(t){console.error("Failed to load habits",t)}}get progressPercentage(){let e=this.habits.length;if(e===0)return 0;let t=this.habits.filter(i=>i.status==="done").length;return Math.round(t/e*100)}toggleDone(e){e.status=e.status==="done"?"pending":"done",this.save()}toggleSkip(e){e.status=e.status==="skipped"?"pending":"skipped",this.save()}save(){localStorage.setItem("la_habits",JSON.stringify(this.habits))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-daily-loop"]],decls:17,vars:3,consts:[["aria-labelledby","daily-title",1,"card"],[1,"section-title"],["id","daily-title"],[1,"progress-wrap"],[2,"display","flex","justify-content","space-between","margin-bottom","6px"],[2,"font-size","12px","color","var(--muted)"],[2,"font-weight","700"],[1,"progress-bar"],[1,"progress-inner"],[1,"habit-list"],[1,"habit"],[1,"name"],[1,"controls"],[1,"btn","btn-skip",3,"click"],[1,"btn","btn-done",3,"click"]],template:function(t,i){t&1&&(Oe(0,"section",0)(1,"div",1)(2,"h3",2),Y(3,"Daily Loop"),Ge(),Oe(4,"small"),Y(5,"First 3 habits"),Ge()(),Oe(6,"div",3)(7,"div",4)(8,"div",5),Y(9,"Completion"),Ge(),Oe(10,"div",6),Y(11),Ge()(),Oe(12,"div",7),Ci(13,"div",8),Ge()(),Oe(14,"div",9),YP(15,mAe,11,4,"div",10,pAe),Ge()()),t&2&&(ot(11),Ds("",i.progressPercentage,"%"),ot(2),yh("width",i.progressPercentage,"%"),ot(2),QP(i.habits))},styles:["[_nghost-%COMP%]{--bg: #0f1724;--card: #0b1220;--muted: #94a3b8;--accent: #7c3aed;--accent-2: #06b6d4;--good: #16a34a;--danger: #ef4444;--glass: rgba(255, 255, 255, .03);--radius: 14px;display:block;color:#e6eef6;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial}.card[_ngcontent-%COMP%]{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.03);box-shadow:0 6px 16px #02061799}.section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px}.section-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);font-size:12px}.progress-wrap[_ngcontent-%COMP%]{margin-bottom:10px}.progress-bar[_ngcontent-%COMP%]{height:10px;background:#ffffff0d;border-radius:8px;overflow:hidden}.progress-inner[_ngcontent-%COMP%]{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .3s ease}.habit-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.habit[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:var(--glass)}.habit[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:flex;flex-direction:column}.habit[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;gap:8px}button.btn[_ngcontent-%COMP%]{border:0;padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:600}.btn-done[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--good),#24cc67);color:#02110a}.btn-skip[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.06);color:var(--muted)}"]})};var XC=class n{value=78;dashArray="0 100";ngOnChanges(e){e.value&&this.updateGauge()}updateGauge(){let e=Math.max(0,Math.min(100,Math.round(this.value)));this.dashArray=`${e} ${100-e}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-health-meter"]],inputs:{value:"value"},features:[pr],decls:19,vars:2,consts:[["aria-labelledby","health-title",1,"card"],[1,"section-title"],["id","health-title"],[1,"meters"],[1,"gauge"],["viewBox","0 0 36 36","width","120","height","120","aria-hidden","true"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","rgba(255,255,255,0.06)","stroke-width","4"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","url(#hg)","stroke-width","4","stroke-linecap","round"],["id","hg","x1","0","x2","1"],["offset","0","stop-color","#7c3aed"],["offset","1","stop-color","#06b6d4"],[1,"value"],[2,"font-size","12px","color","var(--muted)"]],template:function(t,i){t&1&&(Oe(0,"section",0)(1,"div",1)(2,"h3",2),Y(3,"Health Meter"),Ge(),Oe(4,"small"),Y(5,"Physical & Habits"),Ge()(),Oe(6,"div",3)(7,"div",4),Yr(),Oe(8,"svg",5),Ci(9,"path",6)(10,"path",7),Oe(11,"defs")(12,"linearGradient",8),Ci(13,"stop",9)(14,"stop",10),Ge()()(),Ys(),Oe(15,"div",11),Y(16),Ge(),Oe(17,"div",12),Y(18,"Rest \u2022 Nutrition \u2022 Activity"),Ge()()()()),t&2&&(ot(10),gi("stroke-dasharray",i.dashArray),ot(6),Ds("",i.value,"%"))},styles:["[_nghost-%COMP%]{--bg: #0f1724;--card: #0b1220;--muted: #94a3b8;--accent: #7c3aed;--accent-2: #06b6d4;--good: #16a34a;--danger: #ef4444;--glass: rgba(255, 255, 255, .03);--radius: 14px;display:block;color:#e6eef6;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial}.card[_ngcontent-%COMP%]{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.03);box-shadow:0 6px 16px #02061799}.section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px}.section-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);font-size:12px}.meters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:center}.gauge[_ngcontent-%COMP%]{width:140px;height:140px;display:flex;flex-direction:column;align-items:center;justify-content:center}.gauge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.gauge[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;margin-top:6px}"]})};var YC=class n{value=61;dashArray="0 100";ngOnChanges(e){e.value&&this.updateGauge()}updateGauge(){let e=Math.max(0,Math.min(100,Math.round(this.value)));this.dashArray=`${e} ${100-e}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-wealth-meter"]],inputs:{value:"value"},features:[pr],decls:19,vars:2,consts:[["aria-labelledby","wealth-title",1,"card"],[1,"section-title"],["id","wealth-title"],[1,"meters"],[1,"gauge"],["viewBox","0 0 36 36","width","120","height","120","aria-hidden","true"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","rgba(255,255,255,0.06)","stroke-width","4"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","url(#wg)","stroke-width","4","stroke-linecap","round"],["id","wg","x1","0","x2","1"],["offset","0","stop-color","#f59e0b"],["offset","1","stop-color","#ef4444"],[1,"value"],[2,"font-size","12px","color","var(--muted)"]],template:function(t,i){t&1&&(Oe(0,"section",0)(1,"div",1)(2,"h3",2),Y(3,"Wealth Meter"),Ge(),Oe(4,"small"),Y(5,"Financial health"),Ge()(),Oe(6,"div",3)(7,"div",4),Yr(),Oe(8,"svg",5),Ci(9,"path",6)(10,"path",7),Oe(11,"defs")(12,"linearGradient",8),Ci(13,"stop",9)(14,"stop",10),Ge()()(),Ys(),Oe(15,"div",11),Y(16),Ge(),Oe(17,"div",12),Y(18,"Savings \u2022 Income \u2022 Goals"),Ge()()()()),t&2&&(ot(10),gi("stroke-dasharray",i.dashArray),ot(6),Ds("",i.value,"%"))},styles:["[_nghost-%COMP%]{--bg: #0f1724;--card: #0b1220;--muted: #94a3b8;--accent: #7c3aed;--accent-2: #06b6d4;--good: #16a34a;--danger: #ef4444;--glass: rgba(255, 255, 255, .03);--radius: 14px;display:block;color:#e6eef6;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial}.card[_ngcontent-%COMP%]{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.03);box-shadow:0 6px 16px #02061799}.section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px}.section-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);font-size:12px}.meters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:center}.gauge[_ngcontent-%COMP%]{width:140px;height:140px;display:flex;flex-direction:column;align-items:center;justify-content:center}.gauge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.gauge[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;margin-top:6px}"]})};function gAe(n,e){if(n&1&&(ce(0,"div",1)(1,"div",2)(2,"h1"),Y(3),le(),ce(4,"p",3),Y(5,"Here's your lifestyle overview for today."),le()(),ce(6,"div",4)(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title"),Y(10,"LA Score"),le(),ce(11,"mat-icon",6),Y(12,"speed"),le()(),ce(13,"mat-card-content")(14,"div",7),Y(15),le(),ce(16,"div",8),En(17,"canvas",9),le()()(),En(18,"app-health-meter",10)(19,"app-wealth-meter",10)(20,"app-daily-loop",11),le(),ce(21,"div",12)(22,"mat-card",13)(23,"mat-card-header")(24,"mat-card-title"),Y(25,"Weekly Progress"),le()(),ce(26,"mat-card-content")(27,"div",14),En(28,"canvas",9),le()()()()()),n&2){let t,i=e.ngIf,r=An();ot(3),Ds("Welcome back, ",(i.name==null||(t=i.name.split(" "))==null?null:t[0])||"User","!"),ot(12),Fr(r.laScore),ot(2),Cn("data",r.barChartData)("options",r.barChartOptions)("type",r.barChartType),ot(),Cn("value",78),ot(),Cn("value",61),ot(9),Cn("data",r.lineChartData)("options",r.lineChartOptions)("type",r.lineChartType)}}Tg.register(gQ,MC,_Q,$0,AQ,RQ,FQ,kC,NQ,LQ,kQ);var QC=class n{authService=H(is);firestoreService=H(qC);laScore=0;user$=this.authService.user$;barChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#333"}}};barChartType="bar";barChartData={labels:["LA Score"],datasets:[{data:[0],label:"Score",backgroundColor:["#3f51b5"],borderRadius:5}]};lineChartOptions={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}},scales:{x:{grid:{display:!1}},y:{min:0,max:100,grid:{color:"rgba(0,0,0,0.05)"}}},plugins:{legend:{display:!0,position:"bottom"}}};lineChartType="line";lineChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{data:[65,59,80,81,56,55,40],label:"Weekly Progress",backgroundColor:"rgba(63, 81, 181, 0.2)",borderColor:"#3f51b5",pointBackgroundColor:"#fff",pointBorderColor:"#3f51b5",fill:"origin"}]};ngOnInit(){this.authService.user$.subscribe(e=>{e&&e.laScore!==void 0&&(this.laScore=e.laScore,this.updateChart(this.laScore))})}updateChart(e){this.barChartData={labels:["Current Score"],datasets:[{data:[e],label:"LA Score",backgroundColor:["#3f51b5"],borderRadius:5}]};let t=[e-10,e-5,e+2,e-2,e+5,e,e];this.lineChartData=lt(ie({},this.lineChartData),{datasets:[lt(ie({},this.lineChartData.datasets[0]),{data:t.map(i=>Math.max(0,Math.min(100,i)))})]})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[1,"welcome-section"],[1,"subtitle"],[1,"stats-grid"],[1,"stat-card","main-score-card"],["color","primary",1,"card-icon"],[1,"score-value"],[1,"chart-wrapper","small-chart"],["baseChart","",3,"data","options","type"],[1,"stat-card",2,"grid-column","span 1",3,"value"],[1,"stat-card",2,"grid-column","span 1"],[1,"charts-section"],[1,"chart-card"],[1,"chart-wrapper","main-chart"]],template:function(t,i){t&1&&(Lr(0,gAe,29,10,"div",0),vu(1,"async")),t&2&&Cn("ngIf",bu(1,1,i.user$))},dependencies:[Ps,Qo,lZ,Do,td,pg,$T,WT,Ns,rc,KC,XC,YC,vh],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:1.1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.card-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.score-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3f51b5;line-height:1;margin-bottom:16px}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;margin-bottom:4px}.stat-desc[_ngcontent-%COMP%]{color:#666;margin:0}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.small-chart[_ngcontent-%COMP%]{height:100px}.main-chart[_ngcontent-%COMP%]{height:300px}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:24px}@media(max-width:600px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.score-value[_ngcontent-%COMP%]{font-size:2.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}}"]})};var NU=(()=>{class n{get vertical(){return this._vertical}set vertical(t){this._vertical=xl(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=xl(t)}_inset=!1;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){i&2&&(gi("aria-orientation",r.vertical?"vertical":"horizontal"),li("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return n})(),JC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var vZ=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(vt(Or),vt(nn))};static \u0275dir=It({type:n})}return n})(),BU=(()=>{class n extends vZ{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,features:[pi]})}return n})(),sb=new Ce("");var _Ae={provide:sb,useExisting:qs(()=>aA),multi:!0};function yAe(){let n=xo()?xo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vAe=new Ce(""),aA=(()=>{class n extends vZ{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!yAe())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(vt(Or),vt(nn),vt(vAe,8))};static \u0275dir=It({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ln("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Rs([_Ae]),pi]})}return n})();function zU(n){return n==null||HU(n)===0}function HU(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var jU=new Ce(""),GU=new Ce(""),bAe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ug=class{static min(e){return xAe(e)}static max(e){return wAe(e)}static required(e){return EAe(e)}static requiredTrue(e){return IAe(e)}static email(e){return SAe(e)}static minLength(e){return TAe(e)}static maxLength(e){return CAe(e)}static pattern(e){return AAe(e)}static nullValidator(e){return bZ()}static compose(e){return TZ(e)}static composeAsync(e){return AZ(e)}};function xAe(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function wAe(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function EAe(n){return zU(n.value)?{required:!0}:null}function IAe(n){return n.value===!0?null:{required:!0}}function SAe(n){return zU(n.value)||bAe.test(n.value)?null:{email:!0}}function TAe(n){return e=>{let t=e.value?.length??HU(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function CAe(n){return e=>{let t=e.value?.length??HU(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function AAe(n){if(!n)return bZ;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(zU(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function bZ(n){return null}function xZ(n){return n!=null}function wZ(n){return Hc(n)?di(n):n}function EZ(n){let e={};return n.forEach(t=>{e=t!=null?ie(ie({},e),t):e}),Object.keys(e).length===0?null:e}function IZ(n,e){return e.map(t=>t(n))}function MAe(n){return!n.validate}function SZ(n){return n.map(e=>MAe(e)?e:t=>e.validate(t))}function TZ(n){if(!n)return null;let e=n.filter(xZ);return e.length==0?null:function(t){return EZ(IZ(t,e))}}function CZ(n){return n!=null?TZ(SZ(n)):null}function AZ(n){if(!n)return null;let e=n.filter(xZ);return e.length==0?null:function(t){let i=IZ(t,e).map(wZ);return j_(i).pipe(yt(EZ))}}function MZ(n){return n!=null?AZ(SZ(n)):null}function uZ(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DZ(n){return n._rawValidators}function RZ(n){return n._rawAsyncValidators}function OU(n){return n?Array.isArray(n)?n:[n]:[]}function eA(n,e){return Array.isArray(n)?n.includes(e):n===e}function dZ(n,e){let t=OU(e);return OU(n).forEach(r=>{eA(t,r)||t.push(r)}),t}function hZ(n,e){return OU(e).filter(t=>!eA(n,t))}var tA=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CZ(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=MZ(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vf=class extends tA{name;get formDirective(){return null}get path(){return null}},bf=class extends tA{_parent=null;name=null;valueAccessor=null},nA=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var PZ=(()=>{class n extends nA{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(vt(bf,2))};static \u0275dir=It({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&li("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[pi]})}return n})(),kZ=(()=>{class n extends nA{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(vt(vf,10))};static \u0275dir=It({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&li("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[pi]})}return n})();var Z0="VALID",ZC="INVALID",Fg="PENDING",eb="DISABLED",yd=class{},iA=class extends yd{value;source;constructor(e,t){super(),this.value=e,this.source=t}},tb=class extends yd{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},nb=class extends yd{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Vg=class extends yd{status;source;constructor(e,t){super(),this.status=e,this.source=t}},LU=class extends yd{source;constructor(e){super(),this.source=e}},rb=class extends yd{source;constructor(e){super(),this.source=e}};function WU(n){return(cA(n)?n.validators:n)||null}function DAe(n){return Array.isArray(n)?CZ(n):n||null}function $U(n,e){return(cA(e)?e.asyncValidators:n)||null}function RAe(n){return Array.isArray(n)?MZ(n):n||null}function cA(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function NZ(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new ze(1e3,"");if(!i[t])throw new ze(1001,"")}function OZ(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new ze(1002,"")})}var Bg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ti(this.statusReactive)}set status(e){Ti(()=>this.statusReactive.set(e))}_status=Op(()=>this.statusReactive(),{});statusReactive=$n(void 0,{});get valid(){return this.status===Z0}get invalid(){return this.status===ZC}get pending(){return this.status==Fg}get disabled(){return this.status===eb}get enabled(){return this.status!==eb}errors;get pristine(){return Ti(this.pristineReactive)}set pristine(e){Ti(()=>this.pristineReactive.set(e))}_pristine=Op(()=>this.pristineReactive(),{});pristineReactive=$n(!0,{});get dirty(){return!this.pristine}get touched(){return Ti(this.touchedReactive)}set touched(e){Ti(()=>this.touchedReactive.set(e))}_touched=Op(()=>this.touchedReactive(),{});touchedReactive=$n(!1,{});get untouched(){return!this.touched}_events=new Pt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dZ(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dZ(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hZ(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hZ(e,this._rawAsyncValidators))}hasValidator(e){return eA(this._rawValidators,e)}hasAsyncValidator(e){return eA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(lt(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new nb(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new nb(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(lt(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new tb(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new tb(!0,i))}markAsPending(e={}){this.status=Fg;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vg(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(lt(ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=eb,this.errors=null,this._forEachChild(r=>{r.disable(lt(ie({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new iA(this.value,i)),this._events.next(new Vg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(lt(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Z0,this._forEachChild(i=>{i.enable(lt(ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(lt(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Z0||this.status===Fg)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new iA(this.value,t)),this._events.next(new Vg(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(lt(ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eb:Z0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Fg,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=wZ(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Vg(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?eb:this.errors?ZC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fg)?Fg:this._anyControlsHaveStatus(ZC)?ZC:Z0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new tb(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new nb(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cA(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DAe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=RAe(this._rawAsyncValidators)}},rA=class extends Bg{constructor(e,t,i){super(WU(t),$U(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OZ(this,!0,e),Object.keys(e).forEach(i=>{NZ(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,lt(ie({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new rb(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var FU=class extends rA{};var lA=new Ce("",{factory:()=>uA}),uA="always";function LZ(n,e){return[...e.path,n]}function VU(n,e,t=uA){qU(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),kAe(n,e),OAe(n,e),NAe(n,e),PAe(n,e)}function fZ(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),oA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PAe(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function qU(n,e){let t=DZ(n);e.validator!==null?n.setValidators(uZ(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=RZ(n);e.asyncValidator!==null?n.setAsyncValidators(uZ(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();sA(e._rawValidators,r),sA(e._rawAsyncValidators,r)}function oA(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=DZ(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=RZ(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return sA(e._rawValidators,i),sA(e._rawAsyncValidators,i),t}function kAe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&FZ(n,e)})}function NAe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&FZ(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function FZ(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OAe(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LAe(n,e){n==null,qU(n,e)}function FAe(n,e){return oA(n,e)}function VZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function VAe(n){return Object.getPrototypeOf(n.constructor)===BU}function UAe(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function UZ(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===aA?t=s:VAe(s)?i=s:r=s}),r||i||t||null}function BAe(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pZ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mZ(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ib=class extends Bg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(WU(t),$U(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mZ(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new rb(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pZ(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pZ(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mZ(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zAe=n=>n instanceof ib;var HAe={provide:bf,useExisting:qs(()=>KU)},gZ=Promise.resolve(),KU=(()=>{class n extends bf{_changeDetectorRef;callSetDisabledState;control=new ib;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vn;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=UZ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),VZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VU(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){gZ.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Ni(i);gZ.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?LZ(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(vt(vf,9),vt(jU,10),vt(GU,10),vt(sb,10),vt(Qr,8),vt(lA,8))};static \u0275dir=It({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rs([HAe]),pi,pr]})}return n})();var BZ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var UU=class extends Bg{constructor(e,t,i){super(WU(t),$U(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){OZ(this,!1,e),e.forEach((i,r)=>{NZ(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],lt(ie({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new rb(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var jAe=(()=>{class n extends vf{callSetDisabledState;get submitted(){return Ti(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Op(()=>this._submittedReactive(),{});_submittedReactive=$n(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(oA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return VU(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){fZ(t.control||null,t,!1),BAe(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,UAe(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new LU(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(fZ(i||null,t),zAe(r)&&(VU(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);LAe(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&FAe(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qU(this.form,this),this._oldForm&&oA(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(vt(jU,10),vt(GU,10),vt(lA,8))};static \u0275dir=It({type:n,features:[pi,pr]})}return n})();var zZ=new Ce("");var GAe={provide:bf,useExisting:qs(()=>XU)},XU=(()=>{class n extends bf{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new vn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=UZ(this,s)}ngOnChanges(t){this._added||this._setUpControl(),VZ(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return LZ(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(vt(vf,13),vt(jU,10),vt(GU,10),vt(sb,10),vt(zZ,8))};static \u0275dir=It({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Rs([GAe]),pi,pr]})}return n})();var WAe={provide:vf,useExisting:qs(()=>YU)},YU=(()=>{class n extends jAe{form=null;ngSubmit=new vn;get control(){return this.form}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Ln("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rs([WAe]),pi]})}return n})(),$Ae={provide:sb,useExisting:qs(()=>dA),multi:!0};function HZ(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qAe(n){return n.split(":")[0]}var dA=(()=>{class n extends BU{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=H(Er).injector;destroyRef=H(Is);cdr=H(Qr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Va({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=HZ(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=qAe(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Ln("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rs([$Ae]),pi]})}return n})(),jZ=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(HZ(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(vt(nn),vt(Or),vt(dA,9))};static \u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),KAe={provide:sb,useExisting:qs(()=>GZ),multi:!0};function _Z(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function XAe(n){return n.split(":")[0]}var GZ=(()=>{class n extends BU{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);r.push(l)}}else{let o=i.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=XAe(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Ln("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rs([KAe]),pi]})}return n})(),WZ=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(_Z(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(_Z(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(vt(nn),vt(Or),vt(GZ,9))};static \u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var $Z=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();function yZ(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var qZ=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return yZ(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new rA(r,s)}record(t,i=null){let r=this._reduceControls(t);return new FU(r,i)}control(t,i,r){let s={};return this.useNonNullable?(yZ(i)?s=i:(s.validators=i,s.asyncValidators=r),new ib(t,lt(ie({},s),{nonNullable:!0}))):new ib(t,i,r)}array(t,i,r){let s=t.map(o=>this._createControl(o));return new UU(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof ib)return t;if(t instanceof Bg)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var KZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lA,useValue:t.callSetDisabledState??uA}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[$Z]})}return n})(),XZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zZ,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:lA,useValue:t.callSetDisabledState??uA}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[$Z]})}return n})();var YZ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var QAe=["*"],JAe=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,ZAe=["unscopedContent"],eMe=["text"],tMe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],nMe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var iMe=new Ce("ListOption"),JU=(()=>{class n{_elementRef=H(nn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),ZU=(()=>{class n{_elementRef=H(nn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),rMe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),QZ=(()=>{class n{_listOption=H(iMe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,hostVars:4,hostBindings:function(i,r){i&2&&li("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),sMe=(()=>{class n extends QZ{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[pi]})}return n})(),eB=(()=>{class n extends QZ{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[pi]})}return n})(),oMe=new Ce("MAT_LIST_CONFIG"),QU=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=xl(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(xl(t))}_disabled=$n(!1);_defaultOptions=H(oMe,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,hostVars:1,hostBindings:function(i,r){i&2&&gi("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),aMe=(()=>{class n{_elementRef=H(nn);_ngZone=H(Ct);_listBase=H(QU,{optional:!0});_platform=H(Ki);_hostElement;_isButtonElement;_noopAnimations=fa();_avatars;_icons;set lines(t){this._explicitLines=cg(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=xl(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(xl(t))}_disabled=$n(!1);_subscriptions=new Nn;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){H(Co).load(dg);let t=H(E0,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new uf(this,this._ngZone,this._hostElement,this._platform,H(Qt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(qd(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,contentQueries:function(i,r,s){if(i&1&&(Ms(s,sMe,4),Ms(s,eB,4)),i&2){let o;Ji(o=Zi())&&(r._avatars=o),Ji(o=Zi())&&(r._icons=o)}},hostVars:4,hostBindings:function(i,r){i&2&&(gi("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),li("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var JZ=(()=>{class n extends QU{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275cmp=at({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[Rs([{provide:QU,useExisting:n}]),pi],ngContentSelectors:QAe,decls:1,vars:0,template:function(i,r){i&1&&(mr(),Qn(0))},styles:[JAe],encapsulation:2,changeDetection:0})}return n})(),ZZ=(()=>{class n extends aMe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=xl(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275cmp=at({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,s){if(i&1&&(Ms(s,ZU,5),Ms(s,JU,5),Ms(s,rMe,5)),i&2){let o;Ji(o=Zi())&&(r._lines=o),Ji(o=Zi())&&(r._titles=o),Ji(o=Zi())&&(r._meta=o)}},viewQuery:function(i,r){if(i&1&&(jc(ZAe,5),jc(eMe,5)),i&2){let s;Ji(s=Zi())&&(r._unscopedContent=s.first),Ji(s=Zi())&&(r._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(gi("aria-current",r._getAriaCurrent()),li("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[pi],ngContentSelectors:nMe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let s=Qi();mr(tMe),Qn(0),ce(1,"span",1),Qn(2,1),Qn(3,2),ce(4,"span",2,0),Ln("cdkObserveContent",function(){return Gn(s),Wn(r._updateItemLines(!0))}),Qn(6,3),le()(),Qn(7,4),Qn(8,5),En(9,"div",3)}},dependencies:[XK],encapsulation:2,changeDetection:0})}return n})();var eee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return n})();var tee=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[YK,hg,YZ,Di,JC]})}return n})();function lMe(n,e){if(n&1){let t=Qi();ce(0,"div",1)(1,"mat-card",2),En(2,"div",3),ce(3,"div",4),En(4,"div",5),ce(5,"div",6)(6,"h2",7),Y(7),le(),ce(8,"p",8),Y(9),le()()(),En(10,"mat-divider"),ce(11,"mat-card-content")(12,"mat-list")(13,"h3",9),Y(14,"Account Details"),le(),ce(15,"mat-list-item")(16,"mat-icon",10),Y(17,"fingerprint"),le(),ce(18,"div",11),Y(19,"User ID"),le(),ce(20,"div",12),Y(21),le()(),ce(22,"mat-list-item")(23,"mat-icon",10),Y(24,"admin_panel_settings"),le(),ce(25,"div",11),Y(26,"Role"),le(),ce(27,"div",13),Y(28),le()(),ce(29,"mat-list-item")(30,"mat-icon",10),Y(31,"verified_user"),le(),ce(32,"div",11),Y(33,"Email Verified"),le(),ce(34,"div",13),Y(35),le()()(),En(36,"mat-divider"),ce(37,"div",14)(38,"button",15),Ln("click",function(){Gn(t);let r=An();return Wn(r.authService.logout())}),ce(39,"mat-icon"),Y(40,"logout"),le(),Y(41," Sign Out "),le()()()()()}if(n&2){let t=e.ngIf;ot(4),yh("background-image","url("+(t.pic||"")+")"),ot(3),Fr(t.name),ot(2),Fr(t.email),ot(12),Fr(t.uid),ot(7),Fr(t.role),ot(7),Fr(t.emailVerified?"Yes":"No")}}var hA=class n{authService=H(is);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-card"],[1,"profile-cover"],[1,"profile-header"],[1,"profile-avatar"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["mat-subheader",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"uid-text"],["matListItemLine",""],[1,"profile-actions"],["mat-stroked-button","","color","warn",3,"click"]],template:function(t,i){t&1&&(Lr(0,lMe,42,7,"div",0),vu(1,"async")),t&2&&Cn("ngIf",bu(1,1,i.user$))},dependencies:[Ps,Qo,Do,td,pg,Mo,fg,Ns,rc,tee,JZ,ZZ,eB,eee,NU,ZU,JU,JC,vh],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 20px;min-height:calc(100vh - 144px);background-color:#f5f5f5}.profile-card[_ngcontent-%COMP%]{width:100%;max-width:500px;overflow:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014}.profile-cover[_ngcontent-%COMP%]{height:120px;background:linear-gradient(135deg,#3f51b5,#5c6bc0)}.profile-header[_ngcontent-%COMP%]{position:relative;padding:0 24px 24px;text-align:center;margin-top:-60px}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background-size:cover;background-position:center;background-color:#e0e0e0;border:4px solid white;box-shadow:0 2px 10px #0000001a;margin:0 auto 16px}.profile-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.5rem;font-weight:500;color:#333}.profile-email[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem}.uid-text[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;color:#666}.profile-actions[_ngcontent-%COMP%]{padding:24px 16px 8px;display:flex;justify-content:center}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:8px}  .mat-mdc-list-item-icon{color:#757575}"]})};var tB=yt(n=>!!n),uMe=(()=>{class n{router;auth;constructor(t,i){this.router=t,this.auth=i}canActivate=(t,i)=>{let r=t.data.authGuardPipe||(()=>tB);return KI(this.auth).pipe(ji(1),r(t,i),yt(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(i){return new(i||n)(st(Ur),st(sa))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ob=n=>({canActivate:[uMe],data:{authGuardPipe:n}});var nee=n=>Gd(tB,yt(e=>e||n)),iee=n=>Gd(tB,yt(e=>e&&n||!0));var Dee=0,GB=1,Ree=2;var WB=1,Pee=2,pc=3,Vl=0,ys=1,mc=2,gc=0,Af=1,$B=2,qB=3,KB=4,kee=5,Td=100,Nee=101,Oee=102,Lee=103,Fee=104,Vee=200,Uee=201,Bee=202,zee=203,FA=204,VA=205,Hee=206,jee=207,Gee=208,Wee=209,$ee=210,qee=211,Kee=212,Xee=213,Yee=214,hM=0,fM=1,pM=2,Mf=3,mM=4,gM=5,_M=6,yM=7,vM=0,Qee=1,Jee=2,Hl=0,Zee=1,ete=2,tte=3,nte=4,ite=5,rte=6,ste=7;var DB=300,Of=301,Lf=302,bM=303,xM=304,$b=306,UA=1e3,hc=1001,BA=1002,Ws=1003,ote=1004;var qb=1005;var lo=1006,wM=1007;var Rd=1008;var va=1009,XB=1010,YB=1011,d_=1012,EM=1013,Pd=1014,_c=1015,Ff=1016,IM=1017,SM=1018,h_=1020,QB=35902,JB=35899,ZB=1021,e4=1022,Lo=1023,e_=1026,f_=1027,t4=1028,TM=1029,CM=1030,AM=1031;var MM=1033,Kb=33776,Xb=33777,Yb=33778,Qb=33779,DM=35840,RM=35841,PM=35842,kM=35843,NM=36196,OM=37492,LM=37496,FM=37808,VM=37809,UM=37810,BM=37811,zM=37812,HM=37813,jM=37814,GM=37815,WM=37816,$M=37817,qM=37818,KM=37819,XM=37820,YM=37821,QM=36492,JM=36494,ZM=36495,eD=36283,tD=36284,nD=36285,iD=36286;var gb=2300,zA=2301,LA=2302,RB=2400,PB=2401,kB=2402;var ate=3200,cte=3201;var n4=0,lte=1,jl="",ao="srgb",Df="srgb-linear",_b="linear",ni="srgb";var Sf=7680;var NB=519,ute=512,dte=513,hte=514,i4=515,fte=516,pte=517,mte=518,gte=519,OB=35044;var r4="300 es",ya=2e3,yb=2001;function s4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function vb(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function _te(){let n=vb("canvas");return n.style.display="block",n}var ree={},t_=null;function o4(...n){let e="THREE."+n.shift();t_?t_("log",e,...n):console.log(e,...n)}function Ht(...n){let e="THREE."+n.shift();t_?t_("warn",e,...n):console.warn(e,...n)}function dn(...n){let e="THREE."+n.shift();t_?t_("error",e,...n):console.error(e,...n)}function n_(...n){let e=n.join(" ");e in ree||(ree[e]=!0,Ht(...n))}function yte(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}var Ul=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},rs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var nB=Math.PI/180,HA=180/Math.PI;function p_(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(rs[n&255]+rs[n>>8&255]+rs[n>>16&255]+rs[n>>24&255]+"-"+rs[e&255]+rs[e>>8&255]+"-"+rs[e>>16&15|64]+rs[e>>24&255]+"-"+rs[t&63|128]+rs[t>>8&255]+"-"+rs[t>>16&255]+rs[t>>24&255]+rs[i&255]+rs[i>>8&255]+rs[i>>16&255]+rs[i>>24&255]).toLowerCase()}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function dMe(n,e){return(n%e+e)%e}function iB(n,e,t){return(1-t)*n+t*e}function ab(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function js(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Xe=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Bl=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],h=s[o+0],p=s[o+1],_=s[o+2],b=s[o+3];if(a<=0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a>=1){e[t+0]=h,e[t+1]=p,e[t+2]=_,e[t+3]=b;return}if(d!==b||c!==h||l!==p||u!==_){let g=c*h+l*p+u*_+d*b;g<0&&(h=-h,p=-p,_=-_,b=-b,g=-g);let v=1-a;if(g<.9995){let R=Math.acos(g),P=Math.sin(R);v=Math.sin(v*R)/P,a=Math.sin(a*R)/P,c=c*v+h*a,l=l*v+p*a,u=u*v+_*a,d=d*v+b*a}else{c=c*v+h*a,l=l*v+p*a,u=u*v+_*a,d=d*v+b*a;let R=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=R,l*=R,u*=R,d*=R}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){let a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],p=s[o+2],_=s[o+3];return e[t]=a*_+u*d+c*p-l*h,e[t+1]=c*_+u*h+l*d-a*p,e[t+2]=l*_+u*p+a*h-c*d,e[t+3]=u*_-a*d-c*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),p=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d-h*p*_;break;case"YXZ":this._x=h*u*d+l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d+h*p*_;break;case"ZXY":this._x=h*u*d-l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d-h*p*_;break;case"ZYX":this._x=h*u*d-l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d+h*p*_;break;case"YZX":this._x=h*u*d+l*p*_,this._y=l*p*d+h*u*_,this._z=l*u*_-h*p*d,this._w=l*u*d-h*p*_;break;case"XZY":this._x=h*u*d-l*p*_,this._y=l*p*d-h*u*_,this._z=l*u*_+h*p*d,this._w=l*u*d+h*p*_;break;default:Ht("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-c)*p,this._y=(s-l)*p,this._z=(o-r)*p}else if(i>a&&i>d){let p=2*Math.sqrt(1+i-a-d);this._w=(u-c)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+l)/p}else if(a>d){let p=2*Math.sqrt(1+a-i-d);this._w=(s-l)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(c+u)/p}else{let p=2*Math.sqrt(1+d-i-a);this._w=(o-r)/p,this._x=(s+l)/p,this._y=(c+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,s=e._z,o=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,s=-s,o=-o,a=-a);let c=1-t;if(a<.9995){let l=Math.acos(a),u=Math.sin(l);c=Math.sin(c*l)/u,t=Math.sin(t*l)/u,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+s*t,this._w=this._w*c+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},K=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(see.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(see.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return rB.copy(this).projectOnVector(e),this.sub(rB)}reflect(e){return this.sub(rB.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},rB=new K,see=new Bl,on=class n{constructor(e,t,i,r,s,o,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],p=i[5],_=i[8],b=r[0],g=r[3],v=r[6],R=r[1],P=r[4],N=r[7],U=r[2],O=r[5],I=r[8];return s[0]=o*b+a*R+c*U,s[3]=o*g+a*P+c*O,s[6]=o*v+a*N+c*I,s[1]=l*b+u*R+d*U,s[4]=l*g+u*P+d*O,s[7]=l*v+u*N+d*I,s[2]=h*b+p*R+_*U,s[5]=h*g+p*P+_*O,s[8]=h*v+p*N+_*I,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,p=l*s-o*c,_=t*d+i*h+r*p;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=d*b,e[1]=(r*l-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=h*b,e[4]=(u*t-r*c)*b,e[5]=(r*s-a*t)*b,e[6]=p*b,e[7]=(i*c-l*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){let c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(sB.makeScale(e,t)),this}rotate(e){return this.premultiply(sB.makeRotation(-e)),this}translate(e,t){return this.premultiply(sB.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},sB=new on,oee=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),aee=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hMe(){let n={enabled:!0,workingColorSpace:Df,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ni&&(r.r=Fl(r.r),r.g=Fl(r.g),r.b=Fl(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ni&&(r.r=Zg(r.r),r.g=Zg(r.g),r.b=Zg(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===jl?_b:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return n_("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return n_("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Df]:{primaries:e,whitePoint:i,transfer:_b,toXYZ:oee,fromXYZ:aee,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ao},outputColorSpaceConfig:{drawingBufferColorSpace:ao}},[ao]:{primaries:e,whitePoint:i,transfer:ni,toXYZ:oee,fromXYZ:aee,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ao}}}),n}var Vn=hMe();function Fl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Zg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var zg,jA=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{zg===void 0&&(zg=vb("canvas")),zg.width=e.width,zg.height=e.height;let r=zg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=zg}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=vb("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Fl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Fl(t[i]/255)*255):t[i]=Fl(t[i]);return{data:t,width:e.width,height:e.height}}else return Ht("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},fMe=0,i_=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fMe++}),this.uuid=p_(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(oB(r[o].image)):s.push(oB(r[o]))}else s=oB(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function oB(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?jA.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Ht("Texture: Unable to serialize Texture."),{})}var pMe=0,aB=new K,Gl=(()=>{class n extends Ul{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=hc,s=hc,o=lo,a=Rd,c=Lo,l=va,u=n.DEFAULT_ANISOTROPY,d=jl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pMe++}),this.uuid=p_(),this.name="",this.source=new i_(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(aB).x}get height(){return this.source.getSize(aB).y}get depth(){return this.source.getSize(aB).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){Ht(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let s=this[i];if(s===void 0){Ht(`Texture.setValues(): property '${i}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==DB)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case UA:t.x=t.x-Math.floor(t.x);break;case hc:t.x=t.x<0?0:1;break;case BA:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case UA:t.y=t.y-Math.floor(t.y);break;case hc:t.y=t.y<0?0:1;break;case BA:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=DB,n.DEFAULT_ANISOTROPY=1,n})(),ti=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],p=c[5],_=c[9],b=c[2],g=c[6],v=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-b)<.01&&Math.abs(_-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+b)<.1&&Math.abs(_+g)<.1&&Math.abs(l+p+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let P=(l+1)/2,N=(p+1)/2,U=(v+1)/2,O=(u+h)/4,I=(d+b)/4,w=(_+g)/4;return P>N&&P>U?P<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(P),r=O/i,s=I/i):N>U?N<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(N),i=O/r,s=w/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=I/s,r=w/s),this.set(i,r,s,t),this}let R=Math.sqrt((g-_)*(g-_)+(d-b)*(d-b)+(h-u)*(h-u));return Math.abs(R)<.001&&(R=1),this.x=(g-_)/R,this.y=(d-b)/R,this.z=(h-u)/R,this.w=Math.acos((l+p+v-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this.w=gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this.w=gn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},GA=class extends Ul{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:lo,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new ti(0,0,e,t),this.scissorTest=!1,this.viewport=new ti(0,0,e,t);let r={width:e,height:t,depth:i.depth},s=new Gl(r);this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:lo,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new i_(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},fc=class extends GA{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},bb=class extends Gl{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ws,this.minFilter=Ws,this.wrapR=hc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var WA=class extends Gl{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ws,this.minFilter=Ws,this.wrapR=hc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Cd=class{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ma.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ma.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=ma.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ma):ma.fromBufferAttribute(s,o),ma.applyMatrix4(e.matrixWorld),this.expandByPoint(ma);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),fA.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),fA.copy(i.boundingBox)),fA.applyMatrix4(e.matrixWorld),this.union(fA)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ma),ma.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cb),pA.subVectors(this.max,cb),Hg.subVectors(e.a,cb),jg.subVectors(e.b,cb),Gg.subVectors(e.c,cb),vd.subVectors(jg,Hg),bd.subVectors(Gg,jg),xf.subVectors(Hg,Gg);let t=[0,-vd.z,vd.y,0,-bd.z,bd.y,0,-xf.z,xf.y,vd.z,0,-vd.x,bd.z,0,-bd.x,xf.z,0,-xf.x,-vd.y,vd.x,0,-bd.y,bd.x,0,-xf.y,xf.x,0];return!cB(t,Hg,jg,Gg,pA)||(t=[1,0,0,0,1,0,0,0,1],!cB(t,Hg,jg,Gg,pA))?!1:(mA.crossVectors(vd,bd),t=[mA.x,mA.y,mA.z],cB(t,Hg,jg,Gg,pA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ma).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ma).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Pl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Pl=[new K,new K,new K,new K,new K,new K,new K,new K],ma=new K,fA=new Cd,Hg=new K,jg=new K,Gg=new K,vd=new K,bd=new K,xf=new K,cb=new K,pA=new K,mA=new K,wf=new K;function cB(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){wf.fromArray(n,s);let a=r.x*Math.abs(wf.x)+r.y*Math.abs(wf.y)+r.z*Math.abs(wf.z),c=e.dot(wf),l=t.dot(wf),u=i.dot(wf);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var mMe=new Cd,lb=new K,lB=new K,Rf=class{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):mMe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lb.subVectors(e,this.center);let t=lb.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(lb,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(lB.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lb.copy(e.center).add(lB)),this.expandByPoint(lb.copy(e.center).sub(lB))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},kl=new K,uB=new K,gA=new K,xd=new K,dB=new K,_A=new K,hB=new K,xb=class{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,kl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=kl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(kl.copy(this.origin).addScaledVector(this.direction,t),kl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){uB.copy(e).add(t).multiplyScalar(.5),gA.copy(t).sub(e).normalize(),xd.copy(this.origin).sub(uB);let s=e.distanceTo(t)*.5,o=-this.direction.dot(gA),a=xd.dot(this.direction),c=-xd.dot(gA),l=xd.lengthSq(),u=Math.abs(1-o*o),d,h,p,_;if(u>0)if(d=o*c-a,h=o*a-c,_=s*u,d>=0)if(h>=-_)if(h<=_){let b=1/u;d*=b,h*=b,p=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;else h<=-_?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),p=-d*d+h*(h+2*c)+l):h<=_?(d=0,h=Math.min(Math.max(-s,-c),s),p=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),p=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(uB).addScaledVector(gA,h),p}intersectSphere(e,t){kl.subVectors(e.center,this.origin);let i=kl.dot(this.direction),r=kl.dot(kl)-i*i,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,kl)!==null}intersectTriangle(e,t,i,r,s){dB.subVectors(t,e),_A.subVectors(i,e),hB.crossVectors(dB,_A);let o=this.direction.dot(hB),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;xd.subVectors(this.origin,e);let c=a*this.direction.dot(_A.crossVectors(xd,_A));if(c<0)return null;let l=a*this.direction.dot(dB.cross(xd));if(l<0||c+l>o)return null;let u=-a*xd.dot(hB);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ii=class n{constructor(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g)}set(e,t,i,r,s,o,a,c,l,u,d,h,p,_,b,g){let v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=c,v[2]=l,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=_,v[11]=b,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Wg.setFromMatrixColumn(e,0).length(),s=1/Wg.setFromMatrixColumn(e,1).length(),o=1/Wg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let h=o*u,p=o*d,_=a*u,b=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=p+_*l,t[5]=h-b*l,t[9]=-a*c,t[2]=b-h*l,t[6]=_+p*l,t[10]=o*c}else if(e.order==="YXZ"){let h=c*u,p=c*d,_=l*u,b=l*d;t[0]=h+b*a,t[4]=_*a-p,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-_,t[6]=b+h*a,t[10]=o*c}else if(e.order==="ZXY"){let h=c*u,p=c*d,_=l*u,b=l*d;t[0]=h-b*a,t[4]=-o*d,t[8]=_+p*a,t[1]=p+_*a,t[5]=o*u,t[9]=b-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){let h=o*u,p=o*d,_=a*u,b=a*d;t[0]=c*u,t[4]=_*l-p,t[8]=h*l+b,t[1]=c*d,t[5]=b*l+h,t[9]=p*l-_,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){let h=o*c,p=o*l,_=a*c,b=a*l;t[0]=c*u,t[4]=b-h*d,t[8]=_*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=p*d+_,t[10]=h-b*d}else if(e.order==="XZY"){let h=o*c,p=o*l,_=a*c,b=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+b,t[5]=o*u,t[9]=p*d-_,t[2]=_*d-p,t[6]=a*u,t[10]=b*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gMe,e,_Me)}lookAt(e,t,i){let r=this.elements;return so.subVectors(e,t),so.lengthSq()===0&&(so.z=1),so.normalize(),wd.crossVectors(i,so),wd.lengthSq()===0&&(Math.abs(i.z)===1?so.x+=1e-4:so.z+=1e-4,so.normalize(),wd.crossVectors(i,so)),wd.normalize(),yA.crossVectors(so,wd),r[0]=wd.x,r[4]=yA.x,r[8]=so.x,r[1]=wd.y,r[5]=yA.y,r[9]=so.y,r[2]=wd.z,r[6]=yA.z,r[10]=so.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],p=i[13],_=i[2],b=i[6],g=i[10],v=i[14],R=i[3],P=i[7],N=i[11],U=i[15],O=r[0],I=r[4],w=r[8],y=r[12],x=r[1],T=r[5],M=r[9],C=r[13],re=r[2],Q=r[6],ae=r[10],fe=r[14],se=r[3],we=r[7],Ae=r[11],Ze=r[15];return s[0]=o*O+a*x+c*re+l*se,s[4]=o*I+a*T+c*Q+l*we,s[8]=o*w+a*M+c*ae+l*Ae,s[12]=o*y+a*C+c*fe+l*Ze,s[1]=u*O+d*x+h*re+p*se,s[5]=u*I+d*T+h*Q+p*we,s[9]=u*w+d*M+h*ae+p*Ae,s[13]=u*y+d*C+h*fe+p*Ze,s[2]=_*O+b*x+g*re+v*se,s[6]=_*I+b*T+g*Q+v*we,s[10]=_*w+b*M+g*ae+v*Ae,s[14]=_*y+b*C+g*fe+v*Ze,s[3]=R*O+P*x+N*re+U*se,s[7]=R*I+P*T+N*Q+U*we,s[11]=R*w+P*M+N*ae+U*Ae,s[15]=R*y+P*C+N*fe+U*Ze,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],p=e[14],_=e[3],b=e[7],g=e[11],v=e[15];return _*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*p-i*c*p)+b*(+t*c*p-t*l*h+s*o*h-r*o*p+r*l*u-s*c*u)+g*(+t*l*d-t*a*p-s*o*d+i*o*p+s*a*u-i*l*u)+v*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],p=e[11],_=e[12],b=e[13],g=e[14],v=e[15],R=d*g*l-b*h*l+b*c*p-a*g*p-d*c*v+a*h*v,P=_*h*l-u*g*l-_*c*p+o*g*p+u*c*v-o*h*v,N=u*b*l-_*d*l+_*a*p-o*b*p-u*a*v+o*d*v,U=_*d*c-u*b*c-_*a*h+o*b*h+u*a*g-o*d*g,O=t*R+i*P+r*N+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let I=1/O;return e[0]=R*I,e[1]=(b*h*s-d*g*s-b*r*p+i*g*p+d*r*v-i*h*v)*I,e[2]=(a*g*s-b*c*s+b*r*l-i*g*l-a*r*v+i*c*v)*I,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*p-i*c*p)*I,e[4]=P*I,e[5]=(u*g*s-_*h*s+_*r*p-t*g*p-u*r*v+t*h*v)*I,e[6]=(_*c*s-o*g*s-_*r*l+t*g*l+o*r*v-t*c*v)*I,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*p+t*c*p)*I,e[8]=N*I,e[9]=(_*d*s-u*b*s-_*i*p+t*b*p+u*i*v-t*d*v)*I,e[10]=(o*b*s-_*a*s+_*i*l-t*b*l-o*i*v+t*a*v)*I,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*p-t*a*p)*I,e[12]=U*I,e[13]=(u*b*r-_*d*r+_*i*h-t*b*h-u*i*g+t*d*g)*I,e[14]=(_*a*r-o*b*r-_*i*c+t*b*c+o*i*g-t*a*g)*I,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*I,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,p=s*u,_=s*d,b=o*u,g=o*d,v=a*d,R=c*l,P=c*u,N=c*d,U=i.x,O=i.y,I=i.z;return r[0]=(1-(b+v))*U,r[1]=(p+N)*U,r[2]=(_-P)*U,r[3]=0,r[4]=(p-N)*O,r[5]=(1-(h+v))*O,r[6]=(g+R)*O,r[7]=0,r[8]=(_+P)*I,r[9]=(g-R)*I,r[10]=(1-(h+b))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=Wg.set(r[0],r[1],r[2]).length(),o=Wg.set(r[4],r[5],r[6]).length(),a=Wg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ga.copy(this);let l=1/s,u=1/o,d=1/a;return ga.elements[0]*=l,ga.elements[1]*=l,ga.elements[2]*=l,ga.elements[4]*=u,ga.elements[5]*=u,ga.elements[6]*=u,ga.elements[8]*=d,ga.elements[9]*=d,ga.elements[10]*=d,t.setFromRotationMatrix(ga),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ya,c=!1){let l=this.elements,u=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),_,b;if(c)_=s/(o-s),b=o*s/(o-s);else if(a===ya)_=-(o+s)/(o-s),b=-2*o*s/(o-s);else if(a===yb)_=-o/(o-s),b=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=_,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ya,c=!1){let l=this.elements,u=2/(t-e),d=2/(i-r),h=-(t+e)/(t-e),p=-(i+r)/(i-r),_,b;if(c)_=1/(o-s),b=o/(o-s);else if(a===ya)_=-2/(o-s),b=-(o+s)/(o-s);else if(a===yb)_=-1/(o-s),b=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=d,l[9]=0,l[13]=p,l[2]=0,l[6]=0,l[10]=_,l[14]=b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Wg=new K,ga=new Ii,gMe=new K(0,0,0),_Me=new K(1,1,1),wd=new K,yA=new K,so=new K,cee=new Ii,lee=new Bl,Ad=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],p=s[6],_=s[10];switch(i){case"XYZ":this._y=Math.asin(gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(gn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-gn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,_),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,_),this._y=0);break;default:Ht("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return cee.makeRotationFromQuaternion(t),this.setFromRotationMatrix(cee,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return lee.setFromEuler(this),this.setFromQuaternion(lee,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),wb=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},yMe=0,uee=new K,$g=new Bl,Nl=new Ii,vA=new K,ub=new K,vMe=new K,bMe=new Bl,dee=new K(1,0,0),hee=new K(0,1,0),fee=new K(0,0,1),pee={type:"added"},xMe={type:"removed"},qg={type:"childadded",child:null},fB={type:"childremoved",child:null},Wl=(()=>{class n extends Ul{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yMe++}),this.uuid=p_(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new K,i=new Ad,r=new Bl,s=new K(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ii},normalMatrix:{value:new on}}),this.matrix=new Ii,this.matrixWorld=new Ii,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return $g.setFromAxisAngle(t,i),this.quaternion.multiply($g),this}rotateOnWorldAxis(t,i){return $g.setFromAxisAngle(t,i),this.quaternion.premultiply($g),this}rotateX(t){return this.rotateOnAxis(dee,t)}rotateY(t){return this.rotateOnAxis(hee,t)}rotateZ(t){return this.rotateOnAxis(fee,t)}translateOnAxis(t,i){return uee.copy(t).applyQuaternion(this.quaternion),this.position.add(uee.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(dee,t)}translateY(t){return this.translateOnAxis(hee,t)}translateZ(t){return this.translateOnAxis(fee,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Nl.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?vA.copy(t):vA.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),ub.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nl.lookAt(ub,vA,this.up):Nl.lookAt(vA,ub,this.up),this.quaternion.setFromRotationMatrix(Nl),s&&(Nl.extractRotation(s.matrixWorld),$g.setFromRotationMatrix(Nl),this.quaternion.premultiply($g.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(dn("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(pee),qg.child=t,this.dispatchEvent(qg),qg.child=null):dn("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(xMe),fB.child=t,this.dispatchEvent(fB),fB.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Nl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Nl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Nl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(pee),qg.child=t,this.dispatchEvent(qg),qg.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ub,t,vMe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ub,bMe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(c=>lt(ie({},c),{boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(c=>ie({},c)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function o(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];s.animations.push(o(t.animations,l))}}if(i){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),p=a(t.skeletons),_=a(t.animations),b=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new K(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),_a=new K,Ol=new K,pB=new K,Ll=new K,Kg=new K,Xg=new K,mee=new K,mB=new K,gB=new K,_B=new K,yB=new ti,vB=new ti,bB=new ti,Sd=class n{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),_a.subVectors(e,t),r.cross(_a);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){_a.subVectors(r,t),Ol.subVectors(i,t),pB.subVectors(e,t);let o=_a.dot(_a),a=_a.dot(Ol),c=_a.dot(pB),l=Ol.dot(Ol),u=Ol.dot(pB),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;let h=1/d,p=(l*c-a*u)*h,_=(o*u-a*c)*h;return s.set(1-p-_,_,p)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ll)===null?!1:Ll.x>=0&&Ll.y>=0&&Ll.x+Ll.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Ll)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Ll.x),c.addScaledVector(o,Ll.y),c.addScaledVector(a,Ll.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return yB.setScalar(0),vB.setScalar(0),bB.setScalar(0),yB.fromBufferAttribute(e,t),vB.fromBufferAttribute(e,i),bB.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(yB,s.x),o.addScaledVector(vB,s.y),o.addScaledVector(bB,s.z),o}static isFrontFacing(e,t,i,r){return _a.subVectors(i,t),Ol.subVectors(e,t),_a.cross(Ol).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _a.subVectors(this.c,this.b),Ol.subVectors(this.a,this.b),_a.cross(Ol).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,o,a;Kg.subVectors(r,i),Xg.subVectors(s,i),mB.subVectors(e,i);let c=Kg.dot(mB),l=Xg.dot(mB);if(c<=0&&l<=0)return t.copy(i);gB.subVectors(e,r);let u=Kg.dot(gB),d=Xg.dot(gB);if(u>=0&&d<=u)return t.copy(r);let h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Kg,o);_B.subVectors(e,s);let p=Kg.dot(_B),_=Xg.dot(_B);if(_>=0&&p<=_)return t.copy(s);let b=p*l-c*_;if(b<=0&&l>=0&&_<=0)return a=l/(l-_),t.copy(i).addScaledVector(Xg,a);let g=u*_-p*d;if(g<=0&&d-u>=0&&p-_>=0)return mee.subVectors(s,r),a=(d-u)/(d-u+(p-_)),t.copy(r).addScaledVector(mee,a);let v=1/(g+b+h);return o=b*v,a=h*v,t.copy(i).addScaledVector(Kg,o).addScaledVector(Xg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},vte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ed={h:0,s:0,l:0},bA={h:0,s:0,l:0};function xB(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var hn=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ao){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Vn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Vn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Vn.workingColorSpace){if(e=dMe(e,1),t=gn(t,0,1),i=gn(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=xB(o,s,e+1/3),this.g=xB(o,s,e),this.b=xB(o,s,e-1/3)}return Vn.colorSpaceToWorking(this,r),this}setStyle(e,t=ao){function i(s){s!==void 0&&parseFloat(s)<1&&Ht("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:Ht("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);Ht("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ao){let i=vte[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Ht("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fl(e.r),this.g=Fl(e.g),this.b=Fl(e.b),this}copyLinearToSRGB(e){return this.r=Zg(e.r),this.g=Zg(e.g),this.b=Zg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ao){return Vn.workingToColorSpace(ss.copy(this),e),Math.round(gn(ss.r*255,0,255))*65536+Math.round(gn(ss.g*255,0,255))*256+Math.round(gn(ss.b*255,0,255))}getHexString(e=ao){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vn.workingColorSpace){Vn.workingToColorSpace(ss.copy(this),t);let i=ss.r,r=ss.g,s=ss.b,o=Math.max(i,r,s),a=Math.min(i,r,s),c,l,u=(a+o)/2;if(a===o)c=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Vn.workingColorSpace){return Vn.workingToColorSpace(ss.copy(this),t),e.r=ss.r,e.g=ss.g,e.b=ss.b,e}getStyle(e=ao){Vn.workingToColorSpace(ss.copy(this),e);let t=ss.r,i=ss.g,r=ss.b;return e!==ao?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ed),this.setHSL(Ed.h+e,Ed.s+t,Ed.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ed),e.getHSL(bA);let i=iB(Ed.h,bA.h,t),r=iB(Ed.s,bA.s,t),s=iB(Ed.l,bA.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ss=new hn;hn.NAMES=vte;var wMe=0,zl=class extends Ul{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wMe++}),this.uuid=p_(),this.name="",this.type="Material",this.blending=Af,this.side=Vl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=FA,this.blendDst=VA,this.blendEquation=Td,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new hn(0,0,0),this.blendAlpha=0,this.depthFunc=Mf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NB,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sf,this.stencilZFail=Sf,this.stencilZPass=Sf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){Ht(`Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){Ht(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Af&&(i.blending=this.blending),this.side!==Vl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==FA&&(i.blendSrc=this.blendSrc),this.blendDst!==VA&&(i.blendDst=this.blendDst),this.blendEquation!==Td&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Mf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==NB&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Sf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Sf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let c=s[a];delete c.metadata,o.push(c)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Eb=class extends zl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new hn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ad,this.combine=vM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var ur=new K,xA=new Xe,EMe=0,co=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:EMe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=OB,this.updateRanges=[],this.gpuType=_c,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)xA.fromBufferAttribute(this,t),xA.applyMatrix3(e),this.setXY(t,xA.x,xA.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix3(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix4(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.applyNormalMatrix(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ur.fromBufferAttribute(this,t),ur.transformDirection(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ab(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=js(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ab(t,this.array)),t}setX(e,t){return this.normalized&&(t=js(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ab(t,this.array)),t}setY(e,t){return this.normalized&&(t=js(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ab(t,this.array)),t}setZ(e,t){return this.normalized&&(t=js(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ab(t,this.array)),t}setW(e,t){return this.normalized&&(t=js(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=js(t,this.array),i=js(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=js(t,this.array),i=js(i,this.array),r=js(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=js(t,this.array),i=js(i,this.array),r=js(r,this.array),s=js(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==OB&&(e.usage=this.usage),e}};var Ib=class extends co{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Sb=class extends co{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Gs=class extends co{constructor(e,t,i){super(new Float32Array(e),t,i)}},IMe=0,No=new Ii,wB=new Wl,Yg=new K,oo=new Cd,db=new Cd,Dr=new K,uo=class n extends Ul{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:IMe++}),this.uuid=p_(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(s4(e)?Sb:Ib)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new on().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return No.makeRotationFromQuaternion(e),this.applyMatrix4(No),this}rotateX(e){return No.makeRotationX(e),this.applyMatrix4(No),this}rotateY(e){return No.makeRotationY(e),this.applyMatrix4(No),this}rotateZ(e){return No.makeRotationZ(e),this.applyMatrix4(No),this}translate(e,t,i){return No.makeTranslation(e,t,i),this.applyMatrix4(No),this}scale(e,t,i){return No.makeScale(e,t,i),this.applyMatrix4(No),this}lookAt(e){return wB.lookAt(e),wB.updateMatrix(),this.applyMatrix4(wB.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yg).negate(),this.translate(Yg.x,Yg.y,Yg.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,s=e.length;r<s;r++){let o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Gs(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&Ht("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cd);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){dn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];oo.setFromBufferAttribute(s),this.morphTargetsRelative?(Dr.addVectors(this.boundingBox.min,oo.min),this.boundingBox.expandByPoint(Dr),Dr.addVectors(this.boundingBox.max,oo.max),this.boundingBox.expandByPoint(Dr)):(this.boundingBox.expandByPoint(oo.min),this.boundingBox.expandByPoint(oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&dn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rf);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){dn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){let i=this.boundingSphere.center;if(oo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];db.setFromBufferAttribute(a),this.morphTargetsRelative?(Dr.addVectors(oo.min,db.min),oo.expandByPoint(Dr),Dr.addVectors(oo.max,db.max),oo.expandByPoint(Dr)):(oo.expandByPoint(db.min),oo.expandByPoint(db.max))}oo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Dr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Dr));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Dr.fromBufferAttribute(a,l),c&&(Yg.fromBufferAttribute(e,l),Dr.add(Yg)),r=Math.max(r,i.distanceToSquared(Dr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&dn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){dn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new co(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],c=[];for(let w=0;w<i.count;w++)a[w]=new K,c[w]=new K;let l=new K,u=new K,d=new K,h=new Xe,p=new Xe,_=new Xe,b=new K,g=new K;function v(w,y,x){l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,y),d.fromBufferAttribute(i,x),h.fromBufferAttribute(s,w),p.fromBufferAttribute(s,y),_.fromBufferAttribute(s,x),u.sub(l),d.sub(l),p.sub(h),_.sub(h);let T=1/(p.x*_.y-_.x*p.y);isFinite(T)&&(b.copy(u).multiplyScalar(_.y).addScaledVector(d,-p.y).multiplyScalar(T),g.copy(d).multiplyScalar(p.x).addScaledVector(u,-_.x).multiplyScalar(T),a[w].add(b),a[y].add(b),a[x].add(b),c[w].add(g),c[y].add(g),c[x].add(g))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let w=0,y=R.length;w<y;++w){let x=R[w],T=x.start,M=x.count;for(let C=T,re=T+M;C<re;C+=3)v(e.getX(C+0),e.getX(C+1),e.getX(C+2))}let P=new K,N=new K,U=new K,O=new K;function I(w){U.fromBufferAttribute(r,w),O.copy(U);let y=a[w];P.copy(y),P.sub(U.multiplyScalar(U.dot(y))).normalize(),N.crossVectors(O,y);let T=N.dot(c[w])<0?-1:1;o.setXYZW(w,P.x,P.y,P.z,T)}for(let w=0,y=R.length;w<y;++w){let x=R[w],T=x.start,M=x.count;for(let C=T,re=T+M;C<re;C+=3)I(e.getX(C+0)),I(e.getX(C+1)),I(e.getX(C+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new co(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);let r=new K,s=new K,o=new K,a=new K,c=new K,l=new K,u=new K,d=new K;if(e)for(let h=0,p=e.count;h<p;h+=3){let _=e.getX(h+0),b=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,b),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Dr.fromBufferAttribute(e,t),Dr.normalize(),e.setXYZ(t,Dr.x,Dr.y,Dr.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u),p=0,_=0;for(let b=0,g=c.length;b<g;b++){a.isInterleavedBufferAttribute?p=c[b]*a.data.stride+a.offset:p=c[b]*u;for(let v=0;v<u;v++)h[_++]=l[p++]}return new co(h,u,d)}if(this.index===null)return Ht("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,i);t.setAttribute(a,l)}let s=this.morphAttributes;for(let a in s){let c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){let h=l[u],p=e(h,i);c.push(p)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,c=o.length;a<c;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let c in i){let l=i[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},s=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){let p=l[d];u.push(p.toJSON(e.data))}u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let s=e.morphAttributes;for(let l in s){let u=[],d=s[l];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},gee=new Ii,Ef=new xb,wA=new Rf,_ee=new K,EA=new K,IA=new K,SA=new K,EB=new K,TA=new K,yee=new K,CA=new K,ho=class extends Wl{constructor(e=new uo,t=new Eb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){TA.set(0,0,0);for(let c=0,l=s.length;c<l;c++){let u=a[c],d=s[c];u!==0&&(EB.fromBufferAttribute(d,e),o?TA.addScaledVector(EB,u):TA.addScaledVector(EB.sub(t),u))}t.add(TA)}return t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),wA.copy(i.boundingSphere),wA.applyMatrix4(s),Ef.copy(e.ray).recast(e.near),!(wA.containsPoint(Ef.origin)===!1&&(Ef.intersectSphere(wA,_ee)===null||Ef.origin.distanceToSquared(_ee)>(e.far-e.near)**2))&&(gee.copy(s).invert(),Ef.copy(e.ray).applyMatrix4(gee),!(i.boundingBox!==null&&Ef.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ef)))}_computeIntersections(e,t,i){let r,s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,b=h.length;_<b;_++){let g=h[_],v=o[g.materialIndex],R=Math.max(g.start,p.start),P=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let N=R,U=P;N<U;N+=3){let O=a.getX(N),I=a.getX(N+1),w=a.getX(N+2);r=AA(this,v,e,i,l,u,d,O,I,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,p.start),b=Math.min(a.count,p.start+p.count);for(let g=_,v=b;g<v;g+=3){let R=a.getX(g),P=a.getX(g+1),N=a.getX(g+2);r=AA(this,o,e,i,l,u,d,R,P,N),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,b=h.length;_<b;_++){let g=h[_],v=o[g.materialIndex],R=Math.max(g.start,p.start),P=Math.min(c.count,Math.min(g.start+g.count,p.start+p.count));for(let N=R,U=P;N<U;N+=3){let O=N,I=N+1,w=N+2;r=AA(this,v,e,i,l,u,d,O,I,w),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,p.start),b=Math.min(c.count,p.start+p.count);for(let g=_,v=b;g<v;g+=3){let R=g,P=g+1,N=g+2;r=AA(this,o,e,i,l,u,d,R,P,N),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function SMe(n,e,t,i,r,s,o,a){let c;if(e.side===ys?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side===Vl,a),c===null)return null;CA.copy(a),CA.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(CA);return l<t.near||l>t.far?null:{distance:l,point:CA.clone(),object:n}}function AA(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,EA),n.getVertexPosition(c,IA),n.getVertexPosition(l,SA);let u=SMe(n,e,t,i,EA,IA,SA,yee);if(u){let d=new K;Sd.getBarycoord(yee,EA,IA,SA,d),r&&(u.uv=Sd.getInterpolatedAttribute(r,a,c,l,d,new Xe)),s&&(u.uv1=Sd.getInterpolatedAttribute(s,a,c,l,d,new Xe)),o&&(u.normal=Sd.getInterpolatedAttribute(o,a,c,l,d,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new K,materialIndex:0};Sd.getNormal(EA,IA,SA,h.normal),u.face=h,u.barycoord=d}return u}var r_=class n extends uo{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let c=[],l=[],u=[],d=[],h=0,p=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Gs(l,3)),this.setAttribute("normal",new Gs(u,3)),this.setAttribute("uv",new Gs(d,2));function _(b,g,v,R,P,N,U,O,I,w,y){let x=N/I,T=U/w,M=N/2,C=U/2,re=O/2,Q=I+1,ae=w+1,fe=0,se=0,we=new K;for(let Ae=0;Ae<ae;Ae++){let Ze=Ae*T-C;for(let pt=0;pt<Q;pt++){let ct=pt*x-M;we[b]=ct*R,we[g]=Ze*P,we[v]=re,l.push(we.x,we.y,we.z),we[b]=0,we[g]=0,we[v]=O>0?1:-1,u.push(we.x,we.y,we.z),d.push(pt/I),d.push(1-Ae/w),fe+=1}}for(let Ae=0;Ae<w;Ae++)for(let Ze=0;Ze<I;Ze++){let pt=h+Ze+Q*Ae,ct=h+Ze+Q*(Ae+1),Bt=h+(Ze+1)+Q*(Ae+1),jt=h+(Ze+1)+Q*Ae;c.push(pt,ct,jt),c.push(ct,Bt,jt),se+=6}a.addGroup(p,se,y),p+=se,h+=fe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Vf(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Ht("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function os(n){let e={};for(let t=0;t<n.length;t++){let i=Vf(n[t]);for(let r in i)e[r]=i[r]}return e}function TMe(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function a4(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Vn.workingColorSpace}var bte={clone:Vf,merge:os},CMe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AMe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Oo=class extends zl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=CMe,this.fragmentShader=AMe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Vf(e.uniforms),this.uniformsGroups=TMe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Tb=class extends Wl{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ii,this.projectionMatrix=new Ii,this.projectionMatrixInverse=new Ii,this.coordinateSystem=ya,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Id=new K,vee=new Xe,bee=new Xe,Hr=class extends Tb{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=HA*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(nB*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return HA*2*Math.atan(Math.tan(nB*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Id.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Id.x,Id.y).multiplyScalar(-e/Id.z),Id.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Id.x,Id.y).multiplyScalar(-e/Id.z)}getViewSize(e,t){return this.getViewBounds(e,vee,bee),t.subVectors(bee,vee)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(nB*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Qg=-90,Jg=1,$A=class extends Wl{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Hr(Qg,Jg,e,t);r.layers=this.layers,this.add(r);let s=new Hr(Qg,Jg,e,t);s.layers=this.layers,this.add(s);let o=new Hr(Qg,Jg,e,t);o.layers=this.layers,this.add(o);let a=new Hr(Qg,Jg,e,t);a.layers=this.layers,this.add(a);let c=new Hr(Qg,Jg,e,t);c.layers=this.layers,this.add(c);let l=new Hr(Qg,Jg,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(let l of t)this.remove(l);if(e===ya)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===yb)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;let b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}},Cb=class extends Gl{constructor(e=[],t=Of,i,r,s,o,a,c,l,u){super(e,t,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},qA=class extends fc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Cb(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new r_(5,5,5),s=new Oo({name:"CubemapFromEquirect",uniforms:Vf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ys,blending:gc});s.uniforms.tEquirect.value=t;let o=new ho(r,s),a=t.minFilter;return t.minFilter===Rd&&(t.minFilter=lo),new $A(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}},Tf=class extends Wl{constructor(){super(),this.isGroup=!0,this.type="Group"}},MMe={type:"move"},s_=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let b of e.hand.values()){let g=t.getJointPose(b,i),v=this._getHandJoint(l,b);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,_=.005;l.inputState.pinching&&h>p+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=p-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(MMe)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Tf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var Ab=class extends Wl{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ad,this.environmentIntensity=1,this.environmentRotation=new Ad,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var KA=class extends Gl{constructor(e=null,t=1,i=1,r,s,o,a,c,l=Ws,u=Ws,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var IB=new K,DMe=new K,RMe=new on,dc=class{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=IB.subVectors(i,t).cross(DMe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(IB),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||RMe.getNormalMatrix(e),r=this.coplanarPoint(IB).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},If=new Rf,PMe=new Xe(.5,.5),MA=new K,o_=class{constructor(e=new dc,t=new dc,i=new dc,r=new dc,s=new dc,o=new dc){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ya,i=!1){let r=this.planes,s=e.elements,o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],d=s[5],h=s[6],p=s[7],_=s[8],b=s[9],g=s[10],v=s[11],R=s[12],P=s[13],N=s[14],U=s[15];if(r[0].setComponents(l-o,p-u,v-_,U-R).normalize(),r[1].setComponents(l+o,p+u,v+_,U+R).normalize(),r[2].setComponents(l+a,p+d,v+b,U+P).normalize(),r[3].setComponents(l-a,p-d,v-b,U-P).normalize(),i)r[4].setComponents(c,h,g,N).normalize(),r[5].setComponents(l-c,p-h,v-g,U-N).normalize();else if(r[4].setComponents(l-c,p-h,v-g,U-N).normalize(),t===ya)r[5].setComponents(l+c,p+h,v+g,U+N).normalize();else if(t===yb)r[5].setComponents(c,h,g,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),If.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),If.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(If)}intersectsSprite(e){If.center.set(0,0,0);let t=PMe.distanceTo(e.center);return If.radius=.7071067811865476+t,If.applyMatrix4(e.matrixWorld),this.intersectsSphere(If)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(MA.x=r.normal.x>0?e.max.x:e.min.x,MA.y=r.normal.y>0?e.max.y:e.min.y,MA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(MA)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var a_=class extends zl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new hn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},xee=new Ii,LB=new xb,DA=new Rf,RA=new K,Mb=class extends Wl{constructor(e=new uo,t=new a_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),DA.copy(i.boundingSphere),DA.applyMatrix4(r),DA.radius+=s,e.ray.intersectsSphere(DA)===!1)return;xee.copy(r).invert(),LB.copy(e.ray).applyMatrix4(xee);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(l!==null){let h=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);for(let _=h,b=p;_<b;_++){let g=l.getX(_);RA.fromBufferAttribute(d,g),wee(RA,g,c,r,e,t,this)}}else{let h=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let _=h,b=p;_<b;_++)RA.fromBufferAttribute(d,_),wee(RA,_,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function wee(n,e,t,i,r,s,o){let a=LB.distanceSqToPoint(n);if(a<t){let c=new K;LB.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}var Db=class extends Gl{constructor(e,t,i=Pd,r,s,o,a=Ws,c=Ws,l,u=e_,d=1){if(u!==e_&&u!==f_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:t,depth:d};super(h,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new i_(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},Rb=class extends Gl{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}};var fo=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Ht("Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,s=i.length,o;t?o=t:o=e*i[s-1];let a=0,c=s-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);let u=i[r],h=i[r+1]-u,p=(o-u)/h;return(r+p)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);let o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Xe:new K);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new K,r=[],s=[],o=[],a=new K,c=new Ii;for(let p=0;p<=e;p++){let _=p/e;r[p]=this.getTangentAt(_,new K)}s[0]=new K,o[0]=new K;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();let _=Math.acos(gn(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(c.makeRotationAxis(a,_))}o[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(gn(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],p*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},c_=class extends fo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Xe){let i=t,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);let a=this.aStartAngle+e*s,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=c-this.aX,p=l-this.aY;c=h*u-p*d+this.aX,l=h*d+p*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},XA=class extends c_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}};function c4(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,d){let h=(o-s)/l-(a-s)/(l+u)+(a-o)/u,p=(a-o)/u-(c-o)/(u+d)+(c-a)/d;h*=u,p*=u,r(o,a,h,p)},calc:function(s){let o=s*s,a=o*s;return n+e*s+t*o+i*a}}}var PA=new K,SB=new c4,TB=new c4,CB=new c4,YA=class extends fo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){let i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=r[(a-1)%s]:(PA.subVectors(r[0],r[1]).add(r[0]),l=PA);let d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(PA.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=PA),this.curveType==="centripetal"||this.curveType==="chordal"){let p=this.curveType==="chordal"?.5:.25,_=Math.pow(l.distanceToSquared(d),p),b=Math.pow(d.distanceToSquared(h),p),g=Math.pow(h.distanceToSquared(u),p);b<1e-4&&(b=1),_<1e-4&&(_=b),g<1e-4&&(g=b),SB.initNonuniformCatmullRom(l.x,d.x,h.x,u.x,_,b,g),TB.initNonuniformCatmullRom(l.y,d.y,h.y,u.y,_,b,g),CB.initNonuniformCatmullRom(l.z,d.z,h.z,u.z,_,b,g)}else this.curveType==="catmullrom"&&(SB.initCatmullRom(l.x,d.x,h.x,u.x,this.tension),TB.initCatmullRom(l.y,d.y,h.y,u.y,this.tension),CB.initCatmullRom(l.z,d.z,h.z,u.z,this.tension));return i.set(SB.calc(c),TB.calc(c),CB.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function Eee(n,e,t,i,r){let s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function kMe(n,e){let t=1-n;return t*t*e}function NMe(n,e){return 2*(1-n)*n*e}function OMe(n,e){return n*n*e}function pb(n,e,t,i){return kMe(n,e)+NMe(n,t)+OMe(n,i)}function LMe(n,e){let t=1-n;return t*t*t*e}function FMe(n,e){let t=1-n;return 3*t*t*n*e}function VMe(n,e){return 3*(1-n)*n*n*e}function UMe(n,e){return n*n*n*e}function mb(n,e,t,i,r){return LMe(n,e)+FMe(n,t)+VMe(n,i)+UMe(n,r)}var Pb=class extends fo{constructor(e=new Xe,t=new Xe,i=new Xe,r=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Xe){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(mb(e,r.x,s.x,o.x,a.x),mb(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},QA=class extends fo{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){let i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(mb(e,r.x,s.x,o.x,a.x),mb(e,r.y,s.y,o.y,a.y),mb(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},kb=class extends fo{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},JA=class extends fo{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Nb=class extends fo{constructor(e=new Xe,t=new Xe,i=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Xe){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pb(e,r.x,s.x,o.x),pb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ZA=class extends fo{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){let i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pb(e,r.x,s.x,o.x),pb(e,r.y,s.y,o.y),pb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ob=class extends fo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){let i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(Eee(a,c.x,l.x,u.x,d.x),Eee(a,c.y,l.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new Xe().fromArray(r))}return this}},FB=Object.freeze({__proto__:null,ArcCurve:XA,CatmullRomCurve3:YA,CubicBezierCurve:Pb,CubicBezierCurve3:QA,EllipseCurve:c_,LineCurve:kb,LineCurve3:JA,QuadraticBezierCurve:Nb,QuadraticBezierCurve3:ZA,SplineCurve:Ob}),eM=class extends fo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new FB[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=i){let o=r[s]-i,a=this.curves[s],c=a.getLength(),l=c===0?0:1-o/c;return a.getPointAt(l,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,s=this.curves;r<s.length;r++){let o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){let u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new FB[r.type]().fromJSON(r))}return this}},Lb=class extends eM{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new kb(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let s=new Nb(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){let a=new Pb(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r),new Xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new Ob(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){let l=new c_(e,t,i,r,s,o,a,c);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Pf=class extends Lb{constructor(e){super(e),this.uuid=p_(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new Lb().fromJSON(r))}return this}};function BMe(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,s=xte(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;let a,c,l;if(i&&(s=WMe(n,e,s,t)),n.length>80*t){a=n[0],c=n[1];let u=a,d=c;for(let h=t;h<r;h+=t){let p=n[h],_=n[h+1];p<a&&(a=p),_<c&&(c=_),p>u&&(u=p),_>d&&(d=_)}l=Math.max(u-a,d-c),l=l!==0?32767/l:0}return Fb(s,o,t,a,c,l,0),o}function xte(n,e,t,i,r){let s;if(r===nDe(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=Iee(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=Iee(o/i|0,n[o],n[o+1],s);return s&&l_(s,s.next)&&(Ub(s),s=s.next),s}function kf(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(l_(t,t.next)||Pi(t.prev,t,t.next)===0)){if(Ub(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Fb(n,e,t,i,r,s,o){if(!n)return;!o&&s&&YMe(n,i,r,s);let a=n;for(;n.prev!==n.next;){let c=n.prev,l=n.next;if(s?HMe(n,i,r,s):zMe(n)){e.push(c.i,n.i,l.i),Ub(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=jMe(kf(n),e),Fb(n,e,t,i,r,s,2)):o===2&&GMe(n,e,t,i,r,s):Fb(kf(n),e,t,i,r,s,1);break}}}function zMe(n){let e=n.prev,t=n,i=n.next;if(Pi(e,t,i)>=0)return!1;let r=e.x,s=t.x,o=i.x,a=e.y,c=t.y,l=i.y,u=Math.min(r,s,o),d=Math.min(a,c,l),h=Math.max(r,s,o),p=Math.max(a,c,l),_=i.next;for(;_!==e;){if(_.x>=u&&_.x<=h&&_.y>=d&&_.y<=p&&fb(r,a,s,c,o,l,_.x,_.y)&&Pi(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function HMe(n,e,t,i){let r=n.prev,s=n,o=n.next;if(Pi(r,s,o)>=0)return!1;let a=r.x,c=s.x,l=o.x,u=r.y,d=s.y,h=o.y,p=Math.min(a,c,l),_=Math.min(u,d,h),b=Math.max(a,c,l),g=Math.max(u,d,h),v=VB(p,_,e,t,i),R=VB(b,g,e,t,i),P=n.prevZ,N=n.nextZ;for(;P&&P.z>=v&&N&&N.z<=R;){if(P.x>=p&&P.x<=b&&P.y>=_&&P.y<=g&&P!==r&&P!==o&&fb(a,u,c,d,l,h,P.x,P.y)&&Pi(P.prev,P,P.next)>=0||(P=P.prevZ,N.x>=p&&N.x<=b&&N.y>=_&&N.y<=g&&N!==r&&N!==o&&fb(a,u,c,d,l,h,N.x,N.y)&&Pi(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;P&&P.z>=v;){if(P.x>=p&&P.x<=b&&P.y>=_&&P.y<=g&&P!==r&&P!==o&&fb(a,u,c,d,l,h,P.x,P.y)&&Pi(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;N&&N.z<=R;){if(N.x>=p&&N.x<=b&&N.y>=_&&N.y<=g&&N!==r&&N!==o&&fb(a,u,c,d,l,h,N.x,N.y)&&Pi(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function jMe(n,e){let t=n;do{let i=t.prev,r=t.next.next;!l_(i,r)&&Ete(i,t,t.next,r)&&Vb(i,r)&&Vb(r,i)&&(e.push(i.i,t.i,r.i),Ub(t),Ub(t.next),t=n=r),t=t.next}while(t!==n);return kf(t)}function GMe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ZMe(o,a)){let c=Ite(o,a);o=kf(o,o.next),c=kf(c,c.next),Fb(o,e,t,i,r,s,0),Fb(c,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function WMe(n,e,t,i){let r=[];for(let s=0,o=e.length;s<o;s++){let a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=xte(n,a,c,i,!1);l===l.next&&(l.steiner=!0),r.push(JMe(l))}r.sort($Me);for(let s=0;s<r.length;s++)t=qMe(r[s],t);return t}function $Me(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function qMe(n,e){let t=KMe(n,e);if(!t)return e;let i=Ite(t,n);return kf(i,i.next),kf(t,t.next)}function KMe(n,e){let t=e,i=n.x,r=n.y,s=-1/0,o;if(l_(n,t))return t;do{if(l_(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;let a=o,c=o.x,l=o.y,u=1/0;t=o;do{if(i>=t.x&&t.x>=c&&i!==t.x&&wte(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)){let d=Math.abs(r-t.y)/(i-t.x);Vb(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&XMe(o,t)))&&(o=t,u=d)}t=t.next}while(t!==a);return o}function XMe(n,e){return Pi(n.prev,n,e.prev)<0&&Pi(e.next,n,n.next)<0}function YMe(n,e,t,i){let r=n;do r.z===0&&(r.z=VB(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,QMe(r)}function QMe(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let l=0;l<t&&(a++,o=o.nextZ,!!o);l++);let c=t;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function VB(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function JMe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function wte(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function fb(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&wte(n,e,t,i,r,s,o,a)}function ZMe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!eDe(n,e)&&(Vb(n,e)&&Vb(e,n)&&tDe(n,e)&&(Pi(n.prev,n,e.prev)||Pi(n,e.prev,e))||l_(n,e)&&Pi(n.prev,n,n.next)>0&&Pi(e.prev,e,e.next)>0)}function Pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function l_(n,e){return n.x===e.x&&n.y===e.y}function Ete(n,e,t,i){let r=NA(Pi(n,e,t)),s=NA(Pi(n,e,i)),o=NA(Pi(t,i,n)),a=NA(Pi(t,i,e));return!!(r!==s&&o!==a||r===0&&kA(n,t,e)||s===0&&kA(n,i,e)||o===0&&kA(t,n,i)||a===0&&kA(t,e,i))}function kA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function NA(n){return n>0?1:n<0?-1:0}function eDe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Ete(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Vb(n,e){return Pi(n.prev,n,n.next)<0?Pi(n,e,n.next)>=0&&Pi(n,n.prev,e)>=0:Pi(n,e,n.prev)<0||Pi(n,n.next,e)<0}function tDe(n,e){let t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Ite(n,e){let t=UB(n.i,n.x,n.y),i=UB(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Iee(n,e,t,i){let r=UB(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ub(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function UB(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function nDe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}var BB=class{static triangulate(e,t,i=2){return BMe(e,t,i)}},Cf=class n{static area(e){let t=e.length,i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],s=[];See(e),Tee(i,e);let o=e.length;t.forEach(See);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Tee(i,t[c]);let a=BB.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}};function See(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Tee(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var Bb=class n extends uo{constructor(e=new Pf([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];o(l)}this.setAttribute("position",new Gs(r,3)),this.setAttribute("uv",new Gs(s,2)),this.computeVertexNormals();function o(a){let c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:p-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,v=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:iDe,P,N=!1,U,O,I,w;v&&(P=v.getSpacedPoints(u),N=!0,h=!1,U=v.computeFrenetFrames(u,!1),O=new K,I=new K,w=new K),h||(g=0,p=0,_=0,b=0);let y=a.extractPoints(l),x=y.shape,T=y.holes;if(!Cf.isClockWise(x)){x=x.reverse();for(let ye=0,B=T.length;ye<B;ye++){let be=T[ye];Cf.isClockWise(be)&&(T[ye]=be.reverse())}}function C(ye){let be=10000000000000001e-36,Se=ye[0];for(let Pe=1;Pe<=ye.length;Pe++){let xe=Pe%ye.length,Fe=ye[xe],Te=Fe.x-Se.x,$e=Fe.y-Se.y,z=Te*Te+$e*$e,k=Math.max(Math.abs(Fe.x),Math.abs(Fe.y),Math.abs(Se.x),Math.abs(Se.y)),X=be*k*k;if(z<=X){ye.splice(xe,1),Pe--;continue}Se=Fe}}C(x),T.forEach(C);let re=T.length,Q=x;for(let ye=0;ye<re;ye++){let B=T[ye];x=x.concat(B)}function ae(ye,B,be){return B||dn("ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(B,be)}let fe=x.length;function se(ye,B,be){let Se,Pe,xe,Fe=ye.x-B.x,Te=ye.y-B.y,$e=be.x-ye.x,z=be.y-ye.y,k=Fe*Fe+Te*Te,X=Fe*z-Te*$e;if(Math.abs(X)>Number.EPSILON){let oe=Math.sqrt(k),he=Math.sqrt($e*$e+z*z),J=B.x-Te/oe,tt=B.y+Fe/oe,Ue=be.x-z/he,mt=be.y+$e/he,rt=((Ue-J)*z-(mt-tt)*$e)/(Fe*z-Te*$e);Se=J+Fe*rt-ye.x,Pe=tt+Te*rt-ye.y;let _e=Se*Se+Pe*Pe;if(_e<=2)return new Xe(Se,Pe);xe=Math.sqrt(_e/2)}else{let oe=!1;Fe>Number.EPSILON?$e>Number.EPSILON&&(oe=!0):Fe<-Number.EPSILON?$e<-Number.EPSILON&&(oe=!0):Math.sign(Te)===Math.sign(z)&&(oe=!0),oe?(Se=-Te,Pe=Fe,xe=Math.sqrt(k)):(Se=Fe,Pe=Te,xe=Math.sqrt(k/2))}return new Xe(Se/xe,Pe/xe)}let we=[];for(let ye=0,B=Q.length,be=B-1,Se=ye+1;ye<B;ye++,be++,Se++)be===B&&(be=0),Se===B&&(Se=0),we[ye]=se(Q[ye],Q[be],Q[Se]);let Ae=[],Ze,pt=we.concat();for(let ye=0,B=re;ye<B;ye++){let be=T[ye];Ze=[];for(let Se=0,Pe=be.length,xe=Pe-1,Fe=Se+1;Se<Pe;Se++,xe++,Fe++)xe===Pe&&(xe=0),Fe===Pe&&(Fe=0),Ze[Se]=se(be[Se],be[xe],be[Fe]);Ae.push(Ze),pt=pt.concat(Ze)}let ct;if(g===0)ct=Cf.triangulateShape(Q,T);else{let ye=[],B=[];for(let be=0;be<g;be++){let Se=be/g,Pe=p*Math.cos(Se*Math.PI/2),xe=_*Math.sin(Se*Math.PI/2)+b;for(let Fe=0,Te=Q.length;Fe<Te;Fe++){let $e=ae(Q[Fe],we[Fe],xe);_t($e.x,$e.y,-Pe),Se===0&&ye.push($e)}for(let Fe=0,Te=re;Fe<Te;Fe++){let $e=T[Fe];Ze=Ae[Fe];let z=[];for(let k=0,X=$e.length;k<X;k++){let oe=ae($e[k],Ze[k],xe);_t(oe.x,oe.y,-Pe),Se===0&&z.push(oe)}Se===0&&B.push(z)}}ct=Cf.triangulateShape(ye,B)}let Bt=ct.length,jt=_+b;for(let ye=0;ye<fe;ye++){let B=h?ae(x[ye],pt[ye],jt):x[ye];N?(I.copy(U.normals[0]).multiplyScalar(B.x),O.copy(U.binormals[0]).multiplyScalar(B.y),w.copy(P[0]).add(I).add(O),_t(w.x,w.y,w.z)):_t(B.x,B.y,0)}for(let ye=1;ye<=u;ye++)for(let B=0;B<fe;B++){let be=h?ae(x[B],pt[B],jt):x[B];N?(I.copy(U.normals[ye]).multiplyScalar(be.x),O.copy(U.binormals[ye]).multiplyScalar(be.y),w.copy(P[ye]).add(I).add(O),_t(w.x,w.y,w.z)):_t(be.x,be.y,d/u*ye)}for(let ye=g-1;ye>=0;ye--){let B=ye/g,be=p*Math.cos(B*Math.PI/2),Se=_*Math.sin(B*Math.PI/2)+b;for(let Pe=0,xe=Q.length;Pe<xe;Pe++){let Fe=ae(Q[Pe],we[Pe],Se);_t(Fe.x,Fe.y,d+be)}for(let Pe=0,xe=T.length;Pe<xe;Pe++){let Fe=T[Pe];Ze=Ae[Pe];for(let Te=0,$e=Fe.length;Te<$e;Te++){let z=ae(Fe[Te],Ze[Te],Se);N?_t(z.x,z.y+P[u-1].y,P[u-1].x+be):_t(z.x,z.y,d+be)}}}ue(),me();function ue(){let ye=r.length/3;if(h){let B=0,be=fe*B;for(let Se=0;Se<Bt;Se++){let Pe=ct[Se];it(Pe[2]+be,Pe[1]+be,Pe[0]+be)}B=u+g*2,be=fe*B;for(let Se=0;Se<Bt;Se++){let Pe=ct[Se];it(Pe[0]+be,Pe[1]+be,Pe[2]+be)}}else{for(let B=0;B<Bt;B++){let be=ct[B];it(be[2],be[1],be[0])}for(let B=0;B<Bt;B++){let be=ct[B];it(be[0]+fe*u,be[1]+fe*u,be[2]+fe*u)}}i.addGroup(ye,r.length/3-ye,0)}function me(){let ye=r.length/3,B=0;Qe(Q,B),B+=Q.length;for(let be=0,Se=T.length;be<Se;be++){let Pe=T[be];Qe(Pe,B),B+=Pe.length}i.addGroup(ye,r.length/3-ye,1)}function Qe(ye,B){let be=ye.length;for(;--be>=0;){let Se=be,Pe=be-1;Pe<0&&(Pe=ye.length-1);for(let xe=0,Fe=u+g*2;xe<Fe;xe++){let Te=fe*xe,$e=fe*(xe+1),z=B+Se+Te,k=B+Pe+Te,X=B+Pe+$e,oe=B+Se+$e;Gt(z,k,X,oe)}}}function _t(ye,B,be){c.push(ye),c.push(B),c.push(be)}function it(ye,B,be){Sn(ye),Sn(B),Sn(be);let Se=r.length/3,Pe=R.generateTopUV(i,r,Se-3,Se-2,Se-1);Tt(Pe[0]),Tt(Pe[1]),Tt(Pe[2])}function Gt(ye,B,be,Se){Sn(ye),Sn(B),Sn(Se),Sn(B),Sn(be),Sn(Se);let Pe=r.length/3,xe=R.generateSideWallUV(i,r,Pe-6,Pe-3,Pe-2,Pe-1);Tt(xe[0]),Tt(xe[1]),Tt(xe[3]),Tt(xe[1]),Tt(xe[2]),Tt(xe[3])}function Sn(ye){r.push(c[ye*3+0]),r.push(c[ye*3+1]),r.push(c[ye*3+2])}function Tt(ye){s.push(ye.x),s.push(ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return rDe(t,i,e)}static fromJSON(e,t){let i=[];for(let s=0,o=e.shapes.length;s<o;s++){let a=t[e.shapes[s]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new FB[r.type]().fromJSON(r)),new n(i,e.options)}},iDe={generateTopUV:function(n,e,t,i,r){let s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],l=e[r*3],u=e[r*3+1];return[new Xe(s,o),new Xe(a,c),new Xe(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){let o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[r*3],p=e[r*3+1],_=e[r*3+2],b=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new Xe(o,1-c),new Xe(l,1-d),new Xe(h,1-_),new Xe(b,1-v)]:[new Xe(a,1-c),new Xe(u,1-d),new Xe(p,1-_),new Xe(g,1-v)]}};function rDe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var zb=class n extends uo{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,p=[],_=[],b=[],g=[];for(let v=0;v<u;v++){let R=v*h-o;for(let P=0;P<l;P++){let N=P*d-s;_.push(N,-R,0),b.push(0,0,1),g.push(P/a),g.push(1-v/c)}}for(let v=0;v<c;v++)for(let R=0;R<a;R++){let P=R+l*v,N=R+l*(v+1),U=R+1+l*(v+1),O=R+1+l*v;p.push(P,N,O),p.push(N,U,O)}this.setIndex(p),this.setAttribute("position",new Gs(_,3)),this.setAttribute("normal",new Gs(b,3)),this.setAttribute("uv",new Gs(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var Hb=class extends zl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new hn(16777215),this.specular=new hn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=n4,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ad,this.combine=vM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var tM=class extends zl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ate,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},nM=class extends zl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function OA(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function sDe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var Nf=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){let a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},iM=class extends Nf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:RB,endingEnd:RB}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case PB:s=e,a=2*t-i;break;case kB:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case PB:o=e,c=2*i-t;break;case kB:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,_=(i-t)/(r-t),b=_*_,g=b*_,v=-h*g+2*h*b-h*_,R=(1+h)*g+(-1.5-2*h)*b+(-.5+h)*_+1,P=(-1-p)*g+(1.5+p)*b+.5*_,N=p*g-p*b;for(let U=0;U!==a;++U)s[U]=v*o[u+U]+R*o[l+U]+P*o[c+U]+N*o[d+U];return s}},rM=class extends Nf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}},sM=class extends Nf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},po=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=OA(t,this.TimeBufferType),this.values=OA(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:OA(e.times,Array),values:OA(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new sM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case gb:t=this.InterpolantFactoryMethodDiscrete;break;case zA:t=this.InterpolantFactoryMethodLinear;break;case LA:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Ht("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gb;case this.InterpolantFactoryMethodLinear:return zA;case this.InterpolantFactoryMethodSmooth:return LA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(dn("KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(dn("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){dn("KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){dn("KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&sDe(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){dn("KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===LA,s=e.length-1,o=1;for(let a=1;a<s;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{let d=a*i,h=d-i,p=d+i;for(let _=0;_!==i;++_){let b=t[d+_];if(b!==t[h+_]||b!==t[p+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];let d=a*i,h=o*i;for(let p=0;p!==i;++p)t[h+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};po.prototype.ValueTypeName="";po.prototype.TimeBufferType=Float32Array;po.prototype.ValueBufferType=Float32Array;po.prototype.DefaultInterpolation=zA;var Md=class extends po{constructor(e,t,i){super(e,t,i)}};Md.prototype.ValueTypeName="bool";Md.prototype.ValueBufferType=Array;Md.prototype.DefaultInterpolation=gb;Md.prototype.InterpolantFactoryMethodLinear=void 0;Md.prototype.InterpolantFactoryMethodSmooth=void 0;var oM=class extends po{constructor(e,t,i,r){super(e,t,i,r)}};oM.prototype.ValueTypeName="color";var aM=class extends po{constructor(e,t,i,r){super(e,t,i,r)}};aM.prototype.ValueTypeName="number";var cM=class extends Nf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t),l=e*a;for(let u=l+a;l!==u;l+=4)Bl.slerpFlat(s,0,o,l-a,o,l,c);return s}},jb=class extends po{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new cM(this.times,this.values,this.getValueSize(),e)}};jb.prototype.ValueTypeName="quaternion";jb.prototype.InterpolantFactoryMethodSmooth=void 0;var Dd=class extends po{constructor(e,t,i){super(e,t,i)}};Dd.prototype.ValueTypeName="string";Dd.prototype.ValueBufferType=Array;Dd.prototype.DefaultInterpolation=gb;Dd.prototype.InterpolantFactoryMethodLinear=void 0;Dd.prototype.InterpolantFactoryMethodSmooth=void 0;var lM=class extends po{constructor(e,t,i,r){super(e,t,i,r)}};lM.prototype.ValueTypeName="vector";var Gb=class extends Wl{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new hn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var AB=new Ii,Cee=new K,Aee=new K,zB=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.mapType=va,this.map=null,this.mapPass=null,this.matrix=new Ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new o_,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new ti(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;Cee.setFromMatrixPosition(e.matrixWorld),t.position.copy(Cee),Aee.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Aee),t.updateMatrixWorld(),AB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AB,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(AB)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var Mee=new Ii,hb=new K,MB=new K,HB=class extends zB{constructor(){super(new Hr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new ti(2,1,1,1),new ti(0,1,1,1),new ti(3,1,1,1),new ti(1,1,1,1),new ti(3,0,1,1),new ti(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),hb.setFromMatrixPosition(e.matrixWorld),i.position.copy(hb),MB.copy(i.position),MB.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(MB),i.updateMatrixWorld(),r.makeTranslation(-hb.x,-hb.y,-hb.z),Mee.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mee,i.coordinateSystem,i.reversedDepth)}},u_=class extends Gb{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new HB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},uM=class extends Tb{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};var Wb=class extends Gb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var dM=class extends Hr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var l4="\\[\\]\\.:\\/",oDe=new RegExp("["+l4+"]","g"),u4="[^"+l4+"]",aDe="[^"+l4.replace("\\.","")+"]",cDe=/((?:WC+[\/:])*)/.source.replace("WC",u4),lDe=/(WCOD+)?/.source.replace("WCOD",aDe),uDe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",u4),dDe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",u4),hDe=new RegExp("^"+cDe+lDe+uDe+dDe+"$"),fDe=["material","materials","bones","map"],jB=class{constructor(e,t,i){let r=i||Li.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Li=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(oDe,"")}static parseTrackName(t){let i=hDe.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);fDe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(o){for(let a=0;a<o.length;a++){let c=o[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){Ht("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){dn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){dn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){dn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){dn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){dn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){dn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){dn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=i.nodeName;dn("PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){dn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){dn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=jB,n})();Li.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Li.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Li.prototype.GetterByBindingType=[Li.prototype._getValue_direct,Li.prototype._getValue_array,Li.prototype._getValue_arrayElement,Li.prototype._getValue_toArray];Li.prototype.SetterByBindingTypeAndVersioning=[[Li.prototype._setValue_direct,Li.prototype._setValue_direct_setNeedsUpdate,Li.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_array,Li.prototype._setValue_array_setNeedsUpdate,Li.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_arrayElement,Li.prototype._setValue_arrayElement_setNeedsUpdate,Li.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_fromArray,Li.prototype._setValue_fromArray_setNeedsUpdate,Li.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var cat=new Float32Array(1);function d4(n,e,t,i){let r=pDe(i);switch(t){case ZB:return n*e;case t4:return n*e/r.components*r.byteLength;case TM:return n*e/r.components*r.byteLength;case CM:return n*e*2/r.components*r.byteLength;case AM:return n*e*2/r.components*r.byteLength;case e4:return n*e*3/r.components*r.byteLength;case Lo:return n*e*4/r.components*r.byteLength;case MM:return n*e*4/r.components*r.byteLength;case Kb:case Xb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Yb:case Qb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RM:case kM:return Math.max(n,16)*Math.max(e,8)/4;case DM:case PM:return Math.max(n,8)*Math.max(e,8)/2;case NM:case OM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case LM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case FM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case VM:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case UM:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case BM:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case zM:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case HM:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case jM:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case GM:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case WM:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case $M:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case qM:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case KM:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case XM:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case YM:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case QM:case JM:case ZM:return Math.ceil(n/4)*Math.ceil(e/4)*16;case eD:case tD:return Math.ceil(n/4)*Math.ceil(e/4)*8;case nD:case iD:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function pDe(n){switch(n){case va:case XB:return{byteLength:1,components:1};case d_:case YB:case Ff:return{byteLength:2,components:1};case IM:case SM:return{byteLength:2,components:4};case Pd:case EM:case _c:return{byteLength:4,components:1};case QB:case JB:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"181"}}));typeof window<"u"&&(window.__THREE__?Ht("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="181");function qte(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function gDe(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback();let p;if(l instanceof Float32Array)p=n.FLOAT;else if(typeof Float16Array<"u"&&l instanceof Float16Array)p=n.HALF_FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)p=n.SHORT;else if(l instanceof Uint32Array)p=n.UNSIGNED_INT;else if(l instanceof Int32Array)p=n.INT;else if(l instanceof Int8Array)p=n.BYTE;else if(l instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:p,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,c,l){let u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),d.length===0)n.bufferSubData(l,0,u);else{d.sort((p,_)=>p.start-_.start);let h=0;for(let p=1;p<d.length;p++){let _=d[h],b=d[p];b.start<=_.start+_.count+1?_.count=Math.max(_.count,b.start+b.count-_.start):(++h,d[h]=b)}d.length=h+1;for(let p=0,_=d.length;p<_;p++){let b=d[p];n.bufferSubData(l,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:s,update:o}}var _De=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,yDe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,vDe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bDe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xDe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wDe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,EDe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,IDe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,SDe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,TDe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,CDe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ADe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MDe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,DDe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,RDe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,PDe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,kDe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NDe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ODe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,LDe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,FDe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VDe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,UDe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,BDe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zDe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,HDe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,jDe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,GDe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,WDe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$De=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qDe="gl_FragColor = linearToOutputTexel( gl_FragColor );",KDe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,XDe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YDe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,QDe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,JDe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ZDe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,eRe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tRe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nRe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iRe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,rRe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sRe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oRe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,aRe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cRe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lRe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,uRe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dRe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,hRe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fRe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pRe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,mRe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gRe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_Re=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yRe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,vRe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bRe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xRe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wRe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ERe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IRe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,SRe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,TRe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CRe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ARe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MRe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,DRe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RRe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,PRe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kRe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NRe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ORe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,LRe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FRe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VRe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,URe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,BRe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zRe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,HRe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jRe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,GRe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WRe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$Re=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qRe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,KRe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,XRe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,YRe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,QRe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,JRe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ZRe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,t1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,i1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,r1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,o1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,a1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,c1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,l1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,d1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,h1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,f1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,p1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,m1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,g1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,y1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,v1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,x1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,E1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,I1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,S1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,T1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,C1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,R1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,O1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,F1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,V1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,z1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,j1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,W1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$1e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,K1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,X1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:_De,alphahash_pars_fragment:yDe,alphamap_fragment:vDe,alphamap_pars_fragment:bDe,alphatest_fragment:xDe,alphatest_pars_fragment:wDe,aomap_fragment:EDe,aomap_pars_fragment:IDe,batching_pars_vertex:SDe,batching_vertex:TDe,begin_vertex:CDe,beginnormal_vertex:ADe,bsdfs:MDe,iridescence_fragment:DDe,bumpmap_pars_fragment:RDe,clipping_planes_fragment:PDe,clipping_planes_pars_fragment:kDe,clipping_planes_pars_vertex:NDe,clipping_planes_vertex:ODe,color_fragment:LDe,color_pars_fragment:FDe,color_pars_vertex:VDe,color_vertex:UDe,common:BDe,cube_uv_reflection_fragment:zDe,defaultnormal_vertex:HDe,displacementmap_pars_vertex:jDe,displacementmap_vertex:GDe,emissivemap_fragment:WDe,emissivemap_pars_fragment:$De,colorspace_fragment:qDe,colorspace_pars_fragment:KDe,envmap_fragment:XDe,envmap_common_pars_fragment:YDe,envmap_pars_fragment:QDe,envmap_pars_vertex:JDe,envmap_physical_pars_fragment:lRe,envmap_vertex:ZDe,fog_vertex:eRe,fog_pars_vertex:tRe,fog_fragment:nRe,fog_pars_fragment:iRe,gradientmap_pars_fragment:rRe,lightmap_pars_fragment:sRe,lights_lambert_fragment:oRe,lights_lambert_pars_fragment:aRe,lights_pars_begin:cRe,lights_toon_fragment:uRe,lights_toon_pars_fragment:dRe,lights_phong_fragment:hRe,lights_phong_pars_fragment:fRe,lights_physical_fragment:pRe,lights_physical_pars_fragment:mRe,lights_fragment_begin:gRe,lights_fragment_maps:_Re,lights_fragment_end:yRe,logdepthbuf_fragment:vRe,logdepthbuf_pars_fragment:bRe,logdepthbuf_pars_vertex:xRe,logdepthbuf_vertex:wRe,map_fragment:ERe,map_pars_fragment:IRe,map_particle_fragment:SRe,map_particle_pars_fragment:TRe,metalnessmap_fragment:CRe,metalnessmap_pars_fragment:ARe,morphinstance_vertex:MRe,morphcolor_vertex:DRe,morphnormal_vertex:RRe,morphtarget_pars_vertex:PRe,morphtarget_vertex:kRe,normal_fragment_begin:NRe,normal_fragment_maps:ORe,normal_pars_fragment:LRe,normal_pars_vertex:FRe,normal_vertex:VRe,normalmap_pars_fragment:URe,clearcoat_normal_fragment_begin:BRe,clearcoat_normal_fragment_maps:zRe,clearcoat_pars_fragment:HRe,iridescence_pars_fragment:jRe,opaque_fragment:GRe,packing:WRe,premultiplied_alpha_fragment:$Re,project_vertex:qRe,dithering_fragment:KRe,dithering_pars_fragment:XRe,roughnessmap_fragment:YRe,roughnessmap_pars_fragment:QRe,shadowmap_pars_fragment:JRe,shadowmap_pars_vertex:ZRe,shadowmap_vertex:e1e,shadowmask_pars_fragment:t1e,skinbase_vertex:n1e,skinning_pars_vertex:i1e,skinning_vertex:r1e,skinnormal_vertex:s1e,specularmap_fragment:o1e,specularmap_pars_fragment:a1e,tonemapping_fragment:c1e,tonemapping_pars_fragment:l1e,transmission_fragment:u1e,transmission_pars_fragment:d1e,uv_pars_fragment:h1e,uv_pars_vertex:f1e,uv_vertex:p1e,worldpos_vertex:m1e,background_vert:g1e,background_frag:_1e,backgroundCube_vert:y1e,backgroundCube_frag:v1e,cube_vert:b1e,cube_frag:x1e,depth_vert:w1e,depth_frag:E1e,distanceRGBA_vert:I1e,distanceRGBA_frag:S1e,equirect_vert:T1e,equirect_frag:C1e,linedashed_vert:A1e,linedashed_frag:M1e,meshbasic_vert:D1e,meshbasic_frag:R1e,meshlambert_vert:P1e,meshlambert_frag:k1e,meshmatcap_vert:N1e,meshmatcap_frag:O1e,meshnormal_vert:L1e,meshnormal_frag:F1e,meshphong_vert:V1e,meshphong_frag:U1e,meshphysical_vert:B1e,meshphysical_frag:z1e,meshtoon_vert:H1e,meshtoon_frag:j1e,points_vert:G1e,points_frag:W1e,shadow_vert:$1e,shadow_frag:q1e,sprite_vert:K1e,sprite_frag:X1e},Ke={common:{diffuse:{value:new hn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new hn(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},yc={basic:{uniforms:os([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:os([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new hn(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:os([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new hn(0)},specular:{value:new hn(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:os([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new hn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:os([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new hn(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:os([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:os([Ke.points,Ke.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:os([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:os([Ke.common,Ke.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:os([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:os([Ke.sprite,Ke.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:os([Ke.common,Ke.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:os([Ke.lights,Ke.fog,{color:{value:new hn(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};yc.physical={uniforms:os([yc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new hn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new hn(0)},specularColor:{value:new hn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};var rD={r:0,b:0,g:0},Uf=new Ad,Y1e=new Ii;function Q1e(n,e,t,i,r,s,o){let a=new hn(0),c=s===!0?0:1,l,u,d=null,h=0,p=null;function _(P){let N=P.isScene===!0?P.background:null;return N&&N.isTexture&&(N=(P.backgroundBlurriness>0?t:e).get(N)),N}function b(P){let N=!1,U=_(P);U===null?v(a,c):U&&U.isColor&&(v(U,1),N=!0);let O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||N)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(P,N){let U=_(N);U&&(U.isCubeTexture||U.mapping===$b)?(u===void 0&&(u=new ho(new r_(1,1,1),new Oo({name:"BackgroundCubeMaterial",uniforms:Vf(yc.backgroundCube.uniforms),vertexShader:yc.backgroundCube.vertexShader,fragmentShader:yc.backgroundCube.fragmentShader,side:ys,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,I,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Uf.copy(N.backgroundRotation),Uf.x*=-1,Uf.y*=-1,Uf.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Uf.y*=-1,Uf.z*=-1),u.material.uniforms.envMap.value=U,u.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Y1e.makeRotationFromEuler(Uf)),u.material.toneMapped=Vn.getTransfer(U.colorSpace)!==ni,(d!==U||h!==U.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=U,h=U.version,p=n.toneMapping),u.layers.enableAll(),P.unshift(u,u.geometry,u.material,0,0,null)):U&&U.isTexture&&(l===void 0&&(l=new ho(new zb(2,2),new Oo({name:"BackgroundMaterial",uniforms:Vf(yc.background.uniforms),vertexShader:yc.background.vertexShader,fragmentShader:yc.background.fragmentShader,side:Vl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=U,l.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,l.material.toneMapped=Vn.getTransfer(U.colorSpace)!==ni,U.matrixAutoUpdate===!0&&U.updateMatrix(),l.material.uniforms.uvTransform.value.copy(U.matrix),(d!==U||h!==U.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,d=U,h=U.version,p=n.toneMapping),l.layers.enableAll(),P.unshift(l,l.geometry,l.material,0,0,null))}function v(P,N){P.getRGB(rD,a4(n)),i.buffers.color.setClear(rD.r,rD.g,rD.b,N,o)}function R(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(P,N=1){a.set(P),c=N,v(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(P){c=P,v(a,c)},render:b,addToRenderList:g,dispose:R}}function J1e(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),s=r,o=!1;function a(x,T,M,C,re){let Q=!1,ae=d(C,M,T);s!==ae&&(s=ae,l(s.object)),Q=p(x,C,M,re),Q&&_(x,C,M,re),re!==null&&e.update(re,n.ELEMENT_ARRAY_BUFFER),(Q||o)&&(o=!1,N(x,T,M,C),re!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(re).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function u(x){return n.deleteVertexArray(x)}function d(x,T,M){let C=M.wireframe===!0,re=i[x.id];re===void 0&&(re={},i[x.id]=re);let Q=re[T.id];Q===void 0&&(Q={},re[T.id]=Q);let ae=Q[C];return ae===void 0&&(ae=h(c()),Q[C]=ae),ae}function h(x){let T=[],M=[],C=[];for(let re=0;re<t;re++)T[re]=0,M[re]=0,C[re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:T,enabledAttributes:M,attributeDivisors:C,object:x,attributes:{},index:null}}function p(x,T,M,C){let re=s.attributes,Q=T.attributes,ae=0,fe=M.getAttributes();for(let se in fe)if(fe[se].location>=0){let Ae=re[se],Ze=Q[se];if(Ze===void 0&&(se==="instanceMatrix"&&x.instanceMatrix&&(Ze=x.instanceMatrix),se==="instanceColor"&&x.instanceColor&&(Ze=x.instanceColor)),Ae===void 0||Ae.attribute!==Ze||Ze&&Ae.data!==Ze.data)return!0;ae++}return s.attributesNum!==ae||s.index!==C}function _(x,T,M,C){let re={},Q=T.attributes,ae=0,fe=M.getAttributes();for(let se in fe)if(fe[se].location>=0){let Ae=Q[se];Ae===void 0&&(se==="instanceMatrix"&&x.instanceMatrix&&(Ae=x.instanceMatrix),se==="instanceColor"&&x.instanceColor&&(Ae=x.instanceColor));let Ze={};Ze.attribute=Ae,Ae&&Ae.data&&(Ze.data=Ae.data),re[se]=Ze,ae++}s.attributes=re,s.attributesNum=ae,s.index=C}function b(){let x=s.newAttributes;for(let T=0,M=x.length;T<M;T++)x[T]=0}function g(x){v(x,0)}function v(x,T){let M=s.newAttributes,C=s.enabledAttributes,re=s.attributeDivisors;M[x]=1,C[x]===0&&(n.enableVertexAttribArray(x),C[x]=1),re[x]!==T&&(n.vertexAttribDivisor(x,T),re[x]=T)}function R(){let x=s.newAttributes,T=s.enabledAttributes;for(let M=0,C=T.length;M<C;M++)T[M]!==x[M]&&(n.disableVertexAttribArray(M),T[M]=0)}function P(x,T,M,C,re,Q,ae){ae===!0?n.vertexAttribIPointer(x,T,M,re,Q):n.vertexAttribPointer(x,T,M,C,re,Q)}function N(x,T,M,C){b();let re=C.attributes,Q=M.getAttributes(),ae=T.defaultAttributeValues;for(let fe in Q){let se=Q[fe];if(se.location>=0){let we=re[fe];if(we===void 0&&(fe==="instanceMatrix"&&x.instanceMatrix&&(we=x.instanceMatrix),fe==="instanceColor"&&x.instanceColor&&(we=x.instanceColor)),we!==void 0){let Ae=we.normalized,Ze=we.itemSize,pt=e.get(we);if(pt===void 0)continue;let ct=pt.buffer,Bt=pt.type,jt=pt.bytesPerElement,ue=Bt===n.INT||Bt===n.UNSIGNED_INT||we.gpuType===EM;if(we.isInterleavedBufferAttribute){let me=we.data,Qe=me.stride,_t=we.offset;if(me.isInstancedInterleavedBuffer){for(let it=0;it<se.locationSize;it++)v(se.location+it,me.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let it=0;it<se.locationSize;it++)g(se.location+it);n.bindBuffer(n.ARRAY_BUFFER,ct);for(let it=0;it<se.locationSize;it++)P(se.location+it,Ze/se.locationSize,Bt,Ae,Qe*jt,(_t+Ze/se.locationSize*it)*jt,ue)}else{if(we.isInstancedBufferAttribute){for(let me=0;me<se.locationSize;me++)v(se.location+me,we.meshPerAttribute);x.isInstancedMesh!==!0&&C._maxInstanceCount===void 0&&(C._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let me=0;me<se.locationSize;me++)g(se.location+me);n.bindBuffer(n.ARRAY_BUFFER,ct);for(let me=0;me<se.locationSize;me++)P(se.location+me,Ze/se.locationSize,Bt,Ae,Ze*jt,Ze/se.locationSize*me*jt,ue)}}else if(ae!==void 0){let Ae=ae[fe];if(Ae!==void 0)switch(Ae.length){case 2:n.vertexAttrib2fv(se.location,Ae);break;case 3:n.vertexAttrib3fv(se.location,Ae);break;case 4:n.vertexAttrib4fv(se.location,Ae);break;default:n.vertexAttrib1fv(se.location,Ae)}}}}R()}function U(){w();for(let x in i){let T=i[x];for(let M in T){let C=T[M];for(let re in C)u(C[re].object),delete C[re];delete T[M]}delete i[x]}}function O(x){if(i[x.id]===void 0)return;let T=i[x.id];for(let M in T){let C=T[M];for(let re in C)u(C[re].object),delete C[re];delete T[M]}delete i[x.id]}function I(x){for(let T in i){let M=i[T];if(M[x.id]===void 0)continue;let C=M[x.id];for(let re in C)u(C[re].object),delete C[re];delete M[x.id]}}function w(){y(),o=!0,s!==r&&(s=r,l(s.object))}function y(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:w,resetDefaultState:y,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:I,initAttributes:b,enableAttribute:g,disableUnusedAttributes:R}}function Z1e(n,e,t){let i;function r(l){i=l}function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)}function o(l,u,d){d!==0&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let p=0;for(let _=0;_<d;_++)p+=u[_];t.update(p,i,1)}function c(l,u,d,h){if(d===0)return;let p=e.get("WEBGL_multi_draw");if(p===null)for(let _=0;_<l.length;_++)o(l[_],u[_],h[_]);else{p.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let _=0;for(let b=0;b<d;b++)_+=u[b]*h[b];t.update(_,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function ePe(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==Lo&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){let w=I===Ff&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==va&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==_c&&!w)}function c(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(Ht("WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,h=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),P=n.getParameter(n.MAX_VARYING_VECTORS),N=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=_>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reversedDepthBuffer:h,maxTextures:p,maxVertexTextures:_,maxTextureSize:b,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:R,maxVaryings:P,maxFragmentUniforms:N,vertexTextures:U,maxSamples:O}}function tPe(n){let e=this,t=null,i=0,r=!1,s=!1,o=new dc,a=new on,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let p=d.length!==0||h||i!==0||r;return r=h,i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){let _=d.clippingPlanes,b=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!r||_===null||_.length===0||s&&!g)s?u(null):l();else{let R=s?0:i,P=R*4,N=v.clippingState||null;c.value=N,N=u(_,h,P,p);for(let U=0;U!==P;++U)N[U]=t[U];v.clippingState=N,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=R}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,_){let b=d!==null?d.length:0,g=null;if(b!==0){if(g=c.value,_!==!0||g===null){let v=p+b*4,R=h.matrixWorldInverse;a.getNormalMatrix(R),(g===null||g.length<v)&&(g=new Float32Array(v));for(let P=0,N=p;P!==b;++P,N+=4)o.copy(d[P]).applyMatrix4(R,a),o.normal.toArray(g,N),g[N+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,g}}function nPe(n){let e=new WeakMap;function t(o,a){return a===bM?o.mapping=Of:a===xM&&(o.mapping=Lf),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===bM||a===xM)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let l=new qA(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var kd=4,Ste=[.125,.215,.35,.446,.526,.582],zf=20,iPe=256,Jb=new uM,Tte=new hn,h4=null,f4=0,p4=0,m4=!1,rPe=new K,oD=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,s={}){let{size:o=256,position:a=rPe}=s;h4=this._renderer.getRenderTarget(),f4=this._renderer.getActiveCubeFace(),p4=this._renderer.getActiveMipmapLevel(),m4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Mte(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ate(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(h4,f4,p4),this._renderer.xr.enabled=m4,e.scissorTest=!1,m_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Of||e.mapping===Lf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),h4=this._renderer.getRenderTarget(),f4=this._renderer.getActiveCubeFace(),p4=this._renderer.getActiveMipmapLevel(),m4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:lo,minFilter:lo,generateMipmaps:!1,type:Ff,format:Lo,colorSpace:Df,depthBuffer:!1},r=Cte(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Cte(e,t,i);let{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=sPe(s)),this._blurMaterial=aPe(s,e,t),this._ggxMaterial=oPe(s,e,t)}return r}_compileMaterial(e){let t=new ho(new uo,e);this._renderer.compile(t,Jb)}_sceneToCubeUV(e,t,i,r,s){let c=new Hr(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(Tte),d.toneMapping=Hl,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ho(new r_,new Eb({name:"PMREM.Background",side:ys,depthWrite:!1,depthTest:!1})));let b=this._backgroundBox,g=b.material,v=!1,R=e.background;R?R.isColor&&(g.color.copy(R),e.background=null,v=!0):(g.color.copy(Tte),v=!0);for(let P=0;P<6;P++){let N=P%3;N===0?(c.up.set(0,l[P],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[P],s.y,s.z)):N===1?(c.up.set(0,0,l[P]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[P],s.z)):(c.up.set(0,l[P],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[P]));let U=this._cubeSize;m_(r,N*U,P>2?U:0,U,U),d.setRenderTarget(r),v&&d.render(b,c),d.render(e,c)}d.toneMapping=p,d.autoClear=h,e.background=R}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Of||e.mapping===Lf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Mte()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ate());let s=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;let a=s.uniforms;a.envMap.value=e;let c=this._cubeSize;m_(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,Jb)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodMeshes.length;for(let s=1;s<r;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){let r=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,a=this._lodMeshes[i];a.material=o;let c=o.uniforms,l=i/(this._lodMeshes.length-1),u=t/(this._lodMeshes.length-1),d=Math.sqrt(l*l-u*u),h=.05+l*.95,p=d*h,{_lodMax:_}=this,b=this._sizeLods[i],g=3*b*(i>_-kd?i-_+kd:0),v=4*(this._cubeSize-b);c.envMap.value=e.texture,c.roughness.value=p,c.mipInt.value=_-t,m_(s,g,v,3*b,2*b),r.setRenderTarget(s),r.render(a,Jb),c.envMap.value=s.texture,c.roughness.value=0,c.mipInt.value=_-i,m_(e,g,v,3*b,2*b),r.setRenderTarget(e),r.render(a,Jb)}_blur(e,t,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){let c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&dn("blur direction must be either latitudinal or longitudinal!");let u=3,d=this._lodMeshes[r];d.material=l;let h=l.uniforms,p=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*zf-1),b=s/_,g=isFinite(s)?1+Math.floor(u*b):zf;g>zf&&Ht(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${zf}`);let v=[],R=0;for(let I=0;I<zf;++I){let w=I/b,y=Math.exp(-w*w/2);v.push(y),I===0?R+=y:I<g&&(R+=2*y)}for(let I=0;I<v.length;I++)v[I]=v[I]/R;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:P}=this;h.dTheta.value=_,h.mipInt.value=P-i;let N=this._sizeLods[r],U=3*N*(r>P-kd?r-P+kd:0),O=4*(this._cubeSize-N);m_(t,U,O,3*N,2*N),c.setRenderTarget(t),c.render(d,Jb)}};function sPe(n){let e=[],t=[],i=[],r=n,s=n-kd+1+Ste.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);e.push(a);let c=1/a;o>n-kd?c=Ste[o-n+kd-1]:o===0&&(c=0),t.push(c);let l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,_=6,b=3,g=2,v=1,R=new Float32Array(b*_*p),P=new Float32Array(g*_*p),N=new Float32Array(v*_*p);for(let O=0;O<p;O++){let I=O%3*2/3-1,w=O>2?0:-1,y=[I,w,0,I+2/3,w,0,I+2/3,w+1,0,I,w,0,I+2/3,w+1,0,I,w+1,0];R.set(y,b*_*O),P.set(h,g*_*O);let x=[O,O,O,O,O,O];N.set(x,v*_*O)}let U=new uo;U.setAttribute("position",new co(R,b)),U.setAttribute("uv",new co(P,g)),U.setAttribute("faceIndex",new co(N,v)),i.push(new ho(U,null)),r>kd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function Cte(n,e,t){let i=new fc(n,e,t);return i.texture.mapping=$b,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function m_(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function oPe(n,e,t){return new Oo({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:iPe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:cD(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:gc,depthTest:!1,depthWrite:!1})}function aPe(n,e,t){let i=new Float32Array(zf),r=new K(0,1,0);return new Oo({name:"SphericalGaussianBlur",defines:{n:zf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:cD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gc,depthTest:!1,depthWrite:!1})}function Ate(){return new Oo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:cD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gc,depthTest:!1,depthWrite:!1})}function Mte(){return new Oo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:cD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gc,depthTest:!1,depthWrite:!1})}function cD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cPe(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===bM||c===xM,u=c===Of||c===Lf;if(l||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new oD(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let p=a.image;return l&&p&&p.height>0||u&&p&&r(p)?(t===null&&(t=new oD(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){let c=a.target;c.removeEventListener("dispose",s);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function lPe(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&n_("WebGLRenderer: "+i+" extension not supported."),r}}}function uPe(n,e,t,i){let r={},s=new WeakMap;function o(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let _ in h.attributes)e.remove(h.attributes[_]);h.removeEventListener("dispose",o),delete r[h.id];let p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function c(d){let h=d.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER)}function l(d){let h=[],p=d.index,_=d.attributes.position,b=0;if(p!==null){let R=p.array;b=p.version;for(let P=0,N=R.length;P<N;P+=3){let U=R[P+0],O=R[P+1],I=R[P+2];h.push(U,O,O,I,I,U)}}else if(_!==void 0){let R=_.array;b=_.version;for(let P=0,N=R.length/3-1;P<N;P+=3){let U=P+0,O=P+1,I=P+2;h.push(U,O,O,I,I,U)}}else return;let g=new(s4(h)?Sb:Ib)(h,1);g.version=b;let v=s.get(d);v&&e.remove(v),s.set(d,g)}function u(d){let h=s.get(d);if(h){let p=d.index;p!==null&&h.version<p.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function dPe(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function c(h,p){n.drawElements(i,p,s,h*o),t.update(p,i,1)}function l(h,p,_){_!==0&&(n.drawElementsInstanced(i,p,s,h*o,_),t.update(p,i,_))}function u(h,p,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,_);let g=0;for(let v=0;v<_;v++)g+=p[v];t.update(g,i,1)}function d(h,p,_,b){if(_===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<h.length;v++)l(h[v]/o,p[v],b[v]);else{g.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,b,0,_);let v=0;for(let R=0;R<_;R++)v+=p[R]*b[R];t.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function hPe(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:dn("WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function fPe(n,e,t){let i=new WeakMap,r=new ti;function s(o,a,c){let l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let x=function(){w.dispose(),i.delete(a),a.removeEventListener("dispose",x)};var p=x;h!==void 0&&h.texture.dispose();let _=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],R=a.morphAttributes.normal||[],P=a.morphAttributes.color||[],N=0;_===!0&&(N=1),b===!0&&(N=2),g===!0&&(N=3);let U=a.attributes.position.count*N,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);let I=new Float32Array(U*O*4*d),w=new bb(I,U,O,d);w.type=_c,w.needsUpdate=!0;let y=N*4;for(let T=0;T<d;T++){let M=v[T],C=R[T],re=P[T],Q=U*O*4*T;for(let ae=0;ae<M.count;ae++){let fe=ae*y;_===!0&&(r.fromBufferAttribute(M,ae),I[Q+fe+0]=r.x,I[Q+fe+1]=r.y,I[Q+fe+2]=r.z,I[Q+fe+3]=0),b===!0&&(r.fromBufferAttribute(C,ae),I[Q+fe+4]=r.x,I[Q+fe+5]=r.y,I[Q+fe+6]=r.z,I[Q+fe+7]=0),g===!0&&(r.fromBufferAttribute(re,ae),I[Q+fe+8]=r.x,I[Q+fe+9]=r.y,I[Q+fe+10]=r.z,I[Q+fe+11]=re.itemSize===4?r.w:1)}}h={count:d,texture:w,size:new Xe(U,O)},i.set(a,h),a.addEventListener("dispose",x)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let _=0;for(let g=0;g<l.length;g++)_+=l[g];let b=a.morphTargetsRelative?1:1-_;c.getUniforms().setValue(n,"morphTargetBaseInfluence",b),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function pPe(n,e,t,i){let r=new WeakMap;function s(c){let l=i.render.frame,u=c.geometry,d=e.get(c,u);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d}function o(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}var Kte=new Gl,Dte=new Db(1,1),Xte=new bb,Yte=new WA,Qte=new Cb,Rte=[],Pte=[],kte=new Float32Array(16),Nte=new Float32Array(9),Ote=new Float32Array(4);function __(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,s=Rte[r];if(s===void 0&&(s=new Float32Array(r),Rte[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function yr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function lD(n,e){let t=Pte[e];t===void 0&&(t=new Int32Array(e),Pte[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function mPe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function gPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function _Pe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(yr(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function yPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function vPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(yr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,i))return;Ote.set(i),n.uniformMatrix2fv(this.addr,!1,Ote),vr(t,i)}}function bPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(yr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,i))return;Nte.set(i),n.uniformMatrix3fv(this.addr,!1,Nte),vr(t,i)}}function xPe(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(yr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,i))return;kte.set(i),n.uniformMatrix4fv(this.addr,!1,kte),vr(t,i)}}function wPe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function EPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function IPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function SPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function TPe(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function CPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function APe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function MPe(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function DPe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(Dte.compareFunction=i4,s=Dte):s=Kte,t.setTexture2D(e||s,r)}function RPe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Yte,r)}function PPe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Qte,r)}function kPe(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Xte,r)}function NPe(n){switch(n){case 5126:return mPe;case 35664:return gPe;case 35665:return _Pe;case 35666:return yPe;case 35674:return vPe;case 35675:return bPe;case 35676:return xPe;case 5124:case 35670:return wPe;case 35667:case 35671:return EPe;case 35668:case 35672:return IPe;case 35669:case 35673:return SPe;case 5125:return TPe;case 36294:return CPe;case 36295:return APe;case 36296:return MPe;case 35678:case 36198:case 36298:case 36306:case 35682:return DPe;case 35679:case 36299:case 36307:return RPe;case 35680:case 36300:case 36308:case 36293:return PPe;case 36289:case 36303:case 36311:case 36292:return kPe}}function OPe(n,e){n.uniform1fv(this.addr,e)}function LPe(n,e){let t=__(e,this.size,2);n.uniform2fv(this.addr,t)}function FPe(n,e){let t=__(e,this.size,3);n.uniform3fv(this.addr,t)}function VPe(n,e){let t=__(e,this.size,4);n.uniform4fv(this.addr,t)}function UPe(n,e){let t=__(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function BPe(n,e){let t=__(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function zPe(n,e){let t=__(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function HPe(n,e){n.uniform1iv(this.addr,e)}function jPe(n,e){n.uniform2iv(this.addr,e)}function GPe(n,e){n.uniform3iv(this.addr,e)}function WPe(n,e){n.uniform4iv(this.addr,e)}function $Pe(n,e){n.uniform1uiv(this.addr,e)}function qPe(n,e){n.uniform2uiv(this.addr,e)}function KPe(n,e){n.uniform3uiv(this.addr,e)}function XPe(n,e){n.uniform4uiv(this.addr,e)}function YPe(n,e,t){let i=this.cache,r=e.length,s=lD(t,r);yr(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Kte,s[o])}function QPe(n,e,t){let i=this.cache,r=e.length,s=lD(t,r);yr(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Yte,s[o])}function JPe(n,e,t){let i=this.cache,r=e.length,s=lD(t,r);yr(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Qte,s[o])}function ZPe(n,e,t){let i=this.cache,r=e.length,s=lD(t,r);yr(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Xte,s[o])}function eke(n){switch(n){case 5126:return OPe;case 35664:return LPe;case 35665:return FPe;case 35666:return VPe;case 35674:return UPe;case 35675:return BPe;case 35676:return zPe;case 5124:case 35670:return HPe;case 35667:case 35671:return jPe;case 35668:case 35672:return GPe;case 35669:case 35673:return WPe;case 5125:return $Pe;case 36294:return qPe;case 36295:return KPe;case 36296:return XPe;case 35678:case 36198:case 36298:case 36306:case 35682:return YPe;case 35679:case 36299:case 36307:return QPe;case 35680:case 36300:case 36308:case 36293:return JPe;case 36289:case 36303:case 36311:case 36292:return ZPe}}var _4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=NPe(t.type)}},y4=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=eke(t.type)}},v4=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(e,t[a.id],i)}}},g4=/(\w+)(\])?(\[|\.)?/g;function Lte(n,e){n.seq.push(e),n.map[e.id]=e}function tke(n,e,t){let i=n.name,r=i.length;for(g4.lastIndex=0;;){let s=g4.exec(i),o=g4.lastIndex,a=s[1],c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){Lte(t,l===void 0?new _4(a,n,e):new y4(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new v4(a),Lte(t,d)),t=d}}}var g_=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);tke(s,o,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){let a=t[s],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&i.push(o)}return i}};function Fte(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var nke=37297,ike=0;function rke(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}var Vte=new on;function ske(n){Vn._getMatrix(Vte,Vn.workingColorSpace,n);let e=`mat3( ${Vte.elements.map(t=>t.toFixed(4))} )`;switch(Vn.getTransfer(n)){case _b:return[e,"LinearTransferOETF"];case ni:return[e,"sRGBTransferOETF"];default:return Ht("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Ute(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";let o=/ERROR: 0:(\d+)/.exec(s);if(o){let a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+rke(n.getShaderSource(e),a)}else return s}function oke(n,e){let t=ske(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function ake(n,e){let t;switch(e){case Zee:t="Linear";break;case ete:t="Reinhard";break;case tte:t="Cineon";break;case nte:t="ACESFilmic";break;case rte:t="AgX";break;case ste:t="Neutral";break;case ite:t="Custom";break;default:Ht("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var sD=new K;function cke(){Vn.getLuminanceCoefficients(sD);let n=sD.x.toFixed(4),e=sD.y.toFixed(4),t=sD.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lke(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Zb).join(`
`)}function uke(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function dke(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Zb(n){return n!==""}function Bte(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zte(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var hke=/^[ \t]*#include +<([\w\d./]+)>/gm;function b4(n){return n.replace(hke,pke)}var fke=new Map;function pke(n,e){let t=cn[e];if(t===void 0){let i=fke.get(e);if(i!==void 0)t=cn[i],Ht('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return b4(t)}var mke=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hte(n){return n.replace(mke,gke)}function gke(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function jte(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function _ke(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===WB?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Pee?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===pc&&(e="SHADOWMAP_TYPE_VSM"),e}function yke(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Of:case Lf:e="ENVMAP_TYPE_CUBE";break;case $b:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vke(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Lf:e="ENVMAP_MODE_REFRACTION";break}return e}function bke(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case vM:e="ENVMAP_BLENDING_MULTIPLY";break;case Qee:e="ENVMAP_BLENDING_MIX";break;case Jee:e="ENVMAP_BLENDING_ADD";break}return e}function xke(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function wke(n,e,t,i){let r=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,c=_ke(t),l=yke(t),u=vke(t),d=bke(t),h=xke(t),p=lke(t),_=uke(s),b=r.createProgram(),g,v,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Zb).join(`
`),g.length>0&&(g+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Zb).join(`
`),v.length>0&&(v+=`
`)):(g=[jte(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Zb).join(`
`),v=[jte(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Hl?"#define TONE_MAPPING":"",t.toneMapping!==Hl?cn.tonemapping_pars_fragment:"",t.toneMapping!==Hl?ake("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,oke("linearToOutputTexel",t.outputColorSpace),cke(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Zb).join(`
`)),o=b4(o),o=Bte(o,t),o=zte(o,t),a=b4(a),a=Bte(a,t),a=zte(a,t),o=Hte(o),a=Hte(a),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===r4?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===r4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let P=R+g+o,N=R+v+a,U=Fte(r,r.VERTEX_SHADER,P),O=Fte(r,r.FRAGMENT_SHADER,N);r.attachShader(b,U),r.attachShader(b,O),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function I(T){if(n.debug.checkShaderErrors){let M=r.getProgramInfoLog(b)||"",C=r.getShaderInfoLog(U)||"",re=r.getShaderInfoLog(O)||"",Q=M.trim(),ae=C.trim(),fe=re.trim(),se=!0,we=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,U,O);else{let Ae=Ute(r,U,"vertex"),Ze=Ute(r,O,"fragment");dn("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+T.name+`
Material Type: `+T.type+`

Program Info Log: `+Q+`
`+Ae+`
`+Ze)}else Q!==""?Ht("WebGLProgram: Program Info Log:",Q):(ae===""||fe==="")&&(we=!1);we&&(T.diagnostics={runnable:se,programLog:Q,vertexShader:{log:ae,prefix:g},fragmentShader:{log:fe,prefix:v}})}r.deleteShader(U),r.deleteShader(O),w=new g_(r,b),y=dke(r,b)}let w;this.getUniforms=function(){return w===void 0&&I(this),w};let y;this.getAttributes=function(){return y===void 0&&I(this),y};let x=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(b,nke)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ike++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=U,this.fragmentShader=O,this}var Eke=0,x4=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new w4(e),t.set(e,i)),i}},w4=class{constructor(e){this.id=Eke++,this.code=e,this.usedTimes=0}};function Ike(n,e,t,i,r,s,o){let a=new wb,c=new x4,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,p=r.precision,_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(y){return l.add(y),y===0?"uv":`uv${y}`}function g(y,x,T,M,C){let re=M.fog,Q=C.geometry,ae=y.isMeshStandardMaterial?M.environment:null,fe=(y.isMeshStandardMaterial?t:e).get(y.envMap||ae),se=fe&&fe.mapping===$b?fe.image.height:null,we=_[y.type];y.precision!==null&&(p=r.getMaxPrecision(y.precision),p!==y.precision&&Ht("WebGLProgram.getParameters:",y.precision,"not supported, using",p,"instead."));let Ae=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,Ze=Ae!==void 0?Ae.length:0,pt=0;Q.morphAttributes.position!==void 0&&(pt=1),Q.morphAttributes.normal!==void 0&&(pt=2),Q.morphAttributes.color!==void 0&&(pt=3);let ct,Bt,jt,ue;if(we){let kn=yc[we];ct=kn.vertexShader,Bt=kn.fragmentShader}else ct=y.vertexShader,Bt=y.fragmentShader,c.update(y),jt=c.getVertexShaderID(y),ue=c.getFragmentShaderID(y);let me=n.getRenderTarget(),Qe=n.state.buffers.depth.getReversed(),_t=C.isInstancedMesh===!0,it=C.isBatchedMesh===!0,Gt=!!y.map,Sn=!!y.matcap,Tt=!!fe,ye=!!y.aoMap,B=!!y.lightMap,be=!!y.bumpMap,Se=!!y.normalMap,Pe=!!y.displacementMap,xe=!!y.emissiveMap,Fe=!!y.metalnessMap,Te=!!y.roughnessMap,$e=y.anisotropy>0,z=y.clearcoat>0,k=y.dispersion>0,X=y.iridescence>0,oe=y.sheen>0,he=y.transmission>0,J=$e&&!!y.anisotropyMap,tt=z&&!!y.clearcoatMap,Ue=z&&!!y.clearcoatNormalMap,mt=z&&!!y.clearcoatRoughnessMap,rt=X&&!!y.iridescenceMap,_e=X&&!!y.iridescenceThicknessMap,Me=oe&&!!y.sheenColorMap,xt=oe&&!!y.sheenRoughnessMap,gt=!!y.specularMap,je=!!y.specularColorMap,kt=!!y.specularIntensityMap,j=he&&!!y.transmissionMap,Be=he&&!!y.thicknessMap,ke=!!y.gradientMap,Ne=!!y.alphaMap,ge=y.alphaTest>0,pe=!!y.alphaHash,qe=!!y.extensions,At=Hl;y.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(At=n.toneMapping);let Un={shaderID:we,shaderType:y.type,shaderName:y.name,vertexShader:ct,fragmentShader:Bt,defines:y.defines,customVertexShaderID:jt,customFragmentShaderID:ue,isRawShaderMaterial:y.isRawShaderMaterial===!0,glslVersion:y.glslVersion,precision:p,batching:it,batchingColor:it&&C._colorsTexture!==null,instancing:_t,instancingColor:_t&&C.instanceColor!==null,instancingMorph:_t&&C.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:me===null?n.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:Df,alphaToCoverage:!!y.alphaToCoverage,map:Gt,matcap:Sn,envMap:Tt,envMapMode:Tt&&fe.mapping,envMapCubeUVHeight:se,aoMap:ye,lightMap:B,bumpMap:be,normalMap:Se,displacementMap:h&&Pe,emissiveMap:xe,normalMapObjectSpace:Se&&y.normalMapType===lte,normalMapTangentSpace:Se&&y.normalMapType===n4,metalnessMap:Fe,roughnessMap:Te,anisotropy:$e,anisotropyMap:J,clearcoat:z,clearcoatMap:tt,clearcoatNormalMap:Ue,clearcoatRoughnessMap:mt,dispersion:k,iridescence:X,iridescenceMap:rt,iridescenceThicknessMap:_e,sheen:oe,sheenColorMap:Me,sheenRoughnessMap:xt,specularMap:gt,specularColorMap:je,specularIntensityMap:kt,transmission:he,transmissionMap:j,thicknessMap:Be,gradientMap:ke,opaque:y.transparent===!1&&y.blending===Af&&y.alphaToCoverage===!1,alphaMap:Ne,alphaTest:ge,alphaHash:pe,combine:y.combine,mapUv:Gt&&b(y.map.channel),aoMapUv:ye&&b(y.aoMap.channel),lightMapUv:B&&b(y.lightMap.channel),bumpMapUv:be&&b(y.bumpMap.channel),normalMapUv:Se&&b(y.normalMap.channel),displacementMapUv:Pe&&b(y.displacementMap.channel),emissiveMapUv:xe&&b(y.emissiveMap.channel),metalnessMapUv:Fe&&b(y.metalnessMap.channel),roughnessMapUv:Te&&b(y.roughnessMap.channel),anisotropyMapUv:J&&b(y.anisotropyMap.channel),clearcoatMapUv:tt&&b(y.clearcoatMap.channel),clearcoatNormalMapUv:Ue&&b(y.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:mt&&b(y.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&b(y.iridescenceMap.channel),iridescenceThicknessMapUv:_e&&b(y.iridescenceThicknessMap.channel),sheenColorMapUv:Me&&b(y.sheenColorMap.channel),sheenRoughnessMapUv:xt&&b(y.sheenRoughnessMap.channel),specularMapUv:gt&&b(y.specularMap.channel),specularColorMapUv:je&&b(y.specularColorMap.channel),specularIntensityMapUv:kt&&b(y.specularIntensityMap.channel),transmissionMapUv:j&&b(y.transmissionMap.channel),thicknessMapUv:Be&&b(y.thicknessMap.channel),alphaMapUv:Ne&&b(y.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(Se||$e),vertexColors:y.vertexColors,vertexAlphas:y.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:C.isPoints===!0&&!!Q.attributes.uv&&(Gt||Ne),fog:!!re,useFog:y.fog===!0,fogExp2:!!re&&re.isFogExp2,flatShading:y.flatShading===!0&&y.wireframe===!1,sizeAttenuation:y.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Qe,skinning:C.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:Ze,morphTextureStride:pt,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:y.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:At,decodeVideoTexture:Gt&&y.map.isVideoTexture===!0&&Vn.getTransfer(y.map.colorSpace)===ni,decodeVideoTextureEmissive:xe&&y.emissiveMap.isVideoTexture===!0&&Vn.getTransfer(y.emissiveMap.colorSpace)===ni,premultipliedAlpha:y.premultipliedAlpha,doubleSided:y.side===mc,flipSided:y.side===ys,useDepthPacking:y.depthPacking>=0,depthPacking:y.depthPacking||0,index0AttributeName:y.index0AttributeName,extensionClipCullDistance:qe&&y.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&y.extensions.multiDraw===!0||it)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:y.customProgramCacheKey()};return Un.vertexUv1s=l.has(1),Un.vertexUv2s=l.has(2),Un.vertexUv3s=l.has(3),l.clear(),Un}function v(y){let x=[];if(y.shaderID?x.push(y.shaderID):(x.push(y.customVertexShaderID),x.push(y.customFragmentShaderID)),y.defines!==void 0)for(let T in y.defines)x.push(T),x.push(y.defines[T]);return y.isRawShaderMaterial===!1&&(R(x,y),P(x,y),x.push(n.outputColorSpace)),x.push(y.customProgramCacheKey),x.join()}function R(y,x){y.push(x.precision),y.push(x.outputColorSpace),y.push(x.envMapMode),y.push(x.envMapCubeUVHeight),y.push(x.mapUv),y.push(x.alphaMapUv),y.push(x.lightMapUv),y.push(x.aoMapUv),y.push(x.bumpMapUv),y.push(x.normalMapUv),y.push(x.displacementMapUv),y.push(x.emissiveMapUv),y.push(x.metalnessMapUv),y.push(x.roughnessMapUv),y.push(x.anisotropyMapUv),y.push(x.clearcoatMapUv),y.push(x.clearcoatNormalMapUv),y.push(x.clearcoatRoughnessMapUv),y.push(x.iridescenceMapUv),y.push(x.iridescenceThicknessMapUv),y.push(x.sheenColorMapUv),y.push(x.sheenRoughnessMapUv),y.push(x.specularMapUv),y.push(x.specularColorMapUv),y.push(x.specularIntensityMapUv),y.push(x.transmissionMapUv),y.push(x.thicknessMapUv),y.push(x.combine),y.push(x.fogExp2),y.push(x.sizeAttenuation),y.push(x.morphTargetsCount),y.push(x.morphAttributeCount),y.push(x.numDirLights),y.push(x.numPointLights),y.push(x.numSpotLights),y.push(x.numSpotLightMaps),y.push(x.numHemiLights),y.push(x.numRectAreaLights),y.push(x.numDirLightShadows),y.push(x.numPointLightShadows),y.push(x.numSpotLightShadows),y.push(x.numSpotLightShadowsWithMaps),y.push(x.numLightProbes),y.push(x.shadowMapType),y.push(x.toneMapping),y.push(x.numClippingPlanes),y.push(x.numClipIntersection),y.push(x.depthPacking)}function P(y,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),x.gradientMap&&a.enable(22),y.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.reversedDepthBuffer&&a.enable(4),x.skinning&&a.enable(5),x.morphTargets&&a.enable(6),x.morphNormals&&a.enable(7),x.morphColors&&a.enable(8),x.premultipliedAlpha&&a.enable(9),x.shadowMapEnabled&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.decodeVideoTextureEmissive&&a.enable(20),x.alphaToCoverage&&a.enable(21),y.push(a.mask)}function N(y){let x=_[y.type],T;if(x){let M=yc[x];T=bte.clone(M.uniforms)}else T=y.uniforms;return T}function U(y,x){let T;for(let M=0,C=u.length;M<C;M++){let re=u[M];if(re.cacheKey===x){T=re,++T.usedTimes;break}}return T===void 0&&(T=new wke(n,x,y,s),u.push(T)),T}function O(y){if(--y.usedTimes===0){let x=u.indexOf(y);u[x]=u[u.length-1],u.pop(),y.destroy()}}function I(y){c.remove(y)}function w(){c.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:N,acquireProgram:U,releaseProgram:O,releaseShaderCache:I,programs:u,dispose:w}}function Ske(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Tke(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Gte(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Wte(){let n=[],e=0,t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,h,p,_,b,g){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:p,groupOrder:_,renderOrder:d.renderOrder,z:b,group:g},n[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=p,v.groupOrder=_,v.renderOrder=d.renderOrder,v.z=b,v.group=g),e++,v}function a(d,h,p,_,b,g){let v=o(d,h,p,_,b,g);p.transmission>0?i.push(v):p.transparent===!0?r.push(v):t.push(v)}function c(d,h,p,_,b,g){let v=o(d,h,p,_,b,g);p.transmission>0?i.unshift(v):p.transparent===!0?r.unshift(v):t.unshift(v)}function l(d,h){t.length>1&&t.sort(d||Tke),i.length>1&&i.sort(h||Gte),r.length>1&&r.sort(h||Gte)}function u(){for(let d=e,h=n.length;d<h;d++){let p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:c,finish:u,sort:l}}function Cke(){let n=new WeakMap;function e(i,r){let s=n.get(i),o;return s===void 0?(o=new Wte,n.set(i,[o])):r>=s.length?(o=new Wte,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ake(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new hn};break;case"SpotLight":t={position:new K,direction:new K,color:new hn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new hn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new hn,groundColor:new hn};break;case"RectAreaLight":t={color:new hn,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function Mke(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var Dke=0;function Rke(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Pke(n){let e=new Ake,t=Mke(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new K);let r=new K,s=new Ii,o=new Ii;function a(l){let u=0,d=0,h=0;for(let y=0;y<9;y++)i.probe[y].set(0,0,0);let p=0,_=0,b=0,g=0,v=0,R=0,P=0,N=0,U=0,O=0,I=0;l.sort(Rke);for(let y=0,x=l.length;y<x;y++){let T=l[y],M=T.color,C=T.intensity,re=T.distance,Q=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)u+=M.r*C,d+=M.g*C,h+=M.b*C;else if(T.isLightProbe){for(let ae=0;ae<9;ae++)i.probe[ae].addScaledVector(T.sh.coefficients[ae],C);I++}else if(T.isDirectionalLight){let ae=e.get(T);if(ae.color.copy(T.color).multiplyScalar(T.intensity),T.castShadow){let fe=T.shadow,se=t.get(T);se.shadowIntensity=fe.intensity,se.shadowBias=fe.bias,se.shadowNormalBias=fe.normalBias,se.shadowRadius=fe.radius,se.shadowMapSize=fe.mapSize,i.directionalShadow[p]=se,i.directionalShadowMap[p]=Q,i.directionalShadowMatrix[p]=T.shadow.matrix,R++}i.directional[p]=ae,p++}else if(T.isSpotLight){let ae=e.get(T);ae.position.setFromMatrixPosition(T.matrixWorld),ae.color.copy(M).multiplyScalar(C),ae.distance=re,ae.coneCos=Math.cos(T.angle),ae.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),ae.decay=T.decay,i.spot[b]=ae;let fe=T.shadow;if(T.map&&(i.spotLightMap[U]=T.map,U++,fe.updateMatrices(T),T.castShadow&&O++),i.spotLightMatrix[b]=fe.matrix,T.castShadow){let se=t.get(T);se.shadowIntensity=fe.intensity,se.shadowBias=fe.bias,se.shadowNormalBias=fe.normalBias,se.shadowRadius=fe.radius,se.shadowMapSize=fe.mapSize,i.spotShadow[b]=se,i.spotShadowMap[b]=Q,N++}b++}else if(T.isRectAreaLight){let ae=e.get(T);ae.color.copy(M).multiplyScalar(C),ae.halfWidth.set(T.width*.5,0,0),ae.halfHeight.set(0,T.height*.5,0),i.rectArea[g]=ae,g++}else if(T.isPointLight){let ae=e.get(T);if(ae.color.copy(T.color).multiplyScalar(T.intensity),ae.distance=T.distance,ae.decay=T.decay,T.castShadow){let fe=T.shadow,se=t.get(T);se.shadowIntensity=fe.intensity,se.shadowBias=fe.bias,se.shadowNormalBias=fe.normalBias,se.shadowRadius=fe.radius,se.shadowMapSize=fe.mapSize,se.shadowCameraNear=fe.camera.near,se.shadowCameraFar=fe.camera.far,i.pointShadow[_]=se,i.pointShadowMap[_]=Q,i.pointShadowMatrix[_]=T.shadow.matrix,P++}i.point[_]=ae,_++}else if(T.isHemisphereLight){let ae=e.get(T);ae.skyColor.copy(T.color).multiplyScalar(C),ae.groundColor.copy(T.groundColor).multiplyScalar(C),i.hemi[v]=ae,v++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ke.LTC_FLOAT_1,i.rectAreaLTC2=Ke.LTC_FLOAT_2):(i.rectAreaLTC1=Ke.LTC_HALF_1,i.rectAreaLTC2=Ke.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let w=i.hash;(w.directionalLength!==p||w.pointLength!==_||w.spotLength!==b||w.rectAreaLength!==g||w.hemiLength!==v||w.numDirectionalShadows!==R||w.numPointShadows!==P||w.numSpotShadows!==N||w.numSpotMaps!==U||w.numLightProbes!==I)&&(i.directional.length=p,i.spot.length=b,i.rectArea.length=g,i.point.length=_,i.hemi.length=v,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=N+U-O,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=I,w.directionalLength=p,w.pointLength=_,w.spotLength=b,w.rectAreaLength=g,w.hemiLength=v,w.numDirectionalShadows=R,w.numPointShadows=P,w.numSpotShadows=N,w.numSpotMaps=U,w.numLightProbes=I,i.version=Dke++)}function c(l,u){let d=0,h=0,p=0,_=0,b=0,g=u.matrixWorldInverse;for(let v=0,R=l.length;v<R;v++){let P=l[v];if(P.isDirectionalLight){let N=i.directional[d];N.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(g),d++}else if(P.isSpotLight){let N=i.spot[p];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(g),N.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(g),p++}else if(P.isRectAreaLight){let N=i.rectArea[_];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(g),o.identity(),s.copy(P.matrixWorld),s.premultiply(g),o.extractRotation(s),N.halfWidth.set(P.width*.5,0,0),N.halfHeight.set(0,P.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),_++}else if(P.isPointLight){let N=i.point[h];N.position.setFromMatrixPosition(P.matrixWorld),N.position.applyMatrix4(g),h++}else if(P.isHemisphereLight){let N=i.hemi[b];N.direction.setFromMatrixPosition(P.matrixWorld),N.direction.transformDirection(g),b++}}}return{setup:a,setupView:c,state:i}}function $te(n){let e=new Pke(n),t=[],i=[];function r(u){l.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function kke(n){let e=new WeakMap;function t(r,s=0){let o=e.get(r),a;return o===void 0?(a=new $te(n),e.set(r,[a])):s>=o.length?(a=new $te(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var Nke=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Oke=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Lke(n,e,t){let i=new o_,r=new Xe,s=new Xe,o=new ti,a=new tM({depthPacking:cte}),c=new nM,l={},u=t.maxTextureSize,d={[Vl]:ys,[ys]:Vl,[mc]:mc},h=new Oo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:Nke,fragmentShader:Oke}),p=h.clone();p.defines.HORIZONTAL_PASS=1;let _=new uo;_.setAttribute("position",new co(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new ho(_,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=WB;let v=this.type;this.render=function(O,I,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||O.length===0)return;let y=n.getRenderTarget(),x=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),M=n.state;M.setBlending(gc),M.buffers.depth.getReversed()===!0?M.buffers.color.setClear(0,0,0,0):M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);let C=v!==pc&&this.type===pc,re=v===pc&&this.type!==pc;for(let Q=0,ae=O.length;Q<ae;Q++){let fe=O[Q],se=fe.shadow;if(se===void 0){Ht("WebGLShadowMap:",fe,"has no shadow.");continue}if(se.autoUpdate===!1&&se.needsUpdate===!1)continue;r.copy(se.mapSize);let we=se.getFrameExtents();if(r.multiply(we),s.copy(se.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/we.x),r.x=s.x*we.x,se.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/we.y),r.y=s.y*we.y,se.mapSize.y=s.y)),se.map===null||C===!0||re===!0){let Ze=this.type!==pc?{minFilter:Ws,magFilter:Ws}:{};se.map!==null&&se.map.dispose(),se.map=new fc(r.x,r.y,Ze),se.map.texture.name=fe.name+".shadowMap",se.camera.updateProjectionMatrix()}n.setRenderTarget(se.map),n.clear();let Ae=se.getViewportCount();for(let Ze=0;Ze<Ae;Ze++){let pt=se.getViewport(Ze);o.set(s.x*pt.x,s.y*pt.y,s.x*pt.z,s.y*pt.w),M.viewport(o),se.updateMatrices(fe,Ze),i=se.getFrustum(),N(I,w,se.camera,fe,this.type)}se.isPointLightShadow!==!0&&this.type===pc&&R(se,w),se.needsUpdate=!1}v=this.type,g.needsUpdate=!1,n.setRenderTarget(y,x,T)};function R(O,I){let w=e.update(b);h.defines.VSM_SAMPLES!==O.blurSamples&&(h.defines.VSM_SAMPLES=O.blurSamples,p.defines.VSM_SAMPLES=O.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new fc(r.x,r.y)),h.uniforms.shadow_pass.value=O.map.texture,h.uniforms.resolution.value=O.mapSize,h.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,w,h,b,null),p.uniforms.shadow_pass.value=O.mapPass.texture,p.uniforms.resolution.value=O.mapSize,p.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,w,p,b,null)}function P(O,I,w,y){let x=null,T=w.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(T!==void 0)x=T;else if(x=w.isPointLight===!0?c:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){let M=x.uuid,C=I.uuid,re=l[M];re===void 0&&(re={},l[M]=re);let Q=re[C];Q===void 0&&(Q=x.clone(),re[C]=Q,I.addEventListener("dispose",U)),x=Q}if(x.visible=I.visible,x.wireframe=I.wireframe,y===pc?x.side=I.shadowSide!==null?I.shadowSide:I.side:x.side=I.shadowSide!==null?I.shadowSide:d[I.side],x.alphaMap=I.alphaMap,x.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,x.map=I.map,x.clipShadows=I.clipShadows,x.clippingPlanes=I.clippingPlanes,x.clipIntersection=I.clipIntersection,x.displacementMap=I.displacementMap,x.displacementScale=I.displacementScale,x.displacementBias=I.displacementBias,x.wireframeLinewidth=I.wireframeLinewidth,x.linewidth=I.linewidth,w.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let M=n.properties.get(x);M.light=w}return x}function N(O,I,w,y,x){if(O.visible===!1)return;if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&x===pc)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,O.matrixWorld);let C=e.update(O),re=O.material;if(Array.isArray(re)){let Q=C.groups;for(let ae=0,fe=Q.length;ae<fe;ae++){let se=Q[ae],we=re[se.materialIndex];if(we&&we.visible){let Ae=P(O,we,y,x);O.onBeforeShadow(n,O,I,w,C,Ae,se),n.renderBufferDirect(w,null,C,Ae,O,se),O.onAfterShadow(n,O,I,w,C,Ae,se)}}}else if(re.visible){let Q=P(O,re,y,x);O.onBeforeShadow(n,O,I,w,C,Q,null),n.renderBufferDirect(w,null,C,Q,O,null),O.onAfterShadow(n,O,I,w,C,Q,null)}}let M=O.children;for(let C=0,re=M.length;C<re;C++)N(M[C],I,w,y,x)}function U(O){O.target.removeEventListener("dispose",U);for(let w in l){let y=l[w],x=O.target.uuid;x in y&&(y[x].dispose(),delete y[x])}}}var Fke={[hM]:fM,[pM]:_M,[mM]:yM,[Mf]:gM,[fM]:hM,[_M]:pM,[yM]:mM,[gM]:Mf};function Vke(n,e){function t(){let j=!1,Be=new ti,ke=null,Ne=new ti(0,0,0,0);return{setMask:function(ge){ke!==ge&&!j&&(n.colorMask(ge,ge,ge,ge),ke=ge)},setLocked:function(ge){j=ge},setClear:function(ge,pe,qe,At,Un){Un===!0&&(ge*=At,pe*=At,qe*=At),Be.set(ge,pe,qe,At),Ne.equals(Be)===!1&&(n.clearColor(ge,pe,qe,At),Ne.copy(Be))},reset:function(){j=!1,ke=null,Ne.set(-1,0,0,0)}}}function i(){let j=!1,Be=!1,ke=null,Ne=null,ge=null;return{setReversed:function(pe){if(Be!==pe){let qe=e.get("EXT_clip_control");pe?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),Be=pe;let At=ge;ge=null,this.setClear(At)}},getReversed:function(){return Be},setTest:function(pe){pe?me(n.DEPTH_TEST):Qe(n.DEPTH_TEST)},setMask:function(pe){ke!==pe&&!j&&(n.depthMask(pe),ke=pe)},setFunc:function(pe){if(Be&&(pe=Fke[pe]),Ne!==pe){switch(pe){case hM:n.depthFunc(n.NEVER);break;case fM:n.depthFunc(n.ALWAYS);break;case pM:n.depthFunc(n.LESS);break;case Mf:n.depthFunc(n.LEQUAL);break;case mM:n.depthFunc(n.EQUAL);break;case gM:n.depthFunc(n.GEQUAL);break;case _M:n.depthFunc(n.GREATER);break;case yM:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ne=pe}},setLocked:function(pe){j=pe},setClear:function(pe){ge!==pe&&(Be&&(pe=1-pe),n.clearDepth(pe),ge=pe)},reset:function(){j=!1,ke=null,Ne=null,ge=null,Be=!1}}}function r(){let j=!1,Be=null,ke=null,Ne=null,ge=null,pe=null,qe=null,At=null,Un=null;return{setTest:function(kn){j||(kn?me(n.STENCIL_TEST):Qe(n.STENCIL_TEST))},setMask:function(kn){Be!==kn&&!j&&(n.stencilMask(kn),Be=kn)},setFunc:function(kn,Si,jr){(ke!==kn||Ne!==Si||ge!==jr)&&(n.stencilFunc(kn,Si,jr),ke=kn,Ne=Si,ge=jr)},setOp:function(kn,Si,jr){(pe!==kn||qe!==Si||At!==jr)&&(n.stencilOp(kn,Si,jr),pe=kn,qe=Si,At=jr)},setLocked:function(kn){j=kn},setClear:function(kn){Un!==kn&&(n.clearStencil(kn),Un=kn)},reset:function(){j=!1,Be=null,ke=null,Ne=null,ge=null,pe=null,qe=null,At=null,Un=null}}}let s=new t,o=new i,a=new r,c=new WeakMap,l=new WeakMap,u={},d={},h=new WeakMap,p=[],_=null,b=!1,g=null,v=null,R=null,P=null,N=null,U=null,O=null,I=new hn(0,0,0),w=0,y=!1,x=null,T=null,M=null,C=null,re=null,Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ae=!1,fe=0,se=n.getParameter(n.VERSION);se.indexOf("WebGL")!==-1?(fe=parseFloat(/^WebGL (\d)/.exec(se)[1]),ae=fe>=1):se.indexOf("OpenGL ES")!==-1&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),ae=fe>=2);let we=null,Ae={},Ze=n.getParameter(n.SCISSOR_BOX),pt=n.getParameter(n.VIEWPORT),ct=new ti().fromArray(Ze),Bt=new ti().fromArray(pt);function jt(j,Be,ke,Ne){let ge=new Uint8Array(4),pe=n.createTexture();n.bindTexture(j,pe),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qe=0;qe<ke;qe++)j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY?n.texImage3D(Be,0,n.RGBA,1,1,Ne,0,n.RGBA,n.UNSIGNED_BYTE,ge):n.texImage2D(Be+qe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ge);return pe}let ue={};ue[n.TEXTURE_2D]=jt(n.TEXTURE_2D,n.TEXTURE_2D,1),ue[n.TEXTURE_CUBE_MAP]=jt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[n.TEXTURE_2D_ARRAY]=jt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ue[n.TEXTURE_3D]=jt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),me(n.DEPTH_TEST),o.setFunc(Mf),be(!1),Se(GB),me(n.CULL_FACE),ye(gc);function me(j){u[j]!==!0&&(n.enable(j),u[j]=!0)}function Qe(j){u[j]!==!1&&(n.disable(j),u[j]=!1)}function _t(j,Be){return d[j]!==Be?(n.bindFramebuffer(j,Be),d[j]=Be,j===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Be),j===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Be),!0):!1}function it(j,Be){let ke=p,Ne=!1;if(j){ke=h.get(Be),ke===void 0&&(ke=[],h.set(Be,ke));let ge=j.textures;if(ke.length!==ge.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let pe=0,qe=ge.length;pe<qe;pe++)ke[pe]=n.COLOR_ATTACHMENT0+pe;ke.length=ge.length,Ne=!0}}else ke[0]!==n.BACK&&(ke[0]=n.BACK,Ne=!0);Ne&&n.drawBuffers(ke)}function Gt(j){return _!==j?(n.useProgram(j),_=j,!0):!1}let Sn={[Td]:n.FUNC_ADD,[Nee]:n.FUNC_SUBTRACT,[Oee]:n.FUNC_REVERSE_SUBTRACT};Sn[Lee]=n.MIN,Sn[Fee]=n.MAX;let Tt={[Vee]:n.ZERO,[Uee]:n.ONE,[Bee]:n.SRC_COLOR,[FA]:n.SRC_ALPHA,[$ee]:n.SRC_ALPHA_SATURATE,[Gee]:n.DST_COLOR,[Hee]:n.DST_ALPHA,[zee]:n.ONE_MINUS_SRC_COLOR,[VA]:n.ONE_MINUS_SRC_ALPHA,[Wee]:n.ONE_MINUS_DST_COLOR,[jee]:n.ONE_MINUS_DST_ALPHA,[qee]:n.CONSTANT_COLOR,[Kee]:n.ONE_MINUS_CONSTANT_COLOR,[Xee]:n.CONSTANT_ALPHA,[Yee]:n.ONE_MINUS_CONSTANT_ALPHA};function ye(j,Be,ke,Ne,ge,pe,qe,At,Un,kn){if(j===gc){b===!0&&(Qe(n.BLEND),b=!1);return}if(b===!1&&(me(n.BLEND),b=!0),j!==kee){if(j!==g||kn!==y){if((v!==Td||N!==Td)&&(n.blendEquation(n.FUNC_ADD),v=Td,N=Td),kn)switch(j){case Af:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $B:n.blendFunc(n.ONE,n.ONE);break;case qB:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case KB:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:dn("WebGLState: Invalid blending: ",j);break}else switch(j){case Af:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $B:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case qB:dn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case KB:dn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:dn("WebGLState: Invalid blending: ",j);break}R=null,P=null,U=null,O=null,I.set(0,0,0),w=0,g=j,y=kn}return}ge=ge||Be,pe=pe||ke,qe=qe||Ne,(Be!==v||ge!==N)&&(n.blendEquationSeparate(Sn[Be],Sn[ge]),v=Be,N=ge),(ke!==R||Ne!==P||pe!==U||qe!==O)&&(n.blendFuncSeparate(Tt[ke],Tt[Ne],Tt[pe],Tt[qe]),R=ke,P=Ne,U=pe,O=qe),(At.equals(I)===!1||Un!==w)&&(n.blendColor(At.r,At.g,At.b,Un),I.copy(At),w=Un),g=j,y=!1}function B(j,Be){j.side===mc?Qe(n.CULL_FACE):me(n.CULL_FACE);let ke=j.side===ys;Be&&(ke=!ke),be(ke),j.blending===Af&&j.transparent===!1?ye(gc):ye(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),o.setFunc(j.depthFunc),o.setTest(j.depthTest),o.setMask(j.depthWrite),s.setMask(j.colorWrite);let Ne=j.stencilWrite;a.setTest(Ne),Ne&&(a.setMask(j.stencilWriteMask),a.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),a.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),xe(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?me(n.SAMPLE_ALPHA_TO_COVERAGE):Qe(n.SAMPLE_ALPHA_TO_COVERAGE)}function be(j){x!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),x=j)}function Se(j){j!==Dee?(me(n.CULL_FACE),j!==T&&(j===GB?n.cullFace(n.BACK):j===Ree?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Qe(n.CULL_FACE),T=j}function Pe(j){j!==M&&(ae&&n.lineWidth(j),M=j)}function xe(j,Be,ke){j?(me(n.POLYGON_OFFSET_FILL),(C!==Be||re!==ke)&&(n.polygonOffset(Be,ke),C=Be,re=ke)):Qe(n.POLYGON_OFFSET_FILL)}function Fe(j){j?me(n.SCISSOR_TEST):Qe(n.SCISSOR_TEST)}function Te(j){j===void 0&&(j=n.TEXTURE0+Q-1),we!==j&&(n.activeTexture(j),we=j)}function $e(j,Be,ke){ke===void 0&&(we===null?ke=n.TEXTURE0+Q-1:ke=we);let Ne=Ae[ke];Ne===void 0&&(Ne={type:void 0,texture:void 0},Ae[ke]=Ne),(Ne.type!==j||Ne.texture!==Be)&&(we!==ke&&(n.activeTexture(ke),we=ke),n.bindTexture(j,Be||ue[j]),Ne.type=j,Ne.texture=Be)}function z(){let j=Ae[we];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function k(){try{n.compressedTexImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function X(){try{n.compressedTexImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function oe(){try{n.texSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function he(){try{n.texSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function J(){try{n.compressedTexSubImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function tt(){try{n.compressedTexSubImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function Ue(){try{n.texStorage2D(...arguments)}catch(j){j("WebGLState:",j)}}function mt(){try{n.texStorage3D(...arguments)}catch(j){j("WebGLState:",j)}}function rt(){try{n.texImage2D(...arguments)}catch(j){j("WebGLState:",j)}}function _e(){try{n.texImage3D(...arguments)}catch(j){j("WebGLState:",j)}}function Me(j){ct.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),ct.copy(j))}function xt(j){Bt.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),Bt.copy(j))}function gt(j,Be){let ke=l.get(Be);ke===void 0&&(ke=new WeakMap,l.set(Be,ke));let Ne=ke.get(j);Ne===void 0&&(Ne=n.getUniformBlockIndex(Be,j.name),ke.set(j,Ne))}function je(j,Be){let Ne=l.get(Be).get(j);c.get(Be)!==Ne&&(n.uniformBlockBinding(Be,Ne,j.__bindingPointIndex),c.set(Be,Ne))}function kt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},we=null,Ae={},d={},h=new WeakMap,p=[],_=null,b=!1,g=null,v=null,R=null,P=null,N=null,U=null,O=null,I=new hn(0,0,0),w=0,y=!1,x=null,T=null,M=null,C=null,re=null,ct.set(0,0,n.canvas.width,n.canvas.height),Bt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:me,disable:Qe,bindFramebuffer:_t,drawBuffers:it,useProgram:Gt,setBlending:ye,setMaterial:B,setFlipSided:be,setCullFace:Se,setLineWidth:Pe,setPolygonOffset:xe,setScissorTest:Fe,activeTexture:Te,bindTexture:$e,unbindTexture:z,compressedTexImage2D:k,compressedTexImage3D:X,texImage2D:rt,texImage3D:_e,updateUBOMapping:gt,uniformBlockBinding:je,texStorage2D:Ue,texStorage3D:mt,texSubImage2D:oe,texSubImage3D:he,compressedTexSubImage2D:J,compressedTexSubImage3D:tt,scissor:Me,viewport:xt,reset:kt}}function Uke(n,e,t,i,r,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Xe,u=new WeakMap,d,h=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(z,k){return p?new OffscreenCanvas(z,k):vb("canvas")}function b(z,k,X){let oe=1,he=$e(z);if((he.width>X||he.height>X)&&(oe=X/Math.max(he.width,he.height)),oe<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){let J=Math.floor(oe*he.width),tt=Math.floor(oe*he.height);d===void 0&&(d=_(J,tt));let Ue=k?_(J,tt):d;return Ue.width=J,Ue.height=tt,Ue.getContext("2d").drawImage(z,0,0,J,tt),Ht("WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+J+"x"+tt+")."),Ue}else return"data"in z&&Ht("WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),z;return z}function g(z){return z.generateMipmaps}function v(z){n.generateMipmap(z)}function R(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function P(z,k,X,oe,he=!1){if(z!==null){if(n[z]!==void 0)return n[z];Ht("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let J=k;if(k===n.RED&&(X===n.FLOAT&&(J=n.R32F),X===n.HALF_FLOAT&&(J=n.R16F),X===n.UNSIGNED_BYTE&&(J=n.R8)),k===n.RED_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.R8UI),X===n.UNSIGNED_SHORT&&(J=n.R16UI),X===n.UNSIGNED_INT&&(J=n.R32UI),X===n.BYTE&&(J=n.R8I),X===n.SHORT&&(J=n.R16I),X===n.INT&&(J=n.R32I)),k===n.RG&&(X===n.FLOAT&&(J=n.RG32F),X===n.HALF_FLOAT&&(J=n.RG16F),X===n.UNSIGNED_BYTE&&(J=n.RG8)),k===n.RG_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RG8UI),X===n.UNSIGNED_SHORT&&(J=n.RG16UI),X===n.UNSIGNED_INT&&(J=n.RG32UI),X===n.BYTE&&(J=n.RG8I),X===n.SHORT&&(J=n.RG16I),X===n.INT&&(J=n.RG32I)),k===n.RGB_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RGB8UI),X===n.UNSIGNED_SHORT&&(J=n.RGB16UI),X===n.UNSIGNED_INT&&(J=n.RGB32UI),X===n.BYTE&&(J=n.RGB8I),X===n.SHORT&&(J=n.RGB16I),X===n.INT&&(J=n.RGB32I)),k===n.RGBA_INTEGER&&(X===n.UNSIGNED_BYTE&&(J=n.RGBA8UI),X===n.UNSIGNED_SHORT&&(J=n.RGBA16UI),X===n.UNSIGNED_INT&&(J=n.RGBA32UI),X===n.BYTE&&(J=n.RGBA8I),X===n.SHORT&&(J=n.RGBA16I),X===n.INT&&(J=n.RGBA32I)),k===n.RGB&&(X===n.UNSIGNED_INT_5_9_9_9_REV&&(J=n.RGB9_E5),X===n.UNSIGNED_INT_10F_11F_11F_REV&&(J=n.R11F_G11F_B10F)),k===n.RGBA){let tt=he?_b:Vn.getTransfer(oe);X===n.FLOAT&&(J=n.RGBA32F),X===n.HALF_FLOAT&&(J=n.RGBA16F),X===n.UNSIGNED_BYTE&&(J=tt===ni?n.SRGB8_ALPHA8:n.RGBA8),X===n.UNSIGNED_SHORT_4_4_4_4&&(J=n.RGBA4),X===n.UNSIGNED_SHORT_5_5_5_1&&(J=n.RGB5_A1)}return(J===n.R16F||J===n.R32F||J===n.RG16F||J===n.RG32F||J===n.RGBA16F||J===n.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function N(z,k){let X;return z?k===null||k===Pd||k===h_?X=n.DEPTH24_STENCIL8:k===_c?X=n.DEPTH32F_STENCIL8:k===d_&&(X=n.DEPTH24_STENCIL8,Ht("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Pd||k===h_?X=n.DEPTH_COMPONENT24:k===_c?X=n.DEPTH_COMPONENT32F:k===d_&&(X=n.DEPTH_COMPONENT16),X}function U(z,k){return g(z)===!0||z.isFramebufferTexture&&z.minFilter!==Ws&&z.minFilter!==lo?Math.log2(Math.max(k.width,k.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?k.mipmaps.length:1}function O(z){let k=z.target;k.removeEventListener("dispose",O),w(k),k.isVideoTexture&&u.delete(k)}function I(z){let k=z.target;k.removeEventListener("dispose",I),x(k)}function w(z){let k=i.get(z);if(k.__webglInit===void 0)return;let X=z.source,oe=h.get(X);if(oe){let he=oe[k.__cacheKey];he.usedTimes--,he.usedTimes===0&&y(z),Object.keys(oe).length===0&&h.delete(X)}i.remove(z)}function y(z){let k=i.get(z);n.deleteTexture(k.__webglTexture);let X=z.source,oe=h.get(X);delete oe[k.__cacheKey],o.memory.textures--}function x(z){let k=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(k.__webglFramebuffer[oe]))for(let he=0;he<k.__webglFramebuffer[oe].length;he++)n.deleteFramebuffer(k.__webglFramebuffer[oe][he]);else n.deleteFramebuffer(k.__webglFramebuffer[oe]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[oe])}else{if(Array.isArray(k.__webglFramebuffer))for(let oe=0;oe<k.__webglFramebuffer.length;oe++)n.deleteFramebuffer(k.__webglFramebuffer[oe]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let oe=0;oe<k.__webglColorRenderbuffer.length;oe++)k.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[oe]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}let X=z.textures;for(let oe=0,he=X.length;oe<he;oe++){let J=i.get(X[oe]);J.__webglTexture&&(n.deleteTexture(J.__webglTexture),o.memory.textures--),i.remove(X[oe])}i.remove(z)}let T=0;function M(){T=0}function C(){let z=T;return z>=r.maxTextures&&Ht("WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),T+=1,z}function re(z){let k=[];return k.push(z.wrapS),k.push(z.wrapT),k.push(z.wrapR||0),k.push(z.magFilter),k.push(z.minFilter),k.push(z.anisotropy),k.push(z.internalFormat),k.push(z.format),k.push(z.type),k.push(z.generateMipmaps),k.push(z.premultiplyAlpha),k.push(z.flipY),k.push(z.unpackAlignment),k.push(z.colorSpace),k.join()}function Q(z,k){let X=i.get(z);if(z.isVideoTexture&&Fe(z),z.isRenderTargetTexture===!1&&z.isExternalTexture!==!0&&z.version>0&&X.__version!==z.version){let oe=z.image;if(oe===null)Ht("WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)Ht("WebGLRenderer: Texture marked for update but image is incomplete");else{ue(X,z,k);return}}else z.isExternalTexture&&(X.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,X.__webglTexture,n.TEXTURE0+k)}function ae(z,k){let X=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&X.__version!==z.version){ue(X,z,k);return}else z.isExternalTexture&&(X.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,X.__webglTexture,n.TEXTURE0+k)}function fe(z,k){let X=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&X.__version!==z.version){ue(X,z,k);return}t.bindTexture(n.TEXTURE_3D,X.__webglTexture,n.TEXTURE0+k)}function se(z,k){let X=i.get(z);if(z.version>0&&X.__version!==z.version){me(X,z,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+k)}let we={[UA]:n.REPEAT,[hc]:n.CLAMP_TO_EDGE,[BA]:n.MIRRORED_REPEAT},Ae={[Ws]:n.NEAREST,[ote]:n.NEAREST_MIPMAP_NEAREST,[qb]:n.NEAREST_MIPMAP_LINEAR,[lo]:n.LINEAR,[wM]:n.LINEAR_MIPMAP_NEAREST,[Rd]:n.LINEAR_MIPMAP_LINEAR},Ze={[ute]:n.NEVER,[gte]:n.ALWAYS,[dte]:n.LESS,[i4]:n.LEQUAL,[hte]:n.EQUAL,[mte]:n.GEQUAL,[fte]:n.GREATER,[pte]:n.NOTEQUAL};function pt(z,k){if(k.type===_c&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===lo||k.magFilter===wM||k.magFilter===qb||k.magFilter===Rd||k.minFilter===lo||k.minFilter===wM||k.minFilter===qb||k.minFilter===Rd)&&Ht("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,we[k.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,we[k.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,we[k.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,Ae[k.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,Ae[k.minFilter]),k.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,Ze[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Ws||k.minFilter!==qb&&k.minFilter!==Rd||k.type===_c&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){let X=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function ct(z,k){let X=!1;z.__webglInit===void 0&&(z.__webglInit=!0,k.addEventListener("dispose",O));let oe=k.source,he=h.get(oe);he===void 0&&(he={},h.set(oe,he));let J=re(k);if(J!==z.__cacheKey){he[J]===void 0&&(he[J]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,X=!0),he[J].usedTimes++;let tt=he[z.__cacheKey];tt!==void 0&&(he[z.__cacheKey].usedTimes--,tt.usedTimes===0&&y(k)),z.__cacheKey=J,z.__webglTexture=he[J].texture}return X}function Bt(z,k,X){return Math.floor(Math.floor(z/X)/k)}function jt(z,k,X,oe){let J=z.updateRanges;if(J.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,k.width,k.height,X,oe,k.data);else{J.sort((_e,Me)=>_e.start-Me.start);let tt=0;for(let _e=1;_e<J.length;_e++){let Me=J[tt],xt=J[_e],gt=Me.start+Me.count,je=Bt(xt.start,k.width,4),kt=Bt(Me.start,k.width,4);xt.start<=gt+1&&je===kt&&Bt(xt.start+xt.count-1,k.width,4)===je?Me.count=Math.max(Me.count,xt.start+xt.count-Me.start):(++tt,J[tt]=xt)}J.length=tt+1;let Ue=n.getParameter(n.UNPACK_ROW_LENGTH),mt=n.getParameter(n.UNPACK_SKIP_PIXELS),rt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,k.width);for(let _e=0,Me=J.length;_e<Me;_e++){let xt=J[_e],gt=Math.floor(xt.start/4),je=Math.ceil(xt.count/4),kt=gt%k.width,j=Math.floor(gt/k.width),Be=je,ke=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,kt),n.pixelStorei(n.UNPACK_SKIP_ROWS,j),t.texSubImage2D(n.TEXTURE_2D,0,kt,j,Be,ke,X,oe,k.data)}z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ue),n.pixelStorei(n.UNPACK_SKIP_PIXELS,mt),n.pixelStorei(n.UNPACK_SKIP_ROWS,rt)}}function ue(z,k,X){let oe=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(oe=n.TEXTURE_3D);let he=ct(z,k),J=k.source;t.bindTexture(oe,z.__webglTexture,n.TEXTURE0+X);let tt=i.get(J);if(J.version!==tt.__version||he===!0){t.activeTexture(n.TEXTURE0+X);let Ue=Vn.getPrimaries(Vn.workingColorSpace),mt=k.colorSpace===jl?null:Vn.getPrimaries(k.colorSpace),rt=k.colorSpace===jl||Ue===mt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);let _e=b(k.image,!1,r.maxTextureSize);_e=Te(k,_e);let Me=s.convert(k.format,k.colorSpace),xt=s.convert(k.type),gt=P(k.internalFormat,Me,xt,k.colorSpace,k.isVideoTexture);pt(oe,k);let je,kt=k.mipmaps,j=k.isVideoTexture!==!0,Be=tt.__version===void 0||he===!0,ke=J.dataReady,Ne=U(k,_e);if(k.isDepthTexture)gt=N(k.format===f_,k.type),Be&&(j?t.texStorage2D(n.TEXTURE_2D,1,gt,_e.width,_e.height):t.texImage2D(n.TEXTURE_2D,0,gt,_e.width,_e.height,0,Me,xt,null));else if(k.isDataTexture)if(kt.length>0){j&&Be&&t.texStorage2D(n.TEXTURE_2D,Ne,gt,kt[0].width,kt[0].height);for(let ge=0,pe=kt.length;ge<pe;ge++)je=kt[ge],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,je.width,je.height,Me,xt,je.data):t.texImage2D(n.TEXTURE_2D,ge,gt,je.width,je.height,0,Me,xt,je.data);k.generateMipmaps=!1}else j?(Be&&t.texStorage2D(n.TEXTURE_2D,Ne,gt,_e.width,_e.height),ke&&jt(k,_e,Me,xt)):t.texImage2D(n.TEXTURE_2D,0,gt,_e.width,_e.height,0,Me,xt,_e.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){j&&Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,gt,kt[0].width,kt[0].height,_e.depth);for(let ge=0,pe=kt.length;ge<pe;ge++)if(je=kt[ge],k.format!==Lo)if(Me!==null)if(j){if(ke)if(k.layerUpdates.size>0){let qe=d4(je.width,je.height,k.format,k.type);for(let At of k.layerUpdates){let Un=je.data.subarray(At*qe/je.data.BYTES_PER_ELEMENT,(At+1)*qe/je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,At,je.width,je.height,1,Me,Un)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,je.width,je.height,_e.depth,Me,je.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ge,gt,je.width,je.height,_e.depth,0,je.data,0,0);else Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else j?ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,je.width,je.height,_e.depth,Me,xt,je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ge,gt,je.width,je.height,_e.depth,0,Me,xt,je.data)}else{j&&Be&&t.texStorage2D(n.TEXTURE_2D,Ne,gt,kt[0].width,kt[0].height);for(let ge=0,pe=kt.length;ge<pe;ge++)je=kt[ge],k.format!==Lo?Me!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,ge,0,0,je.width,je.height,Me,je.data):t.compressedTexImage2D(n.TEXTURE_2D,ge,gt,je.width,je.height,0,je.data):Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,je.width,je.height,Me,xt,je.data):t.texImage2D(n.TEXTURE_2D,ge,gt,je.width,je.height,0,Me,xt,je.data)}else if(k.isDataArrayTexture)if(j){if(Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,gt,_e.width,_e.height,_e.depth),ke)if(k.layerUpdates.size>0){let ge=d4(_e.width,_e.height,k.format,k.type);for(let pe of k.layerUpdates){let qe=_e.data.subarray(pe*ge/_e.data.BYTES_PER_ELEMENT,(pe+1)*ge/_e.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,pe,_e.width,_e.height,1,Me,xt,qe)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,Me,xt,_e.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,gt,_e.width,_e.height,_e.depth,0,Me,xt,_e.data);else if(k.isData3DTexture)j?(Be&&t.texStorage3D(n.TEXTURE_3D,Ne,gt,_e.width,_e.height,_e.depth),ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,Me,xt,_e.data)):t.texImage3D(n.TEXTURE_3D,0,gt,_e.width,_e.height,_e.depth,0,Me,xt,_e.data);else if(k.isFramebufferTexture){if(Be)if(j)t.texStorage2D(n.TEXTURE_2D,Ne,gt,_e.width,_e.height);else{let ge=_e.width,pe=_e.height;for(let qe=0;qe<Ne;qe++)t.texImage2D(n.TEXTURE_2D,qe,gt,ge,pe,0,Me,xt,null),ge>>=1,pe>>=1}}else if(kt.length>0){if(j&&Be){let ge=$e(kt[0]);t.texStorage2D(n.TEXTURE_2D,Ne,gt,ge.width,ge.height)}for(let ge=0,pe=kt.length;ge<pe;ge++)je=kt[ge],j?ke&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,Me,xt,je):t.texImage2D(n.TEXTURE_2D,ge,gt,Me,xt,je);k.generateMipmaps=!1}else if(j){if(Be){let ge=$e(_e);t.texStorage2D(n.TEXTURE_2D,Ne,gt,ge.width,ge.height)}ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Me,xt,_e)}else t.texImage2D(n.TEXTURE_2D,0,gt,Me,xt,_e);g(k)&&v(oe),tt.__version=J.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function me(z,k,X){if(k.image.length!==6)return;let oe=ct(z,k),he=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+X);let J=i.get(he);if(he.version!==J.__version||oe===!0){t.activeTexture(n.TEXTURE0+X);let tt=Vn.getPrimaries(Vn.workingColorSpace),Ue=k.colorSpace===jl?null:Vn.getPrimaries(k.colorSpace),mt=k.colorSpace===jl||tt===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,mt);let rt=k.isCompressedTexture||k.image[0].isCompressedTexture,_e=k.image[0]&&k.image[0].isDataTexture,Me=[];for(let pe=0;pe<6;pe++)!rt&&!_e?Me[pe]=b(k.image[pe],!0,r.maxCubemapSize):Me[pe]=_e?k.image[pe].image:k.image[pe],Me[pe]=Te(k,Me[pe]);let xt=Me[0],gt=s.convert(k.format,k.colorSpace),je=s.convert(k.type),kt=P(k.internalFormat,gt,je,k.colorSpace),j=k.isVideoTexture!==!0,Be=J.__version===void 0||oe===!0,ke=he.dataReady,Ne=U(k,xt);pt(n.TEXTURE_CUBE_MAP,k);let ge;if(rt){j&&Be&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,kt,xt.width,xt.height);for(let pe=0;pe<6;pe++){ge=Me[pe].mipmaps;for(let qe=0;qe<ge.length;qe++){let At=ge[qe];k.format!==Lo?gt!==null?j?ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe,0,0,At.width,At.height,gt,At.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe,kt,At.width,At.height,0,At.data):Ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe,0,0,At.width,At.height,gt,je,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe,kt,At.width,At.height,0,gt,je,At.data)}}}else{if(ge=k.mipmaps,j&&Be){ge.length>0&&Ne++;let pe=$e(Me[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,kt,pe.width,pe.height)}for(let pe=0;pe<6;pe++)if(_e){j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Me[pe].width,Me[pe].height,gt,je,Me[pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,kt,Me[pe].width,Me[pe].height,0,gt,je,Me[pe].data);for(let qe=0;qe<ge.length;qe++){let Un=ge[qe].image[pe].image;j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe+1,0,0,Un.width,Un.height,gt,je,Un.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe+1,kt,Un.width,Un.height,0,gt,je,Un.data)}}else{j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,gt,je,Me[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,kt,gt,je,Me[pe]);for(let qe=0;qe<ge.length;qe++){let At=ge[qe];j?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe+1,0,0,gt,je,At.image[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,qe+1,kt,gt,je,At.image[pe])}}}g(k)&&v(n.TEXTURE_CUBE_MAP),J.__version=he.version,k.onUpdate&&k.onUpdate(k)}z.__version=k.version}function Qe(z,k,X,oe,he,J){let tt=s.convert(X.format,X.colorSpace),Ue=s.convert(X.type),mt=P(X.internalFormat,tt,Ue,X.colorSpace),rt=i.get(k),_e=i.get(X);if(_e.__renderTarget=k,!rt.__hasExternalTextures){let Me=Math.max(1,k.width>>J),xt=Math.max(1,k.height>>J);he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?t.texImage3D(he,J,mt,Me,xt,k.depth,0,tt,Ue,null):t.texImage2D(he,J,mt,Me,xt,0,tt,Ue,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,he,_e.__webglTexture,0,Pe(k)):(he===n.TEXTURE_2D||he>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,he,_e.__webglTexture,J),t.bindFramebuffer(n.FRAMEBUFFER,null)}function _t(z,k,X){if(n.bindRenderbuffer(n.RENDERBUFFER,z),k.depthBuffer){let oe=k.depthTexture,he=oe&&oe.isDepthTexture?oe.type:null,J=N(k.stencilBuffer,he),tt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=Pe(k);xe(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,J,k.width,k.height):X?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,J,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,J,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,tt,n.RENDERBUFFER,z)}else{let oe=k.textures;for(let he=0;he<oe.length;he++){let J=oe[he],tt=s.convert(J.format,J.colorSpace),Ue=s.convert(J.type),mt=P(J.internalFormat,tt,Ue,J.colorSpace),rt=Pe(k);X&&xe(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,mt,k.width,k.height):xe(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,rt,mt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,mt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function it(z,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let oe=i.get(k.depthTexture);oe.__renderTarget=k,(!oe.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Q(k.depthTexture,0);let he=oe.__webglTexture,J=Pe(k);if(k.depthTexture.format===e_)xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0);else if(k.depthTexture.format===f_)xe(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0,J):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function Gt(z){let k=i.get(z),X=z.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==z.depthTexture){let oe=z.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),oe){let he=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,oe.removeEventListener("dispose",he)};oe.addEventListener("dispose",he),k.__depthDisposeCallback=he}k.__boundDepthTexture=oe}if(z.depthTexture&&!k.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");let oe=z.texture.mipmaps;oe&&oe.length>0?it(k.__webglFramebuffer[0],z):it(k.__webglFramebuffer,z)}else if(X){k.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[oe]),k.__webglDepthbuffer[oe]===void 0)k.__webglDepthbuffer[oe]=n.createRenderbuffer(),_t(k.__webglDepthbuffer[oe],z,!1);else{let he=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,J=k.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,J),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,J)}}else{let oe=z.texture.mipmaps;if(oe&&oe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),_t(k.__webglDepthbuffer,z,!1);else{let he=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,J=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,J),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,J)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Sn(z,k,X){let oe=i.get(z);k!==void 0&&Qe(oe.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),X!==void 0&&Gt(z)}function Tt(z){let k=z.texture,X=i.get(z),oe=i.get(k);z.addEventListener("dispose",I);let he=z.textures,J=z.isWebGLCubeRenderTarget===!0,tt=he.length>1;if(tt||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=k.version,o.memory.textures++),J){X.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(k.mipmaps&&k.mipmaps.length>0){X.__webglFramebuffer[Ue]=[];for(let mt=0;mt<k.mipmaps.length;mt++)X.__webglFramebuffer[Ue][mt]=n.createFramebuffer()}else X.__webglFramebuffer[Ue]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){X.__webglFramebuffer=[];for(let Ue=0;Ue<k.mipmaps.length;Ue++)X.__webglFramebuffer[Ue]=n.createFramebuffer()}else X.__webglFramebuffer=n.createFramebuffer();if(tt)for(let Ue=0,mt=he.length;Ue<mt;Ue++){let rt=i.get(he[Ue]);rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture(),o.memory.textures++)}if(z.samples>0&&xe(z)===!1){X.__webglMultisampledFramebuffer=n.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let Ue=0;Ue<he.length;Ue++){let mt=he[Ue];X.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,X.__webglColorRenderbuffer[Ue]);let rt=s.convert(mt.format,mt.colorSpace),_e=s.convert(mt.type),Me=P(mt.internalFormat,rt,_e,mt.colorSpace,z.isXRRenderTarget===!0),xt=Pe(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Me,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,X.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(X.__webglDepthRenderbuffer=n.createRenderbuffer(),_t(X.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(J){t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),pt(n.TEXTURE_CUBE_MAP,k);for(let Ue=0;Ue<6;Ue++)if(k.mipmaps&&k.mipmaps.length>0)for(let mt=0;mt<k.mipmaps.length;mt++)Qe(X.__webglFramebuffer[Ue][mt],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,mt);else Qe(X.__webglFramebuffer[Ue],z,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);g(k)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(tt){for(let Ue=0,mt=he.length;Ue<mt;Ue++){let rt=he[Ue],_e=i.get(rt),Me=n.TEXTURE_2D;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Me=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Me,_e.__webglTexture),pt(Me,rt),Qe(X.__webglFramebuffer,z,rt,n.COLOR_ATTACHMENT0+Ue,Me,0),g(rt)&&v(Me)}t.unbindTexture()}else{let Ue=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Ue=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ue,oe.__webglTexture),pt(Ue,k),k.mipmaps&&k.mipmaps.length>0)for(let mt=0;mt<k.mipmaps.length;mt++)Qe(X.__webglFramebuffer[mt],z,k,n.COLOR_ATTACHMENT0,Ue,mt);else Qe(X.__webglFramebuffer,z,k,n.COLOR_ATTACHMENT0,Ue,0);g(k)&&v(Ue),t.unbindTexture()}z.depthBuffer&&Gt(z)}function ye(z){let k=z.textures;for(let X=0,oe=k.length;X<oe;X++){let he=k[X];if(g(he)){let J=R(z),tt=i.get(he).__webglTexture;t.bindTexture(J,tt),v(J),t.unbindTexture()}}}let B=[],be=[];function Se(z){if(z.samples>0){if(xe(z)===!1){let k=z.textures,X=z.width,oe=z.height,he=n.COLOR_BUFFER_BIT,J=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,tt=i.get(z),Ue=k.length>1;if(Ue)for(let rt=0;rt<k.length;rt++)t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,tt.__webglMultisampledFramebuffer);let mt=z.texture.mipmaps;mt&&mt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglFramebuffer);for(let rt=0;rt<k.length;rt++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(he|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(he|=n.STENCIL_BUFFER_BIT)),Ue){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,tt.__webglColorRenderbuffer[rt]);let _e=i.get(k[rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_e,0)}n.blitFramebuffer(0,0,X,oe,0,0,X,oe,he,n.NEAREST),c===!0&&(B.length=0,be.length=0,B.push(n.COLOR_ATTACHMENT0+rt),z.depthBuffer&&z.resolveDepthBuffer===!1&&(B.push(J),be.push(J),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,be)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,B))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let rt=0;rt<k.length;rt++){t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,tt.__webglColorRenderbuffer[rt]);let _e=i.get(k[rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,_e,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&c){let k=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function Pe(z){return Math.min(r.maxSamples,z.samples)}function xe(z){let k=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Fe(z){let k=o.render.frame;u.get(z)!==k&&(u.set(z,k),z.update())}function Te(z,k){let X=z.colorSpace,oe=z.format,he=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||X!==Df&&X!==jl&&(Vn.getTransfer(X)===ni?(oe!==Lo||he!==va)&&Ht("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):dn("WebGLTextures: Unsupported texture color space:",X)),k}function $e(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(l.width=z.naturalWidth||z.width,l.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(l.width=z.displayWidth,l.height=z.displayHeight):(l.width=z.width,l.height=z.height),l}this.allocateTextureUnit=C,this.resetTextureUnits=M,this.setTexture2D=Q,this.setTexture2DArray=ae,this.setTexture3D=fe,this.setTextureCube=se,this.rebindTextures=Sn,this.setupRenderTarget=Tt,this.updateRenderTargetMipmap=ye,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=Gt,this.setupFrameBufferTexture=Qe,this.useMultisampledRTT=xe}function Bke(n,e){function t(i,r=jl){let s,o=Vn.getTransfer(r);if(i===va)return n.UNSIGNED_BYTE;if(i===IM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===SM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===QB)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===JB)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===XB)return n.BYTE;if(i===YB)return n.SHORT;if(i===d_)return n.UNSIGNED_SHORT;if(i===EM)return n.INT;if(i===Pd)return n.UNSIGNED_INT;if(i===_c)return n.FLOAT;if(i===Ff)return n.HALF_FLOAT;if(i===ZB)return n.ALPHA;if(i===e4)return n.RGB;if(i===Lo)return n.RGBA;if(i===e_)return n.DEPTH_COMPONENT;if(i===f_)return n.DEPTH_STENCIL;if(i===t4)return n.RED;if(i===TM)return n.RED_INTEGER;if(i===CM)return n.RG;if(i===AM)return n.RG_INTEGER;if(i===MM)return n.RGBA_INTEGER;if(i===Kb||i===Xb||i===Yb||i===Qb)if(o===ni)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Kb)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Xb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Yb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Qb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Kb)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Xb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Yb)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Qb)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===DM||i===RM||i===PM||i===kM)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===DM)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===RM)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===PM)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===kM)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===NM||i===OM||i===LM)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===NM||i===OM)return o===ni?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===LM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===FM||i===VM||i===UM||i===BM||i===zM||i===HM||i===jM||i===GM||i===WM||i===$M||i===qM||i===KM||i===XM||i===YM)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===FM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===VM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===UM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===BM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===zM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===HM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===jM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===GM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===WM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===$M)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===qM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===KM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===XM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===YM)return o===ni?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===QM||i===JM||i===ZM)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===QM)return o===ni?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===JM)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ZM)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===eD||i===tD||i===nD||i===iD)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===eD)return s.COMPRESSED_RED_RGTC1_EXT;if(i===tD)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===nD)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===iD)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===h_?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var zke=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Hke=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,E4=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){let i=new Rb(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Oo({vertexShader:zke,fragmentShader:Hke,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ho(new zb(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},I4=class extends Ul{constructor(e,t){super();let i=this,r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,p=null,_=null,b=typeof XRWebGLBinding<"u",g=new E4,v={},R=t.getContextAttributes(),P=null,N=null,U=[],O=[],I=new Xe,w=null,y=new Hr;y.viewport=new ti;let x=new Hr;x.viewport=new ti;let T=[y,x],M=new dM,C=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let me=U[ue];return me===void 0&&(me=new s_,U[ue]=me),me.getTargetRaySpace()},this.getControllerGrip=function(ue){let me=U[ue];return me===void 0&&(me=new s_,U[ue]=me),me.getGripSpace()},this.getHand=function(ue){let me=U[ue];return me===void 0&&(me=new s_,U[ue]=me),me.getHandSpace()};function Q(ue){let me=O.indexOf(ue.inputSource);if(me===-1)return;let Qe=U[me];Qe!==void 0&&(Qe.update(ue.inputSource,ue.frame,l||o),Qe.dispatchEvent({type:ue.type,data:ue.inputSource}))}function ae(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",ae),r.removeEventListener("inputsourceschange",fe);for(let ue=0;ue<U.length;ue++){let me=O[ue];me!==null&&(O[ue]=null,U[ue].disconnect(me))}C=null,re=null,g.reset();for(let ue in v)delete v[ue];e.setRenderTarget(P),p=null,h=null,d=null,r=null,N=null,jt.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,i.isPresenting===!0&&Ht("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,i.isPresenting===!0&&Ht("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(ue){l=ue},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d===null&&b&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(ue){if(r=ue,r!==null){if(P=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",ae),r.addEventListener("inputsourceschange",fe),R.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(I),b&&"createProjectionLayer"in XRWebGLBinding.prototype){let Qe=null,_t=null,it=null;R.depth&&(it=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Qe=R.stencil?f_:e_,_t=R.stencil?h_:Pd);let Gt={colorFormat:t.RGBA8,depthFormat:it,scaleFactor:s};d=this.getBinding(),h=d.createProjectionLayer(Gt),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),N=new fc(h.textureWidth,h.textureHeight,{format:Lo,type:va,depthTexture:new Db(h.textureWidth,h.textureHeight,_t,void 0,void 0,void 0,void 0,void 0,void 0,Qe),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let Qe={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,Qe),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),N=new fc(p.framebufferWidth,p.framebufferHeight,{format:Lo,type:va,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await r.requestReferenceSpace(a),jt.setContext(r),jt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function fe(ue){for(let me=0;me<ue.removed.length;me++){let Qe=ue.removed[me],_t=O.indexOf(Qe);_t>=0&&(O[_t]=null,U[_t].disconnect(Qe))}for(let me=0;me<ue.added.length;me++){let Qe=ue.added[me],_t=O.indexOf(Qe);if(_t===-1){for(let Gt=0;Gt<U.length;Gt++)if(Gt>=O.length){O.push(Qe),_t=Gt;break}else if(O[Gt]===null){O[Gt]=Qe,_t=Gt;break}if(_t===-1)break}let it=U[_t];it&&it.connect(Qe)}}let se=new K,we=new K;function Ae(ue,me,Qe){se.setFromMatrixPosition(me.matrixWorld),we.setFromMatrixPosition(Qe.matrixWorld);let _t=se.distanceTo(we),it=me.projectionMatrix.elements,Gt=Qe.projectionMatrix.elements,Sn=it[14]/(it[10]-1),Tt=it[14]/(it[10]+1),ye=(it[9]+1)/it[5],B=(it[9]-1)/it[5],be=(it[8]-1)/it[0],Se=(Gt[8]+1)/Gt[0],Pe=Sn*be,xe=Sn*Se,Fe=_t/(-be+Se),Te=Fe*-be;if(me.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Te),ue.translateZ(Fe),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),it[10]===-1)ue.projectionMatrix.copy(me.projectionMatrix),ue.projectionMatrixInverse.copy(me.projectionMatrixInverse);else{let $e=Sn+Fe,z=Tt+Fe,k=Pe-Te,X=xe+(_t-Te),oe=ye*Tt/z*$e,he=B*Tt/z*$e;ue.projectionMatrix.makePerspective(k,X,oe,he,$e,z),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function Ze(ue,me){me===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(me.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(r===null)return;let me=ue.near,Qe=ue.far;g.texture!==null&&(g.depthNear>0&&(me=g.depthNear),g.depthFar>0&&(Qe=g.depthFar)),M.near=x.near=y.near=me,M.far=x.far=y.far=Qe,(C!==M.near||re!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,re=M.far),M.layers.mask=ue.layers.mask|6,y.layers.mask=M.layers.mask&3,x.layers.mask=M.layers.mask&5;let _t=ue.parent,it=M.cameras;Ze(M,_t);for(let Gt=0;Gt<it.length;Gt++)Ze(it[Gt],_t);it.length===2?Ae(M,y,x):M.projectionMatrix.copy(y.projectionMatrix),pt(ue,M,_t)};function pt(ue,me,Qe){Qe===null?ue.matrix.copy(me.matrixWorld):(ue.matrix.copy(Qe.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(me.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(me.projectionMatrix),ue.projectionMatrixInverse.copy(me.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=HA*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(ue){c=ue,h!==null&&(h.fixedFoveation=ue),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ue)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(M)},this.getCameraTexture=function(ue){return v[ue]};let ct=null;function Bt(ue,me){if(u=me.getViewerPose(l||o),_=me,u!==null){let Qe=u.views;p!==null&&(e.setRenderTargetFramebuffer(N,p.framebuffer),e.setRenderTarget(N));let _t=!1;Qe.length!==M.cameras.length&&(M.cameras.length=0,_t=!0);for(let Tt=0;Tt<Qe.length;Tt++){let ye=Qe[Tt],B=null;if(p!==null)B=p.getViewport(ye);else{let Se=d.getViewSubImage(h,ye);B=Se.viewport,Tt===0&&(e.setRenderTargetTextures(N,Se.colorTexture,Se.depthStencilTexture),e.setRenderTarget(N))}let be=T[Tt];be===void 0&&(be=new Hr,be.layers.enable(Tt),be.viewport=new ti,T[Tt]=be),be.matrix.fromArray(ye.transform.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale),be.projectionMatrix.fromArray(ye.projectionMatrix),be.projectionMatrixInverse.copy(be.projectionMatrix).invert(),be.viewport.set(B.x,B.y,B.width,B.height),Tt===0&&(M.matrix.copy(be.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),_t===!0&&M.cameras.push(be)}let it=r.enabledFeatures;if(it&&it.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&b){d=i.getBinding();let Tt=d.getDepthInformation(Qe[0]);Tt&&Tt.isValid&&Tt.texture&&g.init(Tt,r.renderState)}if(it&&it.includes("camera-access")&&b){e.state.unbindTexture(),d=i.getBinding();for(let Tt=0;Tt<Qe.length;Tt++){let ye=Qe[Tt].camera;if(ye){let B=v[ye];B||(B=new Rb,v[ye]=B);let be=d.getCameraImage(ye);B.sourceTexture=be}}}}for(let Qe=0;Qe<U.length;Qe++){let _t=O[Qe],it=U[Qe];_t!==null&&it!==void 0&&it.update(_t,me,l||o)}ct&&ct(ue,me),me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:me}),_=null}let jt=new qte;jt.setAnimationLoop(Bt),this.setAnimationLoop=function(ue){ct=ue},this.dispose=function(){}}},Bf=new Ad,jke=new Ii;function Gke(n,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function i(g,v){v.color.getRGB(g.fogColor.value,a4(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,R,P,N){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),d(g,v)):v.isMeshPhongMaterial?(s(g,v),u(g,v)):v.isMeshStandardMaterial?(s(g,v),h(g,v),v.isMeshPhysicalMaterial&&p(g,v,N)):v.isMeshMatcapMaterial?(s(g,v),_(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),b(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(o(g,v),v.isLineDashedMaterial&&a(g,v)):v.isPointsMaterial?c(g,v,R,P):v.isSpriteMaterial?l(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===ys&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===ys&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let R=e.get(v),P=R.envMap,N=R.envMapRotation;P&&(g.envMap.value=P,Bf.copy(N),Bf.x*=-1,Bf.y*=-1,Bf.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Bf.y*=-1,Bf.z*=-1),g.envMapRotation.value.setFromMatrix4(jke.makeRotationFromEuler(Bf)),g.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,g.lightMapTransform)),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function o(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function a(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function c(g,v,R,P){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*R,g.scale.value=P*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function l(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function d(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function h(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),v.envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function p(g,v,R){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===ys&&g.clearcoatNormalScale.value.negate())),v.dispersion>0&&(g.dispersion.value=v.dispersion),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=R.texture,g.transmissionSamplerSize.value.set(R.width,R.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function _(g,v){v.matcap&&(g.matcap.value=v.matcap)}function b(g,v){let R=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(R.matrixWorld),g.nearDistance.value=R.shadow.camera.near,g.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Wke(n,e,t,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,P){let N=P.program;i.uniformBlockBinding(R,N)}function l(R,P){let N=r[R.id];N===void 0&&(_(R),N=u(R),r[R.id]=N,R.addEventListener("dispose",g));let U=P.program;i.updateUBOMapping(R,U);let O=e.render.frame;s[R.id]!==O&&(h(R),s[R.id]=O)}function u(R){let P=d();R.__bindingPointIndex=P;let N=n.createBuffer(),U=R.__size,O=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,N),n.bufferData(n.UNIFORM_BUFFER,U,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,P,N),N}function d(){for(let R=0;R<a;R++)if(o.indexOf(R)===-1)return o.push(R),R;return dn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(R){let P=r[R.id],N=R.uniforms,U=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,P);for(let O=0,I=N.length;O<I;O++){let w=Array.isArray(N[O])?N[O]:[N[O]];for(let y=0,x=w.length;y<x;y++){let T=w[y];if(p(T,O,y,U)===!0){let M=T.__offset,C=Array.isArray(T.value)?T.value:[T.value],re=0;for(let Q=0;Q<C.length;Q++){let ae=C[Q],fe=b(ae);typeof ae=="number"||typeof ae=="boolean"?(T.__data[0]=ae,n.bufferSubData(n.UNIFORM_BUFFER,M+re,T.__data)):ae.isMatrix3?(T.__data[0]=ae.elements[0],T.__data[1]=ae.elements[1],T.__data[2]=ae.elements[2],T.__data[3]=0,T.__data[4]=ae.elements[3],T.__data[5]=ae.elements[4],T.__data[6]=ae.elements[5],T.__data[7]=0,T.__data[8]=ae.elements[6],T.__data[9]=ae.elements[7],T.__data[10]=ae.elements[8],T.__data[11]=0):(ae.toArray(T.__data,re),re+=fe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,M,T.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(R,P,N,U){let O=R.value,I=P+"_"+N;if(U[I]===void 0)return typeof O=="number"||typeof O=="boolean"?U[I]=O:U[I]=O.clone(),!0;{let w=U[I];if(typeof O=="number"||typeof O=="boolean"){if(w!==O)return U[I]=O,!0}else if(w.equals(O)===!1)return w.copy(O),!0}return!1}function _(R){let P=R.uniforms,N=0,U=16;for(let I=0,w=P.length;I<w;I++){let y=Array.isArray(P[I])?P[I]:[P[I]];for(let x=0,T=y.length;x<T;x++){let M=y[x],C=Array.isArray(M.value)?M.value:[M.value];for(let re=0,Q=C.length;re<Q;re++){let ae=C[re],fe=b(ae),se=N%U,we=se%fe.boundary,Ae=se+we;N+=we,Ae!==0&&U-Ae<fe.storage&&(N+=U-Ae),M.__data=new Float32Array(fe.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=N,N+=fe.storage}}}let O=N%U;return O>0&&(N+=U-O),R.__size=N,R.__cache={},this}function b(R){let P={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(P.boundary=4,P.storage=4):R.isVector2?(P.boundary=8,P.storage=8):R.isVector3||R.isColor?(P.boundary=16,P.storage=12):R.isVector4?(P.boundary=16,P.storage=16):R.isMatrix3?(P.boundary=48,P.storage=48):R.isMatrix4?(P.boundary=64,P.storage=64):R.isTexture?Ht("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Ht("WebGLRenderer: Unsupported uniform value type.",R),P}function g(R){let P=R.target;P.removeEventListener("dispose",g);let N=o.indexOf(P.__bindingPointIndex);o.splice(N,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function v(){for(let R in r)n.deleteBuffer(r[R]);o=[],r={},s={}}return{bind:c,update:l,dispose:v}}var $ke=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]),$l=null;function qke(){return $l===null&&($l=new KA($ke,32,32,CM,Ff),$l.minFilter=lo,$l.magFilter=lo,$l.wrapS=hc,$l.wrapT=hc,$l.generateMipmaps=!1,$l.needsUpdate=!0),$l}var aD=class{constructor(e={}){let{canvas:t=_te(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;let _=new Set([MM,AM,TM]),b=new Set([va,Pd,d_,h_,IM,SM]),g=new Uint32Array(4),v=new Int32Array(4),R=null,P=null,N=[],U=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Hl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let O=this,I=!1;this._outputColorSpace=ao;let w=0,y=0,x=null,T=-1,M=null,C=new ti,re=new ti,Q=null,ae=new hn(0),fe=0,se=t.width,we=t.height,Ae=1,Ze=null,pt=null,ct=new ti(0,0,se,we),Bt=new ti(0,0,se,we),jt=!1,ue=new o_,me=!1,Qe=!1,_t=new Ii,it=new K,Gt=new ti,Sn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Tt=!1;function ye(){return x===null?Ae:1}let B=i;function be(F,G){return t.getContext(F,G)}try{let F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${"181"}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",pe,!1),t.addEventListener("webglcontextcreationerror",qe,!1),B===null){let G="webgl2";if(B=be(G,F),B===null)throw be(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw F("WebGLRenderer: "+F.message),F}let Se,Pe,xe,Fe,Te,$e,z,k,X,oe,he,J,tt,Ue,mt,rt,_e,Me,xt,gt,je,kt,j,Be;function ke(){Se=new lPe(B),Se.init(),kt=new Bke(B,Se),Pe=new ePe(B,Se,e,kt),xe=new Vke(B,Se),Pe.reversedDepthBuffer&&h&&xe.buffers.depth.setReversed(!0),Fe=new hPe(B),Te=new Ske,$e=new Uke(B,Se,xe,Te,Pe,kt,Fe),z=new nPe(O),k=new cPe(O),X=new gDe(B),j=new J1e(B,X),oe=new uPe(B,X,Fe,j),he=new pPe(B,oe,X,Fe),xt=new fPe(B,Pe,$e),rt=new tPe(Te),J=new Ike(O,z,k,Se,Pe,j,rt),tt=new Gke(O,Te),Ue=new Cke,mt=new kke(Se),Me=new Q1e(O,z,k,xe,he,p,c),_e=new Lke(O,he,Pe),Be=new Wke(B,Fe,Pe,xe),gt=new Z1e(B,Se,Fe),je=new dPe(B,Se,Fe),Fe.programs=J.programs,O.capabilities=Pe,O.extensions=Se,O.properties=Te,O.renderLists=Ue,O.shadowMap=_e,O.state=xe,O.info=Fe}ke();let Ne=new I4(O,B);this.xr=Ne,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let F=Se.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){let F=Se.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(F){F!==void 0&&(Ae=F,this.setSize(se,we,!1))},this.getSize=function(F){return F.set(se,we)},this.setSize=function(F,G,Z=!0){if(Ne.isPresenting){Ht("WebGLRenderer: Can't change size while VR device is presenting.");return}se=F,we=G,t.width=Math.floor(F*Ae),t.height=Math.floor(G*Ae),Z===!0&&(t.style.width=F+"px",t.style.height=G+"px"),this.setViewport(0,0,F,G)},this.getDrawingBufferSize=function(F){return F.set(se*Ae,we*Ae).floor()},this.setDrawingBufferSize=function(F,G,Z){se=F,we=G,Ae=Z,t.width=Math.floor(F*Z),t.height=Math.floor(G*Z),this.setViewport(0,0,F,G)},this.getCurrentViewport=function(F){return F.copy(C)},this.getViewport=function(F){return F.copy(ct)},this.setViewport=function(F,G,Z,ne){F.isVector4?ct.set(F.x,F.y,F.z,F.w):ct.set(F,G,Z,ne),xe.viewport(C.copy(ct).multiplyScalar(Ae).round())},this.getScissor=function(F){return F.copy(Bt)},this.setScissor=function(F,G,Z,ne){F.isVector4?Bt.set(F.x,F.y,F.z,F.w):Bt.set(F,G,Z,ne),xe.scissor(re.copy(Bt).multiplyScalar(Ae).round())},this.getScissorTest=function(){return jt},this.setScissorTest=function(F){xe.setScissorTest(jt=F)},this.setOpaqueSort=function(F){Ze=F},this.setTransparentSort=function(F){pt=F},this.getClearColor=function(F){return F.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor(...arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha(...arguments)},this.clear=function(F=!0,G=!0,Z=!0){let ne=0;if(F){let q=!1;if(x!==null){let De=x.texture.format;q=_.has(De)}if(q){let De=x.texture.type,He=b.has(De),Je=Me.getClearColor(),Ye=Me.getClearAlpha(),wt=Je.r,Mt=Je.g,dt=Je.b;He?(g[0]=wt,g[1]=Mt,g[2]=dt,g[3]=Ye,B.clearBufferuiv(B.COLOR,0,g)):(v[0]=wt,v[1]=Mt,v[2]=dt,v[3]=Ye,B.clearBufferiv(B.COLOR,0,v))}else ne|=B.COLOR_BUFFER_BIT}G&&(ne|=B.DEPTH_BUFFER_BIT),Z&&(ne|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",pe,!1),t.removeEventListener("webglcontextcreationerror",qe,!1),Me.dispose(),Ue.dispose(),mt.dispose(),Te.dispose(),z.dispose(),k.dispose(),he.dispose(),j.dispose(),Be.dispose(),J.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",ba),Ne.removeEventListener("sessionend",Fo),Gr.stop()};function ge(F){F.preventDefault(),o4("WebGLRenderer: Context Lost."),I=!0}function pe(){o4("WebGLRenderer: Context Restored."),I=!1;let F=Fe.autoReset,G=_e.enabled,Z=_e.autoUpdate,ne=_e.needsUpdate,q=_e.type;ke(),Fe.autoReset=F,_e.enabled=G,_e.autoUpdate=Z,_e.needsUpdate=ne,_e.type=q}function qe(F){dn("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function At(F){let G=F.target;G.removeEventListener("dispose",At),Un(G)}function Un(F){kn(F),Te.remove(F)}function kn(F){let G=Te.get(F).programs;G!==void 0&&(G.forEach(function(Z){J.releaseProgram(Z)}),F.isShaderMaterial&&J.releaseShaderCache(F))}this.renderBufferDirect=function(F,G,Z,ne,q,De){G===null&&(G=Sn);let He=q.isMesh&&q.matrixWorld.determinant()<0,Je=xc(F,G,Z,ne,q);xe.setMaterial(ne,He);let Ye=Z.index,wt=1;if(ne.wireframe===!0){if(Ye=oe.getWireframeAttribute(Z),Ye===void 0)return;wt=2}let Mt=Z.drawRange,dt=Z.attributes.position,en=Mt.start*wt,Tn=(Mt.start+Mt.count)*wt;De!==null&&(en=Math.max(en,De.start*wt),Tn=Math.min(Tn,(De.start+De.count)*wt)),Ye!==null?(en=Math.max(en,0),Tn=Math.min(Tn,Ye.count)):dt!=null&&(en=Math.max(en,0),Tn=Math.min(Tn,dt.count));let wn=Tn-en;if(wn<0||wn===1/0)return;j.setup(q,ne,Je,Z,Ye);let _n,yn=gt;if(Ye!==null&&(_n=X.get(Ye),yn=je,yn.setIndex(_n)),q.isMesh)ne.wireframe===!0?(xe.setLineWidth(ne.wireframeLinewidth*ye()),yn.setMode(B.LINES)):yn.setMode(B.TRIANGLES);else if(q.isLine){let ht=ne.linewidth;ht===void 0&&(ht=1),xe.setLineWidth(ht*ye()),q.isLineSegments?yn.setMode(B.LINES):q.isLineLoop?yn.setMode(B.LINE_LOOP):yn.setMode(B.LINE_STRIP)}else q.isPoints?yn.setMode(B.POINTS):q.isSprite&&yn.setMode(B.TRIANGLES);if(q.isBatchedMesh)if(q._multiDrawInstances!==null)n_("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount,q._multiDrawInstances);else if(Se.get("WEBGL_multi_draw"))yn.renderMultiDraw(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount);else{let ht=q._multiDrawStarts,ei=q._multiDrawCounts,ut=q._multiDrawCount,Fi=Ye?X.get(Ye).bytesPerElement:1,vs=Te.get(ne).currentProgram.getUniforms();for(let ai=0;ai<ut;ai++)vs.setValue(B,"_gl_DrawID",ai),yn.render(ht[ai]/Fi,ei[ai])}else if(q.isInstancedMesh)yn.renderInstances(en,wn,q.count);else if(Z.isInstancedBufferGeometry){let ht=Z._maxInstanceCount!==void 0?Z._maxInstanceCount:1/0,ei=Math.min(Z.instanceCount,ht);yn.renderInstances(en,wn,ei)}else yn.render(en,wn)};function Si(F,G,Z){F.transparent===!0&&F.side===mc&&F.forceSinglePass===!1?(F.side=ys,F.needsUpdate=!0,mo(F,G,Z),F.side=Vl,F.needsUpdate=!0,mo(F,G,Z),F.side=mc):mo(F,G,Z)}this.compile=function(F,G,Z=null){Z===null&&(Z=F),P=mt.get(Z),P.init(G),U.push(P),Z.traverseVisible(function(q){q.isLight&&q.layers.test(G.layers)&&(P.pushLight(q),q.castShadow&&P.pushShadow(q))}),F!==Z&&F.traverseVisible(function(q){q.isLight&&q.layers.test(G.layers)&&(P.pushLight(q),q.castShadow&&P.pushShadow(q))}),P.setupLights();let ne=new Set;return F.traverse(function(q){if(!(q.isMesh||q.isPoints||q.isLine||q.isSprite))return;let De=q.material;if(De)if(Array.isArray(De))for(let He=0;He<De.length;He++){let Je=De[He];Si(Je,Z,q),ne.add(Je)}else Si(De,Z,q),ne.add(De)}),P=U.pop(),ne},this.compileAsync=function(F,G,Z=null){let ne=this.compile(F,G,Z);return new Promise(q=>{function De(){if(ne.forEach(function(He){Te.get(He).currentProgram.isReady()&&ne.delete(He)}),ne.size===0){q(F);return}setTimeout(De,10)}Se.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let jr=null;function dr(F){jr&&jr(F)}function ba(){Gr.stop()}function Fo(){Gr.start()}let Gr=new qte;Gr.setAnimationLoop(dr),typeof self<"u"&&Gr.setContext(self),this.setAnimationLoop=function(F){jr=F,Ne.setAnimationLoop(F),F===null?Gr.stop():Gr.start()},Ne.addEventListener("sessionstart",ba),Ne.addEventListener("sessionend",Fo),this.render=function(F,G){if(G!==void 0&&G.isCamera!==!0){dn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),G.parent===null&&G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(G),G=Ne.getCamera()),F.isScene===!0&&F.onBeforeRender(O,F,G,x),P=mt.get(F,U.length),P.init(G),U.push(P),_t.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),ue.setFromProjectionMatrix(_t,ya,G.reversedDepth),Qe=this.localClippingEnabled,me=rt.init(this.clippingPlanes,Qe),R=Ue.get(F,N.length),R.init(),N.push(R),Ne.enabled===!0&&Ne.isPresenting===!0){let De=O.xr.getDepthSensingMesh();De!==null&&vc(De,G,-1/0,O.sortObjects)}vc(F,G,0,O.sortObjects),R.finish(),O.sortObjects===!0&&R.sort(Ze,pt),Tt=Ne.enabled===!1||Ne.isPresenting===!1||Ne.hasDepthSensing()===!1,Tt&&Me.addToRenderList(R,F),this.info.render.frame++,me===!0&&rt.beginShadows();let Z=P.state.shadowsArray;_e.render(Z,F,G),me===!0&&rt.endShadows(),this.info.autoReset===!0&&this.info.reset();let ne=R.opaque,q=R.transmissive;if(P.setupLights(),G.isArrayCamera){let De=G.cameras;if(q.length>0)for(let He=0,Je=De.length;He<Je;He++){let Ye=De[He];Vo(ne,q,F,Ye)}Tt&&Me.render(F);for(let He=0,Je=De.length;He<Je;He++){let Ye=De[He];xa(R,F,Ye,Ye.viewport)}}else q.length>0&&Vo(ne,q,F,G),Tt&&Me.render(F),xa(R,F,G);x!==null&&y===0&&($e.updateMultisampleRenderTarget(x),$e.updateRenderTargetMipmap(x)),F.isScene===!0&&F.onAfterRender(O,F,G),j.resetDefaultState(),T=-1,M=null,U.pop(),U.length>0?(P=U[U.length-1],me===!0&&rt.setGlobalState(O.clippingPlanes,P.state.camera)):P=null,N.pop(),N.length>0?R=N[N.length-1]:R=null};function vc(F,G,Z,ne){if(F.visible===!1)return;if(F.layers.test(G.layers)){if(F.isGroup)Z=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(G);else if(F.isLight)P.pushLight(F),F.castShadow&&P.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||ue.intersectsSprite(F)){ne&&Gt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(_t);let He=he.update(F),Je=F.material;Je.visible&&R.push(F,He,Je,Z,Gt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||ue.intersectsObject(F))){let He=he.update(F),Je=F.material;if(ne&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),Gt.copy(F.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),Gt.copy(He.boundingSphere.center)),Gt.applyMatrix4(F.matrixWorld).applyMatrix4(_t)),Array.isArray(Je)){let Ye=He.groups;for(let wt=0,Mt=Ye.length;wt<Mt;wt++){let dt=Ye[wt],en=Je[dt.materialIndex];en&&en.visible&&R.push(F,He,en,Z,Gt.z,dt)}}else Je.visible&&R.push(F,He,Je,Z,Gt.z,null)}}let De=F.children;for(let He=0,Je=De.length;He<Je;He++)vc(De[He],G,Z,ne)}function xa(F,G,Z,ne){let{opaque:q,transmissive:De,transparent:He}=F;P.setupLightsView(Z),me===!0&&rt.setGlobalState(O.clippingPlanes,Z),ne&&xe.viewport(C.copy(ne)),q.length>0&&as(q,G,Z),De.length>0&&as(De,G,Z),He.length>0&&as(He,G,Z),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function Vo(F,G,Z,ne){if((Z.isScene===!0?Z.overrideMaterial:null)!==null)return;P.state.transmissionRenderTarget[ne.id]===void 0&&(P.state.transmissionRenderTarget[ne.id]=new fc(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?Ff:va,minFilter:Rd,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Vn.workingColorSpace}));let De=P.state.transmissionRenderTarget[ne.id],He=ne.viewport||C;De.setSize(He.z*O.transmissionResolutionScale,He.w*O.transmissionResolutionScale);let Je=O.getRenderTarget(),Ye=O.getActiveCubeFace(),wt=O.getActiveMipmapLevel();O.setRenderTarget(De),O.getClearColor(ae),fe=O.getClearAlpha(),fe<1&&O.setClearColor(16777215,.5),O.clear(),Tt&&Me.render(Z);let Mt=O.toneMapping;O.toneMapping=Hl;let dt=ne.viewport;if(ne.viewport!==void 0&&(ne.viewport=void 0),P.setupLightsView(ne),me===!0&&rt.setGlobalState(O.clippingPlanes,ne),as(F,Z,ne),$e.updateMultisampleRenderTarget(De),$e.updateRenderTargetMipmap(De),Se.has("WEBGL_multisampled_render_to_texture")===!1){let en=!1;for(let Tn=0,wn=G.length;Tn<wn;Tn++){let _n=G[Tn],{object:yn,geometry:ht,material:ei,group:ut}=_n;if(ei.side===mc&&yn.layers.test(ne.layers)){let Fi=ei.side;ei.side=ys,ei.needsUpdate=!0,Nd(yn,Z,ne,ht,ei,ut),ei.side=Fi,ei.needsUpdate=!0,en=!0}}en===!0&&($e.updateMultisampleRenderTarget(De),$e.updateRenderTargetMipmap(De))}O.setRenderTarget(Je,Ye,wt),O.setClearColor(ae,fe),dt!==void 0&&(ne.viewport=dt),O.toneMapping=Mt}function as(F,G,Z){let ne=G.isScene===!0?G.overrideMaterial:null;for(let q=0,De=F.length;q<De;q++){let He=F[q],{object:Je,geometry:Ye,group:wt}=He,Mt=He.material;Mt.allowOverride===!0&&ne!==null&&(Mt=ne),Je.layers.test(Z.layers)&&Nd(Je,G,Z,Ye,Mt,wt)}}function Nd(F,G,Z,ne,q,De){F.onBeforeRender(O,G,Z,ne,q,De),F.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),q.onBeforeRender(O,G,Z,ne,F,De),q.transparent===!0&&q.side===mc&&q.forceSinglePass===!1?(q.side=ys,q.needsUpdate=!0,O.renderBufferDirect(Z,G,ne,q,F,De),q.side=Vl,q.needsUpdate=!0,O.renderBufferDirect(Z,G,ne,q,F,De),q.side=mc):O.renderBufferDirect(Z,G,ne,q,F,De),F.onAfterRender(O,G,Z,ne,q,De)}function mo(F,G,Z){G.isScene!==!0&&(G=Sn);let ne=Te.get(F),q=P.state.lights,De=P.state.shadowsArray,He=q.state.version,Je=J.getParameters(F,q.state,De,G,Z),Ye=J.getProgramCacheKey(Je),wt=ne.programs;ne.environment=F.isMeshStandardMaterial?G.environment:null,ne.fog=G.fog,ne.envMap=(F.isMeshStandardMaterial?k:z).get(F.envMap||ne.environment),ne.envMapRotation=ne.environment!==null&&F.envMap===null?G.environmentRotation:F.envMapRotation,wt===void 0&&(F.addEventListener("dispose",At),wt=new Map,ne.programs=wt);let Mt=wt.get(Ye);if(Mt!==void 0){if(ne.currentProgram===Mt&&ne.lightsStateVersion===He)return wa(F,Je),Mt}else Je.uniforms=J.getUniforms(F),F.onBeforeCompile(Je,O),Mt=J.acquireProgram(Je,Ye),wt.set(Ye,Mt),ne.uniforms=Je.uniforms;let dt=ne.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(dt.clippingPlanes=rt.uniform),wa(F,Je),ne.needsLights=Od(F),ne.lightsStateVersion=He,ne.needsLights&&(dt.ambientLightColor.value=q.state.ambient,dt.lightProbe.value=q.state.probe,dt.directionalLights.value=q.state.directional,dt.directionalLightShadows.value=q.state.directionalShadow,dt.spotLights.value=q.state.spot,dt.spotLightShadows.value=q.state.spotShadow,dt.rectAreaLights.value=q.state.rectArea,dt.ltc_1.value=q.state.rectAreaLTC1,dt.ltc_2.value=q.state.rectAreaLTC2,dt.pointLights.value=q.state.point,dt.pointLightShadows.value=q.state.pointShadow,dt.hemisphereLights.value=q.state.hemi,dt.directionalShadowMap.value=q.state.directionalShadowMap,dt.directionalShadowMatrix.value=q.state.directionalShadowMatrix,dt.spotShadowMap.value=q.state.spotShadowMap,dt.spotLightMatrix.value=q.state.spotLightMatrix,dt.spotLightMap.value=q.state.spotLightMap,dt.pointShadowMap.value=q.state.pointShadowMap,dt.pointShadowMatrix.value=q.state.pointShadowMatrix),ne.currentProgram=Mt,ne.uniformsList=null,Mt}function bc(F){if(F.uniformsList===null){let G=F.currentProgram.getUniforms();F.uniformsList=g_.seqWithValue(G.seq,F.uniforms)}return F.uniformsList}function wa(F,G){let Z=Te.get(F);Z.outputColorSpace=G.outputColorSpace,Z.batching=G.batching,Z.batchingColor=G.batchingColor,Z.instancing=G.instancing,Z.instancingColor=G.instancingColor,Z.instancingMorph=G.instancingMorph,Z.skinning=G.skinning,Z.morphTargets=G.morphTargets,Z.morphNormals=G.morphNormals,Z.morphColors=G.morphColors,Z.morphTargetsCount=G.morphTargetsCount,Z.numClippingPlanes=G.numClippingPlanes,Z.numIntersection=G.numClipIntersection,Z.vertexAlphas=G.vertexAlphas,Z.vertexTangents=G.vertexTangents,Z.toneMapping=G.toneMapping}function xc(F,G,Z,ne,q){G.isScene!==!0&&(G=Sn),$e.resetTextureUnits();let De=G.fog,He=ne.isMeshStandardMaterial?G.environment:null,Je=x===null?O.outputColorSpace:x.isXRRenderTarget===!0?x.texture.colorSpace:Df,Ye=(ne.isMeshStandardMaterial?k:z).get(ne.envMap||He),wt=ne.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,Mt=!!Z.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),dt=!!Z.morphAttributes.position,en=!!Z.morphAttributes.normal,Tn=!!Z.morphAttributes.color,wn=Hl;ne.toneMapped&&(x===null||x.isXRRenderTarget===!0)&&(wn=O.toneMapping);let _n=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,yn=_n!==void 0?_n.length:0,ht=Te.get(ne),ei=P.state.lights;if(me===!0&&(Qe===!0||F!==M)){let Xt=F===M&&ne.id===T;rt.setState(ne,F,Xt)}let ut=!1;ne.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==ei.state.version||ht.outputColorSpace!==Je||q.isBatchedMesh&&ht.batching===!1||!q.isBatchedMesh&&ht.batching===!0||q.isBatchedMesh&&ht.batchingColor===!0&&q.colorTexture===null||q.isBatchedMesh&&ht.batchingColor===!1&&q.colorTexture!==null||q.isInstancedMesh&&ht.instancing===!1||!q.isInstancedMesh&&ht.instancing===!0||q.isSkinnedMesh&&ht.skinning===!1||!q.isSkinnedMesh&&ht.skinning===!0||q.isInstancedMesh&&ht.instancingColor===!0&&q.instanceColor===null||q.isInstancedMesh&&ht.instancingColor===!1&&q.instanceColor!==null||q.isInstancedMesh&&ht.instancingMorph===!0&&q.morphTexture===null||q.isInstancedMesh&&ht.instancingMorph===!1&&q.morphTexture!==null||ht.envMap!==Ye||ne.fog===!0&&ht.fog!==De||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==rt.numPlanes||ht.numIntersection!==rt.numIntersection)||ht.vertexAlphas!==wt||ht.vertexTangents!==Mt||ht.morphTargets!==dt||ht.morphNormals!==en||ht.morphColors!==Tn||ht.toneMapping!==wn||ht.morphTargetsCount!==yn)&&(ut=!0):(ut=!0,ht.__version=ne.version);let Fi=ht.currentProgram;ut===!0&&(Fi=mo(ne,G,q));let vs=!1,ai=!1,Rr=!1,Hn=Fi.getUniforms(),Vi=ht.uniforms;if(xe.useProgram(Fi.program)&&(vs=!0,ai=!0,Rr=!0),ne.id!==T&&(T=ne.id,ai=!0),vs||M!==F){xe.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),Hn.setValue(B,"projectionMatrix",F.projectionMatrix),Hn.setValue(B,"viewMatrix",F.matrixWorldInverse);let Ui=Hn.map.cameraPosition;Ui!==void 0&&Ui.setValue(B,it.setFromMatrixPosition(F.matrixWorld)),Pe.logarithmicDepthBuffer&&Hn.setValue(B,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&Hn.setValue(B,"isOrthographic",F.isOrthographicCamera===!0),M!==F&&(M=F,ai=!0,Rr=!0)}if(q.isSkinnedMesh){Hn.setOptional(B,q,"bindMatrix"),Hn.setOptional(B,q,"bindMatrixInverse");let Xt=q.skeleton;Xt&&(Xt.boneTexture===null&&Xt.computeBoneTexture(),Hn.setValue(B,"boneTexture",Xt.boneTexture,$e))}q.isBatchedMesh&&(Hn.setOptional(B,q,"batchingTexture"),Hn.setValue(B,"batchingTexture",q._matricesTexture,$e),Hn.setOptional(B,q,"batchingIdTexture"),Hn.setValue(B,"batchingIdTexture",q._indirectTexture,$e),Hn.setOptional(B,q,"batchingColorTexture"),q._colorsTexture!==null&&Hn.setValue(B,"batchingColorTexture",q._colorsTexture,$e));let Pr=Z.morphAttributes;if((Pr.position!==void 0||Pr.normal!==void 0||Pr.color!==void 0)&&xt.update(q,Z,Fi),(ai||ht.receiveShadow!==q.receiveShadow)&&(ht.receiveShadow=q.receiveShadow,Hn.setValue(B,"receiveShadow",q.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(Vi.envMap.value=Ye,Vi.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1),ne.isMeshStandardMaterial&&ne.envMap===null&&G.environment!==null&&(Vi.envMapIntensity.value=G.environmentIntensity),Vi.dfgLUT!==void 0&&(Vi.dfgLUT.value=qke()),ai&&(Hn.setValue(B,"toneMappingExposure",O.toneMappingExposure),ht.needsLights&&go(Vi,Rr),De&&ne.fog===!0&&tt.refreshFogUniforms(Vi,De),tt.refreshMaterialUniforms(Vi,ne,Ae,we,P.state.transmissionRenderTarget[F.id]),g_.upload(B,bc(ht),Vi,$e)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(g_.upload(B,bc(ht),Vi,$e),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&Hn.setValue(B,"center",q.center),Hn.setValue(B,"modelViewMatrix",q.modelViewMatrix),Hn.setValue(B,"normalMatrix",q.normalMatrix),Hn.setValue(B,"modelMatrix",q.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){let Xt=ne.uniformsGroups;for(let Ui=0,cs=Xt.length;Ui<cs;Ui++){let Bi=Xt[Ui];Be.update(Bi,Fi),Be.bind(Bi,Fi)}}return Fi}function go(F,G){F.ambientLightColor.needsUpdate=G,F.lightProbe.needsUpdate=G,F.directionalLights.needsUpdate=G,F.directionalLightShadows.needsUpdate=G,F.pointLights.needsUpdate=G,F.pointLightShadows.needsUpdate=G,F.spotLights.needsUpdate=G,F.spotLightShadows.needsUpdate=G,F.rectAreaLights.needsUpdate=G,F.hemisphereLights.needsUpdate=G}function Od(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(F,G,Z){let ne=Te.get(F);ne.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,ne.__autoAllocateDepthBuffer===!1&&(ne.__useRenderToTexture=!1),Te.get(F.texture).__webglTexture=G,Te.get(F.depthTexture).__webglTexture=ne.__autoAllocateDepthBuffer?void 0:Z,ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,G){let Z=Te.get(F);Z.__webglFramebuffer=G,Z.__useDefaultFramebuffer=G===void 0};let jf=B.createFramebuffer();this.setRenderTarget=function(F,G=0,Z=0){x=F,w=G,y=Z;let ne=!0,q=null,De=!1,He=!1;if(F){let Ye=Te.get(F);if(Ye.__useDefaultFramebuffer!==void 0)xe.bindFramebuffer(B.FRAMEBUFFER,null),ne=!1;else if(Ye.__webglFramebuffer===void 0)$e.setupRenderTarget(F);else if(Ye.__hasExternalTextures)$e.rebindTextures(F,Te.get(F.texture).__webglTexture,Te.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){let dt=F.depthTexture;if(Ye.__boundDepthTexture!==dt){if(dt!==null&&Te.has(dt)&&(F.width!==dt.image.width||F.height!==dt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$e.setupDepthRenderbuffer(F)}}let wt=F.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(He=!0);let Mt=Te.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(Mt[G])?q=Mt[G][Z]:q=Mt[G],De=!0):F.samples>0&&$e.useMultisampledRTT(F)===!1?q=Te.get(F).__webglMultisampledFramebuffer:Array.isArray(Mt)?q=Mt[Z]:q=Mt,C.copy(F.viewport),re.copy(F.scissor),Q=F.scissorTest}else C.copy(ct).multiplyScalar(Ae).floor(),re.copy(Bt).multiplyScalar(Ae).floor(),Q=jt;if(Z!==0&&(q=jf),xe.bindFramebuffer(B.FRAMEBUFFER,q)&&ne&&xe.drawBuffers(F,q),xe.viewport(C),xe.scissor(re),xe.setScissorTest(Q),De){let Ye=Te.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+G,Ye.__webglTexture,Z)}else if(He){let Ye=G;for(let wt=0;wt<F.textures.length;wt++){let Mt=Te.get(F.textures[wt]);B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+wt,Mt.__webglTexture,Z,Ye)}}else if(F!==null&&Z!==0){let Ye=Te.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Ye.__webglTexture,Z)}T=-1},this.readRenderTargetPixels=function(F,G,Z,ne,q,De,He,Je=0){if(!(F&&F.isWebGLRenderTarget)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=Te.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&He!==void 0&&(Ye=Ye[He]),Ye){xe.bindFramebuffer(B.FRAMEBUFFER,Ye);try{let wt=F.textures[Je],Mt=wt.format,dt=wt.type;if(!Pe.textureFormatReadable(Mt)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(dt)){dn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}G>=0&&G<=F.width-ne&&Z>=0&&Z<=F.height-q&&(F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Je),B.readPixels(G,Z,ne,q,kt.convert(Mt),kt.convert(dt),De))}finally{let wt=x!==null?Te.get(x).__webglFramebuffer:null;xe.bindFramebuffer(B.FRAMEBUFFER,wt)}}},this.readRenderTargetPixelsAsync=async function(F,G,Z,ne,q,De,He,Je=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ye=Te.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&He!==void 0&&(Ye=Ye[He]),Ye)if(G>=0&&G<=F.width-ne&&Z>=0&&Z<=F.height-q){xe.bindFramebuffer(B.FRAMEBUFFER,Ye);let wt=F.textures[Je],Mt=wt.format,dt=wt.type;if(!Pe.textureFormatReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let en=B.createBuffer();B.bindBuffer(B.PIXEL_PACK_BUFFER,en),B.bufferData(B.PIXEL_PACK_BUFFER,De.byteLength,B.STREAM_READ),F.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+Je),B.readPixels(G,Z,ne,q,kt.convert(Mt),kt.convert(dt),0);let Tn=x!==null?Te.get(x).__webglFramebuffer:null;xe.bindFramebuffer(B.FRAMEBUFFER,Tn);let wn=B.fenceSync(B.SYNC_GPU_COMMANDS_COMPLETE,0);return B.flush(),await yte(B,wn,4),B.bindBuffer(B.PIXEL_PACK_BUFFER,en),B.getBufferSubData(B.PIXEL_PACK_BUFFER,0,De),B.deleteBuffer(en),B.deleteSync(wn),De}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,G=null,Z=0){let ne=Math.pow(2,-Z),q=Math.floor(F.image.width*ne),De=Math.floor(F.image.height*ne),He=G!==null?G.x:0,Je=G!==null?G.y:0;$e.setTexture2D(F,0),B.copyTexSubImage2D(B.TEXTURE_2D,Z,0,0,He,Je,q,De),xe.unbindTexture()};let Ea=B.createFramebuffer(),ql=B.createFramebuffer();this.copyTextureToTexture=function(F,G,Z=null,ne=null,q=0,De=null){De===null&&(q!==0?(n_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),De=q,q=0):De=0);let He,Je,Ye,wt,Mt,dt,en,Tn,wn,_n=F.isCompressedTexture?F.mipmaps[De]:F.image;if(Z!==null)He=Z.max.x-Z.min.x,Je=Z.max.y-Z.min.y,Ye=Z.isBox3?Z.max.z-Z.min.z:1,wt=Z.min.x,Mt=Z.min.y,dt=Z.isBox3?Z.min.z:0;else{let Pr=Math.pow(2,-q);He=Math.floor(_n.width*Pr),Je=Math.floor(_n.height*Pr),F.isDataArrayTexture?Ye=_n.depth:F.isData3DTexture?Ye=Math.floor(_n.depth*Pr):Ye=1,wt=0,Mt=0,dt=0}ne!==null?(en=ne.x,Tn=ne.y,wn=ne.z):(en=0,Tn=0,wn=0);let yn=kt.convert(G.format),ht=kt.convert(G.type),ei;G.isData3DTexture?($e.setTexture3D(G,0),ei=B.TEXTURE_3D):G.isDataArrayTexture||G.isCompressedArrayTexture?($e.setTexture2DArray(G,0),ei=B.TEXTURE_2D_ARRAY):($e.setTexture2D(G,0),ei=B.TEXTURE_2D),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,G.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,G.unpackAlignment);let ut=B.getParameter(B.UNPACK_ROW_LENGTH),Fi=B.getParameter(B.UNPACK_IMAGE_HEIGHT),vs=B.getParameter(B.UNPACK_SKIP_PIXELS),ai=B.getParameter(B.UNPACK_SKIP_ROWS),Rr=B.getParameter(B.UNPACK_SKIP_IMAGES);B.pixelStorei(B.UNPACK_ROW_LENGTH,_n.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,_n.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,wt),B.pixelStorei(B.UNPACK_SKIP_ROWS,Mt),B.pixelStorei(B.UNPACK_SKIP_IMAGES,dt);let Hn=F.isDataArrayTexture||F.isData3DTexture,Vi=G.isDataArrayTexture||G.isData3DTexture;if(F.isDepthTexture){let Pr=Te.get(F),Xt=Te.get(G),Ui=Te.get(Pr.__renderTarget),cs=Te.get(Xt.__renderTarget);xe.bindFramebuffer(B.READ_FRAMEBUFFER,Ui.__webglFramebuffer),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,cs.__webglFramebuffer);for(let Bi=0;Bi<Ye;Bi++)Hn&&(B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Te.get(F).__webglTexture,q,dt+Bi),B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Te.get(G).__webglTexture,De,wn+Bi)),B.blitFramebuffer(wt,Mt,He,Je,en,Tn,He,Je,B.DEPTH_BUFFER_BIT,B.NEAREST);xe.bindFramebuffer(B.READ_FRAMEBUFFER,null),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else if(q!==0||F.isRenderTargetTexture||Te.has(F)){let Pr=Te.get(F),Xt=Te.get(G);xe.bindFramebuffer(B.READ_FRAMEBUFFER,Ea),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,ql);for(let Ui=0;Ui<Ye;Ui++)Hn?B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Pr.__webglTexture,q,dt+Ui):B.framebufferTexture2D(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Pr.__webglTexture,q),Vi?B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Xt.__webglTexture,De,wn+Ui):B.framebufferTexture2D(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Xt.__webglTexture,De),q!==0?B.blitFramebuffer(wt,Mt,He,Je,en,Tn,He,Je,B.COLOR_BUFFER_BIT,B.NEAREST):Vi?B.copyTexSubImage3D(ei,De,en,Tn,wn+Ui,wt,Mt,He,Je):B.copyTexSubImage2D(ei,De,en,Tn,wt,Mt,He,Je);xe.bindFramebuffer(B.READ_FRAMEBUFFER,null),xe.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else Vi?F.isDataTexture||F.isData3DTexture?B.texSubImage3D(ei,De,en,Tn,wn,He,Je,Ye,yn,ht,_n.data):G.isCompressedArrayTexture?B.compressedTexSubImage3D(ei,De,en,Tn,wn,He,Je,Ye,yn,_n.data):B.texSubImage3D(ei,De,en,Tn,wn,He,Je,Ye,yn,ht,_n):F.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,De,en,Tn,He,Je,yn,ht,_n.data):F.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,De,en,Tn,_n.width,_n.height,yn,_n.data):B.texSubImage2D(B.TEXTURE_2D,De,en,Tn,He,Je,yn,ht,_n);B.pixelStorei(B.UNPACK_ROW_LENGTH,ut),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Fi),B.pixelStorei(B.UNPACK_SKIP_PIXELS,vs),B.pixelStorei(B.UNPACK_SKIP_ROWS,ai),B.pixelStorei(B.UNPACK_SKIP_IMAGES,Rr),De===0&&G.generateMipmaps&&B.generateMipmap(ei),xe.unbindTexture()},this.initRenderTarget=function(F){Te.get(F).__webglFramebuffer===void 0&&$e.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?$e.setTextureCube(F,0):F.isData3DTexture?$e.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?$e.setTexture2DArray(F,0):$e.setTexture2D(F,0),xe.unbindTexture()},this.resetState=function(){w=0,y=0,x=null,xe.reset(),j.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ya}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Vn._getUnpackColorSpace()}};var Xke=["canvasContainer"],uD=class n{canvasContainer;scene;camera;renderer;textMesh;stars=[];animationId=0;ngOnInit(){this.initScene(),this.createStarfield(),this.createText(),this.renderer.render(this.scene,this.camera)}ngAfterViewInit(){this.canvasContainer&&this.canvasContainer.nativeElement.appendChild(this.renderer.domElement)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer.dispose()}initScene(){this.scene=new Ab,this.scene.background=new hn(17),this.camera=new Hr(75,window.innerWidth/400,.1,1e3),this.camera.position.z=5,this.renderer=new aD({antialias:!0}),this.renderer.setSize(window.innerWidth,400),this.renderer.setPixelRatio(window.devicePixelRatio);let e=new Wb(16777215,.5);this.scene.add(e);let t=new u_(4149685,2);t.position.set(5,5,5),this.scene.add(t);let i=new u_(16711935,1.5);i.position.set(-5,-5,5),this.scene.add(i)}createStarfield(){let e=new uo,t=new a_({color:16777215,size:.05,transparent:!0}),i=[];for(let s=0;s<1e3;s++){let o=(Math.random()-.5)*100,a=(Math.random()-.5)*100,c=(Math.random()-.5)*100;i.push(o,a,c)}e.setAttribute("position",new Gs(i,3));let r=new Mb(e,t);this.scene.add(r),this.stars.push(r)}createText(){let e=[],t=new Pf;t.lineTo(0,2),t.lineTo(2,4),e.push(t);let i=new Pf;i.moveTo(1.5,0),i.lineTo(2,2),i.lineTo(2.3,2),i.lineTo(2.8,0),i.lineTo(2.5,0),i.lineTo(2.35,.8),i.lineTo(1.95,.8),i.lineTo(1.8,0),i.lineTo(1.5,0);let r=new Bb(e);r.center();let s=new Hb({color:4149685,emissive:1713022,specular:6056896,shininess:100});this.textMesh=new ho(r,s),this.scene.add(this.textMesh)}animate=()=>{this.animationId=requestAnimationFrame(this.animate),this.textMesh&&(this.textMesh.rotation.y+=.01,this.textMesh.rotation.x=Math.sin(Date.now()*.001)*.2),this.stars.forEach(e=>{e.rotation.y+=5e-4,e.rotation.x+=2e-4}),this.renderer.render(this.scene,this.camera)};onWindowResize(){this.camera.aspect=window.innerWidth/400,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,400)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-mybanner"]],viewQuery:function(t,i){if(t&1&&jc(Xke,7),t&2){let r;Ji(r=Zi())&&(i.canvasContainer=r.first)}},decls:2,vars:0,consts:[["canvasContainer",""],[1,"banner-container"]],template:function(t,i){t&1&&Ci(0,"div",1,0)},styles:[".banner-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow:hidden;position:relative;background:#001}.banner-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]})};var dD=class n{retry(){window.location.href="/"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-no-internet"]],decls:12,vars:0,consts:[[1,"no-internet-container"],[1,"message-card"],["color","warn",1,"error-icon"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"mat-card",1)(2,"mat-icon",2),Y(3,"wifi_off"),le(),ce(4,"h2"),Y(5,"Unable to connect to Internet"),le(),ce(6,"p"),Y(7,"Please check your connection and try again."),le(),ce(8,"button",3),Ln("click",function(){return i.retry()}),ce(9,"mat-icon"),Y(10,"refresh"),le(),Y(11," Retry "),le()()())},dependencies:[Ps,Mo,fg,Do,td,Ns,rc],styles:[".no-internet-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5;padding:20px}.message-card[_ngcontent-%COMP%]{padding:40px;text-align:center;max-width:400px;width:100%;display:flex;flex-direction:column;align-items:center;gap:20px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}h2[_ngcontent-%COMP%]{margin:0;color:#333}p[_ngcontent-%COMP%]{color:#666;margin:0}"]})};var hD=class n{firestore=H(ha);auth=H(sa);getUserNotificationsPath(e){return`users/${e}/notifications`}async createNotification(e,t){let i=this.getUserNotificationsPath(e),r=g0(this.firestore,i);return(await NK(r,lt(ie({},t),{createdAt:new Date}))).id}async updateNotification(e,t,i){let r=this.getUserNotificationsPath(e),s=Zu(this.firestore,`${r}/${t}`);return VK(s,i)}async deleteNotification(e,t){let i=this.getUserNotificationsPath(e),r=Zu(this.firestore,`${i}/${t}`);return OK(r)}async getNotificationsPage(e,t=5,i){let r=this.getUserNotificationsPath(e),s=g0(this.firestore,r),o;i?o=y0(s,_0("time"),FK(i),o3(t)):o=y0(s,_0("time"),o3(t));let a=await s3(o),c=[];a.forEach(u=>{c.push(ie({id:u.id},u.data()))});let l=a.docs[a.docs.length-1];return{items:c,lastDoc:l}}async getAllNotifications(e){let t=this.getUserNotificationsPath(e),i=g0(this.firestore,t),r=y0(i,_0("time"));return(await s3(r)).docs.map(o=>ie({id:o.id},o.data()))}streamNotifications(e){let t=this.getUserNotificationsPath(e),i=g0(this.firestore,t),r=y0(i,_0("time"));return PK(r,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var y_=class n{constructor(e){this.router=e}isPwa=$n(!1,{});isMobile=$n(!1,{});isDesktop=$n(!1,{});isOnline=$n(!0,{});initialize(){return new Promise(e=>{this.checkPwa(),this.checkDeviceType(),this.checkNetwork(),this.registerPeriodicSync(),e()})}async registerPeriodicSync(){if("serviceWorker"in navigator&&"periodicSync"in navigator.serviceWorker){let e=await navigator.serviceWorker.ready;try{await e.periodicSync.register("notification-check",{minInterval:300*1e3}),console.log("Periodic sync registered")}catch(t){console.error("Periodic sync registration failed",t)}}}async syncNotifications(e){if(console.log("Syncing notifications to Service Worker:",e.length,"tasks"),"serviceWorker"in navigator){let t=await navigator.serviceWorker.ready;t.active?(t.active.postMessage({type:"SYNC_NOTIFICATIONS",notifications:e}),console.log("Sync message sent to active Service Worker")):console.warn("Service Worker active instance not found for sync")}else console.warn("Service Worker not supported or not registered")}checkPwa(){let e=window.matchMedia("(display-mode: standalone)").matches,t=window.navigator.standalone;this.isPwa.set(e||t||!1),this.isPwa()||(ed.production||ed.test)&&this.router.navigate(["/install-app"])}checkNetwork(){this.isOnline.set(navigator.onLine),window.addEventListener("online",()=>{this.isOnline.set(!0)}),window.addEventListener("offline",()=>{this.isOnline.set(!1),this.router.navigate(["/no-internet"])}),navigator.onLine||this.router.navigate(["/no-internet"])}checkDeviceType(){let e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e);this.isMobile.set(t),this.isDesktop.set(!t)}static \u0275fac=function(t){return new(t||n)(st(Ur))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function Jke(n,e){if(n&1){let t=Qi();gh(0),ce(1,"div",9),Ln("click",function(){Gn(t);let r=An();return Wn(r.openCreate())}),ce(2,"div",10),Y(3,"+"),le(),ce(4,"p"),Y(5,"No reminders yet \u2014 tap to create one"),le()(),_h()}}function Zke(n,e){if(n&1){let t=Qi();ce(0,"div",18)(1,"div",19)(2,"div",20),Y(3),le(),ce(4,"div",21),Y(5),le()(),ce(6,"div",22)(7,"div",23),Y(8),le(),ce(9,"div",24)(10,"button",25),Ln("click",function(){let r=Gn(t).$implicit,s=An(2);return Wn(s.openEdit(r))}),Y(11,"\u270E"),le(),ce(12,"button",26),Ln("click",function(){let r=Gn(t).$implicit,s=An(2);return Wn(s.delete(r))}),Y(13,"\u{1F5D1}"),le()()()()}if(n&2){let t=e.$implicit;ot(3),Fr(t.title),ot(2),pE("",t.repeat," \u2022 ",t.day),ot(3),Fr(t.time)}}function eNe(n,e){if(n&1){let t=Qi();ce(0,"section",11),Lr(1,Zke,14,4,"div",12),ce(2,"div",13)(3,"button",14),Ln("click",function(){Gn(t);let r=An();return Wn(r.loadPrevious())}),Y(4,"\u2039 Prev"),le(),ce(5,"select",15),gE("ngModelChange",function(r){Gn(t);let s=An();return JP(s.pageSize,r)||(s.pageSize=r),Wn(r)}),Ln("change",function(){Gn(t);let r=An();return Wn(r.loadFirstPage())}),ce(6,"option",16),Y(7,"5"),le(),ce(8,"option",16),Y(9,"10"),le(),ce(10,"option",16),Y(11,"20"),le()(),ce(12,"button",14),Ln("click",function(){Gn(t);let r=An();return Wn(r.loadNext())}),Y(13,"Next \u203A"),le()(),ce(14,"button",17),Ln("click",function(){Gn(t);let r=An();return Wn(r.openCreate())}),Y(15,"+"),le()()}if(n&2){let t=An();ot(),Cn("ngForOf",t.notifications),ot(2),Cn("disabled",t.loading),ot(2),mE("ngModel",t.pageSize),ot(),Cn("ngValue",5),ot(2),Cn("ngValue",10),ot(2),Cn("ngValue",20),ot(2),Cn("disabled",t.loading)}}function tNe(n,e){n&1&&(ce(0,"div",27),Y(1,"Loading\u2026"),le())}function nNe(n,e){if(n&1){let t=Qi();ce(0,"div",28),Ln("click",function(){Gn(t);let r=An();return Wn(r.showModal=!1)}),le()}}function iNe(n,e){if(n&1){let t=Qi();ce(0,"div",29)(1,"form",30),Ln("ngSubmit",function(){Gn(t);let r=An();return Wn(r.submit())}),ce(2,"h3"),Y(3),le(),ce(4,"label",31)(5,"span",32),Y(6,"Reminder title"),le(),En(7,"input",33),le(),ce(8,"div",34)(9,"label",31)(10,"span",32),Y(11,"Repeat"),le(),ce(12,"select",35)(13,"option"),Y(14,"Daily"),le(),ce(15,"option"),Y(16,"Weekly"),le(),ce(17,"option"),Y(18,"Monthly"),le()()(),ce(19,"label",31)(20,"span",32),Y(21,"Day"),le(),ce(22,"select",36)(23,"option"),Y(24,"Everyday"),le(),ce(25,"option"),Y(26,"Monday"),le(),ce(27,"option"),Y(28,"Tuesday"),le(),ce(29,"option"),Y(30,"Wednesday"),le(),ce(31,"option"),Y(32,"Thursday"),le(),ce(33,"option"),Y(34,"Friday"),le(),ce(35,"option"),Y(36,"Saturday"),le(),ce(37,"option"),Y(38,"Sunday"),le()()()(),ce(39,"label",31)(40,"span",32),Y(41,"Time"),le(),En(42,"input",37),le(),ce(43,"div",38)(44,"button",39),Ln("click",function(){Gn(t);let r=An();return Wn(r.showModal=!1)}),Y(45,"Cancel"),le(),ce(46,"button",40),Y(47),le()()()()}if(n&2){let t=An();ot(),Cn("formGroup",t.form),ot(2),Fr(t.editing?"Edit Reminder":"New Reminder"),ot(44),Fr(t.editing?"Save":"Schedule")}}var fD=class n{constructor(e,t,i,r,s){this.ns=e;this.fb=t;this.authService=i;this.deviceService=r;this.cdr=s;this.form=this.fb.group({title:["",Ug.required],repeat:["Daily"],day:["Everyday"],time:["",[Ug.required,Ug.pattern(/^([01]\d|2[0-3]):([0-5]\d)$/)]]})}pageSize=5;notifications=[];loading=!1;lastDoc=null;pageStack=[];showModal=!1;editing=null;form;emptyMode=!1;user=null;authSub;ngOnInit(){this.loading=!0,this.authSub=this.authService.user$.subscribe(e=>{e?(this.user=e,this.loadFirstPage(),this.requestNotificationPermission(),this.cdr.detectChanges()):(this.loading=!1,this.emptyMode=!0,this.cdr.detectChanges())})}ngOnDestroy(){this.authSub?.unsubscribe()}async requestNotificationPermission(){"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()}async loadFirstPage(){if(this.user?.uid){this.loading=!0,this.pageStack=[],this.lastDoc=null;try{let e=await this.ns.getNotificationsPage(this.user.uid,this.pageSize);this.notifications=e.items,this.lastDoc=e.lastDoc||null,this.pageStack.push(this.lastDoc),this.emptyMode=this.notifications.length===0,this.deviceService.syncNotifications(this.notifications)}catch(e){console.error("Error loading notifications:",e),this.notifications=[],this.emptyMode=!0}finally{this.loading=!1,this.cdr.detectChanges()}}}async loadNext(){if(!(!this.lastDoc||!this.user?.uid)){this.loading=!0;try{let e=await this.ns.getNotificationsPage(this.user.uid,this.pageSize,this.lastDoc);e.items.length?(this.pageStack.push(e.lastDoc||null),this.notifications=e.items,this.lastDoc=e.lastDoc||null):this.lastDoc=null,this.emptyMode=this.notifications.length===0,this.deviceService.syncNotifications(this.notifications)}catch(e){console.error("Error loading next page:",e)}finally{this.loading=!1,this.cdr.detectChanges()}}}async loadPrevious(){if(!this.user?.uid)return;if(this.pageStack.length<=1){await this.loadFirstPage();return}this.pageStack.pop();let e=this.pageStack[this.pageStack.length-1]||null;this.loading=!0;try{let t,i=this.pageStack.length-1,r=[];t=void 0;for(let s=0;s<=i;s++){let o=await this.ns.getNotificationsPage(this.user.uid,this.pageSize,t);r=o.items,t=o.lastDoc||void 0}this.notifications=r,this.lastDoc=t||null,this.emptyMode=this.notifications.length===0}catch(t){console.error("Error loading previous page:",t)}finally{this.loading=!1,this.cdr.detectChanges()}}openCreate(){this.editing=null,this.form.reset({title:"",repeat:"Daily",day:"Everyday",time:""}),this.showModal=!0,this.cdr.detectChanges()}openEdit(e){this.editing=e,this.form.patchValue({title:e.title,repeat:e.repeat,day:e.day,time:e.time}),this.showModal=!0,this.cdr.detectChanges()}async submit(){if(this.form.invalid||!this.user?.uid){this.form.markAllAsTouched();return}let e={user:this.user.uid,title:this.form.value.title,repeat:this.form.value.repeat,day:this.form.value.day,time:this.form.value.time};this.editing&&this.editing.id?await this.ns.updateNotification(this.user.uid,this.editing.id,e):await this.ns.createNotification(this.user.uid,e),await this.loadFirstPage(),this.showModal=!1,this.cdr.detectChanges()}async delete(e){!e.id||!this.user?.uid||confirm(`Delete "${e.title}"?`)&&(await this.ns.deleteNotification(this.user.uid,e.id),await this.loadFirstPage(),this.cdr.detectChanges())}static \u0275fac=function(t){return new(t||n)(vt(hD),vt(qZ),vt(is),vt(y_),vt(Qr))};static \u0275cmp=at({type:n,selectors:[["app-notifications"]],decls:11,vars:5,consts:[[1,"notifications-root"],[1,"topbar"],[1,"top-actions"],[1,"content"],[4,"ngIf"],["class","list-section",4,"ngIf"],["class","loading-strip",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true",4,"ngIf"],[1,"empty-state",3,"click"],[1,"empty-plus"],[1,"list-section"],["class","card",4,"ngFor","ngForOf"],[1,"pagination"],[1,"p-btn",3,"click","disabled"],[1,"page-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["aria-label","Add notification",1,"fab",3,"click"],[1,"card"],[1,"item-left"],[1,"title"],[1,"meta"],[1,"item-right"],[1,"time"],[1,"actions"],["title","Edit",1,"icon-btn",3,"click"],["title","Delete",1,"icon-btn",3,"click"],[1,"loading-strip"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"modal"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"label"],["type","text","formControlName","title","placeholder","e.g., Hydration reminder"],[1,"grid-2"],["formControlName","repeat"],["formControlName","day"],["type","time","formControlName","time"],[1,"modal-actions"],["type","button",1,"btn","ghost",3,"click"],["type","submit",1,"btn","primary"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"header",1)(2,"h2"),Y(3,"Notifications"),le(),En(4,"div",2),le(),ce(5,"main",3),Lr(6,Jke,6,0,"ng-container",4)(7,eNe,16,7,"section",5)(8,tNe,2,0,"div",6),le(),Lr(9,nNe,1,0,"div",7)(10,iNe,48,3,"div",8),le()),t&2&&(ot(6),Cn("ngIf",i.emptyMode&&!i.loading),ot(),Cn("ngIf",!i.emptyMode),ot(),Cn("ngIf",i.loading),ot(),Cn("ngIf",i.showModal),ot(),Cn("ngIf",i.showModal))},dependencies:[Ps,IE,Qo,KZ,BZ,jZ,WZ,aA,dA,PZ,kZ,KU,XZ,YU,XU,Mo,Ns,Do],styles:[`[_nghost-%COMP%]{display:block;font-family:Inter,system-ui,-apple-system,sans-serif;color:#0f172a;--primary-color: #2563eb;--primary-hover: #1d4ed8;--bg-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);--card-bg: #ffffff;--text-main: #0f172a;--text-muted: #64748b;--border-color: #e2e8f0;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.notifications-root[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:2rem auto;padding:1.5rem;background:var(--bg-gradient);border-radius:1rem;box-shadow:var(--shadow-lg);position:relative;box-sizing:border-box}@media(max-width:640px){.notifications-root[_ngcontent-%COMP%]{margin:0;border-radius:0;min-height:100vh;padding:1rem}}.topbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:1rem;border-bottom:1px solid var(--border-color);margin-bottom:1rem}.topbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:1.5rem;color:var(--text-main);letter-spacing:-.025em}.list-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:var(--card-bg);border-radius:.75rem;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--text-main)}.card[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);display:flex;align-items:center;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-color);font-size:.875rem;background:#eff6ff;padding:.25rem .5rem;border-radius:.375rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media(max-width:400px){.card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.card[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}}.empty-state[_ngcontent-%COMP%]{min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;border:2px dashed var(--border-color);border-radius:1rem;cursor:pointer;background:#ffffff80;transition:background .2s}.empty-state[_ngcontent-%COMP%]:hover{background:#fffc}.empty-state[_ngcontent-%COMP%]   .empty-plus[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0f2fe;font-size:2rem;color:var(--primary-color);box-shadow:var(--shadow-sm)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-weight:500}.fab[_ngcontent-%COMP%]{position:fixed;right:2rem;bottom:2rem;width:3.5rem;height:3.5rem;border-radius:50%;border:none;background:var(--primary-color);color:#fff;font-size:1.75rem;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-lg);cursor:pointer;transition:transform .2s,background .2s;z-index:10}.fab[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:scale(1.05)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.p-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 1rem;border-radius:.5rem;cursor:pointer;font-weight:500;color:var(--text-main);transition:all .2s}.p-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc;border-color:#cbd5e1}.p-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-select[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);padding:.5rem 2rem .5rem 1rem;border-radius:.5rem;cursor:pointer;font-family:inherit;color:var(--text-main);outline:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .5rem center;background-size:1rem}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-size:1.1rem;padding:.5rem;border-radius:.375rem;color:var(--text-muted);transition:background .2s,color .2s}.icon-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.loading-strip[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:var(--text-muted);font-style:italic}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a99;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:40;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:90%;max-width:450px;background:#fff;border-radius:1rem;padding:1.5rem;z-index:50;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%,-40%);opacity:0}to{transform:translate(-50%,-50%);opacity:1}}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:700;color:var(--text-main)}.field[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.5rem}.field[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:.5rem;border:1px solid var(--border-color);background:#fff;outline:none;font-size:1rem;color:var(--text-main);transition:border-color .2s,box-shadow .2s;box-sizing:border-box}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #2563eb1a}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem 1.5rem;border:none;cursor:pointer;font-weight:600;font-size:.875rem;transition:all .2s}.btn.ghost[_ngcontent-%COMP%]{background:transparent;color:var(--text-muted)}.btn.ghost[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:var(--text-main)}.btn.primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;box-shadow:0 4px 6px -1px #2563eb33}.btn.primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 6px 8px -1px #2563eb4d}`]})};function rNe(n,e){if(n&1){let t=Qi();Oe(0,"button",6),Ua("click",function(){Gn(t);let r=An();return Wn(r.installPwa())}),Oe(1,"div",7),Yr(),Oe(2,"svg",8),Ci(3,"path",9),Ge()(),Ys(),Oe(4,"span"),Y(5,"Install App"),Ge()(),Oe(6,"p",10),Y(7," Install for the best experience on your device. "),Ge()}}function sNe(n,e){if(n&1){let t=Qi();Oe(0,"button",11),Ua("click",function(){Gn(t);let r=An();return Wn(r.openApp())}),Oe(1,"span"),Y(2,"Open App"),Ge(),Yr(),Oe(3,"svg",8),Ci(4,"path",12),Ge()()}}var pD=class n{router=H(Ur);deferredPrompt;showInstallButton=$n(!0,{});ngOnInit(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.showInstallButton.set(!0)})}async installPwa(){if(this.deferredPrompt){this.deferredPrompt.prompt();let{outcome:e}=await this.deferredPrompt.userChoice;console.log(e==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null,this.showInstallButton.set(!1)}}isStandalone(){return window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0}openApp(){this.isStandalone()?this.router.navigateByUrl("/home"):(oNe("Opening app in 5 seconds..."),setTimeout(()=>{window.location.href="https://la.vvsk.in?open=true"},5e3))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-install-app"]],decls:10,vars:1,consts:[[1,"install-container"],[1,"install-card"],["src","icons/la-logo.png","alt","Lifestyle Adapter Logo",1,"app-logo"],[1,"subtitle"],[1,"actions"],[1,"install-button","secondary"],[1,"install-button","primary",3,"click"],[1,"icon-wrapper"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentColor"],["d","M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"],[1,"install-note"],[1,"install-button","secondary",3,"click"],["d","M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"]],template:function(t,i){t&1&&(Oe(0,"div",0)(1,"div",1),Ci(2,"img",2),Oe(3,"h1"),Y(4,"Lifestyle Adapter"),Ge(),Oe(5,"p",3),Y(6,"Your personal growth companion for a better lifestyle."),Ge(),Oe(7,"div",4),kp(8,rNe,8,0)(9,sNe,5,0,"button",5),Ge()()()),t&2&&(ot(8),Np(i.showInstallButton()?8:9))},styles:['[_nghost-%COMP%]{display:block;height:100%}.install-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100dvh;padding:20px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);background:radial-gradient(circle at 50% 10%,#fff,#eef2f3)}.install-card[_ngcontent-%COMP%]{background:#ffffffe6;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:40px;border-radius:24px;box-shadow:0 10px 30px #00000014,0 1px 3px #0000000d;text-align:center;max-width:420px;width:100%;border:1px solid rgba(255,255,255,.5);display:flex;flex-direction:column;align-items:center;transition:transform .3s ease}.install-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.app-logo[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:contain;margin-bottom:24px;border-radius:24px;box-shadow:0 8px 16px #0000001a;background:#fff;padding:10px}h1[_ngcontent-%COMP%]{font-size:clamp(1.5rem,5vw,2.2rem);margin-bottom:.5rem;color:#1a1a2e;font-weight:800;line-height:1.2;letter-spacing:-.02em;width:100%}.subtitle[_ngcontent-%COMP%]{margin-bottom:2.5rem;color:#5d6d7e;font-size:1rem;line-height:1.6;font-weight:500}.actions[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:16px;align-items:center}.install-button[_ngcontent-%COMP%]{width:100%;padding:14px 24px;border-radius:16px;font-size:1.05rem;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.2,.8,.2,1);display:flex;align-items:center;justify-content:center;gap:12px;border:none;outline:none;position:relative;overflow:hidden}.install-button.primary[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;box-shadow:0 4px 12px #3f51b540}.install-button.primary[_ngcontent-%COMP%]:hover{background-color:#303f9f;box-shadow:0 6px 16px #3f51b559;transform:translateY(-2px)}.install-button.primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.install-button.secondary[_ngcontent-%COMP%]{background-color:#fff;color:#3f51b5;border:2px solid #3f51b5}.install-button.secondary[_ngcontent-%COMP%]:hover{background-color:#f0f2ff}.icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.install-note[_ngcontent-%COMP%]{font-size:.85rem;color:#8c9eff;margin:0;font-weight:500}.toast[_ngcontent-%COMP%]{position:fixed;top:20px;left:50%;transform:translate(-50%);background-color:#333;color:#fff;padding:10px 20px}.toast[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.toast[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#333;opacity:.5}@media(max-width:480px){.install-container[_ngcontent-%COMP%]{padding:16px;align-items:flex-end;align-items:center}.install-card[_ngcontent-%COMP%]{padding:32px 24px;border-radius:20px}.app-logo[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:20px}h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem}}']})};function oNe(n){let e=document.createElement("div");e.className="toast",e.textContent=n,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}var mD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-privacy-policy"]],decls:44,vars:0,consts:[[1,"policy-container"],[1,"last-updated"]],template:function(t,i){t&1&&(Oe(0,"div",0)(1,"h1"),Y(2,"Privacy Policy"),Ge(),Oe(3,"p",1),Y(4,"Last Updated: December 7, 2025"),Ge(),Oe(5,"section")(6,"h2"),Y(7,"1. Introduction"),Ge(),Oe(8,"p"),Y(9,"Welcome to Lifestyle Adapter. We value your privacy and are committed to protecting your personal information. This Privacy Policy explains how we collect, use, and safeguard your data when you use our application."),Ge()(),Oe(10,"section")(11,"h2"),Y(12,"2. Data Collection"),Ge(),Oe(13,"p"),Y(14,"We collect minimal data necessary to provide our services, including:"),Ge(),Oe(15,"ul")(16,"li"),Y(17,"Account information (via Google Sign-In)"),Ge(),Oe(18,"li"),Y(19,"Usage data to improve user experience"),Ge(),Oe(20,"li"),Y(21,"Device information for optimization"),Ge()()(),Oe(22,"section")(23,"h2"),Y(24,"3. Use of Data"),Ge(),Oe(25,"p"),Y(26,"Your data is used solely to:"),Ge(),Oe(27,"ul")(28,"li"),Y(29,"Authenticate your identity"),Ge(),Oe(30,"li"),Y(31,"Provide personalized lifestyle recommendations"),Ge(),Oe(32,"li"),Y(33,"Analyze application performance"),Ge()()(),Oe(34,"section")(35,"h2"),Y(36,"4. Data Security"),Ge(),Oe(37,"p"),Y(38,"We implement robust security measures to protect your data. We do not sell your personal information to third parties."),Ge()(),Oe(39,"section")(40,"h2"),Y(41,"5. Contact Us"),Ge(),Oe(42,"p"),Y(43,"If you have any questions about this Privacy Policy, please contact us at support@lifestyleadapter.com."),Ge()()())},styles:[".policy-container[_ngcontent-%COMP%]{padding:40px 20px;max-width:800px;margin:0 auto;font-family:Roboto,sans-serif;line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:#1a237e}.last-updated[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:40px;font-style:italic}section[_ngcontent-%COMP%]{margin-bottom:30px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#283593;margin-bottom:15px;border-bottom:2px solid #e8eaf6;padding-bottom:8px}p[_ngcontent-%COMP%]{margin-bottom:15px}ul[_ngcontent-%COMP%]{padding-left:20px;margin-bottom:15px}li[_ngcontent-%COMP%]{margin-bottom:8px}"]})};var gD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-terms-of-service"]],decls:35,vars:0,consts:[[1,"policy-container"],[1,"last-updated"]],template:function(t,i){t&1&&(Oe(0,"div",0)(1,"h1"),Y(2,"Terms of Service"),Ge(),Oe(3,"p",1),Y(4,"Last Updated: December 7, 2025"),Ge(),Oe(5,"section")(6,"h2"),Y(7,"1. Agreement to Terms"),Ge(),Oe(8,"p"),Y(9,"By accessing and using Lifestyle Adapter, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our services."),Ge()(),Oe(10,"section")(11,"h2"),Y(12,"2. User Accounts"),Ge(),Oe(13,"p"),Y(14,"You are responsible for maintaining the confidentiality of your account and password. You agree to accept responsibility for all activities that occur under your account."),Ge()(),Oe(15,"section")(16,"h2"),Y(17,"3. Acceptable Use"),Ge(),Oe(18,"p"),Y(19,"You agree not to use the application for any unlawful purpose or in any way that could damage, disable, overburden, or impair the service."),Ge()(),Oe(20,"section")(21,"h2"),Y(22,"4. Intellectual Property"),Ge(),Oe(23,"p"),Y(24,"The content, features, and functionality of Lifestyle Adapter are owned by us and are protected by international copyright, trademark, and other intellectual property laws."),Ge()(),Oe(25,"section")(26,"h2"),Y(27,"5. Termination"),Ge(),Oe(28,"p"),Y(29,"We reserve the right to terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."),Ge()(),Oe(30,"section")(31,"h2"),Y(32,"6. Changes to Terms"),Ge(),Oe(33,"p"),Y(34,"We reserve the right to modify or replace these Terms at any time. We will provide notice of any significant changes."),Ge()()())},styles:[".policy-container[_ngcontent-%COMP%]{padding:40px 20px;max-width:800px;margin:0 auto;font-family:Roboto,sans-serif;line-height:1.6;color:#333}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:#1a237e}.last-updated[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:40px;font-style:italic}section[_ngcontent-%COMP%]{margin-bottom:30px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#283593;margin-bottom:15px;border-bottom:2px solid #e8eaf6;padding-bottom:8px}p[_ngcontent-%COMP%]{margin-bottom:15px}"]})};var Jte=()=>nee(["login"]),Zte=()=>iee(["dashboard"]),ene=[ie({path:"",component:XT},ob(Zte)),ie({path:"login",component:YT},ob(Zte)),{path:"logout",component:QT},ie({path:"dashboard",component:QC},ob(Jte)),ie({path:"profile",component:hA},ob(Jte)),{path:"banner",component:uD},{path:"no-internet",component:dD},{path:"notifications",component:fD},{path:"install-app",component:pD},{path:"privacy-policy",component:mD},{path:"terms-of-service",component:gD},{path:"**",redirectTo:""}];var S4="Service workers are disabled or not supported by this browser",v_=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new bt(i=>i.error(new ze(5601,!1)));else{let i=null,r=new Pt;this.worker=new bt(l=>(i!==null&&l.next(i),r.subscribe(u=>l.next(u))));let s=()=>{let{controller:l}=e;l!==null&&(i=l,r.next(i))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(hi(()=>e.getRegistration().then(l=>{if(!l)throw new ze(5601,!1);return l})));let o=new Pt;this.events=o.asObservable();let a=l=>{let{data:u}=l;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(Er,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(i=>{this.worker.pipe(ji(1)).subscribe(r=>{r.postMessage(ie({action:e},t)),i()})})}postMessageWithOperation(e,t,i){let r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=i=>i.type===e:t=i=>e.includes(i.type),this.events.pipe(ri(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ji(1))}waitForOperationCompleted(e){return new Promise((t,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(ri(r=>r.nonce===e),ji(1),yt(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:i})})}get isEnabled(){return!!this.serviceWorker}},aNe=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Pt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Tc,this.notificationClicks=Tc,this.notificationCloses=Tc,this.pushSubscriptionChanges=Tc,this.subscription=Tc;return}this.messages=this.sw.eventsOfType("PUSH").pipe(yt(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(yt(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(yt(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(yt(r=>r.data)),this.pushManager=this.sw.registration.pipe(yt(r=>r.pushManager));let i=this.pushManager.pipe(hi(r=>r.getSubscription()));this.subscription=new bt(r=>{let s=i.subscribe(r),o=this.subscriptionChanges.subscribe(r);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(S4));let i={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(hi(c=>c.subscribe(i)),ji(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(S4));let t=i=>{if(i===null)throw new ze(5602,!1);return i.unsubscribe().then(r=>{if(!r)throw new ze(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,r)=>{this.subscription.pipe(ji(1),hi(t)).subscribe({next:i,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||n)(st(v_))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),cNe=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Tc,this.unrecoverable=Tc;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S4));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new ze(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||n)(st(v_))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),nne=new Ce("");function lNe(){let n=H(ex);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=H(nne),t=H(Ct),i=H(Er);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,s=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",s),i.onDestroy(()=>{r.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:s}=n;if(typeof s=="function")r=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=tne(+a[0]||0);break;case"registerWhenStable":r=Promise.race([i.whenStable(),tne(+a[0])]);break;default:throw new ze(5600,!1)}}r.then(()=>{i.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(Da(5604,!1)))})})}function tne(n){return new Promise(e=>setTimeout(e,n))}function uNe(){let n=H(ex),e=H(Qt),t=!0;return new v_(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var ex=class{enabled;updateViaCache;type;scope;registrationStrategy};function ine(n,e={}){return br([aNe,cNe,{provide:nne,useValue:n},{provide:ex,useValue:e},{provide:v_,useFactory:uNe},Pp(lNe)])}var rne={providers:[b1(),$k(ene),n9(()=>i9(ed.firebase)),jG(()=>GG()),RK(()=>LK()),ine("sw-custom.js",{enabled:!Ay(),registrationStrategy:"registerWhenStable:30000"}),Pp(()=>H(y_).initialize())]};var dNe=["*",[["mat-toolbar-row"]]],hNe=["*","mat-toolbar-row"],fNe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),sne=(()=>{class n{_elementRef=H(nn);_platform=H(Ki);_document=H(Wt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Ms(s,fNe,5),i&2){let o;Ji(o=Zi())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Gc(r.color?"mat-"+r.color:""),li("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:hNe,decls:2,vars:0,template:function(i,r){i&1&&(mr(dNe),Qn(0),Qn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return n})();var _D=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di]})}return n})();var tx=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},T4=class extends tx{component;viewContainerRef;injector;projectableNodes;constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=r}},b_=class extends tx{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},C4=class extends tx{element;constructor(e){super(),this.element=e instanceof nn?e.nativeElement:e}},A4=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof T4)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof b_)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof C4)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},nx=class extends A4{outletElement;_appRef;_defaultInjector;constructor(e,t,i){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=i}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(Fc,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||Qt.NULL,s=r.get(si,i.injector);t=xE(e.component,{elementInjector:r,environmentInjector:s,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var one=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})();var mNe=20,vD=(()=>{class n{_ngZone=H(Ct);_platform=H(Ki);_renderer=H(xr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Pt;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=mNe){return this._platform.isBrowser?new bt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(Yx(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Et()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ri(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_scrollableContainsElement(t,i){let r=To(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gNe=20,x_=(()=>{class n{_platform=H(Ki);_listeners;_viewportSize;_change=new Pt;_document=H(Wt);constructor(){let t=H(Ct),i=H(xr).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(t=gNe){return t>0?this._change.pipe(Yx(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({})}return n})(),M4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[Di,yD,Di,yD]})}return n})();var ane=ZK();function pne(n){return new bD(n.get(x_),n.get(Wt))}var bD=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Xi(-this._previousScrollPosition.left),e.style.top=Xi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ane&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ane&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};function mne(n,e){return new xD(n.get(vD),n.get(Ct),n.get(x_),e)}var xD=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ri(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ix=class{enable(){}disable(){}attach(){}};function D4(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function cne(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}function CD(n,e){return new wD(n.get(vD),n.get(x_),n.get(Ct),e)}var wD=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();D4(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},gne=(()=>{class n{_injector=H(Qt);constructor(){}noop=()=>new ix;close=t=>mne(this._injector,t);block=()=>pne(this._injector);reposition=t=>CD(this._injector,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),w_=class{positionStrategy;scrollStrategy=new ix;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var ED=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var _ne=(()=>{class n{_attachedOverlays=[];_document=H(Wt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yne=(()=>{class n extends _ne{_ngZone=H(Ct);_renderer=H(xr).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vne=(()=>{class n extends _ne{_platform=H(Ki);_ngZone=H(Ct);_renderer=H(xr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0},s=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[s.listen(i,"pointerdown",this._pointerDownListener,r),s.listen(i,"click",this._clickListener,r),s.listen(i,"auxclick",this._clickListener,r),s.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=ks(t)};_clickListener=t=>{let i=ks(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(lne(a.overlayElement,i)||lne(a.overlayElement,r))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=wr(n)))(r||n)}})();static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lne(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var bne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return n})(),xne=(()=>{class n{_platform=H(Ki);_containerElement;_document=H(Wt);_styleLoader=H(Co);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||g3()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),g3()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(bne)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R4=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function P4(n){return n&&n.nodeType===1}var ID=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Pt;_attachments=new Pt;_detachments=new Pt;_positionStrategy;_scrollStrategy;_locationChanges=Nn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Pt;_outsidePointerEvents=new Pt;_afterNextRenderRef;constructor(e,t,i,r,s,o,a,c,l,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){this._attachHost();let t=this._portalOutlet.attach(e);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Va(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ie(ie({},this._config),e),this._updateElementSize()}setDirection(e){this._config=lt(ie({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Xi(this._config.width),e.height=Xi(this._config.height),e.minWidth=Xi(this._config.minWidth),e.minHeight=Xi(this._config.minHeight),e.maxWidth=Xi(this._config.maxWidth),e.maxHeight=Xi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachHost(){if(!this._host.parentElement){let e=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;P4(e)?e.after(this._host):e?.type==="parent"?e.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new R4(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=d3(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=Va(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},une="cdk-overlay-connected-position-bounding-box",_Ne=/([A-Za-z%]+)$/;function AD(n,e){return new SD(e,n.get(x_),n.get(Wt),n.get(Ki),n.get(xne))}var SD=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Pt;_resizeSubscription=Nn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(une),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(une),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}withPopoverLocation(e){return this._popoverLocation=e,this}getPopoverInsertionPoint(){return this._popoverLocation==="global"?null:this._popoverLocation!=="inline"?this._popoverLocation:this._origin instanceof nn?this._origin.nativeElement:P4(this._origin)?this._origin:null}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=hne(t),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,p=a+s.height-i.height,_=this._subtractOverflows(s.width,u,d),b=this._subtractOverflows(s.height,h,p),g=_*b;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=dne(this._overlayRef.getConfig().minHeight),a=dne(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=hne(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._getViewportMarginStart()?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._getViewportMarginTop()?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!yNe(this._lastScrollVisibility,i)){let r=new ED(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(t.overlayY==="top")o=e.y,s=i.height-o+this._getViewportMarginBottom();else if(t.overlayY==="bottom")a=i.height-e.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),s=i.height-a+this._getViewportMarginTop();else{let p=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=p*2,o=e.y-p,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,l=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),u=e.x-this._getViewportMarginStart();else if(c)d=e.x,u=i.right-e.x-this._getViewportMarginEnd();else{let p=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;u=p*2,d=e.x-p,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-_/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="auto",r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.width=Xi(i.width),r.height=Xi(i.height),r.top=Xi(i.top)||"auto",r.bottom=Xi(i.bottom)||"auto",r.left=Xi(i.left)||"auto",r.right=Xi(i.right)||"auto",t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Xi(s)),o&&(r.maxWidth=Xi(o))}this._lastBoundingBoxSize=i,Hf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Hf(i,this._getExactOverlayY(t,e,u)),Hf(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Xi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Xi(o.maxWidth):s&&(i.maxWidth="")),Hf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Xi(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Xi(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cne(e,i),isOriginOutsideView:D4(e,i),isOverlayClipped:cne(t,i),isOverlayOutsideView:D4(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._getViewportMarginTop(),left:i.left+this._getViewportMarginStart(),right:i.left+e-this._getViewportMarginEnd(),bottom:i.top+t-this._getViewportMarginBottom(),width:e-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:t-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&d3(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){let e=this._origin;if(e instanceof nn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function Hf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function dne(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(_Ne);return!t||t==="px"?parseFloat(e):null}return n||null}function hne(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function yNe(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var fne="cdk-global-overlay-wrapper";function wne(n){return new TD}var TD=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(fne),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",_="",b="";c?b="flex-start":u==="center"?(b="center",h?_=d:p=d):h?u==="left"||u==="end"?(b="flex-end",p=d):(u==="right"||u==="start")&&(b="flex-start",_=d):u==="left"||u==="start"?(b="flex-start",p=d):(u==="right"||u==="end")&&(b="flex-end",_=d),e.position=this._cssPosition,e.marginLeft=c?"0":p,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=b,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(fne),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Ene=(()=>{class n{_injector=H(Qt);constructor(){}global(){return wne()}flexibleConnectedTo(t){return AD(this._injector,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ine=new Ce("OVERLAY_DEFAULT_CONFIG");function MD(n,e){n.get(Co).load(bne);let t=n.get(xne),i=n.get(Wt),r=n.get(cf),s=n.get(Er),o=n.get(I0),a=n.get(Or,null,{optional:!0})||n.get(xr).createRenderer(null,null),c=new w_(e),l=n.get(Ine,null,{optional:!0})?.usePopover??!0;c.direction=c.direction||o.value,"showPopover"in i.body?c.usePopover=e?.usePopover??l:c.usePopover=!1;let u=i.createElement("div"),d=i.createElement("div");u.id=r.getId("cdk-overlay-"),u.classList.add("cdk-overlay-pane"),d.appendChild(u),c.usePopover&&(d.setAttribute("popover","manual"),d.classList.add("cdk-overlay-popover"));let h=c.usePopover?c.positionStrategy?.getPopoverInsertionPoint?.():null;return t.getContainerElement().appendChild(d),P4(h)?h.after(d):h?.type==="parent"&&h.element.appendChild(d),new ID(new nx(u,s,n),d,u,c,n.get(Ct),n.get(yne),i,n.get(wu),n.get(vne),e?.disableAnimations??n.get(_y,null,{optional:!0})==="NoopAnimations",n.get(si),a)}var Sne=(()=>{class n{scrollStrategies=H(gne);_positionBuilder=H(Ene);_injector=H(Qt);constructor(){}create(t){return MD(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var k4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({providers:[Sne],imports:[Di,one,M4,M4]})}return n})();var wNe=["mat-menu-item",""],ENe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],INe=["mat-icon, [matMenuItemIcon]","*"];function SNe(n,e){n&1&&(Yr(),ce(0,"svg",2),En(1,"polygon",3),le())}var TNe=["*"];function CNe(n,e){if(n&1){let t=Qi();Oe(0,"div",0),Ua("click",function(){Gn(t);let r=An();return Wn(r.closed.emit("click"))})("animationstart",function(r){Gn(t);let s=An();return Wn(s._onAnimationStart(r.animationName))})("animationend",function(r){Gn(t);let s=An();return Wn(s._onAnimationDone(r.animationName))})("animationcancel",function(r){Gn(t);let s=An();return Wn(s._onAnimationDone(r.animationName))}),Oe(1,"div",1),Qn(2),Ge()()}if(n&2){let t=An();Gc(t._classList),li("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation",t._panelAnimationState==="void")("mat-menu-panel-animating",t._isAnimating()),hE("id",t.panelId),gi("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var O4=new Ce("MAT_MENU_PANEL"),rx=(()=>{class n{_elementRef=H(nn);_document=H(Wt);_focusMonitor=H(lg);_parentMenu=H(O4,{optional:!0});_changeDetectorRef=H(Qr);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new Pt;_focused=new Pt;_highlighted=!1;_triggersSubmenu=!1;constructor(){H(Co).load(dg),this._parentMenu?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&Ln("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(gi("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),li("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Ni],disableRipple:[2,"disableRipple","disableRipple",Ni]},exportAs:["matMenuItem"],attrs:wNe,ngContentSelectors:INe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(mr(ENe),Qn(0),ce(1,"span",0),Qn(2,1),le(),En(3,"div",1),kp(4,SNe,2,0,":svg:svg",2)),i&2&&(ot(3),Cn("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),ot(),Np(r._triggersSubmenu?4:-1))},dependencies:[sX],encapsulation:2,changeDetection:0})}return n})();var ANe=new Ce("MatMenuContent");var MNe=new Ce("mat-menu-default-options",{providedIn:"root",factory:()=>({overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"})}),N4="_mat-menu-enter",DD="_mat-menu-exit",I_=(()=>{class n{_elementRef=H(nn);_changeDetectorRef=H(Qr);_injector=H(Qt);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=fa();_allItems;_directDescendantItems=new Oc;_classList={};_panelAnimationState="void";_animationDone=new Pt;_isAnimating=$n(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){let i=this._previousPanelClass,r=ie({},this._classList);i&&i.length&&i.split(" ").forEach(s=>{r[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{r[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new vn;close=this.closed;panelId=H(cf).getId("mat-menu-panel-");constructor(){let t=H(MNe);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new x0(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Ac(this._directDescendantItems),hi(t=>qd(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Ac(this._directDescendantItems),hi(i=>qd(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let i=t.keyCode,r=this._keyManager;switch(i){case 27:zT(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(t);return}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Va(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,i=this.yPosition){this._classList=lt(ie({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(t){let i=t===DD;(i||t===N4)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(t){(t===N4||t===DD)&&this._isAnimating.set(!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(DD),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?N4:DD)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Ac(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=at({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,s){if(i&1&&(Ms(s,ANe,5),Ms(s,rx,5),Ms(s,rx,4)),i&2){let o;Ji(o=Zi())&&(r.lazyContent=o.first),Ji(o=Zi())&&(r._allItems=o),Ji(o=Zi())&&(r.items=o)}},viewQuery:function(i,r){if(i&1&&jc(Qs,5),i&2){let s;Ji(s=Zi())&&(r.templateRef=s.first)}},hostVars:3,hostBindings:function(i,r){i&2&&gi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Ni],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:Ni(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Rs([{provide:O4,useExisting:n}])],ngContentSelectors:TNe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(mr(),cE(0,CNe,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{border-top-color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),DNe=new Ce("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=H(Qt);return()=>CD(n)}});var E_=new WeakMap,RNe=(()=>{class n{_canHaveBackdrop;_element=H(nn);_viewContainerRef=H(As);_menuItemInstance=H(rx,{optional:!0,self:!0});_dir=H(I0,{optional:!0});_focusMonitor=H(lg);_ngZone=H(Ct);_injector=H(Qt);_scrollStrategy=H(DNe);_changeDetectorRef=H(Qr);_animationsDisabled=fa();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Nn.EMPTY;_menuCloseSubscription=Nn.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(t){t!==this._menuInternal&&(this._menuInternal=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(t){this._canHaveBackdrop=t;let i=H(O4,{optional:!0});this._parentMaterialMenu=i instanceof I_?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&E_.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(t){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let r=E_.get(i);E_.set(i,this),r&&r!==this&&r._closeMenu();let s=this._createOverlay(i),o=s.getConfig(),a=o.positionStrategy;this._setPosition(i,a),this._canHaveBackdrop?o.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:o.hasBackdrop=!1,s.hasAttached()||(s.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,t&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof I_&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Aa(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}_destroyMenu(t){let i=this._overlayRef,r=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),r instanceof I_&&this._ownsMenu(r)?(this._pendingRemoval=r._animationDone.pipe(ji(1)).subscribe(()=>{i.detach(),E_.has(r)||r.lazyContent?.detach()}),r._setIsOpen(!1)):(i.detach(),r?.lazyContent?.detach()),r&&this._ownsMenu(r)&&E_.delete(r),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=MD(this._injector,i),this._overlayRef.keydownEvents().subscribe(r=>{this._menu instanceof I_&&this._menu._handleKeydown(r)})}return this._overlayRef}_getOverlayConfig(t){return new w_({positionStrategy:AD(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{this._ngZone.run(()=>{let s=r.connectionPair.overlayX==="start"?"after":"before",o=r.connectionPair.overlayY==="top"?"below":"above";t.setPositionClasses(s,o)})})}_setPosition(t,i){let[r,s]=t.xPosition==="before"?["end","start"]:["start","end"],[o,a]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,d]=[r,s],h=0;if(this._triggersSubmenu()){if(d=r=t.xPosition==="before"?"start":"end",s=u=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let p=this._parentMaterialMenu.items.first;this._parentInnerPadding=p?p._getHostElement().offsetTop:0}h=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c=o==="top"?"bottom":"top",l=a==="top"?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:h},{originX:s,originY:c,overlayX:d,overlayY:o,offsetY:h},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-h},{originX:s,originY:l,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){let t=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Et(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ri(o=>this._menuOpen&&o!==this._menuItemInstance)):Et();return qd(t,r,s,i)}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new b_(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return E_.get(t)===this}static \u0275fac=function(i){oE()};static \u0275dir=It({type:n})}return n})(),Tne=(()=>{class n extends RNe{_cleanupTouchstart;_hoverSubscription=Nn.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){this._menu=t}menuData;restoreFocus=!0;menuOpened=new vn;onMenuOpen=this.menuOpened;menuClosed=new vn;onMenuClose=this.menuClosed;constructor(){super(!0);let t=H(Or);this._cleanupTouchstart=t.listen(this._element.nativeElement,"touchstart",i=>{of(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(t){return t.backdropClick()}_handleMousedown(t){sf(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let i=t.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&Ln("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),i&2&&gi("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu==null?null:r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[pi]})}return n})();var Cne=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=rn({type:n});static \u0275inj=Jt({imports:[hg,k4,Di,yD]})}return n})();function kNe(n,e){n&1&&(gh(0),ce(1,"a",13)(2,"mat-icon"),Y(3,"dashboard"),le(),Y(4," Dashboard "),le(),ce(5,"a",14)(6,"mat-icon"),Y(7,"notifications"),le(),Y(8," Notifications "),le(),ce(9,"a",15)(10,"mat-icon"),Y(11,"person"),le(),Y(12," Profile "),le(),_h())}function NNe(n,e){n&1&&(gh(0),ce(1,"a",16)(2,"mat-icon"),Y(3,"dashboard"),le(),ce(4,"span"),Y(5,"Dashboard"),le()(),ce(6,"a",17)(7,"mat-icon"),Y(8,"notifications"),le(),ce(9,"span"),Y(10,"Notifications"),le()(),ce(11,"a",18)(12,"mat-icon"),Y(13,"person"),le(),ce(14,"span"),Y(15,"Profile"),le()(),_h())}var RD=class n{authService=H(is);user$=this.authService.user$;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-header"]],decls:26,vars:7,consts:[["menu","matMenu"],["color","primary",1,"app-header"],["routerLink","/",1,"logo"],["src","icons/la-logo.png","alt","LA Logo",1,"logo-img"],[1,"logo-text"],[1,"spacer"],[1,"desktop-nav"],["mat-button","","href","https://la.vvsk.in","target","_blank"],[4,"ngIf"],[1,"mobile-nav"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","","href","https://la.vvsk.in","target","_blank"],["mat-button","","routerLink","/dashboard"],["mat-button","","routerLink","/notifications"],["mat-button","","routerLink","/profile"],["mat-menu-item","","routerLink","/dashboard"],["mat-menu-item","","routerLink","/notifications"],["mat-menu-item","","routerLink","/profile"]],template:function(t,i){if(t&1&&(ce(0,"mat-toolbar",1)(1,"div",2),En(2,"img",3),ce(3,"span",4),Y(4,"Lifestyle Adapter"),le()(),En(5,"span",5),ce(6,"div",6)(7,"a",7)(8,"mat-icon"),Y(9,"library_books"),le(),Y(10," LA Framework 1.0 "),le(),Lr(11,kNe,13,0,"ng-container",8),vu(12,"async"),le(),ce(13,"div",9)(14,"button",10)(15,"mat-icon"),Y(16,"menu"),le()(),ce(17,"mat-menu",11,0)(19,"a",12)(20,"mat-icon"),Y(21,"library_books"),le(),ce(22,"span"),Y(23,"LA Framework 1.0"),le()(),Lr(24,NNe,16,0,"ng-container",8),vu(25,"async"),le()()()),t&2){let r=fE(18);ot(11),Cn("ngIf",bu(12,3,i.user$)),ot(3),Cn("matMenuTriggerFor",r),ot(10),Cn("ngIf",bu(25,5,i.user$))}},dependencies:[_D,sne,Mo,fg,w3,Jp,Ps,Qo,Ns,rc,Cne,I_,rx,Tne,vh],styles:[".app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer}.logo-img[_ngcontent-%COMP%]{height:40px;width:auto}.logo-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;letter-spacing:.5px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mobile-nav[_ngcontent-%COMP%]{display:none}@media(max-width:768px){.desktop-nav[_ngcontent-%COMP%]{display:none}.mobile-nav[_ngcontent-%COMP%]{display:block}.logo-text[_ngcontent-%COMP%]{font-size:1rem}.logo-img[_ngcontent-%COMP%]{height:32px}}"]})};var PD=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/privacy-policy"],["routerLink","/terms-of-service"]],template:function(t,i){t&1&&(ce(0,"footer",0)(1,"div",1)(2,"p"),Y(3,"\xA9 2025 Lifestyle Adapter. All rights reserved."),le(),ce(4,"div",2)(5,"a",3),Y(6,"Privacy Policy"),le(),ce(7,"a",4),Y(8,"Terms of Service"),le()()()())},dependencies:[_D,Jp],styles:[".app-footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:20px 0;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;margin-left:20px;font-size:.9rem;transition:color .3s}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px}}"]})};var kD=class n{title="lifestyle-adapter";router=H(Ur);ngOnInit(){window.matchMedia("(display-mode: standalone)").matches&&(navigator.onLine||this.router.navigate(["/no-internet"]))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"app-container"],[1,"app-header"],[1,"app-main"],[1,"app-footer"]],template:function(t,i){t&1&&(ce(0,"div",0),En(1,"app-header",1),ce(2,"main",2),En(3,"router-outlet"),le(),En(4,"app-footer",3),le())},dependencies:[Yy,RD,PD],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.app-header[_ngcontent-%COMP%], .app-footer[_ngcontent-%COMP%]{flex-shrink:0}.app-main[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}"]})};_k(kD,rne).catch(n=>console.error(n));
