<section class="card" aria-labelledby="daily-title">
    <div class="section-title">
        <h3 id="daily-title">Daily Loop</h3>
        <small>First 3 habits</small>
    </div>

    <div class="progress-wrap">
        <div style="display:flex;justify-content:space-between;margin-bottom:6px">
            <div style="font-size:12px;color:var(--muted)">Completion</div>
            <div style="font-weight:700">{{ progressPercentage }}%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-inner" [style.width.%]="progressPercentage"></div>
        </div>
    </div>

    <div class="habit-list">
        @for (hab of habits; track hab.id) {
        <div class="habit">
            <div class="name">
                <div style="font-weight:700">{{ hab.name }}</div>
                <div style="font-size:12px;color:var(--muted)">
                    {{ hab.status === 'done' ? 'Completed' : (hab.status === 'skipped' ? 'Skipped' : 'Pending') }}
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-skip" (click)="toggleSkip(hab)">
                    {{ hab.status === 'skipped' ? 'Skipped' : 'Skip' }}
                </button>
                <button class="btn btn-done" (click)="toggleDone(hab)">
                    {{ hab.status === 'done' ? 'Done' : 'Done' }}
                </button>
            </div>
        </div>
        }
    </div>
</section>