<div class="dashboard-container" *ngIf="user$ | async as user">
    <div class="welcome-section">
        <h1>Welcome back, {{ user.name?.split(' ')?.[0] || 'User' }}!</h1>
        <p class="subtitle">Here's your lifestyle overview for today.</p>
    </div>

    <div class="stats-grid">
        <!-- Main Score Card -->
        <mat-card class="stat-card main-score-card">
            <mat-card-header>
                <mat-card-title>LA Score</mat-card-title>
                <mat-icon class="card-icon" color="primary">speed</mat-icon>
            </mat-card-header>
            <mat-card-content>
                <div class="score-value">{{ laScore }}</div>
                <div class="chart-wrapper small-chart">
                    <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>

        <!-- Quick Stats -->
        <app-health-meter class="stat-card" [value]="78" style="grid-column: span 1;"></app-health-meter>
        <app-wealth-meter class="stat-card" [value]="61" style="grid-column: span 1;"></app-wealth-meter>

        <app-daily-loop class="stat-card" style="grid-column: span 1;"></app-daily-loop>
    </div>

    <!-- Detailed Charts -->
    <div class="charts-section">
        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>Weekly Progress</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="chart-wrapper main-chart">
                    <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="lineChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>