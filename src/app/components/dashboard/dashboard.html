<div class="dashboard-container" *ngIf="user$ | async as user">
    <div class="welcome-section">
        <h1>Welcome back, {{ user.displayName?.split(' ')?.[0] || 'User' }}!</h1>
        <p class="subtitle">Here's your lifestyle overview for today.</p>
    </div>

    <div class="stats-grid">
        <!-- Main Score Card -->
        <mat-card class="stat-card main-score-card">
            <mat-card-header>
                <mat-card-title>LA Score</mat-card-title>
                <mat-icon class="card-icon" color="primary">speed</mat-icon>
            </mat-card-header>
            <mat-card-content>
                <div class="score-value">{{ laScore }}</div>
                <div class="chart-wrapper small-chart">
                    <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>

        <!-- Quick Stats -->
        <mat-card class="stat-card">
            <mat-card-header>
                <mat-card-title>Streak</mat-card-title>
                <mat-icon class="card-icon" color="accent">local_fire_department</mat-icon>
            </mat-card-header>
            <mat-card-content>
                <div class="stat-value">5 Days</div>
                <p class="stat-desc">Keep it up!</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
            <mat-card-header>
                <mat-card-title>Habits</mat-card-title>
                <mat-icon class="card-icon" color="warn">check_circle</mat-icon>
            </mat-card-header>
            <mat-card-content>
                <div class="stat-value">8/10</div>
                <p class="stat-desc">Completed today</p>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- Detailed Charts -->
    <div class="charts-section">
        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>Weekly Progress</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="chart-wrapper main-chart">
                    <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="lineChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>